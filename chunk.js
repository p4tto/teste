/*! For license information please see main.e54bcd78.chunk.js.LICENSE.txt */
(this.webpackJsonpclient = this.webpackJsonpclient || []).push([
  [0],
  {
    110: function (e) {
      e.exports = JSON.parse(
        '[{"id":0,"stringId":"box","name":"Box"},{"id":1,"stringId":"ninja","name":"Ninja"},{"id":2,"stringId":"knight_gold","name":"Gold Knight"},{"id":3,"stringId":"pixel","name":"Pixel"},{"id":4,"stringId":"gorilla_yellow","name":"Yellow Gorilla"},{"id":5,"stringId":"gorilla_blue","name":"Blue Gorilla"},{"id":6,"stringId":"gorilla_red","name":"Red Gorilla"},{"id":7,"stringId":"gorilla_black","name":"Black Gorilla"},{"id":8,"stringId":"lynx","name":"Lynx"}]'
      );
    },
    145: function (e, t, n) {},
    213: function (e, t, n) {
      e.exports = n.p + "static/media/rooms.3c96a6bb.png";
    },
    214: function (e, t, n) {},
    236: function (e, t, n) {
      e.exports = n(521);
    },
    241: function (e, t, n) {},
    243: function (e, t, n) {},
    266: function (e, t, n) {},
    402: function (e, t, n) {},
    405: function (e, t, n) {},
    406: function (e, t, n) {},
    470: function (e, t, n) {},
    480: function (e, t, n) {},
    481: function (e, t, n) {
      e.exports = n.p + "static/media/dj3d_logo.e04be4e7.png";
    },
    482: function (e, t, n) {},
    483: function (e, t, n) {},
    485: function (e, t, n) {},
    486: function (e, t, n) {},
    491: function (e, t, n) {},
    503: function (e, t, n) {},
    504: function (e, t, n) {},
    505: function (e, t, n) {},
    507: function (e, t, n) {
      e.exports = n.p + "static/media/chat.f6e8e59d.png";
    },
    508: function (e, t, n) {
      e.exports = n.p + "static/media/controls.2e5cf3fa.png";
    },
    509: function (e, t, n) {
      e.exports = n.p + "static/media/video_chat.b34c0a85.png";
    },
    510: function (e, t) {
      e.exports =
        "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAAEH5aXCAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAZKADAAQAAAABAAAAZAAAAAAMc/x7AAAFH0lEQVR4Ae2dT6hPQRTH/U2USImytbBRUkokUjaUjSwsWLyit/BnIXtlo5TEgsjCwsqelFJKSkkpGyRF+RNREvn/PT93fubOm7nvzP3d37vn/t53arr3njkzc87nzJ2Z37z3e2/GjKlKM11Hf5Dcfew6EykmH66s36VN8/rOi3mRtFsUCvlap9z3yQliV6nk5IJ+lnvQXLNihY5WahptWadHzaeSsifL+VQjKnnXTBIyjqCjNOlgdBUKIp8mJSMVivRqUmVREGWVYqtKJVBNmOwi4HuV9Zb7Fc3dE1f9kBRvj/bSW2Skt6LCm1TPc4KCw8Fz1ePDoHCZ/wrEhnKgn/dY4fpqaSn0JK/1iHbjHkT6oGhwAqMzrYzOVD94VK20wNFlJRKjaEft0eUvTsWyOwuy6Ka5yWnlt7/G+xEJl9+cjYTfTv++6OgSvDrghCVcTph7TXmAduags19N4ppgm3QgwhDXBMU6AjReItS0JyfDDuoYGa1TEZOoPoUkQAIBgdK775dZebu000fT85bPYkrvR8aRKaXGzhQEql72Q4r6Q1fBy35O00mVI9HtrKbRJnWm3azVJDy2RQIaArJFGVLqn4X7dhR99U6Ofbn23trK/siDp5p2naPWHHF2yfWg59R73Fu29b/dntGa2/X/a/67Sy6IoeKwn8X6Gn28xYK5XOp1I1xlD0/Lal+knhPl4pafJhlPq1o2T9994MgLfU1jmnDkuDGTaA4JkAAJkMA0IhDdNMoqa4GB7Ke0dnRx0xj1jY5EsbQoZERahM+uSYAEpjOB6BYAO5RO/bRKAphyhHuttoY3V/a2yKf6HZmIpByknARIgAQ6RECOg4aVYhjQ127kO7EyrczSOrKpgLdPa7yvZ8kRZ9cVOPQTebETaK4WHRG7ZyN/hDP3NE6IjlVHnP3ri+G23wlS19R3CQb+Ckaqw5ryi3DoAuouw3Hw+5ptDL8ajJRZS5sexCyyPrRiNq8tPD7oF3bREWf/OTi01z2k3hFXbvV6B+/KZt+4rjnyE8YvgROffSfkvktDaw8cmBtzQhzpQkRuwfhtYmxVsuzIdxguw+hLlQOuzOrQ2gUH5mmdEGesReQ6jN/hKOdcrTjyFUbPhxPfcoynLgmQAAmQAAmQAAmQAAmQAAm0SyD6Wygpk+RsL1U2HeX4CJjFT8PI6qmDxvaR1GFAjIWVAWFAjBEwZk7uOel2Y/bTHBIgARIgARIgARKwSSDroz+PTspB5NFJmcdIPvGTurGwMiAMiDECxszJPTp5Zsx+mkMCJEACJEACJEACNgnkHp08telGpVWHccRxo1KjKMTR0BbcroD+VY1+6zpyltXBFP0L7jGY8M3/7qZ8t/kM8qKY7rBk/KSeJivf0T6C/KkYhHdxXZNWb6aEAdFz3ADVh0Vw3uE6hpw15Wu6YkA0lCbqLIXoMrL8D8ZfyOeRl0xUy5cwIPnMwhrCcBz5A4Ii6T7yulCJzzUIAKS/qAvcQZMEaRxZPfDVijX8YxV8tRsQziPLtCbT22Vkme6SiQFJomm8QDYAY8iyIZAkG4SNYS8MSEhk+M/yn4TPIm/BB9C7YXe5Pw8J6/NZR+A11I5pTgAYEB3QOlq3UekQgvA4pzKnrBxa1bo/UHwKeSGCIGkrclYwpHm+IUKhfnqJqkcB/lr9Jso1GZAyD83TTSjJCfITjTJ1BiCAbWjsg+E3yE8gLxigaVatQ8ALyHPc76zTBuuQAAmQAAmQAAmQQI/AX6EvXeFvmD8uAAAAAElFTkSuQmCC";
    },
    511: function (e, t, n) {
      e.exports = n.p + "static/media/parkour.20f14181.png";
    },
    512: function (e, t) {
      e.exports =
        "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAAEH5aXCAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAZKADAAQAAAABAAAAZAAAAAAMc/x7AAAQW0lEQVR4Ae1de4wV1R0+d1/sLiCsAouyu7CCFrrgA62NCFIEnxULKqxiSvAPjUktUatNrFKVtGlj/4CYqJhgFG2jxdgUFNQIBaVWiVh8rIIigSKCvFyQx7oge/p9d3bmnjN3ztyZuXPvXpZ7kt+d8/o9zzlz3nOFiMtJIaQC57rpJtQIZlTDqh8ZnbyOxw/BRrYRS+yI5HPBAl0wVUhksAknOdmBpCYaFSWQsIQiN52Tkkcw0yOPqDG6n5ySIBX32mtKAN7OPA6mnDr13DQkHUVDsgQFOpEcKgYP9WGSo5MdYcjP6B/sNIeTHeHFMQBBGz2XT4j2a4rXCR1uXpouXnrYCLY+DoJfZhUpaWInsy2I+zlwoI1jFYyG4CS5PKx3w4c/m4wlgqyrS1WQ8eMtHqkYh6dT6mLnTp0ks3i4pNJBRaKlbA6zk8Qopwk6uSU50O9w6UxwP0iKcTYHhhjR5M7IsJ3ZK+0EiIMt1tEeAeFXJpWSBnMnZjK0O7877LatUyDMCOL/zZZBJx1qP8LNXMhx4+4kAwfUah7Gr9BIZ6IkyspKb7JsZ/X13ml2rEoHfjLSzOVwPvVUx5vm+eorqxUdP56WlDFClpf/4JiK0kR1qiYNDb8lY612kYkjTZ8+Quzf7wQDefieUJy7ljlJmjaqVOH8ax2Cfp6IzN71o5kxDUyf9WCctHlG5JMnA0xUDtjmYSq+HVYHsYRe5xQMEGBDDdzijNUVRDxbPBgsDcOAsnVqehH9GR0yf96JkHpZhmsjl/kyAfHmLBkkBXMz0cqEDNwZoobVMnLKBNQ/1AhGMZZCAPR+pAQtL7VwoKUl2jv4rLNSNNKsIiXbQipDNBZSLl2aoqEwSZpLNjf71whbb77K9+yxQ+nPc85Jj0OMVSabN9/jmeoVOWCA1TN6pbEP8nAWk46Ogx5p5qhLLvFO60ibVyTzlSV/Bwx4CM8bvDGVWJrLQCiZq7VVyez2SpmIpeCfftqz4B12GpNFi6LVr969U0wSlNvlEDNXY7RlSzhG8+alGFjNodRmkd/XSifXcpt7Nk/1vUU6VhXupIhEzs9ndAYjPdwMjERQNg1a+aivHB+/kaBfAhh9F5DZS350AqWB0XhAq4thC8KnByJQzBTCAlpbDIHnmxVF1U/U148WNTVXiPLykchcDdgp2treF7t2LRP79m0B4+99ieQzkQID1gPcb60o4YfyKTtHZbGM/jIovxvpzis8VgVBONvxcZRSIs70WBQBoVcAUYWIE6/OTyFjY4fw7MoCz7H8mMSY9h8I7Dnc81QESvQDc/Not6ZGiGnThJgwATMDTA04Zu3RQ4iKCsxfMT4oRfUuw4DRXie1NWH5cFT4A7p3wrFjQhw9KsRBjFy5IvTxx5hBYgq5cqWN4fU8CKFP8UrQ4uTtt+vTB7VajRsXbgyWTe7jx83VMpH4QBPaKyB79TKtB2QjVjTc++83KzNx4jgv+ZNxKA32C2bkMOKMHSvlq6+GwUjP++mnZlnKy7XZiTY2FZs332/Ush+bTQjHdnLttal2Qn9Y17+/GePYsb5qoq7IgQPmRZdqjjKycMuWpZS6++5ghPgCCeh0RYYP56qTt/vuO+/4ILG1tRhp7UxV2nnzgmAJceRIsHzuXDukrI6tjTz/fHqdDxuzdq25jQwc+Ilbfi0sq6reNipz9GhYUbLL39xsVmTVqtRupaaBEmC35amMaR8lO3G9sdesMSshxB8UcZNez56dKVTEnTktzJ68vl6IQYOEYDs47TQhevUSomdPC5jOHp5vMPbi7M2/xzTk0CEhDh/GLBftbu9eIb7+Wojt24XYvTuNhUfEyxD6Ro94cxQ0+dazZFLN1s9quUhrNkubIQWK/LQAlMnilelSEMpM6gKF4lPApU8yCIX+nWOlbvbim9M4KNQE+CBLxf6YUyGLxIsWKFqg+1jAOESJqiLeXhXilFMaRF3d1aKycowoKTkDtL7HEGUjhiQrxJYta8E00FgkqgyR8SD8MMAywFFA0KHJDuT9HaAqMuO4ECEEjyfqZ3OCK6IqzFXMxrjkCkwHTKcBVEHi8lOh/JQQGH2ZIyVUY/wmsFXDZoTwjXlQQFUm8yJcBCXG5lkJW6FvwspqzA8FRnSRErYyu4zCKQm+/QgUwJxVYF7a5a4Fgo7yk0Jf10rP+W16VJfEjIRR50TiDMRnurhK2VVLfRq3EzyrFhTABogolNJQC+JrCOy5c2VS5HNgn61S0Pxjxghx/fVCnHceTkk0YNsFhuLSj7r8wyUgbvTYzrYrj/baGz3c5CFwGWjTJiHWrBFi8WIhvvF9WZ0Hqh/ZZI1PloaxSlVVSckNmFy7JUtstb2eWEQO4GSfPn8zKnLkSK5VSNGfOdNLCSuupsb7DJqqn8Q5KE9F+vZNMcmH7+BBbzk4xmtoeEqVmX7t9SsXLhycHAq6czE8frxXbO7iuPRqcnv23OJO0hQRc+ea15PGmbfs3ERzHm5r6/kwtkBUProifgcPhw9X8fz9XJi+9FL/PEFS+TY0uIcuvniwmqQrsn37OWqi5j+DM9aAjq9evkr5+g26O+VF2u+mxuDB16oouiIdHegMDI5bBVHcPfdYCq1eHR7bcEA2SWj9+stUgroiaorbzxMN2TiekuA+yrZtwalUVprztrc3qonBFVF7aZVCGP+OHRjDYhD7bcDRT4mveNqWr29OTcYot4ZUAjTE668LceCAEH51X8XhUMbkpNSsEVwRbp1FdQ8+aB2mufLKcBS4PWdyQ4e2qEnY4FNcdfU+7G1jI9DD7dvnEZkhauJEId54w9pDzJDVM9nvDHlt7XIVRy+RIUNWqYmaf+tWLegbYN3eskWIFSuiK0EGfsY7cmS1KoOuyOHDL6iJmv+jzCNnJz9fm0OGOMHIHg7xDS6xZInWRrRs6PYrpWnhbfTofAwVdR4mWaqrN2uCewVkWdlhT2XKynQmuQ6995559Dt58nQv2bU43LOc6akIrfPcc7kWP0W/psasiGvUrimgBoyKUJk5c1LMcuHbu9e6VmuqVkK8pMpq+9FLpTsoMhexmZdfeGSDRzg4oOQhMTZyjsl6904d1uQRDh7IZD9EYN9A4DEOvpV444nHN3g4k8c7MrtyCO3TU7oI+JaK2Vp+1SGOtCdcYjpBzxJhKhS5EI/3nZxd72mHsMZRpN6PKMICaR2C5n5FyZsnL+pwFg4l878CqGbTslAhhQpFuvK40wMpSWLwQZmvuqBkbo1B9HQSUOTlPCpzQboEMcZAkQk5VuYz0De+TWNUxSIFZk/GrNAx0BsTu6BBCYL5vVkq9AXwLwrKL+f5IAxX8WcDMn0m5iDy/B1wRc6FKjIoWqBogaIFihYoWuCkskD+RmYhzYpufwhQRgC4hdYE4MYfjiYkj2SYd6OQQXFcodgPwO0UwRMQGwAfAjYCNkH543gWnWoBGL4v4BeAvwL2AuJYaQlD4xB4LgX8EhBik1TV4gT2Q+nTAPxQIOdOYQyXz7zbIdvDALbI7uegGM+mPgPg/C+fho2L13LIndvVg1wXOxToCfgTIMxB+bgMmCs6vGH6PGBgru0XG30I+2PAWkCujFIodLmE/LPYDBc3IQg3DrD5JCgId4XYB51vituekelBmMGATCtYbiW6Y5hL+123PsoShAB/BnRH42aj0z9gkx5Ra3ikiSEYNoIhTsmIM6My7uZ4vJ5yDYyLw5zhnHEj10QGhXEj0r4AFAvDZCR87AJJ/IBJ5nMWLhqhWggY3An8xwCh8Fw89SA/pFOFy4Y8NM4P+dDPJ8H+Spd9iUO9yMHjbCqQKg+HEPjC4alL++td9oUO+9nebh0Q4eERfv+mrc06RMInIV73OMjNhsEgWIyOhQEI/24tL5fy5pulXLlSynx/2iau40rr1kk5e7bEx8bC62/ZbEGMRQGKpaVTUBjtoQqkpETKRx+NyySFQ2fxYil79oxSMDhLH4OT1103TFZUcKwdXIjSUikff7xwjBi3JG++KfGRq+D2oO0SiQ55ww1XZlUkt/O76DU1XMcJx3zkSCnb2uI2Q2HRmzIlnE1ow+rqz2Rra1+/QvEdZT3V1DQJnR5Os4d0kybhhJ7xiF5IYgWa/aqrwgvW1jZCNDXdgqIpNSEbC+QveFPiq2QzRHt70M2gFI/zz0/54/TxOO3bb1vfOY2TbhRa/KMCHvsN49imSkpulTNm1JjQjAVy74QJp+OWxOUmRGM8h6KNjcbkrBJ41nkOhva8wcfz0Lfdhl2Vz7IiGRmZZ7PDfjiUzLZvH40h+VgTX2OB4ED4NTjgXWtCNMbTUFEENRJ0JdjX09haFi7E5i52dxnH62aLFkX/rqaLTcYgD8n39e0OTCQSorX156ZEc4Fs2HCxCck3nhM6TuDy7VpahJg1y7pNwFsF9H/ObfQcOU5a/W5A+7HduPFcU7K5QMrKBpmQfOPtb1/7ZspxIr+8ydbCC9FsPcOGWXeD/a79hRWJ/UfUW7ElJXjfeTtzr4R5tTdKhlh7MJghW16SWYunT8fCxWzcFbkwXpb2Ek0UqlKiM/R25gLp0WMDUMIPeXmJyO8mrbcc8cWOHCnEffcJMXWq1fHHR1mnxAFGsAtTOh5DpaVb0yOtGPMrq65uBYZoPNcUzrGzjfrB6nCcrNyc79xxhxCffGJNX/mcOTO3hUHOXITkde8obtSoNSY0c4FUVLyLkRZbSThHQd3/ZBuOgjk3XxOkf/bZQsyfn1qpffJJIdgy8unYH/nd4DbJUlp6CDq8Yko2x0tZIc8885HQyyasp/PnF9YyRy6kWb7c7i3DPUeMePEV12db1EIwt5BE4qhobn4BQ7tAX3lTiYp33tGC3TKwdm14taqq2nHJ9+nJiQQ2YSI6ecEFc4yfcDItOvbrJ+WXX+aiXhYGTS6cjhoVrmXQVv37v4hfcyMIUkZy1qzKSCu+kydjcHesMAwYtxR33RW+MBKJTXLo0AFBbJ4xD/qRMwCbQvcntbVSLlsWtzm6jt769dFaBk7gw3Y/yWhoZMA0NpgDwUbkfBdQGwzDlWvoUCHGYk2NK8GcOQ/EaUz+2xWXWuxZL5/88haf9n65i0wsQdZv7rnbwHkT5xV8cm7B0dMudJ1bt1r/nPXWW7jIsMHaow8vACeBV8HQ/wqCGrhASAxqNOBBwrBu0QWwwH7kuRpGfi9A3mSWUB0MCG8DFpZVxZtBGZzE+TZB96YwhZGVrdBaeLObp8HDd3DdH2cB7FKelYGjIIPpQEBcf2vaHQqW/0k4OootY8WBEPxSxS5AdzBqFB3aoPusWI0aBzEIdROA/3UbRakTEYcF8QAgVF8ch61D0YCAlwBaACeikYPIzDuIN4YySiFkhtD8COLvAZwYBVG0kPPwfuQTgGjzsEIoEFUGKNIHMAfA2lXIhldla4WsLIRBqi7dzg8FE4ALAU8B+I9IqhG60s+vtS0GXA7I/7AVJR1qpp7LmgED8EwNT7pMAVwKqAfgrE1OHO4jiB0ArqH/E7AKhtiNZ5e7gikQkyU6ayoLiyul2Cp0gK8Rnt7AxRLnChkPZmAPOflvKDQ4Z8sEngfaCdgPhbFYVXRFCxQtULRA0QIxWOD/p0o1VGkHOKYAAAAASUVORK5CYII=";
    },
    513: function (e, t) {
      e.exports =
        "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAAEH5aXCAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAZKADAAQAAAABAAAAZAAAAAAMc/x7AAAb6klEQVR4Ae1dB5gUVbY+PUMOkoecEcGwIChpkWBCBVbXgAkXcFEXxSzP1RXTroqusK6RRTEg+MSAq6JiwIeAAcGEAoKkIScFiUOYrvf/VX2rb6Wu6u6ZAXXu91XXDeeee8IN56ZqkaJyRiMx7KeBPObGG9MjCKiHZcU+kXrlRNbukViFijZsjgLyZGBCE2SoiHf5CqKn25lUZvP9zUaR1Sh0HR4UJo2tQvSMJhZjxttGqNPJJwbzUbkYput5uGHUTvg3rjNhbIo8mawszt/uze1MFk+GTDAx3HalhejjD0Tqg4+6tsBEVq6wC7E9dmmKNFXOBb2TOqsh1ZhBQyUOsdrYlAeQsdUWvEPksTVOJApedkhNlcGOK3aPgx+WZjSURSCwjVmyxoOixObFaCXlKTkbmBD9zhWjHpT6x27OCsw0h5gp6t07LfG+8YIl8MZWrTdJMjEzF10OovLjln/hVyJ9Olh+/NrSNLErxQW9z+rKEtebuc0MB/ZboKT5hXGWX68F9JNHOjPDI/cE4U5mTvCRZFhlYSn18WxYbcW0z7OxlzGLiEP2OdLWbH1DrhJZr0kx0SJNOPzYirPpUymut5KQrTgzIi53uODMoAL2Szs04my+/cgxKHpNZn4wdpwhc2NrpZMd1jyeQiBkdqW7NRivt0IFkRmLRKa9JvLn653pjWKCwhx4HYHIlLOTdlUFOYCyrApkFVooN8TWy78cFKBdLzNrsF69J41VVTP8vWKxBcMmk2gWRhOp4SxEJbz8jD/Cy872xl/cxxvHmD7HWAWp5qRKsktnYRvWODNPfNwwaiHe7Ri3Nt8ZO+b2JCfApfCbb+rDLqiuD8KjazuRMdS6pjdOSYTvhjKLyJ2Kd5f8u44ib81zEBMYaIFKub8gmQzMaghxFEIIcpOE9PEx1ZPLBWfILlTjKio2EDxydVaYrPdO9D9VnVHhNJnwMCXqS3lZgO6zhs0nyYvLZ6C4qxvprzccqBPFslFXTpRyMt0Wk0pQ7zVSCUj2qKDfO7AQjP590RdN9cvkiQMWVV09aYiwRyw90azGqQq4HD3vhDdh+lYWKUTOYSPE2LTeMBrIgzqeQL+j5eutV/eznfduYxibYLjqbtUyFvSCG7lDXAD4Drwd5QZyhPcjtEHr6tk41yTab68jRJYtEflZasd2yI8qn7OQsNbOXBdeKpKLgWPiOIXDelNsuckoX6MgUEw0cO67WRdK0j/0THaCyY5VF2kDuTpZZMJn98DDzksimfZq0p/K9+zDydSWFT1jiSkutIXmUlaWm21ByddDRhoRiaFZicyqwmXlCROFQ0Ma0lv/IlLgam8LvxR5cowGFOKFXDfb4urQIMk6fRsxSipZ6yl+cUynoarS8qQli7Y4iQkrpuU2rFM+653XEFzA2/ccZ3ztehiknFFmSLdYypk5reEHJvI4VL/L7Cw0eTJ1mqnk1Ml6Ge7AuWObIygfvC7y4yZn3CeYUO742Rn33MPOcCJkq5pydEC4uWkEycYAwlk3ZuxSBfPMRS5iNC4oI9VpJiVoyEYk1LULYga9oDWJ2ZMNoHn27BJpbQ/pVsIegTItZ3PCoIcbRtL8XLRFpHothpxu9XKRjqhA5Z3ROhdMcRaSJ6dAFO+5sjiDFKojlzOZIaVwlWJV4UQotkneh2Y+Uom+75ACkL+2O5+jECbC+ugFK+RmN2CUMDlAfruLV3lS0pWG7bUeBTRQSN1vDyc6AKugKd+4PGrqQZGk3vulv0l9igJ0fKX+KBJQwo0CGwkGtkgT1OLTocJ+6OJbJGo0JqtYjmKnIjIHlfc1TCdnRkIYESgrRjBA/A025j9AYHaOVBgY/Auke2xLYlkoTYxpM4Jxej6ke0ya5VjgZFhN9oNKZjqb7n45IbZZZlsZw3+D0DlyGnkYY8rJBkdkuoG9yLAeBgEtT7fbhq5u2SIMGd2dKWd2EZk3Z2psnfR3JnhDKbstgptjWLZMENGIWywmrhpgLclw0G2IpzaeYzB+uplgntFPc9jqZ1pX9eUKRgW5QI1grttXKkScYwVhV/E5kFc+DP6tGMCPquOw+xWIWeWG3yBy/V0iP23G4tZZIgvn28mmJyb7MCa4h/lEkhPUDKEd3AtJQIQZONZxWjRVyoq0wGyoBobh/7yCNyyQJpAbbSmm054KFCPSghzyKBtLB/GgQk/UB6bqNB3I9LOOd2wnUhYUzJmLdwKiJgh8DYtALdt6skSO+GS6yMC+YBKFcKZWo6rIkb/D5tBqtJ1VXlMLUBiJHY3Ny4h74bQWqsLXLvM3MoVFCJgHUvVKVSijMBbZtcbR2KGN6x1jAqvAtC+KkJosUI241Zm5jPxVj3BoBL3DYiS21gHEyMUKACt+iGvMupaA43r1ZvhzkNftPp8pcmbP5MJxN/gnz3BDOcN7doo0Q3Vju1KOlMewdbVKtjLKoRGEMflzuRgqLZbD5ctPXAlaMA6YAo1ZrKzLgq80AM07GV2qXrtng7FU7qYhEK2LCcJzcC2QmiqrjpKJS8FlB5XoeFeq7Ag6ApT8ZmKO4EY/i/EBT1RX2TVpU/mokU2ySg8qvwT2WISohW70a/TvJe3qgGJq2OsM9Fx2jbI9hEMv8G5g3/4jBrP2eV50eszDd1ujdT0U3qWJyJsvimxZj6aDape/VGTsA+imQRVHdBK4Ll/P7fWzp/JnguNRHz0DIJ3OqCmHSWUs6AXVFPZk12AKefMoZ0Z3aMsGNGK0h88+Etm+A1vfWBI48QyRswaCOO5gpXDdW4HxZcEAhnyFuaijCXgYYW5UsaYYFFcGY0qkcJB8HMSeOyQUNBRgxKVY9X3G2TP5ZTJkLZho5E7yZYRAUEiONMY4G6QZNyaGUYNM17KZSNdesAS6wSxpgYEMGtiBXnIlqtdXc0RmfoBqhfbGribHzBHtJy7jYQkP9QMOZEQBQzvO1TWVUJJvUrlayuBFA8bXhTKicsGQfAMdQX8VLpE3qdvmXH4PKjcyIwoBOoNGUknyEU6nUqjs4W9SVChPowr9ORw4CZE2I8mslg+augWaotlvjbZugLAw88XlW2zD94ttTQ5wYdnc6Vkz4kaoh7GjkIferwYIzUWnUYDfDZB06pMDOoJSf6kESiVQZBIo8saOAfQEdMxng8Iu6Mny0MgxmcBvTLbgdyka/lvwT0OjX1VkXABR1oxgrbcS8DwI4oeZ2KKaNFa3+z3GjGGxDTIjW6YyZiRxxuMTMNAMks7OkYoDMhLTiH9kiigjRjAIfgEGOmTNgB/Ve+V0rPl6l6P8YLW4tBhB/e8Bi/WjjBnA0i8GxWDjhnMdPjnyNdrQsfBFdpHtJTDxLxCRHROrCrC4t1zk1vtEmrW0bFmuPLJq4tC1zFwIKxcRT05uD6sgjmi1DBjKUCSNoEFPg5QcU8tQzG6A7r1F/vdDdyw0AMv8y89Ejvu9M427xc2x8LBXasS2wQYOcaGMgInJYGJACJ7UyZT4B1+LtGkn0q2ZSOeeIuf9SaRTD0yuUgj9CKzc7IFptlp4qB7qDHYpGQETw8HEI8HZI6ZwSryJ3MCpVREG1Yzy/odFBl1tJjt+DsfMssCk37Fi4oBJBALbiFFF6qBNZM8EC2p3tFXcWy8l128pQiqDz8gbrHT9l4sXO20lxCDUgBU/K1MgI1Jd1mXcO+kEUfIj/2nF3IVjZX51wIBqWmNc/XautSI/5Tnso9R3rkjmSHt0OIHt1A8tj9GPQDf7gE5Pxn4KVa1Ccncq1UpQHLB82EX7UobogCsMXMfwurJgIlGlvYkpYpiH3SkJaQSJNmyK9awGVoaZ0ywJs72wHvi1ccYH1xETD4Q8EibN382A9uPhG4A3QhsPajDhXkr9uPYidz5k9UhhObb9ZK1CPgR61qAt6KvsYXlBcbQdq0bmkotTLhyRa1cTaYtdpKXYfV2H5VMWTgauvVHktvT4dtBaiPYx/EKRV1+xOgJqrN1R2LqD0fw5xheK2i3u/XJSbKN86MCjB9Az1PacP6yDM2s856k73jAZ0EuPyd6/r8AwLvc5xj7hEetyhzo3x3dDcx9HJ93pB8AYcytYZeLhyZU/ZE9kthiuG5g8AEjauD3ocg6lgYnNSE+ehoqh1a5So5YrZ0kGWf0aonfQO4g49ojXYcxPOGdbiGlMEKDaYQru4L55WoLt1On+oAedjOgp9G/GwnNUN2+WyMUYryaNDc9x+3CRS8/CdkNE/PvQq+jaYAkxnEDyc74NnQeI35gUXsN5TpjtSbWtqwYE52mROB9M2Jp4du0IhlUpZ3dL4lZl8PKc5pIayYFR4m5CbEGXXSwy/Q0ti4/3juucxzImw6byc3v34IYSHuVglci4kK77+kswh/HdiK2l0PCdZKTQozwLjiodeq7lD/pt3daZUq2CM6xC3CfR6zoFd2xnler/fn6idxzxgUwyYqS44VAxgDCFcMK7IlVrWnckuIMxb41K8b4nvGzBUTEnnCjS07+q2xndtcROcNJrd7+o3xXRgHZ7qhcz8kraD1qVSCIrfl+woTkXBmQnRYCtEUQGU7qdtshBcDu3B9thcflcp8hmxIwMUiNt5PWr9Hwl43/kbmcnopcal1f1oJuRj/VE20+ogYFzGhtMft9S5N4RyXCQ78yu2OK+KCg1Gf/v0Um/7mOD2CCz9SgnIwdklJ7o8C/6HpYvlmtSue+XizyB7pTXyW8eivMoX2J+gmq5CzcCPoWxen5Pa87OVZM5GEBTuTswaLoHQQWPG6woQe//PAaypDzjTRN7I7qlmJN/hd98X3gyVkymWyY5qyp7MTpWT4Y58Rp2lcjdj8IT4L6ZI3JaF+dUVwf12aa2ey0Fh97rO/gxIQhwhcjChbYyIbOhmeiSX5+EE3BLIVlwcVQ7kXMG4yBmxwDEieivP8V98m7BjZwUF0hVLKvu1BF5GamJYwKVQpb8qZm3Z2JWeIKOK3v/P28VGXNfsCasEtagh23sLszDCAGglfV41XMDO8JcJGiDEf1N9IKVqjiS0g4s/gb3htAB0IRJ5UhtodN8V+D+lf1nOdrbelSWxJs5lyzCSVJMSdlb8YBlOs6AJCY+jvzlcdimfTgTxB2X+focRC/OVyMEgDX8LCyxQTpwSj8bMqtcFbSHrj2wCIFq1wZz/Fp51vru+jUi33+LeTh6KxqBbPTgIbIjpaslFy/WBY8LZISQqGJYSTZ3pDwZI0eQQbqUJVkgKX9DFhz8q5bCuAZnt7IlgPmzxRGXJ1KumqCIlIyg/EJUgbpZE6IEk8kbN7LQLq4My5qSEWaGJDah7tc7KMwY8qp56yuMC9IZAcYEQVWP4VwQByHO64rXkaoDPh+RSFFqZEYUDqx9PYMKOdh33qKAsnvHMXI3xs2edemgCa1abmRQ9RAc3eR8mYNm0TmKtFBuw6idmy4TJCJtjeiUY+WkKbQzFc/RGWmIpbN7xs1HNOgHdNzp+rNiRC8MA2h/iOU2PJ1s8agxhIB6SXFcuzRkEnrEUZleDtPLdqN3p2UVxvZyZSDIAwMVsV9yANVmK/Y1NmeFtDRzqQRKJVAqgV+JBPS+/RfDEganXOwcVMV2bHncLqmMEcniIwZfAWZQ+2DkbpMdiCz8xTCVIPSQUwimpNj7kfZ4ToGYaSK0Aa0NEiL3ylc3HZgaxJEFxzMpiwH1KVT1ARbavoFh95MX6cGLCSK/RCgy6mCyVhbnwGIyEAUeB8PTosct5OKiRnEfh5pE5kJJz8N4fRnfCdlYXEWG4VUkhcEVSTpO11ZFJ3MZkF0N4TczkZaU8KNyoCTCrzbE5d9Q0njM9LmQVCJOFV9sheGcUR0I/3Y8l6P+lzPrYrGVVgyIKSEDY1Ict8xichfmxj8WQyk2ymJTCKaKV0IJvKtUrcSVwFbHb94eezyWYXCAJX85jldssz4/yuWJXKbjIfd+EuBqLLJJrcOwW4VF/LLYatqyBSdL0ZPtg7mAu+c49/4fQBS58yMn40KM6rB9KuHjablyQYkrQVFNYVbDzsC7X+ErH9gd8HM8FL0KSlqMvaxF80Xmf4EdhQU4c4MZOLdGHhovcuof/XLixCu2D++8BmdtJlCpk7CRPzzKwWp/ZN7YIlGIqYjK8hIIPOWgKULxxl2KO+4VufIWFWPtqPPzY/zoY1G5KVDI1YOhFDRHAythu+SSolBMVgoBKTn40OkYNOFrD7oiKGgqo0tnkVdmoptJbNFScMMGWV2TmpVURp9VvTpu1MOi5hduj8T2bOujre0o3pWI4vhxoB6H47N8OGmWgwyUZKGMxvLiTVGyB8FkrBCskfYAIVNBCPqHQ8Bx3ODe9yszcOf89xZBm7EmfXoHnOndEHz+Q5GObXY5uRc2M98HLPCEufFjcDb4RguvU4rbUTHOgOn8cRgKv3TqNi0HvnlbYBxaxUeHjDLIATdf//SXpDIYN+pmDOgRlEFYNowZMzAbaiwy613G+LsfMbAP7oubSFAG9eZUBvMcBtN+NmT0mD+C1LFedCngzW9ZVMDn4nKl3SHRRSlaaRG1aiHyDgbyKrCM6N77r8iQs1l9/IRmwQT90jDgKZ3q2I+r38BqMT/RysLDNBhdoY6SNXAhsEB6Y5NhRyh8AiCyQqCMxtgS4JVJHFGNir4Y4Fg2hcJH+cnFsy+JnHEePHD8BOtpx4osXxl2ksUEL7Yf0lWIgw37pHPUnZ9ICkncX50LZeAMc7GRbyEmftZOvtmNNG0lcngbDL4YC46CkBs1R82tad3D4Jdhyvoc/GBtXvE95h4wUTetg2KW4LwITNxVK3HuYwUUhv6N+NnlcE5SnI4SjuN4FZWyOfwLhKEKwXpTFcyvZ0EZXPCL5mjNKIuGOch0EOOEowLqQsgnnYHjgYMxoetStCYq0Pu6tfm4fToNn5p7AYd7MAbvBjHsjvxGVrZI0qpkQBjyFCrBBEwca2Ux6YnFzJCzW4BP5TA4jfdc6lHn6vU3L/r0wJ8HPfmgYfywwDAKdlsn8vfvw92ZJYbx4pOG8YdO1kes+QdDTcoaxrWXAPY7dXL/0Hh/+qFhXHSKRSf/nuJ4fLT70XsMY8m3uH+w3aKx8ID18e5pUwxjUF9+W955p0GXi/Ljrg4s07GpZM20lPoFgj5o1u+gVgTD0brp30/kMfThYR+XUtQYqGaxYJQK7Bf1fnGcyE3DQDKaUjBrcfQGp2KxcnoQb36N04SFyMqh6Y5EIBg9G9/w60TGvxldGcT+a1MGebrgcpH3sQRTCZYZuzc/F4NEy8htkG1QB+7bW1qoGmDiF5Nudp/pLoCF5sHEHMRaUepMCbRtLzJgkLVi4CcSaAIy7YldoO5+yYwLbCFQxLnIHNw6mJtXAXfvpq94HI8BF7mjVIrRUSapnCXTc4JAfBViNIPBmSPHB2Uy45lzK5RxzwhLMSmB00h8YhTWmNDsefmoLlo23/wy40Wn4E7E2jQQaaCTn8TV6BoJXCCcH2bg0+84mMQwj4vKcYY/6ZnwI9hlpDOqBe05jwNVXmee5cvFvjPmqd5UVwwrRH2cD38KM+MOXV2JaQS5bzEQQp8+w5p/uLOysVQoJzJlFu6Dd3KnBoeHny/yIgwOTFk8jo2FeCdOxUF8LIdk6gpht48cjrEUAztITOko8Tg+1rdXuvkd0vRtIciCKmoe2UuJ20zk5GrzJsySu2H5ApO0Ge+E5/GD2IbJXP6K4OGOlP68Dx/2/sYvt3/cfsBzQuhbF5GFwuEc6Nt5/vnDYtmlXjkALRhamBBBGcTHSkD55vhWkYAxJBdkGuZitpk70g/tBu6scVadieP/4ox6HK0ASnV3w2RiN54hg2HNDI2OnUvwY57FzB7GBwWvO4Wz72kiV/yPnhLdzytlTVta8L59TXRUCpL12+vi2KbMwfEYXse3NOqF8Y0hVUGNzjeDM7LnGSIrC7B7h1o9dbJ1nYy3gXtBaKdjHIyyLO7EiCUXDIWLsITCseK/k3DRcAn6eCi9Wy/Mny5ABWBnkIXLZU1Mw1FEBvbl9/ofPwrUK07svw/ZnhxZIVRcLpTx9OtYAsFE8bfgOMEdeiZuxWEeBh1HcpR4XN7BYQnUPq9LVZ3f9oKniGFBe9CnvoC+lIT+Fty82SIfTgsfyN2yMCRQtsEK2Y9vEfPiQDqOtWQqastTo9PJFQzLzaD8H4LT003Ztd36T5Y4TassHT8Swu/vF2BwCuxnfMqI4zZXPPgfTwIVgi3IZcg4Ma3CWD7NvpGYm4y934eaNKIu6A2rrR6uX7a25iG9YSw8/5i1nB4Vjfkpvk8guMGY28DubV4NX5I4EvjQ7896LyoWLxwrSt+OGOuWpbffQsUZ8hwumKz0IrViUurW/Behsvh4Qo7551NBOPzjueh48omwzd/IbCmdN4xHYyntKSiBH5ujokktLbBCPHQ1MCDzD1CqwooqAyHvQZ6tP+EM1Wbrm1isbjRb+GajIE1tW4ncPxaD+kkIZODefgmm7sWw2kBIYHX2wWspYwXo6ISDELDx/V1KhTALTh7yj1vRD6XdVlgbLEHc9DeRG/6eEQpkghLQLbBGv/4i9i3Qb69aaQlXUa/e+tBFf3VYaK3QsmilnXWRyBHHEFtmbvF8DODnoFUsTX/MsEqMYyJxGnqe91MRoFhJBcMb33/F+uR9kS0uNzYKhzX7fNSsux6CoGq7IQ7d8LtT8J2NYTjbtSlTRaiWfSNOO44JYzSSQogEZvC9aKK3ZKwURck+eGqiL78Cy/ZDrsEpQ+wUHmrus//DF6Nvx24iWiNn+el0TW5eKOG43Acz91Z3kl84skKYGUoZCeLuzlopihL0RGZH2LED1rFQC0+FTV8TY0JJOq7Ozp+L9a7xmE+8gmUgTCI5XmWjBJ3+OM4Br5P79ahU/rQUQkRYeDwH3RdGtiIjOUkfuzUO2DSfm2Pw7dBZ5PjueHfBh0saoTXVQKkYvNN1+zGab4UFzw9h8sMY8z7GnyJh/WrLNmuMUwZDunhTwxdiueZs7A7Cqonu0lYIUeMUSgMIbQZUcniRtZZUNHMMoqL40M/aS73wbdZkjQ1OSmlR8SE834Qtg6eoaj1QBTqSUigLcZ3/xNiu9C/+aJwEFhGYgMF+BJh8IBDgt5hQKNdj8IblkpnLSiEsMnErahIU079EWktmfBZvLkoxLlNkLU7AW+vSGZeXtUJUyYlJJL8d3/M3oxhLETMwv7gwyiE4JatU7yJTiCrE/BZFLv5eIce8S6iif31vfG8JX5a5EQLE8kDRuSJXiE4axphTYdY+AuW0/sW3Gqs1LMYE96pU56p0/jPxF6tCdIKwBHMeLJ07oaAjfzHKoXQKZQHovQMD9as6P8XlLzGF6AxAOc3Qaq7AMwgKqm+m0Zw9mE5JwkBHFJcJUMQ4tIQVJU2SIqOky3WUZ9TATd1yMAbK4CwYLopBSU3xWK6oFaXjNcy/apwJ4U/GSvBs/DMhpukH1ynyDi4VAaVDF+VwG6UpBNYSCuJS7RF4msFfC08VdCWHIczVJj5UHef6+5G2HaGd8PPLXPmo8QsRtwCpS/Gpq3wwzUWbUlcqgVIJlEqgVALZSeD/Ae9dXJXmmwPDAAAAAElFTkSuQmCC";
    },
    514: function (e, t, n) {
      e.exports = n.p + "static/media/settings.9409b568.png";
    },
    515: function (e, t, n) {},
    516: function (e, t, n) {},
    517: function (e, t, n) {
      e.exports = n.p + "static/media/discord.e4923594.svg";
    },
    518: function (e, t, n) {},
    519: function (e, t, n) {},
    521: function (e, t, n) {
      "use strict";
      n.r(t);
      var i = n(0),
        r = n.n(i),
        a = n(15),
        o = n.n(a);
      n(241),
        Boolean(
          "localhost" === window.location.hostname ||
            "[::1]" === window.location.hostname ||
            window.location.hostname.match(
              /^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/
            )
        );
      var s = n(2),
        l = n(4),
        u = n(5),
        c = n(1),
        h = n(6),
        d = n(524),
        p = n(12),
        f = n.n(p),
        m = n(14),
        v = (n(243), n(63)),
        g = n(7),
        y = n(111),
        x = n(235),
        b = n(8),
        _ = function e() {
          Object(s.a)(this, e);
        };
      _.protocol = void 0;
      var w = (function (e) {
        function t(e, n, i) {
          var r;
          return (
            Object(s.a)(this, t),
            ((r = Object(u.a)(this, Object(c.a)(t).call(this))).positionX = 0),
            (r.positionY = 0),
            (r.positionZ = 0),
            (r.intPositionX = 0),
            (r.intPositionY = 0),
            (r.intPositionZ = 0),
            (r.velocityX = 0),
            (r.velocityY = 0),
            (r.velocityZ = 0),
            (r.arcadeVelocityX = 0),
            (r.arcadeVelocityY = 0),
            (r.arcadeVelocityZ = 0),
            (r.arcadeVelocityInfluenceX = 0),
            (r.arcadeVelocityInfluenceY = 0),
            (r.arcadeVelocityInfluenceZ = 0),
            (r.velocityTargetX = 0),
            (r.velocityTargetY = 0),
            (r.velocityTargetZ = 0),
            (r.viewVectorX = 0),
            (r.viewVectorY = 0),
            (r.viewVectorZ = 0),
            (r.orientationX = 0),
            (r.orientationY = 0),
            (r.orientationZ = 0),
            (r.orientationTargetX = 0),
            (r.orientationTargetY = 0),
            (r.orientationTargetZ = 0),
            (r.up = !1),
            (r.down = !1),
            (r.left = !1),
            (r.right = !1),
            (r.run = !1),
            (r.jump = !1),
            (r.dance = !1),
            (r.joystickEnabled = !1),
            (r.joystickAngle = 0),
            (r.positionX = e.position.x),
            (r.positionY = e.position.y),
            (r.positionZ = e.position.z),
            (r.intPositionX = e.interpolatedPosition.x),
            (r.intPositionY = e.interpolatedPosition.y),
            (r.intPositionZ = e.interpolatedPosition.z),
            (r.velocityX = e.velocity.x),
            (r.velocityY = e.velocity.y),
            (r.velocityZ = e.velocity.z),
            (r.arcadeVelocityX = n.velocity.x),
            (r.arcadeVelocityY = n.velocity.y),
            (r.arcadeVelocityZ = n.velocity.z),
            (r.arcadeVelocityInfluenceX = n.arcadeVelocityInfluence.x),
            (r.arcadeVelocityInfluenceY = n.arcadeVelocityInfluence.y),
            (r.arcadeVelocityInfluenceZ = n.arcadeVelocityInfluence.z),
            (r.velocityTargetX = n.velocityTarget.x),
            (r.velocityTargetY = n.velocityTarget.y),
            (r.velocityTargetZ = n.velocityTarget.z),
            (r.viewVectorX = n.viewVector.x),
            (r.viewVectorY = n.viewVector.y),
            (r.viewVectorZ = n.viewVector.z),
            (r.orientationX = n.orientation.x),
            (r.orientationY = n.orientation.y),
            (r.orientationZ = n.orientation.z),
            (r.orientationTargetX = n.orientationTarget.x),
            (r.orientationTargetY = n.orientationTarget.y),
            (r.orientationTargetZ = n.orientationTarget.z),
            (r.up = i.up),
            (r.down = i.down),
            (r.left = i.left),
            (r.right = i.right),
            (r.jump = i.jump),
            (r.run = i.run),
            (r.dance = i.dance),
            (r.joystickEnabled = n.joystickEnabled),
            (r.joystickAngle = n.joystickAngle),
            r
          );
        }
        return (
          Object(h.a)(t, e),
          Object(l.a)(t, null, [
            {
              key: "emptyCommand",
              value: function () {
                return new this(
                  {
                    position: { x: 0, y: 0, z: 0 },
                    interpolatedPosition: { x: 0, y: 0, z: 0 },
                    velocity: { x: 0, y: 0, z: 0 },
                  },
                  {
                    velocity: { x: 0, y: 0, z: 0 },
                    arcadeVelocityInfluence: { x: 0, y: 0, z: 0 },
                    velocityTarget: { x: 0, y: 0, z: 0 },
                    viewVector: { x: 0, y: 0, z: 0 },
                    orientation: { x: 0, y: 0, z: 0 },
                    orientationTarget: { x: 0, y: 0, z: 0 },
                  },
                  {
                    up: !1,
                    down: !1,
                    left: !1,
                    right: !1,
                    jump: !1,
                    run: !1,
                    dance: !1,
                  }
                );
              },
            },
            {
              key: "randomizeKeys",
              value: function (e) {
                (e.up = Math.random() >= 0.5),
                  (e.left = Math.random() >= 0.5),
                  (e.right = Math.random() >= 0.5),
                  (e.down = Math.random() >= 0.5),
                  (e.jump = Math.random() >= 0.5),
                  (e.run = Math.random() >= 0.5);
              },
            },
          ]),
          t
        );
      })(_);
      w.protocol = {
        positionX: { type: b.a.Float32 },
        positionY: { type: b.a.Float32 },
        positionZ: { type: b.a.Float32 },
        intPositionX: { type: b.a.Float32 },
        intPositionY: { type: b.a.Float32 },
        intPositionZ: { type: b.a.Float32 },
        velocityX: { type: b.a.Float32 },
        velocityY: { type: b.a.Float32 },
        velocityZ: { type: b.a.Float32 },
        arcadeVelocityX: { type: b.a.Float32 },
        arcadeVelocityY: { type: b.a.Float32 },
        arcadeVelocityZ: { type: b.a.Float32 },
        arcadeVelocityInfluenceX: { type: b.a.Float32 },
        arcadeVelocityInfluenceY: { type: b.a.Float32 },
        arcadeVelocityInfluenceZ: { type: b.a.Float32 },
        velocityTargetX: { type: b.a.Float32 },
        velocityTargetY: { type: b.a.Float32 },
        velocityTargetZ: { type: b.a.Float32 },
        viewVectorX: { type: b.a.Float32 },
        viewVectorY: { type: b.a.Float32 },
        viewVectorZ: { type: b.a.Float32 },
        orientationX: { type: b.a.Float32 },
        orientationY: { type: b.a.Float32 },
        orientationZ: { type: b.a.Float32 },
        orientationTargetX: { type: b.a.Float32 },
        orientationTargetY: { type: b.a.Float32 },
        orientationTargetZ: { type: b.a.Float32 },
        up: { type: b.a.Boolean },
        down: { type: b.a.Boolean },
        left: { type: b.a.Boolean },
        right: { type: b.a.Boolean },
        run: { type: b.a.Boolean },
        jump: { type: b.a.Boolean },
        dance: { type: b.a.Boolean },
        joystickEnabled: { type: b.a.Boolean },
        joystickAngle: { type: b.a.Float32 },
      };
      var S = w,
        E = (function () {
          function e() {
            Object(s.a)(this, e),
              (this.client = void 0),
              (this.nid = 0),
              (this.interpolatedPositionX = 0),
              (this.interpolatedPositionY = -1e4),
              (this.interpolatedPositionZ = 0),
              (this.rotationX = 0),
              (this.rotationY = 0),
              (this.rotationZ = 0),
              (this.tiltContainerPositionX = 0),
              (this.tiltContainerPositionY = 0),
              (this.tiltContainerPositionZ = 0),
              (this.tiltContainerRotationX = 0),
              (this.tiltContainerRotationY = 0),
              (this.tiltContainerRotationZ = 0),
              (this.faceString = "\ud83d\ude0e"),
              (this.name = ""),
              (this.hat = "none"),
              (this.videoSessionId = ""),
              (this.bodyColorR = 1),
              (this.bodyColorG = 1),
              (this.bodyColorB = 1),
              (this.joystickEnabled = !1),
              (this.joystickAngle = 0),
              (this.characterSkinId = 0),
              (this.clipName = "idle"),
              (this.fadeIn = 0);
          }
          return (
            Object(l.a)(e, [
              {
                key: "processCharTransformCommand",
                value: function (e) {
                  (this.interpolatedPositionX = e.interpolatedPositionX),
                    (this.interpolatedPositionY = e.interpolatedPositionY),
                    (this.interpolatedPositionZ = e.interpolatedPositionZ),
                    (this.rotationX = e.rotationX),
                    (this.rotationY = e.rotationY),
                    (this.rotationZ = e.rotationZ),
                    (this.tiltContainerPositionX = e.tiltContainerPositionX),
                    (this.tiltContainerPositionY = e.tiltContainerPositionY),
                    (this.tiltContainerPositionZ = e.tiltContainerPositionZ),
                    (this.tiltContainerRotationX = e.tiltContainerRotationX),
                    (this.tiltContainerRotationY = e.tiltContainerRotationY),
                    (this.tiltContainerRotationZ = e.tiltContainerRotationZ);
                },
              },
              {
                key: "x",
                get: function () {
                  return this.interpolatedPositionX;
                },
                set: function (e) {
                  this.interpolatedPositionX = e;
                },
              },
              {
                key: "y",
                get: function () {
                  return this.interpolatedPositionY;
                },
                set: function (e) {
                  this.interpolatedPositionY = e;
                },
              },
            ]),
            e
          );
        })();
      (E.protocol = void 0),
        (E.protocol = {
          x: { type: b.a.Float32 },
          y: { type: b.a.Float32 },
          interpolatedPositionX: { type: b.a.Float32 },
          interpolatedPositionY: { type: b.a.Float32 },
          interpolatedPositionZ: { type: b.a.Float32 },
          rotationX: { type: b.a.Float32 },
          rotationY: { type: b.a.Float32 },
          rotationZ: { type: b.a.Float32 },
          tiltContainerPositionX: { type: b.a.Float32 },
          tiltContainerPositionY: { type: b.a.Float32 },
          tiltContainerPositionZ: { type: b.a.Float32 },
          tiltContainerRotationX: { type: b.a.Float32 },
          tiltContainerRotationY: { type: b.a.Float32 },
          tiltContainerRotationZ: { type: b.a.Float32 },
          faceString: { type: b.a.UTF8String },
          name: { type: b.a.UTF8String },
          hat: { type: b.a.UTF8String },
          videoSessionId: { type: b.a.UTF8String },
          bodyColorR: { type: b.a.Float32 },
          bodyColorG: { type: b.a.Float32 },
          bodyColorB: { type: b.a.Float32 },
          joystickEnabled: { type: b.a.Boolean },
          joystickAngle: { type: b.a.Float32 },
          characterSkinId: { type: b.a.UInt32 },
          animationIndex: { type: b.a.UInt32 },
          clipName: { type: b.a.ASCIIString },
          fadeIn: { type: b.a.Float32 },
        });
      var M = E,
        A = function e(t) {
          Object(s.a)(this, e), (this.entityId = void 0), (this.entityId = t);
        };
      (A.protocol = void 0), (A.protocol = { entityId: b.a.UInt16 });
      var T = A,
        C = (function (e) {
          function t(e, n, i, r, a, o) {
            var l;
            return (
              Object(s.a)(this, t),
              ((l = Object(u.a)(this, Object(c.a)(t).call(this))).up = e),
              (l.down = n),
              (l.left = i),
              (l.right = r),
              (l.run = a),
              (l.jump = o),
              l
            );
          }
          return Object(h.a)(t, e), t;
        })(_);
      C.protocol = {
        up: { type: b.a.Boolean },
        down: { type: b.a.Boolean },
        left: { type: b.a.Boolean },
        right: { type: b.a.Boolean },
        run: { type: b.a.Boolean },
        jump: { type: b.a.Boolean },
      };
      var k = C,
        P = (function (e) {
          function t(e) {
            var n;
            return (
              Object(s.a)(this, t),
              ((n = Object(u.a)(this, Object(c.a)(t).call(this))).faceString =
                e),
              n
            );
          }
          return Object(h.a)(t, e), t;
        })(_);
      P.protocol = { faceString: { type: b.a.UTF8String } };
      var L = P,
        R = (function (e) {
          function t(e) {
            var n;
            return (
              Object(s.a)(this, t),
              ((n = Object(u.a)(this, Object(c.a)(t).call(this))).name = e),
              n
            );
          }
          return Object(h.a)(t, e), t;
        })(_);
      R.protocol = { name: { type: b.a.UTF8String } };
      var I = R,
        F = (function (e) {
          function t(e) {
            var n;
            return (
              Object(s.a)(this, t),
              ((n = Object(u.a)(this, Object(c.a)(t).call(this))).hat = e),
              n
            );
          }
          return Object(h.a)(t, e), t;
        })(_);
      F.protocol = { hat: { type: b.a.UTF8String } };
      var N = (function (e) {
        function t(e) {
          var n;
          return (
            Object(s.a)(this, t),
            ((n = Object(u.a)(this, Object(c.a)(t).call(this))).sessionId = e),
            n
          );
        }
        return Object(h.a)(t, e), t;
      })(_);
      N.protocol = { sessionId: { type: b.a.UTF8String } };
      var O = (function (e) {
        function t(e, n, i) {
          var r;
          return (
            Object(s.a)(this, t),
            ((r = Object(u.a)(this, Object(c.a)(t).call(this))).r = e),
            (r.g = n),
            (r.b = i),
            r
          );
        }
        return Object(h.a)(t, e), t;
      })(_);
      O.protocol = {
        r: { type: b.a.Float32 },
        g: { type: b.a.Float32 },
        b: { type: b.a.Float32 },
      };
      var B = O,
        D = (function (e) {
          function t(e) {
            var n;
            return (
              Object(s.a)(this, t),
              ((n = Object(u.a)(this, Object(c.a)(t).call(this))).newSkinId =
                e),
              n
            );
          }
          return Object(h.a)(t, e), t;
        })(_);
      D.protocol = { newSkinId: { type: b.a.UInt32 } };
      var V = D,
        U = (function (e) {
          function t(e, n) {
            var i;
            return (
              Object(s.a)(this, t),
              ((i = Object(u.a)(
                this,
                Object(c.a)(t).call(this)
              )).interpolatedPositionX = 0),
              (i.interpolatedPositionY = 0),
              (i.interpolatedPositionZ = 0),
              (i.rotationX = 0),
              (i.rotationY = 0),
              (i.rotationZ = 0),
              (i.tiltContainerPositionX = 0),
              (i.tiltContainerPositionY = 0),
              (i.tiltContainerPositionZ = 0),
              (i.tiltContainerRotationX = 0),
              (i.tiltContainerRotationY = 0),
              (i.tiltContainerRotationZ = 0),
              (i.interpolatedPositionX = e.interpolatedPosition.x),
              (i.interpolatedPositionY = e.interpolatedPosition.y),
              (i.interpolatedPositionZ = e.interpolatedPosition.z),
              (i.rotationX = n.rotation.x),
              (i.rotationY = n.rotation.y),
              (i.rotationZ = n.rotation.z),
              (i.tiltContainerPositionX = n.tiltContainer.position.x),
              (i.tiltContainerPositionY = n.tiltContainer.position.y),
              (i.tiltContainerPositionZ = n.tiltContainer.position.z),
              (i.tiltContainerRotationX = n.tiltContainer.rotation.x),
              (i.tiltContainerRotationY = n.tiltContainer.rotation.y),
              (i.tiltContainerRotationZ = n.tiltContainer.rotation.z),
              i
            );
          }
          return Object(h.a)(t, e), t;
        })(_);
      U.protocol = {
        interpolatedPositionX: { type: b.a.Float32 },
        interpolatedPositionY: { type: b.a.Float32 },
        interpolatedPositionZ: { type: b.a.Float32 },
        rotationX: { type: b.a.Float32 },
        rotationY: { type: b.a.Float32 },
        rotationZ: { type: b.a.Float32 },
        tiltContainerPositionX: { type: b.a.Float32 },
        tiltContainerPositionY: { type: b.a.Float32 },
        tiltContainerPositionZ: { type: b.a.Float32 },
        tiltContainerRotationX: { type: b.a.Float32 },
        tiltContainerRotationY: { type: b.a.Float32 },
        tiltContainerRotationZ: { type: b.a.Float32 },
      };
      var z = U,
        j = (function (e) {
          function t(e, n) {
            var i;
            return (
              Object(s.a)(this, t),
              ((i = Object(u.a)(this, Object(c.a)(t).call(this))).clipName =
                void 0),
              (i.fadeIn = void 0),
              (i.clipName = e),
              (i.fadeIn = n),
              i
            );
          }
          return Object(h.a)(t, e), t;
        })(_);
      j.protocol = {
        clipName: { type: b.a.ASCIIString },
        fadeIn: { type: b.a.Float32 },
      };
      var G = j,
        H = {
          UPDATE_RATE: 30,
          ID_BINARY_TYPE: b.a.UInt16,
          TYPE_BINARY_TYPE: b.a.UInt8,
          ID_PROPERTY_NAME: "nid",
          TYPE_PROPERTY_NAME: "ntype",
          protocols: {
            entities: [["PlayerEntity", M]],
            localMessages: [],
            messages: [["IdentityCommand", T]],
            commands: [
              ["MoveCommand", S],
              ["KeyCommand", k],
              ["ChangeLookCommand", L],
              ["ChangeNameCommand", I],
              ["ChangeHatCommand", F],
              ["ChangeVideoSessionCommand", N],
              ["ChangeBodyColorCommand", B],
              ["ChangeCharacterSkinCommand", V],
              ["CharTransformCommand", z],
              ["CharAnimationStateCommand", G],
            ],
            basics: [],
          },
        },
        W = n(76),
        Y = n(19),
        q = {
          parkourStarted: !1,
          parkourStartTimestamp: 0,
          bestCourseTime: 0,
          lastCourseTime: 0,
          parkourEnabled: !1,
        },
        X = n(234),
        Q =
          (n(264),
          function (e) {
            return { type: "SET_USERNAME", username: e };
          }),
        Z = function (e) {
          return { type: "SET_ROOM_ID", roomId: e };
        },
        J = function (e) {
          return { type: "SET_ADMIN_MODE", isAdminMode: e };
        },
        K = function (e) {
          return { type: "SET_CHAT_ENABLED", isChatEnabled: e };
        },
        $ = function (e) {
          return { type: "SET_CONNECTION_STATE", newState: e };
        },
        ee = n(17),
        te = (n(266), n(68));
      var ne = n(47),
        ie = (n(267), n(269), n(272), n(274), n(88)),
        re = n.n(ie);
      ne.initializeApp({
        apiKey: "AIzaSyBQ985qWDST-Tjtca0CE4oNh9ZRGBIC4P0",
        databaseURL: "https://dj3d-268321.firebaseio.com",
        authDomain: "dj3d-268321.firebaseapp.com",
        projectId: "dj3d-268321",
      });
      var ae = ne.firestore(),
        oe = ne.database();
      ne.auth()
        .signInAnonymously()
        .catch(function (e) {});
      var se = ne.functions().httpsCallable("createRoom"),
        le = ne.functions().httpsCallable("addToVideoQueue");
      function ue(e) {
        return ce.apply(this, arguments);
      }
      function ce() {
        return (ce = Object(m.a)(
          f.a.mark(function e(t) {
            var n, i;
            return f.a.wrap(function (e) {
              for (;;)
                switch ((e.prev = e.next)) {
                  case 0:
                    return (
                      (n =
                        "https://us-central1-dj3d-268321.cloudfunctions.net/redditApi3/posts/" +
                        t),
                      (n += "?user_agent=" + Date.now() / 2),
                      (e.next = 4),
                      re.a.get(n)
                    );
                  case 4:
                    return (i = e.sent), e.abrupt("return", i.data);
                  case 6:
                  case "end":
                    return e.stop();
                }
            }, e);
          })
        )).apply(this, arguments);
      }
      function he(e) {
        return de.apply(this, arguments);
      }
      function de() {
        return (de = Object(m.a)(
          f.a.mark(function e(t) {
            var n;
            return f.a.wrap(function (e) {
              for (;;)
                switch ((e.prev = e.next)) {
                  case 0:
                    return (
                      (e.next = 2),
                      re.a.get(
                        "https://us-central1-dj3d-268321.cloudfunctions.net/louvreApi/art/" +
                          t
                      )
                    );
                  case 2:
                    return (n = e.sent), e.abrupt("return", n.data);
                  case 4:
                  case "end":
                    return e.stop();
                }
            }, e);
          })
        )).apply(this, arguments);
      }
      var pe = ne.functions().httpsCallable("getMatch");
      function fe(e) {
        return ae.collection("roomData").doc(e).collection("chat");
      }
      function me(e, t) {
        fe(t).add(e);
      }
      var ve = {
        gizmo_1: "a",
        gizmo_2: "a",
        gizmo_3: "a",
        gizmo_4: "a",
        gizmo_5: "a",
        gizmo_6: "a",
        ah_1: "aHR0cHM6Ly93d3cucmFuZGdhbGxlcnkuY29tL2FsZ28tY29sbGVjdGlvbi8/YWRkcmVzcz1IT1VTTzI1UjZVQ1NDMjNSU09RTVgzMkxJT0tWTU1RNkpGWUxIQUZINDVMUjJOSU81Rk5RWEdHTElRJnNlY3JldD1EYWlzeVNvdXJDcmVhbQ==",
        ah_2: "aHR0cHM6Ly93d3cucmFuZGdhbGxlcnkuY29tL2FsZ28tY29sbGVjdGlvbi8/YWRkcmVzcz1IT1VTTzI1UjZVQ1NDMjNSU09RTVgzMkxJT0tWTU1RNkpGWUxIQUZINDVMUjJOSU81Rk5RWEdHTElRJnNlY3JldD1CYXRXaW5nRGluZw==",
        ah_3: "aHR0cHM6Ly93d3cucmFuZGdhbGxlcnkuY29tL2FsZ28tY29sbGVjdGlvbi8/YWRkcmVzcz1IT1VTTzI1UjZVQ1NDMjNSU09RTVgzMkxJT0tWTU1RNkpGWUxIQUZINDVMUjJOSU81Rk5RWEdHTElRJnNlY3JldD1NdWx0aVZpdGFtaW5DaGFsaw==",
        ah_4: "aHR0cHM6Ly93d3cucmFuZGdhbGxlcnkuY29tL2FsZ28tY29sbGVjdGlvbi8/YWRkcmVzcz1IT1VTTzI1UjZVQ1NDMjNSU09RTVgzMkxJT0tWTU1RNkpGWUxIQUZINDVMUjJOSU81Rk5RWEdHTElRJnNlY3JldD1Qb290Um9vdFRvb3Q=",
        ah_5: "aHR0cHM6Ly93d3cucmFuZGdhbGxlcnkuY29tL2FsZ28tY29sbGVjdGlvbi8/YWRkcmVzcz1IT1VTTzI1UjZVQ1NDMjNSU09RTVgzMkxJT0tWTU1RNkpGWUxIQUZINDVMUjJOSU81Rk5RWEdHTElRJnNlY3JldD1SaWNreUJvYmJ5Rmlyc3Q=",
        ah_6: "aHR0cHM6Ly93d3cucmFuZGdhbGxlcnkuY29tL2FsZ28tY29sbGVjdGlvbi8/YWRkcmVzcz1IT1VTTzI1UjZVQ1NDMjNSU09RTVgzMkxJT0tWTU1RNkpGWUxIQUZINDVMUjJOSU81Rk5RWEdHTElRJnNlY3JldD1DaGlja2VuV2luZ0Rpbmc1Mw==",
        ah_7: "aHR0cHM6Ly93d3cucmFuZGdhbGxlcnkuY29tL2FsZ28tY29sbGVjdGlvbi8/YWRkcmVzcz1IT1VTTzI1UjZVQ1NDMjNSU09RTVgzMkxJT0tWTU1RNkpGWUxIQUZINDVMUjJOSU81Rk5RWEdHTElRJnNlY3JldD1QaW5nUG9uZ0RpbmdEb25nMzE=",
        ah_8: "aHR0cHM6Ly93d3cucmFuZGdhbGxlcnkuY29tL2FsZ28tY29sbGVjdGlvbi8/YWRkcmVzcz1IT1VTTzI1UjZVQ1NDMjNSU09RTVgzMkxJT0tWTU1RNkpGWUxIQUZINDVMUjJOSU81Rk5RWEdHTElRJnNlY3JldD1SaW5nUGluZ0Nob25nMTY=",
        ah_9: "aHR0cHM6Ly93d3cucmFuZGdhbGxlcnkuY29tL2FsZ28tY29sbGVjdGlvbi8/YWRkcmVzcz1IT1VTTzI1UjZVQ1NDMjNSU09RTVgzMkxJT0tWTU1RNkpGWUxIQUZINDVMUjJOSU81Rk5RWEdHTElRJnNlY3JldD1Eb29kUG9vZFJvb2QxNQ==",
        ah_10:
          "aHR0cHM6Ly93d3cucmFuZGdhbGxlcnkuY29tL2FsZ28tY29sbGVjdGlvbi8/YWRkcmVzcz1IT1VTTzI1UjZVQ1NDMjNSU09RTVgzMkxJT0tWTU1RNkpGWUxIQUZINDVMUjJOSU81Rk5RWEdHTElRJnNlY3JldD1NaWNrUmlja05pY2sxNA==",
        ah_11:
          "aHR0cHM6Ly93d3cucmFuZGdhbGxlcnkuY29tL2FsZ28tY29sbGVjdGlvbi8/YWRkcmVzcz1IT1VTTzI1UjZVQ1NDMjNSU09RTVgzMkxJT0tWTU1RNkpGWUxIQUZINDVMUjJOSU81Rk5RWEdHTElRJnNlY3JldD1QaWNrTmlja1JpY2sxMg==",
        lx_1: "aHR0cHM6Ly93d3cucmFuZGdhbGxlcnkuY29tL2FsZ28tY29sbGVjdGlvbi8/YWRkcmVzcz1MSU5YRElKVEpQUktFMlE0TllBM05RRldWTlVNUUlWVU9NUVBBWFg3STM1WERFQ05PN0RVVDJLWldRJnNlY3JldD1BcmdlbnRpbmEyMDIy",
        lx_2: "aHR0cHM6Ly93d3cucmFuZGdhbGxlcnkuY29tL2FsZ28tY29sbGVjdGlvbi8/YWRkcmVzcz1MSU5YRElKVEpQUktFMlE0TllBM05RRldWTlVNUUlWVU9NUVBBWFg3STM1WERFQ05PN0RVVDJLWldRJnNlY3JldD1Xb3JsZHRvdXIyMDIy",
        lx_3: "aHR0cHM6Ly93d3cucmFuZGdhbGxlcnkuY29tL2FsZ28tY29sbGVjdGlvbi8/YWRkcmVzcz1MSU5YRElKVEpQUktFMlE0TllBM05RRldWTlVNUUlWVU9NUVBBWFg3STM1WERFQ05PN0RVVDJLWldRJnNlY3JldD1BbWF6aW5nMjAyMg==",
        lx_4: "aHR0cHM6Ly93d3cucmFuZGdhbGxlcnkuY29tL2FsZ28tY29sbGVjdGlvbi8/YWRkcmVzcz1MSU5YRElKVEpQUktFMlE0TllBM05RRldWTlVNUUlWVU9NUVBBWFg3STM1WERFQ05PN0RVVDJLWldRJnNlY3JldD1Sb2JvdDIwMjI=",
        lx_5: "aHR0cHM6Ly93d3cucmFuZGdhbGxlcnkuY29tL2FsZ28tY29sbGVjdGlvbi8/YWRkcmVzcz1MSU5YRElKVEpQUktFMlE0TllBM05RRldWTlVNUUlWVU9NUVBBWFg3STM1WERFQ05PN0RVVDJLWldRJnNlY3JldD1Ib3JuczIwMjI=",
        lx_6: "aHR0cHM6Ly93d3cucmFuZGdhbGxlcnkuY29tL2FsZ28tY29sbGVjdGlvbi8/YWRkcmVzcz1MSU5YRElKVEpQUktFMlE0TllBM05RRldWTlVNUUlWVU9NUVBBWFg3STM1WERFQ05PN0RVVDJLWldRJnNlY3JldD1SYWNpbmcyMDIy",
        lx_7: "aHR0cHM6Ly93d3cucmFuZGdhbGxlcnkuY29tL2FsZ28tY29sbGVjdGlvbi8/YWRkcmVzcz1MSU5YRElKVEpQUktFMlE0TllBM05RRldWTlVNUUlWVU9NUVBBWFg3STM1WERFQ05PN0RVVDJLWldRJnNlY3JldD1QYWxlcm1vMjAyMg==",
        lx_8: "aHR0cHM6Ly93d3cucmFuZGdhbGxlcnkuY29tL2FsZ28tY29sbGVjdGlvbi8/YWRkcmVzcz1MSU5YRElKVEpQUktFMlE0TllBM05RRldWTlVNUUlWVU9NUVBBWFg3STM1WERFQ05PN0RVVDJLWldRJnNlY3JldD1NZXhpY28yMDIy",
        lx_9: "aHR0cHM6Ly93d3cucmFuZGdhbGxlcnkuY29tL2FsZ28tY29sbGVjdGlvbi8/YWRkcmVzcz1MSU5YRElKVEpQUktFMlE0TllBM05RRldWTlVNUUlWVU9NUVBBWFg3STM1WERFQ05PN0RVVDJLWldRJnNlY3JldD1BZnJpY2EyMDIy",
        lx_10:
          "aHR0cHM6Ly93d3cucmFuZGdhbGxlcnkuY29tL2FsZ28tY29sbGVjdGlvbi8/YWRkcmVzcz1MSU5YRElKVEpQUktFMlE0TllBM05RRldWTlVNUUlWVU9NUVBBWFg3STM1WERFQ05PN0RVVDJLWldRJnNlY3JldD1CYXJjZWxvbmEyMDIy",
      };
      function ge(e) {
        return new Promise(function (t) {
          return setTimeout(t, e);
        });
      }
      function ye(e, t, n) {
        if (window.gtag) {
          var i = { event_category: e };
          n && (i.event_label = n), window.gtag("event", t, i);
        }
      }
      var xe = n(233),
        be = n(220),
        _e = n.n(be),
        we = function (e, t) {
          return { type: "SET_WINDOW_OPEN", windowId: e, isOpen: t };
        },
        Se = function (e) {
          return {
            type: "TOGGLE_WINDOW_OPEN",
            windowId: e,
            isMobile: Ge.getState().ui.isMobile,
          };
        },
        Ee = function (e, t) {
          return { type: "SET_DOCK_VISIBLE", windowId: e, isVisible: t };
        },
        Me = function (e) {
          return { type: "SHOW_MODAL", modalMessage: e };
        },
        Ae =
          (n(402),
          (function (e) {
            function t(e) {
              var n;
              return (
                Object(s.a)(this, t),
                ((n = Object(u.a)(this, Object(c.a)(t).call(this, e))).state =
                  {}),
                n
              );
            }
            return (
              Object(h.a)(t, e),
              Object(l.a)(t, [
                {
                  key: "render",
                  value: function () {
                    var e, t, n, i;
                    if (
                      !this.props.disableRenderToggle &&
                      !this.props.transparentDisable &&
                      !(null === (e = this.props.windows) ||
                      void 0 === e ||
                      null === (t = e[this.props.windowId]) ||
                      void 0 === t
                        ? void 0
                        : t.isOpen)
                    )
                      return null;
                    var a = {};
                    if (
                      (this.props.transparentDisable &&
                        !(null === (n = this.props.windows) ||
                        void 0 === n ||
                        null === (i = n[this.props.windowId]) ||
                        void 0 === i
                          ? void 0
                          : i.isOpen) &&
                        ((a.opacity = 0), (a.pointerEvents = "none")),
                      this.props.isMobile || this.props.forceCentering)
                    ) {
                      return (
                        " DraggableWindow-TransparentBorder",
                        r.a.createElement(
                          "div",
                          {
                            style: a,
                            className:
                              "DraggableWindow-MobileContainer DraggableWindow-TransparentBorder",
                          },
                          this.props.children
                        )
                      );
                    }
                    this.props.top && (a.top = this.props.top),
                      this.props.left && (a.left = this.props.left),
                      this.props.right && (a.right = this.props.right),
                      this.props.bottom && (a.bottom = this.props.bottom);
                    var o = "DraggableWindow-DesktopContainer";
                    return (
                      this.props.styleTransparent ||
                        (o += " DraggableWindow-TransparentBorder"),
                      r.a.createElement(
                        _e.a,
                        { disabled: this.props.disableDrag },
                        r.a.createElement(
                          "div",
                          { style: a, className: o },
                          this.props.children
                        )
                      )
                    );
                  },
                },
              ]),
              t
            );
          })(r.a.PureComponent));
      var Te = { setWindowOpen: we },
        Ce = Object(ee.b)(function (e) {
          return {
            username: e.room.username,
            windows: e.ui.windows,
            isMobile: e.ui.isMobile,
          };
        }, Te)(Ae),
        ke = n(403),
        Pe = [
          { value: "none", label: "None" },
          { value: "crown_red", label: "Crown" },
          { value: "santa", label: "Santa" },
        ],
        Le = ke(function () {
          ye("Customize", "Change Name V2");
        }, 1e3),
        Re = "\ud83d\ude0e",
        Ie = { r: 1, g: 1, b: 1 },
        Fe = "",
        Ne = (function (e) {
          function t(e) {
            var n;
            return (
              Object(s.a)(this, t),
              ((n = Object(u.a)(
                this,
                Object(c.a)(t).call(this, e)
              )).chooseEmoji = function (e) {
                Oe(e.native),
                  (Re = e.native),
                  Ge.dispatch({ type: "SET_USER_EMOJI", newEmoji: e.native }),
                  n.setState({ currentEmoji: e.native });
              }),
              (n.onClickEmojiStatus = function () {
                n.setState({ showEmojiPicker: !0 });
              }),
              (n.onChangeName = function (e) {
                var t = e.target.value;
                (Fe = t), Le(), n.changeName(t);
              }),
              (n.stopEvent = function (e) {
                e.stopPropagation(), e.nativeEvent.stopImmediatePropagation();
              }),
              (n.onChangeFace = function (e) {
                var t = e.value;
                ye("Customize", "Change Hat"),
                  Bt &&
                    ("none" === t
                      ? Bt.activeCharacter.removeHat()
                      : Bt.activeCharacter.changeHat(t),
                    (function (e) {
                      var t = new F(e);
                      We && et.addCommand(t);
                    })(t));
              }),
              (n.closeCustomizer = function () {
                n.setState({ showEmojiPicker: !1 });
              }),
              (n.handleColorPick = function (e) {
                if (
                  null === Bt || void 0 === Bt ? void 0 : Bt.activeCharacter
                ) {
                  var t = e.rgb.r / 255,
                    n = e.rgb.g / 255,
                    i = e.rgb.b / 255;
                  Bt.activeCharacter.changeCharacterColor(t, n, i),
                    Oe(Re, (Ie = { r: t, g: n, b: i })),
                    st(t, n, i);
                }
              }),
              (n.onClickSkinPickerBtn = function () {
                ye("Customize", "Open Skin Picker"),
                  n.props.toggleWindowOpen("SkinPicker");
              }),
              (n.state = { showEmojiPicker: !1, currentEmoji: "\ud83d\ude0e" }),
              n
            );
          }
          return (
            Object(h.a)(t, e),
            Object(l.a)(t, [
              {
                key: "changeName",
                value: function (e) {
                  var t;
                  this.props.setUsername(e),
                    (t = e),
                    Bt &&
                      Bt.activeCharacter &&
                      Bt.activeCharacter.changeName(t),
                    ot(e);
                },
              },
              {
                key: "renderCustomizer",
                value: function () {
                  return r.a.createElement(
                    "div",
                    { className: "EmojiPicker-Customizer" },
                    r.a.createElement(
                      "div",
                      { className: "EmojiPicker-Section" },
                      r.a.createElement(
                        "div",
                        { className: "EmojiPicker-SectionTitle" },
                        r.a.createElement(
                          "span",
                          { role: "img", "aria-label": "Hat Emoji" },
                          "\ud83d\udc51"
                        ),
                        " ",
                        "Hat"
                      ),
                      r.a.createElement(te.a, {
                        placeholder: "Choose Hat",
                        menuPlacement: "top",
                        options: Pe,
                        onChange: this.onChangeFace,
                        isSearchable: !1,
                      })
                    ),
                    r.a.createElement(
                      "div",
                      { className: "EmojiPicker-Section" },
                      r.a.createElement(
                        "div",
                        { className: "EmojiPicker-SectionTitle" },
                        r.a.createElement(
                          "span",
                          { role: "img", "aria-label": "Face Emoji" },
                          "\ud83d\ude0e"
                        ),
                        " ",
                        "Face"
                      ),
                      r.a.createElement(X.a, {
                        title: "Change face!",
                        onSelect: this.chooseEmoji,
                      })
                    ),
                    r.a.createElement(
                      "div",
                      { className: "EmojiPicker-Section" },
                      r.a.createElement(
                        "div",
                        { className: "ColorPicker-Container" },
                        r.a.createElement(xe.a, {
                          onChangeComplete: this.handleColorPick,
                        })
                      )
                    ),
                    r.a.createElement(
                      "div",
                      { className: "EmojiPicker-DoneSection" },
                      r.a.createElement(
                        "button",
                        {
                          onClick: this.closeCustomizer,
                          className: "EmojiPicker-DoneButton",
                        },
                        r.a.createElement("span", null, "DONE"),
                        r.a.createElement(
                          "i",
                          { className: "material-icons md-light" },
                          "done"
                        )
                      )
                    )
                  );
                },
              },
              {
                key: "render",
                value: function () {
                  return this.state.showEmojiPicker
                    ? this.renderCustomizer()
                    : r.a.createElement(
                        Ce,
                        {
                          disableDrag: !0,
                          bottom: 8,
                          right: 8,
                          windowId: "Customize",
                        },
                        r.a.createElement(
                          "div",
                          { className: "App-EmojiPicker" },
                          r.a.createElement(
                            "div",
                            null,
                            r.a.createElement("input", {
                              onKeyDown: this.stopEvent,
                              onKeyUp: this.stopEvent,
                              className: "App-NameInput",
                              maxLength: 11,
                              onChange: this.onChangeName,
                              type: "text",
                              placeholder: "username (10 max)",
                              value: this.props.username,
                            })
                          ),
                          r.a.createElement(
                            "div",
                            { className: "EmojiPicker-BottomContainer" },
                            !this.props.hideSkinPicker &&
                              r.a.createElement(
                                "div",
                                {
                                  onClick: this.onClickSkinPickerBtn,
                                  className: "EmojiPicker-ChooseSkinBtn",
                                },
                                r.a.createElement("img", {
                                  alt: "Choose Skin",
                                  className: "EmojiPicker-SkinImg",
                                  src:
                                    this.props.defaultThumbUrl ||
                                    "/images/skins/box.png",
                                })
                              ),
                            r.a.createElement(
                              "div",
                              {
                                className: "EmojiPicker-Emoji",
                                onClick: this.onClickEmojiStatus,
                              },
                              this.state.currentEmoji
                            )
                          )
                        )
                      );
                },
              },
            ]),
            t
          );
        })(r.a.PureComponent);
      function Oe(e, t) {
        t || (t = Ie),
          (function (e, t) {
            null === Bt ||
              void 0 === Bt ||
              Bt.activeCharacter.changeCharacterFace(e, t);
          })(e, t),
          (function (e) {
            var t = new L(e);
            We && et.addCommand(t);
          })(e),
          ye("Customize", "Change Face");
      }
      var Be = Object(ee.b)(
          function (e) {
            return { username: e.room.username };
          },
          { setUsername: Q, toggleWindowOpen: Se }
        )(Ne),
        De = {
          roomId: "",
          username: "",
          userEmoji: "\ud83d\ude0e",
          isAdminMode: !1,
          isChatEnabled: !1,
          videoQueueItems: [],
          connectionState: "DISCONNECTED",
          groupId: "",
        },
        Ve = n(11),
        Ue = n(404)(),
        ze = {
          isMobile: Ue,
          showModal: !1,
          modalMessage: "",
          windows: {
            RoomCreator: { offsetX: 0, offsetY: 0, isOpen: !Ue, inDock: !0 },
            Chat: { offsetX: 0, offsetY: 0, isOpen: !Ue, inDock: !1 },
            ControlsWindow: {
              offsetX: 0,
              offsetY: 0,
              isOpen: !Ue,
              inDock: !Ue,
            },
            VideoChatManager: {
              offsetX: 0,
              offsetY: 0,
              isOpen: !Ue,
              inDock: !1,
            },
            VideoQueue: { offsetX: 0, offsetY: 0, isOpen: !Ue, inDock: !1 },
            Parkour: { offsetX: 0, offsetY: 0, isOpen: !1, inDock: !1 },
            YoutubeControls: {
              offsetX: 0,
              offsetY: 0,
              isOpen: !Ue,
              inDock: !0,
            },
            GraphicsQualityPicker: {
              offsetX: 0,
              offsetY: 0,
              isOpen: !1,
              inDock: !0,
            },
            Customize: { offsetX: 0, offsetY: 0, isOpen: !Ue, inDock: !0 },
            Reddit: { offsetX: 0, offsetY: 0, isOpen: !1, inDock: !1 },
            SkinPicker: { offsetX: 0, offsetY: 0, isOpen: !1, inDock: !1 },
          },
        },
        je = Object(W.b)({
          room: function () {
            var e,
              t =
                arguments.length > 0 && void 0 !== arguments[0]
                  ? arguments[0]
                  : De,
              n = arguments.length > 1 ? arguments[1] : void 0;
            switch (n.type) {
              case "SET_ROOM_ID":
                return ((e = Object(Y.a)({}, t)).roomId = n.roomId), e;
              case "SET_USERNAME":
                return ((e = Object(Y.a)({}, t)).username = n.username), e;
              case "SET_USER_EMOJI":
                return ((e = Object(Y.a)({}, t)).userEmoji = n.newEmoji), e;
              case "SET_ADMIN_MODE":
                return (
                  ((e = Object(Y.a)({}, t)).isAdminMode = n.isAdminMode), e
                );
              case "SET_CHAT_ENABLED":
                return (
                  ((e = Object(Y.a)({}, t)).isChatEnabled = n.isChatEnabled), e
                );
              case "SET_VIDEO_QUEUE_ITEMS":
                return (
                  ((e = Object(Y.a)({}, t)).videoQueueItems = n.newItems), e
                );
              case "SET_CONNECTION_STATE":
                return (
                  ((e = Object(Y.a)({}, t)).connectionState = n.newState), e
                );
              case "SET_GROUP_ID":
                return ((e = Object(Y.a)({}, t)).groupId = n.newGroupId), e;
              default:
                return t;
            }
          },
          ui: function () {
            var e =
                arguments.length > 0 && void 0 !== arguments[0]
                  ? arguments[0]
                  : ze,
              t = arguments.length > 1 ? arguments[1] : void 0,
              n = Object(Y.a)({}, e);
            switch (t.type) {
              case "SET_WINDOW_OPEN":
                return (
                  (n.windows = Object(Y.a)(
                    {},
                    n.windows,
                    Object(Ve.a)(
                      {},
                      t.windowId,
                      Object(Y.a)({}, n.windows[t.windowId], {
                        isOpen: t.isOpen,
                      })
                    )
                  )),
                  n
                );
              case "TOGGLE_WINDOW_OPEN":
                if (t.isMobile)
                  for (var i in n.windows)
                    i !== t.windowId &&
                      (n.windows[i] = Object(Y.a)({}, n.windows[i], {
                        isOpen: !1,
                      }));
                return (
                  (n.windows = Object(Y.a)(
                    {},
                    n.windows,
                    Object(Ve.a)(
                      {},
                      t.windowId,
                      Object(Y.a)({}, n.windows[t.windowId], {
                        isOpen: !n.windows[t.windowId].isOpen,
                      })
                    )
                  )),
                  n
                );
              case "SET_DOCK_VISIBLE":
                return (
                  (n.windows = Object(Y.a)(
                    {},
                    n.windows,
                    Object(Ve.a)(
                      {},
                      t.windowId,
                      Object(Y.a)({}, n.windows[t.windowId], {
                        inDock: t.isVisible,
                      })
                    )
                  )),
                  n
                );
              case "SHOW_MODAL":
                return (n.showModal = !0), (n.modalMessage = t.modalMessage), n;
              default:
                return n;
            }
          },
          parkour: function () {
            var e =
                arguments.length > 0 && void 0 !== arguments[0]
                  ? arguments[0]
                  : q,
              t = arguments.length > 1 ? arguments[1] : void 0,
              n = Object(Y.a)({}, e);
            switch (t.type) {
              case "SET_PARKOUR_START_TIME":
                return (n.parkourStartTimestamp = t.timestamp), n;
              case "SET_BEST_PARKOUR_COURSE_TIME_MS":
                return (n.bestCourseTime = t.deltaTime), n;
              case "SET_PARKOUR_STARTED":
                return (n.parkourStarted = t.started), n;
              case "SET_LAST_PARKOUR_COURSE_TIME_MS":
                return (n.lastCourseTime = t.deltaTime), n;
              case "SET_PARKOUR_ENABLED":
                return (n.parkourEnabled = t.enabled), n;
              default:
                return e;
            }
          },
        }),
        Ge = Object(W.c)(
          je,
          window.__REDUX_DEVTOOLS_EXTENSION__ &&
            window.__REDUX_DEVTOOLS_EXTENSION__()
        ),
        He = (Ge.getState(), new b.a.Client(H, 100)),
        We = !1,
        Ye = "",
        qe = !1,
        Xe = 500,
        Qe = 0;
      function Ze() {
        return He;
      }
      function Je(e) {
        var t = e;
        (Ye = e), Si && (t = "ws://localhost:8080");
        try {
          He.connect(t);
        } catch (n) {
          console.error("Failure to connect", n);
        }
      }
      He.onConnect(function (e) {
        console.log("Connected to multiplayer server", e.text),
          (We = !0),
          setTimeout(function () {
            ot(Fe || it),
              rt.forEach(function (e) {
                et.addCommand(e);
              }),
              (rt = []);
          }, 5e3),
          Ge.dispatch($("CONNECTED"));
      }),
        He.onClose(function () {
          console.log("connection closed"),
            Ge.dispatch($("CONNECTING")),
            qe
              ? (qe = !1)
              : (setTimeout(function () {
                  Je(Ye), ++Qe > 7 && (Xe = 1e3);
                }, Xe),
                (We = !1));
        });
      var Ke = n(110);
      function $e(e) {
        if (0 === e)
          return (
            (Bt &&
              (null === Bt || void 0 === Bt ? void 0 : Bt.defaultSkinGlbUrl)) ||
            "/build/assets/boxman.glb"
          );
        var t = Ke.filter(function (t) {
          return t.id === e;
        });
        return t.length > 0
          ? "/build/assets/skins/".concat(t[0].stringId, ".glb")
          : null;
      }
      var et = Ze(),
        tt = new Map(),
        nt = 0,
        it = (function () {
          var e = Math.floor(9999 * Math.random());
          return "user_".concat(e);
        })(),
        rt = [];
      function at() {
        if (Bt) {
          Bt.activeCharacter.changeCharacterFace("\ud83d\ude0e", {
            r: 1,
            g: 1,
            b: 1,
          }),
            Bt.activeCharacter.changeName(it),
            Ge.dispatch(Q(it));
          var e = { r: Math.random(), g: Math.random(), b: Math.random() };
          Bt.activeCharacter.changeCharacterColor(e.r, e.g, e.b),
            Oe(Re, e),
            (Ie.r = e.r),
            (Ie.g = e.g),
            (Ie.b = e.b),
            (Bt.activeCharacter.sendCharAnimationStateCommand = lt),
            st(e.r, e.g, e.b);
        }
      }
      function ot(e) {
        var t = new I(e);
        We && et.addCommand(t);
      }
      function st(e, t, n) {
        var i = new B(e, t, n);
        We ? et.addCommand(i) : rt.push(i);
      }
      function lt(e, t) {
        var n = new G(e, t);
        We && et.addCommand(n);
      }
      var ut = [],
        ct = {},
        ht = new Set();
      function dt(e) {
        if (Bt) {
          var t = Bt.activeCharacter;
          t &&
            ut.forEach(function (e) {
              t.position.distanceTo(e.position) < 1 &&
                (function (e) {
                  pt.apply(this, arguments);
                })(e);
            });
        }
      }
      function pt() {
        return (pt = Object(m.a)(
          f.a.mark(function e(t) {
            var n;
            return f.a.wrap(function (e) {
              for (;;)
                switch ((e.prev = e.next)) {
                  case 0:
                    if (!ht.has(t.name)) {
                      e.next = 2;
                      break;
                    }
                    return e.abrupt("return");
                  case 2:
                    Ge.dispatch(
                      Me("You found a secret link! Please wait, redirecting...")
                    ),
                      (n = ct[t.name]) &&
                        n.data &&
                        n.data.url &&
                        setTimeout(function () {
                          var e = ve[n.data.url];
                          e && (window.location.href = atob(e));
                        }, 3e3),
                      ht.add(t.name);
                  case 6:
                  case "end":
                    return e.stop();
                }
            }, e);
          })
        )).apply(this, arguments);
      }
      n(405);
      var ft = (function (e) {
        function t(e) {
          var n;
          return (
            Object(s.a)(this, t),
            ((n = Object(u.a)(
              this,
              Object(c.a)(t).call(this, e)
            )).updateInterval = void 0),
            (n.unsub = void 0),
            (n.updateCurrentTime = function () {
              n.props.started &&
                n.setState({
                  currentTime: mt(Date.now() - n.props.startTimestamp),
                });
            }),
            (n.renderGlobalLeaderboard = function () {
              var e = n.state.leaderboard.map(function (e, t) {
                return r.a.createElement(
                  "tr",
                  { key: t },
                  r.a.createElement("td", null, e.username),
                  r.a.createElement("td", null, mt(e.timeMs))
                );
              });
              return r.a.createElement(
                "div",
                null,
                r.a.createElement(
                  "div",
                  { className: "ParkourTimer-Title" },
                  "Leaderboard"
                ),
                r.a.createElement(
                  "table",
                  null,
                  r.a.createElement(
                    "thead",
                    null,
                    r.a.createElement(
                      "tr",
                      null,
                      r.a.createElement("th", null, "Name"),
                      r.a.createElement("th", null, "Time")
                    )
                  ),
                  r.a.createElement("tbody", null, e)
                ),
                r.a.createElement("hr", null)
              );
            }),
            (n.state = { currentTime: "0:00", leaderboard: [] }),
            (n.updateInterval = setInterval(n.updateCurrentTime, 10)),
            n
          );
        }
        return (
          Object(h.a)(t, e),
          Object(l.a)(t, [
            {
              key: "componentDidUpdate",
              value: function (e) {
                var t = this;
                e.started &&
                  !this.props.started &&
                  this.setState({ currentTime: mt(this.props.lastTime) }),
                  e.groupId !== this.props.groupId &&
                    this.props.groupId &&
                    (this.unsub && this.unsub(),
                    (this.unsub = ae
                      .collection("leaderboard")
                      .doc(this.props.groupId)
                      .collection("times")
                      .orderBy("time", "asc")
                      .limit(3)
                      .onSnapshot(function (e) {
                        var n = [];
                        e.forEach(function (e) {
                          var t = e.data();
                          n.push({ username: t.username, timeMs: t.time });
                        }),
                          t.setState({ leaderboard: n });
                      })));
              },
            },
            {
              key: "componentWillUnmount",
              value: function () {
                this.updateInterval && clearInterval(this.updateInterval),
                  this.unsub && this.unsub();
              },
            },
            {
              key: "render",
              value: function () {
                if (!this.props.enabled) return null;
                var e = {};
                return (
                  this.props.groupId && (e.width = "200px"),
                  r.a.createElement(
                    Ce,
                    { top: 180, right: 8, windowId: "Parkour" },
                    r.a.createElement(
                      "div",
                      { style: e, className: "ParkourTimer" },
                      this.props.groupId && this.renderGlobalLeaderboard(),
                      r.a.createElement(
                        "div",
                        { className: "ParkourTimer-Title" },
                        "Parkour"
                      ),
                      r.a.createElement("div", null, "Time"),
                      r.a.createElement("div", null, this.state.currentTime),
                      r.a.createElement("br", null),
                      r.a.createElement("div", null, "Best"),
                      r.a.createElement("div", null, mt(this.props.bestTime))
                    )
                  )
                );
              },
            },
          ]),
          t
        );
      })(r.a.PureComponent);
      function mt(e) {
        var t = parseInt(e % 1e3),
          n = parseInt((e / 1e3) % 60),
          i = parseInt((e / 6e4) % 60);
        return (
          (i = i < 10 ? "0" + i : i) +
          ":" +
          (n = n < 10 ? "0" + n : n) +
          "." +
          t
        );
      }
      var vt = Object(ee.b)(function (e) {
        return {
          bestTime: e.parkour.bestCourseTime,
          started: e.parkour.parkourStarted,
          startTimestamp: e.parkour.parkourStartTimestamp,
          lastTime: e.parkour.lastCourseTime,
          enabled: e.parkour.parkourEnabled,
          groupId: e.room.groupId,
        };
      })(ft);
      function gt(e) {
        return yt.apply(this, arguments);
      }
      function yt() {
        return (yt = Object(m.a)(
          f.a.mark(function e(t) {
            var n;
            return f.a.wrap(function (e) {
              for (;;)
                switch ((e.prev = e.next)) {
                  case 0:
                    return (e.next = 2), ae.collection("rooms").doc(t).get();
                  case 2:
                    if (!(n = e.sent).exists) {
                      e.next = 7;
                      break;
                    }
                    return e.abrupt("return", n.data());
                  case 7:
                    return e.abrupt("return", !1);
                  case 8:
                  case "end":
                    return e.stop();
                }
            }, e);
          })
        )).apply(this, arguments);
      }
      function xt() {
        return (xt = Object(m.a)(
          f.a.mark(function e(t, n, i, r) {
            return f.a.wrap(function (e) {
              for (;;)
                switch ((e.prev = e.next)) {
                  case 0:
                    return (
                      (e.next = 2),
                      ae
                        .collection("rooms")
                        .doc(t)
                        .update({
                          youtubeId: n,
                          startTimestamp: i,
                          seekTime: 0,
                          isPlaying: !0,
                          playerType: r,
                          isYoutubeLive: !1,
                        })
                    );
                  case 2:
                  case "end":
                    return e.stop();
                }
            }, e);
          })
        )).apply(this, arguments);
      }
      function bt() {
        return (bt = Object(m.a)(
          f.a.mark(function e(t, n) {
            return f.a.wrap(function (e) {
              for (;;)
                switch ((e.prev = e.next)) {
                  case 0:
                    return (
                      (e.next = 2),
                      ae
                        .collection("rooms")
                        .doc(t)
                        .update({ playerType: "Twitch", twitchChannel: n })
                    );
                  case 2:
                  case "end":
                    return e.stop();
                }
            }, e);
          })
        )).apply(this, arguments);
      }
      function _t() {
        return (_t = Object(m.a)(
          f.a.mark(function e(t, n, i) {
            return f.a.wrap(function (e) {
              for (;;)
                switch ((e.prev = e.next)) {
                  case 0:
                    return (
                      (e.next = 2),
                      ae
                        .collection("rooms")
                        .doc(t)
                        .update({ seekTime: n, startTimestamp: Date.now() })
                    );
                  case 2:
                  case "end":
                    return e.stop();
                }
            }, e);
          })
        )).apply(this, arguments);
      }
      function wt() {
        return (wt = Object(m.a)(
          f.a.mark(function e(t, n) {
            return f.a.wrap(function (e) {
              for (;;)
                switch ((e.prev = e.next)) {
                  case 0:
                    return (
                      (e.next = 2),
                      ae
                        .collection("rooms")
                        .doc(t)
                        .update({ isPlaying: !0, startTimestamp: Date.now() })
                    );
                  case 2:
                  case "end":
                    return e.stop();
                }
            }, e);
          })
        )).apply(this, arguments);
      }
      function St() {
        return (St = Object(m.a)(
          f.a.mark(function e(t, n) {
            return f.a.wrap(function (e) {
              for (;;)
                switch ((e.prev = e.next)) {
                  case 0:
                    return (
                      (e.next = 2),
                      ae
                        .collection("rooms")
                        .doc(t)
                        .update({ isPlaying: !1, seekTime: n })
                    );
                  case 2:
                  case "end":
                    return e.stop();
                }
            }, e);
          })
        )).apply(this, arguments);
      }
      function Et() {
        return (Et = Object(m.a)(
          f.a.mark(function e(t, n) {
            return f.a.wrap(function (e) {
              for (;;)
                switch ((e.prev = e.next)) {
                  case 0:
                    return (
                      (e.next = 2),
                      ae.collection("rooms").doc(t).update({ subredditId: n })
                    );
                  case 2:
                  case "end":
                    return e.stop();
                }
            }, e);
          })
        )).apply(this, arguments);
      }
      function Mt() {
        return (Mt = Object(m.a)(
          f.a.mark(function e(t, n, i) {
            return f.a.wrap(function (e) {
              for (;;)
                switch ((e.prev = e.next)) {
                  case 0:
                    return (
                      (e.next = 2),
                      ae
                        .collection("leaderboard")
                        .doc(i)
                        .collection("times")
                        .add({ username: t, time: n, timestamp: new Date() })
                    );
                  case 2:
                  case "end":
                    return e.stop();
                }
            }, e);
          })
        )).apply(this, arguments);
      }
      var At,
        Tt,
        Ct = function (e) {
          return { type: "SET_PARKOUR_START_TIME", timestamp: e };
        },
        kt = function (e) {
          return { type: "SET_PARKOUR_STARTED", started: e };
        },
        Pt = function (e) {
          return { type: "SET_PARKOUR_ENABLED", enabled: e };
        },
        Lt = !1,
        Rt = 0,
        It = 0;
      function Ft(e) {
        if (Bt) {
          var t = Bt.activeCharacter;
          if (!t) return;
          if (
            At &&
            Tt &&
            (t.position.distanceTo(At.position) < 2 * At.scale.x &&
              (Lt
                ? Date.now() - Rt > 3e3 &&
                  ((Rt = Date.now()), Ge.dispatch(Ct(Rt)))
                : ((Lt = !0),
                  (Rt = Date.now()),
                  Ge.dispatch(Ct(Rt)),
                  Ge.dispatch(kt(!0)),
                  Ge.dispatch(Pt(!0)),
                  Ge.getState().ui.isMobile || Ge.dispatch(we("Parkour", !0)))),
            t.position.distanceTo(Tt.position) < 2 * Tt.scale.x && Lt)
          ) {
            var n = Date.now() - Rt;
            if (((Lt = !1), !It || n < It)) {
              It = n;
              var i = Ge.getState().room.groupId;
              if (i)
                !(function (e, t, n) {
                  Mt.apply(this, arguments);
                })(Ge.getState().room.username, n, i);
              Ge.dispatch({
                type: "SET_BEST_PARKOUR_COURSE_TIME_MS",
                deltaTime: n,
              }),
                (function (e) {
                  var t = Ge.getState();
                  t.room.roomId &&
                    me({ author: t.room.username, text: e }, t.room.roomId);
                })("[\ud83d\udc5f\u23f1 ".concat(mt(n), "]"));
            }
            Ge.dispatch(
              (function (e) {
                return {
                  type: "SET_LAST_PARKOUR_COURSE_TIME_MS",
                  deltaTime: e,
                };
              })(n)
            ),
              Ge.dispatch(kt(!1));
          }
        }
      }
      var Nt,
        Ot,
        Bt,
        Dt,
        Vt = new g.fb();
      function Ut(e) {
        Bt = e;
      }
      function zt(e, t, n, i) {
        Ht(),
          (Ot = t),
          (Bt = n),
          (function (e) {
            var t,
              n = new y.b();
            n.setSize(window.innerWidth, window.innerHeight),
              window.addEventListener(
                "resize",
                function () {
                  n.setSize(window.innerWidth, window.innerHeight);
                },
                !1
              ),
              (n.domElement.style.position = "absolute"),
              (n.domElement.style.top = "0px"),
              (n.domElement.style.zIndex = "-1"),
              null === (t = Bt) ||
                void 0 === t ||
                t.inputManager.setDomElement(n.domElement),
              (Nt = n),
              e.forEach(function (e) {
                var t = (function (e) {
                  var t = document.getElementById(e.elementId);
                  if (!t) return;
                  (t.style.height = "563px"), (t.style.width = "1000px");
                  var n = new y.a(t);
                  return (
                    (n.userData.type = "youtube_player"),
                    n.position.set(e.position.x, e.position.y, e.position.z),
                    n.rotation.set(e.rotation.x, e.rotation.y, e.rotation.z),
                    n.scale.multiplyScalar((e.width / 1e3) * 1.0005),
                    n
                  );
                })(e);
                t && Vt.add(t);
              });
          })(i),
          i.forEach(function (t) {
            !(function (e, t) {
              var n = new g.V(t.width, t.height),
                i = new g.H(n, jt);
              i.position.set(t.position.x, t.position.y, t.position.z),
                i.rotation.set(t.rotation.x, t.rotation.y, t.rotation.z),
                e.add(i);
            })(e, t);
          }),
          (Bt.renderer.domElement.style.pointerEvents = "none"),
          Nt && document.body.appendChild(Nt.domElement),
          ((Dt = new x.a(
            new g.rb(window.innerWidth, window.innerHeight),
            e,
            Ot
          )).visibleEdgeColor = new g.i(16777215)),
          (Dt.hiddenEdgeColor = new g.i(16777215)),
          n.composer.addPass(Dt),
          (Bt.customUpdate = Wt);
      }
      var jt = new g.I({ color: 0, opacity: 0, side: g.k });
      function Gt(e, t) {
        var n,
          i =
            arguments.length > 2 && void 0 !== arguments[2]
              ? arguments[2]
              : 100;
        if (!(e.children.length < 3) && t) {
          e.updateMatrixWorld();
          for (
            var r = new g.sb(),
              a = new g.sb(),
              o = new g.sb(),
              s = !1,
              l = !1,
              u = !1,
              c = 0;
            c < e.children.length;
            c++
          ) {
            var h = e.children[c];
            "top_left" === h.userData.type && (h.getWorldPosition(o), (s = !0)),
              "top_right" === h.userData.type &&
                (h.getWorldPosition(r), (l = !0)),
              "bottom_left" === h.userData.type &&
                (h.getWorldPosition(a), (u = !0));
          }
          if (s && l && u) {
            var d = new g.sb().subVectors(r, o),
              p = new g.sb().subVectors(a, o),
              f = new g.sb().crossVectors(p, d);
            f.normalize();
            var m = new g.sb().subVectors(r, a);
            m.multiplyScalar(0.5);
            var v = new g.sb().addVectors(a, m),
              x = new g.sb().addVectors(v, f),
              b = d.length(),
              _ = p.length(),
              w = new g.V(b, _),
              S = new g.H(w, jt);
            S.position.copy(v), S.lookAt(x), S.updateMatrix();
            var E = S.geometry.attributes.position.array,
              M = new g.sb(E[0], E[1], E[2]);
            M.applyMatrix4(S.matrix);
            var A = new g.sb().subVectors(M, v),
              T = new g.sb().subVectors(o, v),
              C = A.angleTo(T);
            S.rotateOnWorldAxis(f, C),
              null === (n = Bt) || void 0 === n || n.graphicsWorld.add(S),
              (t.style.height = _ * i + "px"),
              (t.style.width = b * i + "px");
            var k = new y.a(t);
            k.position.copy(v),
              k.scale.multiplyScalar(1 / i),
              k.lookAt(x),
              k.rotateOnWorldAxis(f, C),
              Vt.add(k);
          } else console.error("Error parsing css3d");
        }
      }
      function Ht() {
        for (var e = [], t = 0; t < Vt.children.length; t++) {
          var n = Vt.children[t];
          "youtube_player" !== n.userData.type && e.push(n);
        }
        for (var i = 0; i < e.length; i++) Vt.remove(e[i]);
      }
      function Wt(e) {
        Ot && Nt && Nt.render(Vt, Ot),
          (function () {
            if (We) {
              var e = et.readNetwork();
              if (
                (e.messages.forEach(function (e) {
                  "IdentityCommand" === e.protocol.name && (nt = e.entityId);
                }),
                Bt && Bt.activeCharacter)
              ) {
                var t = new z(
                  Bt.activeCharacter.characterCapsule.physics.physical,
                  Bt.activeCharacter
                );
                et.addCommand(t);
              }
              et.update(),
                e.entities.forEach(function (e) {
                  e.createEntities.forEach(function (e) {
                    if ("PlayerEntity" === e.protocol.name) {
                      var t = e;
                      if (e.nid === nt) return;
                      if (Bt) {
                        var n = "/build/assets/boxman.glb";
                        (n = $e(t.characterSkinId) || n),
                          Bt.loadingManager.loadGLTF(n, function (n) {
                            var i = new v.Character(n, !0);
                            n.scene.traverse(function (e) {
                              e.frustumCulled = !1;
                            }),
                              i.changeCharacterFace(t.faceString, {
                                r: t.bodyColorR,
                                g: t.bodyColorG,
                                b: t.bodyColorB,
                              }),
                              (i.faceString = t.faceString),
                              Bt && (i.world = Bt),
                              i.setPhysicsEnabled(!1),
                              i.changeName(t.name),
                              i.changeHat(t.hat),
                              (i.videoSessionId = t.videoSessionId),
                              i.setVideoTextureFromMap(),
                              i.changeCharacterColor(
                                t.bodyColorR,
                                t.bodyColorG,
                                t.bodyColorB
                              ),
                              null === Bt || void 0 === Bt || Bt.add(i),
                              (i.position.x = t.interpolatedPositionX),
                              (i.position.y = t.interpolatedPositionY),
                              (i.position.z = t.interpolatedPositionZ),
                              (i.rotation.x = t.rotationX),
                              (i.rotation.y = t.rotationY),
                              (i.rotation.z = t.rotationZ),
                              (i.tiltContainer.position.x =
                                t.tiltContainerPositionX),
                              (i.tiltContainer.position.y =
                                t.tiltContainerPositionY),
                              (i.tiltContainer.position.z =
                                t.tiltContainerPositionZ),
                              (i.tiltContainer.rotation.x =
                                t.tiltContainerRotationX),
                              (i.tiltContainer.rotation.y =
                                t.tiltContainerRotationY),
                              (i.tiltContainer.rotation.z =
                                t.tiltContainerRotationZ),
                              i.setAnimation(t.clipName, t.fadeIn),
                              (i.joystickAngle = t.joystickAngle),
                              (i.joystickEnabled = t.joystickEnabled),
                              tt.set(e.nid, i);
                          });
                      }
                    }
                  }),
                    e.updateEntities.forEach(function (e) {
                      var t = e.nid;
                      if (t !== nt) {
                        var n = tt.get(t);
                        if (n) {
                          "interpolatedPositionX" === e.prop &&
                            (n.position.x = e.value),
                            "interpolatedPositionY" === e.prop &&
                              (n.position.y = e.value),
                            "interpolatedPositionZ" === e.prop &&
                              (n.position.z = e.value),
                            "rotationX" === e.prop && (n.rotation.x = e.value),
                            "rotationY" === e.prop && (n.rotation.y = e.value),
                            "rotationZ" === e.prop && (n.rotation.z = e.value),
                            "faceString" === e.prop &&
                              (n.changeCharacterFace(e.value, n.bodyColor),
                              (n.faceString = e.value)),
                            "name" === e.prop && n.changeName(e.value),
                            "hat" === e.prop && n.changeHat(e.value),
                            "videoSessionId" === e.prop &&
                              ((n.videoSessionId = e.value),
                              n.setVideoTextureFromMap());
                          var i = !1;
                          if (
                            ("bodyColorR" === e.prop &&
                              ((i = !0), (n.bodyColor.r = e.value)),
                            "bodyColorG" === e.prop &&
                              ((i = !0), (n.bodyColor.g = e.value)),
                            "bodyColorB" === e.prop &&
                              ((i = !0), (n.bodyColor.b = e.value)),
                            i &&
                              (n.applyCharacterColor(),
                              n.changeCharacterFace(n.faceString, n.bodyColor)),
                            "characterSkinId" === e.prop)
                          ) {
                            var r = $e(e.value);
                            r && n.changeCharacterSkin(r);
                          }
                          "clipName" === e.prop && n.setAnimation(e.value, 0.1);
                        }
                      }
                    }),
                    e.deleteEntities.forEach(function (e) {
                      var t = tt.get(e);
                      t && (null === Bt || void 0 === Bt || Bt.remove(t)),
                        tt.delete(e);
                    });
                });
            }
          })(),
          dt(),
          Ft();
      }
      n(406);
      var Yt = n(49),
        qt = Object(Yt.a)({ basename: "/" }),
        Xt = n(221),
        Qt = n.n(Xt),
        Zt = n(32);
      function Jt(e) {
        return "/images/spaces/".concat(e, ".png");
      }
      var Kt = ["default", "art", "forest", "living_room", "museum", "parkour"],
        $t = [
          "algoanna",
          "gizmosphere",
          "algohouse",
          "apedrop2",
          "lynx",
          "lynxclub",
        ],
        en = (function (e) {
          function t(e) {
            var n;
            Object(s.a)(this, t),
              ((n = Object(u.a)(
                this,
                Object(c.a)(t).call(this, e)
              )).errorInterval = void 0),
              (n.onClickLeaveRoom = function () {
                qt.push("/");
              }),
              (n.createRoom = Object(m.a)(
                f.a.mark(function e() {
                  var t, i;
                  return f.a.wrap(
                    function (e) {
                      for (;;)
                        switch ((e.prev = e.next)) {
                          case 0:
                            return (
                              n.setState({
                                status: "Creating room...",
                                isLoading: !0,
                              }),
                              n.state.isVideoChatEnabled &&
                                ye("Room", "Create Video Room"),
                              (e.prev = 2),
                              ye(
                                "Room",
                                "Create Room",
                                (t = Kt[n.state.selectedSpaceIndex])
                              ),
                              (e.next = 7),
                              se({
                                isAdminMode: !n.state.isFreeModeChecked,
                                isChatEnabled: n.state.isChatEnabled,
                                spaceId: t,
                                isVideoChatEnabled: n.state.isVideoChatEnabled,
                                isPubliclyListed: n.state.isPubliclyListed,
                                isProximityChatEnabled:
                                  n.state.isProximityChatEnabled,
                                isVideoQueueEnabled: n.state.isPubliclyListed,
                                subredditId: n.state.subredditId,
                              })
                            );
                          case 7:
                            (i = e.sent),
                              "museum" === t &&
                                n.state.subredditId &&
                                ye(
                                  "Reddit",
                                  "Create Reddit Room",
                                  n.state.subredditId
                                ),
                              n.setState({
                                status:
                                  "Room created! Send the URL to friends!",
                                isLoading: !1,
                              }),
                              qt.replace(
                                "/"
                                  .concat(n.props.path || "room", "/")
                                  .concat(i.data.roomId)
                              ),
                              n.setState({ url: window.location.href }),
                              (e.next = 20);
                            break;
                          case 14:
                            (e.prev = 14),
                              (e.t0 = e.catch(2)),
                              console.log(e.t0),
                              n.setState({
                                isError: !0,
                                status:
                                  "Sorry, no rooms available now \ud83d\ude2d! Try again later.",
                                isLoading: !1,
                              }),
                              setTimeout(function () {
                                n.setState({
                                  isError: !1,
                                  status: "",
                                  timeoutLeft: 30,
                                });
                              }, 3e4),
                              (n.errorInterval = setInterval(function () {
                                n.setState(function (e) {
                                  return { timeoutLeft: e.timeoutLeft - 1 };
                                });
                              }, 1e3));
                          case 20:
                          case "end":
                            return e.stop();
                        }
                    },
                    e,
                    null,
                    [[2, 14]]
                  );
                })
              )),
              (n.getButtonText = function () {
                return n.state.isLoading
                  ? "Loading..."
                  : n.props.isInRoom
                  ? "Leave Room"
                  : "CREATE_ROOM";
              }),
              (n.renderInRoom = function () {
                return r.a.createElement(
                  "div",
                  null,
                  r.a.createElement(
                    "div",
                    { className: "RoomCreator-Description" },
                    r.a.createElement(
                      Zt.a,
                      null,
                      "Send this link to anyone who wants to join!"
                    )
                  ),
                  r.a.createElement(
                    "div",
                    { className: "RoomCreator-CopyText" },
                    r.a.createElement("input", {
                      className: "RoomCreator-Url",
                      type: "text",
                      value: n.state.url,
                      readOnly: !0,
                    }),
                    r.a.createElement(
                      "button",
                      {
                        onClick: n.onClickCopy,
                        className: "RoomCreator-CopyButton",
                      },
                      n.state.copied ? "Copied" : "Copy"
                    )
                  )
                );
              }),
              (n.handleInputChange = function (e) {
                var t = e.target;
                "isPubliclyListed" === t.name &&
                  t.checked &&
                  n.setState({ isVideoChatEnabled: !1 }),
                  n.setState(Object(Ve.a)({}, e.target.name, t.checked));
              }),
              (n.changeSpace = function (e) {
                ye("Room", "Change Space"),
                  n.setState(function (t) {
                    var n = t.selectedSpaceIndex + e;
                    return (
                      n < 0 ? (n = Kt.length - 1) : n >= Kt.length && (n = 0),
                      { selectedSpaceIndex: n }
                    );
                  });
              }),
              (n.onKeyHandler = function (e) {
                e.stopPropagation(), e.nativeEvent.stopImmediatePropagation();
              }),
              (n.handleSubredditIdChange = function (e) {
                var t = e.target.value;
                n.setState({ subredditId: t });
              }),
              (n.renderPreloadImages = function () {
                return Kt.map(function (e) {
                  return r.a.createElement("link", {
                    rel: "preload",
                    key: e,
                    as: "image",
                    href: Jt(e),
                  });
                });
              }),
              (n.renderSolo = function () {
                return r.a.createElement(
                  "div",
                  { className: "RoomCreator-Description" },
                  n.renderPreloadImages(),
                  r.a.createElement(
                    "div",
                    { className: "RoomCreator-SoloDescription" },
                    r.a.createElement(Zt.a, null, "MULTIPLAYER_EXPLANATION")
                  ),
                  r.a.createElement("hr", null),
                  r.a.createElement(
                    "div",
                    { className: "RoomCreator-CheckBox" },
                    r.a.createElement("input", {
                      type: "checkbox",
                      name: "isFreeModeChecked",
                      checked: n.state.isFreeModeChecked,
                      onChange: n.handleInputChange,
                    }),
                    r.a.createElement(Zt.a, null, "ENABLE_FREE_MODE")
                  ),
                  r.a.createElement(
                    "div",
                    { className: "RoomCreator-CheckBox" },
                    r.a.createElement("input", {
                      type: "checkbox",
                      name: "isChatEnabled",
                      checked: n.state.isChatEnabled,
                      onChange: n.handleInputChange,
                    }),
                    r.a.createElement(Zt.a, null, "ENABLE_TEXT_CHAT")
                  ),
                  n.state.isVideoChatEnabled &&
                    r.a.createElement(
                      "div",
                      { className: "RoomCreator-CheckBox" },
                      r.a.createElement("input", {
                        type: "checkbox",
                        name: "isProximityChatEnabled",
                        checked: n.state.isProximityChatEnabled,
                        onChange: n.handleInputChange,
                        readOnly: !0,
                      }),
                      r.a.createElement(Zt.a, null, "ENABLE_PROXIMITY_AUDIO")
                    ),
                  r.a.createElement(
                    "div",
                    { className: "RoomCreator-SpaceSelect" },
                    r.a.createElement(
                      "div",
                      { className: "RoomCreator-SpaceSelect-ArrowContainer" },
                      r.a.createElement(
                        "div",
                        null,
                        r.a.createElement(
                          "button",
                          {
                            onClick: function () {
                              return n.changeSpace(-1);
                            },
                            className: "RoomCreator-SpaceSelect-ArrowButton",
                          },
                          r.a.createElement(
                            "i",
                            { className: "material-icons md-light" },
                            "navigate_before"
                          )
                        )
                      )
                    ),
                    r.a.createElement(
                      "div",
                      null,
                      r.a.createElement("img", {
                        alt: "Space Preview",
                        src: Jt(Kt[n.state.selectedSpaceIndex]),
                      })
                    ),
                    r.a.createElement(
                      "div",
                      { className: "RoomCreator-SpaceSelect-ArrowContainer" },
                      r.a.createElement(
                        "div",
                        null,
                        r.a.createElement(
                          "button",
                          {
                            onClick: function () {
                              return n.changeSpace(1);
                            },
                            className: "RoomCreator-SpaceSelect-ArrowButton",
                          },
                          r.a.createElement(
                            "i",
                            { className: "material-icons md-light" },
                            "navigate_next"
                          )
                        )
                      )
                    )
                  ),
                  "museum" === Kt[n.state.selectedSpaceIndex] &&
                    r.a.createElement(
                      "div",
                      { className: "RoomCreator-RedditContainer" },
                      r.a.createElement(
                        "div",
                        { className: "RoomCreator-RedditChip" },
                        "r/"
                      ),
                      r.a.createElement(
                        "div",
                        { className: "RoomCreator-RedditInputContainer" },
                        r.a.createElement("input", {
                          value: n.state.subredditId,
                          onChange: n.handleSubredditIdChange,
                          onKeyDown: n.onKeyHandler,
                          className: "RoomCreator-RedditInput",
                          type: "text",
                        })
                      )
                    )
                );
              }),
              (n.onClickCopy = function () {
                Qt()(n.state.url), n.setState({ copied: !0 });
              });
            var i = 0;
            if (e.spaceId) {
              var a = Kt.indexOf(e.spaceId);
              a >= 0 && (i = a);
            }
            return (
              (n.state = {
                isError: !1,
                didCreateRoom: !1,
                status: e.isInRoom ? "" : "Playing Solo",
                isLoading: !1,
                url: window.location.href,
                copied: !1,
                isFreeModeChecked: !0,
                isChatEnabled: !0,
                isVideoChatEnabled: !1,
                timeoutLeft: 30,
                isPubliclyListed: !1,
                selectedSpaceIndex: i,
                isProximityChatEnabled: !1,
                subredditId: e.subredditId || "pics",
              }),
              n
            );
          }
          return (
            Object(h.a)(t, e),
            Object(l.a)(t, [
              {
                key: "componentDidUpdate",
                value: function (e) {
                  e.roomId !== this.props.roomId &&
                    this.setState({ url: window.location.href });
                },
              },
              {
                key: "render",
                value: function () {
                  var e = "RoomCreator-Button";
                  return (
                    this.state.isError && (e += " RoomCreator-Disabled"),
                    this.props.shardRoomScaling
                      ? r.a.createElement(
                          Ce,
                          {
                            disableDrag: !0,
                            bottom: 8,
                            left: 8,
                            windowId: "RoomCreator",
                          },
                          r.a.createElement(
                            "div",
                            { className: "RoomCreator" },
                            r.a.createElement(
                              "div",
                              null,
                              "CONNECTED" === this.props.connectionState
                                ? "Connected!"
                                : "Searching for players..."
                            )
                          )
                        )
                      : r.a.createElement(
                          Ce,
                          {
                            disableDrag: !0,
                            bottom: 8,
                            left: 8,
                            windowId: "RoomCreator",
                          },
                          r.a.createElement(
                            "div",
                            { className: "RoomCreator" },
                            r.a.createElement(
                              "div",
                              { className: "RoomCreator-Title" },
                              r.a.createElement(Zt.a, null, "MULTIPLAYER")
                            ),
                            this.props.isInRoom
                              ? this.renderInRoom()
                              : this.renderSolo(),
                            r.a.createElement(
                              "button",
                              {
                                className: e,
                                disabled:
                                  this.state.isLoading || this.state.isError,
                                onClick: this.props.isInRoom
                                  ? this.onClickLeaveRoom
                                  : this.createRoom,
                              },
                              r.a.createElement(
                                Zt.a,
                                null,
                                this.getButtonText()
                              )
                            ),
                            this.state.isError &&
                              r.a.createElement(
                                "div",
                                null,
                                "Sorry, our servers are overloaded now! Please try again in",
                                " ",
                                this.state.timeoutLeft,
                                " seconds!"
                              ),
                            this.props.isInRoom &&
                              r.a.createElement(
                                "div",
                                {
                                  style: {
                                    color:
                                      "CONNECTED" === this.props.connectionState
                                        ? "rgb(18, 162, 4)"
                                        : "red",
                                  },
                                  className: "RoomCreator-ConnectionState",
                                },
                                this.props.connectionState
                              )
                          )
                        )
                  );
                },
              },
            ]),
            t
          );
        })(r.a.PureComponent);
      var tn = Object(ee.b)(function (e) {
        return {
          isMobile: e.ui.isMobile,
          connectionState: e.room.connectionState,
        };
      })(en);
      function nn(e) {
        if (null == document.getElementById("youtubeEmbedApi")) {
          var t = document.createElement("script");
          (t.src = "https://www.youtube.com/iframe_api"),
            (t.id = "youtubeEmbedApi");
          var n = document.getElementsByTagName("script")[0];
          n.parentNode.insertBefore(t, n), (window.onYouTubeIframeAPIReady = i);
        } else i();
        function i() {
          new window.YT.Player("youtube-iframe", {
            playerVars: { autoPlay: 1 },
            events: { onReady: r, onStateChange: a },
          });
        }
        function r(t) {
          e(t.target);
        }
        function a(e) {}
      }
      var rn,
        an = n(153),
        on = (n(470), n(471), n(472).parse(window.location.search)),
        sn = "5qap5aO4i9A";
      on.v && (console.log(on.v), (sn = on.v)),
        (function (e) {
          (e[(e.UNSTARTED = -1)] = "UNSTARTED"),
            (e[(e.ENDED = 0)] = "ENDED"),
            (e[(e.PLAYING = 1)] = "PLAYING"),
            (e[(e.PAUSED = 2)] = "PAUSED"),
            (e[(e.BUFFERING = 3)] = "BUFFERING"),
            (e[(e.VIDEO_CUED = 5)] = "VIDEO_CUED");
        })(rn || (rn = {}));
      var ln = (function (e) {
        function t(e) {
          var n;
          return (
            Object(s.a)(this, t),
            ((n = Object(u.a)(this, Object(c.a)(t).call(this, e))).player =
              void 0),
            (n.youtubeId = sn),
            (n.playingYoutubeId = sn),
            (n.startTimestamp = 0),
            (n.watchdogInterval = void 0),
            (n.isDraggingSlider = !1),
            (n.seekTime = 0),
            (n.serverTimeOffset = 0),
            (n.serverIsPlaying = !0),
            (n.didShowAdminMode = !1),
            (n.twitchChannel = ""),
            (n.urlType = "Youtube"),
            (n.videoStatus = "LOADING"),
            (n.twitchPlayer = void 0),
            (n.loadingRoomInfo = void 0),
            (n.processRoomInfo = function (e) {
              if ("LOADING" !== n.videoStatus) {
                if (e) {
                  if (
                    (e.isAdminMode &&
                      (n.didShowAdminMode ||
                        n.setState({
                          isAdminMode: !0 === e.isAdminMode,
                          status:
                            "Creator mode enabled. Only room creator can affect video.",
                        }),
                      (n.didShowAdminMode = !0)),
                    e.youtubeId || e.twitchChannel
                      ? n.setState({ isEmptyVideo: !1 })
                      : n.setState({ isEmptyVideo: !0 }),
                    "Youtube" === e.playerType)
                  ) {
                    if (
                      (e.startTimestamp || (e.startTimestamp = 0),
                      e.youtubeId || (e.youtubeId = ""),
                      n.state.isYoutubeLive !== e.isYoutubeLive &&
                        e.youtubeId === n.playingYoutubeId &&
                        e.isYoutubeLive &&
                        n.player &&
                        ((n.playingYoutubeId = e.youtubeId),
                        n.player.loadVideoById(e.youtubeId)),
                      n.setState({ isYoutubeLive: !0 === e.isYoutubeLive }),
                      "YOUTUBE_READY" !== n.videoStatus)
                    )
                      n.setState({ playerType: "Youtube" });
                    else if (n.player) {
                      var t = Math.floor(
                        (Date.now() + n.serverTimeOffset - e.startTimestamp) /
                          1e3
                      );
                      e.seekTime && (t += e.seekTime),
                        e.youtubeId !== n.playingYoutubeId &&
                          (e.isYoutubeLive
                            ? (n.player.loadVideoById(e.youtubeId),
                              (n.playingYoutubeId = e.youtubeId))
                            : ((n.playingYoutubeId = e.youtubeId),
                              n.player.loadVideoById(e.youtubeId, t))),
                        e.isPlaying
                          ? (n.player.playVideo(),
                            n.setState({ isPlaying: !0 }))
                          : (n.player.seekTo(e.seekTime, !0),
                            n.player.pauseVideo(),
                            n.setState({ isPlaying: !1 }));
                    }
                    (n.serverIsPlaying = !!e.isPlaying),
                      (n.startTimestamp = e.startTimestamp
                        ? e.startTimestamp
                        : 0),
                      (n.seekTime = e.seekTime);
                  }
                  "Twitch" === e.playerType &&
                    ((n.twitchChannel = e.twitchChannel || ""),
                    "TWITCH_READY" === n.videoStatus
                      ? n.loadTwitchByChannel(n.twitchChannel)
                      : n.setState({ playerType: "Twitch" }));
                }
              } else n.loadingRoomInfo = e;
            }),
            (n.updateVideoQueue = function () {
              if (
                n.props.videoQueueItems &&
                0 !== n.props.videoQueueItems.length
              ) {
                var e = Date.now() + n.serverTimeOffset,
                  t = n.props.videoQueueItems[0].serverTimestamp;
                if (t)
                  for (
                    var i = t.toDate().getTime() - 1, r = 0;
                    r < n.props.videoQueueItems.length;
                    r++
                  ) {
                    var a,
                      o = n.props.videoQueueItems[r];
                    if (!o.serverTimestamp) return;
                    var s =
                        null === (a = o.serverTimestamp) || void 0 === a
                          ? void 0
                          : a.toDate().getTime(),
                      l = 0;
                    l = s >= i ? s : i;
                    var u = 1e3 * o.duration;
                    if (
                      (o.skipped &&
                        o.skipTimestamp &&
                        (u = o.skipTimestamp - l),
                      e >= l && e <= l + u)
                    ) {
                      var c = {
                        seekTime: 0,
                        startTimestamp: l,
                        youtubeId: o.youtubeId,
                        playerType: "Youtube",
                        isPlaying: !0,
                      };
                      n.processRoomInfo(c);
                      break;
                    }
                    i = l + u;
                  }
              }
            }),
            (n.startVideoWatchdog = function () {
              n.watchdogInterval && clearInterval(n.watchdogInterval),
                (n.watchdogInterval = setInterval(function () {
                  if (n.player)
                    if (n.state.isYoutubeLive)
                      n.player.getPlayerState() === rn.PAUSED &&
                        n.player.playVideo();
                    else {
                      "Twitch" === n.state.playerType &&
                        n.watchdogInterval &&
                        clearInterval(n.watchdogInterval);
                      var e = n.player.getCurrentTime(),
                        t = n.player.getDuration();
                      if (!n.isDraggingSlider) {
                        n.setState({ seekTime: Math.floor((e / t) * 100) });
                        var i = n.secondsToPlaybackString(e),
                          r = n.secondsToPlaybackString(t);
                        n.setState({ seekTimeString: i, durationString: r });
                      }
                      if (n.props.roomId) {
                        var a = Math.floor(
                          (Date.now() + n.serverTimeOffset - n.startTimestamp) /
                            1e3
                        );
                        if (((a += n.seekTime), Math.abs(a - e) > 3)) {
                          if (
                            n.player.getDuration() > 0 &&
                            a > n.player.getDuration() &&
                            n.serverIsPlaying
                          )
                            return (
                              n.player.pauseVideo(),
                              n.player.seekTo(a, !1),
                              void n.setState({ videoFinished: !0 })
                            );
                          n.serverIsPlaying
                            ? (n.player.seekTo(a, !0), n.player.playVideo())
                            : (n.player.seekTo(n.seekTime, !1),
                              n.player.pauseVideo());
                        }
                        n.setState({ videoFinished: !1 });
                      }
                    }
                }, 1e3));
            }),
            (n.onPlayerReady = function (e) {
              (n.videoStatus = "YOUTUBE_READY"),
                (n.player = e),
                n.loadingRoomInfo
                  ? (n.processRoomInfo(n.loadingRoomInfo),
                    (n.loadingRoomInfo = null))
                  : n.youtubeId === sn
                  ? n.player.playVideo()
                  : n.loadVideoById(n.youtubeId),
                n.setState({
                  durationString: n.secondsToPlaybackString(e.getDuration()),
                  volumeSliderValue: e.getVolume(),
                }),
                n.startVideoWatchdog();
            }),
            (n.getYoutubeId = function (e) {
              var t = e.match(
                  /^.*(youtu\.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/
                ),
                n = e.match(
                  /^(?:https?:\/\/)?(?:www\.|go\.)?twitch\.tv\/([a-z0-9_]+)($|\?)/
                );
              return t && 11 === t[2].length
                ? { type: "Youtube", id: t[2] }
                : !(!n || !n[1]) && { type: "Twitch", id: n[1] };
            }),
            (n.handleUrlChange = function (e) {
              var t = e.target.value,
                i = n.getYoutubeId(t);
              i && "Youtube" === i.type
                ? ((n.youtubeId = i.id),
                  (n.urlType = "Youtube"),
                  n.setState({
                    playEnabled: !0,
                    isError: !1,
                    status: "",
                    inputText: t,
                  }))
                : i && "Twitch" === i.type
                ? ((n.twitchChannel = i.id),
                  (n.urlType = "Twitch"),
                  n.setState({
                    playEnabled: !0,
                    isError: !1,
                    status: "",
                    inputText: t,
                  }))
                : n.setState({
                    playEnabled: !1,
                    isError: !0,
                    status:
                      "Invalid URL! Example: https://www.youtube.com/watch?v=5qap5aO4i9A",
                    inputText: t,
                  });
            }),
            (n.loadVideoById = function (e) {
              n.player &&
                ((n.youtubeId = e),
                (n.playingYoutubeId = e),
                n.player.loadVideoById(e, 0));
            }),
            (n.loadTwitchByChannel = function (e) {
              "Twitch" === n.state.playerType &&
                n.twitchPlayer &&
                n.twitchPlayer.setChannel(e);
            }),
            (n.onClickPlayNow = function () {
              n.props.isVideoQueueEnabled
                ? n.props.roomId &&
                  (n.setState({ inputText: "", playEnabled: !1 }),
                  le({ youtubeId: n.youtubeId, roomId: n.props.roomId }))
                : ("Youtube" === n.urlType
                    ? (ye("Video", "Load Youtube"),
                      "Youtube" !== n.state.playerType
                        ? n.setState({ playerType: "Youtube" })
                        : n.loadVideoById(n.youtubeId))
                    : "Twitch" === n.urlType &&
                      (ye("Video", "Load Twitch"),
                      "Twitch" !== n.state.playerType
                        ? n.setState({ playerType: "Twitch" })
                        : n.loadTwitchByChannel(n.twitchChannel)),
                  n.setState({ inputText: "" }),
                  n.props.roomId &&
                    ("Youtube" === n.urlType
                      ? (function (e, t, n, i) {
                          xt.apply(this, arguments);
                        })(
                          n.props.roomId,
                          n.youtubeId,
                          Date.now() + n.serverTimeOffset,
                          "Youtube"
                        )
                      : "Twitch" === n.urlType &&
                        (function (e, t) {
                          bt.apply(this, arguments);
                        })(n.props.roomId, n.twitchChannel),
                    me(
                      {
                        author: Ge.getState().room.username,
                        text: "[played a new ".concat(
                          n.state.playerType,
                          " video]"
                        ),
                      },
                      n.props.roomId
                    )));
            }),
            (n.onBeforePlaybackSliderChange = function (e) {
              n.isDraggingSlider = !0;
            }),
            (n.onPlaybackSliderChange = function (e) {
              if ((n.setState({ seekTime: e }), n.player)) {
                var t = n.player.getDuration(),
                  i = Math.floor((e / 100) * t);
                (n.seekTime = i),
                  n.setState({ seekTimeString: n.secondsToPlaybackString(i) }),
                  n.player.seekTo(i, !1);
              }
            }),
            (n.onAfterPlaybackSliderChange = function (e) {
              if (((n.isDraggingSlider = !1), n.player)) {
                var t = n.player.getDuration(),
                  i = Math.floor((e / 100) * t);
                n.player.seekTo(i, !0),
                  n.player.playVideo(),
                  n.props.roomId &&
                    (function (e, t, n) {
                      _t.apply(this, arguments);
                    })(n.props.roomId, i, n.serverTimeOffset);
              }
            }),
            (n.onClickToggleMute = function () {
              "YOUTUBE_READY" === n.videoStatus
                ? n.player &&
                  (n.player.isMuted()
                    ? (n.player.unMute(),
                      n.setState({
                        isMuted: !1,
                        volumeSliderValue: n.player.getVolume(),
                      }))
                    : (n.player.mute(),
                      n.setState({ isMuted: !0, volumeSliderValue: 0 })))
                : "TWITCH_READY" === n.videoStatus &&
                  n.twitchPlayer &&
                  (n.state.isMuted
                    ? (n.twitchPlayer.setMuted(!1), n.setState({ isMuted: !1 }))
                    : (n.twitchPlayer.setMuted(!0),
                      n.setState({ isMuted: !0 })));
            }),
            (n.onClickTogglePlay = function () {
              n.player &&
                (n.player.getPlayerState() === rn.PLAYING
                  ? (n.player.pauseVideo(),
                    n.setState({ isPlaying: !1 }),
                    n.props.roomId &&
                      (function (e, t) {
                        St.apply(this, arguments);
                      })(n.props.roomId, n.player.getCurrentTime()))
                  : (n.player.playVideo(),
                    n.setState({ isPlaying: !0 }),
                    n.props.roomId &&
                      (function (e, t) {
                        wt.apply(this, arguments);
                      })(n.props.roomId, n.serverTimeOffset)));
            }),
            (n.seekToLive = function () {
              n.player && n.player.loadVideoById(n.playingYoutubeId);
            }),
            (n.onVolumeSliderChange = function (e) {
              n.setState({ volumeSliderValue: e }),
                "YOUTUBE_READY" === n.videoStatus
                  ? n.player && n.player.setVolume(e)
                  : "TWITCH_READY" === n.videoStatus &&
                    n.twitchPlayer &&
                    n.twitchPlayer.setVolume(e / 100);
            }),
            (n.onKeyHandler = function (e) {
              "Enter" === e.key && n.onClickPlayNow(),
                e.stopPropagation(),
                e.nativeEvent.stopImmediatePropagation();
            }),
            (n.state = {
              isEmptyVideo: !1,
              playEnabled: !1,
              isError: !1,
              status: "",
              inputText: "",
              videoFinished: !1,
              seekTime: 0,
              durationString: "0:00",
              seekTimeString: "0:00",
              isPlaying: !0,
              isMuted: !1,
              volumeSliderValue: 20,
              isAdminMode: !1,
              playerType: "Youtube",
              isYoutubeLive: !1,
            }),
            e.defaultVideo && (n.playingYoutubeId = e.defaultVideo),
            (n.loadingRoomInfo = null),
            n
          );
        }
        return (
          Object(h.a)(t, e),
          Object(l.a)(t, [
            {
              key: "componentDidMount",
              value: function () {
                var e = this;
                this.props.started && nn(this.onPlayerReady),
                  oe.ref(".info/serverTimeOffset").on("value", function (t) {
                    var n = t.val();
                    e.serverTimeOffset = n;
                  }),
                  setInterval(this.updateVideoQueue, 5e3);
              },
            },
            {
              key: "componentWillUnmount",
              value: function () {
                this.watchdogInterval && clearInterval(this.watchdogInterval);
              },
            },
            {
              key: "componentDidUpdate",
              value: function (e, t) {
                this.state.playerType !== t.playerType &&
                  ((this.videoStatus = "LOADING"), this.loadVideoPlayer()),
                  this.props.roomId !== e.roomId &&
                    (this.watchdogInterval &&
                      clearInterval(this.watchdogInterval),
                    this.props.roomId ||
                      this.setState({ isEmptyVideo: !1, isYoutubeLive: !0 })),
                  this.props.started &&
                    !e.started &&
                    (this.player || nn(this.onPlayerReady)),
                  this.props.roomInfo &&
                    this.props.roomInfo !== e.roomInfo &&
                    this.processRoomInfo(this.props.roomInfo);
              },
            },
            {
              key: "loadVideoPlayer",
              value: function () {
                "Youtube" === this.state.playerType
                  ? nn(this.onPlayerReady)
                  : this.loadTwitchPlayer();
              },
            },
            {
              key: "loadTwitchPlayer",
              value: function () {
                var e = this,
                  t = new Twitch.Embed("twitch-embed", {
                    width: "100%",
                    height: "100%",
                    channel: this.twitchChannel,
                    autoplay: !1,
                    parent: ["embed.example.com", "othersite.example.com"],
                  });
                t.addEventListener(Twitch.Embed.VIDEO_READY, function () {
                  (e.videoStatus = "TWITCH_READY"),
                    e.loadingRoomInfo &&
                      (e.processRoomInfo(e.loadingRoomInfo),
                      (e.loadingRoomInfo = null));
                  var n = t.getPlayer();
                  (e.twitchPlayer = n), n.play();
                });
              },
            },
            {
              key: "secondsToPlaybackString",
              value: function (e) {
                isNaN(e) && (e = 0);
                var t = Math.floor(e / 3600),
                  n = Math.floor((e / 60) % 60) + "",
                  i = (Math.floor(e) % 60) + "";
                return (
                  (i = i.padStart(2, "0")),
                  t > 0
                    ? ((n = n.padStart(2, "0")),
                      "".concat(t, ":").concat(n, ":").concat(i))
                    : "".concat(n, ":").concat(i)
                );
              },
            },
            {
              key: "getStatus",
              value: function () {
                return this.state.status;
              },
            },
            {
              key: "getIframe",
              value: function () {
                if ("Youtube" === this.state.playerType) {
                  var e = this.playingYoutubeId;
                  (e =
                    this.playingYoutubeId === sn && this.props.defaultVideo
                      ? this.props.defaultVideo
                      : sn),
                    this.props.roomId && (e = "");
                  var t = "0";
                  return (
                    on.controls && (t = "1"),
                    r.a.createElement("iframe", {
                      id: "youtube-iframe",
                      title: "Youtube Player",
                      src: "https://www.youtube.com/embed/"
                        .concat(e, "?enablejsapi=1&autoplay=1&controls=")
                        .concat(t, "&fs=0&rel=0"),
                      frameBorder: "0",
                      allow:
                        "accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",
                      allowFullScreen: !0,
                      style: { width: "100%" },
                    })
                  );
                }
                return "Twitch" === this.state.playerType
                  ? r.a.createElement("div", {
                      style: { width: "100%" },
                      id: "twitch-embed",
                    })
                  : null;
              },
            },
            {
              key: "render",
              value: function () {
                var e =
                  this.state.isYoutubeLive ||
                  "5qap5aO4i9A" === this.playingYoutubeId;
                return r.a.createElement(
                  "div",
                  null,
                  r.a.createElement(
                    "div",
                    { id: "youtubeContainer" },
                    this.state.isEmptyVideo &&
                      r.a.createElement(
                        "div",
                        { style: { width: "100%" }, className: "youtubeCover" },
                        r.a.createElement(
                          "div",
                          { className: "youtubeCover-Text" },
                          r.a.createElement(
                            "div",
                            null,
                            r.a.createElement(Zt.a, null, "Room created"),
                            " \ud83e\udd18"
                          ),
                          r.a.createElement(
                            "div",
                            null,
                            r.a.createElement(
                              Zt.a,
                              null,
                              "Share the current URL to invite friends"
                            ),
                            " \ud83d\ude0e"
                          ),
                          r.a.createElement("br", null),
                          r.a.createElement(
                            "div",
                            null,
                            r.a.createElement(
                              Zt.a,
                              null,
                              "Paste Youtube/Twitch URL to play videos"
                            ),
                            " \ud83d\udcfc"
                          )
                        )
                      ),
                    r.a.createElement("div", {
                      className: this.props.isMobile
                        ? "Youtube-CoverMobile"
                        : "",
                    }),
                    this.getIframe()
                  ),
                  r.a.createElement(
                    Ce,
                    {
                      disableDrag: !0,
                      bottom: 48,
                      left: "calc(50% - 150px)",
                      windowId: "YoutubeControls",
                      styleTransparent: !0,
                    },
                    r.a.createElement(
                      "div",
                      { className: "Youtube-Controls" },
                      this.state.status &&
                        r.a.createElement(
                          "div",
                          { className: "Youtube-Status" },
                          this.getStatus()
                        ),
                      r.a.createElement(
                        "div",
                        { className: "Youtube-ControlsTitle" },
                        r.a.createElement(
                          Zt.a,
                          null,
                          this.state.videoFinished
                            ? "Video finished, paste new one"
                            : this.props.isVideoQueueEnabled
                            ? "Add to queue: Paste Youtube URL"
                            : "Paste Youtube/Twitch URL"
                        )
                      ),
                      r.a.createElement(
                        "div",
                        null,
                        r.a.createElement("input", {
                          onChange: this.handleUrlChange,
                          value: this.state.inputText,
                          className: "Youtube-TextInput",
                          onKeyDown: this.onKeyHandler,
                          type: "text",
                        }),
                        r.a.createElement(
                          "button",
                          {
                            disabled: !this.state.playEnabled,
                            onClick: this.onClickPlayNow,
                            className: "Youtube-PlayNow",
                          },
                          this.props.isVideoQueueEnabled ? "Add" : "Play Now"
                        )
                      ),
                      r.a.createElement(
                        "div",
                        { className: "Youtube-SliderContainer" },
                        "Youtube" === this.state.playerType &&
                          !e &&
                          r.a.createElement(
                            "div",
                            { className: "Youtube-SeekContainer" },
                            r.a.createElement(an.a, {
                              value: this.state.seekTime,
                              disabled: this.props.isVideoQueueEnabled,
                              onChange: this.onPlaybackSliderChange,
                              onAfterChange: this.onAfterPlaybackSliderChange,
                              onBeforeChange: this.onBeforePlaybackSliderChange,
                              className: "Youtube-Slider",
                              handleStyle: {
                                width: 20,
                                height: 20,
                                marginTop: -8,
                                backgroundColor: "#F40003",
                                border: "none",
                              },
                              trackStyle: { backgroundColor: "#F40003" },
                            }),
                            r.a.createElement(
                              "div",
                              { className: "Youtube-TimeText" },
                              this.state.seekTimeString,
                              " / ",
                              this.state.durationString
                            )
                          ),
                        e &&
                          r.a.createElement(
                            "div",
                            {
                              onClick: this.seekToLive,
                              className: "Youtube-LiveText",
                            },
                            "Live"
                          ),
                        r.a.createElement(
                          "div",
                          { className: "Youtube-TimeIndicator" },
                          "Youtube" === this.state.playerType &&
                            !e &&
                            !this.props.isVideoQueueEnabled &&
                            r.a.createElement(
                              "div",
                              null,
                              r.a.createElement(
                                "button",
                                {
                                  className: "Youtube-PlaybackButton",
                                  onClick: this.onClickTogglePlay,
                                },
                                r.a.createElement(
                                  "i",
                                  { className: "material-icons md-light" },
                                  this.state.isPlaying ? "pause" : "play_arrow"
                                )
                              )
                            ),
                          r.a.createElement(
                            "div",
                            null,
                            r.a.createElement(
                              "button",
                              {
                                className: "Youtube-PlaybackButton",
                                onClick: this.onClickToggleMute,
                              },
                              r.a.createElement(
                                "i",
                                { className: "material-icons md-light" },
                                this.state.isMuted ? "volume_off" : "volume_up"
                              )
                            )
                          ),
                          r.a.createElement(
                            "div",
                            { className: "Youtube-VolumeSlider" },
                            r.a.createElement(an.a, {
                              value: this.state.volumeSliderValue,
                              onChange: this.onVolumeSliderChange,
                            })
                          )
                        )
                      )
                    )
                  )
                );
              },
            },
          ]),
          t
        );
      })(r.a.PureComponent);
      var un = { setAdminMode: J, setChatEnabled: K },
        cn = Object(ee.b)(function (e) {
          return {
            isMobile: e.ui.isMobile,
            videoQueueItems: e.room.videoQueueItems,
          };
        }, un)(ln),
        hn =
          (n(145),
          (function (e) {
            function t() {
              var e, n;
              Object(s.a)(this, t);
              for (
                var i = arguments.length, r = new Array(i), a = 0;
                a < i;
                a++
              )
                r[a] = arguments[a];
              return (
                ((n = Object(u.a)(
                  this,
                  (e = Object(c.a)(t)).call.apply(e, [this].concat(r))
                )).onClickGoHome = function () {
                  var e = "";
                  n.props.roomType && (e = n.props.roomType),
                    (window.location.href = "/" + e);
                }),
                n
              );
            }
            return (
              Object(h.a)(t, e),
              Object(l.a)(t, [
                {
                  key: "render",
                  value: function () {
                    return r.a.createElement(
                      "div",
                      { className: "ErrorModal" },
                      r.a.createElement(
                        "div",
                        { className: "ErrorModal-Window" },
                        r.a.createElement(
                          "div",
                          null,
                          "Room code not valid or expired!"
                        ),
                        r.a.createElement(
                          "button",
                          { onClick: this.onClickGoHome },
                          "Go Home"
                        )
                      )
                    );
                  },
                },
              ]),
              t
            );
          })(r.a.PureComponent)),
        dn = n(226),
        pn =
          (n(480),
          (function (e) {
            function t() {
              var e, n;
              Object(s.a)(this, t);
              for (
                var i = arguments.length, a = new Array(i), o = 0;
                o < i;
                o++
              )
                a[o] = arguments[o];
              return (
                ((n = Object(u.a)(
                  this,
                  (e = Object(c.a)(t)).call.apply(e, [this].concat(a))
                )).renderStartButton = function () {
                  return r.a.createElement(
                    "button",
                    {
                      onClick: n.props.onClickStart,
                      className: "App-ClickStart",
                    },
                    n.props.roomId ? "Join Room" : "Play Now"
                  );
                }),
                (n.renderLoading = function () {
                  return r.a.createElement(
                    "div",
                    { className: "GetStarted-LoadingContainer" },
                    r.a.createElement(
                      "div",
                      { className: "lds-ellipsis" },
                      r.a.createElement("div", null),
                      r.a.createElement("div", null),
                      r.a.createElement("div", null),
                      r.a.createElement("div", null)
                    )
                  );
                }),
                n
              );
            }
            return (
              Object(h.a)(t, e),
              Object(l.a)(t, [
                {
                  key: "render",
                  value: function () {
                    return r.a.createElement(
                      "div",
                      { className: "App-ClickStartContainer" },
                      r.a.createElement(
                        "div",
                        { className: "GetStarted-RowMid" },
                        r.a.createElement(
                          "div",
                          { className: "GetStarted-Title" },
                          r.a.createElement("img", {
                            className: "GetStarted-Logo",
                            alt: "Logo",
                            src: n(481),
                          }),
                          r.a.createElement(
                            "div",
                            { className: "GetStarted-LogoText" },
                            this.props.subtitle
                              ? this.props.subtitle
                              : "Create a 3D room where you can sync YouTube/Twitch videos, video chat, play games and more!"
                          )
                        ),
                        this.props.isLoaded
                          ? this.renderStartButton()
                          : this.renderLoading()
                      ),
                      r.a.createElement(
                        "div",
                        { className: "GetStarted-About" },
                        r.a.createElement("a", { href: "/about" }, "About")
                      ),
                      r.a.createElement(
                        "div",
                        { className: "GetStarted-TosContainer" },
                        r.a.createElement(
                          "div",
                          { className: "GetStarted-Tos" },
                          "By using this site, you agree to DJ3D's",
                          " ",
                          r.a.createElement(
                            "a",
                            { href: "/terms" },
                            "Terms of Service"
                          ),
                          ". Our",
                          " ",
                          r.a.createElement(
                            "a",
                            { href: "/privacy" },
                            "Privacy Policy"
                          ),
                          " sets out how we handle your data. This site uses cookies to deliver its services and to analyze traffic."
                        )
                      )
                    );
                  },
                },
              ]),
              t
            );
          })(r.a.PureComponent)),
        fn = (n(482), n(227)),
        mn = (function (e) {
          function t(e) {
            var n;
            return (
              Object(s.a)(this, t),
              ((n = Object(u.a)(this, Object(c.a)(t).call(this, e))).unsub =
                function () {}),
              (n.chatRef = r.a.createRef()),
              (n.onSendMessage = function () {
                var e;
                n.props.roomId &&
                  "" !== n.state.chatInput &&
                  (ye("Chat", "SendMessage"),
                  me(
                    { author: n.props.username, text: n.state.chatInput },
                    n.props.roomId
                  ),
                  n.setState({ chatInput: "" }),
                  null === (e = n.chatRef.current) || void 0 === e || e.blur());
              }),
              (n.renderMessages = function () {
                return n.state.messages.map(function (e) {
                  return r.a.createElement(
                    "div",
                    { key: e.id, className: "Chat-Message" },
                    r.a.createElement("b", null, e.author, ":"),
                    " ",
                    e.text
                  );
                });
              }),
              (n.addMessage = function (e) {
                e.author || (e.author = "no_name"),
                  n.setState(function (t) {
                    return t.messages.push(e), { messages: t.messages };
                  });
              }),
              (n.onInputChange = function (e) {
                n.setState({ chatInput: e.target.value });
              }),
              (n.stopEvent = function (e) {
                "Enter" === e.key && n.onSendMessage(),
                  e.stopPropagation(),
                  e.nativeEvent.stopImmediatePropagation();
              }),
              (n.state = { chatInput: "", messages: [] }),
              n
            );
          }
          return (
            Object(h.a)(t, e),
            Object(l.a)(t, [
              {
                key: "componentDidMount",
                value: function () {
                  var e = this;
                  this.props.roomId &&
                    (this.props.setDockVisible("Chat", !0),
                    (this.unsub = fe(this.props.roomId).onSnapshot(function (
                      t
                    ) {
                      t.docChanges().forEach(function (t) {
                        if ("added" === t.type) {
                          var n = t.doc.data();
                          (n.id = t.doc.id), e.addMessage(n);
                        }
                      });
                    })));
                },
              },
              {
                key: "componentWillUnmount",
                value: function () {
                  this.unsub(), this.props.setDockVisible("Chat", !1);
                },
              },
              {
                key: "render",
                value: function () {
                  return r.a.createElement(
                    Ce,
                    {
                      right: 8,
                      bottom: 150,
                      windowId: "Chat",
                      disableDrag: !0,
                    },
                    r.a.createElement(
                      "div",
                      { className: "Chat" },
                      r.a.createElement(
                        "div",
                        { className: "Chat-MessageListContainer" },
                        r.a.createElement(
                          fn.a,
                          { className: "Chat-MessageList" },
                          this.renderMessages()
                        )
                      ),
                      r.a.createElement(
                        "div",
                        { className: "RoomCreator-CopyText" },
                        r.a.createElement("input", {
                          id: "chatInput",
                          className: "RoomCreator-Url",
                          type: "text",
                          value: this.state.chatInput,
                          placeholder: "Chat",
                          maxLength: 256,
                          onChange: this.onInputChange,
                          onKeyDown: this.stopEvent,
                          ref: this.chatRef,
                        }),
                        r.a.createElement(
                          "button",
                          {
                            onClick: this.onSendMessage,
                            className: "RoomCreator-CopyButton",
                          },
                          "Send"
                        )
                      )
                    )
                  );
                },
              },
            ]),
            t
          );
        })(r.a.Component);
      var vn = { setDockVisible: Ee },
        gn = Object(ee.b)(function (e) {
          return { username: e.room.username };
        }, vn)(mn),
        yn = n(26),
        xn = n(150);
      n(483);
      function bn(e) {
        var t = Object(i.useRef)(null),
          n = Object(i.useRef)(null);
        Object(i.useEffect)(
          function () {
            if (
              t &&
              t.current &&
              e.videoTrack &&
              ((t.current.srcObject = new MediaStream([e.videoTrack])),
              !e.fullCenterVideo)
            )
              if (e.isLocalPerson)
                Bt &&
                  Bt.activeCharacter &&
                  Bt.activeCharacter.setVideoTexture(t.current);
              else if (Bt) {
                var i = !1;
                Bt.characters.forEach(function (r) {
                  r.videoSessionId === e.sessionId &&
                    ((i = !0),
                    t.current && r.setVideoTexture(t.current),
                    n.current && r.setAudioChatElement(n.current));
                }),
                  i || Bt.videoMap.set(e.sessionId, t.current);
              }
          },
          [e.videoTrack, e.isLocalPerson, e.sessionId, e.fullCenterVideo]
        ),
          Object(i.useEffect)(
            function () {
              if (
                (n.current &&
                  e.audioTrack &&
                  (n.current.srcObject = new MediaStream([e.audioTrack])),
                Bt)
              ) {
                var t = !1;
                Bt.characters.forEach(function (i) {
                  i.videoSessionId === e.sessionId &&
                    ((t = !0), n.current && i.setAudioChatElement(n.current));
                }),
                  t || (n.current && Bt.audioMap.set(e.sessionId, n.current));
              }
            },
            [e.audioTrack, e.sessionId]
          );
        var a =
            e.videoTrack &&
            r.a.createElement("video", {
              className: e.fullCenterVideo
                ? "VideoChatManager-FullCenteredVideoTile"
                : "VideoChatManager-MyTile",
              autoPlay: !0,
              muted: !0,
              playsInline: !0,
              ref: t,
            }),
          o =
            !e.isLocalPerson &&
            e.audioTrack &&
            r.a.createElement("audio", {
              autoPlay: !0,
              playsInline: !0,
              ref: n,
            });
        return e.fullCenterVideo
          ? r.a.createElement(
              "div",
              { className: "VideoChatManager-FullCenteredVideo" },
              a,
              o
            )
          : r.a.createElement(
              "span",
              { style: { position: "absolute" } },
              a,
              o
            );
      }
      var _n = function (e) {
          var t = e.parentId,
            n = e.children,
            i = document.getElementById(t);
          return i ? Object(a.createPortal)(n, i) : null;
        },
        wn = n(69),
        Sn = xn.a.supportedBrowser().supported;
      function En(e) {
        var t = Object(i.useState)(xn.a.createCallObject()),
          n = Object(yn.a)(t, 1)[0],
          r = Object(i.useState)([]),
          a = Object(yn.a)(r, 2),
          o = a[0],
          s = a[1],
          l = Object(i.useState)(!1),
          u = Object(yn.a)(l, 2),
          c = u[0],
          h = u[1],
          d = Object(i.useState)(!1),
          p = Object(yn.a)(d, 2),
          v = p[0],
          g = p[1],
          y = Object(i.useState)(!1),
          x = Object(yn.a)(y, 2),
          b = x[0],
          _ = x[1],
          w = Object(i.useState)(!1),
          S = Object(yn.a)(w, 2),
          E = S[0],
          M = S[1],
          A = Object(i.useState)(!1),
          T = Object(yn.a)(A, 2),
          C = T[0],
          k = T[1],
          P = Object(i.useState)(!1),
          L = Object(yn.a)(P, 2),
          R = L[0],
          I = L[1],
          F = Object(i.useState)(!1),
          O = Object(yn.a)(F, 2),
          B = O[0],
          D = O[1],
          V = Object(i.useState)([]),
          U = Object(yn.a)(V, 2),
          z = U[0],
          j = U[1],
          G = Object(i.useState)([]),
          H = Object(yn.a)(G, 2),
          W = H[0],
          Y = H[1],
          q = Object(i.useState)(!1),
          X = Object(yn.a)(q, 2),
          Q = X[0],
          Z = X[1],
          J = Object(i.useState)(null),
          K = Object(yn.a)(J, 2),
          $ = K[0],
          ee = K[1],
          ne = Object(i.useState)(null),
          ie = Object(yn.a)(ne, 2),
          re = ie[0],
          ae = ie[1],
          oe = Object(i.useRef)(null),
          se = Object(i.useCallback)(function () {
            g(!1);
          }, []),
          le = Object(i.useCallback)(function () {
            g(!0);
          }, []),
          ue = Object(i.useCallback)(function () {
            g(!0);
          }, []),
          ce = Object(i.useCallback)(function (e) {
            var t = { deviceId: { exact: e } };
            navigator.mediaDevices
              .getUserMedia({ video: t })
              .then(function (e) {
                oe.current && (oe.current.srcObject = e);
              })
              .catch(function (e) {
                console.log("Something went wrong!");
              });
          }, []);
        Object(i.useEffect)(
          function () {
            $ && v && ce($);
          },
          [$, v, Q, ce]
        ),
          Object(i.useEffect)(function () {
            Ge.dispatch(Ee("VideoChatManager", !0));
          }, []);
        var he = Object(i.useCallback)(
            Object(m.a)(
              f.a.mark(function e() {
                return f.a.wrap(
                  function (e) {
                    for (;;)
                      switch ((e.prev = e.next)) {
                        case 0:
                          return (
                            (e.prev = 0),
                            (e.next = 3),
                            navigator.mediaDevices.getUserMedia({
                              video: !0,
                              audio: !0,
                            })
                          );
                        case 3:
                          Z(!0), (e.next = 10);
                          break;
                        case 6:
                          (e.prev = 6),
                            (e.t0 = e.catch(0)),
                            console.log(e.t0),
                            Z(!1);
                        case 10:
                        case "end":
                          return e.stop();
                      }
                  },
                  e,
                  null,
                  [[0, 6]]
                );
              })
            ),
            []
          ),
          de = Object(i.useCallback)(
            function () {
              !c &&
                e.roomUrl &&
                (D(!0),
                n.join({ url: e.roomUrl, audioSource: !1, videoSource: !1 })),
                se();
            },
            [c, e.roomUrl, se, n]
          );
        Object(i.useEffect)(
          function () {
            de();
          },
          [de]
        );
        var pe = Object(i.useCallback)(
            function () {
              n &&
                (n.leave(),
                I(!1),
                (null === Bt || void 0 === Bt
                  ? void 0
                  : Bt.activeCharacter.videoSprite) &&
                  (Bt.activeCharacter.videoSprite.visible = !1));
            },
            [n]
          ),
          fe = Object(i.useCallback)(
            function () {
              n &&
                (n.setLocalVideo(!1),
                (null === Bt || void 0 === Bt
                  ? void 0
                  : Bt.activeCharacter.videoSprite) &&
                  (Bt.activeCharacter.videoSprite.visible = !1),
                ye("VideoChat", "Disable video"));
            },
            [n]
          ),
          me = Object(i.useCallback)(
            function () {
              n &&
                (n.setLocalVideo(!0),
                (null === Bt || void 0 === Bt
                  ? void 0
                  : Bt.activeCharacter.videoSprite) &&
                  (Bt.activeCharacter.videoSprite.visible = !1),
                ye("VideoChat", "Enable video"));
            },
            [n]
          ),
          ve = Object(i.useCallback)(
            function () {
              n && (n.setLocalAudio(!1), ye("VideoChat", "Disable audio"));
            },
            [n]
          ),
          ge = Object(i.useCallback)(
            function () {
              n && (n.setLocalAudio(!0), ye("VideoChat", "Enable video"));
            },
            [n]
          ),
          xe = Object(i.useCallback)(
            function (e) {
              n &&
                (n.setInputDevicesAsync({ videoDeviceId: e.value }),
                ee(e.value));
            },
            [n]
          ),
          be = Object(i.useCallback)(
            function (e) {
              n &&
                (n.setInputDevicesAsync({ audioDeviceId: e.value }),
                ae(e.value));
            },
            [n]
          ),
          _e = Object(i.useCallback)(
            function () {
              n &&
                (n.startScreenShare(),
                k(!0),
                ye("VideoChat", "Start ScreenShare"));
            },
            [n]
          ),
          Se = Object(i.useCallback)(
            function () {
              n &&
                (n.stopScreenShare(),
                k(!1),
                ye("VideoChat", "Stop ScreenShare"));
            },
            [n]
          ),
          Me = Object(i.useCallback)(
            function () {
              n.setInputDevicesAsync({ videoDeviceId: $, audioDeviceId: re });
            },
            [n, re, $]
          );
        if (
          (Object(i.useEffect)(
            function () {
              if (n) {
                var e = ["joined-meeting", "left-meeting", "error"];
                a();
                for (var t = 0, i = e; t < i.length; t++) {
                  var r = i[t];
                  n.on(r, a);
                }
                return function () {
                  var t = !0,
                    i = !1,
                    r = void 0;
                  try {
                    for (
                      var o, s = e[Symbol.iterator]();
                      !(t = (o = s.next()).done);
                      t = !0
                    ) {
                      var l = o.value;
                      n.off(l, a);
                    }
                  } catch (u) {
                    (i = !0), (r = u);
                  } finally {
                    try {
                      t || null == s.return || s.return();
                    } finally {
                      if (i) throw r;
                    }
                  }
                };
              }
              function a(e) {
                switch (n.meetingState()) {
                  case "joined-meeting":
                    ye("VideoChat", "Join Meeting"),
                      h(!0),
                      D(!1),
                      Ge.getState().ui.isMobile &&
                        Ge.dispatch(we("VideoChatManager", !1));
                    break;
                  case "left-meeting":
                    h(!1);
                    break;
                  case "error":
                    h(!1), D(!1);
                }
              }
            },
            [n]
          ),
          Object(i.useEffect)(
            function () {
              n &&
                n.enumerateDevices().then(function (e) {
                  var t = [],
                    n = [],
                    i = !1,
                    r = !1;
                  e.devices.forEach(function (e) {
                    "videoinput" === e.kind &&
                      (t.push({ label: e.label, value: e.deviceId }),
                      i || (ee(e.deviceId), (i = !0))),
                      "audioinput" === e.kind &&
                        (n.push({ label: e.label, value: e.deviceId }),
                        r || (ae(e.deviceId), (r = !0)));
                  }),
                    j(t),
                    Y(n);
                });
            },
            [n, Q]
          ),
          Object(i.useEffect)(
            function () {
              if (n) {
                var e = [
                  "participant-joined",
                  "participant-updated",
                  "participant-left",
                ];
                a();
                for (var t = 0, i = e; t < i.length; t++) {
                  var r = i[t];
                  n.on(r, a);
                }
                return function () {
                  var t = !0,
                    i = !1,
                    r = void 0;
                  try {
                    for (
                      var o, s = e[Symbol.iterator]();
                      !(t = (o = s.next()).done);
                      t = !0
                    ) {
                      var l = o.value;
                      n && n.off(l, a);
                    }
                  } catch (u) {
                    (i = !0), (r = u);
                  } finally {
                    try {
                      t || null == s.return || s.return();
                    } finally {
                      if (i) throw r;
                    }
                  }
                };
              }
              function a(e) {
                var t = n.participants(),
                  i = Object.keys(t).map(function (e) {
                    var n = t[e];
                    return (
                      "local" === e &&
                        (!(function (e) {
                          var t = new N(e);
                          We && et.addCommand(t);
                        })(n.session_id),
                        t.local &&
                          (console.log(t.local),
                          _(t.local.video),
                          M(t.local.audio))),
                      {
                        videoTrack: n.videoTrack,
                        audioTrack: n.audioTrack,
                        sessionId: n.session_id,
                        isLocal: "local" === e,
                        screen: n.screen,
                        screenVideoTrack: n.screenVideoTrack,
                        screenAudioTrack: n.screenAudioTrack,
                      }
                    );
                  });
                s(i);
              }
            },
            [n]
          ),
          !e.started)
        )
          return null;
        if (!Sn) return i.createElement("div", null, "Not supported");
        var Ae = o
            .filter(function (e) {
              return !e.isLocal;
            })
            .map(function (e) {
              return i.createElement(bn, {
                key: e.sessionId,
                videoTrack: e.videoTrack,
                audioTrack: e.audioTrack,
                isLocalPerson: e.isLocal,
                sessionId: e.sessionId,
              });
            }),
          Te = o.map(function (e) {
            return e.screenVideoTrack
              ? i.createElement(
                  _n,
                  { parentId: "youtubeContainer" },
                  i.createElement(bn, {
                    key: e.sessionId + "_screenshare",
                    videoTrack: e.screenVideoTrack,
                    audioTrack: e.screenAudioTrack,
                    isLocalPerson: e.isLocal,
                    sessionId: e.sessionId,
                    fullCenterVideo: !0,
                  })
                )
              : null;
          }),
          ke = o.find(function (e) {
            return e.isLocal;
          }),
          Pe = null;
        ke &&
          (Pe = i.createElement(bn, {
            key: ke.sessionId,
            videoTrack: ke.videoTrack,
            audioTrack: ke.audioTrack,
            isLocalPerson: ke.isLocal,
            sessionId: ke.sessionId,
          }));
        var Le =
            z.find(function (e) {
              return e.value === $;
            }) || null,
          Re =
            W.find(function (e) {
              return e.value === re;
            }) || null;
        return (
          Le || (z.length > 0 && z[0].label && (Le = z[0])),
          Re || (W.length > 0 && W[0].label && (Re = W[0])),
          i.createElement(
            "div",
            { className: "VideoChatManager" },
            i.createElement(
              "div",
              { className: "VideoChatManager-OtherTiles" },
              Ae
            ),
            i.createElement(_n, { parentId: "youtubeContainer" }, Te),
            i.createElement(
              Ce,
              {
                transparentDisable: !0,
                bottom: 8,
                right: 232,
                windowId: "VideoChatManager",
              },
              i.createElement(
                "div",
                { className: "VideoChatManager-TileContainer" },
                i.createElement(
                  "div",
                  { className: "VideoChatManager-MyTile" },
                  c && Pe,
                  !R &&
                    i.createElement(
                      "button",
                      {
                        disabled: B,
                        className: "VideoChatManager-BtnJoin",
                        onClick: ue,
                      },
                      B ? "Joining..." : "Join Video Chat"
                    ),
                  c &&
                    i.createElement(
                      "button",
                      {
                        className: "VideoChatManager-BtnSettings",
                        onClick: le,
                      },
                      i.createElement(
                        "i",
                        { className: "material-icons md-light" },
                        "settings"
                      )
                    ),
                  c &&
                    R &&
                    i.createElement(
                      "button",
                      {
                        className: "VideoChatManager-BtnVideo",
                        onClick: b ? fe : me,
                      },
                      i.createElement(
                        wn.Tooltip,
                        {
                          position: "top",
                          trigger: "mouseenter",
                          title: b ? "Disable Camera" : "Enable Camera",
                          hideOnClick: !1,
                        },
                        i.createElement(
                          "i",
                          { className: "material-icons md-light" },
                          b ? "videocam" : "videocam_off"
                        )
                      )
                    ),
                  c &&
                    i.createElement(
                      "button",
                      {
                        className: "VideoChatManager-BtnScreenShare",
                        onClick: C ? Se : _e,
                      },
                      i.createElement(
                        wn.Tooltip,
                        {
                          position: "top",
                          trigger: "mouseenter",
                          title: C ? "Stop Sharing" : "Share Screen",
                          hideOnClick: !1,
                        },
                        i.createElement(
                          "i",
                          { className: "material-icons md-light" },
                          C ? "stop_screen_share" : "screen_share"
                        )
                      )
                    ),
                  c &&
                    R &&
                    i.createElement(
                      "button",
                      {
                        className: "VideoChatManager-BtnAudio",
                        onClick: E ? ve : ge,
                      },
                      i.createElement(
                        wn.Tooltip,
                        {
                          position: "top",
                          trigger: "mouseenter",
                          title: E ? "Mute mic" : "Un-mute mic",
                          hideOnClick: !1,
                        },
                        i.createElement(
                          "i",
                          { className: "material-icons md-light" },
                          E ? "mic" : "mic_off"
                        )
                      )
                    ),
                  c &&
                    i.createElement(
                      "button",
                      { className: "VideoChatManager-BtnLeave", onClick: pe },
                      i.createElement(
                        wn.Tooltip,
                        {
                          position: "top",
                          trigger: "mouseenter",
                          title: "Leave video chat",
                          hideOnClick: !1,
                        },
                        i.createElement(
                          "i",
                          { className: "material-icons md-light" },
                          "close"
                        )
                      )
                    )
                )
              )
            ),
            v &&
              i.createElement(
                "div",
                { className: "VideoChatManager-Modal" },
                i.createElement("div", {
                  onClick: se,
                  className: "VideoChatManager-Modal-Background",
                }),
                i.createElement(
                  "div",
                  { className: "VideoChatManager-Modal-Content" },
                  i.createElement(
                    "div",
                    { className: "VideoModal-Title" },
                    "Video Chat"
                  ),
                  i.createElement(
                    "div",
                    { className: "VideoModal-Description" },
                    "This room has video chat enabled. Clicking 'Share' will share your video and audio with everyone in the room.",
                    i.createElement(
                      "u",
                      null,
                      "You will need to enable browser permissions."
                    )
                  ),
                  Q &&
                    i.createElement(
                      "div",
                      null,
                      i.createElement(
                        "div",
                        { className: "VideoChatManager-PreviewContainer" },
                        i.createElement("video", {
                          ref: oe,
                          autoPlay: !0,
                          className: "VideoChatManager-Preview",
                        })
                      ),
                      i.createElement(
                        "div",
                        { className: "VideoModal-SectionTitle" },
                        "Webcam"
                      ),
                      i.createElement(te.a, {
                        placeholder: "Choose Webcam",
                        defaultValue: Le,
                        options: z,
                        isSearchable: !1,
                        onChange: xe,
                      }),
                      i.createElement(
                        "div",
                        { className: "VideoModal-SectionTitle" },
                        "Microphone"
                      ),
                      i.createElement(te.a, {
                        placeholder: "Choose Microphone",
                        defaultValue: Re,
                        options: W,
                        isSearchable: !1,
                        onChange: be,
                      })
                    ),
                  i.createElement(
                    "div",
                    { className: "VideoModal-BtnContainer" },
                    i.createElement(
                      "button",
                      {
                        className: "VideoModal-BtnDone",
                        onClick: Q
                          ? function () {
                              I(!0), g(!1), Me();
                            }
                          : he,
                      },
                      Q ? (c ? "Done" : "Join") : "Share Video/Audio"
                    )
                  )
                )
              )
          )
        );
      }
      n(485);
      function Mn(e, t) {
        return An.apply(this, arguments);
      }
      function An() {
        return (An = Object(m.a)(
          f.a.mark(function e(t, n) {
            var i, r;
            return f.a.wrap(function (e) {
              for (;;)
                switch ((e.prev = e.next)) {
                  case 0:
                    return (i = 0), (e.next = 3), ue(n);
                  case 3:
                    if (((r = e.sent), t)) {
                      e.next = 6;
                      break;
                    }
                    return e.abrupt("return");
                  case 6:
                    t.scene.traverse(
                      (function () {
                        var e = Object(m.a)(
                          f.a.mark(function e(t) {
                            var n, a, o, s, l, u, c, h, d, p, m, v, g;
                            return f.a.wrap(function (e) {
                              for (;;)
                                switch ((e.prev = e.next)) {
                                  case 0:
                                    if (!t.hasOwnProperty("userData")) {
                                      e.next = 25;
                                      break;
                                    }
                                    if (
                                      "css3d" !== t.userData.type ||
                                      "post" !== t.userData.reddit_type
                                    ) {
                                      e.next = 25;
                                      break;
                                    }
                                    (n = null), (a = 0);
                                  case 4:
                                    if (!(a < t.children.length)) {
                                      e.next = 12;
                                      break;
                                    }
                                    if (
                                      "title" !==
                                      (o = t.children[a]).userData.reddit_type
                                    ) {
                                      e.next = 9;
                                      break;
                                    }
                                    return (n = o), e.abrupt("break", 12);
                                  case 9:
                                    a++, (e.next = 4);
                                    break;
                                  case 12:
                                    (s = r[i]),
                                      (l = 40),
                                      (u =
                                        document.createElement(
                                          "div"
                                        )).classList.add("RedditPost"),
                                      (c = !1),
                                      s.url.includes("gfycat") &&
                                        (h =
                                          /(?:http:|https:|)(?:\/\/|)(?:gfycat\.com\/(?:\w*\/)*)(\w+$)/gi.exec(
                                            s.url
                                          )) &&
                                        h.length >= 2 &&
                                        ((c = !0),
                                        (d = "https://gfycat.com/ifr/".concat(
                                          h[1]
                                        )),
                                        u.appendChild(Cn(d))),
                                      s.url.includes("imgur") &&
                                        s.url.includes("gifv") &&
                                        ((p = (p = (p = s.url).replace(
                                          "gifv",
                                          "mp4"
                                        )).replace("/imgur", "/i.imgur")),
                                        u.appendChild(Tn(p)),
                                        (c = !0)),
                                      (s.url.includes("v.redd.it") ||
                                        s.is_self) &&
                                        (Ln(u, s.url),
                                        Pn(),
                                        (l = 100),
                                        (c = !0)),
                                      c ||
                                        ("image" === s.post_hint
                                          ? u.appendChild(kn(s.url))
                                          : "video" === s.post_hint
                                          ? u.appendChild(Tn(s.url))
                                          : (Ln(u, s.url),
                                            Pn(),
                                            (l = 100),
                                            (c = !0))),
                                      s.is_self && (l = 100),
                                      Gt(t, u, l),
                                      n &&
                                        ((m =
                                          document.createElement(
                                            "div"
                                          )).classList.add(
                                          "RedditTitleContainer"
                                        ),
                                        (v = document.createTextNode(s.title)),
                                        (g =
                                          document.createElement(
                                            "div"
                                          )).classList.add(
                                          "RedditTitleInnerContainer"
                                        ),
                                        g.appendChild(v),
                                        m.appendChild(g),
                                        Gt(n, m, 100)),
                                      i++;
                                  case 25:
                                  case "end":
                                    return e.stop();
                                }
                            }, e);
                          })
                        );
                        return function (t) {
                          return e.apply(this, arguments);
                        };
                      })()
                    );
                  case 7:
                  case "end":
                    return e.stop();
                }
            }, e);
          })
        )).apply(this, arguments);
      }
      function Tn(e) {
        var t = document.createElement("video");
        return (
          (t.src = e),
          (t.style.width = "100%"),
          (t.style.height = "100%"),
          (t.style.backgroundColor = "black"),
          (t.autoplay = !0),
          (t.loop = !0),
          (t.muted = !0),
          t
        );
      }
      function Cn(e) {
        var t = document.createElement("iframe");
        return (
          (t.src = e), (t.style.width = "100%"), (t.style.height = "100%"), t
        );
      }
      function kn(e) {
        var t = document.createElement("img");
        return (
          (t.src = e),
          (t.style.width = "100%"),
          (t.style.height = "100%"),
          (t.style.objectFit = "contain"),
          (t.style.backgroundColor = "black"),
          t
        );
      }
      function Pn() {
        if (!document.getElementById("reddit_api_lib")) {
          var e = document.createElement("script");
          (e.id = "reddit_api_lib"),
            e.setAttribute(
              "src",
              "https://embed.redditmedia.com/widgets/platform.js"
            ),
            document.head.appendChild(e);
        }
      }
      function Ln(e, t) {
        (e.innerHTML = '\n  <blockquote class="reddit-card" data-card-created="'
          .concat(Date.now(), '">\n    <a href="')
          .concat(t, '"></a>\n  </blockquote>\n')),
          (e.style.backgroundColor = "white");
      }
      function Rn(e, t, n) {
        return In.apply(this, arguments);
      }
      function In() {
        return (In = Object(m.a)(
          f.a.mark(function e(t, n, i) {
            var r, a;
            return f.a.wrap(function (e) {
              for (;;)
                switch ((e.prev = e.next)) {
                  case 0:
                    return Ht(), (r = 0), (e.next = 4), he(i);
                  case 4:
                    if (((a = e.sent), t)) {
                      e.next = 7;
                      break;
                    }
                    return e.abrupt("return");
                  case 7:
                    t.scene.traverse(
                      (function () {
                        var e = Object(m.a)(
                          f.a.mark(function e(t) {
                            var n, i, o, s, l, u, c, h;
                            return f.a.wrap(function (e) {
                              for (;;)
                                switch ((e.prev = e.next)) {
                                  case 0:
                                    if (!(r >= a.length)) {
                                      e.next = 2;
                                      break;
                                    }
                                    return e.abrupt("return");
                                  case 2:
                                    if (!t.hasOwnProperty("userData")) {
                                      e.next = 22;
                                      break;
                                    }
                                    if (
                                      "css3d" !== t.userData.type ||
                                      "post" !== t.userData.reddit_type
                                    ) {
                                      e.next = 22;
                                      break;
                                    }
                                    (n = null), (i = 0);
                                  case 6:
                                    if (!(i < t.children.length)) {
                                      e.next = 14;
                                      break;
                                    }
                                    if (
                                      "title" !==
                                      (o = t.children[i]).userData.reddit_type
                                    ) {
                                      e.next = 11;
                                      break;
                                    }
                                    return (n = o), e.abrupt("break", 14);
                                  case 11:
                                    i++, (e.next = 6);
                                    break;
                                  case 14:
                                    40,
                                      (s =
                                        document.createElement(
                                          "div"
                                        )).classList.add("RedditPost"),
                                      (l =
                                        "https://images.weserv.nl/?url=".concat(
                                          a[r].imageUrl
                                        )),
                                      s.appendChild(Fn(l)),
                                      Gt(t, s, 40),
                                      n &&
                                        ((u =
                                          document.createElement(
                                            "div"
                                          )).classList.add(
                                          "RedditTitleContainer"
                                        ),
                                        (c = document.createTextNode(
                                          a[r].title
                                        )),
                                        (h =
                                          document.createElement(
                                            "div"
                                          )).classList.add(
                                          "RedditTitleInnerContainer"
                                        ),
                                        h.appendChild(c),
                                        u.appendChild(h),
                                        Gt(n, u, 100)),
                                      r++;
                                  case 22:
                                  case "end":
                                    return e.stop();
                                }
                            }, e);
                          })
                        );
                        return function (t) {
                          return e.apply(this, arguments);
                        };
                      })()
                    );
                  case 8:
                  case "end":
                    return e.stop();
                }
            }, e);
          })
        )).apply(this, arguments);
      }
      function Fn(e) {
        var t = document.createElement("img");
        return (
          (t.src = e),
          (t.style.width = "100%"),
          (t.style.height = "100%"),
          (t.style.objectFit = "contain"),
          (t.style.backgroundColor = "black"),
          t
        );
      }
      var Nn = null;
      function On(e, t) {
        if (
          ((Nn = e),
          e.scene.traverse(function (e) {
            if (e.hasOwnProperty("userData")) {
              if ("open_url" === e.userData.type) {
                var t = { id: e.userData.id, url: e.userData.url };
                (e.material.transparent = !0),
                  (e.material.opacity = 0),
                  (u = e),
                  (c = t),
                  ut.push(u),
                  (ct[u.name] = { object: u, data: c });
              }
              if ("parkour_start" === e.userData.type) {
                !(function (e) {
                  At = e;
                })(e);
                var n = new g.kb(0.2, 4, 4),
                  i = new g.I({ color: 65280, transparent: !0, opacity: 0.5 }),
                  r = new g.H(n, i);
                e.add(r);
              }
              if ("parkour_end" === e.userData.type) {
                !(function (e) {
                  Tt = e;
                })(e);
                var a = new g.kb(0.2, 4, 4),
                  o = new g.I({
                    color: 16711680,
                    transparent: !0,
                    opacity: 0.5,
                  }),
                  s = new g.H(a, o);
                e.add(s);
              }
              if (e.userData.hasOwnProperty("opacity")) {
                var l = e.userData.opacity;
                e.material &&
                  ((e.material.transparent = !0), (e.material.opacity = l)),
                  e.traverse(function (e) {
                    e.material &&
                      ((e.material.transparent = !0), (e.material.opacity = l));
                  });
              }
            }
            var u, c;
          }),
          (null === t || void 0 === t ? void 0 : t.subredditId) &&
            Mn(e, t.subredditId),
          "louvre" === (null === t || void 0 === t ? void 0 : t.groupId))
        ) {
          var n = t.roomId || Math.random() + "";
          Rn(e, t.groupId, n);
        }
      }
      function Bn(e) {
        var t = null,
          n = null;
        return (
          e.scene.traverse(function (e) {
            e.hasOwnProperty("userData") &&
              "video" === e.userData.type &&
              ((t = {
                elementId: "youtubeContainer",
                width: 2 * e.scale.x,
                height: 2 * e.scale.z,
                position: { x: e.position.x, y: e.position.y, z: e.position.z },
                rotation: {
                  x: e.rotation.x - Math.PI / 2,
                  y: -e.rotation.z,
                  z: e.rotation.y,
                },
              }),
              (n = e));
          }),
          n && e.scene.remove(n),
          t
        );
      }
      var Dn = (function (e) {
        function t() {
          return (
            Object(s.a)(this, t),
            Object(u.a)(this, Object(c.a)(t).apply(this, arguments))
          );
        }
        return (
          Object(h.a)(t, e),
          Object(l.a)(t, [
            {
              key: "render",
              value: function () {
                return r.a.createElement(
                  "div",
                  { className: "ErrorModal" },
                  r.a.createElement(
                    "div",
                    { className: "ErrorModal-Window" },
                    r.a.createElement(
                      "div",
                      null,
                      "Are you still here?",
                      " ",
                      r.a.createElement(
                        "span",
                        { role: "img", "aria-label": "Thinking Emoji" },
                        "\ud83e\udd14"
                      )
                    ),
                    r.a.createElement(
                      "div",
                      null,
                      "Move your mouse to stay active!",
                      " ",
                      r.a.createElement(
                        "span",
                        { role: "img", "aria-label": "Wave Emoji" },
                        "\ud83d\udc4b"
                      )
                    )
                  )
                );
              },
            },
          ]),
          t
        );
      })(r.a.PureComponent);
      function Vn(e) {
        return Un.apply(this, arguments);
      }
      function Un() {
        return (Un = Object(m.a)(
          f.a.mark(function e(t) {
            var n, i, r;
            return f.a.wrap(
              function (e) {
                for (;;)
                  switch ((e.prev = e.next)) {
                    case 0:
                      (i = 1e3), (r = 0);
                    case 2:
                      if (!(r < 10)) {
                        e.next = 24;
                        break;
                      }
                      return (
                        (e.prev = 3), (e.next = 6), fetch(t, { method: "GET" })
                      );
                    case 6:
                      if (!(n = e.sent) || 200 !== n.status) {
                        e.next = 11;
                        break;
                      }
                      return e.abrupt("return", !0);
                    case 11:
                      return (e.next = 13), ge(i);
                    case 13:
                      i += 100;
                    case 14:
                      e.next = 21;
                      break;
                    case 16:
                      return (
                        (e.prev = 16), (e.t0 = e.catch(3)), (e.next = 20), ge(i)
                      );
                    case 20:
                      i += 100;
                    case 21:
                      r++, (e.next = 2);
                      break;
                    case 24:
                      return e.abrupt("return", !1);
                    case 25:
                    case "end":
                      return e.stop();
                  }
              },
              e,
              null,
              [[3, 16]]
            );
          })
        )).apply(this, arguments);
      }
      function zn(e) {
        return window.localStorage ? localStorage.getItem(e) : "";
      }
      n(486);
      var jn = [
          { value: 1, label: "100%" },
          { value: 0.8, label: "80%" },
          { value: 0.5, label: "50%" },
          { value: 0.2, label: "20%" },
          { value: 0.1, label: "10%" },
        ],
        Gn = (function (e) {
          function t(e) {
            var n;
            Object(s.a)(this, t),
              ((n = Object(u.a)(
                this,
                Object(c.a)(t).call(this, e)
              )).initialIndex = 2),
              (n.statsParentRef = void 0),
              (n.loadStats = function () {
                n.statsParentRef.current &&
                  (null === Bt ||
                    void 0 === Bt ||
                    Bt.loadStats(n.statsParentRef.current),
                  n.forceUpdate());
              }),
              (n.onChangeQuality = function (e) {
                var t = e.value;
                Bt &&
                  (Bt.updateGraphicsQuality(t),
                  (function (e, t) {
                    if (!window.localStorage) return "";
                    localStorage.setItem(e, t);
                  })("GRAPHICS_QUALITY", t + ""),
                  ye("Room", "Change Quality"));
              }),
              (n.state = {}),
              (n.statsParentRef = r.a.createRef());
            var i = zn("GRAPHICS_QUALITY");
            if (i) {
              var a = parseFloat(i);
              if (!isNaN(a)) {
                var o = jn.find(function (e) {
                  return e.value === a;
                });
                void 0 !== o && (n.initialIndex = jn.indexOf(o));
              }
            }
            return n;
          }
          return (
            Object(h.a)(t, e),
            Object(l.a)(t, [
              {
                key: "componentDidMount",
                value: function () {
                  this.loadStats();
                },
              },
              {
                key: "componentDidUpdate",
                value: function (e) {
                  e.isCharacterLoaded !== this.props.isCharacterLoaded &&
                    this.loadStats();
                },
              },
              {
                key: "render",
                value: function () {
                  return r.a.createElement(
                    Ce,
                    {
                      top: 60,
                      right: 8,
                      disableRenderToggle: !0,
                      windowId: "GraphicsQualityPicker",
                    },
                    r.a.createElement(
                      "div",
                      {
                        style: {
                          display: this.props.isWindowOpen ? "block" : "none",
                        },
                        className: "GraphicsQualityPicker",
                      },
                      r.a.createElement(
                        "div",
                        { className: "GraphicsQualityPicker-TitleMain" },
                        "Settings"
                      ),
                      r.a.createElement(
                        "div",
                        { className: "GraphicsQualityPicker-TitleSub" },
                        "Graphics Quality"
                      ),
                      r.a.createElement(te.a, {
                        className: "GraphicsQualityPicker-Select",
                        defaultValue: jn[this.initialIndex],
                        options: jn,
                        isSearchable: !1,
                        onChange: this.onChangeQuality,
                      }),
                      r.a.createElement(
                        "div",
                        { className: "GraphicsQualityPicker-TitleSub" },
                        "FPS"
                      ),
                      r.a.createElement("div", { ref: this.statsParentRef })
                    )
                  );
                },
              },
            ]),
            t
          );
        })(r.a.PureComponent);
      var Hn,
        Wn = Object(ee.b)(function (e) {
          var t, n;
          return {
            isWindowOpen:
              null === (t = e.ui.windows) ||
              void 0 === t ||
              null === (n = t.GraphicsQualityPicker) ||
              void 0 === n
                ? void 0
                : n.isOpen,
          };
        })(Gn),
        Yn = n(151),
        qn = n.n(Yn),
        Xn = (n(491), n(492), 0),
        Qn = 0;
      function Zn(e) {
        null === Bt ||
          void 0 === Bt ||
          Bt.activeCharacter.triggerAction("up", !0),
          console.log("mobile controls"),
          e.stopPropagation();
      }
      function Jn(e) {
        null === Bt ||
          void 0 === Bt ||
          Bt.activeCharacter.triggerAction("up", !1),
          e.stopPropagation();
      }
      function Kn(e) {
        null === Bt ||
          void 0 === Bt ||
          Bt.activeCharacter.triggerAction("jump", !0),
          e.stopPropagation();
      }
      function $n(e) {
        null === Bt ||
          void 0 === Bt ||
          Bt.activeCharacter.triggerAction("jump", !1),
          e.stopPropagation();
      }
      function ei(e) {
        return e.nativeEvent.stopImmediatePropagation(), !1;
      }
      function ti() {
        null === Bt || void 0 === Bt || Bt.activeCharacter.disableJoystick(),
          null === Bt ||
            void 0 === Bt ||
            Bt.activeCharacter.triggerAction("up", !1),
          null === Bt ||
            void 0 === Bt ||
            Bt.activeCharacter.triggerAction("run", !1);
      }
      function ni() {
        Hn && (clearInterval(Hn), (Hn = null));
      }
      var ii = Object(ee.b)(function (e) {
          return { isMobile: e.ui.isMobile, windows: e.ui.windows };
        })(function (e) {
          i.useEffect(function () {
            n.current &&
              ((n.current.ontouchstart = Zn),
              (n.current.ontouchend = Jn),
              (n.current.ontouchcancel = Jn)),
              r.current &&
                ((r.current.ontouchstart = Kn),
                (r.current.ontouchend = $n),
                (r.current.ontouchcancel = $n)),
              window.dispatchEvent(new Event("resize"));
          });
          var t,
            n = i.useRef(null),
            r = i.useRef(null);
          if (!e.isMobile) return null;
          for (t in e.windows) if (e.windows[t].isOpen) return null;
          return i.createElement(
            "div",
            { onContextMenu: ei, className: "MobileControls" },
            i.createElement(qn.a, {
              options: {
                mode: "static",
                position: { bottom: "50%", left: "50%" },
              },
              style: { width: 100, height: 100, marginLeft: "8px" },
              onMove: function (e, t) {
                !(function (e, t, n) {
                  null === Bt ||
                    void 0 === Bt ||
                    Bt.activeCharacter.enableJoystick(),
                    null === Bt ||
                      void 0 === Bt ||
                      Bt.activeCharacter.triggerAction("up", !0),
                    n.distance > 40
                      ? null === Bt ||
                        void 0 === Bt ||
                        Bt.activeCharacter.triggerAction("run", !0)
                      : null === Bt ||
                        void 0 === Bt ||
                        Bt.activeCharacter.triggerAction("run", !1),
                    null === Bt ||
                      void 0 === Bt ||
                      Bt.activeCharacter.sendJoystickAngle(e);
                })(t.angle.radian, 0, t);
              },
              onEnd: ti,
            }),
            i.createElement(
              "div",
              { className: "MobileControls-RightSide" },
              " ",
              i.createElement(
                "button",
                { className: "MobileControls-Button", ref: r },
                i.createElement(
                  "i",
                  { className: "material-icons md-light MobileControls-Icon " },
                  "arrow_circle_up"
                )
              ),
              i.createElement(qn.a, {
                options: {
                  mode: "static",
                  position: { bottom: "50%", left: "50%" },
                },
                style: { width: 100, height: 100, marginRight: "8px" },
                onMove: function (e, t) {
                  var n,
                    i,
                    r,
                    a,
                    o = t.angle.radian;
                  (n = -Math.cos(o)),
                    (i = Math.sin(o)),
                    (r = 8),
                    (a = 8),
                    (Xn = n),
                    (Qn = i),
                    Hn ||
                      (Hn = setInterval(function () {
                        null === Bt ||
                          void 0 === Bt ||
                          Bt.inputManager.handleMouseMove(Xn * r, Qn * a);
                      }, 16));
                },
                onEnd: ni,
              })
            )
          );
        }),
        ri = n(228),
        ai =
          (n(503),
          (function (e) {
            function t(e) {
              var n;
              return (
                Object(s.a)(this, t),
                ((n = Object(u.a)(this, Object(c.a)(t).call(this, e))).state = {
                  shouldRender: !1,
                }),
                n
              );
            }
            return (
              Object(h.a)(t, e),
              Object(l.a)(t, [
                {
                  key: "componentDidMount",
                  value: function () {
                    var e = this;
                    document.addEventListener(
                      "pointerlockchange",
                      function () {
                        document.pointerLockElement
                          ? e.setState({ shouldRender: !1 })
                          : e.setState({ shouldRender: !0 });
                      },
                      !1
                    );
                  },
                },
                {
                  key: "render",
                  value: function () {
                    return this.state.shouldRender
                      ? r.a.createElement(
                          "div",
                          { className: "EnterPointerLock" },
                          r.a.createElement(
                            "div",
                            {
                              className:
                                "EnterPointerLock-Text animate-flicker",
                            },
                            "Click to look around"
                          )
                        )
                      : null;
                  },
                },
              ]),
              t
            );
          })(r.a.PureComponent)),
        oi = ne.functions().httpsCallable("voteVideoQueue");
      n(504);
      var si = (function (e) {
          function t(e) {
            var n;
            return (
              Object(s.a)(this, t),
              ((n = Object(u.a)(
                this,
                Object(c.a)(t).call(this, e)
              )).firestoreUnsub = function () {}),
              (n.refreshTimer = void 0),
              (n.firestoreVoteUnsub = function () {}),
              (n.lastVoteQueueItemId = ""),
              (n.onClickVote = function (e, t) {
                var i, r;
                (null === (i = n.state.localVoteMap) ||
                void 0 === i ||
                null === (r = i[e]) ||
                void 0 === r
                  ? void 0
                  : r[t]) ||
                  (oi({
                    roomId: n.props.roomId || "",
                    queueItemId: e,
                    type: t,
                  }),
                  n.setState(function (n) {
                    var i = Object(Y.a)({}, n.localVoteMap);
                    i[e] || (i[e] = { skip: !1, upvote: !1 }), (i[e][t] = !0);
                    var r = Object(Y.a)({}, n.voteMap);
                    return (
                      r[e] || (r[e] = { skips: 0, upvotes: 0 }),
                      "skip" === t && r[e].skips++,
                      "upvote" === t && r[e].upvotes++,
                      { localVoteMap: i, voteMap: r }
                    );
                  }));
              }),
              (n.state = { queueItems: [], voteMap: {}, localVoteMap: {} }),
              n
            );
          }
          return (
            Object(h.a)(t, e),
            Object(l.a)(t, [
              {
                key: "componentDidMount",
                value: function () {
                  var e = this;
                  this.props.roomId &&
                    this.listenToVideoQueue(this.props.roomId),
                    Ge.dispatch(Ee("VideoQueue", !0)),
                    (this.refreshTimer = setInterval(function () {
                      e.forceUpdate();
                    }, 5e3));
                },
              },
              {
                key: "componentDidUpdate",
                value: function (e) {
                  e.roomId !== this.props.roomId &&
                    this.props.roomId &&
                    this.listenToVideoQueue(this.props.roomId);
                },
              },
              {
                key: "listenToVideoQueue",
                value: function (e) {
                  var t = this;
                  this.firestoreUnsub = ae
                    .collection("queues")
                    .doc(e)
                    .collection("videoQueues")
                    .orderBy("serverTimestamp", "asc")
                    .onSnapshot(function (e) {
                      var n = [];
                      e.forEach(function (e) {
                        var t = e.data();
                        (t.id = e.id), n.push(t);
                      }),
                        t.setState({ queueItems: n }),
                        t.props.setVideoQueueItems(n);
                    });
                },
              },
              {
                key: "listenToVideoQueueItem",
                value: function (e, t) {
                  var n = this;
                  this.firestoreVoteUnsub = ae
                    .collection("queues")
                    .doc(e)
                    .collection("videoQueues")
                    .doc(t)
                    .collection("votes")
                    .onSnapshot(function (e) {
                      var i = {};
                      e.forEach(function (e) {
                        var n = e.data();
                        i[t] || (i[t] = { skips: 0, upvotes: 0 }),
                          n.skip && i[t].skips++,
                          n.upvote && i[t].upvotes++;
                      }),
                        n.setState({ voteMap: i });
                    });
                },
              },
              {
                key: "componentWillUnmount",
                value: function () {
                  this.firestoreUnsub && this.firestoreUnsub(),
                    this.refreshTimer && clearInterval(this.refreshTimer),
                    Ge.dispatch(Ee("VideoQueue", !1));
                },
              },
              {
                key: "renderVideoList",
                value: function () {
                  var e = this;
                  if (
                    !this.state.queueItems ||
                    this.state.queueItems.length < 1
                  )
                    return null;
                  var t = this.state.queueItems[0].serverTimestamp,
                    n = Date.now();
                  if (!t) return null;
                  for (
                    var i = t.toDate().getTime() - 1,
                      a = [],
                      o = 0,
                      s = function (t) {
                        var s,
                          l = e.state.queueItems[t];
                        if (!l.serverTimestamp) return { v: void 0 };
                        var u =
                            null === (s = l.serverTimestamp) || void 0 === s
                              ? void 0
                              : s.toDate().getTime(),
                          c = 0;
                        c = u >= i ? u : i;
                        var h,
                          d,
                          p = 1e3 * l.duration;
                        if (
                          (l.skipped &&
                            l.skipTimestamp &&
                            (p = l.skipTimestamp - c),
                          n > c + p)
                        );
                        else {
                          var f,
                            m,
                            v,
                            g,
                            y,
                            x,
                            b,
                            _,
                            w =
                              !0 ===
                              (null === (f = e.state.localVoteMap) ||
                              void 0 === f ||
                              null === (m = f[l.id]) ||
                              void 0 === m
                                ? void 0
                                : m.upvote),
                            S =
                              !0 ===
                              (null === (v = e.state.localVoteMap) ||
                              void 0 === v ||
                              null === (g = v[l.id]) ||
                              void 0 === g
                                ? void 0
                                : g.skip),
                            E =
                              (null === (y = e.state.voteMap) ||
                              void 0 === y ||
                              null === (x = y[l.id]) ||
                              void 0 === x
                                ? void 0
                                : x.upvotes) || 0,
                            M =
                              (null === (b = e.state.voteMap) ||
                              void 0 === b ||
                              null === (_ = b[l.id]) ||
                              void 0 === _
                                ? void 0
                                : _.skips) || 0;
                          0 === o &&
                            e.props.roomId &&
                            e.lastVoteQueueItemId !== l.id &&
                            (e.firestoreVoteUnsub(),
                            (e.lastVoteQueueItemId = l.id),
                            e.listenToVideoQueueItem(e.props.roomId, l.id),
                            (h = e.props.roomId),
                            (d = l.videoTitle),
                            ae
                              .collection("presence")
                              .doc(h)
                              .update({ videoTitle: d })),
                            a.push(
                              r.a.createElement(
                                "div",
                                {
                                  className: "VideoQueue-List-Item",
                                  key: l.id,
                                },
                                r.a.createElement(
                                  "div",
                                  null,
                                  r.a.createElement("img", {
                                    alt: "Video queue thumbnail",
                                    className: "VideoQueue-List-Image",
                                    src: l.thumbUrl,
                                  }),
                                  l.videoTitle
                                ),
                                0 === o &&
                                  r.a.createElement(
                                    "div",
                                    {
                                      className:
                                        "VideoQueue-VoteButton-Container",
                                    },
                                    r.a.createElement(
                                      "button",
                                      {
                                        className:
                                          "VideoQueue-VoteButton VideoQueue-VoteButton-Upvote " +
                                          (w
                                            ? "VideoQueue-VoteButton-Voted"
                                            : ""),
                                        onClick: function () {
                                          return e.onClickVote(l.id, "upvote");
                                        },
                                      },
                                      r.a.createElement(
                                        "div",
                                        {
                                          className:
                                            "VideoQueue-VoteButton-Content",
                                        },
                                        r.a.createElement(
                                          "i",
                                          {
                                            className:
                                              "material-icons md-light",
                                          },
                                          "favorite"
                                        ),
                                        r.a.createElement("div", null, E)
                                      )
                                    ),
                                    r.a.createElement(
                                      "button",
                                      {
                                        className:
                                          "VideoQueue-VoteButton VideoQueue-VoteButton-Skip " +
                                          (S
                                            ? "VideoQueue-VoteButton-Voted"
                                            : ""),
                                        onClick: function () {
                                          return e.onClickVote(l.id, "skip");
                                        },
                                      },
                                      r.a.createElement(
                                        "div",
                                        {
                                          className:
                                            "VideoQueue-VoteButton-Content",
                                        },
                                        r.a.createElement(
                                          "i",
                                          {
                                            className:
                                              "material-icons md-light",
                                          },
                                          "skip_next"
                                        ),
                                        r.a.createElement("div", null, M)
                                      )
                                    )
                                  ),
                                0 === o && r.a.createElement("hr", null)
                              )
                            ),
                            o++;
                        }
                        i = c + p;
                      },
                      l = 0;
                    l < this.state.queueItems.length;
                    l++
                  ) {
                    var u = s(l);
                    if ("object" === typeof u) return u.v;
                  }
                  return a;
                },
              },
              {
                key: "render",
                value: function () {
                  return r.a.createElement(
                    Ce,
                    { left: 8, bottom: 220, windowId: "VideoQueue" },
                    r.a.createElement(
                      "div",
                      { className: "VideoQueue" },
                      r.a.createElement(
                        "div",
                        { className: "VideoQueue-Title" },
                        "Video Queue"
                      ),
                      r.a.createElement(
                        "div",
                        { className: "VideoQueue-List" },
                        this.renderVideoList()
                      )
                    )
                  );
                },
              },
            ]),
            t
          );
        })(r.a.PureComponent),
        li = {
          setVideoQueueItems: function (e) {
            return { type: "SET_VIDEO_QUEUE_ITEMS", newItems: e };
          },
        },
        ui = Object(ee.b)(null, li)(si),
        ci = [
          { keys: ["W", "A", "S", "D"], desc: "Movement" },
          { keys: ["Space"], desc: "Jump" },
          { keys: ["Shift"], desc: "Sprint" },
          { keys: ["F"], desc: "Dance" },
          { keys: ["Enter"], desc: "Chat" },
          { keys: ["V"], desc: "Hide Char (for you)" },
          { keys: ["ESC"], desc: "Use Mouse" },
        ],
        hi = (function (e) {
          function t() {
            return (
              Object(s.a)(this, t),
              Object(u.a)(this, Object(c.a)(t).apply(this, arguments))
            );
          }
          return (
            Object(h.a)(t, e),
            Object(l.a)(t, [
              {
                key: "componentDidMount",
                value: function () {
                  var e = this;
                  setTimeout(function () {
                    e.props.setWindowOpen("ControlsWindow", !1);
                  }, 3e4);
                },
              },
              {
                key: "renderControls",
                value: function () {
                  return ci.map(function (e) {
                    var t = [];
                    return (
                      t.push(
                        e.keys.map(function (e) {
                          return r.a.createElement(
                            "span",
                            { key: e, className: "key" },
                            e
                          );
                        })
                      ),
                      t.push(
                        r.a.createElement(
                          "span",
                          { key: "desc#" + e.desc, className: "ctrl-desc" },
                          " " + e.desc + " "
                        )
                      ),
                      r.a.createElement(
                        "div",
                        { key: e.desc, className: "info-row" },
                        t
                      )
                    );
                  });
                },
              },
              {
                key: "render",
                value: function () {
                  return r.a.createElement(
                    Ce,
                    { top: 8, left: 8, windowId: "ControlsWindow" },
                    r.a.createElement(
                      "div",
                      { className: "info-box" },
                      r.a.createElement(
                        "div",
                        { id: "controls-menu", className: "info-card" },
                        r.a.createElement(
                          "div",
                          { className: "info-title" },
                          "Controls:"
                        ),
                        this.renderControls()
                      )
                    )
                  );
                },
              },
            ]),
            t
          );
        })(r.a.PureComponent),
        di = { setWindowOpen: we },
        pi = Object(ee.b)(null, di)(hi),
        fi =
          (n(505),
          n(506),
          [
            { img: n(213), windowId: "Customize", tooltip: "Customize" },
            { img: n(213), windowId: "RoomCreator", tooltip: "Rooms" },
            { img: n(507), windowId: "Chat", tooltip: "Text Chat" },
            { img: n(508), windowId: "ControlsWindow", tooltip: "Controls" },
            {
              img: n(509),
              windowId: "VideoChatManager",
              tooltip: "Video Chat",
            },
            { img: n(510), windowId: "VideoQueue", tooltip: "Video Queue" },
            { img: n(511), windowId: "Parkour", tooltip: "Parkour" },
            {
              img: n(512),
              windowId: "YoutubeControls",
              tooltip: "Video Controls",
            },
            { img: n(513), windowId: "Reddit", tooltip: "Change Subreddit" },
            {
              img: n(514),
              windowId: "GraphicsQualityPicker",
              tooltip: "Settings",
            },
          ]),
        mi = (function (e) {
          function t(e) {
            var n;
            return (
              Object(s.a)(this, t),
              ((n = Object(u.a)(
                this,
                Object(c.a)(t).call(this, e)
              )).renderButtons = function () {
                return fi.map(function (e) {
                  var t = !1;
                  if (
                    ("Parkour" === e.windowId &&
                      n.props.parkourEnabled &&
                      (t = !0),
                    !t && !n.props.windows[e.windowId].inDock)
                  )
                    return null;
                  var i = r.a.createElement("img", {
                    alt: e.tooltip,
                    className: "Dock-Button-Img",
                    src: e.img,
                  });
                  "Customize" === e.windowId &&
                    (i = r.a.createElement(
                      "div",
                      { className: "Dock-Button-Emoji" },
                      n.props.userEmoji
                    ));
                  var a = n.props.windows[e.windowId].isOpen;
                  return r.a.createElement(
                    wn.Tooltip,
                    {
                      position: "top",
                      trigger: "mouseenter",
                      title: e.tooltip,
                      hideOnClick: !1,
                      disabled: n.props.isMobile,
                      key: e.windowId,
                    },
                    r.a.createElement(
                      "div",
                      { className: "Dock-ButtonContainer" },
                      r.a.createElement(
                        "button",
                        {
                          className: "Dock-Button",
                          onClick: function () {
                            return n.props.toggleWindowOpen(e.windowId);
                          },
                        },
                        i
                      ),
                      r.a.createElement("div", {
                        className: "Dock-Indicator",
                        style: {
                          backgroundColor: a
                            ? "rgba(255, 255, 255,0.7)"
                            : "transparent",
                        },
                      })
                    )
                  );
                });
              }),
              (n.state = {}),
              n
            );
          }
          return (
            Object(h.a)(t, e),
            Object(l.a)(t, [
              {
                key: "render",
                value: function () {
                  return r.a.createElement(
                    "div",
                    { className: "DockContainer" },
                    r.a.createElement(
                      "div",
                      { className: "Dock" },
                      this.renderButtons()
                    )
                  );
                },
              },
            ]),
            t
          );
        })(r.a.PureComponent);
      var vi = Object(ee.b)(
          function (e) {
            return {
              username: e.room.username,
              windows: e.ui.windows,
              parkourEnabled: e.parkour.parkourEnabled,
              userEmoji: e.room.userEmoji,
              isMobile: e.ui.isMobile,
            };
          },
          { setWindowOpen: we, toggleWindowOpen: Se }
        )(mi),
        gi =
          (n(515),
          (function (e) {
            function t(e) {
              var n;
              return (
                Object(s.a)(this, t),
                ((n = Object(u.a)(
                  this,
                  Object(c.a)(t).call(this, e)
                )).changeSubreddit = function () {
                  Nn &&
                    (Ht(),
                    Mn(Nn, n.state.subredditId),
                    n.props.roomId &&
                      (function (e, t) {
                        Et.apply(this, arguments);
                      })(n.props.roomId, n.state.subredditId));
                }),
                (n.stopEvent = function (e) {
                  "Enter" === e.key && n.changeSubreddit(),
                    e.stopPropagation(),
                    e.nativeEvent.stopImmediatePropagation();
                }),
                (n.onInputChange = function (e) {
                  n.setState({ subredditId: e.target.value });
                }),
                (n.state = { subredditId: "" }),
                n
              );
            }
            return (
              Object(h.a)(t, e),
              Object(l.a)(t, [
                {
                  key: "render",
                  value: function () {
                    return r.a.createElement(
                      Ce,
                      { forceCentering: !0, windowId: "Reddit" },
                      r.a.createElement(
                        "div",
                        { className: "RedditSettings" },
                        r.a.createElement(
                          "div",
                          { className: "RedditSettings-Title" },
                          "Choose Subreddit"
                        ),
                        r.a.createElement(
                          "div",
                          { className: "RoomCreator-CopyText" },
                          r.a.createElement("input", {
                            className: "RoomCreator-Url",
                            type: "text",
                            value: this.state.subredditId,
                            placeholder: "subreddit",
                            maxLength: 256,
                            onChange: this.onInputChange,
                            onKeyDown: this.stopEvent,
                          }),
                          r.a.createElement(
                            "button",
                            {
                              onClick: this.changeSubreddit,
                              className: "RoomCreator-CopyButton",
                            },
                            "Send"
                          )
                        )
                      )
                    );
                  },
                },
              ]),
              t
            );
          })(r.a.PureComponent));
      var yi = Object(ee.b)(function (e) {
          return { roomId: e.room.roomId };
        })(gi),
        xi =
          (n(516),
          (function (e) {
            function t() {
              return (
                Object(s.a)(this, t),
                Object(u.a)(this, Object(c.a)(t).apply(this, arguments))
              );
            }
            return (
              Object(h.a)(t, e),
              Object(l.a)(t, [
                {
                  key: "renderItems",
                  value: function (e) {
                    return Ke.map(function (t) {
                      return e.includes(t.id)
                        ? r.a.createElement(bi, {
                            key: t.stringId,
                            selected: !1,
                            stringId: t.stringId,
                            skinId: t.id,
                          })
                        : null;
                    });
                  },
                },
                {
                  key: "render",
                  value: function () {
                    var e = [0, 1, 2, 3];
                    return (
                      this.props.include && (e = this.props.include),
                      r.a.createElement(
                        Ce,
                        { windowId: "SkinPicker", forceCentering: !0 },
                        r.a.createElement(
                          "div",
                          { className: "SkinPicker" },
                          this.renderItems(e)
                        )
                      )
                    );
                  },
                },
              ]),
              t
            );
          })(r.a.PureComponent));
      function bi(e) {
        var t = Object(ee.c)();
        return r.a.createElement(
          "div",
          {
            onClick: function () {
              var n = $e(e.skinId);
              Bt && n && Bt.activeCharacter.changeCharacterSkin(n),
                (function (e) {
                  var t = new V(e);
                  We ? et.addCommand(t) : rt.push(t);
                })(e.skinId),
                t(we("SkinPicker", !1)),
                ye("Customize", "Pick Skin");
            },
            className: "SkinPicker-Item",
          },
          r.a.createElement("img", {
            className: "SkinPicker-Item-Img",
            alt: "stringId",
            src: "/images/skins/".concat(e.stringId, ".png"),
          })
        );
      }
      var _i = (function (e) {
          function t() {
            return (
              Object(s.a)(this, t),
              Object(u.a)(this, Object(c.a)(t).apply(this, arguments))
            );
          }
          return (
            Object(h.a)(t, e),
            Object(l.a)(t, [
              {
                key: "render",
                value: function () {
                  return r.a.createElement(
                    "div",
                    { id: "youtubeContainer" },
                    r.a.createElement("iframe", {
                      id: "youtube-iframe",
                      title: "Youtube Player",
                      src: "https://www.youtube.com/embed/".concat(
                        this.props.videoId,
                        "?enablejsapi=1&autoplay=1&controls=1&fs=0&rel=0"
                      ),
                      frameBorder: "0",
                      allow:
                        "accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",
                      allowFullScreen: !0,
                      style: { width: "100%" },
                    })
                  );
                },
              },
            ]),
            t
          );
        })(r.a.PureComponent),
        wi = (function (e) {
          function t() {
            return (
              Object(s.a)(this, t),
              Object(u.a)(this, Object(c.a)(t).apply(this, arguments))
            );
          }
          return (
            Object(h.a)(t, e),
            Object(l.a)(t, [
              {
                key: "render",
                value: function () {
                  return r.a.createElement(
                    "div",
                    { className: "ErrorModal" },
                    r.a.createElement(
                      "div",
                      { className: "ErrorModal-Window" },
                      r.a.createElement("div", null, this.props.message)
                    )
                  );
                },
              },
            ]),
            t
          );
        })(r.a.PureComponent),
        Si = !1,
        Ei = (function (e) {
          function t(e) {
            var n, i, r, a, o;
            Object(s.a)(this, t),
              ((o = Object(u.a)(this, Object(c.a)(t).call(this, e))).world =
                void 0),
              (o.idleTimeout = void 0),
              (o.spaceId = "default"),
              (o.isProximityChatEnabled = !1),
              (o.subredditId = ""),
              (o.unsub = function () {}),
              (o.unsubTicket = function () {}),
              (o.groupId = ""),
              (o.checkForShardScaling = function () {
                o.props.shardRoomScaling &&
                  (o.subredditId && (o.groupId = o.subredditId),
                  o.props.groupId && (o.groupId = o.props.groupId),
                  o.props.setGroupId(o.groupId),
                  o.getTicketAndWait());
              }),
              (o.listenForTicket = (function () {
                var e = Object(m.a)(
                  f.a.mark(function e(t) {
                    return f.a.wrap(function (e) {
                      for (;;)
                        switch ((e.prev = e.next)) {
                          case 0:
                            o.unsubTicket(),
                              (o.unsubTicket = ae
                                .collection("tickets")
                                .doc(t)
                                .onSnapshot(function (e) {
                                  if (e.exists) {
                                    var t = e.data();
                                    if (t.canceled)
                                      return (
                                        o.unsubTicket(),
                                        void o.getTicketAndWait()
                                      );
                                    t.roomId &&
                                      (o.setState({ forcedRoomId: t.roomId }),
                                      o.unsubTicket());
                                  }
                                }));
                          case 2:
                          case "end":
                            return e.stop();
                        }
                    }, e);
                  })
                );
                return function (t) {
                  return e.apply(this, arguments);
                };
              })()),
              (o.getTicketAndWait = Object(m.a)(
                f.a.mark(function e() {
                  var t, n;
                  return f.a.wrap(
                    function (e) {
                      for (;;)
                        switch ((e.prev = e.next)) {
                          case 0:
                            if (o.groupId) {
                              e.next = 2;
                              break;
                            }
                            return e.abrupt("return");
                          case 2:
                            return (
                              (e.prev = 2),
                              (e.next = 5),
                              pe({ groupId: o.groupId })
                            );
                          case 5:
                            (t = e.sent),
                              (n = t.data),
                              o.listenForTicket(n),
                              (e.next = 14);
                            break;
                          case 10:
                            (e.prev = 10),
                              (e.t0 = e.catch(2)),
                              o.unsubTicket(),
                              o.getTicketAndWait();
                          case 14:
                          case "end":
                            return e.stop();
                        }
                    },
                    e,
                    null,
                    [[2, 10]]
                  );
                })
              )),
              (o.onClickStart = function () {
                o.state.isCharacterLoaded &&
                  (o.world &&
                    o.world.inputManager.pointerLock &&
                    o.world.inputManager.domElement.requestPointerLock(),
                  o.setState({ started: !0 }));
              }),
              (o.goToDiscord = function () {
                window.open("https://discord.gg/Wpmz55T");
              }),
              (o.handleOnActive = function () {
                o.idleTimeout && clearTimeout(o.idleTimeout),
                  o.setState({ isIdle: !1 });
              }),
              (o.handleOnIdle = function () {
                "https://dj3d.io/" !== window.location.href &&
                  (o.setState({ isIdle: !0 }),
                  (o.idleTimeout = setTimeout(function () {
                    window.location.href = "https://dj3d.io/";
                  }, 3e4)));
              }),
              (o.analyticsPing = function () {
                ye("Ping", "30s");
              });
            var l =
              (null === (n = e.match) ||
              void 0 === n ||
              null === (i = n.params) ||
              void 0 === i
                ? void 0
                : i.spaceId) || "default";
            o.props.spaceId && (l = o.props.spaceId), (o.spaceId = l);
            var h =
              null === (r = e.match) ||
              void 0 === r ||
              null === (a = r.params) ||
              void 0 === a
                ? void 0
                : a.subredditId;
            h && ((o.spaceId = "museum"), (o.subredditId = h));
            var d = "";
            return (
              o.props.match &&
                o.props.match.params.roomId &&
                (d = o.props.match.params.roomId),
              o.props.simpleVideoPlayer &&
                o.props.setDockVisible("YoutubeControls", !1),
              (o.state = {
                started: !1,
                isInvalidRoom: !1,
                isCharacterLoaded: !1,
                isChatEnabled: !1,
                isVideoChatEnabled: !1,
                videoChatUrl: "",
                isIdle: !1,
                isVideoQueueEnabled: o.props.forceVideoQueueEnabled || !1,
                roomInfo: null,
                forcedRoomId: d,
              }),
              o
            );
          }
          return (
            Object(h.a)(t, e),
            Object(l.a)(t, [
              {
                key: "componentDidMount",
                value: (function () {
                  var e = Object(m.a)(
                    f.a.mark(function e() {
                      var t, n;
                      return f.a.wrap(
                        function (e) {
                          for (;;)
                            switch ((e.prev = e.next)) {
                              case 0:
                                if (!(t = this.getRoomId())) {
                                  e.next = 9;
                                  break;
                                }
                                return (e.next = 4), gt(t);
                              case 4:
                                (n = e.sent),
                                  this.listenToRoom(),
                                  n &&
                                    n.spaceId &&
                                    ((this.spaceId = n.spaceId),
                                    "museum" === this.spaceId
                                      ? ((this.subredditId =
                                          n.subredditId || "pics"),
                                        this.props.setDockVisible("Reddit", !0))
                                      : this.props.setDockVisible(
                                          "Reddit",
                                          !1
                                        )),
                                  this.connectToRoom(t, n),
                                  Ge.dispatch(Z(t));
                              case 9:
                                this.loadNewWorld(this.spaceId),
                                  this.checkForShardScaling(),
                                  Si && Je();
                              case 12:
                              case "end":
                                return e.stop();
                            }
                        },
                        e,
                        this
                      );
                    })
                  );
                  return function () {
                    return e.apply(this, arguments);
                  };
                })(),
              },
              {
                key: "listenToRoom",
                value: function () {
                  var e = this,
                    t = this.getRoomId();
                  t &&
                    (this.unsub(),
                    (this.unsub = ae
                      .collection("rooms")
                      .doc(t)
                      .onSnapshot(function (t) {
                        var n = t.data();
                        e.setState({ roomInfo: n }),
                          n.subredditId !== e.subredditId &&
                            n.subredditId &&
                            Mn(Nn, n.subredditId),
                          e.props.setChatEnabled(!0 === n.isChatEnabled),
                          e.props.setAdminMode(!0 === n.isAdminMode);
                      })));
                },
              },
              {
                key: "loadNewWorld",
                value: function (e) {
                  var t = this,
                    n = document.getElementById("canvas");
                  n && n.remove(), this.props.setParkourEnabled(!1);
                  var i = "/world.glb";
                  e &&
                    (Kt.includes(e) || $t.includes(e)) &&
                    "default" !== e &&
                    (i = "/scenes/".concat(e, ".glb"));
                  var r = {};
                  this.props.defaultSkinGlbUrl &&
                    (r.initialCharacterSkinURL = this.props.defaultSkinGlbUrl);
                  var a = new v.World(r);
                  Ut(a);
                  var o = (function () {
                    var e = zn("GRAPHICS_QUALITY");
                    if (e) {
                      var t = parseFloat(e);
                      if (!isNaN(t)) return t;
                    }
                    return 0.5;
                  })();
                  a.updateGraphicsQuality(o),
                    (this.world = a),
                    void 0 !== this.isProximityChatEnabled &&
                      (a.isProximityChatEnabled = this.isProximityChatEnabled),
                    (a.cameraOperator.theta = 0),
                    (a.cameraOperator.phi = 0),
                    (a.onCharacterLoaded = function () {
                      at(),
                        Ue && a.inputManager.setPointerLock(!1),
                        t.setState({ isCharacterLoaded: !0 });
                    }),
                    a.loadingManager.loadGLTF(i, function (e) {
                      a.loadScene(e),
                        On(e, {
                          subredditId: t.subredditId,
                          groupId: t.props.groupId,
                          roomId: t.getRoomId(),
                        });
                      var n = Bn(e),
                        i = a.graphicsWorld,
                        r = a.camera,
                        o = [];
                      n
                        ? o.push(n)
                        : t.props.disableVideoPlayer ||
                          o.push({
                            elementId: "youtubeContainer",
                            width: 20,
                            height: 11.5,
                            position: { x: 0, y: 6, z: -10 },
                            rotation: { x: 0, y: 0, z: 0 },
                          }),
                        zt(i, r, a, o);
                    });
                },
              },
              {
                key: "componentDidUpdate",
                value: (function () {
                  var e = Object(m.a)(
                    f.a.mark(function e(t, n) {
                      var i,
                        r,
                        a,
                        o,
                        s,
                        l = this;
                      return f.a.wrap(
                        function (e) {
                          for (;;)
                            switch ((e.prev = e.next)) {
                              case 0:
                                if (
                                  (this.props.match &&
                                    t.match &&
                                    this.props.match.params.roomId !==
                                      t.match.params.roomId &&
                                    (void 0 ===
                                      (i = this.props.match.params.roomId) &&
                                      (i = ""),
                                    this.setState({ forcedRoomId: i })),
                                  n.forcedRoomId === this.getRoomId())
                                ) {
                                  e.next = 16;
                                  break;
                                }
                                if (!(r = this.getRoomId())) {
                                  e.next = 14;
                                  break;
                                }
                                return Ge.dispatch(Z(r)), (e.next = 7), gt(r);
                              case 7:
                                (a = e.sent),
                                  this.listenToRoom(),
                                  a &&
                                    a.spaceId &&
                                    ("_matchmaker" === a.creatorUid ||
                                      ("museum" === (o = a.spaceId)
                                        ? ((this.subredditId =
                                            a.subredditId || "pics"),
                                          this.props.setDockVisible(
                                            "Reddit",
                                            !0
                                          ))
                                        : this.props.setDockVisible(
                                            "Reddit",
                                            !1
                                          ),
                                      o !== this.spaceId &&
                                        (this.loadNewWorld(o),
                                        (this.spaceId = o)))),
                                  "louvre" === this.props.groupId &&
                                    Rn(Nn, this.props.groupId, r),
                                  this.connectToRoom(r, a),
                                  (e.next = 16);
                                break;
                              case 14:
                                Ze() &&
                                  (He && (He.disconnect(), (qe = !0)),
                                  this.props.setDockVisible(
                                    "VideoChatManager",
                                    !1
                                  ),
                                  this.props.setDockVisible("VideoQueue", !1),
                                  this.props.setDockVisible("Reddit", !1),
                                  this.props.setDockVisible("Parkour", !1),
                                  this.setState(
                                    {
                                      isCharacterLoaded: !1,
                                      isChatEnabled: !1,
                                      isVideoChatEnabled: !1,
                                      videoChatUrl: "",
                                      isIdle: !1,
                                      isVideoQueueEnabled: !1,
                                      roomInfo: null,
                                    },
                                    function () {
                                      l.loadNewWorld("default");
                                    }
                                  ));
                              case 16:
                                (s = t.spaceId || "default"),
                                  this.props.spaceId !== s &&
                                    this.props.spaceId &&
                                    (this.loadNewWorld(this.props.spaceId),
                                    (this.spaceId = this.props.spaceId),
                                    document.exitPointerLock()),
                                  t.connectionState !==
                                    this.props.connectionState &&
                                    "DISCONNECTED" ===
                                      this.props.connectionState &&
                                    (this.unsubTicket(),
                                    this.checkForShardScaling()),
                                  t.shardRoomScaling !==
                                    this.props.shardRoomScaling &&
                                    this.checkForShardScaling(),
                                  !t.forceVideoQueueEnabled &&
                                    this.props.forceVideoQueueEnabled &&
                                    this.setState({ isVideoQueueEnabled: !0 });
                              case 21:
                              case "end":
                                return e.stop();
                            }
                        },
                        e,
                        this
                      );
                    })
                  );
                  return function (t, n) {
                    return e.apply(this, arguments);
                  };
                })(),
              },
              {
                key: "connectToRoom",
                value: (function () {
                  var e = Object(m.a)(
                    f.a.mark(function e(t, n) {
                      var i, r;
                      return f.a.wrap(
                        function (e) {
                          for (;;)
                            switch ((e.prev = e.next)) {
                              case 0:
                                if (
                                  (n &&
                                    ((i = !0 === n.isVideoQueueEnabled),
                                    this.props.forceVideoQueueEnabled &&
                                      (i = !0),
                                    this.setState({
                                      isChatEnabled: !0 === n.isChatEnabled,
                                      isVideoQueueEnabled: i,
                                    }),
                                    (this.isProximityChatEnabled =
                                      n.isProximityChatEnabled || !1),
                                    this.world &&
                                      (this.world.isProximityChatEnabled =
                                        this.isProximityChatEnabled)),
                                  n &&
                                    n.isVideoChatEnabled &&
                                    n.videoChatUrl &&
                                    this.setState({
                                      isVideoChatEnabled: !0,
                                      videoChatUrl: n.videoChatUrl,
                                    }),
                                  !n || !n.serverUrl)
                                ) {
                                  e.next = 14;
                                  break;
                                }
                                if (!0 !== n.isExpired) {
                                  e.next = 6;
                                  break;
                                }
                                return (
                                  this.setInvalidRoom(), e.abrupt("return")
                                );
                              case 6:
                                return (
                                  (r = (r = n.serverUrl).replace(
                                    "wss://",
                                    "https://"
                                  )),
                                  (e.next = 10),
                                  Vn(r)
                                );
                              case 10:
                                e.sent
                                  ? (this.setInvalidRoom(!1), Je(n.serverUrl))
                                  : (console.error("Server is not alive ", r),
                                    this.setInvalidRoom()),
                                  (e.next = 16);
                                break;
                              case 14:
                                console.error("Room is not alive ", t),
                                  this.setInvalidRoom();
                              case 16:
                              case "end":
                                return e.stop();
                            }
                        },
                        e,
                        this
                      );
                    })
                  );
                  return function (t, n) {
                    return e.apply(this, arguments);
                  };
                })(),
              },
              {
                key: "setInvalidRoom",
                value: function () {
                  var e =
                    !(arguments.length > 0 && void 0 !== arguments[0]) ||
                    arguments[0];
                  this.setState({ isInvalidRoom: e });
                },
              },
              {
                key: "isInRoom",
                value: function () {
                  return "" !== this.getRoomId();
                },
              },
              {
                key: "getRoomId",
                value: function () {
                  return this.state.forcedRoomId;
                },
              },
              {
                key: "getVideoPlayer",
                value: function () {
                  return this.props.disableVideoPlayer
                    ? null
                    : this.props.simpleVideoPlayer
                    ? r.a.createElement(_i, {
                        videoId: this.props.simpleVideoPlayer,
                      })
                    : r.a.createElement(cn, {
                        isVideoChat: this.state.isVideoChatEnabled,
                        roomId: this.getRoomId(),
                        started: this.state.started,
                        isVideoQueueEnabled: this.state.isVideoQueueEnabled,
                        roomInfo: this.state.roomInfo,
                      });
                },
              },
              {
                key: "render",
                value: function () {
                  return r.a.createElement(
                    "div",
                    { className: "App" },
                    r.a.createElement(
                      "div",
                      { className: "App-Discord" },
                      r.a.createElement(
                        "button",
                        { onClick: this.goToDiscord },
                        r.a.createElement("img", {
                          alt: "Join Discord",
                          src: n(517),
                        })
                      )
                    ),
                    this.getVideoPlayer(),
                    r.a.createElement(Be, {
                      isInRoom: this.isInRoom(),
                      defaultThumbUrl: this.props.defaultSkinThumbUrl,
                      hideSkinPicker: this.props.hideSkinPicker,
                    }),
                    r.a.createElement(tn, {
                      isInRoom: this.isInRoom(),
                      spaceId: this.spaceId,
                      roomId: this.getRoomId(),
                      subredditId: this.subredditId,
                      shardRoomScaling: this.props.shardRoomScaling,
                    }),
                    this.state.isInvalidRoom &&
                      !this.props.ignoreServerIssues &&
                      r.a.createElement(hn, null),
                    this.props.showModal &&
                      r.a.createElement(wi, {
                        message: this.props.modalMessage,
                      }),
                    r.a.createElement(
                      ri.CSSTransitionGroup,
                      {
                        transitionName: "FadeOut",
                        transitionLeaveTimeout: 200,
                        transitionEnterTimeout: 0,
                      },
                      !this.state.started &&
                        r.a.createElement(pn, {
                          onClickStart: this.onClickStart,
                          isLoaded: this.state.isCharacterLoaded,
                          roomId: this.getRoomId(),
                          subtitle: this.props.getStartedSubtitle,
                          groupId: this.props.groupId,
                        })
                    ),
                    this.state.isChatEnabled &&
                      r.a.createElement(gn, { roomId: this.getRoomId() }),
                    this.state.isCharacterLoaded &&
                      this.state.isVideoChatEnabled &&
                      r.a.createElement(En, {
                        started: this.state.isVideoChatEnabled,
                        roomUrl: this.state.videoChatUrl,
                      }),
                    r.a.createElement(dn.a, {
                      timeout: 9e5,
                      onActive: this.handleOnActive,
                      onIdle: this.handleOnIdle,
                      throttle: 3e4,
                      onAction: this.analyticsPing,
                    }),
                    this.state.isIdle && r.a.createElement(Dn, null),
                    r.a.createElement(Wn, {
                      isCharacterLoaded: this.state.isCharacterLoaded,
                    }),
                    r.a.createElement(ii, {
                      isCharacterLoaded: this.state.isCharacterLoaded,
                    }),
                    r.a.createElement(ai, null),
                    r.a.createElement(vt, null),
                    this.state.isVideoQueueEnabled &&
                      r.a.createElement(ui, { roomId: this.getRoomId() }),
                    r.a.createElement(pi, null),
                    r.a.createElement(yi, null),
                    r.a.createElement(xi, {
                      include: this.props.customSkinIds,
                    }),
                    r.a.createElement(vi, null)
                  );
                },
              },
            ]),
            t
          );
        })(r.a.Component);
      var Mi = {
          setAdminMode: J,
          setChatEnabled: K,
          setParkourEnabled: Pt,
          setDockVisible: Ee,
          setGroupId: function (e) {
            return { type: "SET_GROUP_ID", newGroupId: e };
          },
        },
        Ai = Object(ee.b)(function (e) {
          return {
            connectionState: e.room.connectionState,
            showModal: e.ui.showModal,
            modalMessage: e.ui.modalMessage,
          };
        }, Mi)(Ei),
        Ti =
          (n(518),
          (function (e) {
            function t() {
              return (
                Object(s.a)(this, t),
                Object(u.a)(this, Object(c.a)(t).apply(this, arguments))
              );
            }
            return (
              Object(h.a)(t, e),
              Object(l.a)(t, [
                {
                  key: "render",
                  value: function () {
                    return r.a.createElement(
                      "div",
                      { className: "About" },
                      r.a.createElement(
                        "div",
                        null,
                        r.a.createElement(
                          "div",
                          { className: "About-Me" },
                          "DJ3D, built by ",
                          r.a.createElement(
                            "a",
                            { href: "https://neelmango.com/" },
                            "NeelMango"
                          )
                        ),
                        r.a.createElement("br", null),
                        r.a.createElement(
                          "div",
                          null,
                          "Rendering: ",
                          r.a.createElement(
                            "a",
                            { href: "https://threejs.org/" },
                            "three.js"
                          )
                        ),
                        r.a.createElement(
                          "div",
                          null,
                          "Character controller:",
                          " ",
                          r.a.createElement(
                            "a",
                            { href: "https://github.com/swift502/Sketchbook" },
                            "Sketchbook by swift502"
                          )
                        ),
                        r.a.createElement(
                          "div",
                          null,
                          "Multiplayer:",
                          " ",
                          r.a.createElement(
                            "a",
                            { href: "https://github.com/timetocode/nengi" },
                            "nengi by timetocode"
                          )
                        )
                      )
                    );
                  },
                },
              ]),
              t
            );
          })(r.a.PureComponent));
      n(214);
      function Ci() {
        return r.a.createElement(
          "div",
          { className: "TermsOfService" },
          r.a.createElement("h2", null, "DJ3D Terms of Service"),
          r.a.createElement("h3", null, "1. Terms"),
          r.a.createElement(
            "p",
            null,
            "By accessing the website at",
            " ",
            r.a.createElement(
              "a",
              { href: "https://dj3d.io" },
              "https://dj3d.io"
            ),
            ", you are agreeing to be bound by these terms of service, all applicable laws and regulations, and agree that you are responsible for compliance with any applicable local laws. If you do not agree with any of these terms, you are prohibited from using or accessing this site. The materials contained in this website are protected by applicable copyright and trademark law."
          ),
          r.a.createElement(
            "p",
            null,
            "By using this application, you agree that you are at least 18 years old."
          ),
          r.a.createElement("h3", null, "2. Use License"),
          r.a.createElement(
            "ol",
            { type: "a" },
            r.a.createElement(
              "li",
              null,
              "Permission is granted to temporarily download one copy of the materials (information or software) on DJ3D's website for personal, non-commercial transitory viewing only. This is the grant of a license, not a transfer of title, and under this license you may not:",
              r.a.createElement(
                "ol",
                { type: "i" },
                r.a.createElement("li", null, "modify or copy the materials;"),
                r.a.createElement(
                  "li",
                  null,
                  "use the materials for any commercial purpose, or for any public display (commercial or non-commercial);"
                ),
                r.a.createElement(
                  "li",
                  null,
                  "attempt to decompile or reverse engineer any software contained on DJ3D's website;"
                ),
                r.a.createElement(
                  "li",
                  null,
                  "remove any copyright or other proprietary notations from the materials; or"
                ),
                r.a.createElement(
                  "li",
                  null,
                  'transfer the materials to another person or "mirror" the materials on any other server.'
                )
              )
            ),
            r.a.createElement(
              "li",
              null,
              "This license shall automatically terminate if you violate any of these restrictions and may be terminated by DJ3D at any time. Upon terminating your viewing of these materials or upon the termination of this license, you must destroy any downloaded materials in your possession whether in electronic or printed format."
            )
          ),
          r.a.createElement("h3", null, "3. Disclaimer"),
          r.a.createElement(
            "ol",
            { type: "a" },
            r.a.createElement(
              "li",
              null,
              "The materials on DJ3D's website are provided on an 'as is' basis. DJ3D makes no warranties, expressed or implied, and hereby disclaims and negates all other warranties including, without limitation, implied warranties or conditions of merchantability, fitness for a particular purpose, or non-infringement of intellectual property or other violation of rights."
            ),
            r.a.createElement(
              "li",
              null,
              "Further, DJ3D does not warrant or make any representations concerning the accuracy, likely results, or reliability of the use of the materials on its website or otherwise relating to such materials or on any sites linked to this site."
            )
          ),
          r.a.createElement("h3", null, "4. Limitations"),
          r.a.createElement(
            "p",
            null,
            "In no event shall DJ3D or its suppliers be liable for any damages (including, without limitation, damages for loss of data or profit, or due to business interruption) arising out of the use or inability to use the materials on DJ3D's website, even if DJ3D or a DJ3D authorized representative has been notified orally or in writing of the possibility of such damage. Because some jurisdictions do not allow limitations on implied warranties, or limitations of liability for consequential or incidental damages, these limitations may not apply to you."
          ),
          r.a.createElement("h3", null, "5. Accuracy of materials"),
          r.a.createElement(
            "p",
            null,
            "The materials appearing on DJ3D's website could include technical, typographical, or photographic errors. DJ3D does not warrant that any of the materials on its website are accurate, complete or current. DJ3D may make changes to the materials contained on its website at any time without notice. However DJ3D does not make any commitment to update the materials."
          ),
          r.a.createElement("h3", null, "6. Links"),
          r.a.createElement(
            "p",
            null,
            "DJ3D has not reviewed all of the sites linked to its website and is not responsible for the contents of any such linked site. The inclusion of any link does not imply endorsement by DJ3D of the site. Use of any such linked website is at the user's own risk."
          ),
          r.a.createElement("h3", null, "7. Modifications"),
          r.a.createElement(
            "p",
            null,
            "DJ3D may revise these terms of service for its website at any time without notice. By using this website you are agreeing to be bound by the then current version of these terms of service."
          ),
          r.a.createElement("h3", null, "8. Governing Law"),
          r.a.createElement(
            "p",
            null,
            "These terms and conditions are governed by and construed in accordance with the laws of CA and you irrevocably submit to the exclusive jurisdiction of the courts in that State or location."
          )
        );
      }
      function ki() {
        return r.a.createElement(
          "div",
          { className: "TermsOfService" },
          r.a.createElement("h2", null, "Privacy Policy"),
          r.a.createElement(
            "p",
            null,
            "Your privacy is important to us. It is DJ3D's policy to respect your privacy regarding any information we may collect from you across our website, ",
            r.a.createElement(
              "a",
              { href: "https://dj3d.io" },
              "https://dj3d.io"
            ),
            ", and other sites we own and operate."
          ),
          r.a.createElement(
            "p",
            null,
            "We only ask for personal information when we truly need it to provide a service to you. We collect it by fair and lawful means, with your knowledge and consent. We also let you know why we\u2019re collecting it and how it will be used."
          ),
          r.a.createElement(
            "p",
            null,
            "We only retain collected information for as long as necessary to provide you with your requested service. What data we store, we\u2019ll protect within commercially acceptable means to prevent loss and theft, as well as unauthorized access, disclosure, copying, use or modification."
          ),
          r.a.createElement(
            "p",
            null,
            "We don\u2019t share any personally identifying information publicly or with third-parties, except when required to by law."
          ),
          r.a.createElement(
            "p",
            null,
            "Our website may link to external sites that are not operated by us. Please be aware that we have no control over the content and practices of these sites, and cannot accept responsibility or liability for their respective privacy policies."
          ),
          r.a.createElement(
            "p",
            null,
            "You are free to refuse our request for your personal information, with the understanding that we may be unable to provide you with some of your desired services."
          ),
          r.a.createElement(
            "p",
            null,
            "Your continued use of our website will be regarded as acceptance of our practices around privacy and personal information. If you have any questions about how we handle user data and personal information, feel free to contact us."
          ),
          r.a.createElement(
            "p",
            null,
            "This policy is effective as of 24 April 2020."
          )
        );
      }
      var Pi,
        Li = n(229),
        Ri = n(155),
        Ii = (n(519), new Li.a()),
        Fi = !1;
      function Ni(e) {
        var t = Object(i.useState)(!1),
          n = Object(yn.a)(t, 2),
          r = n[0],
          a = n[1];
        return i.createElement(
          "div",
          null,
          i.createElement("div", { id: "controls-menu" }),
          !r &&
            i.createElement(
              "div",
              { className: "RoomTester-Instructions" },
              i.createElement("div", null, "DJ3D Map Tester"),
              i.createElement(
                "div",
                null,
                "Drag .glb map files to the bottom left"
              ),
              i.createElement(
                "a",
                {
                  href: "https://www.notion.so/DJ3D-Custom-Maps-ec5fff7688b2429ab29e9558d37cfd14",
                },
                "Full documentation"
              )
            ),
          i.createElement(Be, { isInRoom: !1 }),
          r &&
            i.createElement(cn, {
              isVideoChat: !1,
              roomId: void 0,
              started: !0,
              roomInfo: null,
            }),
          i.createElement(Oi, { setDidLoad: a }),
          i.createElement(Bi, { setDidLoad: a }),
          i.createElement(ai, null)
        );
      }
      function Oi(e) {
        var t = Object(i.useState)(!1),
          n = Object(yn.a)(t, 2),
          r = n[0],
          a = n[1],
          o = Object(i.useCallback)(
            function (t) {
              t.forEach(function (t) {
                var n = new FileReader();
                (n.onabort = function () {
                  return console.log("file reading was aborted");
                }),
                  (n.onerror = function () {
                    return console.log("file reading has failed");
                  }),
                  (n.onload = function () {
                    var t = n.result;
                    Ii.parse(
                      t,
                      "",
                      function (t) {
                        e.setDidLoad(!0),
                          (function (e) {
                            var t = document.getElementById("canvas");
                            t && t.remove();
                            var n = new v.World();
                            (n.cameraOperator.theta = 0),
                              (n.cameraOperator.phi = 0),
                              n.updateGraphicsQuality(1),
                              n.loadScene(e),
                              On(e);
                            var i = Bn(e);
                            n.onCharacterLoaded = function () {
                              at();
                            };
                            var r = n.graphicsWorld,
                              a = n.camera,
                              o = [];
                            i
                              ? (console.log("got defaultz"), o.push(i))
                              : o.push({
                                  elementId: "youtubeContainer",
                                  width: 20,
                                  height: 11.5,
                                  position: { x: 0, y: 6, z: -10 },
                                  rotation: { x: 0, y: 0, z: 0 },
                                }),
                              zt(r, a, n, o),
                              n.inputManager.domElement.requestPointerLock(),
                              (Fi = !0),
                              (Pi = n);
                          })(t),
                          a(!0);
                      },
                      function (e) {
                        return console.log(e);
                      }
                    );
                  }),
                  n.readAsArrayBuffer(t);
              });
            },
            [e]
          ),
          s = Object(Ri.a)({ onDrop: o }),
          l = s.getRootProps,
          u = s.getInputProps;
        return r
          ? null
          : i.createElement(
              "div",
              l({ className: "dropzone" }),
              i.createElement("b", null, "Map Uploader"),
              i.createElement("input", u()),
              i.createElement("p", null, "Drag .glb file here"),
              i.createElement("div", null, "Or, click to upload")
            );
      }
      function Bi(e) {
        var t = Object(i.useState)(!1),
          n = Object(yn.a)(t, 1)[0],
          r = e.setDidLoad,
          a = Object(i.useCallback)(
            function (e) {
              e.forEach(function (e) {
                var t = new FileReader();
                (t.onabort = function () {
                  return console.log("file reading was aborted");
                }),
                  (t.onerror = function () {
                    return console.log("file reading has failed");
                  }),
                  (t.onload = function () {
                    var e = t.result;
                    Ii.parse(
                      e,
                      "",
                      function (e) {
                        Fi
                          ? Pi && Pi.activeCharacter.loadGLTF(e)
                          : (function (e) {
                              var t = document.getElementById("canvas");
                              t && t.remove();
                              var n = new v.World();
                              (Pi = n),
                                Ut(n),
                                n.updateGraphicsQuality(1),
                                (n.onCharacterLoaded = function () {
                                  n.activeCharacter.loadGLTF(e);
                                }),
                                (n.cameraOperator.theta = 0),
                                (n.cameraOperator.phi = 0),
                                n.loadingManager.loadGLTF(
                                  "/world.glb",
                                  function (e) {
                                    n.loadScene(e);
                                    var t = Bn(e),
                                      i = n.graphicsWorld,
                                      r = n.camera,
                                      a = [];
                                    t
                                      ? a.push(t)
                                      : a.push({
                                          elementId: "youtubeContainer",
                                          width: 20,
                                          height: 11.5,
                                          position: { x: 0, y: 6, z: -10 },
                                          rotation: { x: 0, y: 0, z: 0 },
                                        }),
                                      zt(i, r, n, a);
                                  }
                                );
                            })(e),
                          r(!0);
                      },
                      function (e) {
                        return console.log(e);
                      }
                    );
                  }),
                  t.readAsArrayBuffer(e);
              });
            },
            [r]
          ),
          o = Object(Ri.a)({ onDrop: a }),
          s = o.getRootProps,
          l = o.getInputProps;
        return n
          ? null
          : i.createElement(
              "div",
              s({ className: "dropzone-character" }),
              i.createElement("b", null, "Character Uploader"),
              i.createElement("input", l()),
              i.createElement("p", null, "Drag character .glb file here"),
              i.createElement("div", null, "Or, click to upload")
            );
      }
      function Di(e) {
        var t =
          "louvre" === e.id
            ? {
                spaceId: "museum",
                groupId: "louvre",
                simpleVideoPlayer: "5qap5aO4i9A",
                getStartedSubtitle:
                  "The Louvre MMO. All assets from https://collections.louvre.fr/en/. Enjoy!",
              }
            : null;
        return t
          ? i.createElement(Ai, Object.assign({ shardRoomScaling: !0 }, t))
          : null;
      }
      var Vi = (function (e) {
          function t() {
            return (
              Object(s.a)(this, t),
              Object(u.a)(this, Object(c.a)(t).apply(this, arguments))
            );
          }
          return (
            Object(h.a)(t, e),
            Object(l.a)(t, [
              {
                key: "render",
                value: function () {
                  return r.a.createElement(
                    d.c,
                    { history: qt },
                    r.a.createElement(
                      d.d,
                      null,
                      r.a.createElement(d.b, {
                        exact: !0,
                        path: "/about",
                        component: Ti,
                      }),
                      r.a.createElement(d.b, {
                        exact: !0,
                        path: "/terms",
                        component: Ci,
                      }),
                      r.a.createElement(d.b, {
                        exact: !0,
                        path: "/privacy",
                        component: ki,
                      }),
                      r.a.createElement(d.b, {
                        exact: !0,
                        path: "/s/:spaceId",
                        component: Ai,
                      }),
                      r.a.createElement(d.b, {
                        exact: !0,
                        path: "/louvre",
                        render: function (e) {
                          return r.a.createElement(Di, { id: "louvre" });
                        },
                      }),
                      r.a.createElement(d.b, {
                        exact: !0,
                        path: "/r/:subredditId",
                        render: function (e) {
                          return r.a.createElement(
                            Ai,
                            Object.assign(
                              {
                                simpleVideoPlayer: "5qap5aO4i9A",
                                shardRoomScaling: !0,
                              },
                              e
                            )
                          );
                        },
                      }),
                      r.a.createElement(d.b, {
                        exact: !0,
                        path: "/algoanna",
                        render: function (e) {
                          return r.a.createElement(
                            Ai,
                            Object.assign(
                              {
                                spaceId: "algoanna",
                                groupId: "algoanna",
                                shardRoomScaling: !0,
                                simpleVideoPlayer: "XhzpxjuwZy0",
                                ignoreServerIssues: !0,
                                getStartedSubtitle:
                                  "Al Goanna Secret Drop! Jump around to find the links!",
                              },
                              e
                            )
                          );
                        },
                      }),
                      r.a.createElement(d.b, {
                        exact: !0,
                        path: "/AlgoHouse",
                        render: function (e) {
                          return r.a.createElement(
                            Ai,
                            Object.assign(
                              {
                                groupId: "algohouse",
                                spaceId: "algohouse",
                                shardRoomScaling: !0,
                                simpleVideoPlayer: "218ELDhIiGY",
                                ignoreServerIssues: !0,
                                customSkinIds: [4, 5, 6, 7],
                                defaultSkinThumbUrl:
                                  "/images/skins/gorilla_yellow.png",
                                defaultSkinGlbUrl:
                                  "/build/assets/skins/gorilla_yellow.glb",
                                getStartedSubtitle: "Algo House Lounge",
                              },
                              e
                            )
                          );
                        },
                      }),
                      r.a.createElement(d.b, {
                        exact: !0,
                        path: "/apedrop2",
                        render: function (e) {
                          return r.a.createElement(
                            Ai,
                            Object.assign(
                              {
                                groupId: "apedrop2",
                                spaceId: "apedrop2",
                                shardRoomScaling: !0,
                                simpleVideoPlayer: "hb1fepHU_Jg",
                                ignoreServerIssues: !0,
                                customSkinIds: [4, 5, 6, 7],
                                defaultSkinThumbUrl:
                                  "/images/skins/gorilla_yellow.png",
                                defaultSkinGlbUrl:
                                  "/build/assets/skins/gorilla_yellow.glb",
                                getStartedSubtitle:
                                  "Algo House Lounge (Drop 2)",
                              },
                              e
                            )
                          );
                        },
                      }),
                      r.a.createElement(d.b, {
                        exact: !0,
                        path: "/lynxsecretroom",
                        render: function (e) {
                          return r.a.createElement(
                            Ai,
                            Object.assign(
                              {
                                groupId: "lynx",
                                spaceId: "lynx",
                                shardRoomScaling: !0,
                                simpleVideoPlayer: "5qap5aO4i9A",
                                ignoreServerIssues: !0,
                                customSkinIds: [8, 6, 1, 2],
                                defaultSkinGlbUrl:
                                  "/build/assets/skins/lynx.glb",
                                defaultSkinThumbUrl: "/images/skins/lynx.png",
                                getStartedSubtitle: "Lynx Lounge",
                              },
                              e
                            )
                          );
                        },
                      }),
                      r.a.createElement(d.b, {
                        exact: !0,
                        path: "/lynxclub",
                        render: function (e) {
                          return r.a.createElement(
                            Ai,
                            Object.assign(
                              {
                                groupId: "lynxclub",
                                spaceId: "lynxclub",
                                shardRoomScaling: !0,
                                simpleVideoPlayer: "5qap5aO4i9A",
                                ignoreServerIssues: !0,
                                customSkinIds: [8, 6, 1, 2],
                                defaultSkinGlbUrl:
                                  "/build/assets/skins/lynx.glb",
                                defaultSkinThumbUrl: "/images/skins/lynx.png",
                                getStartedSubtitle: "Lynx Club",
                              },
                              e
                            )
                          );
                        },
                      }),
                      r.a.createElement(d.b, {
                        exact: !0,
                        path: "/gizmosphere",
                        render: function (e) {
                          return r.a.createElement(
                            Ai,
                            Object.assign(
                              {
                                spaceId: "gizmosphere",
                                groupId: "gizmosphere",
                                shardRoomScaling: !0,
                                simpleVideoPlayer: "5qap5aO4i9A",
                                ignoreServerIssues: !0,
                                getStartedSubtitle:
                                  "GizmoSphere secret drop! Jump around to find hidden links.",
                              },
                              e
                            )
                          );
                        },
                      }),
                      r.a.createElement(d.b, {
                        exact: !0,
                        path: "/theme/:themeId",
                        render: function (e) {
                          return r.a.createElement(
                            Ai,
                            Object.assign(
                              {
                                spaceId:
                                  "parkour" === e.match.params.themeId
                                    ? "parkour"
                                    : "default",
                                groupId: e.match.params.themeId,
                                shardRoomScaling: !0,
                                forceVideoQueueEnabled: !0,
                              },
                              e
                            )
                          );
                        },
                      }),
                      r.a.createElement(d.b, {
                        exact: !0,
                        path: "/room/:roomId",
                        component: Ai,
                      }),
                      r.a.createElement(d.b, {
                        exact: !0,
                        path: "/build",
                        component: Ni,
                      }),
                      r.a.createElement(
                        d.b,
                        { exact: !0, path: "/burningman" },
                        r.a.createElement(d.a, { to: "/s/art" })
                      ),
                      r.a.createElement(d.b, { path: "/", component: Ai })
                    )
                  );
                },
              },
            ]),
            t
          );
        })(r.a.Component),
        Ui = n(154),
        zi = n(232);
      Ui.a
        .use(Zt.b)
        .use(zi.a)
        .init({
          resources: {
            en: {
              translation: {
                CREATE_ROOM: "Create Room",
                ENABLE_FREE_MODE: "Anyone in your room can change video",
                ENABLE_TEXT_CHAT: "Enable Text Chat",
                ENABLE_PUBLIC_ROOM_LIST: "Show in public room list",
                ENABLE_VIDEO_CHAT: "Enable Video Chat (beta)",
                MULTIPLAYER: "Multiplayer",
                MULTIPLAYER_EXPLANATION:
                  "Create a room to invite friends (50 max)",
                ENABLE_PROXIMITY_AUDIO: "Enable Proximity Audio",
                ENABLE_VIDEO_QUEUE: "Enable video queue",
              },
            },
            "pt-BR": {
              translation: {
                CREATE_ROOM: "Criar quarto",
                ENABLE_FREE_MODE:
                  "Qualquer pessoa na sua sala pode alterar o v\xeddeo",
                ENABLE_TEXT_CHAT: "Habilitar chat de texto",
                ENABLE_PUBLIC_ROOM_LIST:
                  "Mostrar na lista de salas p\xfablicas",
                ENABLE_VIDEO_CHAT: "Ativar chat de v\xeddeo (beta)",
                MULTIPLAYER: "Multijogador",
                MULTIPLAYER_EXPLANATION:
                  "Crie uma sala para convidar amigos (m\xe1ximo 50)",
                ENABLE_PROXIMITY_AUDIO: "Ativar \xe1udio de proximidade",
                ENABLE_VIDEO_QUEUE: "Habilitar fila de v\xeddeo",
              },
            },
            pt: {
              translation: {
                CREATE_ROOM: "Criar quarto",
                ENABLE_FREE_MODE:
                  "Qualquer pessoa na sua sala pode alterar o v\xeddeo",
                ENABLE_TEXT_CHAT: "Habilitar chat de texto",
                ENABLE_PUBLIC_ROOM_LIST:
                  "Mostrar na lista de salas p\xfablicas",
                ENABLE_VIDEO_CHAT: "Ativar chat de v\xeddeo (beta)",
                MULTIPLAYER: "Multijogador",
                MULTIPLAYER_EXPLANATION:
                  "Crie uma sala para convidar amigos (m\xe1ximo 50)",
                ENABLE_PROXIMITY_AUDIO: "Ativar \xe1udio de proximidade",
                ENABLE_VIDEO_QUEUE: "Habilitar fila de v\xeddeo",
              },
            },
          },
          fallbackLng: "en",
          keySeparator: !1,
          interpolation: { escapeValue: !1 },
        });
      Ui.a;
      o.a.render(
        r.a.createElement(ee.a, { store: Ge }, r.a.createElement(Vi, null)),
        document.getElementById("root")
      ),
        "serviceWorker" in navigator &&
          navigator.serviceWorker.ready
            .then(function (e) {
              e.unregister();
            })
            .catch(function (e) {
              console.error(e.message);
            });
    },
    63: function (e, t, n) {
      var i,
        r = n(12),
        a = n(244),
        o = n(157),
        s = n(158),
        l = n(248),
        u = n(250),
        c = n(251),
        h = n(159),
        d = n(160),
        p = n(253),
        f = n(255),
        m = n(256);
      (i = function () {
        return (function (e) {
          var t = {};
          function n(i) {
            if (t[i]) return t[i].exports;
            var r = (t[i] = { i: i, l: !1, exports: {} });
            return e[i].call(r.exports, r, r.exports, n), (r.l = !0), r.exports;
          }
          return (
            (n.m = e),
            (n.c = t),
            (n.d = function (e, t, i) {
              n.o(e, t) ||
                Object.defineProperty(e, t, { enumerable: !0, get: i });
            }),
            (n.r = function (e) {
              "undefined" !== typeof Symbol &&
                Symbol.toStringTag &&
                Object.defineProperty(e, Symbol.toStringTag, {
                  value: "Module",
                }),
                Object.defineProperty(e, "__esModule", { value: !0 });
            }),
            (n.t = function (e, t) {
              if ((1 & t && (e = n(e)), 8 & t)) return e;
              if (4 & t && "object" === typeof e && e && e.__esModule) return e;
              var i = Object.create(null);
              if (
                (n.r(i),
                Object.defineProperty(i, "default", {
                  enumerable: !0,
                  value: e,
                }),
                2 & t && "string" != typeof e)
              )
                for (var r in e)
                  n.d(
                    i,
                    r,
                    function (t) {
                      return e[t];
                    }.bind(null, r)
                  );
              return i;
            }),
            (n.n = function (e) {
              var t =
                e && e.__esModule
                  ? function () {
                      return e.default;
                    }
                  : function () {
                      return e;
                    };
              return n.d(t, "a", t), t;
            }),
            (n.o = function (e, t) {
              return Object.prototype.hasOwnProperty.call(e, t);
            }),
            (n.p = ""),
            n((n.s = "./src/ts/sketchbook.ts"))
          );
        })({
          "./node_modules/@johh/three-effectcomposer/dist/index.js": function (
            e,
            t,
            n
          ) {
            "use strict";
            Object.defineProperty(t, "__esModule", { value: !0 });
            var i = n(
              "./node_modules/@johh/three-effectcomposer/dist/lib/CopyShader.js"
            );
            Object.defineProperty(t, "CopyShader", {
              enumerable: !0,
              get: function () {
                return p(i).default;
              },
            });
            var r = n(
              "./node_modules/@johh/three-effectcomposer/dist/lib/Pass.js"
            );
            Object.defineProperty(t, "Pass", {
              enumerable: !0,
              get: function () {
                return p(r).default;
              },
            });
            var a = n(
              "./node_modules/@johh/three-effectcomposer/dist/lib/ShaderPass.js"
            );
            Object.defineProperty(t, "ShaderPass", {
              enumerable: !0,
              get: function () {
                return p(a).default;
              },
            });
            var o = n(
              "./node_modules/@johh/three-effectcomposer/dist/lib/RenderingPass.js"
            );
            Object.defineProperty(t, "RenderingPass", {
              enumerable: !0,
              get: function () {
                return p(o).default;
              },
            });
            var s = n(
              "./node_modules/@johh/three-effectcomposer/dist/lib/TexturePass.js"
            );
            Object.defineProperty(t, "TexturePass", {
              enumerable: !0,
              get: function () {
                return p(s).default;
              },
            });
            var l = n(
              "./node_modules/@johh/three-effectcomposer/dist/lib/RenderPass.js"
            );
            Object.defineProperty(t, "RenderPass", {
              enumerable: !0,
              get: function () {
                return p(l).default;
              },
            });
            var u = n(
              "./node_modules/@johh/three-effectcomposer/dist/lib/MaskPass.js"
            );
            Object.defineProperty(t, "MaskPass", {
              enumerable: !0,
              get: function () {
                return p(u).default;
              },
            });
            var c = n(
              "./node_modules/@johh/three-effectcomposer/dist/lib/ClearMaskPass.js"
            );
            Object.defineProperty(t, "ClearMaskPass", {
              enumerable: !0,
              get: function () {
                return p(c).default;
              },
            });
            var h = n(
              "./node_modules/@johh/three-effectcomposer/dist/lib/ClearPass.js"
            );
            Object.defineProperty(t, "ClearPass", {
              enumerable: !0,
              get: function () {
                return p(h).default;
              },
            });
            var d = n(
              "./node_modules/@johh/three-effectcomposer/dist/lib/EffectComposer.js"
            );
            function p(e) {
              return e && e.__esModule ? e : { default: e };
            }
            Object.defineProperty(t, "default", {
              enumerable: !0,
              get: function () {
                return p(d).default;
              },
            });
          },
          "./node_modules/@johh/three-effectcomposer/dist/lib/ClearMaskPass.js":
            function (e, t, n) {
              "use strict";
              Object.defineProperty(t, "__esModule", { value: !0 });
              var i,
                r = (function () {
                  function e(e, t) {
                    for (var n = 0; n < t.length; n++) {
                      var i = t[n];
                      (i.enumerable = i.enumerable || !1),
                        (i.configurable = !0),
                        "value" in i && (i.writable = !0),
                        Object.defineProperty(e, i.key, i);
                    }
                  }
                  return function (t, n, i) {
                    return n && e(t.prototype, n), i && e(t, i), t;
                  };
                })(),
                a = n(
                  "./node_modules/@johh/three-effectcomposer/dist/lib/Pass.js"
                ),
                o = (function (e) {
                  function t() {
                    !(function (e, t) {
                      if (!(e instanceof t))
                        throw new TypeError(
                          "Cannot call a class as a function"
                        );
                    })(this, t);
                    var e = (function (e, t) {
                      if (!e)
                        throw new ReferenceError(
                          "this hasn't been initialised - super() hasn't been called"
                        );
                      return !t ||
                        ("object" !== typeof t && "function" !== typeof t)
                        ? e
                        : t;
                    })(
                      this,
                      (t.__proto__ || Object.getPrototypeOf(t)).call(this)
                    );
                    return (e.needsSwap = !1), e;
                  }
                  return (
                    (function (e, t) {
                      if ("function" !== typeof t && null !== t)
                        throw new TypeError(
                          "Super expression must either be null or a function, not " +
                            typeof t
                        );
                      (e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                          value: e,
                          enumerable: !1,
                          writable: !0,
                          configurable: !0,
                        },
                      })),
                        t &&
                          (Object.setPrototypeOf
                            ? Object.setPrototypeOf(e, t)
                            : (e.__proto__ = t));
                    })(t, e),
                    r(t, [
                      {
                        key: "render",
                        value: function (e) {
                          e.state.buffers.stencil.setTest(!1);
                        },
                      },
                    ]),
                    t
                  );
                })(((i = a) && i.__esModule ? i : { default: i }).default);
              t.default = o;
            },
          "./node_modules/@johh/three-effectcomposer/dist/lib/ClearPass.js":
            function (e, t, n) {
              "use strict";
              Object.defineProperty(t, "__esModule", { value: !0 });
              var i,
                r = (function () {
                  function e(e, t) {
                    for (var n = 0; n < t.length; n++) {
                      var i = t[n];
                      (i.enumerable = i.enumerable || !1),
                        (i.configurable = !0),
                        "value" in i && (i.writable = !0),
                        Object.defineProperty(e, i.key, i);
                    }
                  }
                  return function (t, n, i) {
                    return n && e(t.prototype, n), i && e(t, i), t;
                  };
                })(),
                a = n(
                  "./node_modules/@johh/three-effectcomposer/dist/lib/Pass.js"
                ),
                o = (function (e) {
                  function t(e, n) {
                    !(function (e, t) {
                      if (!(e instanceof t))
                        throw new TypeError(
                          "Cannot call a class as a function"
                        );
                    })(this, t);
                    var i = (function (e, t) {
                      if (!e)
                        throw new ReferenceError(
                          "this hasn't been initialised - super() hasn't been called"
                        );
                      return !t ||
                        ("object" !== typeof t && "function" !== typeof t)
                        ? e
                        : t;
                    })(
                      this,
                      (t.__proto__ || Object.getPrototypeOf(t)).call(this)
                    );
                    return (
                      (i.needsSwap = !1),
                      (i.clearColor = void 0 !== e ? e : 0),
                      (i.clearAlpha = void 0 !== n ? n : 0),
                      i
                    );
                  }
                  return (
                    (function (e, t) {
                      if ("function" !== typeof t && null !== t)
                        throw new TypeError(
                          "Super expression must either be null or a function, not " +
                            typeof t
                        );
                      (e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                          value: e,
                          enumerable: !1,
                          writable: !0,
                          configurable: !0,
                        },
                      })),
                        t &&
                          (Object.setPrototypeOf
                            ? Object.setPrototypeOf(e, t)
                            : (e.__proto__ = t));
                    })(t, e),
                    r(t, [
                      {
                        key: "render",
                        value: function (e, t, n) {
                          var i = void 0,
                            r = void 0;
                          this.clearColor &&
                            ((i = e.getClearColor().getHex()),
                            (r = e.getClearAlpha()),
                            e.setClearColor(this.clearColor, this.clearAlpha)),
                            e.setRenderTarget(this.renderToScreen ? null : n),
                            e.clear(),
                            this.clearColor && e.setClearColor(i, r);
                        },
                      },
                    ]),
                    t
                  );
                })(((i = a) && i.__esModule ? i : { default: i }).default);
              t.default = o;
            },
          "./node_modules/@johh/three-effectcomposer/dist/lib/CopyShader.js":
            function (e, t, n) {
              "use strict";
              Object.defineProperty(t, "__esModule", { value: !0 }),
                (t.default = {
                  uniforms: {
                    tDiffuse: { value: null },
                    opacity: { value: 1 },
                  },
                  vertexShader: [
                    "varying vec2 vUv;",
                    "void main() {",
                    "\tvUv = uv;",
                    "\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",
                    "}",
                  ].join("\n"),
                  fragmentShader: [
                    "uniform float opacity;",
                    "uniform sampler2D tDiffuse;",
                    "varying vec2 vUv;",
                    "void main() {",
                    "\tvec4 texel = texture2D( tDiffuse, vUv );",
                    "\tgl_FragColor = opacity * texel;",
                    "}",
                  ].join("\n"),
                });
            },
          "./node_modules/@johh/three-effectcomposer/dist/lib/EffectComposer.js":
            function (e, t, n) {
              "use strict";
              Object.defineProperty(t, "__esModule", { value: !0 });
              var i = (function () {
                  function e(e, t) {
                    for (var n = 0; n < t.length; n++) {
                      var i = t[n];
                      (i.enumerable = i.enumerable || !1),
                        (i.configurable = !0),
                        "value" in i && (i.writable = !0),
                        Object.defineProperty(e, i.key, i);
                    }
                  }
                  return function (t, n, i) {
                    return n && e(t.prototype, n), i && e(t, i), t;
                  };
                })(),
                r = (function (e) {
                  if (e && e.__esModule) return e;
                  var t = {};
                  if (null != e)
                    for (var n in e)
                      Object.prototype.hasOwnProperty.call(e, n) &&
                        (t[n] = e[n]);
                  return (t.default = e), t;
                })(n("./node_modules/three/build/three.module.js")),
                a = u(
                  n(
                    "./node_modules/@johh/three-effectcomposer/dist/lib/ShaderPass.js"
                  )
                ),
                o = u(
                  n(
                    "./node_modules/@johh/three-effectcomposer/dist/lib/CopyShader.js"
                  )
                ),
                s = u(
                  n(
                    "./node_modules/@johh/three-effectcomposer/dist/lib/MaskPass.js"
                  )
                ),
                l = u(
                  n(
                    "./node_modules/@johh/three-effectcomposer/dist/lib/ClearMaskPass.js"
                  )
                );
              function u(e) {
                return e && e.__esModule ? e : { default: e };
              }
              var c = (function () {
                function e(t, n) {
                  !(function (e, t) {
                    if (!(e instanceof t))
                      throw new TypeError("Cannot call a class as a function");
                  })(this, e);
                  var i = n;
                  if (((this.renderer = t), void 0 === i)) {
                    var s = {
                        minFilter: r.LinearFilter,
                        magFilter: r.LinearFilter,
                        format: r.RGBAFormat,
                        stencilBuffer: !1,
                      },
                      l = t.getSize(new r.Vector2());
                    (this._pixelRatio = t.getPixelRatio()),
                      (this._width = l.width),
                      (this._height = l.height),
                      ((i = new r.WebGLRenderTarget(
                        this._width * this._pixelRatio,
                        this._height * this._pixelRatio,
                        s
                      )).texture.name = "EffectComposer.rt1");
                  } else
                    (this._pixelRatio = 1),
                      (this._width = i.width),
                      (this._height = i.height);
                  (this.renderTarget1 = i),
                    (this.renderTarget2 = i.clone()),
                    (this.renderTarget2.texture.name = "EffectComposer.rt2"),
                    (this.writeBuffer = this.renderTarget1),
                    (this.readBuffer = this.renderTarget2),
                    (this.renderToScreen = !0),
                    (this.passes = []),
                    (this.copyPass = new a.default(o.default)),
                    (this.clock = new r.Clock());
                }
                return (
                  i(e, [
                    {
                      key: "swapBuffers",
                      value: function () {
                        var e = this.readBuffer;
                        (this.readBuffer = this.writeBuffer),
                          (this.writeBuffer = e);
                      },
                    },
                    {
                      key: "addPass",
                      value: function (e) {
                        this.passes.push(e);
                        var t = this.renderer.getDrawingBufferSize(
                          new r.Vector2()
                        );
                        e.setSize(t.width, t.height);
                      },
                    },
                    {
                      key: "insertPass",
                      value: function (e, t) {
                        this.passes.splice(t, 0, e);
                      },
                    },
                    {
                      key: "isLastEnabledPass",
                      value: function (e) {
                        for (var t = e + 1; t < this.passes.length; t += 1)
                          if (this.passes[t].enabled) return !1;
                        return !0;
                      },
                    },
                    {
                      key: "render",
                      value: function () {
                        var e =
                            arguments.length > 0 && void 0 !== arguments[0]
                              ? arguments[0]
                              : this.clock.getDelta(),
                          t = this.renderer.getRenderTarget(),
                          n = !1,
                          i = void 0,
                          r = void 0,
                          a = this.passes.length;
                        for (r = 0; r < a; r += 1) {
                          if (
                            !1 !== (i = this.passes[r]).enabled &&
                            ((i.renderToScreen =
                              this.renderToScreen && this.isLastEnabledPass(r)),
                            i.render(
                              this.renderer,
                              this.writeBuffer,
                              this.readBuffer,
                              e,
                              n
                            ),
                            i.needsSwap)
                          ) {
                            if (n) {
                              var o = this.renderer.context;
                              o.stencilFunc(o.NOTEQUAL, 1, 4294967295),
                                this.copyPass.render(
                                  this.renderer,
                                  this.writeBuffer,
                                  this.readBuffer,
                                  e
                                ),
                                o.stencilFunc(o.EQUAL, 1, 4294967295);
                            }
                            this.swapBuffers();
                          }
                          i instanceof s.default
                            ? (n = !0)
                            : i instanceof l.default && (n = !1);
                        }
                        this.renderer.setRenderTarget(t);
                      },
                    },
                    {
                      key: "reset",
                      value: function (e) {
                        var t = e;
                        if (void 0 === t) {
                          var n = this.renderer.getSize(new r.Vector2());
                          (this._pixelRatio = this.renderer.getPixelRatio()),
                            (this._width = n.width),
                            (this._height = n.height),
                            (t = this.renderTarget1.clone()).setSize(
                              this._width * this._pixelRatio,
                              this._height * this._pixelRatio
                            );
                        }
                        this.renderTarget1.dispose(),
                          this.renderTarget2.dispose(),
                          (this.renderTarget1 = t),
                          (this.renderTarget2 = t.clone()),
                          (this.writeBuffer = this.renderTarget1),
                          (this.readBuffer = this.renderTarget2);
                      },
                    },
                    {
                      key: "setSize",
                      value: function (e, t) {
                        (this._width = e), (this._height = t);
                        var n = this._width * this._pixelRatio,
                          i = this._height * this._pixelRatio;
                        this.renderTarget1.setSize(n, i),
                          this.renderTarget2.setSize(n, i);
                        for (var r = 0; r < this.passes.length; r += 1)
                          this.passes[r].setSize(n, i);
                      },
                    },
                    {
                      key: "setPixelRatio",
                      value: function (e) {
                        (this._pixelRatio = e),
                          this.setSize(this._width, this._height);
                      },
                    },
                  ]),
                  e
                );
              })();
              t.default = c;
            },
          "./node_modules/@johh/three-effectcomposer/dist/lib/MaskPass.js":
            function (e, t, n) {
              "use strict";
              Object.defineProperty(t, "__esModule", { value: !0 });
              var i,
                r = (function () {
                  function e(e, t) {
                    for (var n = 0; n < t.length; n++) {
                      var i = t[n];
                      (i.enumerable = i.enumerable || !1),
                        (i.configurable = !0),
                        "value" in i && (i.writable = !0),
                        Object.defineProperty(e, i.key, i);
                    }
                  }
                  return function (t, n, i) {
                    return n && e(t.prototype, n), i && e(t, i), t;
                  };
                })(),
                a = n(
                  "./node_modules/@johh/three-effectcomposer/dist/lib/Pass.js"
                ),
                o = (function (e) {
                  function t(e, n) {
                    !(function (e, t) {
                      if (!(e instanceof t))
                        throw new TypeError(
                          "Cannot call a class as a function"
                        );
                    })(this, t);
                    var i = (function (e, t) {
                      if (!e)
                        throw new ReferenceError(
                          "this hasn't been initialised - super() hasn't been called"
                        );
                      return !t ||
                        ("object" !== typeof t && "function" !== typeof t)
                        ? e
                        : t;
                    })(
                      this,
                      (t.__proto__ || Object.getPrototypeOf(t)).call(this)
                    );
                    return (
                      (i.scene = e),
                      (i.camera = n),
                      (i.clear = !0),
                      (i.needsSwap = !1),
                      (i.inverse = !1),
                      i
                    );
                  }
                  return (
                    (function (e, t) {
                      if ("function" !== typeof t && null !== t)
                        throw new TypeError(
                          "Super expression must either be null or a function, not " +
                            typeof t
                        );
                      (e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                          value: e,
                          enumerable: !1,
                          writable: !0,
                          configurable: !0,
                        },
                      })),
                        t &&
                          (Object.setPrototypeOf
                            ? Object.setPrototypeOf(e, t)
                            : (e.__proto__ = t));
                    })(t, e),
                    r(t, [
                      {
                        key: "render",
                        value: function (e, t, n) {
                          var i = e.context,
                            r = e.state;
                          r.buffers.color.setMask(!1),
                            r.buffers.depth.setMask(!1),
                            r.buffers.color.setLocked(!0),
                            r.buffers.depth.setLocked(!0);
                          var a = void 0,
                            o = void 0;
                          this.inverse
                            ? ((a = 0), (o = 1))
                            : ((a = 1), (o = 0)),
                            r.buffers.stencil.setTest(!0),
                            r.buffers.stencil.setOp(
                              i.REPLACE,
                              i.REPLACE,
                              i.REPLACE
                            ),
                            r.buffers.stencil.setFunc(i.ALWAYS, a, 4294967295),
                            r.buffers.stencil.setClear(o),
                            e.setRenderTarget(n),
                            this.clear && e.clear(),
                            e.render(this.scene, this.camera),
                            e.setRenderTarget(t),
                            this.clear && e.clear(),
                            e.render(this.scene, this.camera),
                            r.buffers.color.setLocked(!1),
                            r.buffers.depth.setLocked(!1),
                            r.buffers.stencil.setFunc(i.EQUAL, 1, 4294967295),
                            r.buffers.stencil.setOp(i.KEEP, i.KEEP, i.KEEP);
                        },
                      },
                    ]),
                    t
                  );
                })(((i = a) && i.__esModule ? i : { default: i }).default);
              t.default = o;
            },
          "./node_modules/@johh/three-effectcomposer/dist/lib/Pass.js":
            function (e, t, n) {
              "use strict";
              Object.defineProperty(t, "__esModule", { value: !0 });
              var i = (function () {
                  function e(e, t) {
                    for (var n = 0; n < t.length; n++) {
                      var i = t[n];
                      (i.enumerable = i.enumerable || !1),
                        (i.configurable = !0),
                        "value" in i && (i.writable = !0),
                        Object.defineProperty(e, i.key, i);
                    }
                  }
                  return function (t, n, i) {
                    return n && e(t.prototype, n), i && e(t, i), t;
                  };
                })(),
                r = n("./node_modules/three/build/three.module.js");
              function a(e, t) {
                if (!(e instanceof t))
                  throw new TypeError("Cannot call a class as a function");
              }
              var o = new r.OrthographicCamera(-1, 1, 1, -1, 0, 1),
                s = new r.PlaneBufferGeometry(2, 2),
                l = (function () {
                  function e(t) {
                    a(this, e), (this._mesh = new r.Mesh(s, t));
                  }
                  return (
                    i(e, [
                      {
                        key: "render",
                        value: function (e) {
                          e.render(this._mesh, o);
                        },
                      },
                      {
                        key: "material",
                        get: function () {
                          return this._mesh.material;
                        },
                        set: function (e) {
                          this._mesh.material = e;
                        },
                      },
                    ]),
                    e
                  );
                })(),
                u = (function () {
                  function e() {
                    a(this, e),
                      (this.enabled = !0),
                      (this.needsSwap = !1),
                      (this.clear = !1),
                      (this.renderToScreen = !1);
                  }
                  return (
                    i(e, [
                      { key: "setSize", value: function (e, t) {} },
                      {
                        key: "render",
                        value: function (e, t, n, i, r) {
                          console.error(
                            "THREE.Pass: .render() must be implemented in derived pass."
                          );
                        },
                      },
                    ]),
                    e
                  );
                })();
              (u.FullScreenQuad = l), (t.default = u);
            },
          "./node_modules/@johh/three-effectcomposer/dist/lib/RenderPass.js":
            function (e, t, n) {
              "use strict";
              Object.defineProperty(t, "__esModule", { value: !0 });
              var i,
                r = (function () {
                  function e(e, t) {
                    for (var n = 0; n < t.length; n++) {
                      var i = t[n];
                      (i.enumerable = i.enumerable || !1),
                        (i.configurable = !0),
                        "value" in i && (i.writable = !0),
                        Object.defineProperty(e, i.key, i);
                    }
                  }
                  return function (t, n, i) {
                    return n && e(t.prototype, n), i && e(t, i), t;
                  };
                })(),
                a = n(
                  "./node_modules/@johh/three-effectcomposer/dist/lib/Pass.js"
                ),
                o = (function (e) {
                  function t(e, n, i, r, a) {
                    !(function (e, t) {
                      if (!(e instanceof t))
                        throw new TypeError(
                          "Cannot call a class as a function"
                        );
                    })(this, t);
                    var o = (function (e, t) {
                      if (!e)
                        throw new ReferenceError(
                          "this hasn't been initialised - super() hasn't been called"
                        );
                      return !t ||
                        ("object" !== typeof t && "function" !== typeof t)
                        ? e
                        : t;
                    })(
                      this,
                      (t.__proto__ || Object.getPrototypeOf(t)).call(this)
                    );
                    return (
                      (o.scene = e),
                      (o.camera = n),
                      (o.overrideMaterial = i),
                      (o.clearColor = r),
                      (o.clearAlpha = void 0 !== a ? a : 0),
                      (o.clear = !0),
                      (o.clearDepth = !1),
                      (o.needsSwap = !1),
                      o
                    );
                  }
                  return (
                    (function (e, t) {
                      if ("function" !== typeof t && null !== t)
                        throw new TypeError(
                          "Super expression must either be null or a function, not " +
                            typeof t
                        );
                      (e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                          value: e,
                          enumerable: !1,
                          writable: !0,
                          configurable: !0,
                        },
                      })),
                        t &&
                          (Object.setPrototypeOf
                            ? Object.setPrototypeOf(e, t)
                            : (e.__proto__ = t));
                    })(t, e),
                    r(t, [
                      {
                        key: "render",
                        value: function (e, t, n) {
                          var i = e,
                            r = i.autoClear;
                          (i.autoClear = !1),
                            (this.scene.overrideMaterial =
                              this.overrideMaterial);
                          var a = void 0,
                            o = void 0;
                          this.clearColor &&
                            ((a = i.getClearColor().getHex()),
                            (o = i.getClearAlpha()),
                            i.setClearColor(this.clearColor, this.clearAlpha)),
                            this.clearDepth && i.clearDepth(),
                            i.setRenderTarget(this.renderToScreen ? null : n),
                            this.clear &&
                              i.clear(
                                i.autoClearColor,
                                i.autoClearDepth,
                                i.autoClearStencil
                              ),
                            i.render(this.scene, this.camera),
                            this.clearColor && i.setClearColor(a, o),
                            (this.scene.overrideMaterial = null),
                            (i.autoClear = r);
                        },
                      },
                    ]),
                    t
                  );
                })(((i = a) && i.__esModule ? i : { default: i }).default);
              t.default = o;
            },
          "./node_modules/@johh/three-effectcomposer/dist/lib/RenderingPass.js":
            function (e, t, n) {
              "use strict";
              Object.defineProperty(t, "__esModule", { value: !0 });
              var i,
                r = (function (e) {
                  if (e && e.__esModule) return e;
                  var t = {};
                  if (null != e)
                    for (var n in e)
                      Object.prototype.hasOwnProperty.call(e, n) &&
                        (t[n] = e[n]);
                  return (t.default = e), t;
                })(n("./node_modules/three/build/three.module.js")),
                a = n(
                  "./node_modules/@johh/three-effectcomposer/dist/lib/Pass.js"
                ),
                o = (function (e) {
                  function t() {
                    !(function (e, t) {
                      if (!(e instanceof t))
                        throw new TypeError(
                          "Cannot call a class as a function"
                        );
                    })(this, t);
                    var e = (function (e, t) {
                      if (!e)
                        throw new ReferenceError(
                          "this hasn't been initialised - super() hasn't been called"
                        );
                      return !t ||
                        ("object" !== typeof t && "function" !== typeof t)
                        ? e
                        : t;
                    })(
                      this,
                      (t.__proto__ || Object.getPrototypeOf(t)).call(this)
                    );
                    return (
                      (e.camera = new r.OrthographicCamera(-1, 1, 1, -1, 0, 1)),
                      (e.scene = new r.Scene()),
                      (e.quad = new r.Mesh(
                        new r.PlaneBufferGeometry(2, 2),
                        null
                      )),
                      (e.quad.frustumCulled = !1),
                      e.scene.add(e.quad),
                      e
                    );
                  }
                  return (
                    (function (e, t) {
                      if ("function" !== typeof t && null !== t)
                        throw new TypeError(
                          "Super expression must either be null or a function, not " +
                            typeof t
                        );
                      (e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                          value: e,
                          enumerable: !1,
                          writable: !0,
                          configurable: !0,
                        },
                      })),
                        t &&
                          (Object.setPrototypeOf
                            ? Object.setPrototypeOf(e, t)
                            : (e.__proto__ = t));
                    })(t, e),
                    t
                  );
                })(((i = a) && i.__esModule ? i : { default: i }).default);
              t.default = o;
            },
          "./node_modules/@johh/three-effectcomposer/dist/lib/ShaderPass.js":
            function (e, t, n) {
              "use strict";
              Object.defineProperty(t, "__esModule", { value: !0 });
              var i,
                r = (function () {
                  function e(e, t) {
                    for (var n = 0; n < t.length; n++) {
                      var i = t[n];
                      (i.enumerable = i.enumerable || !1),
                        (i.configurable = !0),
                        "value" in i && (i.writable = !0),
                        Object.defineProperty(e, i.key, i);
                    }
                  }
                  return function (t, n, i) {
                    return n && e(t.prototype, n), i && e(t, i), t;
                  };
                })(),
                a = (function (e) {
                  if (e && e.__esModule) return e;
                  var t = {};
                  if (null != e)
                    for (var n in e)
                      Object.prototype.hasOwnProperty.call(e, n) &&
                        (t[n] = e[n]);
                  return (t.default = e), t;
                })(n("./node_modules/three/build/three.module.js")),
                o = n(
                  "./node_modules/@johh/three-effectcomposer/dist/lib/Pass.js"
                ),
                s = (i = o) && i.__esModule ? i : { default: i },
                l = (function (e) {
                  function t(e, n) {
                    !(function (e, t) {
                      if (!(e instanceof t))
                        throw new TypeError(
                          "Cannot call a class as a function"
                        );
                    })(this, t);
                    var i = (function (e, t) {
                      if (!e)
                        throw new ReferenceError(
                          "this hasn't been initialised - super() hasn't been called"
                        );
                      return !t ||
                        ("object" !== typeof t && "function" !== typeof t)
                        ? e
                        : t;
                    })(
                      this,
                      (t.__proto__ || Object.getPrototypeOf(t)).call(this)
                    );
                    return (
                      (i.textureID = void 0 !== n ? n : "tDiffuse"),
                      e instanceof a.ShaderMaterial
                        ? ((i.uniforms = e.uniforms), (i.material = e))
                        : e &&
                          ((i.uniforms = a.UniformsUtils.clone(e.uniforms)),
                          (i.material = new a.ShaderMaterial({
                            defines: Object.assign({}, e.defines),
                            uniforms: i.uniforms,
                            vertexShader: e.vertexShader,
                            fragmentShader: e.fragmentShader,
                          }))),
                      (i.fsQuad = new s.default.FullScreenQuad(i.material)),
                      i
                    );
                  }
                  return (
                    (function (e, t) {
                      if ("function" !== typeof t && null !== t)
                        throw new TypeError(
                          "Super expression must either be null or a function, not " +
                            typeof t
                        );
                      (e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                          value: e,
                          enumerable: !1,
                          writable: !0,
                          configurable: !0,
                        },
                      })),
                        t &&
                          (Object.setPrototypeOf
                            ? Object.setPrototypeOf(e, t)
                            : (e.__proto__ = t));
                    })(t, e),
                    r(t, [
                      {
                        key: "render",
                        value: function (e, t, n) {
                          this.uniforms[this.textureID] &&
                            (this.uniforms[this.textureID].value = n.texture),
                            (this.fsQuad.material = this.material),
                            this.renderToScreen
                              ? (e.setRenderTarget(null), this.fsQuad.render(e))
                              : (e.setRenderTarget(t),
                                this.clear &&
                                  e.clear(
                                    e.autoClearColor,
                                    e.autoClearDepth,
                                    e.autoClearStencil
                                  ),
                                this.fsQuad.render(e));
                        },
                      },
                    ]),
                    t
                  );
                })(s.default);
              t.default = l;
            },
          "./node_modules/@johh/three-effectcomposer/dist/lib/TexturePass.js":
            function (e, t, n) {
              "use strict";
              Object.defineProperty(t, "__esModule", { value: !0 });
              var i = (function () {
                  function e(e, t) {
                    for (var n = 0; n < t.length; n++) {
                      var i = t[n];
                      (i.enumerable = i.enumerable || !1),
                        (i.configurable = !0),
                        "value" in i && (i.writable = !0),
                        Object.defineProperty(e, i.key, i);
                    }
                  }
                  return function (t, n, i) {
                    return n && e(t.prototype, n), i && e(t, i), t;
                  };
                })(),
                r = (function (e) {
                  if (e && e.__esModule) return e;
                  var t = {};
                  if (null != e)
                    for (var n in e)
                      Object.prototype.hasOwnProperty.call(e, n) &&
                        (t[n] = e[n]);
                  return (t.default = e), t;
                })(n("./node_modules/three/build/three.module.js")),
                a = s(
                  n(
                    "./node_modules/@johh/three-effectcomposer/dist/lib/Pass.js"
                  )
                ),
                o = s(
                  n(
                    "./node_modules/@johh/three-effectcomposer/dist/lib/CopyShader.js"
                  )
                );
              function s(e) {
                return e && e.__esModule ? e : { default: e };
              }
              var l = (function (e) {
                function t(e, n) {
                  !(function (e, t) {
                    if (!(e instanceof t))
                      throw new TypeError("Cannot call a class as a function");
                  })(this, t);
                  var i = (function (e, t) {
                      if (!e)
                        throw new ReferenceError(
                          "this hasn't been initialised - super() hasn't been called"
                        );
                      return !t ||
                        ("object" !== typeof t && "function" !== typeof t)
                        ? e
                        : t;
                    })(
                      this,
                      (t.__proto__ || Object.getPrototypeOf(t)).call(this)
                    ),
                    s = o.default;
                  return (
                    (i.map = e),
                    (i.opacity = void 0 !== n ? n : 1),
                    (i.uniforms = r.UniformsUtils.clone(s.uniforms)),
                    (i.material = new r.ShaderMaterial({
                      uniforms: i.uniforms,
                      vertexShader: s.vertexShader,
                      fragmentShader: s.fragmentShader,
                      depthTest: !1,
                      depthWrite: !1,
                    })),
                    (i.needsSwap = !1),
                    (i.fsQuad = new a.default.FullScreenQuad(null)),
                    i
                  );
                }
                return (
                  (function (e, t) {
                    if ("function" !== typeof t && null !== t)
                      throw new TypeError(
                        "Super expression must either be null or a function, not " +
                          typeof t
                      );
                    (e.prototype = Object.create(t && t.prototype, {
                      constructor: {
                        value: e,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0,
                      },
                    })),
                      t &&
                        (Object.setPrototypeOf
                          ? Object.setPrototypeOf(e, t)
                          : (e.__proto__ = t));
                  })(t, e),
                  i(t, [
                    {
                      key: "render",
                      value: function (e, t, n) {
                        var i = e,
                          r = i.autoClear;
                        (i.autoClear = !1),
                          (this.fsQuad.material = this.material),
                          (this.uniforms.opacity.value = this.opacity),
                          (this.uniforms.tDiffuse.value = this.map),
                          (this.material.transparent = this.opacity < 1),
                          i.setRenderTarget(this.renderToScreen ? null : n),
                          this.clear && i.clear(),
                          this.fsQuad.render(i),
                          (i.autoClear = r);
                      },
                    },
                  ]),
                  t
                );
              })(a.default);
              t.default = l;
            },
          "./node_modules/css-loader/dist/cjs.js!./src/css/dat.gui.css":
            function (e, t, n) {
              (t = n("./node_modules/css-loader/dist/runtime/api.js")(!1)).push(
                [
                  e.i,
                  ".dg ul {\n    list-style: none;\n    margin: 0;\n    padding: 0;\n    width: 100%;\n    clear: both\n}\n\n.dg.ac {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    height: 0;\n    z-index: 0\n}\n\n.dg:not(.ac) .main {\n    overflow: hidden\n}\n\n.dg.main {\n    -webkit-transition: opacity .1s linear;\n    -o-transition: opacity .1s linear;\n    -moz-transition: opacity .1s linear;\n    transition: opacity .1s linear\n}\n\n.dg.main.taller-than-window {\n    overflow-y: auto\n}\n\n.dg.main.taller-than-window .close-button {\n    opacity: 1;\n    margin-top: -1px;\n    border-top: 1px solid #2c2c2c\n}\n\n.dg.main ul.closed .close-button {\n    opacity: 1 !important\n}\n\n.dg.main:hover .close-button,\n.dg.main .close-button.drag {\n    opacity: 1\n}\n\n.dg.main .close-button {\n    -webkit-transition: opacity .1s linear;\n    -o-transition: opacity .1s linear;\n    -moz-transition: opacity .1s linear;\n    transition: opacity .1s linear;\n    border: 0;\n    line-height: 19px;\n    height: 20px;\n    cursor: pointer;\n    text-align: center;\n    background-color: #000\n}\n\n.dg.main .close-button.close-top {\n    position: relative\n}\n\n.dg.main .close-button.close-bottom {\n    position: absolute\n}\n\n.dg.main .close-button:hover {\n    background-color: #111\n}\n\n.dg.a {\n    float: right;\n    margin-top: 15px;\n    margin-right: 15px;\n    overflow-y: visible\n}\n\n.dg.a.has-save>ul.close-top {\n    margin-top: 0\n}\n\n.dg.a.has-save>ul.close-bottom {\n    margin-top: 27px\n}\n\n.dg.a.has-save>ul.closed {\n    margin-top: 0\n}\n\n.dg.a .save-row {\n    top: 0;\n    z-index: 1002\n}\n\n.dg.a .save-row.close-top {\n    position: relative\n}\n\n.dg.a .save-row.close-bottom {\n    position: fixed\n}\n\n.dg li {\n    -webkit-transition: height .1s ease-out;\n    -o-transition: height .1s ease-out;\n    -moz-transition: height .1s ease-out;\n    transition: height .1s ease-out;\n    -webkit-transition: overflow .1s linear;\n    -o-transition: overflow .1s linear;\n    -moz-transition: overflow .1s linear;\n    transition: overflow .1s linear\n}\n\n.dg li:not(.folder) {\n    cursor: auto;\n    height: 27px;\n    line-height: 27px;\n    padding: 0 4px 0 5px\n}\n\n.dg li.folder {\n    padding: 0;\n    border-left: 4px solid transparent\n}\n\n.dg li.title {\n    cursor: pointer;\n    margin-left: -4px\n}\n\n.dg .closed li:not(.title),\n.dg .closed ul li,\n.dg .closed ul li>* {\n    height: 0;\n    overflow: hidden;\n    border: 0\n}\n\n.dg .cr {\n    clear: both;\n    padding-left: 3px;\n    height: 27px;\n    overflow: hidden\n}\n\n.dg .property-name {\n    cursor: default;\n    float: left;\n    clear: left;\n    width: 40%;\n    overflow: hidden;\n    text-overflow: ellipsis\n}\n\n.dg .c {\n    float: left;\n    width: 60%;\n    position: relative\n}\n\n.dg .c input[type=text] {\n    border: 0;\n    margin-top: 4px;\n    padding: 3px;\n    width: 100%;\n    float: right\n}\n\n.dg .has-slider input[type=text] {\n    width: 30%;\n    margin-left: 0\n}\n\n.dg .slider {\n    float: left;\n    width: 66%;\n    margin-left: -5px;\n    margin-right: 0;\n    height: 19px;\n    margin-top: 4px\n}\n\n.dg .slider-fg {\n    height: 100%\n}\n\n.dg .c input[type=checkbox] {\n    margin-top: 7px\n}\n\n.dg .c select {\n    margin-top: 5px\n}\n\n.dg .cr.function,\n.dg .cr.function .property-name,\n.dg .cr.function *,\n.dg .cr.boolean,\n.dg .cr.boolean * {\n    cursor: pointer\n}\n\n.dg .cr.color {\n    overflow: visible\n}\n\n.dg .selector {\n    display: none;\n    position: absolute;\n    margin-left: -9px;\n    margin-top: 23px;\n    z-index: 10\n}\n\n.dg .c:hover .selector,\n.dg .selector.drag {\n    display: block\n}\n\n.dg li.save-row {\n    padding: 0\n}\n\n.dg li.save-row .button {\n    display: inline-block;\n    padding: 0px 6px\n}\n\n.dg.dialogue {\n    background-color: #222;\n    width: 460px;\n    padding: 15px;\n    font-size: 13px;\n    line-height: 15px\n}\n\n#dg-new-constructor {\n    padding: 10px;\n    color: #222;\n    font-family: Monaco, monospace;\n    font-size: 10px;\n    border: 0;\n    resize: none;\n    box-shadow: inset 1px 1px 1px #888;\n    word-wrap: break-word;\n    margin: 12px 0;\n    display: block;\n    width: 440px;\n    overflow-y: scroll;\n    height: 100px;\n    position: relative\n}\n\n#dg-local-explain {\n    display: none;\n    font-size: 11px;\n    line-height: 17px;\n    border-radius: 3px;\n    background-color: #333;\n    padding: 8px;\n    margin-top: 10px\n}\n\n#dg-local-explain code {\n    font-size: 10px\n}\n\n#dat-gui-save-locally {\n    display: none\n}\n\n.dg {\n    color: #eee;\n    font: 11px 'Lucida Grande', sans-serif;\n    text-shadow: 0 -1px 0 #111\n}\n\n.dg.main::-webkit-scrollbar {\n    width: 5px;\n    background: #1a1a1a\n}\n\n.dg.main::-webkit-scrollbar-corner {\n    height: 0;\n    display: none\n}\n\n.dg.main::-webkit-scrollbar-thumb {\n    border-radius: 5px;\n    background: #676767\n}\n\n.dg li:not(.folder) {\n    background: #1a1a1a;\n    border-bottom: 1px solid #2c2c2c\n}\n\n.dg li.save-row {\n    line-height: 25px;\n    background: #dad5cb;\n    border: 0\n}\n\n.dg li.save-row select {\n    margin-left: 5px;\n    width: 108px\n}\n\n.dg li.save-row .button {\n    margin-left: 5px;\n    margin-top: 1px;\n    border-radius: 2px;\n    font-size: 9px;\n    line-height: 7px;\n    padding: 4px 4px 5px 4px;\n    background: #c5bdad;\n    color: #fff;\n    text-shadow: 0 1px 0 #b0a58f;\n    box-shadow: 0 -1px 0 #b0a58f;\n    cursor: pointer\n}\n\n.dg li.save-row .button.gears {\n    background: #c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;\n    height: 7px;\n    width: 8px\n}\n\n.dg li.save-row .button:hover {\n    background-color: #bab19e;\n    box-shadow: 0 -1px 0 #b0a58f\n}\n\n.dg li.folder {\n    border-bottom: 0\n}\n\n.dg li.title {\n    padding-left: 16px;\n    background: #000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;\n    cursor: pointer;\n    border-bottom: 1px solid rgba(255, 255, 255, 0.2)\n}\n\n.dg .closed li.title {\n    background-image: url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)\n}\n\n.dg .cr.boolean {\n    border-left: 3px solid #806787\n}\n\n.dg .cr.color {\n    border-left: 3px solid\n}\n\n.dg .cr.function {\n    border-left: 3px solid #e61d5f\n}\n\n.dg .cr.number {\n    border-left: 3px solid #2FA1D6\n}\n\n.dg .cr.number input[type=text] {\n    color: #2FA1D6\n}\n\n.dg .cr.string {\n    border-left: 3px solid #1ed36f\n}\n\n.dg .cr.string input[type=text] {\n    color: #1ed36f\n}\n\n.dg .cr.function:hover,\n.dg .cr.boolean:hover {\n    background: #111\n}\n\n.dg .c input[type=text] {\n    background: #303030;\n    outline: none\n}\n\n.dg .c input[type=text]:hover {\n    background: #3c3c3c\n}\n\n.dg .c input[type=text]:focus {\n    background: #494949;\n    color: #fff\n}\n\n.dg .c .slider {\n    background: #303030;\n    cursor: ew-resize\n}\n\n.dg .c .slider-fg {\n    background: #2FA1D6;\n    max-width: 100%\n}\n\n.dg .c .slider:hover {\n    background: #3c3c3c\n}\n\n.dg .c .slider:hover .slider-fg {\n    background: #44abda\n}",
                  "",
                ]
              ),
                (e.exports = t);
            },
          "./node_modules/css-loader/dist/cjs.js!./src/css/main.css": function (
            e,
            t,
            n
          ) {
            (t = n("./node_modules/css-loader/dist/runtime/api.js")(!1)).push([
              e.i,
              '#canvas {\n  width: 100%;\n  height: 100%;\n\n  transition: filter 3s ease;\n}\n\n.statsBox {\n  height: 48px;\n  opacity: 0.9;\n  z-index: 5;\n  cursor: cell;\n}\n\n.statsBox,\n.dg.ac .dg.main.a .dg .title {\n  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.3);\n}\n\n.dg.ac {\n  top: 48px;\n  user-select: none;\n  display: none;\n}\n\n.dg.ac .close-button.close-bottom {\n  display: none;\n}\n\n/* .info-column{\n    height: 100vh;\n    position: absolute;\n    display: flex;\n    justify-content: center;\n    flex-direction: column;\n} */\n\n.info-box {\n  display: flex;\n  flex-direction: column;\n}\n\n.info-card {\n  z-index: 3;\n  color: #fff;\n  border-radius: 3px;\n  text-shadow: 1px 1px 1px #000, 0px 1px 3px #000;\n  background: #0000;\n  overflow: hidden;\n  top: 80px;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: flex-start;\n  margin: 10px;\n  font-family: "Cutive Mono", monospace;\n  user-select: none;\n  pointer-events: none;\n  transition: all 0.3s ease;\n  overflow: visible;\n}\n\n.info-title {\n  font-weight: bold;\n  font-size: 18px;\n  margin-bottom: 8px;\n}\n\n.info-row {\n  margin-bottom: 10px;\n  display: flex;\n  align-items: center;\n}\n\n.info-card .keyboard {\n  position: absolute;\n  left: 12px;\n  top: 8px;\n  height: 30px;\n}\n\n.info-card .mouse {\n  max-height: 34px;\n  margin: -2px 0px;\n}\n\n.info-card .key {\n  text-shadow: none;\n  font-weight: bold;\n  display: inline-block;\n  font-family: "Cutive Mono", monospace;\n  padding: 2px 5px;\n  margin-right: 2px;\n  min-width: 10px;\n  text-align: center;\n  margin-left: 2px;\n  background: #eff0f2;\n  box-shadow: inset 0 0 25px #e8e8e8, 0 1px 0 #c3c3c3, 0 2px 0 #c9c9c9,\n    0 2px 3px #000;\n  color: #111;\n  border-radius: 2px;\n  font-size: 14px;\n}\n\n.ctrl-desc {\n  margin-left: 5px;\n}\n\n.controls-card .menu-arrow {\n  position: absolute;\n  right: 8px;\n  height: 24px;\n  top: 14px;\n  transition: all 0.2s ease;\n  transform: rotate(180deg);\n}\n\n#loader {\n  z-index: 6;\n  position: absolute;\n  left: 0;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  /* background: rgba(0,0,0,0.5); */\n  display: flex;\n  justify-content: flex-start;\n  align-items: flex-end;\n  padding: 20px;\n  font-size: 30px;\n  font-family: "Averia Sans Libre", cursive;\n  color: white;\n  text-shadow: 0px 1px 1px black, 0px 0px 4px black;\n}\n\n#debug-menu {\n  position: absolute;\n}\n',
              "",
            ]),
              (e.exports = t);
          },
          "./node_modules/css-loader/dist/runtime/api.js": function (e, t, n) {
            "use strict";
            e.exports = function (e) {
              var t = [];
              return (
                (t.toString = function () {
                  return this.map(function (t) {
                    var n = (function (e, t) {
                      var n = e[1] || "",
                        i = e[3];
                      if (!i) return n;
                      if (t && "function" === typeof btoa) {
                        var r = (function (e) {
                            var t = btoa(
                                unescape(encodeURIComponent(JSON.stringify(e)))
                              ),
                              n =
                                "sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(
                                  t
                                );
                            return "/*# ".concat(n, " */");
                          })(i),
                          a = i.sources.map(function (e) {
                            return "/*# sourceURL="
                              .concat(i.sourceRoot)
                              .concat(e, " */");
                          });
                        return [n].concat(a).concat([r]).join("\n");
                      }
                      return [n].join("\n");
                    })(t, e);
                    return t[2]
                      ? "@media ".concat(t[2], " {").concat(n, "}")
                      : n;
                  }).join("");
                }),
                (t.i = function (e, n) {
                  "string" === typeof e && (e = [[null, e, ""]]);
                  for (var i = 0; i < e.length; i++) {
                    var r = [].concat(e[i]);
                    n &&
                      (r[2]
                        ? (r[2] = "".concat(n, " and ").concat(r[2]))
                        : (r[2] = n)),
                      t.push(r);
                  }
                }),
                t
              );
            };
          },
          "./node_modules/lodash/lodash.js": function (e, t, n) {
            (function (e, i) {
              var r;
              (function () {
                var a = "Expected a function",
                  o = "__lodash_placeholder__",
                  s = [
                    ["ary", 128],
                    ["bind", 1],
                    ["bindKey", 2],
                    ["curry", 8],
                    ["curryRight", 16],
                    ["flip", 512],
                    ["partial", 32],
                    ["partialRight", 64],
                    ["rearg", 256],
                  ],
                  l = "[object Arguments]",
                  u = "[object Array]",
                  c = "[object Boolean]",
                  h = "[object Date]",
                  d = "[object Error]",
                  p = "[object Function]",
                  f = "[object GeneratorFunction]",
                  m = "[object Map]",
                  v = "[object Number]",
                  g = "[object Object]",
                  y = "[object RegExp]",
                  x = "[object Set]",
                  b = "[object String]",
                  _ = "[object Symbol]",
                  w = "[object WeakMap]",
                  S = "[object ArrayBuffer]",
                  E = "[object DataView]",
                  M = "[object Float32Array]",
                  A = "[object Float64Array]",
                  T = "[object Int8Array]",
                  C = "[object Int16Array]",
                  k = "[object Int32Array]",
                  P = "[object Uint8Array]",
                  L = "[object Uint16Array]",
                  R = "[object Uint32Array]",
                  I = /\b__p \+= '';/g,
                  F = /\b(__p \+=) '' \+/g,
                  N = /(__e\(.*?\)|\b__t\)) \+\n'';/g,
                  O = /&(?:amp|lt|gt|quot|#39);/g,
                  B = /[&<>"']/g,
                  D = RegExp(O.source),
                  V = RegExp(B.source),
                  U = /<%-([\s\S]+?)%>/g,
                  z = /<%([\s\S]+?)%>/g,
                  j = /<%=([\s\S]+?)%>/g,
                  G = /\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,
                  H = /^\w*$/,
                  W =
                    /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,
                  Y = /[\\^$.*+?()[\]{}|]/g,
                  q = RegExp(Y.source),
                  X = /^\s+|\s+$/g,
                  Q = /^\s+/,
                  Z = /\s+$/,
                  J = /\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,
                  K = /\{\n\/\* \[wrapped with (.+)\] \*/,
                  $ = /,? & /,
                  ee = /[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,
                  te = /\\(\\)?/g,
                  ne = /\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,
                  ie = /\w*$/,
                  re = /^[-+]0x[0-9a-f]+$/i,
                  ae = /^0b[01]+$/i,
                  oe = /^\[object .+?Constructor\]$/,
                  se = /^0o[0-7]+$/i,
                  le = /^(?:0|[1-9]\d*)$/,
                  ue = /[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,
                  ce = /($^)/,
                  he = /['\n\r\u2028\u2029\\]/g,
                  de = "\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",
                  pe =
                    "\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",
                  fe = "[\\ud800-\\udfff]",
                  me = "[" + pe + "]",
                  ve = "[" + de + "]",
                  ge = "\\d+",
                  ye = "[\\u2700-\\u27bf]",
                  xe = "[a-z\\xdf-\\xf6\\xf8-\\xff]",
                  be =
                    "[^\\ud800-\\udfff" +
                    pe +
                    ge +
                    "\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",
                  _e = "\\ud83c[\\udffb-\\udfff]",
                  we = "[^\\ud800-\\udfff]",
                  Se = "(?:\\ud83c[\\udde6-\\uddff]){2}",
                  Ee = "[\\ud800-\\udbff][\\udc00-\\udfff]",
                  Me = "[A-Z\\xc0-\\xd6\\xd8-\\xde]",
                  Ae = "(?:" + xe + "|" + be + ")",
                  Te = "(?:" + Me + "|" + be + ")",
                  Ce = "(?:" + ve + "|" + _e + ")?",
                  ke =
                    "[\\ufe0e\\ufe0f]?" +
                    Ce +
                    "(?:\\u200d(?:" +
                    [we, Se, Ee].join("|") +
                    ")[\\ufe0e\\ufe0f]?" +
                    Ce +
                    ")*",
                  Pe = "(?:" + [ye, Se, Ee].join("|") + ")" + ke,
                  Le = "(?:" + [we + ve + "?", ve, Se, Ee, fe].join("|") + ")",
                  Re = RegExp("['\u2019]", "g"),
                  Ie = RegExp(ve, "g"),
                  Fe = RegExp(_e + "(?=" + _e + ")|" + Le + ke, "g"),
                  Ne = RegExp(
                    [
                      Me +
                        "?" +
                        xe +
                        "+(?:['\u2019](?:d|ll|m|re|s|t|ve))?(?=" +
                        [me, Me, "$"].join("|") +
                        ")",
                      Te +
                        "+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?(?=" +
                        [me, Me + Ae, "$"].join("|") +
                        ")",
                      Me + "?" + Ae + "+(?:['\u2019](?:d|ll|m|re|s|t|ve))?",
                      Me + "+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",
                      "\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",
                      "\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",
                      ge,
                      Pe,
                    ].join("|"),
                    "g"
                  ),
                  Oe = RegExp(
                    "[\\u200d\\ud800-\\udfff" + de + "\\ufe0e\\ufe0f]"
                  ),
                  Be =
                    /[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,
                  De = [
                    "Array",
                    "Buffer",
                    "DataView",
                    "Date",
                    "Error",
                    "Float32Array",
                    "Float64Array",
                    "Function",
                    "Int8Array",
                    "Int16Array",
                    "Int32Array",
                    "Map",
                    "Math",
                    "Object",
                    "Promise",
                    "RegExp",
                    "Set",
                    "String",
                    "Symbol",
                    "TypeError",
                    "Uint8Array",
                    "Uint8ClampedArray",
                    "Uint16Array",
                    "Uint32Array",
                    "WeakMap",
                    "_",
                    "clearTimeout",
                    "isFinite",
                    "parseInt",
                    "setTimeout",
                  ],
                  Ve = -1,
                  Ue = {};
                (Ue[M] =
                  Ue[A] =
                  Ue[T] =
                  Ue[C] =
                  Ue[k] =
                  Ue[P] =
                  Ue["[object Uint8ClampedArray]"] =
                  Ue[L] =
                  Ue[R] =
                    !0),
                  (Ue[l] =
                    Ue[u] =
                    Ue[S] =
                    Ue[c] =
                    Ue[E] =
                    Ue[h] =
                    Ue[d] =
                    Ue[p] =
                    Ue[m] =
                    Ue[v] =
                    Ue[g] =
                    Ue[y] =
                    Ue[x] =
                    Ue[b] =
                    Ue[w] =
                      !1);
                var ze = {};
                (ze[l] =
                  ze[u] =
                  ze[S] =
                  ze[E] =
                  ze[c] =
                  ze[h] =
                  ze[M] =
                  ze[A] =
                  ze[T] =
                  ze[C] =
                  ze[k] =
                  ze[m] =
                  ze[v] =
                  ze[g] =
                  ze[y] =
                  ze[x] =
                  ze[b] =
                  ze[_] =
                  ze[P] =
                  ze["[object Uint8ClampedArray]"] =
                  ze[L] =
                  ze[R] =
                    !0),
                  (ze[d] = ze[p] = ze[w] = !1);
                var je = {
                    "\\": "\\",
                    "'": "'",
                    "\n": "n",
                    "\r": "r",
                    "\u2028": "u2028",
                    "\u2029": "u2029",
                  },
                  Ge = parseFloat,
                  He = parseInt,
                  We = "object" == typeof e && e && e.Object === Object && e,
                  Ye =
                    "object" == typeof self &&
                    self &&
                    self.Object === Object &&
                    self,
                  qe = We || Ye || Function("return this")(),
                  Xe = t && !t.nodeType && t,
                  Qe = Xe && "object" == typeof i && i && !i.nodeType && i,
                  Ze = Qe && Qe.exports === Xe,
                  Je = Ze && We.process,
                  Ke = (function () {
                    try {
                      var e = Qe && Qe.require && Qe.require("util").types;
                      return e || (Je && Je.binding && Je.binding("util"));
                    } catch (t) {}
                  })(),
                  $e = Ke && Ke.isArrayBuffer,
                  et = Ke && Ke.isDate,
                  tt = Ke && Ke.isMap,
                  nt = Ke && Ke.isRegExp,
                  it = Ke && Ke.isSet,
                  rt = Ke && Ke.isTypedArray;
                function at(e, t, n) {
                  switch (n.length) {
                    case 0:
                      return e.call(t);
                    case 1:
                      return e.call(t, n[0]);
                    case 2:
                      return e.call(t, n[0], n[1]);
                    case 3:
                      return e.call(t, n[0], n[1], n[2]);
                  }
                  return e.apply(t, n);
                }
                function ot(e, t, n, i) {
                  for (var r = -1, a = null == e ? 0 : e.length; ++r < a; ) {
                    var o = e[r];
                    t(i, o, n(o), e);
                  }
                  return i;
                }
                function st(e, t) {
                  for (
                    var n = -1, i = null == e ? 0 : e.length;
                    ++n < i && !1 !== t(e[n], n, e);

                  );
                  return e;
                }
                function lt(e, t) {
                  for (
                    var n = null == e ? 0 : e.length;
                    n-- && !1 !== t(e[n], n, e);

                  );
                  return e;
                }
                function ut(e, t) {
                  for (var n = -1, i = null == e ? 0 : e.length; ++n < i; )
                    if (!t(e[n], n, e)) return !1;
                  return !0;
                }
                function ct(e, t) {
                  for (
                    var n = -1, i = null == e ? 0 : e.length, r = 0, a = [];
                    ++n < i;

                  ) {
                    var o = e[n];
                    t(o, n, e) && (a[r++] = o);
                  }
                  return a;
                }
                function ht(e, t) {
                  return !(null == e || !e.length) && _t(e, t, 0) > -1;
                }
                function dt(e, t, n) {
                  for (var i = -1, r = null == e ? 0 : e.length; ++i < r; )
                    if (n(t, e[i])) return !0;
                  return !1;
                }
                function pt(e, t) {
                  for (
                    var n = -1, i = null == e ? 0 : e.length, r = Array(i);
                    ++n < i;

                  )
                    r[n] = t(e[n], n, e);
                  return r;
                }
                function ft(e, t) {
                  for (var n = -1, i = t.length, r = e.length; ++n < i; )
                    e[r + n] = t[n];
                  return e;
                }
                function mt(e, t, n, i) {
                  var r = -1,
                    a = null == e ? 0 : e.length;
                  for (i && a && (n = e[++r]); ++r < a; ) n = t(n, e[r], r, e);
                  return n;
                }
                function vt(e, t, n, i) {
                  var r = null == e ? 0 : e.length;
                  for (i && r && (n = e[--r]); r--; ) n = t(n, e[r], r, e);
                  return n;
                }
                function gt(e, t) {
                  for (var n = -1, i = null == e ? 0 : e.length; ++n < i; )
                    if (t(e[n], n, e)) return !0;
                  return !1;
                }
                var yt = Mt("length");
                function xt(e, t, n) {
                  var i;
                  return (
                    n(e, function (e, n, r) {
                      if (t(e, n, r)) return (i = n), !1;
                    }),
                    i
                  );
                }
                function bt(e, t, n, i) {
                  for (
                    var r = e.length, a = n + (i ? 1 : -1);
                    i ? a-- : ++a < r;

                  )
                    if (t(e[a], a, e)) return a;
                  return -1;
                }
                function _t(e, t, n) {
                  return t === t
                    ? (function (e, t, n) {
                        for (var i = n - 1, r = e.length; ++i < r; )
                          if (e[i] === t) return i;
                        return -1;
                      })(e, t, n)
                    : bt(e, St, n);
                }
                function wt(e, t, n, i) {
                  for (var r = n - 1, a = e.length; ++r < a; )
                    if (i(e[r], t)) return r;
                  return -1;
                }
                function St(e) {
                  return e !== e;
                }
                function Et(e, t) {
                  var n = null == e ? 0 : e.length;
                  return n ? Ct(e, t) / n : NaN;
                }
                function Mt(e) {
                  return function (t) {
                    return null == t ? void 0 : t[e];
                  };
                }
                function At(e) {
                  return function (t) {
                    return null == e ? void 0 : e[t];
                  };
                }
                function Tt(e, t, n, i, r) {
                  return (
                    r(e, function (e, r, a) {
                      n = i ? ((i = !1), e) : t(n, e, r, a);
                    }),
                    n
                  );
                }
                function Ct(e, t) {
                  for (var n, i = -1, r = e.length; ++i < r; ) {
                    var a = t(e[i]);
                    void 0 !== a && (n = void 0 === n ? a : n + a);
                  }
                  return n;
                }
                function kt(e, t) {
                  for (var n = -1, i = Array(e); ++n < e; ) i[n] = t(n);
                  return i;
                }
                function Pt(e) {
                  return function (t) {
                    return e(t);
                  };
                }
                function Lt(e, t) {
                  return pt(t, function (t) {
                    return e[t];
                  });
                }
                function Rt(e, t) {
                  return e.has(t);
                }
                function It(e, t) {
                  for (
                    var n = -1, i = e.length;
                    ++n < i && _t(t, e[n], 0) > -1;

                  );
                  return n;
                }
                function Ft(e, t) {
                  for (var n = e.length; n-- && _t(t, e[n], 0) > -1; );
                  return n;
                }
                function Nt(e, t) {
                  for (var n = e.length, i = 0; n--; ) e[n] === t && ++i;
                  return i;
                }
                var Ot = At({
                    "\xc0": "A",
                    "\xc1": "A",
                    "\xc2": "A",
                    "\xc3": "A",
                    "\xc4": "A",
                    "\xc5": "A",
                    "\xe0": "a",
                    "\xe1": "a",
                    "\xe2": "a",
                    "\xe3": "a",
                    "\xe4": "a",
                    "\xe5": "a",
                    "\xc7": "C",
                    "\xe7": "c",
                    "\xd0": "D",
                    "\xf0": "d",
                    "\xc8": "E",
                    "\xc9": "E",
                    "\xca": "E",
                    "\xcb": "E",
                    "\xe8": "e",
                    "\xe9": "e",
                    "\xea": "e",
                    "\xeb": "e",
                    "\xcc": "I",
                    "\xcd": "I",
                    "\xce": "I",
                    "\xcf": "I",
                    "\xec": "i",
                    "\xed": "i",
                    "\xee": "i",
                    "\xef": "i",
                    "\xd1": "N",
                    "\xf1": "n",
                    "\xd2": "O",
                    "\xd3": "O",
                    "\xd4": "O",
                    "\xd5": "O",
                    "\xd6": "O",
                    "\xd8": "O",
                    "\xf2": "o",
                    "\xf3": "o",
                    "\xf4": "o",
                    "\xf5": "o",
                    "\xf6": "o",
                    "\xf8": "o",
                    "\xd9": "U",
                    "\xda": "U",
                    "\xdb": "U",
                    "\xdc": "U",
                    "\xf9": "u",
                    "\xfa": "u",
                    "\xfb": "u",
                    "\xfc": "u",
                    "\xdd": "Y",
                    "\xfd": "y",
                    "\xff": "y",
                    "\xc6": "Ae",
                    "\xe6": "ae",
                    "\xde": "Th",
                    "\xfe": "th",
                    "\xdf": "ss",
                    "\u0100": "A",
                    "\u0102": "A",
                    "\u0104": "A",
                    "\u0101": "a",
                    "\u0103": "a",
                    "\u0105": "a",
                    "\u0106": "C",
                    "\u0108": "C",
                    "\u010a": "C",
                    "\u010c": "C",
                    "\u0107": "c",
                    "\u0109": "c",
                    "\u010b": "c",
                    "\u010d": "c",
                    "\u010e": "D",
                    "\u0110": "D",
                    "\u010f": "d",
                    "\u0111": "d",
                    "\u0112": "E",
                    "\u0114": "E",
                    "\u0116": "E",
                    "\u0118": "E",
                    "\u011a": "E",
                    "\u0113": "e",
                    "\u0115": "e",
                    "\u0117": "e",
                    "\u0119": "e",
                    "\u011b": "e",
                    "\u011c": "G",
                    "\u011e": "G",
                    "\u0120": "G",
                    "\u0122": "G",
                    "\u011d": "g",
                    "\u011f": "g",
                    "\u0121": "g",
                    "\u0123": "g",
                    "\u0124": "H",
                    "\u0126": "H",
                    "\u0125": "h",
                    "\u0127": "h",
                    "\u0128": "I",
                    "\u012a": "I",
                    "\u012c": "I",
                    "\u012e": "I",
                    "\u0130": "I",
                    "\u0129": "i",
                    "\u012b": "i",
                    "\u012d": "i",
                    "\u012f": "i",
                    "\u0131": "i",
                    "\u0134": "J",
                    "\u0135": "j",
                    "\u0136": "K",
                    "\u0137": "k",
                    "\u0138": "k",
                    "\u0139": "L",
                    "\u013b": "L",
                    "\u013d": "L",
                    "\u013f": "L",
                    "\u0141": "L",
                    "\u013a": "l",
                    "\u013c": "l",
                    "\u013e": "l",
                    "\u0140": "l",
                    "\u0142": "l",
                    "\u0143": "N",
                    "\u0145": "N",
                    "\u0147": "N",
                    "\u014a": "N",
                    "\u0144": "n",
                    "\u0146": "n",
                    "\u0148": "n",
                    "\u014b": "n",
                    "\u014c": "O",
                    "\u014e": "O",
                    "\u0150": "O",
                    "\u014d": "o",
                    "\u014f": "o",
                    "\u0151": "o",
                    "\u0154": "R",
                    "\u0156": "R",
                    "\u0158": "R",
                    "\u0155": "r",
                    "\u0157": "r",
                    "\u0159": "r",
                    "\u015a": "S",
                    "\u015c": "S",
                    "\u015e": "S",
                    "\u0160": "S",
                    "\u015b": "s",
                    "\u015d": "s",
                    "\u015f": "s",
                    "\u0161": "s",
                    "\u0162": "T",
                    "\u0164": "T",
                    "\u0166": "T",
                    "\u0163": "t",
                    "\u0165": "t",
                    "\u0167": "t",
                    "\u0168": "U",
                    "\u016a": "U",
                    "\u016c": "U",
                    "\u016e": "U",
                    "\u0170": "U",
                    "\u0172": "U",
                    "\u0169": "u",
                    "\u016b": "u",
                    "\u016d": "u",
                    "\u016f": "u",
                    "\u0171": "u",
                    "\u0173": "u",
                    "\u0174": "W",
                    "\u0175": "w",
                    "\u0176": "Y",
                    "\u0177": "y",
                    "\u0178": "Y",
                    "\u0179": "Z",
                    "\u017b": "Z",
                    "\u017d": "Z",
                    "\u017a": "z",
                    "\u017c": "z",
                    "\u017e": "z",
                    "\u0132": "IJ",
                    "\u0133": "ij",
                    "\u0152": "Oe",
                    "\u0153": "oe",
                    "\u0149": "'n",
                    "\u017f": "s",
                  }),
                  Bt = At({
                    "&": "&amp;",
                    "<": "&lt;",
                    ">": "&gt;",
                    '"': "&quot;",
                    "'": "&#39;",
                  });
                function Dt(e) {
                  return "\\" + je[e];
                }
                function Vt(e) {
                  return Oe.test(e);
                }
                function Ut(e) {
                  var t = -1,
                    n = Array(e.size);
                  return (
                    e.forEach(function (e, i) {
                      n[++t] = [i, e];
                    }),
                    n
                  );
                }
                function zt(e, t) {
                  return function (n) {
                    return e(t(n));
                  };
                }
                function jt(e, t) {
                  for (var n = -1, i = e.length, r = 0, a = []; ++n < i; ) {
                    var s = e[n];
                    (s !== t && s !== o) || ((e[n] = o), (a[r++] = n));
                  }
                  return a;
                }
                function Gt(e) {
                  var t = -1,
                    n = Array(e.size);
                  return (
                    e.forEach(function (e) {
                      n[++t] = e;
                    }),
                    n
                  );
                }
                function Ht(e) {
                  var t = -1,
                    n = Array(e.size);
                  return (
                    e.forEach(function (e) {
                      n[++t] = [e, e];
                    }),
                    n
                  );
                }
                function Wt(e) {
                  return Vt(e)
                    ? (function (e) {
                        for (var t = (Fe.lastIndex = 0); Fe.test(e); ) ++t;
                        return t;
                      })(e)
                    : yt(e);
                }
                function Yt(e) {
                  return Vt(e)
                    ? (function (e) {
                        return e.match(Fe) || [];
                      })(e)
                    : (function (e) {
                        return e.split("");
                      })(e);
                }
                var qt = At({
                    "&amp;": "&",
                    "&lt;": "<",
                    "&gt;": ">",
                    "&quot;": '"',
                    "&#39;": "'",
                  }),
                  Xt = (function e(t) {
                    var n = (t =
                        null == t
                          ? qe
                          : Xt.defaults(qe.Object(), t, Xt.pick(qe, De))).Array,
                      i = t.Date,
                      r = t.Error,
                      de = t.Function,
                      pe = t.Math,
                      fe = t.Object,
                      me = t.RegExp,
                      ve = t.String,
                      ge = t.TypeError,
                      ye = n.prototype,
                      xe = de.prototype,
                      be = fe.prototype,
                      _e = t["__core-js_shared__"],
                      we = xe.toString,
                      Se = be.hasOwnProperty,
                      Ee = 0,
                      Me = (function () {
                        var e = /[^.]+$/.exec(
                          (_e && _e.keys && _e.keys.IE_PROTO) || ""
                        );
                        return e ? "Symbol(src)_1." + e : "";
                      })(),
                      Ae = be.toString,
                      Te = we.call(fe),
                      Ce = qe._,
                      ke = me(
                        "^" +
                          we
                            .call(Se)
                            .replace(Y, "\\$&")
                            .replace(
                              /hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,
                              "$1.*?"
                            ) +
                          "$"
                      ),
                      Pe = Ze ? t.Buffer : void 0,
                      Le = t.Symbol,
                      Fe = t.Uint8Array,
                      Oe = Pe ? Pe.allocUnsafe : void 0,
                      je = zt(fe.getPrototypeOf, fe),
                      We = fe.create,
                      Ye = be.propertyIsEnumerable,
                      Xe = ye.splice,
                      Qe = Le ? Le.isConcatSpreadable : void 0,
                      Je = Le ? Le.iterator : void 0,
                      Ke = Le ? Le.toStringTag : void 0,
                      yt = (function () {
                        try {
                          var e = Kr(fe, "defineProperty");
                          return e({}, "", {}), e;
                        } catch (t) {}
                      })(),
                      At = t.clearTimeout !== qe.clearTimeout && t.clearTimeout,
                      Qt = i && i.now !== qe.Date.now && i.now,
                      Zt = t.setTimeout !== qe.setTimeout && t.setTimeout,
                      Jt = pe.ceil,
                      Kt = pe.floor,
                      $t = fe.getOwnPropertySymbols,
                      en = Pe ? Pe.isBuffer : void 0,
                      tn = t.isFinite,
                      nn = ye.join,
                      rn = zt(fe.keys, fe),
                      an = pe.max,
                      on = pe.min,
                      sn = i.now,
                      ln = t.parseInt,
                      un = pe.random,
                      cn = ye.reverse,
                      hn = Kr(t, "DataView"),
                      dn = Kr(t, "Map"),
                      pn = Kr(t, "Promise"),
                      fn = Kr(t, "Set"),
                      mn = Kr(t, "WeakMap"),
                      vn = Kr(fe, "create"),
                      gn = mn && new mn(),
                      yn = {},
                      xn = Ma(hn),
                      bn = Ma(dn),
                      _n = Ma(pn),
                      wn = Ma(fn),
                      Sn = Ma(mn),
                      En = Le ? Le.prototype : void 0,
                      Mn = En ? En.valueOf : void 0,
                      An = En ? En.toString : void 0;
                    function Tn(e) {
                      if (Go(e) && !Ro(e) && !(e instanceof Ln)) {
                        if (e instanceof Pn) return e;
                        if (Se.call(e, "__wrapped__")) return Aa(e);
                      }
                      return new Pn(e);
                    }
                    var Cn = (function () {
                      function e() {}
                      return function (t) {
                        if (!jo(t)) return {};
                        if (We) return We(t);
                        e.prototype = t;
                        var n = new e();
                        return (e.prototype = void 0), n;
                      };
                    })();
                    function kn() {}
                    function Pn(e, t) {
                      (this.__wrapped__ = e),
                        (this.__actions__ = []),
                        (this.__chain__ = !!t),
                        (this.__index__ = 0),
                        (this.__values__ = void 0);
                    }
                    function Ln(e) {
                      (this.__wrapped__ = e),
                        (this.__actions__ = []),
                        (this.__dir__ = 1),
                        (this.__filtered__ = !1),
                        (this.__iteratees__ = []),
                        (this.__takeCount__ = 4294967295),
                        (this.__views__ = []);
                    }
                    function Rn(e) {
                      var t = -1,
                        n = null == e ? 0 : e.length;
                      for (this.clear(); ++t < n; ) {
                        var i = e[t];
                        this.set(i[0], i[1]);
                      }
                    }
                    function In(e) {
                      var t = -1,
                        n = null == e ? 0 : e.length;
                      for (this.clear(); ++t < n; ) {
                        var i = e[t];
                        this.set(i[0], i[1]);
                      }
                    }
                    function Fn(e) {
                      var t = -1,
                        n = null == e ? 0 : e.length;
                      for (this.clear(); ++t < n; ) {
                        var i = e[t];
                        this.set(i[0], i[1]);
                      }
                    }
                    function Nn(e) {
                      var t = -1,
                        n = null == e ? 0 : e.length;
                      for (this.__data__ = new Fn(); ++t < n; ) this.add(e[t]);
                    }
                    function On(e) {
                      var t = (this.__data__ = new In(e));
                      this.size = t.size;
                    }
                    function Bn(e, t) {
                      var n = Ro(e),
                        i = !n && Lo(e),
                        r = !n && !i && Oo(e),
                        a = !n && !i && !r && Jo(e),
                        o = n || i || r || a,
                        s = o ? kt(e.length, ve) : [],
                        l = s.length;
                      for (var u in e)
                        (!t && !Se.call(e, u)) ||
                          (o &&
                            ("length" == u ||
                              (r && ("offset" == u || "parent" == u)) ||
                              (a &&
                                ("buffer" == u ||
                                  "byteLength" == u ||
                                  "byteOffset" == u)) ||
                              aa(u, l))) ||
                          s.push(u);
                      return s;
                    }
                    function Dn(e) {
                      var t = e.length;
                      return t ? e[Ni(0, t - 1)] : void 0;
                    }
                    function Vn(e, t) {
                      return wa(vr(e), Xn(t, 0, e.length));
                    }
                    function Un(e) {
                      return wa(vr(e));
                    }
                    function zn(e, t, n) {
                      ((void 0 !== n && !Co(e[t], n)) ||
                        (void 0 === n && !(t in e))) &&
                        Yn(e, t, n);
                    }
                    function jn(e, t, n) {
                      var i = e[t];
                      (Se.call(e, t) && Co(i, n) && (void 0 !== n || t in e)) ||
                        Yn(e, t, n);
                    }
                    function Gn(e, t) {
                      for (var n = e.length; n--; )
                        if (Co(e[n][0], t)) return n;
                      return -1;
                    }
                    function Hn(e, t, n, i) {
                      return (
                        $n(e, function (e, r, a) {
                          t(i, e, n(e), a);
                        }),
                        i
                      );
                    }
                    function Wn(e, t) {
                      return e && gr(t, xs(t), e);
                    }
                    function Yn(e, t, n) {
                      "__proto__" == t && yt
                        ? yt(e, t, {
                            configurable: !0,
                            enumerable: !0,
                            value: n,
                            writable: !0,
                          })
                        : (e[t] = n);
                    }
                    function qn(e, t) {
                      for (
                        var i = -1, r = t.length, a = n(r), o = null == e;
                        ++i < r;

                      )
                        a[i] = o ? void 0 : fs(e, t[i]);
                      return a;
                    }
                    function Xn(e, t, n) {
                      return (
                        e === e &&
                          (void 0 !== n && (e = e <= n ? e : n),
                          void 0 !== t && (e = e >= t ? e : t)),
                        e
                      );
                    }
                    function Qn(e, t, n, i, r, a) {
                      var o,
                        s = 1 & t,
                        u = 2 & t,
                        d = 4 & t;
                      if ((n && (o = r ? n(e, i, r, a) : n(e)), void 0 !== o))
                        return o;
                      if (!jo(e)) return e;
                      var w = Ro(e);
                      if (w) {
                        if (
                          ((o = (function (e) {
                            var t = e.length,
                              n = new e.constructor(t);
                            return (
                              t &&
                                "string" == typeof e[0] &&
                                Se.call(e, "index") &&
                                ((n.index = e.index), (n.input = e.input)),
                              n
                            );
                          })(e)),
                          !s)
                        )
                          return vr(e, o);
                      } else {
                        var I = ta(e),
                          F = I == p || I == f;
                        if (Oo(e)) return cr(e, s);
                        if (I == g || I == l || (F && !r)) {
                          if (((o = u || F ? {} : ia(e)), !s))
                            return u
                              ? (function (e, t) {
                                  return gr(e, ea(e), t);
                                })(
                                  e,
                                  (function (e, t) {
                                    return e && gr(t, bs(t), e);
                                  })(o, e)
                                )
                              : (function (e, t) {
                                  return gr(e, $r(e), t);
                                })(e, Wn(o, e));
                        } else {
                          if (!ze[I]) return r ? e : {};
                          o = (function (e, t, n) {
                            var i,
                              r = e.constructor;
                            switch (t) {
                              case S:
                                return hr(e);
                              case c:
                              case h:
                                return new r(+e);
                              case E:
                                return (function (e, t) {
                                  var n = t ? hr(e.buffer) : e.buffer;
                                  return new e.constructor(
                                    n,
                                    e.byteOffset,
                                    e.byteLength
                                  );
                                })(e, n);
                              case M:
                              case A:
                              case T:
                              case C:
                              case k:
                              case P:
                              case "[object Uint8ClampedArray]":
                              case L:
                              case R:
                                return dr(e, n);
                              case m:
                                return new r();
                              case v:
                              case b:
                                return new r(e);
                              case y:
                                return (function (e) {
                                  var t = new e.constructor(
                                    e.source,
                                    ie.exec(e)
                                  );
                                  return (t.lastIndex = e.lastIndex), t;
                                })(e);
                              case x:
                                return new r();
                              case _:
                                return (i = e), Mn ? fe(Mn.call(i)) : {};
                            }
                          })(e, I, s);
                        }
                      }
                      a || (a = new On());
                      var N = a.get(e);
                      if (N) return N;
                      a.set(e, o),
                        Xo(e)
                          ? e.forEach(function (i) {
                              o.add(Qn(i, t, n, i, e, a));
                            })
                          : Ho(e) &&
                            e.forEach(function (i, r) {
                              o.set(r, Qn(i, t, n, r, e, a));
                            });
                      var O = w ? void 0 : (d ? (u ? Wr : Hr) : u ? bs : xs)(e);
                      return (
                        st(O || e, function (i, r) {
                          O && (i = e[(r = i)]), jn(o, r, Qn(i, t, n, r, e, a));
                        }),
                        o
                      );
                    }
                    function Zn(e, t, n) {
                      var i = n.length;
                      if (null == e) return !i;
                      for (e = fe(e); i--; ) {
                        var r = n[i],
                          a = t[r],
                          o = e[r];
                        if ((void 0 === o && !(r in e)) || !a(o)) return !1;
                      }
                      return !0;
                    }
                    function Jn(e, t, n) {
                      if ("function" != typeof e) throw new ge(a);
                      return ya(function () {
                        e.apply(void 0, n);
                      }, t);
                    }
                    function Kn(e, t, n, i) {
                      var r = -1,
                        a = ht,
                        o = !0,
                        s = e.length,
                        l = [],
                        u = t.length;
                      if (!s) return l;
                      n && (t = pt(t, Pt(n))),
                        i
                          ? ((a = dt), (o = !1))
                          : t.length >= 200 &&
                            ((a = Rt), (o = !1), (t = new Nn(t)));
                      e: for (; ++r < s; ) {
                        var c = e[r],
                          h = null == n ? c : n(c);
                        if (((c = i || 0 !== c ? c : 0), o && h === h)) {
                          for (var d = u; d--; ) if (t[d] === h) continue e;
                          l.push(c);
                        } else a(t, h, i) || l.push(c);
                      }
                      return l;
                    }
                    (Tn.templateSettings = {
                      escape: U,
                      evaluate: z,
                      interpolate: j,
                      variable: "",
                      imports: { _: Tn },
                    }),
                      (Tn.prototype = kn.prototype),
                      (Tn.prototype.constructor = Tn),
                      (Pn.prototype = Cn(kn.prototype)),
                      (Pn.prototype.constructor = Pn),
                      (Ln.prototype = Cn(kn.prototype)),
                      (Ln.prototype.constructor = Ln),
                      (Rn.prototype.clear = function () {
                        (this.__data__ = vn ? vn(null) : {}), (this.size = 0);
                      }),
                      (Rn.prototype.delete = function (e) {
                        var t = this.has(e) && delete this.__data__[e];
                        return (this.size -= t ? 1 : 0), t;
                      }),
                      (Rn.prototype.get = function (e) {
                        var t = this.__data__;
                        if (vn) {
                          var n = t[e];
                          return "__lodash_hash_undefined__" === n ? void 0 : n;
                        }
                        return Se.call(t, e) ? t[e] : void 0;
                      }),
                      (Rn.prototype.has = function (e) {
                        var t = this.__data__;
                        return vn ? void 0 !== t[e] : Se.call(t, e);
                      }),
                      (Rn.prototype.set = function (e, t) {
                        var n = this.__data__;
                        return (
                          (this.size += this.has(e) ? 0 : 1),
                          (n[e] =
                            vn && void 0 === t
                              ? "__lodash_hash_undefined__"
                              : t),
                          this
                        );
                      }),
                      (In.prototype.clear = function () {
                        (this.__data__ = []), (this.size = 0);
                      }),
                      (In.prototype.delete = function (e) {
                        var t = this.__data__,
                          n = Gn(t, e);
                        return (
                          !(n < 0) &&
                          (n == t.length - 1 ? t.pop() : Xe.call(t, n, 1),
                          --this.size,
                          !0)
                        );
                      }),
                      (In.prototype.get = function (e) {
                        var t = this.__data__,
                          n = Gn(t, e);
                        return n < 0 ? void 0 : t[n][1];
                      }),
                      (In.prototype.has = function (e) {
                        return Gn(this.__data__, e) > -1;
                      }),
                      (In.prototype.set = function (e, t) {
                        var n = this.__data__,
                          i = Gn(n, e);
                        return (
                          i < 0 ? (++this.size, n.push([e, t])) : (n[i][1] = t),
                          this
                        );
                      }),
                      (Fn.prototype.clear = function () {
                        (this.size = 0),
                          (this.__data__ = {
                            hash: new Rn(),
                            map: new (dn || In)(),
                            string: new Rn(),
                          });
                      }),
                      (Fn.prototype.delete = function (e) {
                        var t = Zr(this, e).delete(e);
                        return (this.size -= t ? 1 : 0), t;
                      }),
                      (Fn.prototype.get = function (e) {
                        return Zr(this, e).get(e);
                      }),
                      (Fn.prototype.has = function (e) {
                        return Zr(this, e).has(e);
                      }),
                      (Fn.prototype.set = function (e, t) {
                        var n = Zr(this, e),
                          i = n.size;
                        return (
                          n.set(e, t), (this.size += n.size == i ? 0 : 1), this
                        );
                      }),
                      (Nn.prototype.add = Nn.prototype.push =
                        function (e) {
                          return (
                            this.__data__.set(e, "__lodash_hash_undefined__"),
                            this
                          );
                        }),
                      (Nn.prototype.has = function (e) {
                        return this.__data__.has(e);
                      }),
                      (On.prototype.clear = function () {
                        (this.__data__ = new In()), (this.size = 0);
                      }),
                      (On.prototype.delete = function (e) {
                        var t = this.__data__,
                          n = t.delete(e);
                        return (this.size = t.size), n;
                      }),
                      (On.prototype.get = function (e) {
                        return this.__data__.get(e);
                      }),
                      (On.prototype.has = function (e) {
                        return this.__data__.has(e);
                      }),
                      (On.prototype.set = function (e, t) {
                        var n = this.__data__;
                        if (n instanceof In) {
                          var i = n.__data__;
                          if (!dn || i.length < 199)
                            return i.push([e, t]), (this.size = ++n.size), this;
                          n = this.__data__ = new Fn(i);
                        }
                        return n.set(e, t), (this.size = n.size), this;
                      });
                    var $n = br(si),
                      ei = br(li, !0);
                    function ti(e, t) {
                      var n = !0;
                      return (
                        $n(e, function (e, i, r) {
                          return (n = !!t(e, i, r));
                        }),
                        n
                      );
                    }
                    function ni(e, t, n) {
                      for (var i = -1, r = e.length; ++i < r; ) {
                        var a = e[i],
                          o = t(a);
                        if (
                          null != o &&
                          (void 0 === s ? o === o && !Zo(o) : n(o, s))
                        )
                          var s = o,
                            l = a;
                      }
                      return l;
                    }
                    function ii(e, t) {
                      var n = [];
                      return (
                        $n(e, function (e, i, r) {
                          t(e, i, r) && n.push(e);
                        }),
                        n
                      );
                    }
                    function ri(e, t, n, i, r) {
                      var a = -1,
                        o = e.length;
                      for (n || (n = ra), r || (r = []); ++a < o; ) {
                        var s = e[a];
                        t > 0 && n(s)
                          ? t > 1
                            ? ri(s, t - 1, n, i, r)
                            : ft(r, s)
                          : i || (r[r.length] = s);
                      }
                      return r;
                    }
                    var ai = _r(),
                      oi = _r(!0);
                    function si(e, t) {
                      return e && ai(e, t, xs);
                    }
                    function li(e, t) {
                      return e && oi(e, t, xs);
                    }
                    function ui(e, t) {
                      return ct(t, function (t) {
                        return Vo(e[t]);
                      });
                    }
                    function ci(e, t) {
                      for (
                        var n = 0, i = (t = or(t, e)).length;
                        null != e && n < i;

                      )
                        e = e[Ea(t[n++])];
                      return n && n == i ? e : void 0;
                    }
                    function hi(e, t, n) {
                      var i = t(e);
                      return Ro(e) ? i : ft(i, n(e));
                    }
                    function di(e) {
                      return null == e
                        ? void 0 === e
                          ? "[object Undefined]"
                          : "[object Null]"
                        : Ke && Ke in fe(e)
                        ? (function (e) {
                            var t = Se.call(e, Ke),
                              n = e[Ke];
                            try {
                              e[Ke] = void 0;
                              var i = !0;
                            } catch (a) {}
                            var r = Ae.call(e);
                            return i && (t ? (e[Ke] = n) : delete e[Ke]), r;
                          })(e)
                        : (function (e) {
                            return Ae.call(e);
                          })(e);
                    }
                    function pi(e, t) {
                      return e > t;
                    }
                    function fi(e, t) {
                      return null != e && Se.call(e, t);
                    }
                    function mi(e, t) {
                      return null != e && t in fe(e);
                    }
                    function vi(e, t, i) {
                      for (
                        var r = i ? dt : ht,
                          a = e[0].length,
                          o = e.length,
                          s = o,
                          l = n(o),
                          u = 1 / 0,
                          c = [];
                        s--;

                      ) {
                        var h = e[s];
                        s && t && (h = pt(h, Pt(t))),
                          (u = on(h.length, u)),
                          (l[s] =
                            !i && (t || (a >= 120 && h.length >= 120))
                              ? new Nn(s && h)
                              : void 0);
                      }
                      h = e[0];
                      var d = -1,
                        p = l[0];
                      e: for (; ++d < a && c.length < u; ) {
                        var f = h[d],
                          m = t ? t(f) : f;
                        if (
                          ((f = i || 0 !== f ? f : 0),
                          !(p ? Rt(p, m) : r(c, m, i)))
                        ) {
                          for (s = o; --s; ) {
                            var v = l[s];
                            if (!(v ? Rt(v, m) : r(e[s], m, i))) continue e;
                          }
                          p && p.push(m), c.push(f);
                        }
                      }
                      return c;
                    }
                    function gi(e, t, n) {
                      var i =
                        null == (e = fa(e, (t = or(t, e)))) ? e : e[Ea(Ba(t))];
                      return null == i ? void 0 : at(i, e, n);
                    }
                    function yi(e) {
                      return Go(e) && di(e) == l;
                    }
                    function xi(e, t, n, i, r) {
                      return (
                        e === t ||
                        (null == e || null == t || (!Go(e) && !Go(t))
                          ? e !== e && t !== t
                          : (function (e, t, n, i, r, a) {
                              var o = Ro(e),
                                s = Ro(t),
                                p = o ? u : ta(e),
                                f = s ? u : ta(t),
                                w = (p = p == l ? g : p) == g,
                                M = (f = f == l ? g : f) == g,
                                A = p == f;
                              if (A && Oo(e)) {
                                if (!Oo(t)) return !1;
                                (o = !0), (w = !1);
                              }
                              if (A && !w)
                                return (
                                  a || (a = new On()),
                                  o || Jo(e)
                                    ? jr(e, t, n, i, r, a)
                                    : (function (e, t, n, i, r, a, o) {
                                        switch (n) {
                                          case E:
                                            if (
                                              e.byteLength != t.byteLength ||
                                              e.byteOffset != t.byteOffset
                                            )
                                              return !1;
                                            (e = e.buffer), (t = t.buffer);
                                          case S:
                                            return !(
                                              e.byteLength != t.byteLength ||
                                              !a(new Fe(e), new Fe(t))
                                            );
                                          case c:
                                          case h:
                                          case v:
                                            return Co(+e, +t);
                                          case d:
                                            return (
                                              e.name == t.name &&
                                              e.message == t.message
                                            );
                                          case y:
                                          case b:
                                            return e == t + "";
                                          case m:
                                            var s = Ut;
                                          case x:
                                            var l = 1 & i;
                                            if (
                                              (s || (s = Gt),
                                              e.size != t.size && !l)
                                            )
                                              return !1;
                                            var u = o.get(e);
                                            if (u) return u == t;
                                            (i |= 2), o.set(e, t);
                                            var p = jr(s(e), s(t), i, r, a, o);
                                            return o.delete(e), p;
                                          case _:
                                            if (Mn)
                                              return Mn.call(e) == Mn.call(t);
                                        }
                                        return !1;
                                      })(e, t, p, n, i, r, a)
                                );
                              if (!(1 & n)) {
                                var T = w && Se.call(e, "__wrapped__"),
                                  C = M && Se.call(t, "__wrapped__");
                                if (T || C) {
                                  var k = T ? e.value() : e,
                                    P = C ? t.value() : t;
                                  return a || (a = new On()), r(k, P, n, i, a);
                                }
                              }
                              return (
                                !!A &&
                                (a || (a = new On()),
                                (function (e, t, n, i, r, a) {
                                  var o = 1 & n,
                                    s = Hr(e),
                                    l = s.length,
                                    u = Hr(t).length;
                                  if (l != u && !o) return !1;
                                  for (var c = l; c--; ) {
                                    var h = s[c];
                                    if (!(o ? h in t : Se.call(t, h)))
                                      return !1;
                                  }
                                  var d = a.get(e);
                                  if (d && a.get(t)) return d == t;
                                  var p = !0;
                                  a.set(e, t), a.set(t, e);
                                  for (var f = o; ++c < l; ) {
                                    h = s[c];
                                    var m = e[h],
                                      v = t[h];
                                    if (i)
                                      var g = o
                                        ? i(v, m, h, t, e, a)
                                        : i(m, v, h, e, t, a);
                                    if (
                                      !(void 0 === g
                                        ? m === v || r(m, v, n, i, a)
                                        : g)
                                    ) {
                                      p = !1;
                                      break;
                                    }
                                    f || (f = "constructor" == h);
                                  }
                                  if (p && !f) {
                                    var y = e.constructor,
                                      x = t.constructor;
                                    y == x ||
                                      !("constructor" in e) ||
                                      !("constructor" in t) ||
                                      ("function" == typeof y &&
                                        y instanceof y &&
                                        "function" == typeof x &&
                                        x instanceof x) ||
                                      (p = !1);
                                  }
                                  return a.delete(e), a.delete(t), p;
                                })(e, t, n, i, r, a))
                              );
                            })(e, t, n, i, xi, r))
                      );
                    }
                    function bi(e, t, n, i) {
                      var r = n.length,
                        a = r,
                        o = !i;
                      if (null == e) return !a;
                      for (e = fe(e); r--; ) {
                        var s = n[r];
                        if (o && s[2] ? s[1] !== e[s[0]] : !(s[0] in e))
                          return !1;
                      }
                      for (; ++r < a; ) {
                        var l = (s = n[r])[0],
                          u = e[l],
                          c = s[1];
                        if (o && s[2]) {
                          if (void 0 === u && !(l in e)) return !1;
                        } else {
                          var h = new On();
                          if (i) var d = i(u, c, l, e, t, h);
                          if (!(void 0 === d ? xi(c, u, 3, i, h) : d))
                            return !1;
                        }
                      }
                      return !0;
                    }
                    function _i(e) {
                      return (
                        !(!jo(e) || ((t = e), Me && Me in t)) &&
                        (Vo(e) ? ke : oe).test(Ma(e))
                      );
                      var t;
                    }
                    function wi(e) {
                      return "function" == typeof e
                        ? e
                        : null == e
                        ? Ws
                        : "object" == typeof e
                        ? Ro(e)
                          ? Ci(e[0], e[1])
                          : Ti(e)
                        : el(e);
                    }
                    function Si(e) {
                      if (!ca(e)) return rn(e);
                      var t = [];
                      for (var n in fe(e))
                        Se.call(e, n) && "constructor" != n && t.push(n);
                      return t;
                    }
                    function Ei(e) {
                      if (!jo(e))
                        return (function (e) {
                          var t = [];
                          if (null != e) for (var n in fe(e)) t.push(n);
                          return t;
                        })(e);
                      var t = ca(e),
                        n = [];
                      for (var i in e)
                        ("constructor" != i || (!t && Se.call(e, i))) &&
                          n.push(i);
                      return n;
                    }
                    function Mi(e, t) {
                      return e < t;
                    }
                    function Ai(e, t) {
                      var i = -1,
                        r = Fo(e) ? n(e.length) : [];
                      return (
                        $n(e, function (e, n, a) {
                          r[++i] = t(e, n, a);
                        }),
                        r
                      );
                    }
                    function Ti(e) {
                      var t = Jr(e);
                      return 1 == t.length && t[0][2]
                        ? da(t[0][0], t[0][1])
                        : function (n) {
                            return n === e || bi(n, e, t);
                          };
                    }
                    function Ci(e, t) {
                      return sa(e) && ha(t)
                        ? da(Ea(e), t)
                        : function (n) {
                            var i = fs(n, e);
                            return void 0 === i && i === t
                              ? ms(n, e)
                              : xi(t, i, 3);
                          };
                    }
                    function ki(e, t, n, i, r) {
                      e !== t &&
                        ai(
                          t,
                          function (a, o) {
                            if ((r || (r = new On()), jo(a)))
                              !(function (e, t, n, i, r, a, o) {
                                var s = va(e, n),
                                  l = va(t, n),
                                  u = o.get(l);
                                if (u) zn(e, n, u);
                                else {
                                  var c = a ? a(s, l, n + "", e, t, o) : void 0,
                                    h = void 0 === c;
                                  if (h) {
                                    var d = Ro(l),
                                      p = !d && Oo(l),
                                      f = !d && !p && Jo(l);
                                    (c = l),
                                      d || p || f
                                        ? Ro(s)
                                          ? (c = s)
                                          : No(s)
                                          ? (c = vr(s))
                                          : p
                                          ? ((h = !1), (c = cr(l, !0)))
                                          : f
                                          ? ((h = !1), (c = dr(l, !0)))
                                          : (c = [])
                                        : Yo(l) || Lo(l)
                                        ? ((c = s),
                                          Lo(s)
                                            ? (c = as(s))
                                            : (jo(s) && !Vo(s)) || (c = ia(l)))
                                        : (h = !1);
                                  }
                                  h &&
                                    (o.set(l, c),
                                    r(c, l, i, a, o),
                                    o.delete(l)),
                                    zn(e, n, c);
                                }
                              })(e, t, o, n, ki, i, r);
                            else {
                              var s = i
                                ? i(va(e, o), a, o + "", e, t, r)
                                : void 0;
                              void 0 === s && (s = a), zn(e, o, s);
                            }
                          },
                          bs
                        );
                    }
                    function Pi(e, t) {
                      var n = e.length;
                      if (n) return aa((t += t < 0 ? n : 0), n) ? e[t] : void 0;
                    }
                    function Li(e, t, n) {
                      var i = -1;
                      return (
                        (t = pt(t.length ? t : [Ws], Pt(Qr()))),
                        (function (e, t) {
                          var n = e.length;
                          for (e.sort(t); n--; ) e[n] = e[n].value;
                          return e;
                        })(
                          Ai(e, function (e, n, r) {
                            return {
                              criteria: pt(t, function (t) {
                                return t(e);
                              }),
                              index: ++i,
                              value: e,
                            };
                          }),
                          function (e, t) {
                            return (function (e, t, n) {
                              for (
                                var i = -1,
                                  r = e.criteria,
                                  a = t.criteria,
                                  o = r.length,
                                  s = n.length;
                                ++i < o;

                              ) {
                                var l = pr(r[i], a[i]);
                                if (l) {
                                  if (i >= s) return l;
                                  var u = n[i];
                                  return l * ("desc" == u ? -1 : 1);
                                }
                              }
                              return e.index - t.index;
                            })(e, t, n);
                          }
                        )
                      );
                    }
                    function Ri(e, t, n) {
                      for (var i = -1, r = t.length, a = {}; ++i < r; ) {
                        var o = t[i],
                          s = ci(e, o);
                        n(s, o) && Ui(a, or(o, e), s);
                      }
                      return a;
                    }
                    function Ii(e, t, n, i) {
                      var r = i ? wt : _t,
                        a = -1,
                        o = t.length,
                        s = e;
                      for (
                        e === t && (t = vr(t)), n && (s = pt(e, Pt(n)));
                        ++a < o;

                      )
                        for (
                          var l = 0, u = t[a], c = n ? n(u) : u;
                          (l = r(s, c, l, i)) > -1;

                        )
                          s !== e && Xe.call(s, l, 1), Xe.call(e, l, 1);
                      return e;
                    }
                    function Fi(e, t) {
                      for (var n = e ? t.length : 0, i = n - 1; n--; ) {
                        var r = t[n];
                        if (n == i || r !== a) {
                          var a = r;
                          aa(r) ? Xe.call(e, r, 1) : Ki(e, r);
                        }
                      }
                      return e;
                    }
                    function Ni(e, t) {
                      return e + Kt(un() * (t - e + 1));
                    }
                    function Oi(e, t) {
                      var n = "";
                      if (!e || t < 1 || t > 9007199254740991) return n;
                      do {
                        t % 2 && (n += e), (t = Kt(t / 2)) && (e += e);
                      } while (t);
                      return n;
                    }
                    function Bi(e, t) {
                      return xa(pa(e, t, Ws), e + "");
                    }
                    function Di(e) {
                      return Dn(Cs(e));
                    }
                    function Vi(e, t) {
                      var n = Cs(e);
                      return wa(n, Xn(t, 0, n.length));
                    }
                    function Ui(e, t, n, i) {
                      if (!jo(e)) return e;
                      for (
                        var r = -1, a = (t = or(t, e)).length, o = a - 1, s = e;
                        null != s && ++r < a;

                      ) {
                        var l = Ea(t[r]),
                          u = n;
                        if (r != o) {
                          var c = s[l];
                          void 0 === (u = i ? i(c, l, s) : void 0) &&
                            (u = jo(c) ? c : aa(t[r + 1]) ? [] : {});
                        }
                        jn(s, l, u), (s = s[l]);
                      }
                      return e;
                    }
                    var zi = gn
                        ? function (e, t) {
                            return gn.set(e, t), e;
                          }
                        : Ws,
                      ji = yt
                        ? function (e, t) {
                            return yt(e, "toString", {
                              configurable: !0,
                              enumerable: !1,
                              value: js(t),
                              writable: !0,
                            });
                          }
                        : Ws;
                    function Gi(e) {
                      return wa(Cs(e));
                    }
                    function Hi(e, t, i) {
                      var r = -1,
                        a = e.length;
                      t < 0 && (t = -t > a ? 0 : a + t),
                        (i = i > a ? a : i) < 0 && (i += a),
                        (a = t > i ? 0 : (i - t) >>> 0),
                        (t >>>= 0);
                      for (var o = n(a); ++r < a; ) o[r] = e[r + t];
                      return o;
                    }
                    function Wi(e, t) {
                      var n;
                      return (
                        $n(e, function (e, i, r) {
                          return !(n = t(e, i, r));
                        }),
                        !!n
                      );
                    }
                    function Yi(e, t, n) {
                      var i = 0,
                        r = null == e ? i : e.length;
                      if ("number" == typeof t && t === t && r <= 2147483647) {
                        for (; i < r; ) {
                          var a = (i + r) >>> 1,
                            o = e[a];
                          null !== o && !Zo(o) && (n ? o <= t : o < t)
                            ? (i = a + 1)
                            : (r = a);
                        }
                        return r;
                      }
                      return qi(e, t, Ws, n);
                    }
                    function qi(e, t, n, i) {
                      t = n(t);
                      for (
                        var r = 0,
                          a = null == e ? 0 : e.length,
                          o = t !== t,
                          s = null === t,
                          l = Zo(t),
                          u = void 0 === t;
                        r < a;

                      ) {
                        var c = Kt((r + a) / 2),
                          h = n(e[c]),
                          d = void 0 !== h,
                          p = null === h,
                          f = h === h,
                          m = Zo(h);
                        if (o) var v = i || f;
                        else
                          v = u
                            ? f && (i || d)
                            : s
                            ? f && d && (i || !p)
                            : l
                            ? f && d && !p && (i || !m)
                            : !p && !m && (i ? h <= t : h < t);
                        v ? (r = c + 1) : (a = c);
                      }
                      return on(a, 4294967294);
                    }
                    function Xi(e, t) {
                      for (var n = -1, i = e.length, r = 0, a = []; ++n < i; ) {
                        var o = e[n],
                          s = t ? t(o) : o;
                        if (!n || !Co(s, l)) {
                          var l = s;
                          a[r++] = 0 === o ? 0 : o;
                        }
                      }
                      return a;
                    }
                    function Qi(e) {
                      return "number" == typeof e ? e : Zo(e) ? NaN : +e;
                    }
                    function Zi(e) {
                      if ("string" == typeof e) return e;
                      if (Ro(e)) return pt(e, Zi) + "";
                      if (Zo(e)) return An ? An.call(e) : "";
                      var t = e + "";
                      return "0" == t && 1 / e == -1 / 0 ? "-0" : t;
                    }
                    function Ji(e, t, n) {
                      var i = -1,
                        r = ht,
                        a = e.length,
                        o = !0,
                        s = [],
                        l = s;
                      if (n) (o = !1), (r = dt);
                      else if (a >= 200) {
                        var u = t ? null : Or(e);
                        if (u) return Gt(u);
                        (o = !1), (r = Rt), (l = new Nn());
                      } else l = t ? [] : s;
                      e: for (; ++i < a; ) {
                        var c = e[i],
                          h = t ? t(c) : c;
                        if (((c = n || 0 !== c ? c : 0), o && h === h)) {
                          for (var d = l.length; d--; )
                            if (l[d] === h) continue e;
                          t && l.push(h), s.push(c);
                        } else r(l, h, n) || (l !== s && l.push(h), s.push(c));
                      }
                      return s;
                    }
                    function Ki(e, t) {
                      return (
                        null == (e = fa(e, (t = or(t, e)))) ||
                        delete e[Ea(Ba(t))]
                      );
                    }
                    function $i(e, t, n, i) {
                      return Ui(e, t, n(ci(e, t)), i);
                    }
                    function er(e, t, n, i) {
                      for (
                        var r = e.length, a = i ? r : -1;
                        (i ? a-- : ++a < r) && t(e[a], a, e);

                      );
                      return n
                        ? Hi(e, i ? 0 : a, i ? a + 1 : r)
                        : Hi(e, i ? a + 1 : 0, i ? r : a);
                    }
                    function tr(e, t) {
                      var n = e;
                      return (
                        n instanceof Ln && (n = n.value()),
                        mt(
                          t,
                          function (e, t) {
                            return t.func.apply(t.thisArg, ft([e], t.args));
                          },
                          n
                        )
                      );
                    }
                    function nr(e, t, i) {
                      var r = e.length;
                      if (r < 2) return r ? Ji(e[0]) : [];
                      for (var a = -1, o = n(r); ++a < r; )
                        for (var s = e[a], l = -1; ++l < r; )
                          l != a && (o[a] = Kn(o[a] || s, e[l], t, i));
                      return Ji(ri(o, 1), t, i);
                    }
                    function ir(e, t, n) {
                      for (
                        var i = -1, r = e.length, a = t.length, o = {};
                        ++i < r;

                      ) {
                        var s = i < a ? t[i] : void 0;
                        n(o, e[i], s);
                      }
                      return o;
                    }
                    function rr(e) {
                      return No(e) ? e : [];
                    }
                    function ar(e) {
                      return "function" == typeof e ? e : Ws;
                    }
                    function or(e, t) {
                      return Ro(e) ? e : sa(e, t) ? [e] : Sa(os(e));
                    }
                    var sr = Bi;
                    function lr(e, t, n) {
                      var i = e.length;
                      return (
                        (n = void 0 === n ? i : n),
                        !t && n >= i ? e : Hi(e, t, n)
                      );
                    }
                    var ur =
                      At ||
                      function (e) {
                        return qe.clearTimeout(e);
                      };
                    function cr(e, t) {
                      if (t) return e.slice();
                      var n = e.length,
                        i = Oe ? Oe(n) : new e.constructor(n);
                      return e.copy(i), i;
                    }
                    function hr(e) {
                      var t = new e.constructor(e.byteLength);
                      return new Fe(t).set(new Fe(e)), t;
                    }
                    function dr(e, t) {
                      var n = t ? hr(e.buffer) : e.buffer;
                      return new e.constructor(n, e.byteOffset, e.length);
                    }
                    function pr(e, t) {
                      if (e !== t) {
                        var n = void 0 !== e,
                          i = null === e,
                          r = e === e,
                          a = Zo(e),
                          o = void 0 !== t,
                          s = null === t,
                          l = t === t,
                          u = Zo(t);
                        if (
                          (!s && !u && !a && e > t) ||
                          (a && o && l && !s && !u) ||
                          (i && o && l) ||
                          (!n && l) ||
                          !r
                        )
                          return 1;
                        if (
                          (!i && !a && !u && e < t) ||
                          (u && n && r && !i && !a) ||
                          (s && n && r) ||
                          (!o && r) ||
                          !l
                        )
                          return -1;
                      }
                      return 0;
                    }
                    function fr(e, t, i, r) {
                      for (
                        var a = -1,
                          o = e.length,
                          s = i.length,
                          l = -1,
                          u = t.length,
                          c = an(o - s, 0),
                          h = n(u + c),
                          d = !r;
                        ++l < u;

                      )
                        h[l] = t[l];
                      for (; ++a < s; ) (d || a < o) && (h[i[a]] = e[a]);
                      for (; c--; ) h[l++] = e[a++];
                      return h;
                    }
                    function mr(e, t, i, r) {
                      for (
                        var a = -1,
                          o = e.length,
                          s = -1,
                          l = i.length,
                          u = -1,
                          c = t.length,
                          h = an(o - l, 0),
                          d = n(h + c),
                          p = !r;
                        ++a < h;

                      )
                        d[a] = e[a];
                      for (var f = a; ++u < c; ) d[f + u] = t[u];
                      for (; ++s < l; ) (p || a < o) && (d[f + i[s]] = e[a++]);
                      return d;
                    }
                    function vr(e, t) {
                      var i = -1,
                        r = e.length;
                      for (t || (t = n(r)); ++i < r; ) t[i] = e[i];
                      return t;
                    }
                    function gr(e, t, n, i) {
                      var r = !n;
                      n || (n = {});
                      for (var a = -1, o = t.length; ++a < o; ) {
                        var s = t[a],
                          l = i ? i(n[s], e[s], s, n, e) : void 0;
                        void 0 === l && (l = e[s]),
                          r ? Yn(n, s, l) : jn(n, s, l);
                      }
                      return n;
                    }
                    function yr(e, t) {
                      return function (n, i) {
                        var r = Ro(n) ? ot : Hn,
                          a = t ? t() : {};
                        return r(n, e, Qr(i, 2), a);
                      };
                    }
                    function xr(e) {
                      return Bi(function (t, n) {
                        var i = -1,
                          r = n.length,
                          a = r > 1 ? n[r - 1] : void 0,
                          o = r > 2 ? n[2] : void 0;
                        for (
                          a =
                            e.length > 3 && "function" == typeof a
                              ? (r--, a)
                              : void 0,
                            o &&
                              oa(n[0], n[1], o) &&
                              ((a = r < 3 ? void 0 : a), (r = 1)),
                            t = fe(t);
                          ++i < r;

                        ) {
                          var s = n[i];
                          s && e(t, s, i, a);
                        }
                        return t;
                      });
                    }
                    function br(e, t) {
                      return function (n, i) {
                        if (null == n) return n;
                        if (!Fo(n)) return e(n, i);
                        for (
                          var r = n.length, a = t ? r : -1, o = fe(n);
                          (t ? a-- : ++a < r) && !1 !== i(o[a], a, o);

                        );
                        return n;
                      };
                    }
                    function _r(e) {
                      return function (t, n, i) {
                        for (
                          var r = -1, a = fe(t), o = i(t), s = o.length;
                          s--;

                        ) {
                          var l = o[e ? s : ++r];
                          if (!1 === n(a[l], l, a)) break;
                        }
                        return t;
                      };
                    }
                    function wr(e) {
                      return function (t) {
                        var n = Vt((t = os(t))) ? Yt(t) : void 0,
                          i = n ? n[0] : t.charAt(0),
                          r = n ? lr(n, 1).join("") : t.slice(1);
                        return i[e]() + r;
                      };
                    }
                    function Sr(e) {
                      return function (t) {
                        return mt(Vs(Ls(t).replace(Re, "")), e, "");
                      };
                    }
                    function Er(e) {
                      return function () {
                        var t = arguments;
                        switch (t.length) {
                          case 0:
                            return new e();
                          case 1:
                            return new e(t[0]);
                          case 2:
                            return new e(t[0], t[1]);
                          case 3:
                            return new e(t[0], t[1], t[2]);
                          case 4:
                            return new e(t[0], t[1], t[2], t[3]);
                          case 5:
                            return new e(t[0], t[1], t[2], t[3], t[4]);
                          case 6:
                            return new e(t[0], t[1], t[2], t[3], t[4], t[5]);
                          case 7:
                            return new e(
                              t[0],
                              t[1],
                              t[2],
                              t[3],
                              t[4],
                              t[5],
                              t[6]
                            );
                        }
                        var n = Cn(e.prototype),
                          i = e.apply(n, t);
                        return jo(i) ? i : n;
                      };
                    }
                    function Mr(e) {
                      return function (t, n, i) {
                        var r = fe(t);
                        if (!Fo(t)) {
                          var a = Qr(n, 3);
                          (t = xs(t)),
                            (n = function (e) {
                              return a(r[e], e, r);
                            });
                        }
                        var o = e(t, n, i);
                        return o > -1 ? r[a ? t[o] : o] : void 0;
                      };
                    }
                    function Ar(e) {
                      return Gr(function (t) {
                        var n = t.length,
                          i = n,
                          r = Pn.prototype.thru;
                        for (e && t.reverse(); i--; ) {
                          var o = t[i];
                          if ("function" != typeof o) throw new ge(a);
                          if (r && !s && "wrapper" == qr(o))
                            var s = new Pn([], !0);
                        }
                        for (i = s ? i : n; ++i < n; ) {
                          var l = qr((o = t[i])),
                            u = "wrapper" == l ? Yr(o) : void 0;
                          s =
                            u &&
                            la(u[0]) &&
                            424 == u[1] &&
                            !u[4].length &&
                            1 == u[9]
                              ? s[qr(u[0])].apply(s, u[3])
                              : 1 == o.length && la(o)
                              ? s[l]()
                              : s.thru(o);
                        }
                        return function () {
                          var e = arguments,
                            i = e[0];
                          if (s && 1 == e.length && Ro(i))
                            return s.plant(i).value();
                          for (
                            var r = 0, a = n ? t[r].apply(this, e) : i;
                            ++r < n;

                          )
                            a = t[r].call(this, a);
                          return a;
                        };
                      });
                    }
                    function Tr(e, t, i, r, a, o, s, l, u, c) {
                      var h = 128 & t,
                        d = 1 & t,
                        p = 2 & t,
                        f = 24 & t,
                        m = 512 & t,
                        v = p ? void 0 : Er(e);
                      return function g() {
                        for (var y = arguments.length, x = n(y), b = y; b--; )
                          x[b] = arguments[b];
                        if (f)
                          var _ = Xr(g),
                            w = Nt(x, _);
                        if (
                          (r && (x = fr(x, r, a, f)),
                          o && (x = mr(x, o, s, f)),
                          (y -= w),
                          f && y < c)
                        ) {
                          var S = jt(x, _);
                          return Fr(
                            e,
                            t,
                            Tr,
                            g.placeholder,
                            i,
                            x,
                            S,
                            l,
                            u,
                            c - y
                          );
                        }
                        var E = d ? i : this,
                          M = p ? E[e] : e;
                        return (
                          (y = x.length),
                          l ? (x = ma(x, l)) : m && y > 1 && x.reverse(),
                          h && u < y && (x.length = u),
                          this &&
                            this !== qe &&
                            this instanceof g &&
                            (M = v || Er(M)),
                          M.apply(E, x)
                        );
                      };
                    }
                    function Cr(e, t) {
                      return function (n, i) {
                        return (function (e, t, n, i) {
                          return (
                            si(e, function (e, r, a) {
                              t(i, n(e), r, a);
                            }),
                            i
                          );
                        })(n, e, t(i), {});
                      };
                    }
                    function kr(e, t) {
                      return function (n, i) {
                        var r;
                        if (void 0 === n && void 0 === i) return t;
                        if ((void 0 !== n && (r = n), void 0 !== i)) {
                          if (void 0 === r) return i;
                          "string" == typeof n || "string" == typeof i
                            ? ((n = Zi(n)), (i = Zi(i)))
                            : ((n = Qi(n)), (i = Qi(i))),
                            (r = e(n, i));
                        }
                        return r;
                      };
                    }
                    function Pr(e) {
                      return Gr(function (t) {
                        return (
                          (t = pt(t, Pt(Qr()))),
                          Bi(function (n) {
                            var i = this;
                            return e(t, function (e) {
                              return at(e, i, n);
                            });
                          })
                        );
                      });
                    }
                    function Lr(e, t) {
                      var n = (t = void 0 === t ? " " : Zi(t)).length;
                      if (n < 2) return n ? Oi(t, e) : t;
                      var i = Oi(t, Jt(e / Wt(t)));
                      return Vt(t) ? lr(Yt(i), 0, e).join("") : i.slice(0, e);
                    }
                    function Rr(e) {
                      return function (t, i, r) {
                        return (
                          r &&
                            "number" != typeof r &&
                            oa(t, i, r) &&
                            (i = r = void 0),
                          (t = ts(t)),
                          void 0 === i ? ((i = t), (t = 0)) : (i = ts(i)),
                          (function (e, t, i, r) {
                            for (
                              var a = -1,
                                o = an(Jt((t - e) / (i || 1)), 0),
                                s = n(o);
                              o--;

                            )
                              (s[r ? o : ++a] = e), (e += i);
                            return s;
                          })(
                            t,
                            i,
                            (r = void 0 === r ? (t < i ? 1 : -1) : ts(r)),
                            e
                          )
                        );
                      };
                    }
                    function Ir(e) {
                      return function (t, n) {
                        return (
                          ("string" == typeof t && "string" == typeof n) ||
                            ((t = rs(t)), (n = rs(n))),
                          e(t, n)
                        );
                      };
                    }
                    function Fr(e, t, n, i, r, a, o, s, l, u) {
                      var c = 8 & t;
                      (t |= c ? 32 : 64),
                        4 & (t &= ~(c ? 64 : 32)) || (t &= -4);
                      var h = [
                          e,
                          t,
                          r,
                          c ? a : void 0,
                          c ? o : void 0,
                          c ? void 0 : a,
                          c ? void 0 : o,
                          s,
                          l,
                          u,
                        ],
                        d = n.apply(void 0, h);
                      return (
                        la(e) && ga(d, h), (d.placeholder = i), ba(d, e, t)
                      );
                    }
                    function Nr(e) {
                      var t = pe[e];
                      return function (e, n) {
                        if (
                          ((e = rs(e)),
                          (n = null == n ? 0 : on(ns(n), 292)) && tn(e))
                        ) {
                          var i = (os(e) + "e").split("e");
                          return +(
                            (i = (os(t(i[0] + "e" + (+i[1] + n))) + "e").split(
                              "e"
                            ))[0] +
                            "e" +
                            (+i[1] - n)
                          );
                        }
                        return t(e);
                      };
                    }
                    var Or =
                      fn && 1 / Gt(new fn([, -0]))[1] == 1 / 0
                        ? function (e) {
                            return new fn(e);
                          }
                        : Zs;
                    function Br(e) {
                      return function (t) {
                        var n = ta(t);
                        return n == m
                          ? Ut(t)
                          : n == x
                          ? Ht(t)
                          : (function (e, t) {
                              return pt(t, function (t) {
                                return [t, e[t]];
                              });
                            })(t, e(t));
                      };
                    }
                    function Dr(e, t, i, r, s, l, u, c) {
                      var h = 2 & t;
                      if (!h && "function" != typeof e) throw new ge(a);
                      var d = r ? r.length : 0;
                      if (
                        (d || ((t &= -97), (r = s = void 0)),
                        (u = void 0 === u ? u : an(ns(u), 0)),
                        (c = void 0 === c ? c : ns(c)),
                        (d -= s ? s.length : 0),
                        64 & t)
                      ) {
                        var p = r,
                          f = s;
                        r = s = void 0;
                      }
                      var m = h ? void 0 : Yr(e),
                        v = [e, t, i, r, s, p, f, l, u, c];
                      if (
                        (m &&
                          (function (e, t) {
                            var n = e[1],
                              i = t[1],
                              r = n | i,
                              a = r < 131,
                              s =
                                (128 == i && 8 == n) ||
                                (128 == i && 256 == n && e[7].length <= t[8]) ||
                                (384 == i && t[7].length <= t[8] && 8 == n);
                            if (!a && !s) return e;
                            1 & i && ((e[2] = t[2]), (r |= 1 & n ? 0 : 4));
                            var l = t[3];
                            if (l) {
                              var u = e[3];
                              (e[3] = u ? fr(u, l, t[4]) : l),
                                (e[4] = u ? jt(e[3], o) : t[4]);
                            }
                            (l = t[5]) &&
                              ((u = e[5]),
                              (e[5] = u ? mr(u, l, t[6]) : l),
                              (e[6] = u ? jt(e[5], o) : t[6])),
                              (l = t[7]) && (e[7] = l),
                              128 & i &&
                                (e[8] = null == e[8] ? t[8] : on(e[8], t[8])),
                              null == e[9] && (e[9] = t[9]),
                              (e[0] = t[0]),
                              (e[1] = r);
                          })(v, m),
                        (e = v[0]),
                        (t = v[1]),
                        (i = v[2]),
                        (r = v[3]),
                        (s = v[4]),
                        !(c = v[9] =
                          void 0 === v[9]
                            ? h
                              ? 0
                              : e.length
                            : an(v[9] - d, 0)) &&
                          24 & t &&
                          (t &= -25),
                        t && 1 != t)
                      )
                        g =
                          8 == t || 16 == t
                            ? (function (e, t, i) {
                                var r = Er(e);
                                return function a() {
                                  for (
                                    var o = arguments.length,
                                      s = n(o),
                                      l = o,
                                      u = Xr(a);
                                    l--;

                                  )
                                    s[l] = arguments[l];
                                  var c =
                                    o < 3 && s[0] !== u && s[o - 1] !== u
                                      ? []
                                      : jt(s, u);
                                  if ((o -= c.length) < i)
                                    return Fr(
                                      e,
                                      t,
                                      Tr,
                                      a.placeholder,
                                      void 0,
                                      s,
                                      c,
                                      void 0,
                                      void 0,
                                      i - o
                                    );
                                  var h =
                                    this && this !== qe && this instanceof a
                                      ? r
                                      : e;
                                  return at(h, this, s);
                                };
                              })(e, t, c)
                            : (32 != t && 33 != t) || s.length
                            ? Tr.apply(void 0, v)
                            : (function (e, t, i, r) {
                                var a = 1 & t,
                                  o = Er(e);
                                return function t() {
                                  for (
                                    var s = -1,
                                      l = arguments.length,
                                      u = -1,
                                      c = r.length,
                                      h = n(c + l),
                                      d =
                                        this && this !== qe && this instanceof t
                                          ? o
                                          : e;
                                    ++u < c;

                                  )
                                    h[u] = r[u];
                                  for (; l--; ) h[u++] = arguments[++s];
                                  return at(d, a ? i : this, h);
                                };
                              })(e, t, i, r);
                      else
                        var g = (function (e, t, n) {
                          var i = 1 & t,
                            r = Er(e);
                          return function t() {
                            var a =
                              this && this !== qe && this instanceof t ? r : e;
                            return a.apply(i ? n : this, arguments);
                          };
                        })(e, t, i);
                      return ba((m ? zi : ga)(g, v), e, t);
                    }
                    function Vr(e, t, n, i) {
                      return void 0 === e || (Co(e, be[n]) && !Se.call(i, n))
                        ? t
                        : e;
                    }
                    function Ur(e, t, n, i, r, a) {
                      return (
                        jo(e) &&
                          jo(t) &&
                          (a.set(t, e), ki(e, t, void 0, Ur, a), a.delete(t)),
                        e
                      );
                    }
                    function zr(e) {
                      return Yo(e) ? void 0 : e;
                    }
                    function jr(e, t, n, i, r, a) {
                      var o = 1 & n,
                        s = e.length,
                        l = t.length;
                      if (s != l && !(o && l > s)) return !1;
                      var u = a.get(e);
                      if (u && a.get(t)) return u == t;
                      var c = -1,
                        h = !0,
                        d = 2 & n ? new Nn() : void 0;
                      for (a.set(e, t), a.set(t, e); ++c < s; ) {
                        var p = e[c],
                          f = t[c];
                        if (i)
                          var m = o ? i(f, p, c, t, e, a) : i(p, f, c, e, t, a);
                        if (void 0 !== m) {
                          if (m) continue;
                          h = !1;
                          break;
                        }
                        if (d) {
                          if (
                            !gt(t, function (e, t) {
                              if (!Rt(d, t) && (p === e || r(p, e, n, i, a)))
                                return d.push(t);
                            })
                          ) {
                            h = !1;
                            break;
                          }
                        } else if (p !== f && !r(p, f, n, i, a)) {
                          h = !1;
                          break;
                        }
                      }
                      return a.delete(e), a.delete(t), h;
                    }
                    function Gr(e) {
                      return xa(pa(e, void 0, Ra), e + "");
                    }
                    function Hr(e) {
                      return hi(e, xs, $r);
                    }
                    function Wr(e) {
                      return hi(e, bs, ea);
                    }
                    var Yr = gn
                      ? function (e) {
                          return gn.get(e);
                        }
                      : Zs;
                    function qr(e) {
                      for (
                        var t = e.name + "",
                          n = yn[t],
                          i = Se.call(yn, t) ? n.length : 0;
                        i--;

                      ) {
                        var r = n[i],
                          a = r.func;
                        if (null == a || a == e) return r.name;
                      }
                      return t;
                    }
                    function Xr(e) {
                      return (Se.call(Tn, "placeholder") ? Tn : e).placeholder;
                    }
                    function Qr() {
                      var e = Tn.iteratee || Ys;
                      return (
                        (e = e === Ys ? wi : e),
                        arguments.length ? e(arguments[0], arguments[1]) : e
                      );
                    }
                    function Zr(e, t) {
                      var n = e.__data__;
                      return (function (e) {
                        var t = typeof e;
                        return "string" == t ||
                          "number" == t ||
                          "symbol" == t ||
                          "boolean" == t
                          ? "__proto__" !== e
                          : null === e;
                      })(t)
                        ? n["string" == typeof t ? "string" : "hash"]
                        : n.map;
                    }
                    function Jr(e) {
                      for (var t = xs(e), n = t.length; n--; ) {
                        var i = t[n],
                          r = e[i];
                        t[n] = [i, r, ha(r)];
                      }
                      return t;
                    }
                    function Kr(e, t) {
                      var n = (function (e, t) {
                        return null == e ? void 0 : e[t];
                      })(e, t);
                      return _i(n) ? n : void 0;
                    }
                    var $r = $t
                        ? function (e) {
                            return null == e
                              ? []
                              : ((e = fe(e)),
                                ct($t(e), function (t) {
                                  return Ye.call(e, t);
                                }));
                          }
                        : il,
                      ea = $t
                        ? function (e) {
                            for (var t = []; e; ) ft(t, $r(e)), (e = je(e));
                            return t;
                          }
                        : il,
                      ta = di;
                    function na(e, t, n) {
                      for (
                        var i = -1, r = (t = or(t, e)).length, a = !1;
                        ++i < r;

                      ) {
                        var o = Ea(t[i]);
                        if (!(a = null != e && n(e, o))) break;
                        e = e[o];
                      }
                      return a || ++i != r
                        ? a
                        : !!(r = null == e ? 0 : e.length) &&
                            zo(r) &&
                            aa(o, r) &&
                            (Ro(e) || Lo(e));
                    }
                    function ia(e) {
                      return "function" != typeof e.constructor || ca(e)
                        ? {}
                        : Cn(je(e));
                    }
                    function ra(e) {
                      return Ro(e) || Lo(e) || !!(Qe && e && e[Qe]);
                    }
                    function aa(e, t) {
                      var n = typeof e;
                      return (
                        !!(t = null == t ? 9007199254740991 : t) &&
                        ("number" == n || ("symbol" != n && le.test(e))) &&
                        e > -1 &&
                        e % 1 == 0 &&
                        e < t
                      );
                    }
                    function oa(e, t, n) {
                      if (!jo(n)) return !1;
                      var i = typeof t;
                      return (
                        !!("number" == i
                          ? Fo(n) && aa(t, n.length)
                          : "string" == i && t in n) && Co(n[t], e)
                      );
                    }
                    function sa(e, t) {
                      if (Ro(e)) return !1;
                      var n = typeof e;
                      return (
                        !(
                          "number" != n &&
                          "symbol" != n &&
                          "boolean" != n &&
                          null != e &&
                          !Zo(e)
                        ) ||
                        H.test(e) ||
                        !G.test(e) ||
                        (null != t && e in fe(t))
                      );
                    }
                    function la(e) {
                      var t = qr(e),
                        n = Tn[t];
                      if ("function" != typeof n || !(t in Ln.prototype))
                        return !1;
                      if (e === n) return !0;
                      var i = Yr(n);
                      return !!i && e === i[0];
                    }
                    ((hn && ta(new hn(new ArrayBuffer(1))) != E) ||
                      (dn && ta(new dn()) != m) ||
                      (pn && "[object Promise]" != ta(pn.resolve())) ||
                      (fn && ta(new fn()) != x) ||
                      (mn && ta(new mn()) != w)) &&
                      (ta = function (e) {
                        var t = di(e),
                          n = t == g ? e.constructor : void 0,
                          i = n ? Ma(n) : "";
                        if (i)
                          switch (i) {
                            case xn:
                              return E;
                            case bn:
                              return m;
                            case _n:
                              return "[object Promise]";
                            case wn:
                              return x;
                            case Sn:
                              return w;
                          }
                        return t;
                      });
                    var ua = _e ? Vo : rl;
                    function ca(e) {
                      var t = e && e.constructor;
                      return (
                        e === (("function" == typeof t && t.prototype) || be)
                      );
                    }
                    function ha(e) {
                      return e === e && !jo(e);
                    }
                    function da(e, t) {
                      return function (n) {
                        return (
                          null != n &&
                          n[e] === t &&
                          (void 0 !== t || e in fe(n))
                        );
                      };
                    }
                    function pa(e, t, i) {
                      return (
                        (t = an(void 0 === t ? e.length - 1 : t, 0)),
                        function () {
                          for (
                            var r = arguments,
                              a = -1,
                              o = an(r.length - t, 0),
                              s = n(o);
                            ++a < o;

                          )
                            s[a] = r[t + a];
                          a = -1;
                          for (var l = n(t + 1); ++a < t; ) l[a] = r[a];
                          return (l[t] = i(s)), at(e, this, l);
                        }
                      );
                    }
                    function fa(e, t) {
                      return t.length < 2 ? e : ci(e, Hi(t, 0, -1));
                    }
                    function ma(e, t) {
                      for (
                        var n = e.length, i = on(t.length, n), r = vr(e);
                        i--;

                      ) {
                        var a = t[i];
                        e[i] = aa(a, n) ? r[a] : void 0;
                      }
                      return e;
                    }
                    function va(e, t) {
                      if (
                        ("constructor" !== t || "function" !== typeof e[t]) &&
                        "__proto__" != t
                      )
                        return e[t];
                    }
                    var ga = _a(zi),
                      ya =
                        Zt ||
                        function (e, t) {
                          return qe.setTimeout(e, t);
                        },
                      xa = _a(ji);
                    function ba(e, t, n) {
                      var i = t + "";
                      return xa(
                        e,
                        (function (e, t) {
                          var n = t.length;
                          if (!n) return e;
                          var i = n - 1;
                          return (
                            (t[i] = (n > 1 ? "& " : "") + t[i]),
                            (t = t.join(n > 2 ? ", " : " ")),
                            e.replace(J, "{\n/* [wrapped with " + t + "] */\n")
                          );
                        })(
                          i,
                          (function (e, t) {
                            return (
                              st(s, function (n) {
                                var i = "_." + n[0];
                                t & n[1] && !ht(e, i) && e.push(i);
                              }),
                              e.sort()
                            );
                          })(
                            (function (e) {
                              var t = e.match(K);
                              return t ? t[1].split($) : [];
                            })(i),
                            n
                          )
                        )
                      );
                    }
                    function _a(e) {
                      var t = 0,
                        n = 0;
                      return function () {
                        var i = sn(),
                          r = 16 - (i - n);
                        if (((n = i), r > 0)) {
                          if (++t >= 800) return arguments[0];
                        } else t = 0;
                        return e.apply(void 0, arguments);
                      };
                    }
                    function wa(e, t) {
                      var n = -1,
                        i = e.length,
                        r = i - 1;
                      for (t = void 0 === t ? i : t; ++n < t; ) {
                        var a = Ni(n, r),
                          o = e[a];
                        (e[a] = e[n]), (e[n] = o);
                      }
                      return (e.length = t), e;
                    }
                    var Sa = (function (e) {
                      var t = wo(e, function (e) {
                          return 500 === n.size && n.clear(), e;
                        }),
                        n = t.cache;
                      return t;
                    })(function (e) {
                      var t = [];
                      return (
                        46 === e.charCodeAt(0) && t.push(""),
                        e.replace(W, function (e, n, i, r) {
                          t.push(i ? r.replace(te, "$1") : n || e);
                        }),
                        t
                      );
                    });
                    function Ea(e) {
                      if ("string" == typeof e || Zo(e)) return e;
                      var t = e + "";
                      return "0" == t && 1 / e == -1 / 0 ? "-0" : t;
                    }
                    function Ma(e) {
                      if (null != e) {
                        try {
                          return we.call(e);
                        } catch (t) {}
                        try {
                          return e + "";
                        } catch (t) {}
                      }
                      return "";
                    }
                    function Aa(e) {
                      if (e instanceof Ln) return e.clone();
                      var t = new Pn(e.__wrapped__, e.__chain__);
                      return (
                        (t.__actions__ = vr(e.__actions__)),
                        (t.__index__ = e.__index__),
                        (t.__values__ = e.__values__),
                        t
                      );
                    }
                    var Ta = Bi(function (e, t) {
                        return No(e) ? Kn(e, ri(t, 1, No, !0)) : [];
                      }),
                      Ca = Bi(function (e, t) {
                        var n = Ba(t);
                        return (
                          No(n) && (n = void 0),
                          No(e) ? Kn(e, ri(t, 1, No, !0), Qr(n, 2)) : []
                        );
                      }),
                      ka = Bi(function (e, t) {
                        var n = Ba(t);
                        return (
                          No(n) && (n = void 0),
                          No(e) ? Kn(e, ri(t, 1, No, !0), void 0, n) : []
                        );
                      });
                    function Pa(e, t, n) {
                      var i = null == e ? 0 : e.length;
                      if (!i) return -1;
                      var r = null == n ? 0 : ns(n);
                      return r < 0 && (r = an(i + r, 0)), bt(e, Qr(t, 3), r);
                    }
                    function La(e, t, n) {
                      var i = null == e ? 0 : e.length;
                      if (!i) return -1;
                      var r = i - 1;
                      return (
                        void 0 !== n &&
                          ((r = ns(n)),
                          (r = n < 0 ? an(i + r, 0) : on(r, i - 1))),
                        bt(e, Qr(t, 3), r, !0)
                      );
                    }
                    function Ra(e) {
                      return null != e && e.length ? ri(e, 1) : [];
                    }
                    function Ia(e) {
                      return e && e.length ? e[0] : void 0;
                    }
                    var Fa = Bi(function (e) {
                        var t = pt(e, rr);
                        return t.length && t[0] === e[0] ? vi(t) : [];
                      }),
                      Na = Bi(function (e) {
                        var t = Ba(e),
                          n = pt(e, rr);
                        return (
                          t === Ba(n) ? (t = void 0) : n.pop(),
                          n.length && n[0] === e[0] ? vi(n, Qr(t, 2)) : []
                        );
                      }),
                      Oa = Bi(function (e) {
                        var t = Ba(e),
                          n = pt(e, rr);
                        return (
                          (t = "function" == typeof t ? t : void 0) && n.pop(),
                          n.length && n[0] === e[0] ? vi(n, void 0, t) : []
                        );
                      });
                    function Ba(e) {
                      var t = null == e ? 0 : e.length;
                      return t ? e[t - 1] : void 0;
                    }
                    var Da = Bi(Va);
                    function Va(e, t) {
                      return e && e.length && t && t.length ? Ii(e, t) : e;
                    }
                    var Ua = Gr(function (e, t) {
                      var n = null == e ? 0 : e.length,
                        i = qn(e, t);
                      return (
                        Fi(
                          e,
                          pt(t, function (e) {
                            return aa(e, n) ? +e : e;
                          }).sort(pr)
                        ),
                        i
                      );
                    });
                    function za(e) {
                      return null == e ? e : cn.call(e);
                    }
                    var ja = Bi(function (e) {
                        return Ji(ri(e, 1, No, !0));
                      }),
                      Ga = Bi(function (e) {
                        var t = Ba(e);
                        return (
                          No(t) && (t = void 0), Ji(ri(e, 1, No, !0), Qr(t, 2))
                        );
                      }),
                      Ha = Bi(function (e) {
                        var t = Ba(e);
                        return (
                          (t = "function" == typeof t ? t : void 0),
                          Ji(ri(e, 1, No, !0), void 0, t)
                        );
                      });
                    function Wa(e) {
                      if (!e || !e.length) return [];
                      var t = 0;
                      return (
                        (e = ct(e, function (e) {
                          if (No(e)) return (t = an(e.length, t)), !0;
                        })),
                        kt(t, function (t) {
                          return pt(e, Mt(t));
                        })
                      );
                    }
                    function Ya(e, t) {
                      if (!e || !e.length) return [];
                      var n = Wa(e);
                      return null == t
                        ? n
                        : pt(n, function (e) {
                            return at(t, void 0, e);
                          });
                    }
                    var qa = Bi(function (e, t) {
                        return No(e) ? Kn(e, t) : [];
                      }),
                      Xa = Bi(function (e) {
                        return nr(ct(e, No));
                      }),
                      Qa = Bi(function (e) {
                        var t = Ba(e);
                        return No(t) && (t = void 0), nr(ct(e, No), Qr(t, 2));
                      }),
                      Za = Bi(function (e) {
                        var t = Ba(e);
                        return (
                          (t = "function" == typeof t ? t : void 0),
                          nr(ct(e, No), void 0, t)
                        );
                      }),
                      Ja = Bi(Wa),
                      Ka = Bi(function (e) {
                        var t = e.length,
                          n = t > 1 ? e[t - 1] : void 0;
                        return (
                          (n = "function" == typeof n ? (e.pop(), n) : void 0),
                          Ya(e, n)
                        );
                      });
                    function $a(e) {
                      var t = Tn(e);
                      return (t.__chain__ = !0), t;
                    }
                    function eo(e, t) {
                      return t(e);
                    }
                    var to = Gr(function (e) {
                        var t = e.length,
                          n = t ? e[0] : 0,
                          i = this.__wrapped__,
                          r = function (t) {
                            return qn(t, e);
                          };
                        return !(t > 1 || this.__actions__.length) &&
                          i instanceof Ln &&
                          aa(n)
                          ? ((i = i.slice(
                              n,
                              +n + (t ? 1 : 0)
                            )).__actions__.push({
                              func: eo,
                              args: [r],
                              thisArg: void 0,
                            }),
                            new Pn(i, this.__chain__).thru(function (e) {
                              return t && !e.length && e.push(void 0), e;
                            }))
                          : this.thru(r);
                      }),
                      no = yr(function (e, t, n) {
                        Se.call(e, n) ? ++e[n] : Yn(e, n, 1);
                      }),
                      io = Mr(Pa),
                      ro = Mr(La);
                    function ao(e, t) {
                      return (Ro(e) ? st : $n)(e, Qr(t, 3));
                    }
                    function oo(e, t) {
                      return (Ro(e) ? lt : ei)(e, Qr(t, 3));
                    }
                    var so = yr(function (e, t, n) {
                        Se.call(e, n) ? e[n].push(t) : Yn(e, n, [t]);
                      }),
                      lo = Bi(function (e, t, i) {
                        var r = -1,
                          a = "function" == typeof t,
                          o = Fo(e) ? n(e.length) : [];
                        return (
                          $n(e, function (e) {
                            o[++r] = a ? at(t, e, i) : gi(e, t, i);
                          }),
                          o
                        );
                      }),
                      uo = yr(function (e, t, n) {
                        Yn(e, n, t);
                      });
                    function co(e, t) {
                      return (Ro(e) ? pt : Ai)(e, Qr(t, 3));
                    }
                    var ho = yr(
                        function (e, t, n) {
                          e[n ? 0 : 1].push(t);
                        },
                        function () {
                          return [[], []];
                        }
                      ),
                      po = Bi(function (e, t) {
                        if (null == e) return [];
                        var n = t.length;
                        return (
                          n > 1 && oa(e, t[0], t[1])
                            ? (t = [])
                            : n > 2 && oa(t[0], t[1], t[2]) && (t = [t[0]]),
                          Li(e, ri(t, 1), [])
                        );
                      }),
                      fo =
                        Qt ||
                        function () {
                          return qe.Date.now();
                        };
                    function mo(e, t, n) {
                      return (
                        (t = n ? void 0 : t),
                        Dr(
                          e,
                          128,
                          void 0,
                          void 0,
                          void 0,
                          void 0,
                          (t = e && null == t ? e.length : t)
                        )
                      );
                    }
                    function vo(e, t) {
                      var n;
                      if ("function" != typeof t) throw new ge(a);
                      return (
                        (e = ns(e)),
                        function () {
                          return (
                            --e > 0 && (n = t.apply(this, arguments)),
                            e <= 1 && (t = void 0),
                            n
                          );
                        }
                      );
                    }
                    var go = Bi(function (e, t, n) {
                        var i = 1;
                        if (n.length) {
                          var r = jt(n, Xr(go));
                          i |= 32;
                        }
                        return Dr(e, i, t, n, r);
                      }),
                      yo = Bi(function (e, t, n) {
                        var i = 3;
                        if (n.length) {
                          var r = jt(n, Xr(yo));
                          i |= 32;
                        }
                        return Dr(t, i, e, n, r);
                      });
                    function xo(e, t, n) {
                      var i,
                        r,
                        o,
                        s,
                        l,
                        u,
                        c = 0,
                        h = !1,
                        d = !1,
                        p = !0;
                      if ("function" != typeof e) throw new ge(a);
                      function f(t) {
                        var n = i,
                          a = r;
                        return (i = r = void 0), (c = t), (s = e.apply(a, n));
                      }
                      function m(e) {
                        return (c = e), (l = ya(g, t)), h ? f(e) : s;
                      }
                      function v(e) {
                        var n = e - u;
                        return (
                          void 0 === u || n >= t || n < 0 || (d && e - c >= o)
                        );
                      }
                      function g() {
                        var e = fo();
                        if (v(e)) return y(e);
                        l = ya(
                          g,
                          (function (e) {
                            var n = t - (e - u);
                            return d ? on(n, o - (e - c)) : n;
                          })(e)
                        );
                      }
                      function y(e) {
                        return (
                          (l = void 0), p && i ? f(e) : ((i = r = void 0), s)
                        );
                      }
                      function x() {
                        var e = fo(),
                          n = v(e);
                        if (((i = arguments), (r = this), (u = e), n)) {
                          if (void 0 === l) return m(u);
                          if (d) return ur(l), (l = ya(g, t)), f(u);
                        }
                        return void 0 === l && (l = ya(g, t)), s;
                      }
                      return (
                        (t = rs(t) || 0),
                        jo(n) &&
                          ((h = !!n.leading),
                          (o = (d = "maxWait" in n)
                            ? an(rs(n.maxWait) || 0, t)
                            : o),
                          (p = "trailing" in n ? !!n.trailing : p)),
                        (x.cancel = function () {
                          void 0 !== l && ur(l),
                            (c = 0),
                            (i = u = r = l = void 0);
                        }),
                        (x.flush = function () {
                          return void 0 === l ? s : y(fo());
                        }),
                        x
                      );
                    }
                    var bo = Bi(function (e, t) {
                        return Jn(e, 1, t);
                      }),
                      _o = Bi(function (e, t, n) {
                        return Jn(e, rs(t) || 0, n);
                      });
                    function wo(e, t) {
                      if (
                        "function" != typeof e ||
                        (null != t && "function" != typeof t)
                      )
                        throw new ge(a);
                      var n = function n() {
                        var i = arguments,
                          r = t ? t.apply(this, i) : i[0],
                          a = n.cache;
                        if (a.has(r)) return a.get(r);
                        var o = e.apply(this, i);
                        return (n.cache = a.set(r, o) || a), o;
                      };
                      return (n.cache = new (wo.Cache || Fn)()), n;
                    }
                    function So(e) {
                      if ("function" != typeof e) throw new ge(a);
                      return function () {
                        var t = arguments;
                        switch (t.length) {
                          case 0:
                            return !e.call(this);
                          case 1:
                            return !e.call(this, t[0]);
                          case 2:
                            return !e.call(this, t[0], t[1]);
                          case 3:
                            return !e.call(this, t[0], t[1], t[2]);
                        }
                        return !e.apply(this, t);
                      };
                    }
                    wo.Cache = Fn;
                    var Eo = sr(function (e, t) {
                        var n = (t =
                          1 == t.length && Ro(t[0])
                            ? pt(t[0], Pt(Qr()))
                            : pt(ri(t, 1), Pt(Qr()))).length;
                        return Bi(function (i) {
                          for (var r = -1, a = on(i.length, n); ++r < a; )
                            i[r] = t[r].call(this, i[r]);
                          return at(e, this, i);
                        });
                      }),
                      Mo = Bi(function (e, t) {
                        return Dr(e, 32, void 0, t, jt(t, Xr(Mo)));
                      }),
                      Ao = Bi(function (e, t) {
                        return Dr(e, 64, void 0, t, jt(t, Xr(Ao)));
                      }),
                      To = Gr(function (e, t) {
                        return Dr(e, 256, void 0, void 0, void 0, t);
                      });
                    function Co(e, t) {
                      return e === t || (e !== e && t !== t);
                    }
                    var ko = Ir(pi),
                      Po = Ir(function (e, t) {
                        return e >= t;
                      }),
                      Lo = yi(
                        (function () {
                          return arguments;
                        })()
                      )
                        ? yi
                        : function (e) {
                            return (
                              Go(e) &&
                              Se.call(e, "callee") &&
                              !Ye.call(e, "callee")
                            );
                          },
                      Ro = n.isArray,
                      Io = $e
                        ? Pt($e)
                        : function (e) {
                            return Go(e) && di(e) == S;
                          };
                    function Fo(e) {
                      return null != e && zo(e.length) && !Vo(e);
                    }
                    function No(e) {
                      return Go(e) && Fo(e);
                    }
                    var Oo = en || rl,
                      Bo = et
                        ? Pt(et)
                        : function (e) {
                            return Go(e) && di(e) == h;
                          };
                    function Do(e) {
                      if (!Go(e)) return !1;
                      var t = di(e);
                      return (
                        t == d ||
                        "[object DOMException]" == t ||
                        ("string" == typeof e.message &&
                          "string" == typeof e.name &&
                          !Yo(e))
                      );
                    }
                    function Vo(e) {
                      if (!jo(e)) return !1;
                      var t = di(e);
                      return (
                        t == p ||
                        t == f ||
                        "[object AsyncFunction]" == t ||
                        "[object Proxy]" == t
                      );
                    }
                    function Uo(e) {
                      return "number" == typeof e && e == ns(e);
                    }
                    function zo(e) {
                      return (
                        "number" == typeof e &&
                        e > -1 &&
                        e % 1 == 0 &&
                        e <= 9007199254740991
                      );
                    }
                    function jo(e) {
                      var t = typeof e;
                      return null != e && ("object" == t || "function" == t);
                    }
                    function Go(e) {
                      return null != e && "object" == typeof e;
                    }
                    var Ho = tt
                      ? Pt(tt)
                      : function (e) {
                          return Go(e) && ta(e) == m;
                        };
                    function Wo(e) {
                      return "number" == typeof e || (Go(e) && di(e) == v);
                    }
                    function Yo(e) {
                      if (!Go(e) || di(e) != g) return !1;
                      var t = je(e);
                      if (null === t) return !0;
                      var n = Se.call(t, "constructor") && t.constructor;
                      return (
                        "function" == typeof n &&
                        n instanceof n &&
                        we.call(n) == Te
                      );
                    }
                    var qo = nt
                        ? Pt(nt)
                        : function (e) {
                            return Go(e) && di(e) == y;
                          },
                      Xo = it
                        ? Pt(it)
                        : function (e) {
                            return Go(e) && ta(e) == x;
                          };
                    function Qo(e) {
                      return (
                        "string" == typeof e || (!Ro(e) && Go(e) && di(e) == b)
                      );
                    }
                    function Zo(e) {
                      return "symbol" == typeof e || (Go(e) && di(e) == _);
                    }
                    var Jo = rt
                        ? Pt(rt)
                        : function (e) {
                            return Go(e) && zo(e.length) && !!Ue[di(e)];
                          },
                      Ko = Ir(Mi),
                      $o = Ir(function (e, t) {
                        return e <= t;
                      });
                    function es(e) {
                      if (!e) return [];
                      if (Fo(e)) return Qo(e) ? Yt(e) : vr(e);
                      if (Je && e[Je])
                        return (function (e) {
                          for (var t, n = []; !(t = e.next()).done; )
                            n.push(t.value);
                          return n;
                        })(e[Je]());
                      var t = ta(e);
                      return (t == m ? Ut : t == x ? Gt : Cs)(e);
                    }
                    function ts(e) {
                      return e
                        ? (e = rs(e)) === 1 / 0 || e === -1 / 0
                          ? 17976931348623157e292 * (e < 0 ? -1 : 1)
                          : e === e
                          ? e
                          : 0
                        : 0 === e
                        ? e
                        : 0;
                    }
                    function ns(e) {
                      var t = ts(e),
                        n = t % 1;
                      return t === t ? (n ? t - n : t) : 0;
                    }
                    function is(e) {
                      return e ? Xn(ns(e), 0, 4294967295) : 0;
                    }
                    function rs(e) {
                      if ("number" == typeof e) return e;
                      if (Zo(e)) return NaN;
                      if (jo(e)) {
                        var t =
                          "function" == typeof e.valueOf ? e.valueOf() : e;
                        e = jo(t) ? t + "" : t;
                      }
                      if ("string" != typeof e) return 0 === e ? e : +e;
                      e = e.replace(X, "");
                      var n = ae.test(e);
                      return n || se.test(e)
                        ? He(e.slice(2), n ? 2 : 8)
                        : re.test(e)
                        ? NaN
                        : +e;
                    }
                    function as(e) {
                      return gr(e, bs(e));
                    }
                    function os(e) {
                      return null == e ? "" : Zi(e);
                    }
                    var ss = xr(function (e, t) {
                        if (ca(t) || Fo(t)) gr(t, xs(t), e);
                        else for (var n in t) Se.call(t, n) && jn(e, n, t[n]);
                      }),
                      ls = xr(function (e, t) {
                        gr(t, bs(t), e);
                      }),
                      us = xr(function (e, t, n, i) {
                        gr(t, bs(t), e, i);
                      }),
                      cs = xr(function (e, t, n, i) {
                        gr(t, xs(t), e, i);
                      }),
                      hs = Gr(qn),
                      ds = Bi(function (e, t) {
                        e = fe(e);
                        var n = -1,
                          i = t.length,
                          r = i > 2 ? t[2] : void 0;
                        for (r && oa(t[0], t[1], r) && (i = 1); ++n < i; )
                          for (
                            var a = t[n], o = bs(a), s = -1, l = o.length;
                            ++s < l;

                          ) {
                            var u = o[s],
                              c = e[u];
                            (void 0 === c ||
                              (Co(c, be[u]) && !Se.call(e, u))) &&
                              (e[u] = a[u]);
                          }
                        return e;
                      }),
                      ps = Bi(function (e) {
                        return e.push(void 0, Ur), at(ws, void 0, e);
                      });
                    function fs(e, t, n) {
                      var i = null == e ? void 0 : ci(e, t);
                      return void 0 === i ? n : i;
                    }
                    function ms(e, t) {
                      return null != e && na(e, t, mi);
                    }
                    var vs = Cr(function (e, t, n) {
                        null != t &&
                          "function" != typeof t.toString &&
                          (t = Ae.call(t)),
                          (e[t] = n);
                      }, js(Ws)),
                      gs = Cr(function (e, t, n) {
                        null != t &&
                          "function" != typeof t.toString &&
                          (t = Ae.call(t)),
                          Se.call(e, t) ? e[t].push(n) : (e[t] = [n]);
                      }, Qr),
                      ys = Bi(gi);
                    function xs(e) {
                      return Fo(e) ? Bn(e) : Si(e);
                    }
                    function bs(e) {
                      return Fo(e) ? Bn(e, !0) : Ei(e);
                    }
                    var _s = xr(function (e, t, n) {
                        ki(e, t, n);
                      }),
                      ws = xr(function (e, t, n, i) {
                        ki(e, t, n, i);
                      }),
                      Ss = Gr(function (e, t) {
                        var n = {};
                        if (null == e) return n;
                        var i = !1;
                        (t = pt(t, function (t) {
                          return (t = or(t, e)), i || (i = t.length > 1), t;
                        })),
                          gr(e, Wr(e), n),
                          i && (n = Qn(n, 7, zr));
                        for (var r = t.length; r--; ) Ki(n, t[r]);
                        return n;
                      }),
                      Es = Gr(function (e, t) {
                        return null == e
                          ? {}
                          : (function (e, t) {
                              return Ri(e, t, function (t, n) {
                                return ms(e, n);
                              });
                            })(e, t);
                      });
                    function Ms(e, t) {
                      if (null == e) return {};
                      var n = pt(Wr(e), function (e) {
                        return [e];
                      });
                      return (
                        (t = Qr(t)),
                        Ri(e, n, function (e, n) {
                          return t(e, n[0]);
                        })
                      );
                    }
                    var As = Br(xs),
                      Ts = Br(bs);
                    function Cs(e) {
                      return null == e ? [] : Lt(e, xs(e));
                    }
                    var ks = Sr(function (e, t, n) {
                      return (t = t.toLowerCase()), e + (n ? Ps(t) : t);
                    });
                    function Ps(e) {
                      return Ds(os(e).toLowerCase());
                    }
                    function Ls(e) {
                      return (e = os(e)) && e.replace(ue, Ot).replace(Ie, "");
                    }
                    var Rs = Sr(function (e, t, n) {
                        return e + (n ? "-" : "") + t.toLowerCase();
                      }),
                      Is = Sr(function (e, t, n) {
                        return e + (n ? " " : "") + t.toLowerCase();
                      }),
                      Fs = wr("toLowerCase"),
                      Ns = Sr(function (e, t, n) {
                        return e + (n ? "_" : "") + t.toLowerCase();
                      }),
                      Os = Sr(function (e, t, n) {
                        return e + (n ? " " : "") + Ds(t);
                      }),
                      Bs = Sr(function (e, t, n) {
                        return e + (n ? " " : "") + t.toUpperCase();
                      }),
                      Ds = wr("toUpperCase");
                    function Vs(e, t, n) {
                      return (
                        (e = os(e)),
                        void 0 === (t = n ? void 0 : t)
                          ? (function (e) {
                              return Be.test(e);
                            })(e)
                            ? (function (e) {
                                return e.match(Ne) || [];
                              })(e)
                            : (function (e) {
                                return e.match(ee) || [];
                              })(e)
                          : e.match(t) || []
                      );
                    }
                    var Us = Bi(function (e, t) {
                        try {
                          return at(e, void 0, t);
                        } catch (n) {
                          return Do(n) ? n : new r(n);
                        }
                      }),
                      zs = Gr(function (e, t) {
                        return (
                          st(t, function (t) {
                            (t = Ea(t)), Yn(e, t, go(e[t], e));
                          }),
                          e
                        );
                      });
                    function js(e) {
                      return function () {
                        return e;
                      };
                    }
                    var Gs = Ar(),
                      Hs = Ar(!0);
                    function Ws(e) {
                      return e;
                    }
                    function Ys(e) {
                      return wi("function" == typeof e ? e : Qn(e, 1));
                    }
                    var qs = Bi(function (e, t) {
                        return function (n) {
                          return gi(n, e, t);
                        };
                      }),
                      Xs = Bi(function (e, t) {
                        return function (n) {
                          return gi(e, n, t);
                        };
                      });
                    function Qs(e, t, n) {
                      var i = xs(t),
                        r = ui(t, i);
                      null != n ||
                        (jo(t) && (r.length || !i.length)) ||
                        ((n = t), (t = e), (e = this), (r = ui(t, xs(t))));
                      var a = !(jo(n) && "chain" in n) || !!n.chain,
                        o = Vo(e);
                      return (
                        st(r, function (n) {
                          var i = t[n];
                          (e[n] = i),
                            o &&
                              (e.prototype[n] = function () {
                                var t = this.__chain__;
                                if (a || t) {
                                  var n = e(this.__wrapped__),
                                    r = (n.__actions__ = vr(this.__actions__));
                                  return (
                                    r.push({
                                      func: i,
                                      args: arguments,
                                      thisArg: e,
                                    }),
                                    (n.__chain__ = t),
                                    n
                                  );
                                }
                                return i.apply(
                                  e,
                                  ft([this.value()], arguments)
                                );
                              });
                        }),
                        e
                      );
                    }
                    function Zs() {}
                    var Js = Pr(pt),
                      Ks = Pr(ut),
                      $s = Pr(gt);
                    function el(e) {
                      return sa(e)
                        ? Mt(Ea(e))
                        : (function (e) {
                            return function (t) {
                              return ci(t, e);
                            };
                          })(e);
                    }
                    var tl = Rr(),
                      nl = Rr(!0);
                    function il() {
                      return [];
                    }
                    function rl() {
                      return !1;
                    }
                    var al = kr(function (e, t) {
                        return e + t;
                      }, 0),
                      ol = Nr("ceil"),
                      sl = kr(function (e, t) {
                        return e / t;
                      }, 1),
                      ll = Nr("floor"),
                      ul = kr(function (e, t) {
                        return e * t;
                      }, 1),
                      cl = Nr("round"),
                      hl = kr(function (e, t) {
                        return e - t;
                      }, 0);
                    return (
                      (Tn.after = function (e, t) {
                        if ("function" != typeof t) throw new ge(a);
                        return (
                          (e = ns(e)),
                          function () {
                            if (--e < 1) return t.apply(this, arguments);
                          }
                        );
                      }),
                      (Tn.ary = mo),
                      (Tn.assign = ss),
                      (Tn.assignIn = ls),
                      (Tn.assignInWith = us),
                      (Tn.assignWith = cs),
                      (Tn.at = hs),
                      (Tn.before = vo),
                      (Tn.bind = go),
                      (Tn.bindAll = zs),
                      (Tn.bindKey = yo),
                      (Tn.castArray = function () {
                        if (!arguments.length) return [];
                        var e = arguments[0];
                        return Ro(e) ? e : [e];
                      }),
                      (Tn.chain = $a),
                      (Tn.chunk = function (e, t, i) {
                        t = (i ? oa(e, t, i) : void 0 === t) ? 1 : an(ns(t), 0);
                        var r = null == e ? 0 : e.length;
                        if (!r || t < 1) return [];
                        for (var a = 0, o = 0, s = n(Jt(r / t)); a < r; )
                          s[o++] = Hi(e, a, (a += t));
                        return s;
                      }),
                      (Tn.compact = function (e) {
                        for (
                          var t = -1,
                            n = null == e ? 0 : e.length,
                            i = 0,
                            r = [];
                          ++t < n;

                        ) {
                          var a = e[t];
                          a && (r[i++] = a);
                        }
                        return r;
                      }),
                      (Tn.concat = function () {
                        var e = arguments.length;
                        if (!e) return [];
                        for (var t = n(e - 1), i = arguments[0], r = e; r--; )
                          t[r - 1] = arguments[r];
                        return ft(Ro(i) ? vr(i) : [i], ri(t, 1));
                      }),
                      (Tn.cond = function (e) {
                        var t = null == e ? 0 : e.length,
                          n = Qr();
                        return (
                          (e = t
                            ? pt(e, function (e) {
                                if ("function" != typeof e[1]) throw new ge(a);
                                return [n(e[0]), e[1]];
                              })
                            : []),
                          Bi(function (n) {
                            for (var i = -1; ++i < t; ) {
                              var r = e[i];
                              if (at(r[0], this, n)) return at(r[1], this, n);
                            }
                          })
                        );
                      }),
                      (Tn.conforms = function (e) {
                        return (function (e) {
                          var t = xs(e);
                          return function (n) {
                            return Zn(n, e, t);
                          };
                        })(Qn(e, 1));
                      }),
                      (Tn.constant = js),
                      (Tn.countBy = no),
                      (Tn.create = function (e, t) {
                        var n = Cn(e);
                        return null == t ? n : Wn(n, t);
                      }),
                      (Tn.curry = function e(t, n, i) {
                        var r = Dr(
                          t,
                          8,
                          void 0,
                          void 0,
                          void 0,
                          void 0,
                          void 0,
                          (n = i ? void 0 : n)
                        );
                        return (r.placeholder = e.placeholder), r;
                      }),
                      (Tn.curryRight = function e(t, n, i) {
                        var r = Dr(
                          t,
                          16,
                          void 0,
                          void 0,
                          void 0,
                          void 0,
                          void 0,
                          (n = i ? void 0 : n)
                        );
                        return (r.placeholder = e.placeholder), r;
                      }),
                      (Tn.debounce = xo),
                      (Tn.defaults = ds),
                      (Tn.defaultsDeep = ps),
                      (Tn.defer = bo),
                      (Tn.delay = _o),
                      (Tn.difference = Ta),
                      (Tn.differenceBy = Ca),
                      (Tn.differenceWith = ka),
                      (Tn.drop = function (e, t, n) {
                        var i = null == e ? 0 : e.length;
                        return i
                          ? Hi(
                              e,
                              (t = n || void 0 === t ? 1 : ns(t)) < 0 ? 0 : t,
                              i
                            )
                          : [];
                      }),
                      (Tn.dropRight = function (e, t, n) {
                        var i = null == e ? 0 : e.length;
                        return i
                          ? Hi(
                              e,
                              0,
                              (t = i - (t = n || void 0 === t ? 1 : ns(t))) < 0
                                ? 0
                                : t
                            )
                          : [];
                      }),
                      (Tn.dropRightWhile = function (e, t) {
                        return e && e.length ? er(e, Qr(t, 3), !0, !0) : [];
                      }),
                      (Tn.dropWhile = function (e, t) {
                        return e && e.length ? er(e, Qr(t, 3), !0) : [];
                      }),
                      (Tn.fill = function (e, t, n, i) {
                        var r = null == e ? 0 : e.length;
                        return r
                          ? (n &&
                              "number" != typeof n &&
                              oa(e, t, n) &&
                              ((n = 0), (i = r)),
                            (function (e, t, n, i) {
                              var r = e.length;
                              for (
                                (n = ns(n)) < 0 && (n = -n > r ? 0 : r + n),
                                  (i = void 0 === i || i > r ? r : ns(i)) < 0 &&
                                    (i += r),
                                  i = n > i ? 0 : is(i);
                                n < i;

                              )
                                e[n++] = t;
                              return e;
                            })(e, t, n, i))
                          : [];
                      }),
                      (Tn.filter = function (e, t) {
                        return (Ro(e) ? ct : ii)(e, Qr(t, 3));
                      }),
                      (Tn.flatMap = function (e, t) {
                        return ri(co(e, t), 1);
                      }),
                      (Tn.flatMapDeep = function (e, t) {
                        return ri(co(e, t), 1 / 0);
                      }),
                      (Tn.flatMapDepth = function (e, t, n) {
                        return (n = void 0 === n ? 1 : ns(n)), ri(co(e, t), n);
                      }),
                      (Tn.flatten = Ra),
                      (Tn.flattenDeep = function (e) {
                        return null != e && e.length ? ri(e, 1 / 0) : [];
                      }),
                      (Tn.flattenDepth = function (e, t) {
                        return null != e && e.length
                          ? ri(e, (t = void 0 === t ? 1 : ns(t)))
                          : [];
                      }),
                      (Tn.flip = function (e) {
                        return Dr(e, 512);
                      }),
                      (Tn.flow = Gs),
                      (Tn.flowRight = Hs),
                      (Tn.fromPairs = function (e) {
                        for (
                          var t = -1, n = null == e ? 0 : e.length, i = {};
                          ++t < n;

                        ) {
                          var r = e[t];
                          i[r[0]] = r[1];
                        }
                        return i;
                      }),
                      (Tn.functions = function (e) {
                        return null == e ? [] : ui(e, xs(e));
                      }),
                      (Tn.functionsIn = function (e) {
                        return null == e ? [] : ui(e, bs(e));
                      }),
                      (Tn.groupBy = so),
                      (Tn.initial = function (e) {
                        return null != e && e.length ? Hi(e, 0, -1) : [];
                      }),
                      (Tn.intersection = Fa),
                      (Tn.intersectionBy = Na),
                      (Tn.intersectionWith = Oa),
                      (Tn.invert = vs),
                      (Tn.invertBy = gs),
                      (Tn.invokeMap = lo),
                      (Tn.iteratee = Ys),
                      (Tn.keyBy = uo),
                      (Tn.keys = xs),
                      (Tn.keysIn = bs),
                      (Tn.map = co),
                      (Tn.mapKeys = function (e, t) {
                        var n = {};
                        return (
                          (t = Qr(t, 3)),
                          si(e, function (e, i, r) {
                            Yn(n, t(e, i, r), e);
                          }),
                          n
                        );
                      }),
                      (Tn.mapValues = function (e, t) {
                        var n = {};
                        return (
                          (t = Qr(t, 3)),
                          si(e, function (e, i, r) {
                            Yn(n, i, t(e, i, r));
                          }),
                          n
                        );
                      }),
                      (Tn.matches = function (e) {
                        return Ti(Qn(e, 1));
                      }),
                      (Tn.matchesProperty = function (e, t) {
                        return Ci(e, Qn(t, 1));
                      }),
                      (Tn.memoize = wo),
                      (Tn.merge = _s),
                      (Tn.mergeWith = ws),
                      (Tn.method = qs),
                      (Tn.methodOf = Xs),
                      (Tn.mixin = Qs),
                      (Tn.negate = So),
                      (Tn.nthArg = function (e) {
                        return (
                          (e = ns(e)),
                          Bi(function (t) {
                            return Pi(t, e);
                          })
                        );
                      }),
                      (Tn.omit = Ss),
                      (Tn.omitBy = function (e, t) {
                        return Ms(e, So(Qr(t)));
                      }),
                      (Tn.once = function (e) {
                        return vo(2, e);
                      }),
                      (Tn.orderBy = function (e, t, n, i) {
                        return null == e
                          ? []
                          : (Ro(t) || (t = null == t ? [] : [t]),
                            Ro((n = i ? void 0 : n)) ||
                              (n = null == n ? [] : [n]),
                            Li(e, t, n));
                      }),
                      (Tn.over = Js),
                      (Tn.overArgs = Eo),
                      (Tn.overEvery = Ks),
                      (Tn.overSome = $s),
                      (Tn.partial = Mo),
                      (Tn.partialRight = Ao),
                      (Tn.partition = ho),
                      (Tn.pick = Es),
                      (Tn.pickBy = Ms),
                      (Tn.property = el),
                      (Tn.propertyOf = function (e) {
                        return function (t) {
                          return null == e ? void 0 : ci(e, t);
                        };
                      }),
                      (Tn.pull = Da),
                      (Tn.pullAll = Va),
                      (Tn.pullAllBy = function (e, t, n) {
                        return e && e.length && t && t.length
                          ? Ii(e, t, Qr(n, 2))
                          : e;
                      }),
                      (Tn.pullAllWith = function (e, t, n) {
                        return e && e.length && t && t.length
                          ? Ii(e, t, void 0, n)
                          : e;
                      }),
                      (Tn.pullAt = Ua),
                      (Tn.range = tl),
                      (Tn.rangeRight = nl),
                      (Tn.rearg = To),
                      (Tn.reject = function (e, t) {
                        return (Ro(e) ? ct : ii)(e, So(Qr(t, 3)));
                      }),
                      (Tn.remove = function (e, t) {
                        var n = [];
                        if (!e || !e.length) return n;
                        var i = -1,
                          r = [],
                          a = e.length;
                        for (t = Qr(t, 3); ++i < a; ) {
                          var o = e[i];
                          t(o, i, e) && (n.push(o), r.push(i));
                        }
                        return Fi(e, r), n;
                      }),
                      (Tn.rest = function (e, t) {
                        if ("function" != typeof e) throw new ge(a);
                        return Bi(e, (t = void 0 === t ? t : ns(t)));
                      }),
                      (Tn.reverse = za),
                      (Tn.sampleSize = function (e, t, n) {
                        return (
                          (t = (n ? oa(e, t, n) : void 0 === t) ? 1 : ns(t)),
                          (Ro(e) ? Vn : Vi)(e, t)
                        );
                      }),
                      (Tn.set = function (e, t, n) {
                        return null == e ? e : Ui(e, t, n);
                      }),
                      (Tn.setWith = function (e, t, n, i) {
                        return (
                          (i = "function" == typeof i ? i : void 0),
                          null == e ? e : Ui(e, t, n, i)
                        );
                      }),
                      (Tn.shuffle = function (e) {
                        return (Ro(e) ? Un : Gi)(e);
                      }),
                      (Tn.slice = function (e, t, n) {
                        var i = null == e ? 0 : e.length;
                        return i
                          ? (n && "number" != typeof n && oa(e, t, n)
                              ? ((t = 0), (n = i))
                              : ((t = null == t ? 0 : ns(t)),
                                (n = void 0 === n ? i : ns(n))),
                            Hi(e, t, n))
                          : [];
                      }),
                      (Tn.sortBy = po),
                      (Tn.sortedUniq = function (e) {
                        return e && e.length ? Xi(e) : [];
                      }),
                      (Tn.sortedUniqBy = function (e, t) {
                        return e && e.length ? Xi(e, Qr(t, 2)) : [];
                      }),
                      (Tn.split = function (e, t, n) {
                        return (
                          n &&
                            "number" != typeof n &&
                            oa(e, t, n) &&
                            (t = n = void 0),
                          (n = void 0 === n ? 4294967295 : n >>> 0)
                            ? (e = os(e)) &&
                              ("string" == typeof t || (null != t && !qo(t))) &&
                              !(t = Zi(t)) &&
                              Vt(e)
                              ? lr(Yt(e), 0, n)
                              : e.split(t, n)
                            : []
                        );
                      }),
                      (Tn.spread = function (e, t) {
                        if ("function" != typeof e) throw new ge(a);
                        return (
                          (t = null == t ? 0 : an(ns(t), 0)),
                          Bi(function (n) {
                            var i = n[t],
                              r = lr(n, 0, t);
                            return i && ft(r, i), at(e, this, r);
                          })
                        );
                      }),
                      (Tn.tail = function (e) {
                        var t = null == e ? 0 : e.length;
                        return t ? Hi(e, 1, t) : [];
                      }),
                      (Tn.take = function (e, t, n) {
                        return e && e.length
                          ? Hi(
                              e,
                              0,
                              (t = n || void 0 === t ? 1 : ns(t)) < 0 ? 0 : t
                            )
                          : [];
                      }),
                      (Tn.takeRight = function (e, t, n) {
                        var i = null == e ? 0 : e.length;
                        return i
                          ? Hi(
                              e,
                              (t = i - (t = n || void 0 === t ? 1 : ns(t))) < 0
                                ? 0
                                : t,
                              i
                            )
                          : [];
                      }),
                      (Tn.takeRightWhile = function (e, t) {
                        return e && e.length ? er(e, Qr(t, 3), !1, !0) : [];
                      }),
                      (Tn.takeWhile = function (e, t) {
                        return e && e.length ? er(e, Qr(t, 3)) : [];
                      }),
                      (Tn.tap = function (e, t) {
                        return t(e), e;
                      }),
                      (Tn.throttle = function (e, t, n) {
                        var i = !0,
                          r = !0;
                        if ("function" != typeof e) throw new ge(a);
                        return (
                          jo(n) &&
                            ((i = "leading" in n ? !!n.leading : i),
                            (r = "trailing" in n ? !!n.trailing : r)),
                          xo(e, t, { leading: i, maxWait: t, trailing: r })
                        );
                      }),
                      (Tn.thru = eo),
                      (Tn.toArray = es),
                      (Tn.toPairs = As),
                      (Tn.toPairsIn = Ts),
                      (Tn.toPath = function (e) {
                        return Ro(e) ? pt(e, Ea) : Zo(e) ? [e] : vr(Sa(os(e)));
                      }),
                      (Tn.toPlainObject = as),
                      (Tn.transform = function (e, t, n) {
                        var i = Ro(e),
                          r = i || Oo(e) || Jo(e);
                        if (((t = Qr(t, 4)), null == n)) {
                          var a = e && e.constructor;
                          n = r
                            ? i
                              ? new a()
                              : []
                            : jo(e) && Vo(a)
                            ? Cn(je(e))
                            : {};
                        }
                        return (
                          (r ? st : si)(e, function (e, i, r) {
                            return t(n, e, i, r);
                          }),
                          n
                        );
                      }),
                      (Tn.unary = function (e) {
                        return mo(e, 1);
                      }),
                      (Tn.union = ja),
                      (Tn.unionBy = Ga),
                      (Tn.unionWith = Ha),
                      (Tn.uniq = function (e) {
                        return e && e.length ? Ji(e) : [];
                      }),
                      (Tn.uniqBy = function (e, t) {
                        return e && e.length ? Ji(e, Qr(t, 2)) : [];
                      }),
                      (Tn.uniqWith = function (e, t) {
                        return (
                          (t = "function" == typeof t ? t : void 0),
                          e && e.length ? Ji(e, void 0, t) : []
                        );
                      }),
                      (Tn.unset = function (e, t) {
                        return null == e || Ki(e, t);
                      }),
                      (Tn.unzip = Wa),
                      (Tn.unzipWith = Ya),
                      (Tn.update = function (e, t, n) {
                        return null == e ? e : $i(e, t, ar(n));
                      }),
                      (Tn.updateWith = function (e, t, n, i) {
                        return (
                          (i = "function" == typeof i ? i : void 0),
                          null == e ? e : $i(e, t, ar(n), i)
                        );
                      }),
                      (Tn.values = Cs),
                      (Tn.valuesIn = function (e) {
                        return null == e ? [] : Lt(e, bs(e));
                      }),
                      (Tn.without = qa),
                      (Tn.words = Vs),
                      (Tn.wrap = function (e, t) {
                        return Mo(ar(t), e);
                      }),
                      (Tn.xor = Xa),
                      (Tn.xorBy = Qa),
                      (Tn.xorWith = Za),
                      (Tn.zip = Ja),
                      (Tn.zipObject = function (e, t) {
                        return ir(e || [], t || [], jn);
                      }),
                      (Tn.zipObjectDeep = function (e, t) {
                        return ir(e || [], t || [], Ui);
                      }),
                      (Tn.zipWith = Ka),
                      (Tn.entries = As),
                      (Tn.entriesIn = Ts),
                      (Tn.extend = ls),
                      (Tn.extendWith = us),
                      Qs(Tn, Tn),
                      (Tn.add = al),
                      (Tn.attempt = Us),
                      (Tn.camelCase = ks),
                      (Tn.capitalize = Ps),
                      (Tn.ceil = ol),
                      (Tn.clamp = function (e, t, n) {
                        return (
                          void 0 === n && ((n = t), (t = void 0)),
                          void 0 !== n && (n = (n = rs(n)) === n ? n : 0),
                          void 0 !== t && (t = (t = rs(t)) === t ? t : 0),
                          Xn(rs(e), t, n)
                        );
                      }),
                      (Tn.clone = function (e) {
                        return Qn(e, 4);
                      }),
                      (Tn.cloneDeep = function (e) {
                        return Qn(e, 5);
                      }),
                      (Tn.cloneDeepWith = function (e, t) {
                        return Qn(
                          e,
                          5,
                          (t = "function" == typeof t ? t : void 0)
                        );
                      }),
                      (Tn.cloneWith = function (e, t) {
                        return Qn(
                          e,
                          4,
                          (t = "function" == typeof t ? t : void 0)
                        );
                      }),
                      (Tn.conformsTo = function (e, t) {
                        return null == t || Zn(e, t, xs(t));
                      }),
                      (Tn.deburr = Ls),
                      (Tn.defaultTo = function (e, t) {
                        return null == e || e !== e ? t : e;
                      }),
                      (Tn.divide = sl),
                      (Tn.endsWith = function (e, t, n) {
                        (e = os(e)), (t = Zi(t));
                        var i = e.length,
                          r = (n = void 0 === n ? i : Xn(ns(n), 0, i));
                        return (n -= t.length) >= 0 && e.slice(n, r) == t;
                      }),
                      (Tn.eq = Co),
                      (Tn.escape = function (e) {
                        return (e = os(e)) && V.test(e) ? e.replace(B, Bt) : e;
                      }),
                      (Tn.escapeRegExp = function (e) {
                        return (e = os(e)) && q.test(e)
                          ? e.replace(Y, "\\$&")
                          : e;
                      }),
                      (Tn.every = function (e, t, n) {
                        var i = Ro(e) ? ut : ti;
                        return n && oa(e, t, n) && (t = void 0), i(e, Qr(t, 3));
                      }),
                      (Tn.find = io),
                      (Tn.findIndex = Pa),
                      (Tn.findKey = function (e, t) {
                        return xt(e, Qr(t, 3), si);
                      }),
                      (Tn.findLast = ro),
                      (Tn.findLastIndex = La),
                      (Tn.findLastKey = function (e, t) {
                        return xt(e, Qr(t, 3), li);
                      }),
                      (Tn.floor = ll),
                      (Tn.forEach = ao),
                      (Tn.forEachRight = oo),
                      (Tn.forIn = function (e, t) {
                        return null == e ? e : ai(e, Qr(t, 3), bs);
                      }),
                      (Tn.forInRight = function (e, t) {
                        return null == e ? e : oi(e, Qr(t, 3), bs);
                      }),
                      (Tn.forOwn = function (e, t) {
                        return e && si(e, Qr(t, 3));
                      }),
                      (Tn.forOwnRight = function (e, t) {
                        return e && li(e, Qr(t, 3));
                      }),
                      (Tn.get = fs),
                      (Tn.gt = ko),
                      (Tn.gte = Po),
                      (Tn.has = function (e, t) {
                        return null != e && na(e, t, fi);
                      }),
                      (Tn.hasIn = ms),
                      (Tn.head = Ia),
                      (Tn.identity = Ws),
                      (Tn.includes = function (e, t, n, i) {
                        (e = Fo(e) ? e : Cs(e)), (n = n && !i ? ns(n) : 0);
                        var r = e.length;
                        return (
                          n < 0 && (n = an(r + n, 0)),
                          Qo(e)
                            ? n <= r && e.indexOf(t, n) > -1
                            : !!r && _t(e, t, n) > -1
                        );
                      }),
                      (Tn.indexOf = function (e, t, n) {
                        var i = null == e ? 0 : e.length;
                        if (!i) return -1;
                        var r = null == n ? 0 : ns(n);
                        return r < 0 && (r = an(i + r, 0)), _t(e, t, r);
                      }),
                      (Tn.inRange = function (e, t, n) {
                        return (
                          (t = ts(t)),
                          void 0 === n ? ((n = t), (t = 0)) : (n = ts(n)),
                          (function (e, t, n) {
                            return e >= on(t, n) && e < an(t, n);
                          })((e = rs(e)), t, n)
                        );
                      }),
                      (Tn.invoke = ys),
                      (Tn.isArguments = Lo),
                      (Tn.isArray = Ro),
                      (Tn.isArrayBuffer = Io),
                      (Tn.isArrayLike = Fo),
                      (Tn.isArrayLikeObject = No),
                      (Tn.isBoolean = function (e) {
                        return !0 === e || !1 === e || (Go(e) && di(e) == c);
                      }),
                      (Tn.isBuffer = Oo),
                      (Tn.isDate = Bo),
                      (Tn.isElement = function (e) {
                        return Go(e) && 1 === e.nodeType && !Yo(e);
                      }),
                      (Tn.isEmpty = function (e) {
                        if (null == e) return !0;
                        if (
                          Fo(e) &&
                          (Ro(e) ||
                            "string" == typeof e ||
                            "function" == typeof e.splice ||
                            Oo(e) ||
                            Jo(e) ||
                            Lo(e))
                        )
                          return !e.length;
                        var t = ta(e);
                        if (t == m || t == x) return !e.size;
                        if (ca(e)) return !Si(e).length;
                        for (var n in e) if (Se.call(e, n)) return !1;
                        return !0;
                      }),
                      (Tn.isEqual = function (e, t) {
                        return xi(e, t);
                      }),
                      (Tn.isEqualWith = function (e, t, n) {
                        var i = (n = "function" == typeof n ? n : void 0)
                          ? n(e, t)
                          : void 0;
                        return void 0 === i ? xi(e, t, void 0, n) : !!i;
                      }),
                      (Tn.isError = Do),
                      (Tn.isFinite = function (e) {
                        return "number" == typeof e && tn(e);
                      }),
                      (Tn.isFunction = Vo),
                      (Tn.isInteger = Uo),
                      (Tn.isLength = zo),
                      (Tn.isMap = Ho),
                      (Tn.isMatch = function (e, t) {
                        return e === t || bi(e, t, Jr(t));
                      }),
                      (Tn.isMatchWith = function (e, t, n) {
                        return (
                          (n = "function" == typeof n ? n : void 0),
                          bi(e, t, Jr(t), n)
                        );
                      }),
                      (Tn.isNaN = function (e) {
                        return Wo(e) && e != +e;
                      }),
                      (Tn.isNative = function (e) {
                        if (ua(e))
                          throw new r(
                            "Unsupported core-js use. Try https://npms.io/search?q=ponyfill."
                          );
                        return _i(e);
                      }),
                      (Tn.isNil = function (e) {
                        return null == e;
                      }),
                      (Tn.isNull = function (e) {
                        return null === e;
                      }),
                      (Tn.isNumber = Wo),
                      (Tn.isObject = jo),
                      (Tn.isObjectLike = Go),
                      (Tn.isPlainObject = Yo),
                      (Tn.isRegExp = qo),
                      (Tn.isSafeInteger = function (e) {
                        return (
                          Uo(e) &&
                          e >= -9007199254740991 &&
                          e <= 9007199254740991
                        );
                      }),
                      (Tn.isSet = Xo),
                      (Tn.isString = Qo),
                      (Tn.isSymbol = Zo),
                      (Tn.isTypedArray = Jo),
                      (Tn.isUndefined = function (e) {
                        return void 0 === e;
                      }),
                      (Tn.isWeakMap = function (e) {
                        return Go(e) && ta(e) == w;
                      }),
                      (Tn.isWeakSet = function (e) {
                        return Go(e) && "[object WeakSet]" == di(e);
                      }),
                      (Tn.join = function (e, t) {
                        return null == e ? "" : nn.call(e, t);
                      }),
                      (Tn.kebabCase = Rs),
                      (Tn.last = Ba),
                      (Tn.lastIndexOf = function (e, t, n) {
                        var i = null == e ? 0 : e.length;
                        if (!i) return -1;
                        var r = i;
                        return (
                          void 0 !== n &&
                            (r = (r = ns(n)) < 0 ? an(i + r, 0) : on(r, i - 1)),
                          t === t
                            ? (function (e, t, n) {
                                for (var i = n + 1; i--; )
                                  if (e[i] === t) return i;
                                return i;
                              })(e, t, r)
                            : bt(e, St, r, !0)
                        );
                      }),
                      (Tn.lowerCase = Is),
                      (Tn.lowerFirst = Fs),
                      (Tn.lt = Ko),
                      (Tn.lte = $o),
                      (Tn.max = function (e) {
                        return e && e.length ? ni(e, Ws, pi) : void 0;
                      }),
                      (Tn.maxBy = function (e, t) {
                        return e && e.length ? ni(e, Qr(t, 2), pi) : void 0;
                      }),
                      (Tn.mean = function (e) {
                        return Et(e, Ws);
                      }),
                      (Tn.meanBy = function (e, t) {
                        return Et(e, Qr(t, 2));
                      }),
                      (Tn.min = function (e) {
                        return e && e.length ? ni(e, Ws, Mi) : void 0;
                      }),
                      (Tn.minBy = function (e, t) {
                        return e && e.length ? ni(e, Qr(t, 2), Mi) : void 0;
                      }),
                      (Tn.stubArray = il),
                      (Tn.stubFalse = rl),
                      (Tn.stubObject = function () {
                        return {};
                      }),
                      (Tn.stubString = function () {
                        return "";
                      }),
                      (Tn.stubTrue = function () {
                        return !0;
                      }),
                      (Tn.multiply = ul),
                      (Tn.nth = function (e, t) {
                        return e && e.length ? Pi(e, ns(t)) : void 0;
                      }),
                      (Tn.noConflict = function () {
                        return qe._ === this && (qe._ = Ce), this;
                      }),
                      (Tn.noop = Zs),
                      (Tn.now = fo),
                      (Tn.pad = function (e, t, n) {
                        e = os(e);
                        var i = (t = ns(t)) ? Wt(e) : 0;
                        if (!t || i >= t) return e;
                        var r = (t - i) / 2;
                        return Lr(Kt(r), n) + e + Lr(Jt(r), n);
                      }),
                      (Tn.padEnd = function (e, t, n) {
                        e = os(e);
                        var i = (t = ns(t)) ? Wt(e) : 0;
                        return t && i < t ? e + Lr(t - i, n) : e;
                      }),
                      (Tn.padStart = function (e, t, n) {
                        e = os(e);
                        var i = (t = ns(t)) ? Wt(e) : 0;
                        return t && i < t ? Lr(t - i, n) + e : e;
                      }),
                      (Tn.parseInt = function (e, t, n) {
                        return (
                          n || null == t ? (t = 0) : t && (t = +t),
                          ln(os(e).replace(Q, ""), t || 0)
                        );
                      }),
                      (Tn.random = function (e, t, n) {
                        if (
                          (n &&
                            "boolean" != typeof n &&
                            oa(e, t, n) &&
                            (t = n = void 0),
                          void 0 === n &&
                            ("boolean" == typeof t
                              ? ((n = t), (t = void 0))
                              : "boolean" == typeof e &&
                                ((n = e), (e = void 0))),
                          void 0 === e && void 0 === t
                            ? ((e = 0), (t = 1))
                            : ((e = ts(e)),
                              void 0 === t ? ((t = e), (e = 0)) : (t = ts(t))),
                          e > t)
                        ) {
                          var i = e;
                          (e = t), (t = i);
                        }
                        if (n || e % 1 || t % 1) {
                          var r = un();
                          return on(
                            e + r * (t - e + Ge("1e-" + ((r + "").length - 1))),
                            t
                          );
                        }
                        return Ni(e, t);
                      }),
                      (Tn.reduce = function (e, t, n) {
                        var i = Ro(e) ? mt : Tt,
                          r = arguments.length < 3;
                        return i(e, Qr(t, 4), n, r, $n);
                      }),
                      (Tn.reduceRight = function (e, t, n) {
                        var i = Ro(e) ? vt : Tt,
                          r = arguments.length < 3;
                        return i(e, Qr(t, 4), n, r, ei);
                      }),
                      (Tn.repeat = function (e, t, n) {
                        return (
                          (t = (n ? oa(e, t, n) : void 0 === t) ? 1 : ns(t)),
                          Oi(os(e), t)
                        );
                      }),
                      (Tn.replace = function () {
                        var e = arguments,
                          t = os(e[0]);
                        return e.length < 3 ? t : t.replace(e[1], e[2]);
                      }),
                      (Tn.result = function (e, t, n) {
                        var i = -1,
                          r = (t = or(t, e)).length;
                        for (r || ((r = 1), (e = void 0)); ++i < r; ) {
                          var a = null == e ? void 0 : e[Ea(t[i])];
                          void 0 === a && ((i = r), (a = n)),
                            (e = Vo(a) ? a.call(e) : a);
                        }
                        return e;
                      }),
                      (Tn.round = cl),
                      (Tn.runInContext = e),
                      (Tn.sample = function (e) {
                        return (Ro(e) ? Dn : Di)(e);
                      }),
                      (Tn.size = function (e) {
                        if (null == e) return 0;
                        if (Fo(e)) return Qo(e) ? Wt(e) : e.length;
                        var t = ta(e);
                        return t == m || t == x ? e.size : Si(e).length;
                      }),
                      (Tn.snakeCase = Ns),
                      (Tn.some = function (e, t, n) {
                        var i = Ro(e) ? gt : Wi;
                        return n && oa(e, t, n) && (t = void 0), i(e, Qr(t, 3));
                      }),
                      (Tn.sortedIndex = function (e, t) {
                        return Yi(e, t);
                      }),
                      (Tn.sortedIndexBy = function (e, t, n) {
                        return qi(e, t, Qr(n, 2));
                      }),
                      (Tn.sortedIndexOf = function (e, t) {
                        var n = null == e ? 0 : e.length;
                        if (n) {
                          var i = Yi(e, t);
                          if (i < n && Co(e[i], t)) return i;
                        }
                        return -1;
                      }),
                      (Tn.sortedLastIndex = function (e, t) {
                        return Yi(e, t, !0);
                      }),
                      (Tn.sortedLastIndexBy = function (e, t, n) {
                        return qi(e, t, Qr(n, 2), !0);
                      }),
                      (Tn.sortedLastIndexOf = function (e, t) {
                        if (null != e && e.length) {
                          var n = Yi(e, t, !0) - 1;
                          if (Co(e[n], t)) return n;
                        }
                        return -1;
                      }),
                      (Tn.startCase = Os),
                      (Tn.startsWith = function (e, t, n) {
                        return (
                          (e = os(e)),
                          (n = null == n ? 0 : Xn(ns(n), 0, e.length)),
                          (t = Zi(t)),
                          e.slice(n, n + t.length) == t
                        );
                      }),
                      (Tn.subtract = hl),
                      (Tn.sum = function (e) {
                        return e && e.length ? Ct(e, Ws) : 0;
                      }),
                      (Tn.sumBy = function (e, t) {
                        return e && e.length ? Ct(e, Qr(t, 2)) : 0;
                      }),
                      (Tn.template = function (e, t, n) {
                        var i = Tn.templateSettings;
                        n && oa(e, t, n) && (t = void 0),
                          (e = os(e)),
                          (t = us({}, t, i, Vr));
                        var r,
                          a,
                          o = us({}, t.imports, i.imports, Vr),
                          s = xs(o),
                          l = Lt(o, s),
                          u = 0,
                          c = t.interpolate || ce,
                          h = "__p += '",
                          d = me(
                            (t.escape || ce).source +
                              "|" +
                              c.source +
                              "|" +
                              (c === j ? ne : ce).source +
                              "|" +
                              (t.evaluate || ce).source +
                              "|$",
                            "g"
                          ),
                          p =
                            "//# sourceURL=" +
                            (Se.call(t, "sourceURL")
                              ? (t.sourceURL + "").replace(/[\r\n]/g, " ")
                              : "lodash.templateSources[" + ++Ve + "]") +
                            "\n";
                        e.replace(d, function (t, n, i, o, s, l) {
                          return (
                            i || (i = o),
                            (h += e.slice(u, l).replace(he, Dt)),
                            n && ((r = !0), (h += "' +\n__e(" + n + ") +\n'")),
                            s && ((a = !0), (h += "';\n" + s + ";\n__p += '")),
                            i &&
                              (h +=
                                "' +\n((__t = (" +
                                i +
                                ")) == null ? '' : __t) +\n'"),
                            (u = l + t.length),
                            t
                          );
                        }),
                          (h += "';\n");
                        var f = Se.call(t, "variable") && t.variable;
                        f || (h = "with (obj) {\n" + h + "\n}\n"),
                          (h = (a ? h.replace(I, "") : h)
                            .replace(F, "$1")
                            .replace(N, "$1;")),
                          (h =
                            "function(" +
                            (f || "obj") +
                            ") {\n" +
                            (f ? "" : "obj || (obj = {});\n") +
                            "var __t, __p = ''" +
                            (r ? ", __e = _.escape" : "") +
                            (a
                              ? ", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n"
                              : ";\n") +
                            h +
                            "return __p\n}");
                        var m = Us(function () {
                          return de(s, p + "return " + h).apply(void 0, l);
                        });
                        if (((m.source = h), Do(m))) throw m;
                        return m;
                      }),
                      (Tn.times = function (e, t) {
                        if ((e = ns(e)) < 1 || e > 9007199254740991) return [];
                        var n = 4294967295,
                          i = on(e, 4294967295);
                        e -= 4294967295;
                        for (var r = kt(i, (t = Qr(t))); ++n < e; ) t(n);
                        return r;
                      }),
                      (Tn.toFinite = ts),
                      (Tn.toInteger = ns),
                      (Tn.toLength = is),
                      (Tn.toLower = function (e) {
                        return os(e).toLowerCase();
                      }),
                      (Tn.toNumber = rs),
                      (Tn.toSafeInteger = function (e) {
                        return e
                          ? Xn(ns(e), -9007199254740991, 9007199254740991)
                          : 0 === e
                          ? e
                          : 0;
                      }),
                      (Tn.toString = os),
                      (Tn.toUpper = function (e) {
                        return os(e).toUpperCase();
                      }),
                      (Tn.trim = function (e, t, n) {
                        if ((e = os(e)) && (n || void 0 === t))
                          return e.replace(X, "");
                        if (!e || !(t = Zi(t))) return e;
                        var i = Yt(e),
                          r = Yt(t);
                        return lr(i, It(i, r), Ft(i, r) + 1).join("");
                      }),
                      (Tn.trimEnd = function (e, t, n) {
                        if ((e = os(e)) && (n || void 0 === t))
                          return e.replace(Z, "");
                        if (!e || !(t = Zi(t))) return e;
                        var i = Yt(e);
                        return lr(i, 0, Ft(i, Yt(t)) + 1).join("");
                      }),
                      (Tn.trimStart = function (e, t, n) {
                        if ((e = os(e)) && (n || void 0 === t))
                          return e.replace(Q, "");
                        if (!e || !(t = Zi(t))) return e;
                        var i = Yt(e);
                        return lr(i, It(i, Yt(t))).join("");
                      }),
                      (Tn.truncate = function (e, t) {
                        var n = 30,
                          i = "...";
                        if (jo(t)) {
                          var r = "separator" in t ? t.separator : r;
                          (n = "length" in t ? ns(t.length) : n),
                            (i = "omission" in t ? Zi(t.omission) : i);
                        }
                        var a = (e = os(e)).length;
                        if (Vt(e)) {
                          var o = Yt(e);
                          a = o.length;
                        }
                        if (n >= a) return e;
                        var s = n - Wt(i);
                        if (s < 1) return i;
                        var l = o ? lr(o, 0, s).join("") : e.slice(0, s);
                        if (void 0 === r) return l + i;
                        if ((o && (s += l.length - s), qo(r))) {
                          if (e.slice(s).search(r)) {
                            var u,
                              c = l;
                            for (
                              r.global ||
                                (r = me(r.source, os(ie.exec(r)) + "g")),
                                r.lastIndex = 0;
                              (u = r.exec(c));

                            )
                              var h = u.index;
                            l = l.slice(0, void 0 === h ? s : h);
                          }
                        } else if (e.indexOf(Zi(r), s) != s) {
                          var d = l.lastIndexOf(r);
                          d > -1 && (l = l.slice(0, d));
                        }
                        return l + i;
                      }),
                      (Tn.unescape = function (e) {
                        return (e = os(e)) && D.test(e) ? e.replace(O, qt) : e;
                      }),
                      (Tn.uniqueId = function (e) {
                        var t = ++Ee;
                        return os(e) + t;
                      }),
                      (Tn.upperCase = Bs),
                      (Tn.upperFirst = Ds),
                      (Tn.each = ao),
                      (Tn.eachRight = oo),
                      (Tn.first = Ia),
                      Qs(
                        Tn,
                        (function () {
                          var e = {};
                          return (
                            si(Tn, function (t, n) {
                              Se.call(Tn.prototype, n) || (e[n] = t);
                            }),
                            e
                          );
                        })(),
                        { chain: !1 }
                      ),
                      (Tn.VERSION = "4.17.15"),
                      st(
                        [
                          "bind",
                          "bindKey",
                          "curry",
                          "curryRight",
                          "partial",
                          "partialRight",
                        ],
                        function (e) {
                          Tn[e].placeholder = Tn;
                        }
                      ),
                      st(["drop", "take"], function (e, t) {
                        (Ln.prototype[e] = function (n) {
                          n = void 0 === n ? 1 : an(ns(n), 0);
                          var i =
                            this.__filtered__ && !t
                              ? new Ln(this)
                              : this.clone();
                          return (
                            i.__filtered__
                              ? (i.__takeCount__ = on(n, i.__takeCount__))
                              : i.__views__.push({
                                  size: on(n, 4294967295),
                                  type: e + (i.__dir__ < 0 ? "Right" : ""),
                                }),
                            i
                          );
                        }),
                          (Ln.prototype[e + "Right"] = function (t) {
                            return this.reverse()[e](t).reverse();
                          });
                      }),
                      st(["filter", "map", "takeWhile"], function (e, t) {
                        var n = t + 1,
                          i = 1 == n || 3 == n;
                        Ln.prototype[e] = function (e) {
                          var t = this.clone();
                          return (
                            t.__iteratees__.push({
                              iteratee: Qr(e, 3),
                              type: n,
                            }),
                            (t.__filtered__ = t.__filtered__ || i),
                            t
                          );
                        };
                      }),
                      st(["head", "last"], function (e, t) {
                        var n = "take" + (t ? "Right" : "");
                        Ln.prototype[e] = function () {
                          return this[n](1).value()[0];
                        };
                      }),
                      st(["initial", "tail"], function (e, t) {
                        var n = "drop" + (t ? "" : "Right");
                        Ln.prototype[e] = function () {
                          return this.__filtered__ ? new Ln(this) : this[n](1);
                        };
                      }),
                      (Ln.prototype.compact = function () {
                        return this.filter(Ws);
                      }),
                      (Ln.prototype.find = function (e) {
                        return this.filter(e).head();
                      }),
                      (Ln.prototype.findLast = function (e) {
                        return this.reverse().find(e);
                      }),
                      (Ln.prototype.invokeMap = Bi(function (e, t) {
                        return "function" == typeof e
                          ? new Ln(this)
                          : this.map(function (n) {
                              return gi(n, e, t);
                            });
                      })),
                      (Ln.prototype.reject = function (e) {
                        return this.filter(So(Qr(e)));
                      }),
                      (Ln.prototype.slice = function (e, t) {
                        e = ns(e);
                        var n = this;
                        return n.__filtered__ && (e > 0 || t < 0)
                          ? new Ln(n)
                          : (e < 0
                              ? (n = n.takeRight(-e))
                              : e && (n = n.drop(e)),
                            void 0 !== t &&
                              (n =
                                (t = ns(t)) < 0
                                  ? n.dropRight(-t)
                                  : n.take(t - e)),
                            n);
                      }),
                      (Ln.prototype.takeRightWhile = function (e) {
                        return this.reverse().takeWhile(e).reverse();
                      }),
                      (Ln.prototype.toArray = function () {
                        return this.take(4294967295);
                      }),
                      si(Ln.prototype, function (e, t) {
                        var n = /^(?:filter|find|map|reject)|While$/.test(t),
                          i = /^(?:head|last)$/.test(t),
                          r = Tn[i ? "take" + ("last" == t ? "Right" : "") : t],
                          a = i || /^find/.test(t);
                        r &&
                          (Tn.prototype[t] = function () {
                            var t = this.__wrapped__,
                              o = i ? [1] : arguments,
                              s = t instanceof Ln,
                              l = o[0],
                              u = s || Ro(t),
                              c = function (e) {
                                var t = r.apply(Tn, ft([e], o));
                                return i && h ? t[0] : t;
                              };
                            u &&
                              n &&
                              "function" == typeof l &&
                              1 != l.length &&
                              (s = u = !1);
                            var h = this.__chain__,
                              d = !!this.__actions__.length,
                              p = a && !h,
                              f = s && !d;
                            if (!a && u) {
                              t = f ? t : new Ln(this);
                              var m = e.apply(t, o);
                              return (
                                m.__actions__.push({
                                  func: eo,
                                  args: [c],
                                  thisArg: void 0,
                                }),
                                new Pn(m, h)
                              );
                            }
                            return p && f
                              ? e.apply(this, o)
                              : ((m = this.thru(c)),
                                p ? (i ? m.value()[0] : m.value()) : m);
                          });
                      }),
                      st(
                        ["pop", "push", "shift", "sort", "splice", "unshift"],
                        function (e) {
                          var t = ye[e],
                            n = /^(?:push|sort|unshift)$/.test(e)
                              ? "tap"
                              : "thru",
                            i = /^(?:pop|shift)$/.test(e);
                          Tn.prototype[e] = function () {
                            var e = arguments;
                            if (i && !this.__chain__) {
                              var r = this.value();
                              return t.apply(Ro(r) ? r : [], e);
                            }
                            return this[n](function (n) {
                              return t.apply(Ro(n) ? n : [], e);
                            });
                          };
                        }
                      ),
                      si(Ln.prototype, function (e, t) {
                        var n = Tn[t];
                        if (n) {
                          var i = n.name + "";
                          Se.call(yn, i) || (yn[i] = []),
                            yn[i].push({ name: t, func: n });
                        }
                      }),
                      (yn[Tr(void 0, 2).name] = [
                        { name: "wrapper", func: void 0 },
                      ]),
                      (Ln.prototype.clone = function () {
                        var e = new Ln(this.__wrapped__);
                        return (
                          (e.__actions__ = vr(this.__actions__)),
                          (e.__dir__ = this.__dir__),
                          (e.__filtered__ = this.__filtered__),
                          (e.__iteratees__ = vr(this.__iteratees__)),
                          (e.__takeCount__ = this.__takeCount__),
                          (e.__views__ = vr(this.__views__)),
                          e
                        );
                      }),
                      (Ln.prototype.reverse = function () {
                        if (this.__filtered__) {
                          var e = new Ln(this);
                          (e.__dir__ = -1), (e.__filtered__ = !0);
                        } else (e = this.clone()).__dir__ *= -1;
                        return e;
                      }),
                      (Ln.prototype.value = function () {
                        var e = this.__wrapped__.value(),
                          t = this.__dir__,
                          n = Ro(e),
                          i = t < 0,
                          r = n ? e.length : 0,
                          a = (function (e, t, n) {
                            for (var i = -1, r = n.length; ++i < r; ) {
                              var a = n[i],
                                o = a.size;
                              switch (a.type) {
                                case "drop":
                                  e += o;
                                  break;
                                case "dropRight":
                                  t -= o;
                                  break;
                                case "take":
                                  t = on(t, e + o);
                                  break;
                                case "takeRight":
                                  e = an(e, t - o);
                              }
                            }
                            return { start: e, end: t };
                          })(0, r, this.__views__),
                          o = a.start,
                          s = a.end,
                          l = s - o,
                          u = i ? s : o - 1,
                          c = this.__iteratees__,
                          h = c.length,
                          d = 0,
                          p = on(l, this.__takeCount__);
                        if (!n || (!i && r == l && p == l))
                          return tr(e, this.__actions__);
                        var f = [];
                        e: for (; l-- && d < p; ) {
                          for (var m = -1, v = e[(u += t)]; ++m < h; ) {
                            var g = c[m],
                              y = g.iteratee,
                              x = g.type,
                              b = y(v);
                            if (2 == x) v = b;
                            else if (!b) {
                              if (1 == x) continue e;
                              break e;
                            }
                          }
                          f[d++] = v;
                        }
                        return f;
                      }),
                      (Tn.prototype.at = to),
                      (Tn.prototype.chain = function () {
                        return $a(this);
                      }),
                      (Tn.prototype.commit = function () {
                        return new Pn(this.value(), this.__chain__);
                      }),
                      (Tn.prototype.next = function () {
                        void 0 === this.__values__ &&
                          (this.__values__ = es(this.value()));
                        var e = this.__index__ >= this.__values__.length;
                        return {
                          done: e,
                          value: e ? void 0 : this.__values__[this.__index__++],
                        };
                      }),
                      (Tn.prototype.plant = function (e) {
                        for (var t, n = this; n instanceof kn; ) {
                          var i = Aa(n);
                          (i.__index__ = 0),
                            (i.__values__ = void 0),
                            t ? (r.__wrapped__ = i) : (t = i);
                          var r = i;
                          n = n.__wrapped__;
                        }
                        return (r.__wrapped__ = e), t;
                      }),
                      (Tn.prototype.reverse = function () {
                        var e = this.__wrapped__;
                        if (e instanceof Ln) {
                          var t = e;
                          return (
                            this.__actions__.length && (t = new Ln(this)),
                            (t = t.reverse()).__actions__.push({
                              func: eo,
                              args: [za],
                              thisArg: void 0,
                            }),
                            new Pn(t, this.__chain__)
                          );
                        }
                        return this.thru(za);
                      }),
                      (Tn.prototype.toJSON =
                        Tn.prototype.valueOf =
                        Tn.prototype.value =
                          function () {
                            return tr(this.__wrapped__, this.__actions__);
                          }),
                      (Tn.prototype.first = Tn.prototype.head),
                      Je &&
                        (Tn.prototype[Je] = function () {
                          return this;
                        }),
                      Tn
                    );
                  })();
                (qe._ = Xt),
                  void 0 ===
                    (r = function () {
                      return Xt;
                    }.call(t, n, t, i)) || (i.exports = r);
              }.call(this));
            }.call(
              this,
              n("./node_modules/webpack/buildin/global.js"),
              n("./node_modules/webpack/buildin/module.js")(e)
            ));
          },
          "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js":
            function (e, t, n) {
              "use strict";
              var i = {},
                r = (function () {
                  var e;
                  return function () {
                    return (
                      "undefined" === typeof e &&
                        (e = Boolean(
                          window && document && document.all && !window.atob
                        )),
                      e
                    );
                  };
                })(),
                a = (function () {
                  var e = {};
                  return function (t) {
                    if ("undefined" === typeof e[t]) {
                      var n = document.querySelector(t);
                      if (
                        window.HTMLIFrameElement &&
                        n instanceof window.HTMLIFrameElement
                      )
                        try {
                          n = n.contentDocument.head;
                        } catch (i) {
                          n = null;
                        }
                      e[t] = n;
                    }
                    return e[t];
                  };
                })();
              function o(e, t) {
                for (var n = [], i = {}, r = 0; r < e.length; r++) {
                  var a = e[r],
                    o = t.base ? a[0] + t.base : a[0],
                    s = { css: a[1], media: a[2], sourceMap: a[3] };
                  i[o]
                    ? i[o].parts.push(s)
                    : n.push((i[o] = { id: o, parts: [s] }));
                }
                return n;
              }
              function s(e, t) {
                for (var n = 0; n < e.length; n++) {
                  var r = e[n],
                    a = i[r.id],
                    o = 0;
                  if (a) {
                    for (a.refs++; o < a.parts.length; o++)
                      a.parts[o](r.parts[o]);
                    for (; o < r.parts.length; o++)
                      a.parts.push(f(r.parts[o], t));
                  } else {
                    for (var s = []; o < r.parts.length; o++)
                      s.push(f(r.parts[o], t));
                    i[r.id] = { id: r.id, refs: 1, parts: s };
                  }
                }
              }
              function l(e) {
                var t = document.createElement("style");
                if ("undefined" === typeof e.attributes.nonce) {
                  var i = n.nc;
                  i && (e.attributes.nonce = i);
                }
                if (
                  (Object.keys(e.attributes).forEach(function (n) {
                    t.setAttribute(n, e.attributes[n]);
                  }),
                  "function" === typeof e.insert)
                )
                  e.insert(t);
                else {
                  var r = a(e.insert || "head");
                  if (!r)
                    throw new Error(
                      "Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid."
                    );
                  r.appendChild(t);
                }
                return t;
              }
              var u = (function () {
                var e = [];
                return function (t, n) {
                  return (e[t] = n), e.filter(Boolean).join("\n");
                };
              })();
              function c(e, t, n, i) {
                var r = n ? "" : i.css;
                if (e.styleSheet) e.styleSheet.cssText = u(t, r);
                else {
                  var a = document.createTextNode(r),
                    o = e.childNodes;
                  o[t] && e.removeChild(o[t]),
                    o.length ? e.insertBefore(a, o[t]) : e.appendChild(a);
                }
              }
              function h(e, t, n) {
                var i = n.css,
                  r = n.media,
                  a = n.sourceMap;
                if (
                  (r && e.setAttribute("media", r),
                  a &&
                    btoa &&
                    (i +=
                      "\n/*# sourceMappingURL=data:application/json;base64,".concat(
                        btoa(unescape(encodeURIComponent(JSON.stringify(a)))),
                        " */"
                      )),
                  e.styleSheet)
                )
                  e.styleSheet.cssText = i;
                else {
                  for (; e.firstChild; ) e.removeChild(e.firstChild);
                  e.appendChild(document.createTextNode(i));
                }
              }
              var d = null,
                p = 0;
              function f(e, t) {
                var n, i, r;
                if (t.singleton) {
                  var a = p++;
                  (n = d || (d = l(t))),
                    (i = c.bind(null, n, a, !1)),
                    (r = c.bind(null, n, a, !0));
                } else
                  (n = l(t)),
                    (i = h.bind(null, n, t)),
                    (r = function () {
                      !(function (e) {
                        if (null === e.parentNode) return !1;
                        e.parentNode.removeChild(e);
                      })(n);
                    });
                return (
                  i(e),
                  function (t) {
                    if (t) {
                      if (
                        t.css === e.css &&
                        t.media === e.media &&
                        t.sourceMap === e.sourceMap
                      )
                        return;
                      i((e = t));
                    } else r();
                  }
                );
              }
              e.exports = function (e, t) {
                ((t = t || {}).attributes =
                  "object" === typeof t.attributes ? t.attributes : {}),
                  t.singleton ||
                    "boolean" === typeof t.singleton ||
                    (t.singleton = r());
                var n = o(e, t);
                return (
                  s(n, t),
                  function (e) {
                    for (var r = [], a = 0; a < n.length; a++) {
                      var l = n[a],
                        u = i[l.id];
                      u && (u.refs--, r.push(u));
                    }
                    e && s(o(e, t), t);
                    for (var c = 0; c < r.length; c++) {
                      var h = r[c];
                      if (0 === h.refs) {
                        for (var d = 0; d < h.parts.length; d++) h.parts[d]();
                        delete i[h.id];
                      }
                    }
                  }
                );
              };
            },
          "./node_modules/three/build/three.module.js": function (e, t, n) {
            "use strict";
            var i;
            n.r(t),
              n.d(t, "ACESFilmicToneMapping", function () {
                return me;
              }),
              n.d(t, "AddEquation", function () {
                return D;
              }),
              n.d(t, "AddOperation", function () {
                return ce;
              }),
              n.d(t, "AdditiveAnimationBlendMode", function () {
                return on;
              }),
              n.d(t, "AdditiveBlending", function () {
                return F;
              }),
              n.d(t, "AlphaFormat", function () {
                return Qe;
              }),
              n.d(t, "AlwaysDepth", function () {
                return te;
              }),
              n.d(t, "AlwaysStencilFunc", function () {
                return Bn;
              }),
              n.d(t, "AmbientLight", function () {
                return Yh;
              }),
              n.d(t, "AmbientLightProbe", function () {
                return md;
              }),
              n.d(t, "AnimationClip", function () {
                return qc;
              }),
              n.d(t, "AnimationLoader", function () {
                return th;
              }),
              n.d(t, "AnimationMixer", function () {
                return Yd;
              }),
              n.d(t, "AnimationObjectGroup", function () {
                return Hd;
              }),
              n.d(t, "AnimationUtils", function () {
                return Fc;
              }),
              n.d(t, "ArcCurve", function () {
                return uh;
              }),
              n.d(t, "ArrayCamera", function () {
                return ol;
              }),
              n.d(t, "ArrowHelper", function () {
                return Np;
              }),
              n.d(t, "Audio", function () {
                return Ad;
              }),
              n.d(t, "AudioAnalyser", function () {
                return Rd;
              }),
              n.d(t, "AudioContext", function () {
                return dd;
              }),
              n.d(t, "AudioListener", function () {
                return Md;
              }),
              n.d(t, "AudioLoader", function () {
                return pd;
              }),
              n.d(t, "AxesHelper", function () {
                return Op;
              }),
              n.d(t, "AxisHelper", function () {
                return Nf;
              }),
              n.d(t, "BackSide", function () {
                return C;
              }),
              n.d(t, "BasicDepthPacking", function () {
                return yn;
              }),
              n.d(t, "BasicShadowMap", function () {
                return S;
              }),
              n.d(t, "BinaryTextureLoader", function () {
                return Uf;
              }),
              n.d(t, "Bone", function () {
                return Wl;
              }),
              n.d(t, "BooleanKeyframeTrack", function () {
                return Uc;
              }),
              n.d(t, "BoundingBoxHelper", function () {
                return Of;
              }),
              n.d(t, "Box2", function () {
                return np;
              }),
              n.d(t, "Box3", function () {
                return Ei;
              }),
              n.d(t, "Box3Helper", function () {
                return Rp;
              }),
              n.d(t, "BoxBufferGeometry", function () {
                return Da;
              }),
              n.d(t, "BoxGeometry", function () {
                return Da;
              }),
              n.d(t, "BoxHelper", function () {
                return Lp;
              }),
              n.d(t, "BufferAttribute", function () {
                return Jr;
              }),
              n.d(t, "BufferGeometry", function () {
                return ya;
              }),
              n.d(t, "BufferGeometryLoader", function () {
                return ed;
              }),
              n.d(t, "ByteType", function () {
                return De;
              }),
              n.d(t, "Cache", function () {
                return Qc;
              }),
              n.d(t, "Camera", function () {
                return Ga;
              }),
              n.d(t, "CameraHelper", function () {
                return Ap;
              }),
              n.d(t, "CanvasRenderer", function () {
                return jf;
              }),
              n.d(t, "CanvasTexture", function () {
                return _u;
              }),
              n.d(t, "CatmullRomCurve3", function () {
                return mh;
              }),
              n.d(t, "CineonToneMapping", function () {
                return fe;
              }),
              n.d(t, "CircleBufferGeometry", function () {
                return Su;
              }),
              n.d(t, "CircleGeometry", function () {
                return Su;
              }),
              n.d(t, "ClampToEdgeWrapping", function () {
                return Me;
              }),
              n.d(t, "Clock", function () {
                return xd;
              }),
              n.d(t, "Color", function () {
                return qr;
              }),
              n.d(t, "ColorKeyframeTrack", function () {
                return zc;
              }),
              n.d(t, "CompressedTexture", function () {
                return bu;
              }),
              n.d(t, "CompressedTextureLoader", function () {
                return nh;
              }),
              n.d(t, "ConeBufferGeometry", function () {
                return Mu;
              }),
              n.d(t, "ConeGeometry", function () {
                return Mu;
              }),
              n.d(t, "CubeCamera", function () {
                return Wa;
              }),
              n.d(t, "CubeReflectionMapping", function () {
                return ye;
              }),
              n.d(t, "CubeRefractionMapping", function () {
                return xe;
              }),
              n.d(t, "CubeTexture", function () {
                return Ya;
              }),
              n.d(t, "CubeTextureLoader", function () {
                return rh;
              }),
              n.d(t, "CubeUVReflectionMapping", function () {
                return we;
              }),
              n.d(t, "CubeUVRefractionMapping", function () {
                return Se;
              }),
              n.d(t, "CubicBezierCurve", function () {
                return xh;
              }),
              n.d(t, "CubicBezierCurve3", function () {
                return bh;
              }),
              n.d(t, "CubicInterpolant", function () {
                return Oc;
              }),
              n.d(t, "CullFaceBack", function () {
                return b;
              }),
              n.d(t, "CullFaceFront", function () {
                return _;
              }),
              n.d(t, "CullFaceFrontBack", function () {
                return w;
              }),
              n.d(t, "CullFaceNone", function () {
                return x;
              }),
              n.d(t, "Curve", function () {
                return sh;
              }),
              n.d(t, "CurvePath", function () {
                return Th;
              }),
              n.d(t, "CustomBlending", function () {
                return B;
              }),
              n.d(t, "CustomToneMapping", function () {
                return ve;
              }),
              n.d(t, "CylinderBufferGeometry", function () {
                return Eu;
              }),
              n.d(t, "CylinderGeometry", function () {
                return Eu;
              }),
              n.d(t, "Cylindrical", function () {
                return ep;
              }),
              n.d(t, "DataTexture", function () {
                return Yl;
              }),
              n.d(t, "DataTexture2DArray", function () {
                return yo;
              }),
              n.d(t, "DataTexture3D", function () {
                return xo;
              }),
              n.d(t, "DataTextureLoader", function () {
                return ah;
              }),
              n.d(t, "DataUtils", function () {
                return Vp;
              }),
              n.d(t, "DecrementStencilOp", function () {
                return An;
              }),
              n.d(t, "DecrementWrapStencilOp", function () {
                return Cn;
              }),
              n.d(t, "DefaultLoadingManager", function () {
                return Jc;
              }),
              n.d(t, "DepthFormat", function () {
                return tt;
              }),
              n.d(t, "DepthStencilFormat", function () {
                return nt;
              }),
              n.d(t, "DepthTexture", function () {
                return wu;
              }),
              n.d(t, "DirectionalLight", function () {
                return Wh;
              }),
              n.d(t, "DirectionalLightHelper", function () {
                return Sp;
              }),
              n.d(t, "DiscreteInterpolant", function () {
                return Dc;
              }),
              n.d(t, "DodecahedronBufferGeometry", function () {
                return Tu;
              }),
              n.d(t, "DodecahedronGeometry", function () {
                return Tu;
              }),
              n.d(t, "DoubleSide", function () {
                return k;
              }),
              n.d(t, "DstAlphaFactor", function () {
                return Q;
              }),
              n.d(t, "DstColorFactor", function () {
                return J;
              }),
              n.d(t, "DynamicBufferAttribute", function () {
                return Mf;
              }),
              n.d(t, "DynamicCopyUsage", function () {
                return Wn;
              }),
              n.d(t, "DynamicDrawUsage", function () {
                return Vn;
              }),
              n.d(t, "DynamicReadUsage", function () {
                return jn;
              }),
              n.d(t, "EdgesGeometry", function () {
                return Ru;
              }),
              n.d(t, "EdgesHelper", function () {
                return Bf;
              }),
              n.d(t, "EllipseCurve", function () {
                return lh;
              }),
              n.d(t, "EqualDepth", function () {
                return re;
              }),
              n.d(t, "EqualStencilFunc", function () {
                return Rn;
              }),
              n.d(t, "EquirectangularReflectionMapping", function () {
                return be;
              }),
              n.d(t, "EquirectangularRefractionMapping", function () {
                return _e;
              }),
              n.d(t, "Euler", function () {
                return lr;
              }),
              n.d(t, "EventDispatcher", function () {
                return Qn;
              }),
              n.d(t, "ExtrudeBufferGeometry", function () {
                return sc;
              }),
              n.d(t, "ExtrudeGeometry", function () {
                return sc;
              }),
              n.d(t, "FaceColors", function () {
                return ff;
              }),
              n.d(t, "FileLoader", function () {
                return eh;
              }),
              n.d(t, "FlatShading", function () {
                return P;
              }),
              n.d(t, "Float16BufferAttribute", function () {
                return aa;
              }),
              n.d(t, "Float32Attribute", function () {
                return If;
              }),
              n.d(t, "Float32BufferAttribute", function () {
                return oa;
              }),
              n.d(t, "Float64Attribute", function () {
                return Ff;
              }),
              n.d(t, "Float64BufferAttribute", function () {
                return sa;
              }),
              n.d(t, "FloatType", function () {
                return Ge;
              }),
              n.d(t, "Fog", function () {
                return ml;
              }),
              n.d(t, "FogExp2", function () {
                return fl;
              }),
              n.d(t, "Font", function () {
                return sd;
              }),
              n.d(t, "FontLoader", function () {
                return hd;
              }),
              n.d(t, "FrontSide", function () {
                return T;
              }),
              n.d(t, "Frustum", function () {
                return Za;
              }),
              n.d(t, "GLBufferAttribute", function () {
                return Qd;
              }),
              n.d(t, "GLSL1", function () {
                return qn;
              }),
              n.d(t, "GLSL3", function () {
                return Xn;
              }),
              n.d(t, "GammaEncoding", function () {
                return dn;
              }),
              n.d(t, "GreaterDepth", function () {
                return oe;
              }),
              n.d(t, "GreaterEqualDepth", function () {
                return ae;
              }),
              n.d(t, "GreaterEqualStencilFunc", function () {
                return On;
              }),
              n.d(t, "GreaterStencilFunc", function () {
                return Fn;
              }),
              n.d(t, "GridHelper", function () {
                return yp;
              }),
              n.d(t, "Group", function () {
                return sl;
              }),
              n.d(t, "HalfFloatType", function () {
                return He;
              }),
              n.d(t, "HemisphereLight", function () {
                return Lh;
              }),
              n.d(t, "HemisphereLightHelper", function () {
                return gp;
              }),
              n.d(t, "HemisphereLightProbe", function () {
                return fd;
              }),
              n.d(t, "IcosahedronBufferGeometry", function () {
                return uc;
              }),
              n.d(t, "IcosahedronGeometry", function () {
                return uc;
              }),
              n.d(t, "ImageBitmapLoader", function () {
                return ad;
              }),
              n.d(t, "ImageLoader", function () {
                return ih;
              }),
              n.d(t, "ImageUtils", function () {
                return di;
              }),
              n.d(t, "ImmediateRenderObject", function () {
                return op;
              }),
              n.d(t, "IncrementStencilOp", function () {
                return Mn;
              }),
              n.d(t, "IncrementWrapStencilOp", function () {
                return Tn;
              }),
              n.d(t, "InstancedBufferAttribute", function () {
                return $h;
              }),
              n.d(t, "InstancedBufferGeometry", function () {
                return Kh;
              }),
              n.d(t, "InstancedInterleavedBuffer", function () {
                return Xd;
              }),
              n.d(t, "InstancedMesh", function () {
                return eu;
              }),
              n.d(t, "Int16Attribute", function () {
                return kf;
              }),
              n.d(t, "Int16BufferAttribute", function () {
                return ta;
              }),
              n.d(t, "Int32Attribute", function () {
                return Lf;
              }),
              n.d(t, "Int32BufferAttribute", function () {
                return ia;
              }),
              n.d(t, "Int8Attribute", function () {
                return Af;
              }),
              n.d(t, "Int8BufferAttribute", function () {
                return Kr;
              }),
              n.d(t, "IntType", function () {
                return ze;
              }),
              n.d(t, "InterleavedBuffer", function () {
                return gl;
              }),
              n.d(t, "InterleavedBufferAttribute", function () {
                return xl;
              }),
              n.d(t, "Interpolant", function () {
                return Nc;
              }),
              n.d(t, "InterpolateDiscrete", function () {
                return Kt;
              }),
              n.d(t, "InterpolateLinear", function () {
                return $t;
              }),
              n.d(t, "InterpolateSmooth", function () {
                return en;
              }),
              n.d(t, "InvertStencilOp", function () {
                return kn;
              }),
              n.d(t, "JSONLoader", function () {
                return Gf;
              }),
              n.d(t, "KeepStencilOp", function () {
                return Sn;
              }),
              n.d(t, "KeyframeTrack", function () {
                return Vc;
              }),
              n.d(t, "LOD", function () {
                return Dl;
              }),
              n.d(t, "LatheBufferGeometry", function () {
                return cc;
              }),
              n.d(t, "LatheGeometry", function () {
                return cc;
              }),
              n.d(t, "Layers", function () {
                return ur;
              }),
              n.d(t, "LensFlare", function () {
                return Wf;
              }),
              n.d(t, "LessDepth", function () {
                return ne;
              }),
              n.d(t, "LessEqualDepth", function () {
                return ie;
              }),
              n.d(t, "LessEqualStencilFunc", function () {
                return In;
              }),
              n.d(t, "LessStencilFunc", function () {
                return Ln;
              }),
              n.d(t, "Light", function () {
                return Ph;
              }),
              n.d(t, "LightProbe", function () {
                return Qh;
              }),
              n.d(t, "Line", function () {
                return su;
              }),
              n.d(t, "Line3", function () {
                return ap;
              }),
              n.d(t, "LineBasicMaterial", function () {
                return tu;
              }),
              n.d(t, "LineCurve", function () {
                return _h;
              }),
              n.d(t, "LineCurve3", function () {
                return wh;
              }),
              n.d(t, "LineDashedMaterial", function () {
                return Rc;
              }),
              n.d(t, "LineLoop", function () {
                return hu;
              }),
              n.d(t, "LinePieces", function () {
                return df;
              }),
              n.d(t, "LineSegments", function () {
                return cu;
              }),
              n.d(t, "LineStrip", function () {
                return hf;
              }),
              n.d(t, "LinearEncoding", function () {
                return cn;
              }),
              n.d(t, "LinearFilter", function () {
                return Re;
              }),
              n.d(t, "LinearInterpolant", function () {
                return Bc;
              }),
              n.d(t, "LinearMipMapLinearFilter", function () {
                return Oe;
              }),
              n.d(t, "LinearMipMapNearestFilter", function () {
                return Fe;
              }),
              n.d(t, "LinearMipmapLinearFilter", function () {
                return Ne;
              }),
              n.d(t, "LinearMipmapNearestFilter", function () {
                return Ie;
              }),
              n.d(t, "LinearToneMapping", function () {
                return de;
              }),
              n.d(t, "Loader", function () {
                return Kc;
              }),
              n.d(t, "LoaderUtils", function () {
                return Jh;
              }),
              n.d(t, "LoadingManager", function () {
                return Zc;
              }),
              n.d(t, "LogLuvEncoding", function () {
                return fn;
              }),
              n.d(t, "LoopOnce", function () {
                return Qt;
              }),
              n.d(t, "LoopPingPong", function () {
                return Jt;
              }),
              n.d(t, "LoopRepeat", function () {
                return Zt;
              }),
              n.d(t, "LuminanceAlphaFormat", function () {
                return $e;
              }),
              n.d(t, "LuminanceFormat", function () {
                return Ke;
              }),
              n.d(t, "MOUSE", function () {
                return g;
              }),
              n.d(t, "Material", function () {
                return Ur;
              }),
              n.d(t, "MaterialLoader", function () {
                return Zh;
              }),
              n.d(t, "Math", function () {
                return li;
              }),
              n.d(t, "MathUtils", function () {
                return li;
              }),
              n.d(t, "Matrix3", function () {
                return hi;
              }),
              n.d(t, "Matrix4", function () {
                return Ki;
              }),
              n.d(t, "MaxEquation", function () {
                return j;
              }),
              n.d(t, "Mesh", function () {
                return Oa;
              }),
              n.d(t, "MeshBasicMaterial", function () {
                return Xr;
              }),
              n.d(t, "MeshDepthMaterial", function () {
                return el;
              }),
              n.d(t, "MeshDistanceMaterial", function () {
                return tl;
              }),
              n.d(t, "MeshFaceMaterial", function () {
                return vf;
              }),
              n.d(t, "MeshLambertMaterial", function () {
                return Pc;
              }),
              n.d(t, "MeshMatcapMaterial", function () {
                return Lc;
              }),
              n.d(t, "MeshNormalMaterial", function () {
                return kc;
              }),
              n.d(t, "MeshPhongMaterial", function () {
                return Tc;
              }),
              n.d(t, "MeshPhysicalMaterial", function () {
                return Ac;
              }),
              n.d(t, "MeshStandardMaterial", function () {
                return Mc;
              }),
              n.d(t, "MeshToonMaterial", function () {
                return Cc;
              }),
              n.d(t, "MinEquation", function () {
                return z;
              }),
              n.d(t, "MirroredRepeatWrapping", function () {
                return Ae;
              }),
              n.d(t, "MixOperation", function () {
                return ue;
              }),
              n.d(t, "MultiMaterial", function () {
                return gf;
              }),
              n.d(t, "MultiplyBlending", function () {
                return O;
              }),
              n.d(t, "MultiplyOperation", function () {
                return le;
              }),
              n.d(t, "NearestFilter", function () {
                return Te;
              }),
              n.d(t, "NearestMipMapLinearFilter", function () {
                return Le;
              }),
              n.d(t, "NearestMipMapNearestFilter", function () {
                return ke;
              }),
              n.d(t, "NearestMipmapLinearFilter", function () {
                return Pe;
              }),
              n.d(t, "NearestMipmapNearestFilter", function () {
                return Ce;
              }),
              n.d(t, "NeverDepth", function () {
                return ee;
              }),
              n.d(t, "NeverStencilFunc", function () {
                return Pn;
              }),
              n.d(t, "NoBlending", function () {
                return R;
              }),
              n.d(t, "NoColors", function () {
                return pf;
              }),
              n.d(t, "NoToneMapping", function () {
                return he;
              }),
              n.d(t, "NormalAnimationBlendMode", function () {
                return an;
              }),
              n.d(t, "NormalBlending", function () {
                return I;
              }),
              n.d(t, "NotEqualDepth", function () {
                return se;
              }),
              n.d(t, "NotEqualStencilFunc", function () {
                return Nn;
              }),
              n.d(t, "NumberKeyframeTrack", function () {
                return jc;
              }),
              n.d(t, "Object3D", function () {
                return Sr;
              }),
              n.d(t, "ObjectLoader", function () {
                return td;
              }),
              n.d(t, "ObjectSpaceNormalMap", function () {
                return _n;
              }),
              n.d(t, "OctahedronBufferGeometry", function () {
                return hc;
              }),
              n.d(t, "OctahedronGeometry", function () {
                return hc;
              }),
              n.d(t, "OneFactor", function () {
                return H;
              }),
              n.d(t, "OneMinusDstAlphaFactor", function () {
                return Z;
              }),
              n.d(t, "OneMinusDstColorFactor", function () {
                return K;
              }),
              n.d(t, "OneMinusSrcAlphaFactor", function () {
                return X;
              }),
              n.d(t, "OneMinusSrcColorFactor", function () {
                return Y;
              }),
              n.d(t, "OrthographicCamera", function () {
                return Gh;
              }),
              n.d(t, "PCFShadowMap", function () {
                return E;
              }),
              n.d(t, "PCFSoftShadowMap", function () {
                return M;
              }),
              n.d(t, "PMREMGenerator", function () {
                return rf;
              }),
              n.d(t, "ParametricBufferGeometry", function () {
                return dc;
              }),
              n.d(t, "ParametricGeometry", function () {
                return dc;
              }),
              n.d(t, "Particle", function () {
                return xf;
              }),
              n.d(t, "ParticleBasicMaterial", function () {
                return wf;
              }),
              n.d(t, "ParticleSystem", function () {
                return bf;
              }),
              n.d(t, "ParticleSystemMaterial", function () {
                return Sf;
              }),
              n.d(t, "Path", function () {
                return Ch;
              }),
              n.d(t, "PerspectiveCamera", function () {
                return Ha;
              }),
              n.d(t, "Plane", function () {
                return Tr;
              }),
              n.d(t, "PlaneBufferGeometry", function () {
                return $a;
              }),
              n.d(t, "PlaneGeometry", function () {
                return $a;
              }),
              n.d(t, "PlaneHelper", function () {
                return Ip;
              }),
              n.d(t, "PointCloud", function () {
                return yf;
              }),
              n.d(t, "PointCloudMaterial", function () {
                return _f;
              }),
              n.d(t, "PointLight", function () {
                return jh;
              }),
              n.d(t, "PointLightHelper", function () {
                return pp;
              }),
              n.d(t, "Points", function () {
                return gu;
              }),
              n.d(t, "PointsMaterial", function () {
                return du;
              }),
              n.d(t, "PolarGridHelper", function () {
                return xp;
              }),
              n.d(t, "PolyhedronBufferGeometry", function () {
                return Au;
              }),
              n.d(t, "PolyhedronGeometry", function () {
                return Au;
              }),
              n.d(t, "PositionalAudio", function () {
                return Ld;
              }),
              n.d(t, "PropertyBinding", function () {
                return Gd;
              }),
              n.d(t, "PropertyMixer", function () {
                return Id;
              }),
              n.d(t, "QuadraticBezierCurve", function () {
                return Sh;
              }),
              n.d(t, "QuadraticBezierCurve3", function () {
                return Eh;
              }),
              n.d(t, "Quaternion", function () {
                return bi;
              }),
              n.d(t, "QuaternionKeyframeTrack", function () {
                return Hc;
              }),
              n.d(t, "QuaternionLinearInterpolant", function () {
                return Gc;
              }),
              n.d(t, "REVISION", function () {
                return v;
              }),
              n.d(t, "RGBADepthPacking", function () {
                return xn;
              }),
              n.d(t, "RGBAFormat", function () {
                return Je;
              }),
              n.d(t, "RGBAIntegerFormat", function () {
                return lt;
              }),
              n.d(t, "RGBA_ASTC_10x10_Format", function () {
                return Lt;
              }),
              n.d(t, "RGBA_ASTC_10x5_Format", function () {
                return Ct;
              }),
              n.d(t, "RGBA_ASTC_10x6_Format", function () {
                return kt;
              }),
              n.d(t, "RGBA_ASTC_10x8_Format", function () {
                return Pt;
              }),
              n.d(t, "RGBA_ASTC_12x10_Format", function () {
                return Rt;
              }),
              n.d(t, "RGBA_ASTC_12x12_Format", function () {
                return It;
              }),
              n.d(t, "RGBA_ASTC_4x4_Format", function () {
                return bt;
              }),
              n.d(t, "RGBA_ASTC_5x4_Format", function () {
                return _t;
              }),
              n.d(t, "RGBA_ASTC_5x5_Format", function () {
                return wt;
              }),
              n.d(t, "RGBA_ASTC_6x5_Format", function () {
                return St;
              }),
              n.d(t, "RGBA_ASTC_6x6_Format", function () {
                return Et;
              }),
              n.d(t, "RGBA_ASTC_8x5_Format", function () {
                return Mt;
              }),
              n.d(t, "RGBA_ASTC_8x6_Format", function () {
                return At;
              }),
              n.d(t, "RGBA_ASTC_8x8_Format", function () {
                return Tt;
              }),
              n.d(t, "RGBA_BPTC_Format", function () {
                return Ft;
              }),
              n.d(t, "RGBA_ETC2_EAC_Format", function () {
                return xt;
              }),
              n.d(t, "RGBA_PVRTC_2BPPV1_Format", function () {
                return vt;
              }),
              n.d(t, "RGBA_PVRTC_4BPPV1_Format", function () {
                return mt;
              }),
              n.d(t, "RGBA_S3TC_DXT1_Format", function () {
                return ct;
              }),
              n.d(t, "RGBA_S3TC_DXT3_Format", function () {
                return ht;
              }),
              n.d(t, "RGBA_S3TC_DXT5_Format", function () {
                return dt;
              }),
              n.d(t, "RGBDEncoding", function () {
                return gn;
              }),
              n.d(t, "RGBEEncoding", function () {
                return pn;
              }),
              n.d(t, "RGBEFormat", function () {
                return et;
              }),
              n.d(t, "RGBFormat", function () {
                return Ze;
              }),
              n.d(t, "RGBIntegerFormat", function () {
                return st;
              }),
              n.d(t, "RGBM16Encoding", function () {
                return vn;
              }),
              n.d(t, "RGBM7Encoding", function () {
                return mn;
              }),
              n.d(t, "RGB_ETC1_Format", function () {
                return gt;
              }),
              n.d(t, "RGB_ETC2_Format", function () {
                return yt;
              }),
              n.d(t, "RGB_PVRTC_2BPPV1_Format", function () {
                return ft;
              }),
              n.d(t, "RGB_PVRTC_4BPPV1_Format", function () {
                return pt;
              }),
              n.d(t, "RGB_S3TC_DXT1_Format", function () {
                return ut;
              }),
              n.d(t, "RGFormat", function () {
                return at;
              }),
              n.d(t, "RGIntegerFormat", function () {
                return ot;
              }),
              n.d(t, "RawShaderMaterial", function () {
                return Ec;
              }),
              n.d(t, "Ray", function () {
                return Ji;
              }),
              n.d(t, "Raycaster", function () {
                return Zd;
              }),
              n.d(t, "RectAreaLight", function () {
                return qh;
              }),
              n.d(t, "RedFormat", function () {
                return it;
              }),
              n.d(t, "RedIntegerFormat", function () {
                return rt;
              }),
              n.d(t, "ReinhardToneMapping", function () {
                return pe;
              }),
              n.d(t, "RepeatWrapping", function () {
                return Ee;
              }),
              n.d(t, "ReplaceStencilOp", function () {
                return En;
              }),
              n.d(t, "ReverseSubtractEquation", function () {
                return U;
              }),
              n.d(t, "RingBufferGeometry", function () {
                return pc;
              }),
              n.d(t, "RingGeometry", function () {
                return pc;
              }),
              n.d(t, "SRGB8_ALPHA8_ASTC_10x10_Format", function () {
                return Yt;
              }),
              n.d(t, "SRGB8_ALPHA8_ASTC_10x5_Format", function () {
                return Gt;
              }),
              n.d(t, "SRGB8_ALPHA8_ASTC_10x6_Format", function () {
                return Ht;
              }),
              n.d(t, "SRGB8_ALPHA8_ASTC_10x8_Format", function () {
                return Wt;
              }),
              n.d(t, "SRGB8_ALPHA8_ASTC_12x10_Format", function () {
                return qt;
              }),
              n.d(t, "SRGB8_ALPHA8_ASTC_12x12_Format", function () {
                return Xt;
              }),
              n.d(t, "SRGB8_ALPHA8_ASTC_4x4_Format", function () {
                return Nt;
              }),
              n.d(t, "SRGB8_ALPHA8_ASTC_5x4_Format", function () {
                return Ot;
              }),
              n.d(t, "SRGB8_ALPHA8_ASTC_5x5_Format", function () {
                return Bt;
              }),
              n.d(t, "SRGB8_ALPHA8_ASTC_6x5_Format", function () {
                return Dt;
              }),
              n.d(t, "SRGB8_ALPHA8_ASTC_6x6_Format", function () {
                return Vt;
              }),
              n.d(t, "SRGB8_ALPHA8_ASTC_8x5_Format", function () {
                return Ut;
              }),
              n.d(t, "SRGB8_ALPHA8_ASTC_8x6_Format", function () {
                return zt;
              }),
              n.d(t, "SRGB8_ALPHA8_ASTC_8x8_Format", function () {
                return jt;
              }),
              n.d(t, "Scene", function () {
                return vl;
              }),
              n.d(t, "SceneUtils", function () {
                return Hf;
              }),
              n.d(t, "ShaderChunk", function () {
                return eo;
              }),
              n.d(t, "ShaderLib", function () {
                return no;
              }),
              n.d(t, "ShaderMaterial", function () {
                return ja;
              }),
              n.d(t, "ShadowMaterial", function () {
                return Sc;
              }),
              n.d(t, "Shape", function () {
                return kh;
              }),
              n.d(t, "ShapeBufferGeometry", function () {
                return fc;
              }),
              n.d(t, "ShapeGeometry", function () {
                return fc;
              }),
              n.d(t, "ShapePath", function () {
                return od;
              }),
              n.d(t, "ShapeUtils", function () {
                return rc;
              }),
              n.d(t, "ShortType", function () {
                return Ve;
              }),
              n.d(t, "Skeleton", function () {
                return Ql;
              }),
              n.d(t, "SkeletonHelper", function () {
                return dp;
              }),
              n.d(t, "SkinnedMesh", function () {
                return Hl;
              }),
              n.d(t, "SmoothShading", function () {
                return L;
              }),
              n.d(t, "Sphere", function () {
                return Gi;
              }),
              n.d(t, "SphereBufferGeometry", function () {
                return mc;
              }),
              n.d(t, "SphereGeometry", function () {
                return mc;
              }),
              n.d(t, "Spherical", function () {
                return $d;
              }),
              n.d(t, "SphericalHarmonics3", function () {
                return Xh;
              }),
              n.d(t, "SplineCurve", function () {
                return Mh;
              }),
              n.d(t, "SpotLight", function () {
                return Bh;
              }),
              n.d(t, "SpotLightHelper", function () {
                return lp;
              }),
              n.d(t, "Sprite", function () {
                return Fl;
              }),
              n.d(t, "SpriteMaterial", function () {
                return _l;
              }),
              n.d(t, "SrcAlphaFactor", function () {
                return q;
              }),
              n.d(t, "SrcAlphaSaturateFactor", function () {
                return $;
              }),
              n.d(t, "SrcColorFactor", function () {
                return W;
              }),
              n.d(t, "StaticCopyUsage", function () {
                return Hn;
              }),
              n.d(t, "StaticDrawUsage", function () {
                return Dn;
              }),
              n.d(t, "StaticReadUsage", function () {
                return zn;
              }),
              n.d(t, "StereoCamera", function () {
                return yd;
              }),
              n.d(t, "StreamCopyUsage", function () {
                return Yn;
              }),
              n.d(t, "StreamDrawUsage", function () {
                return Un;
              }),
              n.d(t, "StreamReadUsage", function () {
                return Gn;
              }),
              n.d(t, "StringKeyframeTrack", function () {
                return Wc;
              }),
              n.d(t, "SubtractEquation", function () {
                return V;
              }),
              n.d(t, "SubtractiveBlending", function () {
                return N;
              }),
              n.d(t, "TOUCH", function () {
                return y;
              }),
              n.d(t, "TangentSpaceNormalMap", function () {
                return bn;
              }),
              n.d(t, "TetrahedronBufferGeometry", function () {
                return vc;
              }),
              n.d(t, "TetrahedronGeometry", function () {
                return vc;
              }),
              n.d(t, "TextBufferGeometry", function () {
                return gc;
              }),
              n.d(t, "TextGeometry", function () {
                return gc;
              }),
              n.d(t, "Texture", function () {
                return fi;
              }),
              n.d(t, "TextureLoader", function () {
                return oh;
              }),
              n.d(t, "TorusBufferGeometry", function () {
                return yc;
              }),
              n.d(t, "TorusGeometry", function () {
                return yc;
              }),
              n.d(t, "TorusKnotBufferGeometry", function () {
                return xc;
              }),
              n.d(t, "TorusKnotGeometry", function () {
                return xc;
              }),
              n.d(t, "Triangle", function () {
                return Dr;
              }),
              n.d(t, "TriangleFanDrawMode", function () {
                return un;
              }),
              n.d(t, "TriangleStripDrawMode", function () {
                return ln;
              }),
              n.d(t, "TrianglesDrawMode", function () {
                return sn;
              }),
              n.d(t, "TubeBufferGeometry", function () {
                return bc;
              }),
              n.d(t, "TubeGeometry", function () {
                return bc;
              }),
              n.d(t, "UVMapping", function () {
                return ge;
              }),
              n.d(t, "Uint16Attribute", function () {
                return Pf;
              }),
              n.d(t, "Uint16BufferAttribute", function () {
                return na;
              }),
              n.d(t, "Uint32Attribute", function () {
                return Rf;
              }),
              n.d(t, "Uint32BufferAttribute", function () {
                return ra;
              }),
              n.d(t, "Uint8Attribute", function () {
                return Tf;
              }),
              n.d(t, "Uint8BufferAttribute", function () {
                return $r;
              }),
              n.d(t, "Uint8ClampedAttribute", function () {
                return Cf;
              }),
              n.d(t, "Uint8ClampedBufferAttribute", function () {
                return ea;
              }),
              n.d(t, "Uniform", function () {
                return qd;
              }),
              n.d(t, "UniformsLib", function () {
                return to;
              }),
              n.d(t, "UniformsUtils", function () {
                return za;
              }),
              n.d(t, "UnsignedByteType", function () {
                return Be;
              }),
              n.d(t, "UnsignedInt248Type", function () {
                return Xe;
              }),
              n.d(t, "UnsignedIntType", function () {
                return je;
              }),
              n.d(t, "UnsignedShort4444Type", function () {
                return We;
              }),
              n.d(t, "UnsignedShort5551Type", function () {
                return Ye;
              }),
              n.d(t, "UnsignedShort565Type", function () {
                return qe;
              }),
              n.d(t, "UnsignedShortType", function () {
                return Ue;
              }),
              n.d(t, "VSMShadowMap", function () {
                return A;
              }),
              n.d(t, "Vector2", function () {
                return ui;
              }),
              n.d(t, "Vector3", function () {
                return _i;
              }),
              n.d(t, "Vector4", function () {
                return vi;
              }),
              n.d(t, "VectorKeyframeTrack", function () {
                return Yc;
              }),
              n.d(t, "Vertex", function () {
                return Ef;
              }),
              n.d(t, "VertexColors", function () {
                return mf;
              }),
              n.d(t, "VideoTexture", function () {
                return xu;
              }),
              n.d(t, "WebGL1Renderer", function () {
                return pl;
              }),
              n.d(t, "WebGLCubeRenderTarget", function () {
                return qa;
              }),
              n.d(t, "WebGLMultipleRenderTargets", function () {
                return yi;
              }),
              n.d(t, "WebGLMultisampleRenderTarget", function () {
                return xi;
              }),
              n.d(t, "WebGLRenderTarget", function () {
                return gi;
              }),
              n.d(t, "WebGLRenderTargetCube", function () {
                return zf;
              }),
              n.d(t, "WebGLRenderer", function () {
                return dl;
              }),
              n.d(t, "WebGLUtils", function () {
                return al;
              }),
              n.d(t, "WireframeGeometry", function () {
                return _c;
              }),
              n.d(t, "WireframeHelper", function () {
                return Df;
              }),
              n.d(t, "WrapAroundEnding", function () {
                return rn;
              }),
              n.d(t, "XHRLoader", function () {
                return Vf;
              }),
              n.d(t, "ZeroCurvatureEnding", function () {
                return tn;
              }),
              n.d(t, "ZeroFactor", function () {
                return G;
              }),
              n.d(t, "ZeroSlopeEnding", function () {
                return nn;
              }),
              n.d(t, "ZeroStencilOp", function () {
                return wn;
              }),
              n.d(t, "sRGBEncoding", function () {
                return hn;
              });
            for (
              var v = "129",
                g = {
                  LEFT: 0,
                  MIDDLE: 1,
                  RIGHT: 2,
                  ROTATE: 0,
                  DOLLY: 1,
                  PAN: 2,
                },
                y = { ROTATE: 0, PAN: 1, DOLLY_PAN: 2, DOLLY_ROTATE: 3 },
                x = 0,
                b = 1,
                _ = 2,
                w = 3,
                S = 0,
                E = 1,
                M = 2,
                A = 3,
                T = 0,
                C = 1,
                k = 2,
                P = 1,
                L = 2,
                R = 0,
                I = 1,
                F = 2,
                N = 3,
                O = 4,
                B = 5,
                D = 100,
                V = 101,
                U = 102,
                z = 103,
                j = 104,
                G = 200,
                H = 201,
                W = 202,
                Y = 203,
                q = 204,
                X = 205,
                Q = 206,
                Z = 207,
                J = 208,
                K = 209,
                $ = 210,
                ee = 0,
                te = 1,
                ne = 2,
                ie = 3,
                re = 4,
                ae = 5,
                oe = 6,
                se = 7,
                le = 0,
                ue = 1,
                ce = 2,
                he = 0,
                de = 1,
                pe = 2,
                fe = 3,
                me = 4,
                ve = 5,
                ge = 300,
                ye = 301,
                xe = 302,
                be = 303,
                _e = 304,
                we = 306,
                Se = 307,
                Ee = 1e3,
                Me = 1001,
                Ae = 1002,
                Te = 1003,
                Ce = 1004,
                ke = 1004,
                Pe = 1005,
                Le = 1005,
                Re = 1006,
                Ie = 1007,
                Fe = 1007,
                Ne = 1008,
                Oe = 1008,
                Be = 1009,
                De = 1010,
                Ve = 1011,
                Ue = 1012,
                ze = 1013,
                je = 1014,
                Ge = 1015,
                He = 1016,
                We = 1017,
                Ye = 1018,
                qe = 1019,
                Xe = 1020,
                Qe = 1021,
                Ze = 1022,
                Je = 1023,
                Ke = 1024,
                $e = 1025,
                et = Je,
                tt = 1026,
                nt = 1027,
                it = 1028,
                rt = 1029,
                at = 1030,
                ot = 1031,
                st = 1032,
                lt = 1033,
                ut = 33776,
                ct = 33777,
                ht = 33778,
                dt = 33779,
                pt = 35840,
                ft = 35841,
                mt = 35842,
                vt = 35843,
                gt = 36196,
                yt = 37492,
                xt = 37496,
                bt = 37808,
                _t = 37809,
                wt = 37810,
                St = 37811,
                Et = 37812,
                Mt = 37813,
                At = 37814,
                Tt = 37815,
                Ct = 37816,
                kt = 37817,
                Pt = 37818,
                Lt = 37819,
                Rt = 37820,
                It = 37821,
                Ft = 36492,
                Nt = 37840,
                Ot = 37841,
                Bt = 37842,
                Dt = 37843,
                Vt = 37844,
                Ut = 37845,
                zt = 37846,
                jt = 37847,
                Gt = 37848,
                Ht = 37849,
                Wt = 37850,
                Yt = 37851,
                qt = 37852,
                Xt = 37853,
                Qt = 2200,
                Zt = 2201,
                Jt = 2202,
                Kt = 2300,
                $t = 2301,
                en = 2302,
                tn = 2400,
                nn = 2401,
                rn = 2402,
                an = 2500,
                on = 2501,
                sn = 0,
                ln = 1,
                un = 2,
                cn = 3e3,
                hn = 3001,
                dn = 3007,
                pn = 3002,
                fn = 3003,
                mn = 3004,
                vn = 3005,
                gn = 3006,
                yn = 3200,
                xn = 3201,
                bn = 0,
                _n = 1,
                wn = 0,
                Sn = 7680,
                En = 7681,
                Mn = 7682,
                An = 7683,
                Tn = 34055,
                Cn = 34056,
                kn = 5386,
                Pn = 512,
                Ln = 513,
                Rn = 514,
                In = 515,
                Fn = 516,
                Nn = 517,
                On = 518,
                Bn = 519,
                Dn = 35044,
                Vn = 35048,
                Un = 35040,
                zn = 35045,
                jn = 35049,
                Gn = 35041,
                Hn = 35046,
                Wn = 35050,
                Yn = 35042,
                qn = "100",
                Xn = "300 es",
                Qn = (function () {
                  function e() {
                    f(this, e);
                  }
                  return (
                    m(e, [
                      {
                        key: "addEventListener",
                        value: function (e, t) {
                          void 0 === this._listeners && (this._listeners = {});
                          var n = this._listeners;
                          void 0 === n[e] && (n[e] = []),
                            -1 === n[e].indexOf(t) && n[e].push(t);
                        },
                      },
                      {
                        key: "hasEventListener",
                        value: function (e, t) {
                          if (void 0 === this._listeners) return !1;
                          var n = this._listeners;
                          return void 0 !== n[e] && -1 !== n[e].indexOf(t);
                        },
                      },
                      {
                        key: "removeEventListener",
                        value: function (e, t) {
                          if (void 0 !== this._listeners) {
                            var n = this._listeners[e];
                            if (void 0 !== n) {
                              var i = n.indexOf(t);
                              -1 !== i && n.splice(i, 1);
                            }
                          }
                        },
                      },
                      {
                        key: "dispatchEvent",
                        value: function (e) {
                          if (void 0 !== this._listeners) {
                            var t = this._listeners[e.type];
                            if (void 0 !== t) {
                              e.target = this;
                              for (
                                var n = t.slice(0), i = 0, r = n.length;
                                i < r;
                                i++
                              )
                                n[i].call(this, e);
                              e.target = null;
                            }
                          }
                        },
                      },
                    ]),
                    e
                  );
                })(),
                Zn = [],
                Jn = 0;
              Jn < 256;
              Jn++
            )
              Zn[Jn] = (Jn < 16 ? "0" : "") + Jn.toString(16);
            var Kn = 1234567,
              $n = Math.PI / 180,
              ei = 180 / Math.PI;
            function ti() {
              var e = (4294967295 * Math.random()) | 0,
                t = (4294967295 * Math.random()) | 0,
                n = (4294967295 * Math.random()) | 0,
                i = (4294967295 * Math.random()) | 0;
              return (
                Zn[255 & e] +
                Zn[(e >> 8) & 255] +
                Zn[(e >> 16) & 255] +
                Zn[(e >> 24) & 255] +
                "-" +
                Zn[255 & t] +
                Zn[(t >> 8) & 255] +
                "-" +
                Zn[((t >> 16) & 15) | 64] +
                Zn[(t >> 24) & 255] +
                "-" +
                Zn[(63 & n) | 128] +
                Zn[(n >> 8) & 255] +
                "-" +
                Zn[(n >> 16) & 255] +
                Zn[(n >> 24) & 255] +
                Zn[255 & i] +
                Zn[(i >> 8) & 255] +
                Zn[(i >> 16) & 255] +
                Zn[(i >> 24) & 255]
              ).toUpperCase();
            }
            function ni(e, t, n) {
              return Math.max(t, Math.min(n, e));
            }
            function ii(e, t) {
              return ((e % t) + t) % t;
            }
            function ri(e, t, n) {
              return (1 - n) * e + n * t;
            }
            function ai(e) {
              return 0 === (e & (e - 1)) && 0 !== e;
            }
            function oi(e) {
              return Math.pow(2, Math.ceil(Math.log(e) / Math.LN2));
            }
            function si(e) {
              return Math.pow(2, Math.floor(Math.log(e) / Math.LN2));
            }
            var li = Object.freeze({
                __proto__: null,
                DEG2RAD: $n,
                RAD2DEG: ei,
                generateUUID: ti,
                clamp: ni,
                euclideanModulo: ii,
                mapLinear: function (e, t, n, i, r) {
                  return i + ((e - t) * (r - i)) / (n - t);
                },
                inverseLerp: function (e, t, n) {
                  return e !== t ? (n - e) / (t - e) : 0;
                },
                lerp: ri,
                damp: function (e, t, n, i) {
                  return ri(e, t, 1 - Math.exp(-n * i));
                },
                pingpong: function (e) {
                  var t =
                    arguments.length > 1 && void 0 !== arguments[1]
                      ? arguments[1]
                      : 1;
                  return t - Math.abs(ii(e, 2 * t) - t);
                },
                smoothstep: function (e, t, n) {
                  return e <= t
                    ? 0
                    : e >= n
                    ? 1
                    : (e = (e - t) / (n - t)) * e * (3 - 2 * e);
                },
                smootherstep: function (e, t, n) {
                  return e <= t
                    ? 0
                    : e >= n
                    ? 1
                    : (e = (e - t) / (n - t)) * e * e * (e * (6 * e - 15) + 10);
                },
                randInt: function (e, t) {
                  return e + Math.floor(Math.random() * (t - e + 1));
                },
                randFloat: function (e, t) {
                  return e + Math.random() * (t - e);
                },
                randFloatSpread: function (e) {
                  return e * (0.5 - Math.random());
                },
                seededRandom: function (e) {
                  return (
                    void 0 !== e && (Kn = e % 2147483647),
                    ((Kn = (16807 * Kn) % 2147483647) - 1) / 2147483646
                  );
                },
                degToRad: function (e) {
                  return e * $n;
                },
                radToDeg: function (e) {
                  return e * ei;
                },
                isPowerOfTwo: ai,
                ceilPowerOfTwo: oi,
                floorPowerOfTwo: si,
                setQuaternionFromProperEuler: function (e, t, n, i, r) {
                  var a = Math.cos,
                    o = Math.sin,
                    s = a(n / 2),
                    l = o(n / 2),
                    u = a((t + i) / 2),
                    c = o((t + i) / 2),
                    h = a((t - i) / 2),
                    d = o((t - i) / 2),
                    p = a((i - t) / 2),
                    f = o((i - t) / 2);
                  switch (r) {
                    case "XYX":
                      e.set(s * c, l * h, l * d, s * u);
                      break;
                    case "YZY":
                      e.set(l * d, s * c, l * h, s * u);
                      break;
                    case "ZXZ":
                      e.set(l * h, l * d, s * c, s * u);
                      break;
                    case "XZX":
                      e.set(s * c, l * f, l * p, s * u);
                      break;
                    case "YXY":
                      e.set(l * p, s * c, l * f, s * u);
                      break;
                    case "ZYZ":
                      e.set(l * f, l * p, s * c, s * u);
                      break;
                    default:
                      console.warn(
                        "THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: " +
                          r
                      );
                  }
                },
              }),
              ui = (function () {
                function e() {
                  var t =
                      arguments.length > 0 && void 0 !== arguments[0]
                        ? arguments[0]
                        : 0,
                    n =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : 0;
                  f(this, e), (this.x = t), (this.y = n);
                }
                return (
                  m(e, [
                    {
                      key: "set",
                      value: function (e, t) {
                        return (this.x = e), (this.y = t), this;
                      },
                    },
                    {
                      key: "setScalar",
                      value: function (e) {
                        return (this.x = e), (this.y = e), this;
                      },
                    },
                    {
                      key: "setX",
                      value: function (e) {
                        return (this.x = e), this;
                      },
                    },
                    {
                      key: "setY",
                      value: function (e) {
                        return (this.y = e), this;
                      },
                    },
                    {
                      key: "setComponent",
                      value: function (e, t) {
                        switch (e) {
                          case 0:
                            this.x = t;
                            break;
                          case 1:
                            this.y = t;
                            break;
                          default:
                            throw new Error("index is out of range: " + e);
                        }
                        return this;
                      },
                    },
                    {
                      key: "getComponent",
                      value: function (e) {
                        switch (e) {
                          case 0:
                            return this.x;
                          case 1:
                            return this.y;
                          default:
                            throw new Error("index is out of range: " + e);
                        }
                      },
                    },
                    {
                      key: "clone",
                      value: function () {
                        return new this.constructor(this.x, this.y);
                      },
                    },
                    {
                      key: "copy",
                      value: function (e) {
                        return (this.x = e.x), (this.y = e.y), this;
                      },
                    },
                    {
                      key: "add",
                      value: function (e, t) {
                        return void 0 !== t
                          ? (console.warn(
                              "THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."
                            ),
                            this.addVectors(e, t))
                          : ((this.x += e.x), (this.y += e.y), this);
                      },
                    },
                    {
                      key: "addScalar",
                      value: function (e) {
                        return (this.x += e), (this.y += e), this;
                      },
                    },
                    {
                      key: "addVectors",
                      value: function (e, t) {
                        return (this.x = e.x + t.x), (this.y = e.y + t.y), this;
                      },
                    },
                    {
                      key: "addScaledVector",
                      value: function (e, t) {
                        return (this.x += e.x * t), (this.y += e.y * t), this;
                      },
                    },
                    {
                      key: "sub",
                      value: function (e, t) {
                        return void 0 !== t
                          ? (console.warn(
                              "THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."
                            ),
                            this.subVectors(e, t))
                          : ((this.x -= e.x), (this.y -= e.y), this);
                      },
                    },
                    {
                      key: "subScalar",
                      value: function (e) {
                        return (this.x -= e), (this.y -= e), this;
                      },
                    },
                    {
                      key: "subVectors",
                      value: function (e, t) {
                        return (this.x = e.x - t.x), (this.y = e.y - t.y), this;
                      },
                    },
                    {
                      key: "multiply",
                      value: function (e) {
                        return (this.x *= e.x), (this.y *= e.y), this;
                      },
                    },
                    {
                      key: "multiplyScalar",
                      value: function (e) {
                        return (this.x *= e), (this.y *= e), this;
                      },
                    },
                    {
                      key: "divide",
                      value: function (e) {
                        return (this.x /= e.x), (this.y /= e.y), this;
                      },
                    },
                    {
                      key: "divideScalar",
                      value: function (e) {
                        return this.multiplyScalar(1 / e);
                      },
                    },
                    {
                      key: "applyMatrix3",
                      value: function (e) {
                        var t = this.x,
                          n = this.y,
                          i = e.elements;
                        return (
                          (this.x = i[0] * t + i[3] * n + i[6]),
                          (this.y = i[1] * t + i[4] * n + i[7]),
                          this
                        );
                      },
                    },
                    {
                      key: "min",
                      value: function (e) {
                        return (
                          (this.x = Math.min(this.x, e.x)),
                          (this.y = Math.min(this.y, e.y)),
                          this
                        );
                      },
                    },
                    {
                      key: "max",
                      value: function (e) {
                        return (
                          (this.x = Math.max(this.x, e.x)),
                          (this.y = Math.max(this.y, e.y)),
                          this
                        );
                      },
                    },
                    {
                      key: "clamp",
                      value: function (e, t) {
                        return (
                          (this.x = Math.max(e.x, Math.min(t.x, this.x))),
                          (this.y = Math.max(e.y, Math.min(t.y, this.y))),
                          this
                        );
                      },
                    },
                    {
                      key: "clampScalar",
                      value: function (e, t) {
                        return (
                          (this.x = Math.max(e, Math.min(t, this.x))),
                          (this.y = Math.max(e, Math.min(t, this.y))),
                          this
                        );
                      },
                    },
                    {
                      key: "clampLength",
                      value: function (e, t) {
                        var n = this.length();
                        return this.divideScalar(n || 1).multiplyScalar(
                          Math.max(e, Math.min(t, n))
                        );
                      },
                    },
                    {
                      key: "floor",
                      value: function () {
                        return (
                          (this.x = Math.floor(this.x)),
                          (this.y = Math.floor(this.y)),
                          this
                        );
                      },
                    },
                    {
                      key: "ceil",
                      value: function () {
                        return (
                          (this.x = Math.ceil(this.x)),
                          (this.y = Math.ceil(this.y)),
                          this
                        );
                      },
                    },
                    {
                      key: "round",
                      value: function () {
                        return (
                          (this.x = Math.round(this.x)),
                          (this.y = Math.round(this.y)),
                          this
                        );
                      },
                    },
                    {
                      key: "roundToZero",
                      value: function () {
                        return (
                          (this.x =
                            this.x < 0
                              ? Math.ceil(this.x)
                              : Math.floor(this.x)),
                          (this.y =
                            this.y < 0
                              ? Math.ceil(this.y)
                              : Math.floor(this.y)),
                          this
                        );
                      },
                    },
                    {
                      key: "negate",
                      value: function () {
                        return (this.x = -this.x), (this.y = -this.y), this;
                      },
                    },
                    {
                      key: "dot",
                      value: function (e) {
                        return this.x * e.x + this.y * e.y;
                      },
                    },
                    {
                      key: "cross",
                      value: function (e) {
                        return this.x * e.y - this.y * e.x;
                      },
                    },
                    {
                      key: "lengthSq",
                      value: function () {
                        return this.x * this.x + this.y * this.y;
                      },
                    },
                    {
                      key: "length",
                      value: function () {
                        return Math.sqrt(this.x * this.x + this.y * this.y);
                      },
                    },
                    {
                      key: "manhattanLength",
                      value: function () {
                        return Math.abs(this.x) + Math.abs(this.y);
                      },
                    },
                    {
                      key: "normalize",
                      value: function () {
                        return this.divideScalar(this.length() || 1);
                      },
                    },
                    {
                      key: "angle",
                      value: function () {
                        var e = Math.atan2(-this.y, -this.x) + Math.PI;
                        return e;
                      },
                    },
                    {
                      key: "distanceTo",
                      value: function (e) {
                        return Math.sqrt(this.distanceToSquared(e));
                      },
                    },
                    {
                      key: "distanceToSquared",
                      value: function (e) {
                        var t = this.x - e.x,
                          n = this.y - e.y;
                        return t * t + n * n;
                      },
                    },
                    {
                      key: "manhattanDistanceTo",
                      value: function (e) {
                        return Math.abs(this.x - e.x) + Math.abs(this.y - e.y);
                      },
                    },
                    {
                      key: "setLength",
                      value: function (e) {
                        return this.normalize().multiplyScalar(e);
                      },
                    },
                    {
                      key: "lerp",
                      value: function (e, t) {
                        return (
                          (this.x += (e.x - this.x) * t),
                          (this.y += (e.y - this.y) * t),
                          this
                        );
                      },
                    },
                    {
                      key: "lerpVectors",
                      value: function (e, t, n) {
                        return (
                          (this.x = e.x + (t.x - e.x) * n),
                          (this.y = e.y + (t.y - e.y) * n),
                          this
                        );
                      },
                    },
                    {
                      key: "equals",
                      value: function (e) {
                        return e.x === this.x && e.y === this.y;
                      },
                    },
                    {
                      key: "fromArray",
                      value: function (e) {
                        var t =
                          arguments.length > 1 && void 0 !== arguments[1]
                            ? arguments[1]
                            : 0;
                        return (this.x = e[t]), (this.y = e[t + 1]), this;
                      },
                    },
                    {
                      key: "toArray",
                      value: function () {
                        var e =
                            arguments.length > 0 && void 0 !== arguments[0]
                              ? arguments[0]
                              : [],
                          t =
                            arguments.length > 1 && void 0 !== arguments[1]
                              ? arguments[1]
                              : 0;
                        return (e[t] = this.x), (e[t + 1] = this.y), e;
                      },
                    },
                    {
                      key: "fromBufferAttribute",
                      value: function (e, t, n) {
                        return (
                          void 0 !== n &&
                            console.warn(
                              "THREE.Vector2: offset has been removed from .fromBufferAttribute()."
                            ),
                          (this.x = e.getX(t)),
                          (this.y = e.getY(t)),
                          this
                        );
                      },
                    },
                    {
                      key: "rotateAround",
                      value: function (e, t) {
                        var n = Math.cos(t),
                          i = Math.sin(t),
                          r = this.x - e.x,
                          a = this.y - e.y;
                        return (
                          (this.x = r * n - a * i + e.x),
                          (this.y = r * i + a * n + e.y),
                          this
                        );
                      },
                    },
                    {
                      key: "random",
                      value: function () {
                        return (
                          (this.x = Math.random()),
                          (this.y = Math.random()),
                          this
                        );
                      },
                    },
                    {
                      key: "width",
                      get: function () {
                        return this.x;
                      },
                      set: function (e) {
                        this.x = e;
                      },
                    },
                    {
                      key: "height",
                      get: function () {
                        return this.y;
                      },
                      set: function (e) {
                        this.y = e;
                      },
                    },
                  ]),
                  e
                );
              })();
            ui.prototype.isVector2 = !0;
            var ci,
              hi = (function () {
                function e() {
                  f(this, e),
                    (this.elements = [1, 0, 0, 0, 1, 0, 0, 0, 1]),
                    arguments.length > 0 &&
                      console.error(
                        "THREE.Matrix3: the constructor no longer reads arguments. use .set() instead."
                      );
                }
                return (
                  m(e, [
                    {
                      key: "set",
                      value: function (e, t, n, i, r, a, o, s, l) {
                        var u = this.elements;
                        return (
                          (u[0] = e),
                          (u[1] = i),
                          (u[2] = o),
                          (u[3] = t),
                          (u[4] = r),
                          (u[5] = s),
                          (u[6] = n),
                          (u[7] = a),
                          (u[8] = l),
                          this
                        );
                      },
                    },
                    {
                      key: "identity",
                      value: function () {
                        return this.set(1, 0, 0, 0, 1, 0, 0, 0, 1), this;
                      },
                    },
                    {
                      key: "copy",
                      value: function (e) {
                        var t = this.elements,
                          n = e.elements;
                        return (
                          (t[0] = n[0]),
                          (t[1] = n[1]),
                          (t[2] = n[2]),
                          (t[3] = n[3]),
                          (t[4] = n[4]),
                          (t[5] = n[5]),
                          (t[6] = n[6]),
                          (t[7] = n[7]),
                          (t[8] = n[8]),
                          this
                        );
                      },
                    },
                    {
                      key: "extractBasis",
                      value: function (e, t, n) {
                        return (
                          e.setFromMatrix3Column(this, 0),
                          t.setFromMatrix3Column(this, 1),
                          n.setFromMatrix3Column(this, 2),
                          this
                        );
                      },
                    },
                    {
                      key: "setFromMatrix4",
                      value: function (e) {
                        var t = e.elements;
                        return (
                          this.set(
                            t[0],
                            t[4],
                            t[8],
                            t[1],
                            t[5],
                            t[9],
                            t[2],
                            t[6],
                            t[10]
                          ),
                          this
                        );
                      },
                    },
                    {
                      key: "multiply",
                      value: function (e) {
                        return this.multiplyMatrices(this, e);
                      },
                    },
                    {
                      key: "premultiply",
                      value: function (e) {
                        return this.multiplyMatrices(e, this);
                      },
                    },
                    {
                      key: "multiplyMatrices",
                      value: function (e, t) {
                        var n = e.elements,
                          i = t.elements,
                          r = this.elements,
                          a = n[0],
                          o = n[3],
                          s = n[6],
                          l = n[1],
                          u = n[4],
                          c = n[7],
                          h = n[2],
                          d = n[5],
                          p = n[8],
                          f = i[0],
                          m = i[3],
                          v = i[6],
                          g = i[1],
                          y = i[4],
                          x = i[7],
                          b = i[2],
                          _ = i[5],
                          w = i[8];
                        return (
                          (r[0] = a * f + o * g + s * b),
                          (r[3] = a * m + o * y + s * _),
                          (r[6] = a * v + o * x + s * w),
                          (r[1] = l * f + u * g + c * b),
                          (r[4] = l * m + u * y + c * _),
                          (r[7] = l * v + u * x + c * w),
                          (r[2] = h * f + d * g + p * b),
                          (r[5] = h * m + d * y + p * _),
                          (r[8] = h * v + d * x + p * w),
                          this
                        );
                      },
                    },
                    {
                      key: "multiplyScalar",
                      value: function (e) {
                        var t = this.elements;
                        return (
                          (t[0] *= e),
                          (t[3] *= e),
                          (t[6] *= e),
                          (t[1] *= e),
                          (t[4] *= e),
                          (t[7] *= e),
                          (t[2] *= e),
                          (t[5] *= e),
                          (t[8] *= e),
                          this
                        );
                      },
                    },
                    {
                      key: "determinant",
                      value: function () {
                        var e = this.elements,
                          t = e[0],
                          n = e[1],
                          i = e[2],
                          r = e[3],
                          a = e[4],
                          o = e[5],
                          s = e[6],
                          l = e[7],
                          u = e[8];
                        return (
                          t * a * u -
                          t * o * l -
                          n * r * u +
                          n * o * s +
                          i * r * l -
                          i * a * s
                        );
                      },
                    },
                    {
                      key: "invert",
                      value: function () {
                        var e = this.elements,
                          t = e[0],
                          n = e[1],
                          i = e[2],
                          r = e[3],
                          a = e[4],
                          o = e[5],
                          s = e[6],
                          l = e[7],
                          u = e[8],
                          c = u * a - o * l,
                          h = o * s - u * r,
                          d = l * r - a * s,
                          p = t * c + n * h + i * d;
                        if (0 === p) return this.set(0, 0, 0, 0, 0, 0, 0, 0, 0);
                        var f = 1 / p;
                        return (
                          (e[0] = c * f),
                          (e[1] = (i * l - u * n) * f),
                          (e[2] = (o * n - i * a) * f),
                          (e[3] = h * f),
                          (e[4] = (u * t - i * s) * f),
                          (e[5] = (i * r - o * t) * f),
                          (e[6] = d * f),
                          (e[7] = (n * s - l * t) * f),
                          (e[8] = (a * t - n * r) * f),
                          this
                        );
                      },
                    },
                    {
                      key: "transpose",
                      value: function () {
                        var e,
                          t = this.elements;
                        return (
                          (e = t[1]),
                          (t[1] = t[3]),
                          (t[3] = e),
                          (e = t[2]),
                          (t[2] = t[6]),
                          (t[6] = e),
                          (e = t[5]),
                          (t[5] = t[7]),
                          (t[7] = e),
                          this
                        );
                      },
                    },
                    {
                      key: "getNormalMatrix",
                      value: function (e) {
                        return this.setFromMatrix4(e).invert().transpose();
                      },
                    },
                    {
                      key: "transposeIntoArray",
                      value: function (e) {
                        var t = this.elements;
                        return (
                          (e[0] = t[0]),
                          (e[1] = t[3]),
                          (e[2] = t[6]),
                          (e[3] = t[1]),
                          (e[4] = t[4]),
                          (e[5] = t[7]),
                          (e[6] = t[2]),
                          (e[7] = t[5]),
                          (e[8] = t[8]),
                          this
                        );
                      },
                    },
                    {
                      key: "setUvTransform",
                      value: function (e, t, n, i, r, a, o) {
                        var s = Math.cos(r),
                          l = Math.sin(r);
                        return (
                          this.set(
                            n * s,
                            n * l,
                            -n * (s * a + l * o) + a + e,
                            -i * l,
                            i * s,
                            -i * (-l * a + s * o) + o + t,
                            0,
                            0,
                            1
                          ),
                          this
                        );
                      },
                    },
                    {
                      key: "scale",
                      value: function (e, t) {
                        var n = this.elements;
                        return (
                          (n[0] *= e),
                          (n[3] *= e),
                          (n[6] *= e),
                          (n[1] *= t),
                          (n[4] *= t),
                          (n[7] *= t),
                          this
                        );
                      },
                    },
                    {
                      key: "rotate",
                      value: function (e) {
                        var t = Math.cos(e),
                          n = Math.sin(e),
                          i = this.elements,
                          r = i[0],
                          a = i[3],
                          o = i[6],
                          s = i[1],
                          l = i[4],
                          u = i[7];
                        return (
                          (i[0] = t * r + n * s),
                          (i[3] = t * a + n * l),
                          (i[6] = t * o + n * u),
                          (i[1] = -n * r + t * s),
                          (i[4] = -n * a + t * l),
                          (i[7] = -n * o + t * u),
                          this
                        );
                      },
                    },
                    {
                      key: "translate",
                      value: function (e, t) {
                        var n = this.elements;
                        return (
                          (n[0] += e * n[2]),
                          (n[3] += e * n[5]),
                          (n[6] += e * n[8]),
                          (n[1] += t * n[2]),
                          (n[4] += t * n[5]),
                          (n[7] += t * n[8]),
                          this
                        );
                      },
                    },
                    {
                      key: "equals",
                      value: function (e) {
                        for (
                          var t = this.elements, n = e.elements, i = 0;
                          i < 9;
                          i++
                        )
                          if (t[i] !== n[i]) return !1;
                        return !0;
                      },
                    },
                    {
                      key: "fromArray",
                      value: function (e) {
                        for (
                          var t =
                              arguments.length > 1 && void 0 !== arguments[1]
                                ? arguments[1]
                                : 0,
                            n = 0;
                          n < 9;
                          n++
                        )
                          this.elements[n] = e[n + t];
                        return this;
                      },
                    },
                    {
                      key: "toArray",
                      value: function () {
                        var e =
                            arguments.length > 0 && void 0 !== arguments[0]
                              ? arguments[0]
                              : [],
                          t =
                            arguments.length > 1 && void 0 !== arguments[1]
                              ? arguments[1]
                              : 0,
                          n = this.elements;
                        return (
                          (e[t] = n[0]),
                          (e[t + 1] = n[1]),
                          (e[t + 2] = n[2]),
                          (e[t + 3] = n[3]),
                          (e[t + 4] = n[4]),
                          (e[t + 5] = n[5]),
                          (e[t + 6] = n[6]),
                          (e[t + 7] = n[7]),
                          (e[t + 8] = n[8]),
                          e
                        );
                      },
                    },
                    {
                      key: "clone",
                      value: function () {
                        return new this.constructor().fromArray(this.elements);
                      },
                    },
                  ]),
                  e
                );
              })();
            hi.prototype.isMatrix3 = !0;
            var di = (function () {
                function e() {
                  f(this, e);
                }
                return (
                  m(e, null, [
                    {
                      key: "getDataURL",
                      value: function (e) {
                        if (/^data:/i.test(e.src)) return e.src;
                        if ("undefined" == typeof HTMLCanvasElement)
                          return e.src;
                        var t;
                        if (e instanceof HTMLCanvasElement) t = e;
                        else {
                          void 0 === ci &&
                            (ci = document.createElementNS(
                              "http://www.w3.org/1999/xhtml",
                              "canvas"
                            )),
                            (ci.width = e.width),
                            (ci.height = e.height);
                          var n = ci.getContext("2d");
                          e instanceof ImageData
                            ? n.putImageData(e, 0, 0)
                            : n.drawImage(e, 0, 0, e.width, e.height),
                            (t = ci);
                        }
                        return t.width > 2048 || t.height > 2048
                          ? (console.warn(
                              "THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",
                              e
                            ),
                            t.toDataURL("image/jpeg", 0.6))
                          : t.toDataURL("image/png");
                      },
                    },
                  ]),
                  e
                );
              })(),
              pi = 0,
              fi = (function (e) {
                function t() {
                  var e,
                    n =
                      arguments.length > 0 && void 0 !== arguments[0]
                        ? arguments[0]
                        : t.DEFAULT_IMAGE,
                    i =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : t.DEFAULT_MAPPING,
                    r =
                      arguments.length > 2 && void 0 !== arguments[2]
                        ? arguments[2]
                        : Me,
                    a =
                      arguments.length > 3 && void 0 !== arguments[3]
                        ? arguments[3]
                        : Me,
                    o =
                      arguments.length > 4 && void 0 !== arguments[4]
                        ? arguments[4]
                        : Re,
                    s =
                      arguments.length > 5 && void 0 !== arguments[5]
                        ? arguments[5]
                        : Ne,
                    l =
                      arguments.length > 6 && void 0 !== arguments[6]
                        ? arguments[6]
                        : Je,
                    u =
                      arguments.length > 7 && void 0 !== arguments[7]
                        ? arguments[7]
                        : Be,
                    p =
                      arguments.length > 8 && void 0 !== arguments[8]
                        ? arguments[8]
                        : 1,
                    m =
                      arguments.length > 9 && void 0 !== arguments[9]
                        ? arguments[9]
                        : cn;
                  return (
                    f(this, t),
                    (e = c(this, h(t).call(this))),
                    Object.defineProperty(d(e), "id", { value: pi++ }),
                    (e.uuid = ti()),
                    (e.name = ""),
                    (e.image = n),
                    (e.mipmaps = []),
                    (e.mapping = i),
                    (e.wrapS = r),
                    (e.wrapT = a),
                    (e.magFilter = o),
                    (e.minFilter = s),
                    (e.anisotropy = p),
                    (e.format = l),
                    (e.internalFormat = null),
                    (e.type = u),
                    (e.offset = new ui(0, 0)),
                    (e.repeat = new ui(1, 1)),
                    (e.center = new ui(0, 0)),
                    (e.rotation = 0),
                    (e.matrixAutoUpdate = !0),
                    (e.matrix = new hi()),
                    (e.generateMipmaps = !0),
                    (e.premultiplyAlpha = !1),
                    (e.flipY = !0),
                    (e.unpackAlignment = 4),
                    (e.encoding = m),
                    (e.version = 0),
                    (e.onUpdate = null),
                    e
                  );
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "updateMatrix",
                      value: function () {
                        this.matrix.setUvTransform(
                          this.offset.x,
                          this.offset.y,
                          this.repeat.x,
                          this.repeat.y,
                          this.rotation,
                          this.center.x,
                          this.center.y
                        );
                      },
                    },
                    {
                      key: "clone",
                      value: function () {
                        return new this.constructor().copy(this);
                      },
                    },
                    {
                      key: "copy",
                      value: function (e) {
                        return (
                          (this.name = e.name),
                          (this.image = e.image),
                          (this.mipmaps = e.mipmaps.slice(0)),
                          (this.mapping = e.mapping),
                          (this.wrapS = e.wrapS),
                          (this.wrapT = e.wrapT),
                          (this.magFilter = e.magFilter),
                          (this.minFilter = e.minFilter),
                          (this.anisotropy = e.anisotropy),
                          (this.format = e.format),
                          (this.internalFormat = e.internalFormat),
                          (this.type = e.type),
                          this.offset.copy(e.offset),
                          this.repeat.copy(e.repeat),
                          this.center.copy(e.center),
                          (this.rotation = e.rotation),
                          (this.matrixAutoUpdate = e.matrixAutoUpdate),
                          this.matrix.copy(e.matrix),
                          (this.generateMipmaps = e.generateMipmaps),
                          (this.premultiplyAlpha = e.premultiplyAlpha),
                          (this.flipY = e.flipY),
                          (this.unpackAlignment = e.unpackAlignment),
                          (this.encoding = e.encoding),
                          this
                        );
                      },
                    },
                    {
                      key: "toJSON",
                      value: function (e) {
                        var t = void 0 === e || "string" === typeof e;
                        if (!t && void 0 !== e.textures[this.uuid])
                          return e.textures[this.uuid];
                        var n = {
                          metadata: {
                            version: 4.5,
                            type: "Texture",
                            generator: "Texture.toJSON",
                          },
                          uuid: this.uuid,
                          name: this.name,
                          mapping: this.mapping,
                          repeat: [this.repeat.x, this.repeat.y],
                          offset: [this.offset.x, this.offset.y],
                          center: [this.center.x, this.center.y],
                          rotation: this.rotation,
                          wrap: [this.wrapS, this.wrapT],
                          format: this.format,
                          type: this.type,
                          encoding: this.encoding,
                          minFilter: this.minFilter,
                          magFilter: this.magFilter,
                          anisotropy: this.anisotropy,
                          flipY: this.flipY,
                          premultiplyAlpha: this.premultiplyAlpha,
                          unpackAlignment: this.unpackAlignment,
                        };
                        if (void 0 !== this.image) {
                          var i = this.image;
                          if (
                            (void 0 === i.uuid && (i.uuid = ti()),
                            !t && void 0 === e.images[i.uuid])
                          ) {
                            var r;
                            if (Array.isArray(i)) {
                              r = [];
                              for (var a = 0, o = i.length; a < o; a++)
                                i[a].isDataTexture
                                  ? r.push(mi(i[a].image))
                                  : r.push(mi(i[a]));
                            } else r = mi(i);
                            e.images[i.uuid] = { uuid: i.uuid, url: r };
                          }
                          n.image = i.uuid;
                        }
                        return t || (e.textures[this.uuid] = n), n;
                      },
                    },
                    {
                      key: "dispose",
                      value: function () {
                        this.dispatchEvent({ type: "dispose" });
                      },
                    },
                    {
                      key: "transformUv",
                      value: function (e) {
                        if (this.mapping !== ge) return e;
                        if ((e.applyMatrix3(this.matrix), e.x < 0 || e.x > 1))
                          switch (this.wrapS) {
                            case Ee:
                              e.x = e.x - Math.floor(e.x);
                              break;
                            case Me:
                              e.x = e.x < 0 ? 0 : 1;
                              break;
                            case Ae:
                              1 === Math.abs(Math.floor(e.x) % 2)
                                ? (e.x = Math.ceil(e.x) - e.x)
                                : (e.x = e.x - Math.floor(e.x));
                          }
                        if (e.y < 0 || e.y > 1)
                          switch (this.wrapT) {
                            case Ee:
                              e.y = e.y - Math.floor(e.y);
                              break;
                            case Me:
                              e.y = e.y < 0 ? 0 : 1;
                              break;
                            case Ae:
                              1 === Math.abs(Math.floor(e.y) % 2)
                                ? (e.y = Math.ceil(e.y) - e.y)
                                : (e.y = e.y - Math.floor(e.y));
                          }
                        return this.flipY && (e.y = 1 - e.y), e;
                      },
                    },
                    {
                      key: "needsUpdate",
                      set: function (e) {
                        !0 === e && this.version++;
                      },
                    },
                  ]),
                  t
                );
              })(Qn);
            function mi(e) {
              return ("undefined" !== typeof HTMLImageElement &&
                e instanceof HTMLImageElement) ||
                ("undefined" !== typeof HTMLCanvasElement &&
                  e instanceof HTMLCanvasElement) ||
                ("undefined" !== typeof ImageBitmap && e instanceof ImageBitmap)
                ? di.getDataURL(e)
                : e.data
                ? {
                    data: Array.prototype.slice.call(e.data),
                    width: e.width,
                    height: e.height,
                    type: e.data.constructor.name,
                  }
                : (console.warn("THREE.Texture: Unable to serialize Texture."),
                  {});
            }
            (fi.DEFAULT_IMAGE = void 0),
              (fi.DEFAULT_MAPPING = ge),
              (fi.prototype.isTexture = !0);
            var vi = (function () {
              function e() {
                var t =
                    arguments.length > 0 && void 0 !== arguments[0]
                      ? arguments[0]
                      : 0,
                  n =
                    arguments.length > 1 && void 0 !== arguments[1]
                      ? arguments[1]
                      : 0,
                  i =
                    arguments.length > 2 && void 0 !== arguments[2]
                      ? arguments[2]
                      : 0,
                  r =
                    arguments.length > 3 && void 0 !== arguments[3]
                      ? arguments[3]
                      : 1;
                f(this, e),
                  (this.x = t),
                  (this.y = n),
                  (this.z = i),
                  (this.w = r);
              }
              return (
                m(e, [
                  {
                    key: "set",
                    value: function (e, t, n, i) {
                      return (
                        (this.x = e),
                        (this.y = t),
                        (this.z = n),
                        (this.w = i),
                        this
                      );
                    },
                  },
                  {
                    key: "setScalar",
                    value: function (e) {
                      return (
                        (this.x = e),
                        (this.y = e),
                        (this.z = e),
                        (this.w = e),
                        this
                      );
                    },
                  },
                  {
                    key: "setX",
                    value: function (e) {
                      return (this.x = e), this;
                    },
                  },
                  {
                    key: "setY",
                    value: function (e) {
                      return (this.y = e), this;
                    },
                  },
                  {
                    key: "setZ",
                    value: function (e) {
                      return (this.z = e), this;
                    },
                  },
                  {
                    key: "setW",
                    value: function (e) {
                      return (this.w = e), this;
                    },
                  },
                  {
                    key: "setComponent",
                    value: function (e, t) {
                      switch (e) {
                        case 0:
                          this.x = t;
                          break;
                        case 1:
                          this.y = t;
                          break;
                        case 2:
                          this.z = t;
                          break;
                        case 3:
                          this.w = t;
                          break;
                        default:
                          throw new Error("index is out of range: " + e);
                      }
                      return this;
                    },
                  },
                  {
                    key: "getComponent",
                    value: function (e) {
                      switch (e) {
                        case 0:
                          return this.x;
                        case 1:
                          return this.y;
                        case 2:
                          return this.z;
                        case 3:
                          return this.w;
                        default:
                          throw new Error("index is out of range: " + e);
                      }
                    },
                  },
                  {
                    key: "clone",
                    value: function () {
                      return new this.constructor(
                        this.x,
                        this.y,
                        this.z,
                        this.w
                      );
                    },
                  },
                  {
                    key: "copy",
                    value: function (e) {
                      return (
                        (this.x = e.x),
                        (this.y = e.y),
                        (this.z = e.z),
                        (this.w = void 0 !== e.w ? e.w : 1),
                        this
                      );
                    },
                  },
                  {
                    key: "add",
                    value: function (e, t) {
                      return void 0 !== t
                        ? (console.warn(
                            "THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."
                          ),
                          this.addVectors(e, t))
                        : ((this.x += e.x),
                          (this.y += e.y),
                          (this.z += e.z),
                          (this.w += e.w),
                          this);
                    },
                  },
                  {
                    key: "addScalar",
                    value: function (e) {
                      return (
                        (this.x += e),
                        (this.y += e),
                        (this.z += e),
                        (this.w += e),
                        this
                      );
                    },
                  },
                  {
                    key: "addVectors",
                    value: function (e, t) {
                      return (
                        (this.x = e.x + t.x),
                        (this.y = e.y + t.y),
                        (this.z = e.z + t.z),
                        (this.w = e.w + t.w),
                        this
                      );
                    },
                  },
                  {
                    key: "addScaledVector",
                    value: function (e, t) {
                      return (
                        (this.x += e.x * t),
                        (this.y += e.y * t),
                        (this.z += e.z * t),
                        (this.w += e.w * t),
                        this
                      );
                    },
                  },
                  {
                    key: "sub",
                    value: function (e, t) {
                      return void 0 !== t
                        ? (console.warn(
                            "THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."
                          ),
                          this.subVectors(e, t))
                        : ((this.x -= e.x),
                          (this.y -= e.y),
                          (this.z -= e.z),
                          (this.w -= e.w),
                          this);
                    },
                  },
                  {
                    key: "subScalar",
                    value: function (e) {
                      return (
                        (this.x -= e),
                        (this.y -= e),
                        (this.z -= e),
                        (this.w -= e),
                        this
                      );
                    },
                  },
                  {
                    key: "subVectors",
                    value: function (e, t) {
                      return (
                        (this.x = e.x - t.x),
                        (this.y = e.y - t.y),
                        (this.z = e.z - t.z),
                        (this.w = e.w - t.w),
                        this
                      );
                    },
                  },
                  {
                    key: "multiply",
                    value: function (e) {
                      return (
                        (this.x *= e.x),
                        (this.y *= e.y),
                        (this.z *= e.z),
                        (this.w *= e.w),
                        this
                      );
                    },
                  },
                  {
                    key: "multiplyScalar",
                    value: function (e) {
                      return (
                        (this.x *= e),
                        (this.y *= e),
                        (this.z *= e),
                        (this.w *= e),
                        this
                      );
                    },
                  },
                  {
                    key: "applyMatrix4",
                    value: function (e) {
                      var t = this.x,
                        n = this.y,
                        i = this.z,
                        r = this.w,
                        a = e.elements;
                      return (
                        (this.x = a[0] * t + a[4] * n + a[8] * i + a[12] * r),
                        (this.y = a[1] * t + a[5] * n + a[9] * i + a[13] * r),
                        (this.z = a[2] * t + a[6] * n + a[10] * i + a[14] * r),
                        (this.w = a[3] * t + a[7] * n + a[11] * i + a[15] * r),
                        this
                      );
                    },
                  },
                  {
                    key: "divideScalar",
                    value: function (e) {
                      return this.multiplyScalar(1 / e);
                    },
                  },
                  {
                    key: "setAxisAngleFromQuaternion",
                    value: function (e) {
                      this.w = 2 * Math.acos(e.w);
                      var t = Math.sqrt(1 - e.w * e.w);
                      return (
                        t < 1e-4
                          ? ((this.x = 1), (this.y = 0), (this.z = 0))
                          : ((this.x = e.x / t),
                            (this.y = e.y / t),
                            (this.z = e.z / t)),
                        this
                      );
                    },
                  },
                  {
                    key: "setAxisAngleFromRotationMatrix",
                    value: function (e) {
                      var t,
                        n,
                        i,
                        r,
                        a = e.elements,
                        o = a[0],
                        s = a[4],
                        l = a[8],
                        u = a[1],
                        c = a[5],
                        h = a[9],
                        d = a[2],
                        p = a[6],
                        f = a[10];
                      if (
                        Math.abs(s - u) < 0.01 &&
                        Math.abs(l - d) < 0.01 &&
                        Math.abs(h - p) < 0.01
                      ) {
                        if (
                          Math.abs(s + u) < 0.1 &&
                          Math.abs(l + d) < 0.1 &&
                          Math.abs(h + p) < 0.1 &&
                          Math.abs(o + c + f - 3) < 0.1
                        )
                          return this.set(1, 0, 0, 0), this;
                        t = Math.PI;
                        var m = (o + 1) / 2,
                          v = (c + 1) / 2,
                          g = (f + 1) / 2,
                          y = (s + u) / 4,
                          x = (l + d) / 4,
                          b = (h + p) / 4;
                        return (
                          m > v && m > g
                            ? m < 0.01
                              ? ((n = 0), (i = 0.707106781), (r = 0.707106781))
                              : ((i = y / (n = Math.sqrt(m))), (r = x / n))
                            : v > g
                            ? v < 0.01
                              ? ((n = 0.707106781), (i = 0), (r = 0.707106781))
                              : ((n = y / (i = Math.sqrt(v))), (r = b / i))
                            : g < 0.01
                            ? ((n = 0.707106781), (i = 0.707106781), (r = 0))
                            : ((n = x / (r = Math.sqrt(g))), (i = b / r)),
                          this.set(n, i, r, t),
                          this
                        );
                      }
                      var _ = Math.sqrt(
                        (p - h) * (p - h) +
                          (l - d) * (l - d) +
                          (u - s) * (u - s)
                      );
                      return (
                        Math.abs(_) < 0.001 && (_ = 1),
                        (this.x = (p - h) / _),
                        (this.y = (l - d) / _),
                        (this.z = (u - s) / _),
                        (this.w = Math.acos((o + c + f - 1) / 2)),
                        this
                      );
                    },
                  },
                  {
                    key: "min",
                    value: function (e) {
                      return (
                        (this.x = Math.min(this.x, e.x)),
                        (this.y = Math.min(this.y, e.y)),
                        (this.z = Math.min(this.z, e.z)),
                        (this.w = Math.min(this.w, e.w)),
                        this
                      );
                    },
                  },
                  {
                    key: "max",
                    value: function (e) {
                      return (
                        (this.x = Math.max(this.x, e.x)),
                        (this.y = Math.max(this.y, e.y)),
                        (this.z = Math.max(this.z, e.z)),
                        (this.w = Math.max(this.w, e.w)),
                        this
                      );
                    },
                  },
                  {
                    key: "clamp",
                    value: function (e, t) {
                      return (
                        (this.x = Math.max(e.x, Math.min(t.x, this.x))),
                        (this.y = Math.max(e.y, Math.min(t.y, this.y))),
                        (this.z = Math.max(e.z, Math.min(t.z, this.z))),
                        (this.w = Math.max(e.w, Math.min(t.w, this.w))),
                        this
                      );
                    },
                  },
                  {
                    key: "clampScalar",
                    value: function (e, t) {
                      return (
                        (this.x = Math.max(e, Math.min(t, this.x))),
                        (this.y = Math.max(e, Math.min(t, this.y))),
                        (this.z = Math.max(e, Math.min(t, this.z))),
                        (this.w = Math.max(e, Math.min(t, this.w))),
                        this
                      );
                    },
                  },
                  {
                    key: "clampLength",
                    value: function (e, t) {
                      var n = this.length();
                      return this.divideScalar(n || 1).multiplyScalar(
                        Math.max(e, Math.min(t, n))
                      );
                    },
                  },
                  {
                    key: "floor",
                    value: function () {
                      return (
                        (this.x = Math.floor(this.x)),
                        (this.y = Math.floor(this.y)),
                        (this.z = Math.floor(this.z)),
                        (this.w = Math.floor(this.w)),
                        this
                      );
                    },
                  },
                  {
                    key: "ceil",
                    value: function () {
                      return (
                        (this.x = Math.ceil(this.x)),
                        (this.y = Math.ceil(this.y)),
                        (this.z = Math.ceil(this.z)),
                        (this.w = Math.ceil(this.w)),
                        this
                      );
                    },
                  },
                  {
                    key: "round",
                    value: function () {
                      return (
                        (this.x = Math.round(this.x)),
                        (this.y = Math.round(this.y)),
                        (this.z = Math.round(this.z)),
                        (this.w = Math.round(this.w)),
                        this
                      );
                    },
                  },
                  {
                    key: "roundToZero",
                    value: function () {
                      return (
                        (this.x =
                          this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x)),
                        (this.y =
                          this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y)),
                        (this.z =
                          this.z < 0 ? Math.ceil(this.z) : Math.floor(this.z)),
                        (this.w =
                          this.w < 0 ? Math.ceil(this.w) : Math.floor(this.w)),
                        this
                      );
                    },
                  },
                  {
                    key: "negate",
                    value: function () {
                      return (
                        (this.x = -this.x),
                        (this.y = -this.y),
                        (this.z = -this.z),
                        (this.w = -this.w),
                        this
                      );
                    },
                  },
                  {
                    key: "dot",
                    value: function (e) {
                      return (
                        this.x * e.x +
                        this.y * e.y +
                        this.z * e.z +
                        this.w * e.w
                      );
                    },
                  },
                  {
                    key: "lengthSq",
                    value: function () {
                      return (
                        this.x * this.x +
                        this.y * this.y +
                        this.z * this.z +
                        this.w * this.w
                      );
                    },
                  },
                  {
                    key: "length",
                    value: function () {
                      return Math.sqrt(
                        this.x * this.x +
                          this.y * this.y +
                          this.z * this.z +
                          this.w * this.w
                      );
                    },
                  },
                  {
                    key: "manhattanLength",
                    value: function () {
                      return (
                        Math.abs(this.x) +
                        Math.abs(this.y) +
                        Math.abs(this.z) +
                        Math.abs(this.w)
                      );
                    },
                  },
                  {
                    key: "normalize",
                    value: function () {
                      return this.divideScalar(this.length() || 1);
                    },
                  },
                  {
                    key: "setLength",
                    value: function (e) {
                      return this.normalize().multiplyScalar(e);
                    },
                  },
                  {
                    key: "lerp",
                    value: function (e, t) {
                      return (
                        (this.x += (e.x - this.x) * t),
                        (this.y += (e.y - this.y) * t),
                        (this.z += (e.z - this.z) * t),
                        (this.w += (e.w - this.w) * t),
                        this
                      );
                    },
                  },
                  {
                    key: "lerpVectors",
                    value: function (e, t, n) {
                      return (
                        (this.x = e.x + (t.x - e.x) * n),
                        (this.y = e.y + (t.y - e.y) * n),
                        (this.z = e.z + (t.z - e.z) * n),
                        (this.w = e.w + (t.w - e.w) * n),
                        this
                      );
                    },
                  },
                  {
                    key: "equals",
                    value: function (e) {
                      return (
                        e.x === this.x &&
                        e.y === this.y &&
                        e.z === this.z &&
                        e.w === this.w
                      );
                    },
                  },
                  {
                    key: "fromArray",
                    value: function (e) {
                      var t =
                        arguments.length > 1 && void 0 !== arguments[1]
                          ? arguments[1]
                          : 0;
                      return (
                        (this.x = e[t]),
                        (this.y = e[t + 1]),
                        (this.z = e[t + 2]),
                        (this.w = e[t + 3]),
                        this
                      );
                    },
                  },
                  {
                    key: "toArray",
                    value: function () {
                      var e =
                          arguments.length > 0 && void 0 !== arguments[0]
                            ? arguments[0]
                            : [],
                        t =
                          arguments.length > 1 && void 0 !== arguments[1]
                            ? arguments[1]
                            : 0;
                      return (
                        (e[t] = this.x),
                        (e[t + 1] = this.y),
                        (e[t + 2] = this.z),
                        (e[t + 3] = this.w),
                        e
                      );
                    },
                  },
                  {
                    key: "fromBufferAttribute",
                    value: function (e, t, n) {
                      return (
                        void 0 !== n &&
                          console.warn(
                            "THREE.Vector4: offset has been removed from .fromBufferAttribute()."
                          ),
                        (this.x = e.getX(t)),
                        (this.y = e.getY(t)),
                        (this.z = e.getZ(t)),
                        (this.w = e.getW(t)),
                        this
                      );
                    },
                  },
                  {
                    key: "random",
                    value: function () {
                      return (
                        (this.x = Math.random()),
                        (this.y = Math.random()),
                        (this.z = Math.random()),
                        (this.w = Math.random()),
                        this
                      );
                    },
                  },
                  {
                    key: "width",
                    get: function () {
                      return this.z;
                    },
                    set: function (e) {
                      this.z = e;
                    },
                  },
                  {
                    key: "height",
                    get: function () {
                      return this.w;
                    },
                    set: function (e) {
                      this.w = e;
                    },
                  },
                ]),
                e
              );
            })();
            vi.prototype.isVector4 = !0;
            var gi = (function (e) {
              function t(e, n, i) {
                var r;
                return (
                  f(this, t),
                  ((r = c(this, h(t).call(this))).width = e),
                  (r.height = n),
                  (r.depth = 1),
                  (r.scissor = new vi(0, 0, e, n)),
                  (r.scissorTest = !1),
                  (r.viewport = new vi(0, 0, e, n)),
                  (i = i || {}),
                  (r.texture = new fi(
                    void 0,
                    i.mapping,
                    i.wrapS,
                    i.wrapT,
                    i.magFilter,
                    i.minFilter,
                    i.format,
                    i.type,
                    i.anisotropy,
                    i.encoding
                  )),
                  (r.texture.image = {}),
                  (r.texture.image.width = e),
                  (r.texture.image.height = n),
                  (r.texture.image.depth = 1),
                  (r.texture.generateMipmaps =
                    void 0 !== i.generateMipmaps && i.generateMipmaps),
                  (r.texture.minFilter =
                    void 0 !== i.minFilter ? i.minFilter : Re),
                  (r.depthBuffer = void 0 === i.depthBuffer || i.depthBuffer),
                  (r.stencilBuffer =
                    void 0 !== i.stencilBuffer && i.stencilBuffer),
                  (r.depthTexture =
                    void 0 !== i.depthTexture ? i.depthTexture : null),
                  r
                );
              }
              return (
                p(t, e),
                m(t, [
                  {
                    key: "setTexture",
                    value: function (e) {
                      (e.image = {
                        width: this.width,
                        height: this.height,
                        depth: this.depth,
                      }),
                        (this.texture = e);
                    },
                  },
                  {
                    key: "setSize",
                    value: function (e, t) {
                      var n =
                        arguments.length > 2 && void 0 !== arguments[2]
                          ? arguments[2]
                          : 1;
                      (this.width === e &&
                        this.height === t &&
                        this.depth === n) ||
                        ((this.width = e),
                        (this.height = t),
                        (this.depth = n),
                        (this.texture.image.width = e),
                        (this.texture.image.height = t),
                        (this.texture.image.depth = n),
                        this.dispose()),
                        this.viewport.set(0, 0, e, t),
                        this.scissor.set(0, 0, e, t);
                    },
                  },
                  {
                    key: "clone",
                    value: function () {
                      return new this.constructor().copy(this);
                    },
                  },
                  {
                    key: "copy",
                    value: function (e) {
                      return (
                        (this.width = e.width),
                        (this.height = e.height),
                        (this.depth = e.depth),
                        this.viewport.copy(e.viewport),
                        (this.texture = e.texture.clone()),
                        (this.texture.image = u({}, this.texture.image)),
                        (this.depthBuffer = e.depthBuffer),
                        (this.stencilBuffer = e.stencilBuffer),
                        (this.depthTexture = e.depthTexture),
                        this
                      );
                    },
                  },
                  {
                    key: "dispose",
                    value: function () {
                      this.dispatchEvent({ type: "dispose" });
                    },
                  },
                ]),
                t
              );
            })(Qn);
            gi.prototype.isWebGLRenderTarget = !0;
            var yi = (function (e) {
              function t(e, n, i) {
                var r;
                f(this, t);
                var a = (r = c(this, h(t).call(this, e, n))).texture;
                r.texture = [];
                for (var o = 0; o < i; o++) r.texture[o] = a.clone();
                return r;
              }
              return (
                p(t, e),
                m(t, [
                  {
                    key: "setSize",
                    value: function (e, t) {
                      var n =
                        arguments.length > 2 && void 0 !== arguments[2]
                          ? arguments[2]
                          : 1;
                      if (
                        this.width !== e ||
                        this.height !== t ||
                        this.depth !== n
                      ) {
                        (this.width = e), (this.height = t), (this.depth = n);
                        for (var i = 0, r = this.texture.length; i < r; i++)
                          (this.texture[i].image.width = e),
                            (this.texture[i].image.height = t),
                            (this.texture[i].image.depth = n);
                        this.dispose();
                      }
                      return (
                        this.viewport.set(0, 0, e, t),
                        this.scissor.set(0, 0, e, t),
                        this
                      );
                    },
                  },
                  {
                    key: "copy",
                    value: function (e) {
                      this.dispose(),
                        (this.width = e.width),
                        (this.height = e.height),
                        (this.depth = e.depth),
                        this.viewport.set(0, 0, this.width, this.height),
                        this.scissor.set(0, 0, this.width, this.height),
                        (this.depthBuffer = e.depthBuffer),
                        (this.stencilBuffer = e.stencilBuffer),
                        (this.depthTexture = e.depthTexture),
                        (this.texture.length = 0);
                      for (var t = 0, n = e.texture.length; t < n; t++)
                        this.texture[t] = e.texture[t].clone();
                      return this;
                    },
                  },
                ]),
                t
              );
            })(gi);
            yi.prototype.isWebGLMultipleRenderTargets = !0;
            var xi = (function (e) {
              function t(e, n, i) {
                var r;
                return (
                  f(this, t),
                  ((r = c(this, h(t).call(this, e, n, i))).samples = 4),
                  r
                );
              }
              return (
                p(t, e),
                m(t, [
                  {
                    key: "copy",
                    value: function (e) {
                      return (
                        l(h(t.prototype), "copy", this).call(this, e),
                        (this.samples = e.samples),
                        this
                      );
                    },
                  },
                ]),
                t
              );
            })(gi);
            xi.prototype.isWebGLMultisampleRenderTarget = !0;
            var bi = (function () {
              function e() {
                var t =
                    arguments.length > 0 && void 0 !== arguments[0]
                      ? arguments[0]
                      : 0,
                  n =
                    arguments.length > 1 && void 0 !== arguments[1]
                      ? arguments[1]
                      : 0,
                  i =
                    arguments.length > 2 && void 0 !== arguments[2]
                      ? arguments[2]
                      : 0,
                  r =
                    arguments.length > 3 && void 0 !== arguments[3]
                      ? arguments[3]
                      : 1;
                f(this, e),
                  (this._x = t),
                  (this._y = n),
                  (this._z = i),
                  (this._w = r);
              }
              return (
                m(
                  e,
                  [
                    {
                      key: "set",
                      value: function (e, t, n, i) {
                        return (
                          (this._x = e),
                          (this._y = t),
                          (this._z = n),
                          (this._w = i),
                          this._onChangeCallback(),
                          this
                        );
                      },
                    },
                    {
                      key: "clone",
                      value: function () {
                        return new this.constructor(
                          this._x,
                          this._y,
                          this._z,
                          this._w
                        );
                      },
                    },
                    {
                      key: "copy",
                      value: function (e) {
                        return (
                          (this._x = e.x),
                          (this._y = e.y),
                          (this._z = e.z),
                          (this._w = e.w),
                          this._onChangeCallback(),
                          this
                        );
                      },
                    },
                    {
                      key: "setFromEuler",
                      value: function (e, t) {
                        if (!e || !e.isEuler)
                          throw new Error(
                            "THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order."
                          );
                        var n = e._x,
                          i = e._y,
                          r = e._z,
                          a = e._order,
                          o = Math.cos,
                          s = Math.sin,
                          l = o(n / 2),
                          u = o(i / 2),
                          c = o(r / 2),
                          h = s(n / 2),
                          d = s(i / 2),
                          p = s(r / 2);
                        switch (a) {
                          case "XYZ":
                            (this._x = h * u * c + l * d * p),
                              (this._y = l * d * c - h * u * p),
                              (this._z = l * u * p + h * d * c),
                              (this._w = l * u * c - h * d * p);
                            break;
                          case "YXZ":
                            (this._x = h * u * c + l * d * p),
                              (this._y = l * d * c - h * u * p),
                              (this._z = l * u * p - h * d * c),
                              (this._w = l * u * c + h * d * p);
                            break;
                          case "ZXY":
                            (this._x = h * u * c - l * d * p),
                              (this._y = l * d * c + h * u * p),
                              (this._z = l * u * p + h * d * c),
                              (this._w = l * u * c - h * d * p);
                            break;
                          case "ZYX":
                            (this._x = h * u * c - l * d * p),
                              (this._y = l * d * c + h * u * p),
                              (this._z = l * u * p - h * d * c),
                              (this._w = l * u * c + h * d * p);
                            break;
                          case "YZX":
                            (this._x = h * u * c + l * d * p),
                              (this._y = l * d * c + h * u * p),
                              (this._z = l * u * p - h * d * c),
                              (this._w = l * u * c - h * d * p);
                            break;
                          case "XZY":
                            (this._x = h * u * c - l * d * p),
                              (this._y = l * d * c - h * u * p),
                              (this._z = l * u * p + h * d * c),
                              (this._w = l * u * c + h * d * p);
                            break;
                          default:
                            console.warn(
                              "THREE.Quaternion: .setFromEuler() encountered an unknown order: " +
                                a
                            );
                        }
                        return !1 !== t && this._onChangeCallback(), this;
                      },
                    },
                    {
                      key: "setFromAxisAngle",
                      value: function (e, t) {
                        var n = t / 2,
                          i = Math.sin(n);
                        return (
                          (this._x = e.x * i),
                          (this._y = e.y * i),
                          (this._z = e.z * i),
                          (this._w = Math.cos(n)),
                          this._onChangeCallback(),
                          this
                        );
                      },
                    },
                    {
                      key: "setFromRotationMatrix",
                      value: function (e) {
                        var t = e.elements,
                          n = t[0],
                          i = t[4],
                          r = t[8],
                          a = t[1],
                          o = t[5],
                          s = t[9],
                          l = t[2],
                          u = t[6],
                          c = t[10],
                          h = n + o + c;
                        if (h > 0) {
                          var d = 0.5 / Math.sqrt(h + 1);
                          (this._w = 0.25 / d),
                            (this._x = (u - s) * d),
                            (this._y = (r - l) * d),
                            (this._z = (a - i) * d);
                        } else if (n > o && n > c) {
                          var p = 2 * Math.sqrt(1 + n - o - c);
                          (this._w = (u - s) / p),
                            (this._x = 0.25 * p),
                            (this._y = (i + a) / p),
                            (this._z = (r + l) / p);
                        } else if (o > c) {
                          var f = 2 * Math.sqrt(1 + o - n - c);
                          (this._w = (r - l) / f),
                            (this._x = (i + a) / f),
                            (this._y = 0.25 * f),
                            (this._z = (s + u) / f);
                        } else {
                          var m = 2 * Math.sqrt(1 + c - n - o);
                          (this._w = (a - i) / m),
                            (this._x = (r + l) / m),
                            (this._y = (s + u) / m),
                            (this._z = 0.25 * m);
                        }
                        return this._onChangeCallback(), this;
                      },
                    },
                    {
                      key: "setFromUnitVectors",
                      value: function (e, t) {
                        var n = e.dot(t) + 1;
                        return (
                          n < Number.EPSILON
                            ? ((n = 0),
                              Math.abs(e.x) > Math.abs(e.z)
                                ? ((this._x = -e.y),
                                  (this._y = e.x),
                                  (this._z = 0),
                                  (this._w = n))
                                : ((this._x = 0),
                                  (this._y = -e.z),
                                  (this._z = e.y),
                                  (this._w = n)))
                            : ((this._x = e.y * t.z - e.z * t.y),
                              (this._y = e.z * t.x - e.x * t.z),
                              (this._z = e.x * t.y - e.y * t.x),
                              (this._w = n)),
                          this.normalize()
                        );
                      },
                    },
                    {
                      key: "angleTo",
                      value: function (e) {
                        return 2 * Math.acos(Math.abs(ni(this.dot(e), -1, 1)));
                      },
                    },
                    {
                      key: "rotateTowards",
                      value: function (e, t) {
                        var n = this.angleTo(e);
                        if (0 === n) return this;
                        var i = Math.min(1, t / n);
                        return this.slerp(e, i), this;
                      },
                    },
                    {
                      key: "identity",
                      value: function () {
                        return this.set(0, 0, 0, 1);
                      },
                    },
                    {
                      key: "invert",
                      value: function () {
                        return this.conjugate();
                      },
                    },
                    {
                      key: "conjugate",
                      value: function () {
                        return (
                          (this._x *= -1),
                          (this._y *= -1),
                          (this._z *= -1),
                          this._onChangeCallback(),
                          this
                        );
                      },
                    },
                    {
                      key: "dot",
                      value: function (e) {
                        return (
                          this._x * e._x +
                          this._y * e._y +
                          this._z * e._z +
                          this._w * e._w
                        );
                      },
                    },
                    {
                      key: "lengthSq",
                      value: function () {
                        return (
                          this._x * this._x +
                          this._y * this._y +
                          this._z * this._z +
                          this._w * this._w
                        );
                      },
                    },
                    {
                      key: "length",
                      value: function () {
                        return Math.sqrt(
                          this._x * this._x +
                            this._y * this._y +
                            this._z * this._z +
                            this._w * this._w
                        );
                      },
                    },
                    {
                      key: "normalize",
                      value: function () {
                        var e = this.length();
                        return (
                          0 === e
                            ? ((this._x = 0),
                              (this._y = 0),
                              (this._z = 0),
                              (this._w = 1))
                            : ((e = 1 / e),
                              (this._x = this._x * e),
                              (this._y = this._y * e),
                              (this._z = this._z * e),
                              (this._w = this._w * e)),
                          this._onChangeCallback(),
                          this
                        );
                      },
                    },
                    {
                      key: "multiply",
                      value: function (e, t) {
                        return void 0 !== t
                          ? (console.warn(
                              "THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."
                            ),
                            this.multiplyQuaternions(e, t))
                          : this.multiplyQuaternions(this, e);
                      },
                    },
                    {
                      key: "premultiply",
                      value: function (e) {
                        return this.multiplyQuaternions(e, this);
                      },
                    },
                    {
                      key: "multiplyQuaternions",
                      value: function (e, t) {
                        var n = e._x,
                          i = e._y,
                          r = e._z,
                          a = e._w,
                          o = t._x,
                          s = t._y,
                          l = t._z,
                          u = t._w;
                        return (
                          (this._x = n * u + a * o + i * l - r * s),
                          (this._y = i * u + a * s + r * o - n * l),
                          (this._z = r * u + a * l + n * s - i * o),
                          (this._w = a * u - n * o - i * s - r * l),
                          this._onChangeCallback(),
                          this
                        );
                      },
                    },
                    {
                      key: "slerp",
                      value: function (e, t) {
                        if (0 === t) return this;
                        if (1 === t) return this.copy(e);
                        var n = this._x,
                          i = this._y,
                          r = this._z,
                          a = this._w,
                          o = a * e._w + n * e._x + i * e._y + r * e._z;
                        if (
                          (o < 0
                            ? ((this._w = -e._w),
                              (this._x = -e._x),
                              (this._y = -e._y),
                              (this._z = -e._z),
                              (o = -o))
                            : this.copy(e),
                          o >= 1)
                        )
                          return (
                            (this._w = a),
                            (this._x = n),
                            (this._y = i),
                            (this._z = r),
                            this
                          );
                        var s = 1 - o * o;
                        if (s <= Number.EPSILON) {
                          var l = 1 - t;
                          return (
                            (this._w = l * a + t * this._w),
                            (this._x = l * n + t * this._x),
                            (this._y = l * i + t * this._y),
                            (this._z = l * r + t * this._z),
                            this.normalize(),
                            this._onChangeCallback(),
                            this
                          );
                        }
                        var u = Math.sqrt(s),
                          c = Math.atan2(u, o),
                          h = Math.sin((1 - t) * c) / u,
                          d = Math.sin(t * c) / u;
                        return (
                          (this._w = a * h + this._w * d),
                          (this._x = n * h + this._x * d),
                          (this._y = i * h + this._y * d),
                          (this._z = r * h + this._z * d),
                          this._onChangeCallback(),
                          this
                        );
                      },
                    },
                    {
                      key: "slerpQuaternions",
                      value: function (e, t, n) {
                        this.copy(e).slerp(t, n);
                      },
                    },
                    {
                      key: "equals",
                      value: function (e) {
                        return (
                          e._x === this._x &&
                          e._y === this._y &&
                          e._z === this._z &&
                          e._w === this._w
                        );
                      },
                    },
                    {
                      key: "fromArray",
                      value: function (e) {
                        var t =
                          arguments.length > 1 && void 0 !== arguments[1]
                            ? arguments[1]
                            : 0;
                        return (
                          (this._x = e[t]),
                          (this._y = e[t + 1]),
                          (this._z = e[t + 2]),
                          (this._w = e[t + 3]),
                          this._onChangeCallback(),
                          this
                        );
                      },
                    },
                    {
                      key: "toArray",
                      value: function () {
                        var e =
                            arguments.length > 0 && void 0 !== arguments[0]
                              ? arguments[0]
                              : [],
                          t =
                            arguments.length > 1 && void 0 !== arguments[1]
                              ? arguments[1]
                              : 0;
                        return (
                          (e[t] = this._x),
                          (e[t + 1] = this._y),
                          (e[t + 2] = this._z),
                          (e[t + 3] = this._w),
                          e
                        );
                      },
                    },
                    {
                      key: "fromBufferAttribute",
                      value: function (e, t) {
                        return (
                          (this._x = e.getX(t)),
                          (this._y = e.getY(t)),
                          (this._z = e.getZ(t)),
                          (this._w = e.getW(t)),
                          this
                        );
                      },
                    },
                    {
                      key: "_onChange",
                      value: function (e) {
                        return (this._onChangeCallback = e), this;
                      },
                    },
                    { key: "_onChangeCallback", value: function () {} },
                    {
                      key: "x",
                      get: function () {
                        return this._x;
                      },
                      set: function (e) {
                        (this._x = e), this._onChangeCallback();
                      },
                    },
                    {
                      key: "y",
                      get: function () {
                        return this._y;
                      },
                      set: function (e) {
                        (this._y = e), this._onChangeCallback();
                      },
                    },
                    {
                      key: "z",
                      get: function () {
                        return this._z;
                      },
                      set: function (e) {
                        (this._z = e), this._onChangeCallback();
                      },
                    },
                    {
                      key: "w",
                      get: function () {
                        return this._w;
                      },
                      set: function (e) {
                        (this._w = e), this._onChangeCallback();
                      },
                    },
                  ],
                  [
                    {
                      key: "slerp",
                      value: function (e, t, n, i) {
                        return (
                          console.warn(
                            "THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."
                          ),
                          n.slerpQuaternions(e, t, i)
                        );
                      },
                    },
                    {
                      key: "slerpFlat",
                      value: function (e, t, n, i, r, a, o) {
                        var s = n[i + 0],
                          l = n[i + 1],
                          u = n[i + 2],
                          c = n[i + 3],
                          h = r[a + 0],
                          d = r[a + 1],
                          p = r[a + 2],
                          f = r[a + 3];
                        if (0 === o)
                          return (
                            (e[t + 0] = s),
                            (e[t + 1] = l),
                            (e[t + 2] = u),
                            void (e[t + 3] = c)
                          );
                        if (1 === o)
                          return (
                            (e[t + 0] = h),
                            (e[t + 1] = d),
                            (e[t + 2] = p),
                            void (e[t + 3] = f)
                          );
                        if (c !== f || s !== h || l !== d || u !== p) {
                          var m = 1 - o,
                            v = s * h + l * d + u * p + c * f,
                            g = v >= 0 ? 1 : -1,
                            y = 1 - v * v;
                          if (y > Number.EPSILON) {
                            var x = Math.sqrt(y),
                              b = Math.atan2(x, v * g);
                            (m = Math.sin(m * b) / x),
                              (o = Math.sin(o * b) / x);
                          }
                          var _ = o * g;
                          if (
                            ((s = s * m + h * _),
                            (l = l * m + d * _),
                            (u = u * m + p * _),
                            (c = c * m + f * _),
                            m === 1 - o)
                          ) {
                            var w =
                              1 / Math.sqrt(s * s + l * l + u * u + c * c);
                            (s *= w), (l *= w), (u *= w), (c *= w);
                          }
                        }
                        (e[t] = s),
                          (e[t + 1] = l),
                          (e[t + 2] = u),
                          (e[t + 3] = c);
                      },
                    },
                    {
                      key: "multiplyQuaternionsFlat",
                      value: function (e, t, n, i, r, a) {
                        var o = n[i],
                          s = n[i + 1],
                          l = n[i + 2],
                          u = n[i + 3],
                          c = r[a],
                          h = r[a + 1],
                          d = r[a + 2],
                          p = r[a + 3];
                        return (
                          (e[t] = o * p + u * c + s * d - l * h),
                          (e[t + 1] = s * p + u * h + l * c - o * d),
                          (e[t + 2] = l * p + u * d + o * h - s * c),
                          (e[t + 3] = u * p - o * c - s * h - l * d),
                          e
                        );
                      },
                    },
                  ]
                ),
                e
              );
            })();
            bi.prototype.isQuaternion = !0;
            var _i = (function () {
              function e() {
                var t =
                    arguments.length > 0 && void 0 !== arguments[0]
                      ? arguments[0]
                      : 0,
                  n =
                    arguments.length > 1 && void 0 !== arguments[1]
                      ? arguments[1]
                      : 0,
                  i =
                    arguments.length > 2 && void 0 !== arguments[2]
                      ? arguments[2]
                      : 0;
                f(this, e), (this.x = t), (this.y = n), (this.z = i);
              }
              return (
                m(e, [
                  {
                    key: "set",
                    value: function (e, t, n) {
                      return (
                        void 0 === n && (n = this.z),
                        (this.x = e),
                        (this.y = t),
                        (this.z = n),
                        this
                      );
                    },
                  },
                  {
                    key: "setScalar",
                    value: function (e) {
                      return (this.x = e), (this.y = e), (this.z = e), this;
                    },
                  },
                  {
                    key: "setX",
                    value: function (e) {
                      return (this.x = e), this;
                    },
                  },
                  {
                    key: "setY",
                    value: function (e) {
                      return (this.y = e), this;
                    },
                  },
                  {
                    key: "setZ",
                    value: function (e) {
                      return (this.z = e), this;
                    },
                  },
                  {
                    key: "setComponent",
                    value: function (e, t) {
                      switch (e) {
                        case 0:
                          this.x = t;
                          break;
                        case 1:
                          this.y = t;
                          break;
                        case 2:
                          this.z = t;
                          break;
                        default:
                          throw new Error("index is out of range: " + e);
                      }
                      return this;
                    },
                  },
                  {
                    key: "getComponent",
                    value: function (e) {
                      switch (e) {
                        case 0:
                          return this.x;
                        case 1:
                          return this.y;
                        case 2:
                          return this.z;
                        default:
                          throw new Error("index is out of range: " + e);
                      }
                    },
                  },
                  {
                    key: "clone",
                    value: function () {
                      return new this.constructor(this.x, this.y, this.z);
                    },
                  },
                  {
                    key: "copy",
                    value: function (e) {
                      return (
                        (this.x = e.x), (this.y = e.y), (this.z = e.z), this
                      );
                    },
                  },
                  {
                    key: "add",
                    value: function (e, t) {
                      return void 0 !== t
                        ? (console.warn(
                            "THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."
                          ),
                          this.addVectors(e, t))
                        : ((this.x += e.x),
                          (this.y += e.y),
                          (this.z += e.z),
                          this);
                    },
                  },
                  {
                    key: "addScalar",
                    value: function (e) {
                      return (this.x += e), (this.y += e), (this.z += e), this;
                    },
                  },
                  {
                    key: "addVectors",
                    value: function (e, t) {
                      return (
                        (this.x = e.x + t.x),
                        (this.y = e.y + t.y),
                        (this.z = e.z + t.z),
                        this
                      );
                    },
                  },
                  {
                    key: "addScaledVector",
                    value: function (e, t) {
                      return (
                        (this.x += e.x * t),
                        (this.y += e.y * t),
                        (this.z += e.z * t),
                        this
                      );
                    },
                  },
                  {
                    key: "sub",
                    value: function (e, t) {
                      return void 0 !== t
                        ? (console.warn(
                            "THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."
                          ),
                          this.subVectors(e, t))
                        : ((this.x -= e.x),
                          (this.y -= e.y),
                          (this.z -= e.z),
                          this);
                    },
                  },
                  {
                    key: "subScalar",
                    value: function (e) {
                      return (this.x -= e), (this.y -= e), (this.z -= e), this;
                    },
                  },
                  {
                    key: "subVectors",
                    value: function (e, t) {
                      return (
                        (this.x = e.x - t.x),
                        (this.y = e.y - t.y),
                        (this.z = e.z - t.z),
                        this
                      );
                    },
                  },
                  {
                    key: "multiply",
                    value: function (e, t) {
                      return void 0 !== t
                        ? (console.warn(
                            "THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."
                          ),
                          this.multiplyVectors(e, t))
                        : ((this.x *= e.x),
                          (this.y *= e.y),
                          (this.z *= e.z),
                          this);
                    },
                  },
                  {
                    key: "multiplyScalar",
                    value: function (e) {
                      return (this.x *= e), (this.y *= e), (this.z *= e), this;
                    },
                  },
                  {
                    key: "multiplyVectors",
                    value: function (e, t) {
                      return (
                        (this.x = e.x * t.x),
                        (this.y = e.y * t.y),
                        (this.z = e.z * t.z),
                        this
                      );
                    },
                  },
                  {
                    key: "applyEuler",
                    value: function (e) {
                      return (
                        (e && e.isEuler) ||
                          console.error(
                            "THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."
                          ),
                        this.applyQuaternion(Si.setFromEuler(e))
                      );
                    },
                  },
                  {
                    key: "applyAxisAngle",
                    value: function (e, t) {
                      return this.applyQuaternion(Si.setFromAxisAngle(e, t));
                    },
                  },
                  {
                    key: "applyMatrix3",
                    value: function (e) {
                      var t = this.x,
                        n = this.y,
                        i = this.z,
                        r = e.elements;
                      return (
                        (this.x = r[0] * t + r[3] * n + r[6] * i),
                        (this.y = r[1] * t + r[4] * n + r[7] * i),
                        (this.z = r[2] * t + r[5] * n + r[8] * i),
                        this
                      );
                    },
                  },
                  {
                    key: "applyNormalMatrix",
                    value: function (e) {
                      return this.applyMatrix3(e).normalize();
                    },
                  },
                  {
                    key: "applyMatrix4",
                    value: function (e) {
                      var t = this.x,
                        n = this.y,
                        i = this.z,
                        r = e.elements,
                        a = 1 / (r[3] * t + r[7] * n + r[11] * i + r[15]);
                      return (
                        (this.x = (r[0] * t + r[4] * n + r[8] * i + r[12]) * a),
                        (this.y = (r[1] * t + r[5] * n + r[9] * i + r[13]) * a),
                        (this.z =
                          (r[2] * t + r[6] * n + r[10] * i + r[14]) * a),
                        this
                      );
                    },
                  },
                  {
                    key: "applyQuaternion",
                    value: function (e) {
                      var t = this.x,
                        n = this.y,
                        i = this.z,
                        r = e.x,
                        a = e.y,
                        o = e.z,
                        s = e.w,
                        l = s * t + a * i - o * n,
                        u = s * n + o * t - r * i,
                        c = s * i + r * n - a * t,
                        h = -r * t - a * n - o * i;
                      return (
                        (this.x = l * s + h * -r + u * -o - c * -a),
                        (this.y = u * s + h * -a + c * -r - l * -o),
                        (this.z = c * s + h * -o + l * -a - u * -r),
                        this
                      );
                    },
                  },
                  {
                    key: "project",
                    value: function (e) {
                      return this.applyMatrix4(
                        e.matrixWorldInverse
                      ).applyMatrix4(e.projectionMatrix);
                    },
                  },
                  {
                    key: "unproject",
                    value: function (e) {
                      return this.applyMatrix4(
                        e.projectionMatrixInverse
                      ).applyMatrix4(e.matrixWorld);
                    },
                  },
                  {
                    key: "transformDirection",
                    value: function (e) {
                      var t = this.x,
                        n = this.y,
                        i = this.z,
                        r = e.elements;
                      return (
                        (this.x = r[0] * t + r[4] * n + r[8] * i),
                        (this.y = r[1] * t + r[5] * n + r[9] * i),
                        (this.z = r[2] * t + r[6] * n + r[10] * i),
                        this.normalize()
                      );
                    },
                  },
                  {
                    key: "divide",
                    value: function (e) {
                      return (
                        (this.x /= e.x), (this.y /= e.y), (this.z /= e.z), this
                      );
                    },
                  },
                  {
                    key: "divideScalar",
                    value: function (e) {
                      return this.multiplyScalar(1 / e);
                    },
                  },
                  {
                    key: "min",
                    value: function (e) {
                      return (
                        (this.x = Math.min(this.x, e.x)),
                        (this.y = Math.min(this.y, e.y)),
                        (this.z = Math.min(this.z, e.z)),
                        this
                      );
                    },
                  },
                  {
                    key: "max",
                    value: function (e) {
                      return (
                        (this.x = Math.max(this.x, e.x)),
                        (this.y = Math.max(this.y, e.y)),
                        (this.z = Math.max(this.z, e.z)),
                        this
                      );
                    },
                  },
                  {
                    key: "clamp",
                    value: function (e, t) {
                      return (
                        (this.x = Math.max(e.x, Math.min(t.x, this.x))),
                        (this.y = Math.max(e.y, Math.min(t.y, this.y))),
                        (this.z = Math.max(e.z, Math.min(t.z, this.z))),
                        this
                      );
                    },
                  },
                  {
                    key: "clampScalar",
                    value: function (e, t) {
                      return (
                        (this.x = Math.max(e, Math.min(t, this.x))),
                        (this.y = Math.max(e, Math.min(t, this.y))),
                        (this.z = Math.max(e, Math.min(t, this.z))),
                        this
                      );
                    },
                  },
                  {
                    key: "clampLength",
                    value: function (e, t) {
                      var n = this.length();
                      return this.divideScalar(n || 1).multiplyScalar(
                        Math.max(e, Math.min(t, n))
                      );
                    },
                  },
                  {
                    key: "floor",
                    value: function () {
                      return (
                        (this.x = Math.floor(this.x)),
                        (this.y = Math.floor(this.y)),
                        (this.z = Math.floor(this.z)),
                        this
                      );
                    },
                  },
                  {
                    key: "ceil",
                    value: function () {
                      return (
                        (this.x = Math.ceil(this.x)),
                        (this.y = Math.ceil(this.y)),
                        (this.z = Math.ceil(this.z)),
                        this
                      );
                    },
                  },
                  {
                    key: "round",
                    value: function () {
                      return (
                        (this.x = Math.round(this.x)),
                        (this.y = Math.round(this.y)),
                        (this.z = Math.round(this.z)),
                        this
                      );
                    },
                  },
                  {
                    key: "roundToZero",
                    value: function () {
                      return (
                        (this.x =
                          this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x)),
                        (this.y =
                          this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y)),
                        (this.z =
                          this.z < 0 ? Math.ceil(this.z) : Math.floor(this.z)),
                        this
                      );
                    },
                  },
                  {
                    key: "negate",
                    value: function () {
                      return (
                        (this.x = -this.x),
                        (this.y = -this.y),
                        (this.z = -this.z),
                        this
                      );
                    },
                  },
                  {
                    key: "dot",
                    value: function (e) {
                      return this.x * e.x + this.y * e.y + this.z * e.z;
                    },
                  },
                  {
                    key: "lengthSq",
                    value: function () {
                      return (
                        this.x * this.x + this.y * this.y + this.z * this.z
                      );
                    },
                  },
                  {
                    key: "length",
                    value: function () {
                      return Math.sqrt(
                        this.x * this.x + this.y * this.y + this.z * this.z
                      );
                    },
                  },
                  {
                    key: "manhattanLength",
                    value: function () {
                      return (
                        Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z)
                      );
                    },
                  },
                  {
                    key: "normalize",
                    value: function () {
                      return this.divideScalar(this.length() || 1);
                    },
                  },
                  {
                    key: "setLength",
                    value: function (e) {
                      return this.normalize().multiplyScalar(e);
                    },
                  },
                  {
                    key: "lerp",
                    value: function (e, t) {
                      return (
                        (this.x += (e.x - this.x) * t),
                        (this.y += (e.y - this.y) * t),
                        (this.z += (e.z - this.z) * t),
                        this
                      );
                    },
                  },
                  {
                    key: "lerpVectors",
                    value: function (e, t, n) {
                      return (
                        (this.x = e.x + (t.x - e.x) * n),
                        (this.y = e.y + (t.y - e.y) * n),
                        (this.z = e.z + (t.z - e.z) * n),
                        this
                      );
                    },
                  },
                  {
                    key: "cross",
                    value: function (e, t) {
                      return void 0 !== t
                        ? (console.warn(
                            "THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."
                          ),
                          this.crossVectors(e, t))
                        : this.crossVectors(this, e);
                    },
                  },
                  {
                    key: "crossVectors",
                    value: function (e, t) {
                      var n = e.x,
                        i = e.y,
                        r = e.z,
                        a = t.x,
                        o = t.y,
                        s = t.z;
                      return (
                        (this.x = i * s - r * o),
                        (this.y = r * a - n * s),
                        (this.z = n * o - i * a),
                        this
                      );
                    },
                  },
                  {
                    key: "projectOnVector",
                    value: function (e) {
                      var t = e.lengthSq();
                      if (0 === t) return this.set(0, 0, 0);
                      var n = e.dot(this) / t;
                      return this.copy(e).multiplyScalar(n);
                    },
                  },
                  {
                    key: "projectOnPlane",
                    value: function (e) {
                      return wi.copy(this).projectOnVector(e), this.sub(wi);
                    },
                  },
                  {
                    key: "reflect",
                    value: function (e) {
                      return this.sub(
                        wi.copy(e).multiplyScalar(2 * this.dot(e))
                      );
                    },
                  },
                  {
                    key: "angleTo",
                    value: function (e) {
                      var t = Math.sqrt(this.lengthSq() * e.lengthSq());
                      if (0 === t) return Math.PI / 2;
                      var n = this.dot(e) / t;
                      return Math.acos(ni(n, -1, 1));
                    },
                  },
                  {
                    key: "distanceTo",
                    value: function (e) {
                      return Math.sqrt(this.distanceToSquared(e));
                    },
                  },
                  {
                    key: "distanceToSquared",
                    value: function (e) {
                      var t = this.x - e.x,
                        n = this.y - e.y,
                        i = this.z - e.z;
                      return t * t + n * n + i * i;
                    },
                  },
                  {
                    key: "manhattanDistanceTo",
                    value: function (e) {
                      return (
                        Math.abs(this.x - e.x) +
                        Math.abs(this.y - e.y) +
                        Math.abs(this.z - e.z)
                      );
                    },
                  },
                  {
                    key: "setFromSpherical",
                    value: function (e) {
                      return this.setFromSphericalCoords(
                        e.radius,
                        e.phi,
                        e.theta
                      );
                    },
                  },
                  {
                    key: "setFromSphericalCoords",
                    value: function (e, t, n) {
                      var i = Math.sin(t) * e;
                      return (
                        (this.x = i * Math.sin(n)),
                        (this.y = Math.cos(t) * e),
                        (this.z = i * Math.cos(n)),
                        this
                      );
                    },
                  },
                  {
                    key: "setFromCylindrical",
                    value: function (e) {
                      return this.setFromCylindricalCoords(
                        e.radius,
                        e.theta,
                        e.y
                      );
                    },
                  },
                  {
                    key: "setFromCylindricalCoords",
                    value: function (e, t, n) {
                      return (
                        (this.x = e * Math.sin(t)),
                        (this.y = n),
                        (this.z = e * Math.cos(t)),
                        this
                      );
                    },
                  },
                  {
                    key: "setFromMatrixPosition",
                    value: function (e) {
                      var t = e.elements;
                      return (
                        (this.x = t[12]),
                        (this.y = t[13]),
                        (this.z = t[14]),
                        this
                      );
                    },
                  },
                  {
                    key: "setFromMatrixScale",
                    value: function (e) {
                      var t = this.setFromMatrixColumn(e, 0).length(),
                        n = this.setFromMatrixColumn(e, 1).length(),
                        i = this.setFromMatrixColumn(e, 2).length();
                      return (this.x = t), (this.y = n), (this.z = i), this;
                    },
                  },
                  {
                    key: "setFromMatrixColumn",
                    value: function (e, t) {
                      return this.fromArray(e.elements, 4 * t);
                    },
                  },
                  {
                    key: "setFromMatrix3Column",
                    value: function (e, t) {
                      return this.fromArray(e.elements, 3 * t);
                    },
                  },
                  {
                    key: "equals",
                    value: function (e) {
                      return e.x === this.x && e.y === this.y && e.z === this.z;
                    },
                  },
                  {
                    key: "fromArray",
                    value: function (e) {
                      var t =
                        arguments.length > 1 && void 0 !== arguments[1]
                          ? arguments[1]
                          : 0;
                      return (
                        (this.x = e[t]),
                        (this.y = e[t + 1]),
                        (this.z = e[t + 2]),
                        this
                      );
                    },
                  },
                  {
                    key: "toArray",
                    value: function () {
                      var e =
                          arguments.length > 0 && void 0 !== arguments[0]
                            ? arguments[0]
                            : [],
                        t =
                          arguments.length > 1 && void 0 !== arguments[1]
                            ? arguments[1]
                            : 0;
                      return (
                        (e[t] = this.x),
                        (e[t + 1] = this.y),
                        (e[t + 2] = this.z),
                        e
                      );
                    },
                  },
                  {
                    key: "fromBufferAttribute",
                    value: function (e, t, n) {
                      return (
                        void 0 !== n &&
                          console.warn(
                            "THREE.Vector3: offset has been removed from .fromBufferAttribute()."
                          ),
                        (this.x = e.getX(t)),
                        (this.y = e.getY(t)),
                        (this.z = e.getZ(t)),
                        this
                      );
                    },
                  },
                  {
                    key: "random",
                    value: function () {
                      return (
                        (this.x = Math.random()),
                        (this.y = Math.random()),
                        (this.z = Math.random()),
                        this
                      );
                    },
                  },
                ]),
                e
              );
            })();
            _i.prototype.isVector3 = !0;
            var wi = new _i(),
              Si = new bi(),
              Ei = (function () {
                function e() {
                  var t =
                      arguments.length > 0 && void 0 !== arguments[0]
                        ? arguments[0]
                        : new _i(1 / 0, 1 / 0, 1 / 0),
                    n =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : new _i(-1 / 0, -1 / 0, -1 / 0);
                  f(this, e), (this.min = t), (this.max = n);
                }
                return (
                  m(e, [
                    {
                      key: "set",
                      value: function (e, t) {
                        return this.min.copy(e), this.max.copy(t), this;
                      },
                    },
                    {
                      key: "setFromArray",
                      value: function (e) {
                        for (
                          var t = 1 / 0,
                            n = 1 / 0,
                            i = 1 / 0,
                            r = -1 / 0,
                            a = -1 / 0,
                            o = -1 / 0,
                            s = 0,
                            l = e.length;
                          s < l;
                          s += 3
                        ) {
                          var u = e[s],
                            c = e[s + 1],
                            h = e[s + 2];
                          u < t && (t = u),
                            c < n && (n = c),
                            h < i && (i = h),
                            u > r && (r = u),
                            c > a && (a = c),
                            h > o && (o = h);
                        }
                        return (
                          this.min.set(t, n, i), this.max.set(r, a, o), this
                        );
                      },
                    },
                    {
                      key: "setFromBufferAttribute",
                      value: function (e) {
                        for (
                          var t = 1 / 0,
                            n = 1 / 0,
                            i = 1 / 0,
                            r = -1 / 0,
                            a = -1 / 0,
                            o = -1 / 0,
                            s = 0,
                            l = e.count;
                          s < l;
                          s++
                        ) {
                          var u = e.getX(s),
                            c = e.getY(s),
                            h = e.getZ(s);
                          u < t && (t = u),
                            c < n && (n = c),
                            h < i && (i = h),
                            u > r && (r = u),
                            c > a && (a = c),
                            h > o && (o = h);
                        }
                        return (
                          this.min.set(t, n, i), this.max.set(r, a, o), this
                        );
                      },
                    },
                    {
                      key: "setFromPoints",
                      value: function (e) {
                        this.makeEmpty();
                        for (var t = 0, n = e.length; t < n; t++)
                          this.expandByPoint(e[t]);
                        return this;
                      },
                    },
                    {
                      key: "setFromCenterAndSize",
                      value: function (e, t) {
                        var n = Ai.copy(t).multiplyScalar(0.5);
                        return (
                          this.min.copy(e).sub(n), this.max.copy(e).add(n), this
                        );
                      },
                    },
                    {
                      key: "setFromObject",
                      value: function (e) {
                        return this.makeEmpty(), this.expandByObject(e);
                      },
                    },
                    {
                      key: "clone",
                      value: function () {
                        return new this.constructor().copy(this);
                      },
                    },
                    {
                      key: "copy",
                      value: function (e) {
                        return this.min.copy(e.min), this.max.copy(e.max), this;
                      },
                    },
                    {
                      key: "makeEmpty",
                      value: function () {
                        return (
                          (this.min.x = this.min.y = this.min.z = 1 / 0),
                          (this.max.x = this.max.y = this.max.z = -1 / 0),
                          this
                        );
                      },
                    },
                    {
                      key: "isEmpty",
                      value: function () {
                        return (
                          this.max.x < this.min.x ||
                          this.max.y < this.min.y ||
                          this.max.z < this.min.z
                        );
                      },
                    },
                    {
                      key: "getCenter",
                      value: function (e) {
                        return (
                          void 0 === e &&
                            (console.warn(
                              "THREE.Box3: .getCenter() target is now required"
                            ),
                            (e = new _i())),
                          this.isEmpty()
                            ? e.set(0, 0, 0)
                            : e
                                .addVectors(this.min, this.max)
                                .multiplyScalar(0.5)
                        );
                      },
                    },
                    {
                      key: "getSize",
                      value: function (e) {
                        return (
                          void 0 === e &&
                            (console.warn(
                              "THREE.Box3: .getSize() target is now required"
                            ),
                            (e = new _i())),
                          this.isEmpty()
                            ? e.set(0, 0, 0)
                            : e.subVectors(this.max, this.min)
                        );
                      },
                    },
                    {
                      key: "expandByPoint",
                      value: function (e) {
                        return this.min.min(e), this.max.max(e), this;
                      },
                    },
                    {
                      key: "expandByVector",
                      value: function (e) {
                        return this.min.sub(e), this.max.add(e), this;
                      },
                    },
                    {
                      key: "expandByScalar",
                      value: function (e) {
                        return (
                          this.min.addScalar(-e), this.max.addScalar(e), this
                        );
                      },
                    },
                    {
                      key: "expandByObject",
                      value: function (e) {
                        e.updateWorldMatrix(!1, !1);
                        var t = e.geometry;
                        void 0 !== t &&
                          (null === t.boundingBox && t.computeBoundingBox(),
                          Ti.copy(t.boundingBox),
                          Ti.applyMatrix4(e.matrixWorld),
                          this.union(Ti));
                        for (
                          var n = e.children, i = 0, r = n.length;
                          i < r;
                          i++
                        )
                          this.expandByObject(n[i]);
                        return this;
                      },
                    },
                    {
                      key: "containsPoint",
                      value: function (e) {
                        return !(
                          e.x < this.min.x ||
                          e.x > this.max.x ||
                          e.y < this.min.y ||
                          e.y > this.max.y ||
                          e.z < this.min.z ||
                          e.z > this.max.z
                        );
                      },
                    },
                    {
                      key: "containsBox",
                      value: function (e) {
                        return (
                          this.min.x <= e.min.x &&
                          e.max.x <= this.max.x &&
                          this.min.y <= e.min.y &&
                          e.max.y <= this.max.y &&
                          this.min.z <= e.min.z &&
                          e.max.z <= this.max.z
                        );
                      },
                    },
                    {
                      key: "getParameter",
                      value: function (e, t) {
                        return (
                          void 0 === t &&
                            (console.warn(
                              "THREE.Box3: .getParameter() target is now required"
                            ),
                            (t = new _i())),
                          t.set(
                            (e.x - this.min.x) / (this.max.x - this.min.x),
                            (e.y - this.min.y) / (this.max.y - this.min.y),
                            (e.z - this.min.z) / (this.max.z - this.min.z)
                          )
                        );
                      },
                    },
                    {
                      key: "intersectsBox",
                      value: function (e) {
                        return !(
                          e.max.x < this.min.x ||
                          e.min.x > this.max.x ||
                          e.max.y < this.min.y ||
                          e.min.y > this.max.y ||
                          e.max.z < this.min.z ||
                          e.min.z > this.max.z
                        );
                      },
                    },
                    {
                      key: "intersectsSphere",
                      value: function (e) {
                        return (
                          this.clampPoint(e.center, Ai),
                          Ai.distanceToSquared(e.center) <= e.radius * e.radius
                        );
                      },
                    },
                    {
                      key: "intersectsPlane",
                      value: function (e) {
                        var t, n;
                        return (
                          e.normal.x > 0
                            ? ((t = e.normal.x * this.min.x),
                              (n = e.normal.x * this.max.x))
                            : ((t = e.normal.x * this.max.x),
                              (n = e.normal.x * this.min.x)),
                          e.normal.y > 0
                            ? ((t += e.normal.y * this.min.y),
                              (n += e.normal.y * this.max.y))
                            : ((t += e.normal.y * this.max.y),
                              (n += e.normal.y * this.min.y)),
                          e.normal.z > 0
                            ? ((t += e.normal.z * this.min.z),
                              (n += e.normal.z * this.max.z))
                            : ((t += e.normal.z * this.max.z),
                              (n += e.normal.z * this.min.z)),
                          t <= -e.constant && n >= -e.constant
                        );
                      },
                    },
                    {
                      key: "intersectsTriangle",
                      value: function (e) {
                        if (this.isEmpty()) return !1;
                        this.getCenter(Fi),
                          Ni.subVectors(this.max, Fi),
                          Ci.subVectors(e.a, Fi),
                          ki.subVectors(e.b, Fi),
                          Pi.subVectors(e.c, Fi),
                          Li.subVectors(ki, Ci),
                          Ri.subVectors(Pi, ki),
                          Ii.subVectors(Ci, Pi);
                        var t = [
                          0,
                          -Li.z,
                          Li.y,
                          0,
                          -Ri.z,
                          Ri.y,
                          0,
                          -Ii.z,
                          Ii.y,
                          Li.z,
                          0,
                          -Li.x,
                          Ri.z,
                          0,
                          -Ri.x,
                          Ii.z,
                          0,
                          -Ii.x,
                          -Li.y,
                          Li.x,
                          0,
                          -Ri.y,
                          Ri.x,
                          0,
                          -Ii.y,
                          Ii.x,
                          0,
                        ];
                        return (
                          !!Di(t, Ci, ki, Pi, Ni) &&
                          !!Di(
                            (t = [1, 0, 0, 0, 1, 0, 0, 0, 1]),
                            Ci,
                            ki,
                            Pi,
                            Ni
                          ) &&
                          (Oi.crossVectors(Li, Ri),
                          Di((t = [Oi.x, Oi.y, Oi.z]), Ci, ki, Pi, Ni))
                        );
                      },
                    },
                    {
                      key: "clampPoint",
                      value: function (e, t) {
                        return (
                          void 0 === t &&
                            (console.warn(
                              "THREE.Box3: .clampPoint() target is now required"
                            ),
                            (t = new _i())),
                          t.copy(e).clamp(this.min, this.max)
                        );
                      },
                    },
                    {
                      key: "distanceToPoint",
                      value: function (e) {
                        return Ai.copy(e)
                          .clamp(this.min, this.max)
                          .sub(e)
                          .length();
                      },
                    },
                    {
                      key: "getBoundingSphere",
                      value: function (e) {
                        return (
                          void 0 === e &&
                            console.error(
                              "THREE.Box3: .getBoundingSphere() target is now required"
                            ),
                          this.getCenter(e.center),
                          (e.radius = 0.5 * this.getSize(Ai).length()),
                          e
                        );
                      },
                    },
                    {
                      key: "intersect",
                      value: function (e) {
                        return (
                          this.min.max(e.min),
                          this.max.min(e.max),
                          this.isEmpty() && this.makeEmpty(),
                          this
                        );
                      },
                    },
                    {
                      key: "union",
                      value: function (e) {
                        return this.min.min(e.min), this.max.max(e.max), this;
                      },
                    },
                    {
                      key: "applyMatrix4",
                      value: function (e) {
                        return (
                          this.isEmpty() ||
                            (Mi[0]
                              .set(this.min.x, this.min.y, this.min.z)
                              .applyMatrix4(e),
                            Mi[1]
                              .set(this.min.x, this.min.y, this.max.z)
                              .applyMatrix4(e),
                            Mi[2]
                              .set(this.min.x, this.max.y, this.min.z)
                              .applyMatrix4(e),
                            Mi[3]
                              .set(this.min.x, this.max.y, this.max.z)
                              .applyMatrix4(e),
                            Mi[4]
                              .set(this.max.x, this.min.y, this.min.z)
                              .applyMatrix4(e),
                            Mi[5]
                              .set(this.max.x, this.min.y, this.max.z)
                              .applyMatrix4(e),
                            Mi[6]
                              .set(this.max.x, this.max.y, this.min.z)
                              .applyMatrix4(e),
                            Mi[7]
                              .set(this.max.x, this.max.y, this.max.z)
                              .applyMatrix4(e),
                            this.setFromPoints(Mi)),
                          this
                        );
                      },
                    },
                    {
                      key: "translate",
                      value: function (e) {
                        return this.min.add(e), this.max.add(e), this;
                      },
                    },
                    {
                      key: "equals",
                      value: function (e) {
                        return e.min.equals(this.min) && e.max.equals(this.max);
                      },
                    },
                  ]),
                  e
                );
              })();
            Ei.prototype.isBox3 = !0;
            var Mi = [
                new _i(),
                new _i(),
                new _i(),
                new _i(),
                new _i(),
                new _i(),
                new _i(),
                new _i(),
              ],
              Ai = new _i(),
              Ti = new Ei(),
              Ci = new _i(),
              ki = new _i(),
              Pi = new _i(),
              Li = new _i(),
              Ri = new _i(),
              Ii = new _i(),
              Fi = new _i(),
              Ni = new _i(),
              Oi = new _i(),
              Bi = new _i();
            function Di(e, t, n, i, r) {
              for (var a = 0, o = e.length - 3; a <= o; a += 3) {
                Bi.fromArray(e, a);
                var s =
                    r.x * Math.abs(Bi.x) +
                    r.y * Math.abs(Bi.y) +
                    r.z * Math.abs(Bi.z),
                  l = t.dot(Bi),
                  u = n.dot(Bi),
                  c = i.dot(Bi);
                if (Math.max(-Math.max(l, u, c), Math.min(l, u, c)) > s)
                  return !1;
              }
              return !0;
            }
            var Vi = new Ei(),
              Ui = new _i(),
              zi = new _i(),
              ji = new _i(),
              Gi = (function () {
                function e() {
                  var t =
                      arguments.length > 0 && void 0 !== arguments[0]
                        ? arguments[0]
                        : new _i(),
                    n =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : -1;
                  f(this, e), (this.center = t), (this.radius = n);
                }
                return (
                  m(e, [
                    {
                      key: "set",
                      value: function (e, t) {
                        return this.center.copy(e), (this.radius = t), this;
                      },
                    },
                    {
                      key: "setFromPoints",
                      value: function (e, t) {
                        var n = this.center;
                        void 0 !== t
                          ? n.copy(t)
                          : Vi.setFromPoints(e).getCenter(n);
                        for (var i = 0, r = 0, a = e.length; r < a; r++)
                          i = Math.max(i, n.distanceToSquared(e[r]));
                        return (this.radius = Math.sqrt(i)), this;
                      },
                    },
                    {
                      key: "copy",
                      value: function (e) {
                        return (
                          this.center.copy(e.center),
                          (this.radius = e.radius),
                          this
                        );
                      },
                    },
                    {
                      key: "isEmpty",
                      value: function () {
                        return this.radius < 0;
                      },
                    },
                    {
                      key: "makeEmpty",
                      value: function () {
                        return (
                          this.center.set(0, 0, 0), (this.radius = -1), this
                        );
                      },
                    },
                    {
                      key: "containsPoint",
                      value: function (e) {
                        return (
                          e.distanceToSquared(this.center) <=
                          this.radius * this.radius
                        );
                      },
                    },
                    {
                      key: "distanceToPoint",
                      value: function (e) {
                        return e.distanceTo(this.center) - this.radius;
                      },
                    },
                    {
                      key: "intersectsSphere",
                      value: function (e) {
                        var t = this.radius + e.radius;
                        return e.center.distanceToSquared(this.center) <= t * t;
                      },
                    },
                    {
                      key: "intersectsBox",
                      value: function (e) {
                        return e.intersectsSphere(this);
                      },
                    },
                    {
                      key: "intersectsPlane",
                      value: function (e) {
                        return (
                          Math.abs(e.distanceToPoint(this.center)) <=
                          this.radius
                        );
                      },
                    },
                    {
                      key: "clampPoint",
                      value: function (e, t) {
                        var n = this.center.distanceToSquared(e);
                        return (
                          void 0 === t &&
                            (console.warn(
                              "THREE.Sphere: .clampPoint() target is now required"
                            ),
                            (t = new _i())),
                          t.copy(e),
                          n > this.radius * this.radius &&
                            (t.sub(this.center).normalize(),
                            t.multiplyScalar(this.radius).add(this.center)),
                          t
                        );
                      },
                    },
                    {
                      key: "getBoundingBox",
                      value: function (e) {
                        return (
                          void 0 === e &&
                            (console.warn(
                              "THREE.Sphere: .getBoundingBox() target is now required"
                            ),
                            (e = new Ei())),
                          this.isEmpty()
                            ? (e.makeEmpty(), e)
                            : (e.set(this.center, this.center),
                              e.expandByScalar(this.radius),
                              e)
                        );
                      },
                    },
                    {
                      key: "applyMatrix4",
                      value: function (e) {
                        return (
                          this.center.applyMatrix4(e),
                          (this.radius = this.radius * e.getMaxScaleOnAxis()),
                          this
                        );
                      },
                    },
                    {
                      key: "translate",
                      value: function (e) {
                        return this.center.add(e), this;
                      },
                    },
                    {
                      key: "expandByPoint",
                      value: function (e) {
                        ji.subVectors(e, this.center);
                        var t = ji.lengthSq();
                        if (t > this.radius * this.radius) {
                          var n = Math.sqrt(t),
                            i = 0.5 * (n - this.radius);
                          this.center.add(ji.multiplyScalar(i / n)),
                            (this.radius += i);
                        }
                        return this;
                      },
                    },
                    {
                      key: "union",
                      value: function (e) {
                        return (
                          zi
                            .subVectors(e.center, this.center)
                            .normalize()
                            .multiplyScalar(e.radius),
                          this.expandByPoint(Ui.copy(e.center).add(zi)),
                          this.expandByPoint(Ui.copy(e.center).sub(zi)),
                          this
                        );
                      },
                    },
                    {
                      key: "equals",
                      value: function (e) {
                        return (
                          e.center.equals(this.center) &&
                          e.radius === this.radius
                        );
                      },
                    },
                    {
                      key: "clone",
                      value: function () {
                        return new this.constructor().copy(this);
                      },
                    },
                  ]),
                  e
                );
              })(),
              Hi = new _i(),
              Wi = new _i(),
              Yi = new _i(),
              qi = new _i(),
              Xi = new _i(),
              Qi = new _i(),
              Zi = new _i(),
              Ji = (function () {
                function e() {
                  var t =
                      arguments.length > 0 && void 0 !== arguments[0]
                        ? arguments[0]
                        : new _i(),
                    n =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : new _i(0, 0, -1);
                  f(this, e), (this.origin = t), (this.direction = n);
                }
                return (
                  m(e, [
                    {
                      key: "set",
                      value: function (e, t) {
                        return (
                          this.origin.copy(e), this.direction.copy(t), this
                        );
                      },
                    },
                    {
                      key: "copy",
                      value: function (e) {
                        return (
                          this.origin.copy(e.origin),
                          this.direction.copy(e.direction),
                          this
                        );
                      },
                    },
                    {
                      key: "at",
                      value: function (e, t) {
                        return (
                          void 0 === t &&
                            (console.warn(
                              "THREE.Ray: .at() target is now required"
                            ),
                            (t = new _i())),
                          t
                            .copy(this.direction)
                            .multiplyScalar(e)
                            .add(this.origin)
                        );
                      },
                    },
                    {
                      key: "lookAt",
                      value: function (e) {
                        return (
                          this.direction.copy(e).sub(this.origin).normalize(),
                          this
                        );
                      },
                    },
                    {
                      key: "recast",
                      value: function (e) {
                        return this.origin.copy(this.at(e, Hi)), this;
                      },
                    },
                    {
                      key: "closestPointToPoint",
                      value: function (e, t) {
                        void 0 === t &&
                          (console.warn(
                            "THREE.Ray: .closestPointToPoint() target is now required"
                          ),
                          (t = new _i())),
                          t.subVectors(e, this.origin);
                        var n = t.dot(this.direction);
                        return n < 0
                          ? t.copy(this.origin)
                          : t
                              .copy(this.direction)
                              .multiplyScalar(n)
                              .add(this.origin);
                      },
                    },
                    {
                      key: "distanceToPoint",
                      value: function (e) {
                        return Math.sqrt(this.distanceSqToPoint(e));
                      },
                    },
                    {
                      key: "distanceSqToPoint",
                      value: function (e) {
                        var t = Hi.subVectors(e, this.origin).dot(
                          this.direction
                        );
                        return t < 0
                          ? this.origin.distanceToSquared(e)
                          : (Hi.copy(this.direction)
                              .multiplyScalar(t)
                              .add(this.origin),
                            Hi.distanceToSquared(e));
                      },
                    },
                    {
                      key: "distanceSqToSegment",
                      value: function (e, t, n, i) {
                        Wi.copy(e).add(t).multiplyScalar(0.5),
                          Yi.copy(t).sub(e).normalize(),
                          qi.copy(this.origin).sub(Wi);
                        var r,
                          a,
                          o,
                          s,
                          l = 0.5 * e.distanceTo(t),
                          u = -this.direction.dot(Yi),
                          c = qi.dot(this.direction),
                          h = -qi.dot(Yi),
                          d = qi.lengthSq(),
                          p = Math.abs(1 - u * u);
                        if (p > 0)
                          if (
                            ((a = u * c - h), (s = l * p), (r = u * h - c) >= 0)
                          )
                            if (a >= -s)
                              if (a <= s) {
                                var f = 1 / p;
                                o =
                                  (r *= f) * (r + u * (a *= f) + 2 * c) +
                                  a * (u * r + a + 2 * h) +
                                  d;
                              } else
                                (a = l),
                                  (o =
                                    -(r = Math.max(0, -(u * a + c))) * r +
                                    a * (a + 2 * h) +
                                    d);
                            else
                              (a = -l),
                                (o =
                                  -(r = Math.max(0, -(u * a + c))) * r +
                                  a * (a + 2 * h) +
                                  d);
                          else
                            a <= -s
                              ? (o =
                                  -(r = Math.max(0, -(-u * l + c))) * r +
                                  (a =
                                    r > 0
                                      ? -l
                                      : Math.min(Math.max(-l, -h), l)) *
                                    (a + 2 * h) +
                                  d)
                              : a <= s
                              ? ((r = 0),
                                (o =
                                  (a = Math.min(Math.max(-l, -h), l)) *
                                    (a + 2 * h) +
                                  d))
                              : (o =
                                  -(r = Math.max(0, -(u * l + c))) * r +
                                  (a =
                                    r > 0 ? l : Math.min(Math.max(-l, -h), l)) *
                                    (a + 2 * h) +
                                  d);
                        else
                          (a = u > 0 ? -l : l),
                            (o =
                              -(r = Math.max(0, -(u * a + c))) * r +
                              a * (a + 2 * h) +
                              d);
                        return (
                          n &&
                            n
                              .copy(this.direction)
                              .multiplyScalar(r)
                              .add(this.origin),
                          i && i.copy(Yi).multiplyScalar(a).add(Wi),
                          o
                        );
                      },
                    },
                    {
                      key: "intersectSphere",
                      value: function (e, t) {
                        Hi.subVectors(e.center, this.origin);
                        var n = Hi.dot(this.direction),
                          i = Hi.dot(Hi) - n * n,
                          r = e.radius * e.radius;
                        if (i > r) return null;
                        var a = Math.sqrt(r - i),
                          o = n - a,
                          s = n + a;
                        return o < 0 && s < 0
                          ? null
                          : o < 0
                          ? this.at(s, t)
                          : this.at(o, t);
                      },
                    },
                    {
                      key: "intersectsSphere",
                      value: function (e) {
                        return (
                          this.distanceSqToPoint(e.center) <=
                          e.radius * e.radius
                        );
                      },
                    },
                    {
                      key: "distanceToPlane",
                      value: function (e) {
                        var t = e.normal.dot(this.direction);
                        if (0 === t)
                          return 0 === e.distanceToPoint(this.origin)
                            ? 0
                            : null;
                        var n = -(this.origin.dot(e.normal) + e.constant) / t;
                        return n >= 0 ? n : null;
                      },
                    },
                    {
                      key: "intersectPlane",
                      value: function (e, t) {
                        var n = this.distanceToPlane(e);
                        return null === n ? null : this.at(n, t);
                      },
                    },
                    {
                      key: "intersectsPlane",
                      value: function (e) {
                        var t = e.distanceToPoint(this.origin);
                        return 0 === t || e.normal.dot(this.direction) * t < 0;
                      },
                    },
                    {
                      key: "intersectBox",
                      value: function (e, t) {
                        var n,
                          i,
                          r,
                          a,
                          o,
                          s,
                          l = 1 / this.direction.x,
                          u = 1 / this.direction.y,
                          c = 1 / this.direction.z,
                          h = this.origin;
                        return (
                          l >= 0
                            ? ((n = (e.min.x - h.x) * l),
                              (i = (e.max.x - h.x) * l))
                            : ((n = (e.max.x - h.x) * l),
                              (i = (e.min.x - h.x) * l)),
                          u >= 0
                            ? ((r = (e.min.y - h.y) * u),
                              (a = (e.max.y - h.y) * u))
                            : ((r = (e.max.y - h.y) * u),
                              (a = (e.min.y - h.y) * u)),
                          n > a || r > i
                            ? null
                            : ((r > n || n !== n) && (n = r),
                              (a < i || i !== i) && (i = a),
                              c >= 0
                                ? ((o = (e.min.z - h.z) * c),
                                  (s = (e.max.z - h.z) * c))
                                : ((o = (e.max.z - h.z) * c),
                                  (s = (e.min.z - h.z) * c)),
                              n > s || o > i
                                ? null
                                : ((o > n || n !== n) && (n = o),
                                  (s < i || i !== i) && (i = s),
                                  i < 0 ? null : this.at(n >= 0 ? n : i, t)))
                        );
                      },
                    },
                    {
                      key: "intersectsBox",
                      value: function (e) {
                        return null !== this.intersectBox(e, Hi);
                      },
                    },
                    {
                      key: "intersectTriangle",
                      value: function (e, t, n, i, r) {
                        Xi.subVectors(t, e),
                          Qi.subVectors(n, e),
                          Zi.crossVectors(Xi, Qi);
                        var a,
                          o = this.direction.dot(Zi);
                        if (o > 0) {
                          if (i) return null;
                          a = 1;
                        } else {
                          if (!(o < 0)) return null;
                          (a = -1), (o = -o);
                        }
                        qi.subVectors(this.origin, e);
                        var s = a * this.direction.dot(Qi.crossVectors(qi, Qi));
                        if (s < 0) return null;
                        var l = a * this.direction.dot(Xi.cross(qi));
                        if (l < 0) return null;
                        if (s + l > o) return null;
                        var u = -a * qi.dot(Zi);
                        return u < 0 ? null : this.at(u / o, r);
                      },
                    },
                    {
                      key: "applyMatrix4",
                      value: function (e) {
                        return (
                          this.origin.applyMatrix4(e),
                          this.direction.transformDirection(e),
                          this
                        );
                      },
                    },
                    {
                      key: "equals",
                      value: function (e) {
                        return (
                          e.origin.equals(this.origin) &&
                          e.direction.equals(this.direction)
                        );
                      },
                    },
                    {
                      key: "clone",
                      value: function () {
                        return new this.constructor().copy(this);
                      },
                    },
                  ]),
                  e
                );
              })(),
              Ki = (function () {
                function e() {
                  f(this, e),
                    (this.elements = [
                      1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1,
                    ]),
                    arguments.length > 0 &&
                      console.error(
                        "THREE.Matrix4: the constructor no longer reads arguments. use .set() instead."
                      );
                }
                return (
                  m(e, [
                    {
                      key: "set",
                      value: function (
                        e,
                        t,
                        n,
                        i,
                        r,
                        a,
                        o,
                        s,
                        l,
                        u,
                        c,
                        h,
                        d,
                        p,
                        f,
                        m
                      ) {
                        var v = this.elements;
                        return (
                          (v[0] = e),
                          (v[4] = t),
                          (v[8] = n),
                          (v[12] = i),
                          (v[1] = r),
                          (v[5] = a),
                          (v[9] = o),
                          (v[13] = s),
                          (v[2] = l),
                          (v[6] = u),
                          (v[10] = c),
                          (v[14] = h),
                          (v[3] = d),
                          (v[7] = p),
                          (v[11] = f),
                          (v[15] = m),
                          this
                        );
                      },
                    },
                    {
                      key: "identity",
                      value: function () {
                        return (
                          this.set(
                            1,
                            0,
                            0,
                            0,
                            0,
                            1,
                            0,
                            0,
                            0,
                            0,
                            1,
                            0,
                            0,
                            0,
                            0,
                            1
                          ),
                          this
                        );
                      },
                    },
                    {
                      key: "clone",
                      value: function () {
                        return new e().fromArray(this.elements);
                      },
                    },
                    {
                      key: "copy",
                      value: function (e) {
                        var t = this.elements,
                          n = e.elements;
                        return (
                          (t[0] = n[0]),
                          (t[1] = n[1]),
                          (t[2] = n[2]),
                          (t[3] = n[3]),
                          (t[4] = n[4]),
                          (t[5] = n[5]),
                          (t[6] = n[6]),
                          (t[7] = n[7]),
                          (t[8] = n[8]),
                          (t[9] = n[9]),
                          (t[10] = n[10]),
                          (t[11] = n[11]),
                          (t[12] = n[12]),
                          (t[13] = n[13]),
                          (t[14] = n[14]),
                          (t[15] = n[15]),
                          this
                        );
                      },
                    },
                    {
                      key: "copyPosition",
                      value: function (e) {
                        var t = this.elements,
                          n = e.elements;
                        return (
                          (t[12] = n[12]),
                          (t[13] = n[13]),
                          (t[14] = n[14]),
                          this
                        );
                      },
                    },
                    {
                      key: "setFromMatrix3",
                      value: function (e) {
                        var t = e.elements;
                        return (
                          this.set(
                            t[0],
                            t[3],
                            t[6],
                            0,
                            t[1],
                            t[4],
                            t[7],
                            0,
                            t[2],
                            t[5],
                            t[8],
                            0,
                            0,
                            0,
                            0,
                            1
                          ),
                          this
                        );
                      },
                    },
                    {
                      key: "extractBasis",
                      value: function (e, t, n) {
                        return (
                          e.setFromMatrixColumn(this, 0),
                          t.setFromMatrixColumn(this, 1),
                          n.setFromMatrixColumn(this, 2),
                          this
                        );
                      },
                    },
                    {
                      key: "makeBasis",
                      value: function (e, t, n) {
                        return (
                          this.set(
                            e.x,
                            t.x,
                            n.x,
                            0,
                            e.y,
                            t.y,
                            n.y,
                            0,
                            e.z,
                            t.z,
                            n.z,
                            0,
                            0,
                            0,
                            0,
                            1
                          ),
                          this
                        );
                      },
                    },
                    {
                      key: "extractRotation",
                      value: function (e) {
                        var t = this.elements,
                          n = e.elements,
                          i = 1 / $i.setFromMatrixColumn(e, 0).length(),
                          r = 1 / $i.setFromMatrixColumn(e, 1).length(),
                          a = 1 / $i.setFromMatrixColumn(e, 2).length();
                        return (
                          (t[0] = n[0] * i),
                          (t[1] = n[1] * i),
                          (t[2] = n[2] * i),
                          (t[3] = 0),
                          (t[4] = n[4] * r),
                          (t[5] = n[5] * r),
                          (t[6] = n[6] * r),
                          (t[7] = 0),
                          (t[8] = n[8] * a),
                          (t[9] = n[9] * a),
                          (t[10] = n[10] * a),
                          (t[11] = 0),
                          (t[12] = 0),
                          (t[13] = 0),
                          (t[14] = 0),
                          (t[15] = 1),
                          this
                        );
                      },
                    },
                    {
                      key: "makeRotationFromEuler",
                      value: function (e) {
                        (e && e.isEuler) ||
                          console.error(
                            "THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order."
                          );
                        var t = this.elements,
                          n = e.x,
                          i = e.y,
                          r = e.z,
                          a = Math.cos(n),
                          o = Math.sin(n),
                          s = Math.cos(i),
                          l = Math.sin(i),
                          u = Math.cos(r),
                          c = Math.sin(r);
                        if ("XYZ" === e.order) {
                          var h = a * u,
                            d = a * c,
                            p = o * u,
                            f = o * c;
                          (t[0] = s * u),
                            (t[4] = -s * c),
                            (t[8] = l),
                            (t[1] = d + p * l),
                            (t[5] = h - f * l),
                            (t[9] = -o * s),
                            (t[2] = f - h * l),
                            (t[6] = p + d * l),
                            (t[10] = a * s);
                        } else if ("YXZ" === e.order) {
                          var m = s * u,
                            v = s * c,
                            g = l * u,
                            y = l * c;
                          (t[0] = m + y * o),
                            (t[4] = g * o - v),
                            (t[8] = a * l),
                            (t[1] = a * c),
                            (t[5] = a * u),
                            (t[9] = -o),
                            (t[2] = v * o - g),
                            (t[6] = y + m * o),
                            (t[10] = a * s);
                        } else if ("ZXY" === e.order) {
                          var x = s * u,
                            b = s * c,
                            _ = l * u,
                            w = l * c;
                          (t[0] = x - w * o),
                            (t[4] = -a * c),
                            (t[8] = _ + b * o),
                            (t[1] = b + _ * o),
                            (t[5] = a * u),
                            (t[9] = w - x * o),
                            (t[2] = -a * l),
                            (t[6] = o),
                            (t[10] = a * s);
                        } else if ("ZYX" === e.order) {
                          var S = a * u,
                            E = a * c,
                            M = o * u,
                            A = o * c;
                          (t[0] = s * u),
                            (t[4] = M * l - E),
                            (t[8] = S * l + A),
                            (t[1] = s * c),
                            (t[5] = A * l + S),
                            (t[9] = E * l - M),
                            (t[2] = -l),
                            (t[6] = o * s),
                            (t[10] = a * s);
                        } else if ("YZX" === e.order) {
                          var T = a * s,
                            C = a * l,
                            k = o * s,
                            P = o * l;
                          (t[0] = s * u),
                            (t[4] = P - T * c),
                            (t[8] = k * c + C),
                            (t[1] = c),
                            (t[5] = a * u),
                            (t[9] = -o * u),
                            (t[2] = -l * u),
                            (t[6] = C * c + k),
                            (t[10] = T - P * c);
                        } else if ("XZY" === e.order) {
                          var L = a * s,
                            R = a * l,
                            I = o * s,
                            F = o * l;
                          (t[0] = s * u),
                            (t[4] = -c),
                            (t[8] = l * u),
                            (t[1] = L * c + F),
                            (t[5] = a * u),
                            (t[9] = R * c - I),
                            (t[2] = I * c - R),
                            (t[6] = o * u),
                            (t[10] = F * c + L);
                        }
                        return (
                          (t[3] = 0),
                          (t[7] = 0),
                          (t[11] = 0),
                          (t[12] = 0),
                          (t[13] = 0),
                          (t[14] = 0),
                          (t[15] = 1),
                          this
                        );
                      },
                    },
                    {
                      key: "makeRotationFromQuaternion",
                      value: function (e) {
                        return this.compose(tr, e, nr);
                      },
                    },
                    {
                      key: "lookAt",
                      value: function (e, t, n) {
                        var i = this.elements;
                        return (
                          ar.subVectors(e, t),
                          0 === ar.lengthSq() && (ar.z = 1),
                          ar.normalize(),
                          ir.crossVectors(n, ar),
                          0 === ir.lengthSq() &&
                            (1 === Math.abs(n.z)
                              ? (ar.x += 1e-4)
                              : (ar.z += 1e-4),
                            ar.normalize(),
                            ir.crossVectors(n, ar)),
                          ir.normalize(),
                          rr.crossVectors(ar, ir),
                          (i[0] = ir.x),
                          (i[4] = rr.x),
                          (i[8] = ar.x),
                          (i[1] = ir.y),
                          (i[5] = rr.y),
                          (i[9] = ar.y),
                          (i[2] = ir.z),
                          (i[6] = rr.z),
                          (i[10] = ar.z),
                          this
                        );
                      },
                    },
                    {
                      key: "multiply",
                      value: function (e, t) {
                        return void 0 !== t
                          ? (console.warn(
                              "THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."
                            ),
                            this.multiplyMatrices(e, t))
                          : this.multiplyMatrices(this, e);
                      },
                    },
                    {
                      key: "premultiply",
                      value: function (e) {
                        return this.multiplyMatrices(e, this);
                      },
                    },
                    {
                      key: "multiplyMatrices",
                      value: function (e, t) {
                        var n = e.elements,
                          i = t.elements,
                          r = this.elements,
                          a = n[0],
                          o = n[4],
                          s = n[8],
                          l = n[12],
                          u = n[1],
                          c = n[5],
                          h = n[9],
                          d = n[13],
                          p = n[2],
                          f = n[6],
                          m = n[10],
                          v = n[14],
                          g = n[3],
                          y = n[7],
                          x = n[11],
                          b = n[15],
                          _ = i[0],
                          w = i[4],
                          S = i[8],
                          E = i[12],
                          M = i[1],
                          A = i[5],
                          T = i[9],
                          C = i[13],
                          k = i[2],
                          P = i[6],
                          L = i[10],
                          R = i[14],
                          I = i[3],
                          F = i[7],
                          N = i[11],
                          O = i[15];
                        return (
                          (r[0] = a * _ + o * M + s * k + l * I),
                          (r[4] = a * w + o * A + s * P + l * F),
                          (r[8] = a * S + o * T + s * L + l * N),
                          (r[12] = a * E + o * C + s * R + l * O),
                          (r[1] = u * _ + c * M + h * k + d * I),
                          (r[5] = u * w + c * A + h * P + d * F),
                          (r[9] = u * S + c * T + h * L + d * N),
                          (r[13] = u * E + c * C + h * R + d * O),
                          (r[2] = p * _ + f * M + m * k + v * I),
                          (r[6] = p * w + f * A + m * P + v * F),
                          (r[10] = p * S + f * T + m * L + v * N),
                          (r[14] = p * E + f * C + m * R + v * O),
                          (r[3] = g * _ + y * M + x * k + b * I),
                          (r[7] = g * w + y * A + x * P + b * F),
                          (r[11] = g * S + y * T + x * L + b * N),
                          (r[15] = g * E + y * C + x * R + b * O),
                          this
                        );
                      },
                    },
                    {
                      key: "multiplyScalar",
                      value: function (e) {
                        var t = this.elements;
                        return (
                          (t[0] *= e),
                          (t[4] *= e),
                          (t[8] *= e),
                          (t[12] *= e),
                          (t[1] *= e),
                          (t[5] *= e),
                          (t[9] *= e),
                          (t[13] *= e),
                          (t[2] *= e),
                          (t[6] *= e),
                          (t[10] *= e),
                          (t[14] *= e),
                          (t[3] *= e),
                          (t[7] *= e),
                          (t[11] *= e),
                          (t[15] *= e),
                          this
                        );
                      },
                    },
                    {
                      key: "determinant",
                      value: function () {
                        var e = this.elements,
                          t = e[0],
                          n = e[4],
                          i = e[8],
                          r = e[12],
                          a = e[1],
                          o = e[5],
                          s = e[9],
                          l = e[13],
                          u = e[2],
                          c = e[6],
                          h = e[10],
                          d = e[14];
                        return (
                          e[3] *
                            (+r * s * c -
                              i * l * c -
                              r * o * h +
                              n * l * h +
                              i * o * d -
                              n * s * d) +
                          e[7] *
                            (+t * s * d -
                              t * l * h +
                              r * a * h -
                              i * a * d +
                              i * l * u -
                              r * s * u) +
                          e[11] *
                            (+t * l * c -
                              t * o * d -
                              r * a * c +
                              n * a * d +
                              r * o * u -
                              n * l * u) +
                          e[15] *
                            (-i * o * u -
                              t * s * c +
                              t * o * h +
                              i * a * c -
                              n * a * h +
                              n * s * u)
                        );
                      },
                    },
                    {
                      key: "transpose",
                      value: function () {
                        var e,
                          t = this.elements;
                        return (
                          (e = t[1]),
                          (t[1] = t[4]),
                          (t[4] = e),
                          (e = t[2]),
                          (t[2] = t[8]),
                          (t[8] = e),
                          (e = t[6]),
                          (t[6] = t[9]),
                          (t[9] = e),
                          (e = t[3]),
                          (t[3] = t[12]),
                          (t[12] = e),
                          (e = t[7]),
                          (t[7] = t[13]),
                          (t[13] = e),
                          (e = t[11]),
                          (t[11] = t[14]),
                          (t[14] = e),
                          this
                        );
                      },
                    },
                    {
                      key: "setPosition",
                      value: function (e, t, n) {
                        var i = this.elements;
                        return (
                          e.isVector3
                            ? ((i[12] = e.x), (i[13] = e.y), (i[14] = e.z))
                            : ((i[12] = e), (i[13] = t), (i[14] = n)),
                          this
                        );
                      },
                    },
                    {
                      key: "invert",
                      value: function () {
                        var e = this.elements,
                          t = e[0],
                          n = e[1],
                          i = e[2],
                          r = e[3],
                          a = e[4],
                          o = e[5],
                          s = e[6],
                          l = e[7],
                          u = e[8],
                          c = e[9],
                          h = e[10],
                          d = e[11],
                          p = e[12],
                          f = e[13],
                          m = e[14],
                          v = e[15],
                          g =
                            c * m * l -
                            f * h * l +
                            f * s * d -
                            o * m * d -
                            c * s * v +
                            o * h * v,
                          y =
                            p * h * l -
                            u * m * l -
                            p * s * d +
                            a * m * d +
                            u * s * v -
                            a * h * v,
                          x =
                            u * f * l -
                            p * c * l +
                            p * o * d -
                            a * f * d -
                            u * o * v +
                            a * c * v,
                          b =
                            p * c * s -
                            u * f * s -
                            p * o * h +
                            a * f * h +
                            u * o * m -
                            a * c * m,
                          _ = t * g + n * y + i * x + r * b;
                        if (0 === _)
                          return this.set(
                            0,
                            0,
                            0,
                            0,
                            0,
                            0,
                            0,
                            0,
                            0,
                            0,
                            0,
                            0,
                            0,
                            0,
                            0,
                            0
                          );
                        var w = 1 / _;
                        return (
                          (e[0] = g * w),
                          (e[1] =
                            (f * h * r -
                              c * m * r -
                              f * i * d +
                              n * m * d +
                              c * i * v -
                              n * h * v) *
                            w),
                          (e[2] =
                            (o * m * r -
                              f * s * r +
                              f * i * l -
                              n * m * l -
                              o * i * v +
                              n * s * v) *
                            w),
                          (e[3] =
                            (c * s * r -
                              o * h * r -
                              c * i * l +
                              n * h * l +
                              o * i * d -
                              n * s * d) *
                            w),
                          (e[4] = y * w),
                          (e[5] =
                            (u * m * r -
                              p * h * r +
                              p * i * d -
                              t * m * d -
                              u * i * v +
                              t * h * v) *
                            w),
                          (e[6] =
                            (p * s * r -
                              a * m * r -
                              p * i * l +
                              t * m * l +
                              a * i * v -
                              t * s * v) *
                            w),
                          (e[7] =
                            (a * h * r -
                              u * s * r +
                              u * i * l -
                              t * h * l -
                              a * i * d +
                              t * s * d) *
                            w),
                          (e[8] = x * w),
                          (e[9] =
                            (p * c * r -
                              u * f * r -
                              p * n * d +
                              t * f * d +
                              u * n * v -
                              t * c * v) *
                            w),
                          (e[10] =
                            (a * f * r -
                              p * o * r +
                              p * n * l -
                              t * f * l -
                              a * n * v +
                              t * o * v) *
                            w),
                          (e[11] =
                            (u * o * r -
                              a * c * r -
                              u * n * l +
                              t * c * l +
                              a * n * d -
                              t * o * d) *
                            w),
                          (e[12] = b * w),
                          (e[13] =
                            (u * f * i -
                              p * c * i +
                              p * n * h -
                              t * f * h -
                              u * n * m +
                              t * c * m) *
                            w),
                          (e[14] =
                            (p * o * i -
                              a * f * i -
                              p * n * s +
                              t * f * s +
                              a * n * m -
                              t * o * m) *
                            w),
                          (e[15] =
                            (a * c * i -
                              u * o * i +
                              u * n * s -
                              t * c * s -
                              a * n * h +
                              t * o * h) *
                            w),
                          this
                        );
                      },
                    },
                    {
                      key: "scale",
                      value: function (e) {
                        var t = this.elements,
                          n = e.x,
                          i = e.y,
                          r = e.z;
                        return (
                          (t[0] *= n),
                          (t[4] *= i),
                          (t[8] *= r),
                          (t[1] *= n),
                          (t[5] *= i),
                          (t[9] *= r),
                          (t[2] *= n),
                          (t[6] *= i),
                          (t[10] *= r),
                          (t[3] *= n),
                          (t[7] *= i),
                          (t[11] *= r),
                          this
                        );
                      },
                    },
                    {
                      key: "getMaxScaleOnAxis",
                      value: function () {
                        var e = this.elements,
                          t = e[0] * e[0] + e[1] * e[1] + e[2] * e[2],
                          n = e[4] * e[4] + e[5] * e[5] + e[6] * e[6],
                          i = e[8] * e[8] + e[9] * e[9] + e[10] * e[10];
                        return Math.sqrt(Math.max(t, n, i));
                      },
                    },
                    {
                      key: "makeTranslation",
                      value: function (e, t, n) {
                        return (
                          this.set(
                            1,
                            0,
                            0,
                            e,
                            0,
                            1,
                            0,
                            t,
                            0,
                            0,
                            1,
                            n,
                            0,
                            0,
                            0,
                            1
                          ),
                          this
                        );
                      },
                    },
                    {
                      key: "makeRotationX",
                      value: function (e) {
                        var t = Math.cos(e),
                          n = Math.sin(e);
                        return (
                          this.set(
                            1,
                            0,
                            0,
                            0,
                            0,
                            t,
                            -n,
                            0,
                            0,
                            n,
                            t,
                            0,
                            0,
                            0,
                            0,
                            1
                          ),
                          this
                        );
                      },
                    },
                    {
                      key: "makeRotationY",
                      value: function (e) {
                        var t = Math.cos(e),
                          n = Math.sin(e);
                        return (
                          this.set(
                            t,
                            0,
                            n,
                            0,
                            0,
                            1,
                            0,
                            0,
                            -n,
                            0,
                            t,
                            0,
                            0,
                            0,
                            0,
                            1
                          ),
                          this
                        );
                      },
                    },
                    {
                      key: "makeRotationZ",
                      value: function (e) {
                        var t = Math.cos(e),
                          n = Math.sin(e);
                        return (
                          this.set(
                            t,
                            -n,
                            0,
                            0,
                            n,
                            t,
                            0,
                            0,
                            0,
                            0,
                            1,
                            0,
                            0,
                            0,
                            0,
                            1
                          ),
                          this
                        );
                      },
                    },
                    {
                      key: "makeRotationAxis",
                      value: function (e, t) {
                        var n = Math.cos(t),
                          i = Math.sin(t),
                          r = 1 - n,
                          a = e.x,
                          o = e.y,
                          s = e.z,
                          l = r * a,
                          u = r * o;
                        return (
                          this.set(
                            l * a + n,
                            l * o - i * s,
                            l * s + i * o,
                            0,
                            l * o + i * s,
                            u * o + n,
                            u * s - i * a,
                            0,
                            l * s - i * o,
                            u * s + i * a,
                            r * s * s + n,
                            0,
                            0,
                            0,
                            0,
                            1
                          ),
                          this
                        );
                      },
                    },
                    {
                      key: "makeScale",
                      value: function (e, t, n) {
                        return (
                          this.set(
                            e,
                            0,
                            0,
                            0,
                            0,
                            t,
                            0,
                            0,
                            0,
                            0,
                            n,
                            0,
                            0,
                            0,
                            0,
                            1
                          ),
                          this
                        );
                      },
                    },
                    {
                      key: "makeShear",
                      value: function (e, t, n, i, r, a) {
                        return (
                          this.set(
                            1,
                            n,
                            r,
                            0,
                            e,
                            1,
                            a,
                            0,
                            t,
                            i,
                            1,
                            0,
                            0,
                            0,
                            0,
                            1
                          ),
                          this
                        );
                      },
                    },
                    {
                      key: "compose",
                      value: function (e, t, n) {
                        var i = this.elements,
                          r = t._x,
                          a = t._y,
                          o = t._z,
                          s = t._w,
                          l = r + r,
                          u = a + a,
                          c = o + o,
                          h = r * l,
                          d = r * u,
                          p = r * c,
                          f = a * u,
                          m = a * c,
                          v = o * c,
                          g = s * l,
                          y = s * u,
                          x = s * c,
                          b = n.x,
                          _ = n.y,
                          w = n.z;
                        return (
                          (i[0] = (1 - (f + v)) * b),
                          (i[1] = (d + x) * b),
                          (i[2] = (p - y) * b),
                          (i[3] = 0),
                          (i[4] = (d - x) * _),
                          (i[5] = (1 - (h + v)) * _),
                          (i[6] = (m + g) * _),
                          (i[7] = 0),
                          (i[8] = (p + y) * w),
                          (i[9] = (m - g) * w),
                          (i[10] = (1 - (h + f)) * w),
                          (i[11] = 0),
                          (i[12] = e.x),
                          (i[13] = e.y),
                          (i[14] = e.z),
                          (i[15] = 1),
                          this
                        );
                      },
                    },
                    {
                      key: "decompose",
                      value: function (e, t, n) {
                        var i = this.elements,
                          r = $i.set(i[0], i[1], i[2]).length(),
                          a = $i.set(i[4], i[5], i[6]).length(),
                          o = $i.set(i[8], i[9], i[10]).length();
                        this.determinant() < 0 && (r = -r),
                          (e.x = i[12]),
                          (e.y = i[13]),
                          (e.z = i[14]),
                          er.copy(this);
                        var s = 1 / r,
                          l = 1 / a,
                          u = 1 / o;
                        return (
                          (er.elements[0] *= s),
                          (er.elements[1] *= s),
                          (er.elements[2] *= s),
                          (er.elements[4] *= l),
                          (er.elements[5] *= l),
                          (er.elements[6] *= l),
                          (er.elements[8] *= u),
                          (er.elements[9] *= u),
                          (er.elements[10] *= u),
                          t.setFromRotationMatrix(er),
                          (n.x = r),
                          (n.y = a),
                          (n.z = o),
                          this
                        );
                      },
                    },
                    {
                      key: "makePerspective",
                      value: function (e, t, n, i, r, a) {
                        void 0 === a &&
                          console.warn(
                            "THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs."
                          );
                        var o = this.elements,
                          s = (2 * r) / (t - e),
                          l = (2 * r) / (n - i),
                          u = (t + e) / (t - e),
                          c = (n + i) / (n - i),
                          h = -(a + r) / (a - r),
                          d = (-2 * a * r) / (a - r);
                        return (
                          (o[0] = s),
                          (o[4] = 0),
                          (o[8] = u),
                          (o[12] = 0),
                          (o[1] = 0),
                          (o[5] = l),
                          (o[9] = c),
                          (o[13] = 0),
                          (o[2] = 0),
                          (o[6] = 0),
                          (o[10] = h),
                          (o[14] = d),
                          (o[3] = 0),
                          (o[7] = 0),
                          (o[11] = -1),
                          (o[15] = 0),
                          this
                        );
                      },
                    },
                    {
                      key: "makeOrthographic",
                      value: function (e, t, n, i, r, a) {
                        var o = this.elements,
                          s = 1 / (t - e),
                          l = 1 / (n - i),
                          u = 1 / (a - r),
                          c = (t + e) * s,
                          h = (n + i) * l,
                          d = (a + r) * u;
                        return (
                          (o[0] = 2 * s),
                          (o[4] = 0),
                          (o[8] = 0),
                          (o[12] = -c),
                          (o[1] = 0),
                          (o[5] = 2 * l),
                          (o[9] = 0),
                          (o[13] = -h),
                          (o[2] = 0),
                          (o[6] = 0),
                          (o[10] = -2 * u),
                          (o[14] = -d),
                          (o[3] = 0),
                          (o[7] = 0),
                          (o[11] = 0),
                          (o[15] = 1),
                          this
                        );
                      },
                    },
                    {
                      key: "equals",
                      value: function (e) {
                        for (
                          var t = this.elements, n = e.elements, i = 0;
                          i < 16;
                          i++
                        )
                          if (t[i] !== n[i]) return !1;
                        return !0;
                      },
                    },
                    {
                      key: "fromArray",
                      value: function (e) {
                        for (
                          var t =
                              arguments.length > 1 && void 0 !== arguments[1]
                                ? arguments[1]
                                : 0,
                            n = 0;
                          n < 16;
                          n++
                        )
                          this.elements[n] = e[n + t];
                        return this;
                      },
                    },
                    {
                      key: "toArray",
                      value: function () {
                        var e =
                            arguments.length > 0 && void 0 !== arguments[0]
                              ? arguments[0]
                              : [],
                          t =
                            arguments.length > 1 && void 0 !== arguments[1]
                              ? arguments[1]
                              : 0,
                          n = this.elements;
                        return (
                          (e[t] = n[0]),
                          (e[t + 1] = n[1]),
                          (e[t + 2] = n[2]),
                          (e[t + 3] = n[3]),
                          (e[t + 4] = n[4]),
                          (e[t + 5] = n[5]),
                          (e[t + 6] = n[6]),
                          (e[t + 7] = n[7]),
                          (e[t + 8] = n[8]),
                          (e[t + 9] = n[9]),
                          (e[t + 10] = n[10]),
                          (e[t + 11] = n[11]),
                          (e[t + 12] = n[12]),
                          (e[t + 13] = n[13]),
                          (e[t + 14] = n[14]),
                          (e[t + 15] = n[15]),
                          e
                        );
                      },
                    },
                  ]),
                  e
                );
              })();
            Ki.prototype.isMatrix4 = !0;
            var $i = new _i(),
              er = new Ki(),
              tr = new _i(0, 0, 0),
              nr = new _i(1, 1, 1),
              ir = new _i(),
              rr = new _i(),
              ar = new _i(),
              or = new Ki(),
              sr = new bi(),
              lr = (function () {
                function e() {
                  var t =
                      arguments.length > 0 && void 0 !== arguments[0]
                        ? arguments[0]
                        : 0,
                    n =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : 0,
                    i =
                      arguments.length > 2 && void 0 !== arguments[2]
                        ? arguments[2]
                        : 0,
                    r =
                      arguments.length > 3 && void 0 !== arguments[3]
                        ? arguments[3]
                        : e.DefaultOrder;
                  f(this, e),
                    (this._x = t),
                    (this._y = n),
                    (this._z = i),
                    (this._order = r);
                }
                return (
                  m(e, [
                    {
                      key: "set",
                      value: function (e, t, n, i) {
                        return (
                          (this._x = e),
                          (this._y = t),
                          (this._z = n),
                          (this._order = i || this._order),
                          this._onChangeCallback(),
                          this
                        );
                      },
                    },
                    {
                      key: "clone",
                      value: function () {
                        return new this.constructor(
                          this._x,
                          this._y,
                          this._z,
                          this._order
                        );
                      },
                    },
                    {
                      key: "copy",
                      value: function (e) {
                        return (
                          (this._x = e._x),
                          (this._y = e._y),
                          (this._z = e._z),
                          (this._order = e._order),
                          this._onChangeCallback(),
                          this
                        );
                      },
                    },
                    {
                      key: "setFromRotationMatrix",
                      value: function (e, t, n) {
                        var i = e.elements,
                          r = i[0],
                          a = i[4],
                          o = i[8],
                          s = i[1],
                          l = i[5],
                          u = i[9],
                          c = i[2],
                          h = i[6],
                          d = i[10];
                        switch ((t = t || this._order)) {
                          case "XYZ":
                            (this._y = Math.asin(ni(o, -1, 1))),
                              Math.abs(o) < 0.9999999
                                ? ((this._x = Math.atan2(-u, d)),
                                  (this._z = Math.atan2(-a, r)))
                                : ((this._x = Math.atan2(h, l)), (this._z = 0));
                            break;
                          case "YXZ":
                            (this._x = Math.asin(-ni(u, -1, 1))),
                              Math.abs(u) < 0.9999999
                                ? ((this._y = Math.atan2(o, d)),
                                  (this._z = Math.atan2(s, l)))
                                : ((this._y = Math.atan2(-c, r)),
                                  (this._z = 0));
                            break;
                          case "ZXY":
                            (this._x = Math.asin(ni(h, -1, 1))),
                              Math.abs(h) < 0.9999999
                                ? ((this._y = Math.atan2(-c, d)),
                                  (this._z = Math.atan2(-a, l)))
                                : ((this._y = 0), (this._z = Math.atan2(s, r)));
                            break;
                          case "ZYX":
                            (this._y = Math.asin(-ni(c, -1, 1))),
                              Math.abs(c) < 0.9999999
                                ? ((this._x = Math.atan2(h, d)),
                                  (this._z = Math.atan2(s, r)))
                                : ((this._x = 0),
                                  (this._z = Math.atan2(-a, l)));
                            break;
                          case "YZX":
                            (this._z = Math.asin(ni(s, -1, 1))),
                              Math.abs(s) < 0.9999999
                                ? ((this._x = Math.atan2(-u, l)),
                                  (this._y = Math.atan2(-c, r)))
                                : ((this._x = 0), (this._y = Math.atan2(o, d)));
                            break;
                          case "XZY":
                            (this._z = Math.asin(-ni(a, -1, 1))),
                              Math.abs(a) < 0.9999999
                                ? ((this._x = Math.atan2(h, l)),
                                  (this._y = Math.atan2(o, r)))
                                : ((this._x = Math.atan2(-u, d)),
                                  (this._y = 0));
                            break;
                          default:
                            console.warn(
                              "THREE.Euler: .setFromRotationMatrix() encountered an unknown order: " +
                                t
                            );
                        }
                        return (
                          (this._order = t),
                          !1 !== n && this._onChangeCallback(),
                          this
                        );
                      },
                    },
                    {
                      key: "setFromQuaternion",
                      value: function (e, t, n) {
                        return (
                          or.makeRotationFromQuaternion(e),
                          this.setFromRotationMatrix(or, t, n)
                        );
                      },
                    },
                    {
                      key: "setFromVector3",
                      value: function (e, t) {
                        return this.set(e.x, e.y, e.z, t || this._order);
                      },
                    },
                    {
                      key: "reorder",
                      value: function (e) {
                        return (
                          sr.setFromEuler(this), this.setFromQuaternion(sr, e)
                        );
                      },
                    },
                    {
                      key: "equals",
                      value: function (e) {
                        return (
                          e._x === this._x &&
                          e._y === this._y &&
                          e._z === this._z &&
                          e._order === this._order
                        );
                      },
                    },
                    {
                      key: "fromArray",
                      value: function (e) {
                        return (
                          (this._x = e[0]),
                          (this._y = e[1]),
                          (this._z = e[2]),
                          void 0 !== e[3] && (this._order = e[3]),
                          this._onChangeCallback(),
                          this
                        );
                      },
                    },
                    {
                      key: "toArray",
                      value: function () {
                        var e =
                            arguments.length > 0 && void 0 !== arguments[0]
                              ? arguments[0]
                              : [],
                          t =
                            arguments.length > 1 && void 0 !== arguments[1]
                              ? arguments[1]
                              : 0;
                        return (
                          (e[t] = this._x),
                          (e[t + 1] = this._y),
                          (e[t + 2] = this._z),
                          (e[t + 3] = this._order),
                          e
                        );
                      },
                    },
                    {
                      key: "toVector3",
                      value: function (e) {
                        return e
                          ? e.set(this._x, this._y, this._z)
                          : new _i(this._x, this._y, this._z);
                      },
                    },
                    {
                      key: "_onChange",
                      value: function (e) {
                        return (this._onChangeCallback = e), this;
                      },
                    },
                    { key: "_onChangeCallback", value: function () {} },
                    {
                      key: "x",
                      get: function () {
                        return this._x;
                      },
                      set: function (e) {
                        (this._x = e), this._onChangeCallback();
                      },
                    },
                    {
                      key: "y",
                      get: function () {
                        return this._y;
                      },
                      set: function (e) {
                        (this._y = e), this._onChangeCallback();
                      },
                    },
                    {
                      key: "z",
                      get: function () {
                        return this._z;
                      },
                      set: function (e) {
                        (this._z = e), this._onChangeCallback();
                      },
                    },
                    {
                      key: "order",
                      get: function () {
                        return this._order;
                      },
                      set: function (e) {
                        (this._order = e), this._onChangeCallback();
                      },
                    },
                  ]),
                  e
                );
              })();
            (lr.prototype.isEuler = !0),
              (lr.DefaultOrder = "XYZ"),
              (lr.RotationOrders = ["XYZ", "YZX", "ZXY", "XZY", "YXZ", "ZYX"]);
            var ur = (function () {
                function e() {
                  f(this, e), (this.mask = 1);
                }
                return (
                  m(e, [
                    {
                      key: "set",
                      value: function (e) {
                        this.mask = (1 << e) | 0;
                      },
                    },
                    {
                      key: "enable",
                      value: function (e) {
                        this.mask |= (1 << e) | 0;
                      },
                    },
                    {
                      key: "enableAll",
                      value: function () {
                        this.mask = -1;
                      },
                    },
                    {
                      key: "toggle",
                      value: function (e) {
                        this.mask ^= (1 << e) | 0;
                      },
                    },
                    {
                      key: "disable",
                      value: function (e) {
                        this.mask &= ~((1 << e) | 0);
                      },
                    },
                    {
                      key: "disableAll",
                      value: function () {
                        this.mask = 0;
                      },
                    },
                    {
                      key: "test",
                      value: function (e) {
                        return 0 !== (this.mask & e.mask);
                      },
                    },
                  ]),
                  e
                );
              })(),
              cr = 0,
              hr = new _i(),
              dr = new bi(),
              pr = new Ki(),
              fr = new _i(),
              mr = new _i(),
              vr = new _i(),
              gr = new bi(),
              yr = new _i(1, 0, 0),
              xr = new _i(0, 1, 0),
              br = new _i(0, 0, 1),
              _r = { type: "added" },
              wr = { type: "removed" },
              Sr = (function (e) {
                function t() {
                  var e;
                  f(this, t),
                    (e = c(this, h(t).call(this))),
                    Object.defineProperty(d(e), "id", { value: cr++ }),
                    (e.uuid = ti()),
                    (e.name = ""),
                    (e.type = "Object3D"),
                    (e.parent = null),
                    (e.children = []),
                    (e.up = t.DefaultUp.clone());
                  var n = new _i(),
                    i = new lr(),
                    r = new bi(),
                    a = new _i(1, 1, 1);
                  return (
                    i._onChange(function () {
                      r.setFromEuler(i, !1);
                    }),
                    r._onChange(function () {
                      i.setFromQuaternion(r, void 0, !1);
                    }),
                    Object.defineProperties(d(e), {
                      position: { configurable: !0, enumerable: !0, value: n },
                      rotation: { configurable: !0, enumerable: !0, value: i },
                      quaternion: {
                        configurable: !0,
                        enumerable: !0,
                        value: r,
                      },
                      scale: { configurable: !0, enumerable: !0, value: a },
                      modelViewMatrix: { value: new Ki() },
                      normalMatrix: { value: new hi() },
                    }),
                    (e.matrix = new Ki()),
                    (e.matrixWorld = new Ki()),
                    (e.matrixAutoUpdate = t.DefaultMatrixAutoUpdate),
                    (e.matrixWorldNeedsUpdate = !1),
                    (e.layers = new ur()),
                    (e.visible = !0),
                    (e.castShadow = !1),
                    (e.receiveShadow = !1),
                    (e.frustumCulled = !0),
                    (e.renderOrder = 0),
                    (e.animations = []),
                    (e.userData = {}),
                    e
                  );
                }
                return (
                  p(t, e),
                  m(t, [
                    { key: "onBeforeRender", value: function () {} },
                    { key: "onAfterRender", value: function () {} },
                    {
                      key: "applyMatrix4",
                      value: function (e) {
                        this.matrixAutoUpdate && this.updateMatrix(),
                          this.matrix.premultiply(e),
                          this.matrix.decompose(
                            this.position,
                            this.quaternion,
                            this.scale
                          );
                      },
                    },
                    {
                      key: "applyQuaternion",
                      value: function (e) {
                        return this.quaternion.premultiply(e), this;
                      },
                    },
                    {
                      key: "setRotationFromAxisAngle",
                      value: function (e, t) {
                        this.quaternion.setFromAxisAngle(e, t);
                      },
                    },
                    {
                      key: "setRotationFromEuler",
                      value: function (e) {
                        this.quaternion.setFromEuler(e, !0);
                      },
                    },
                    {
                      key: "setRotationFromMatrix",
                      value: function (e) {
                        this.quaternion.setFromRotationMatrix(e);
                      },
                    },
                    {
                      key: "setRotationFromQuaternion",
                      value: function (e) {
                        this.quaternion.copy(e);
                      },
                    },
                    {
                      key: "rotateOnAxis",
                      value: function (e, t) {
                        return (
                          dr.setFromAxisAngle(e, t),
                          this.quaternion.multiply(dr),
                          this
                        );
                      },
                    },
                    {
                      key: "rotateOnWorldAxis",
                      value: function (e, t) {
                        return (
                          dr.setFromAxisAngle(e, t),
                          this.quaternion.premultiply(dr),
                          this
                        );
                      },
                    },
                    {
                      key: "rotateX",
                      value: function (e) {
                        return this.rotateOnAxis(yr, e);
                      },
                    },
                    {
                      key: "rotateY",
                      value: function (e) {
                        return this.rotateOnAxis(xr, e);
                      },
                    },
                    {
                      key: "rotateZ",
                      value: function (e) {
                        return this.rotateOnAxis(br, e);
                      },
                    },
                    {
                      key: "translateOnAxis",
                      value: function (e, t) {
                        return (
                          hr.copy(e).applyQuaternion(this.quaternion),
                          this.position.add(hr.multiplyScalar(t)),
                          this
                        );
                      },
                    },
                    {
                      key: "translateX",
                      value: function (e) {
                        return this.translateOnAxis(yr, e);
                      },
                    },
                    {
                      key: "translateY",
                      value: function (e) {
                        return this.translateOnAxis(xr, e);
                      },
                    },
                    {
                      key: "translateZ",
                      value: function (e) {
                        return this.translateOnAxis(br, e);
                      },
                    },
                    {
                      key: "localToWorld",
                      value: function (e) {
                        return e.applyMatrix4(this.matrixWorld);
                      },
                    },
                    {
                      key: "worldToLocal",
                      value: function (e) {
                        return e.applyMatrix4(
                          pr.copy(this.matrixWorld).invert()
                        );
                      },
                    },
                    {
                      key: "lookAt",
                      value: function (e, t, n) {
                        e.isVector3 ? fr.copy(e) : fr.set(e, t, n);
                        var i = this.parent;
                        this.updateWorldMatrix(!0, !1),
                          mr.setFromMatrixPosition(this.matrixWorld),
                          this.isCamera || this.isLight
                            ? pr.lookAt(mr, fr, this.up)
                            : pr.lookAt(fr, mr, this.up),
                          this.quaternion.setFromRotationMatrix(pr),
                          i &&
                            (pr.extractRotation(i.matrixWorld),
                            dr.setFromRotationMatrix(pr),
                            this.quaternion.premultiply(dr.invert()));
                      },
                    },
                    {
                      key: "add",
                      value: function (e) {
                        if (arguments.length > 1) {
                          for (var t = 0; t < arguments.length; t++)
                            this.add(arguments[t]);
                          return this;
                        }
                        return e === this
                          ? (console.error(
                              "THREE.Object3D.add: object can't be added as a child of itself.",
                              e
                            ),
                            this)
                          : (e && e.isObject3D
                              ? (null !== e.parent && e.parent.remove(e),
                                (e.parent = this),
                                this.children.push(e),
                                e.dispatchEvent(_r))
                              : console.error(
                                  "THREE.Object3D.add: object not an instance of THREE.Object3D.",
                                  e
                                ),
                            this);
                      },
                    },
                    {
                      key: "remove",
                      value: function (e) {
                        if (arguments.length > 1) {
                          for (var t = 0; t < arguments.length; t++)
                            this.remove(arguments[t]);
                          return this;
                        }
                        var n = this.children.indexOf(e);
                        return (
                          -1 !== n &&
                            ((e.parent = null),
                            this.children.splice(n, 1),
                            e.dispatchEvent(wr)),
                          this
                        );
                      },
                    },
                    {
                      key: "removeFromParent",
                      value: function () {
                        var e = this.parent;
                        return null !== e && e.remove(this), this;
                      },
                    },
                    {
                      key: "clear",
                      value: function () {
                        for (var e = 0; e < this.children.length; e++) {
                          var t = this.children[e];
                          (t.parent = null), t.dispatchEvent(wr);
                        }
                        return (this.children.length = 0), this;
                      },
                    },
                    {
                      key: "attach",
                      value: function (e) {
                        return (
                          this.updateWorldMatrix(!0, !1),
                          pr.copy(this.matrixWorld).invert(),
                          null !== e.parent &&
                            (e.parent.updateWorldMatrix(!0, !1),
                            pr.multiply(e.parent.matrixWorld)),
                          e.applyMatrix4(pr),
                          this.add(e),
                          e.updateWorldMatrix(!1, !0),
                          this
                        );
                      },
                    },
                    {
                      key: "getObjectById",
                      value: function (e) {
                        return this.getObjectByProperty("id", e);
                      },
                    },
                    {
                      key: "getObjectByName",
                      value: function (e) {
                        return this.getObjectByProperty("name", e);
                      },
                    },
                    {
                      key: "getObjectByProperty",
                      value: function (e, t) {
                        if (this[e] === t) return this;
                        for (var n = 0, i = this.children.length; n < i; n++) {
                          var r = this.children[n].getObjectByProperty(e, t);
                          if (void 0 !== r) return r;
                        }
                      },
                    },
                    {
                      key: "getWorldPosition",
                      value: function (e) {
                        return (
                          void 0 === e &&
                            (console.warn(
                              "THREE.Object3D: .getWorldPosition() target is now required"
                            ),
                            (e = new _i())),
                          this.updateWorldMatrix(!0, !1),
                          e.setFromMatrixPosition(this.matrixWorld)
                        );
                      },
                    },
                    {
                      key: "getWorldQuaternion",
                      value: function (e) {
                        return (
                          void 0 === e &&
                            (console.warn(
                              "THREE.Object3D: .getWorldQuaternion() target is now required"
                            ),
                            (e = new bi())),
                          this.updateWorldMatrix(!0, !1),
                          this.matrixWorld.decompose(mr, e, vr),
                          e
                        );
                      },
                    },
                    {
                      key: "getWorldScale",
                      value: function (e) {
                        return (
                          void 0 === e &&
                            (console.warn(
                              "THREE.Object3D: .getWorldScale() target is now required"
                            ),
                            (e = new _i())),
                          this.updateWorldMatrix(!0, !1),
                          this.matrixWorld.decompose(mr, gr, e),
                          e
                        );
                      },
                    },
                    {
                      key: "getWorldDirection",
                      value: function (e) {
                        void 0 === e &&
                          (console.warn(
                            "THREE.Object3D: .getWorldDirection() target is now required"
                          ),
                          (e = new _i())),
                          this.updateWorldMatrix(!0, !1);
                        var t = this.matrixWorld.elements;
                        return e.set(t[8], t[9], t[10]).normalize();
                      },
                    },
                    { key: "raycast", value: function () {} },
                    {
                      key: "traverse",
                      value: function (e) {
                        e(this);
                        for (
                          var t = this.children, n = 0, i = t.length;
                          n < i;
                          n++
                        )
                          t[n].traverse(e);
                      },
                    },
                    {
                      key: "traverseVisible",
                      value: function (e) {
                        if (!1 !== this.visible) {
                          e(this);
                          for (
                            var t = this.children, n = 0, i = t.length;
                            n < i;
                            n++
                          )
                            t[n].traverseVisible(e);
                        }
                      },
                    },
                    {
                      key: "traverseAncestors",
                      value: function (e) {
                        var t = this.parent;
                        null !== t && (e(t), t.traverseAncestors(e));
                      },
                    },
                    {
                      key: "updateMatrix",
                      value: function () {
                        this.matrix.compose(
                          this.position,
                          this.quaternion,
                          this.scale
                        ),
                          (this.matrixWorldNeedsUpdate = !0);
                      },
                    },
                    {
                      key: "updateMatrixWorld",
                      value: function (e) {
                        this.matrixAutoUpdate && this.updateMatrix(),
                          (this.matrixWorldNeedsUpdate || e) &&
                            (null === this.parent
                              ? this.matrixWorld.copy(this.matrix)
                              : this.matrixWorld.multiplyMatrices(
                                  this.parent.matrixWorld,
                                  this.matrix
                                ),
                            (this.matrixWorldNeedsUpdate = !1),
                            (e = !0));
                        for (
                          var t = this.children, n = 0, i = t.length;
                          n < i;
                          n++
                        )
                          t[n].updateMatrixWorld(e);
                      },
                    },
                    {
                      key: "updateWorldMatrix",
                      value: function (e, t) {
                        var n = this.parent;
                        if (
                          (!0 === e &&
                            null !== n &&
                            n.updateWorldMatrix(!0, !1),
                          this.matrixAutoUpdate && this.updateMatrix(),
                          null === this.parent
                            ? this.matrixWorld.copy(this.matrix)
                            : this.matrixWorld.multiplyMatrices(
                                this.parent.matrixWorld,
                                this.matrix
                              ),
                          !0 === t)
                        )
                          for (
                            var i = this.children, r = 0, a = i.length;
                            r < a;
                            r++
                          )
                            i[r].updateWorldMatrix(!1, !0);
                      },
                    },
                    {
                      key: "toJSON",
                      value: function (e) {
                        var t = void 0 === e || "string" === typeof e,
                          n = {};
                        t &&
                          ((e = {
                            geometries: {},
                            materials: {},
                            textures: {},
                            images: {},
                            shapes: {},
                            skeletons: {},
                            animations: {},
                          }),
                          (n.metadata = {
                            version: 4.5,
                            type: "Object",
                            generator: "Object3D.toJSON",
                          }));
                        var i = {};
                        function r(t, n) {
                          return (
                            void 0 === t[n.uuid] && (t[n.uuid] = n.toJSON(e)),
                            n.uuid
                          );
                        }
                        if (
                          ((i.uuid = this.uuid),
                          (i.type = this.type),
                          "" !== this.name && (i.name = this.name),
                          !0 === this.castShadow && (i.castShadow = !0),
                          !0 === this.receiveShadow && (i.receiveShadow = !0),
                          !1 === this.visible && (i.visible = !1),
                          !1 === this.frustumCulled && (i.frustumCulled = !1),
                          0 !== this.renderOrder &&
                            (i.renderOrder = this.renderOrder),
                          "{}" !== JSON.stringify(this.userData) &&
                            (i.userData = this.userData),
                          (i.layers = this.layers.mask),
                          (i.matrix = this.matrix.toArray()),
                          !1 === this.matrixAutoUpdate &&
                            (i.matrixAutoUpdate = !1),
                          this.isInstancedMesh &&
                            ((i.type = "InstancedMesh"),
                            (i.count = this.count),
                            (i.instanceMatrix = this.instanceMatrix.toJSON()),
                            null !== this.instanceColor &&
                              (i.instanceColor = this.instanceColor.toJSON())),
                          this.isMesh || this.isLine || this.isPoints)
                        ) {
                          i.geometry = r(e.geometries, this.geometry);
                          var a = this.geometry.parameters;
                          if (void 0 !== a && void 0 !== a.shapes) {
                            var o = a.shapes;
                            if (Array.isArray(o))
                              for (var s = 0, l = o.length; s < l; s++) {
                                var u = o[s];
                                r(e.shapes, u);
                              }
                            else r(e.shapes, o);
                          }
                        }
                        if (
                          (this.isSkinnedMesh &&
                            ((i.bindMode = this.bindMode),
                            (i.bindMatrix = this.bindMatrix.toArray()),
                            void 0 !== this.skeleton &&
                              (r(e.skeletons, this.skeleton),
                              (i.skeleton = this.skeleton.uuid))),
                          void 0 !== this.material)
                        )
                          if (Array.isArray(this.material)) {
                            for (
                              var c = [], h = 0, d = this.material.length;
                              h < d;
                              h++
                            )
                              c.push(r(e.materials, this.material[h]));
                            i.material = c;
                          } else i.material = r(e.materials, this.material);
                        if (this.children.length > 0) {
                          i.children = [];
                          for (var p = 0; p < this.children.length; p++)
                            i.children.push(this.children[p].toJSON(e).object);
                        }
                        if (this.animations.length > 0) {
                          i.animations = [];
                          for (var f = 0; f < this.animations.length; f++) {
                            var m = this.animations[f];
                            i.animations.push(r(e.animations, m));
                          }
                        }
                        if (t) {
                          var v = S(e.geometries),
                            g = S(e.materials),
                            y = S(e.textures),
                            x = S(e.images),
                            b = S(e.shapes),
                            _ = S(e.skeletons),
                            w = S(e.animations);
                          v.length > 0 && (n.geometries = v),
                            g.length > 0 && (n.materials = g),
                            y.length > 0 && (n.textures = y),
                            x.length > 0 && (n.images = x),
                            b.length > 0 && (n.shapes = b),
                            _.length > 0 && (n.skeletons = _),
                            w.length > 0 && (n.animations = w);
                        }
                        return (n.object = i), n;
                        function S(e) {
                          var t = [];
                          for (var n in e) {
                            var i = e[n];
                            delete i.metadata, t.push(i);
                          }
                          return t;
                        }
                      },
                    },
                    {
                      key: "clone",
                      value: function (e) {
                        return new this.constructor().copy(this, e);
                      },
                    },
                    {
                      key: "copy",
                      value: function (e) {
                        var t =
                          !(arguments.length > 1 && void 0 !== arguments[1]) ||
                          arguments[1];
                        if (
                          ((this.name = e.name),
                          this.up.copy(e.up),
                          this.position.copy(e.position),
                          (this.rotation.order = e.rotation.order),
                          this.quaternion.copy(e.quaternion),
                          this.scale.copy(e.scale),
                          this.matrix.copy(e.matrix),
                          this.matrixWorld.copy(e.matrixWorld),
                          (this.matrixAutoUpdate = e.matrixAutoUpdate),
                          (this.matrixWorldNeedsUpdate =
                            e.matrixWorldNeedsUpdate),
                          (this.layers.mask = e.layers.mask),
                          (this.visible = e.visible),
                          (this.castShadow = e.castShadow),
                          (this.receiveShadow = e.receiveShadow),
                          (this.frustumCulled = e.frustumCulled),
                          (this.renderOrder = e.renderOrder),
                          (this.userData = JSON.parse(
                            JSON.stringify(e.userData)
                          )),
                          !0 === t)
                        )
                          for (var n = 0; n < e.children.length; n++) {
                            var i = e.children[n];
                            this.add(i.clone());
                          }
                        return this;
                      },
                    },
                  ]),
                  t
                );
              })(Qn);
            (Sr.DefaultUp = new _i(0, 1, 0)),
              (Sr.DefaultMatrixAutoUpdate = !0),
              (Sr.prototype.isObject3D = !0);
            var Er = new _i(),
              Mr = new _i(),
              Ar = new hi(),
              Tr = (function () {
                function e() {
                  var t =
                      arguments.length > 0 && void 0 !== arguments[0]
                        ? arguments[0]
                        : new _i(1, 0, 0),
                    n =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : 0;
                  f(this, e), (this.normal = t), (this.constant = n);
                }
                return (
                  m(e, [
                    {
                      key: "set",
                      value: function (e, t) {
                        return this.normal.copy(e), (this.constant = t), this;
                      },
                    },
                    {
                      key: "setComponents",
                      value: function (e, t, n, i) {
                        return (
                          this.normal.set(e, t, n), (this.constant = i), this
                        );
                      },
                    },
                    {
                      key: "setFromNormalAndCoplanarPoint",
                      value: function (e, t) {
                        return (
                          this.normal.copy(e),
                          (this.constant = -t.dot(this.normal)),
                          this
                        );
                      },
                    },
                    {
                      key: "setFromCoplanarPoints",
                      value: function (e, t, n) {
                        var i = Er.subVectors(n, t)
                          .cross(Mr.subVectors(e, t))
                          .normalize();
                        return this.setFromNormalAndCoplanarPoint(i, e), this;
                      },
                    },
                    {
                      key: "copy",
                      value: function (e) {
                        return (
                          this.normal.copy(e.normal),
                          (this.constant = e.constant),
                          this
                        );
                      },
                    },
                    {
                      key: "normalize",
                      value: function () {
                        var e = 1 / this.normal.length();
                        return (
                          this.normal.multiplyScalar(e),
                          (this.constant *= e),
                          this
                        );
                      },
                    },
                    {
                      key: "negate",
                      value: function () {
                        return (
                          (this.constant *= -1), this.normal.negate(), this
                        );
                      },
                    },
                    {
                      key: "distanceToPoint",
                      value: function (e) {
                        return this.normal.dot(e) + this.constant;
                      },
                    },
                    {
                      key: "distanceToSphere",
                      value: function (e) {
                        return this.distanceToPoint(e.center) - e.radius;
                      },
                    },
                    {
                      key: "projectPoint",
                      value: function (e, t) {
                        return (
                          void 0 === t &&
                            (console.warn(
                              "THREE.Plane: .projectPoint() target is now required"
                            ),
                            (t = new _i())),
                          t
                            .copy(this.normal)
                            .multiplyScalar(-this.distanceToPoint(e))
                            .add(e)
                        );
                      },
                    },
                    {
                      key: "intersectLine",
                      value: function (e, t) {
                        void 0 === t &&
                          (console.warn(
                            "THREE.Plane: .intersectLine() target is now required"
                          ),
                          (t = new _i()));
                        var n = e.delta(Er),
                          i = this.normal.dot(n);
                        if (0 === i)
                          return 0 === this.distanceToPoint(e.start)
                            ? t.copy(e.start)
                            : null;
                        var r = -(e.start.dot(this.normal) + this.constant) / i;
                        return r < 0 || r > 1
                          ? null
                          : t.copy(n).multiplyScalar(r).add(e.start);
                      },
                    },
                    {
                      key: "intersectsLine",
                      value: function (e) {
                        var t = this.distanceToPoint(e.start),
                          n = this.distanceToPoint(e.end);
                        return (t < 0 && n > 0) || (n < 0 && t > 0);
                      },
                    },
                    {
                      key: "intersectsBox",
                      value: function (e) {
                        return e.intersectsPlane(this);
                      },
                    },
                    {
                      key: "intersectsSphere",
                      value: function (e) {
                        return e.intersectsPlane(this);
                      },
                    },
                    {
                      key: "coplanarPoint",
                      value: function (e) {
                        return (
                          void 0 === e &&
                            (console.warn(
                              "THREE.Plane: .coplanarPoint() target is now required"
                            ),
                            (e = new _i())),
                          e.copy(this.normal).multiplyScalar(-this.constant)
                        );
                      },
                    },
                    {
                      key: "applyMatrix4",
                      value: function (e, t) {
                        var n = t || Ar.getNormalMatrix(e),
                          i = this.coplanarPoint(Er).applyMatrix4(e),
                          r = this.normal.applyMatrix3(n).normalize();
                        return (this.constant = -i.dot(r)), this;
                      },
                    },
                    {
                      key: "translate",
                      value: function (e) {
                        return (this.constant -= e.dot(this.normal)), this;
                      },
                    },
                    {
                      key: "equals",
                      value: function (e) {
                        return (
                          e.normal.equals(this.normal) &&
                          e.constant === this.constant
                        );
                      },
                    },
                    {
                      key: "clone",
                      value: function () {
                        return new this.constructor().copy(this);
                      },
                    },
                  ]),
                  e
                );
              })();
            Tr.prototype.isPlane = !0;
            var Cr = new _i(),
              kr = new _i(),
              Pr = new _i(),
              Lr = new _i(),
              Rr = new _i(),
              Ir = new _i(),
              Fr = new _i(),
              Nr = new _i(),
              Or = new _i(),
              Br = new _i(),
              Dr = (function () {
                function e() {
                  var t =
                      arguments.length > 0 && void 0 !== arguments[0]
                        ? arguments[0]
                        : new _i(),
                    n =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : new _i(),
                    i =
                      arguments.length > 2 && void 0 !== arguments[2]
                        ? arguments[2]
                        : new _i();
                  f(this, e), (this.a = t), (this.b = n), (this.c = i);
                }
                return (
                  m(
                    e,
                    [
                      {
                        key: "set",
                        value: function (e, t, n) {
                          return (
                            this.a.copy(e), this.b.copy(t), this.c.copy(n), this
                          );
                        },
                      },
                      {
                        key: "setFromPointsAndIndices",
                        value: function (e, t, n, i) {
                          return (
                            this.a.copy(e[t]),
                            this.b.copy(e[n]),
                            this.c.copy(e[i]),
                            this
                          );
                        },
                      },
                      {
                        key: "clone",
                        value: function () {
                          return new this.constructor().copy(this);
                        },
                      },
                      {
                        key: "copy",
                        value: function (e) {
                          return (
                            this.a.copy(e.a),
                            this.b.copy(e.b),
                            this.c.copy(e.c),
                            this
                          );
                        },
                      },
                      {
                        key: "getArea",
                        value: function () {
                          return (
                            Cr.subVectors(this.c, this.b),
                            kr.subVectors(this.a, this.b),
                            0.5 * Cr.cross(kr).length()
                          );
                        },
                      },
                      {
                        key: "getMidpoint",
                        value: function (e) {
                          return (
                            void 0 === e &&
                              (console.warn(
                                "THREE.Triangle: .getMidpoint() target is now required"
                              ),
                              (e = new _i())),
                            e
                              .addVectors(this.a, this.b)
                              .add(this.c)
                              .multiplyScalar(1 / 3)
                          );
                        },
                      },
                      {
                        key: "getNormal",
                        value: function (t) {
                          return e.getNormal(this.a, this.b, this.c, t);
                        },
                      },
                      {
                        key: "getPlane",
                        value: function (e) {
                          return (
                            void 0 === e &&
                              (console.warn(
                                "THREE.Triangle: .getPlane() target is now required"
                              ),
                              (e = new Tr())),
                            e.setFromCoplanarPoints(this.a, this.b, this.c)
                          );
                        },
                      },
                      {
                        key: "getBarycoord",
                        value: function (t, n) {
                          return e.getBarycoord(t, this.a, this.b, this.c, n);
                        },
                      },
                      {
                        key: "getUV",
                        value: function (t, n, i, r, a) {
                          return e.getUV(t, this.a, this.b, this.c, n, i, r, a);
                        },
                      },
                      {
                        key: "containsPoint",
                        value: function (t) {
                          return e.containsPoint(t, this.a, this.b, this.c);
                        },
                      },
                      {
                        key: "isFrontFacing",
                        value: function (t) {
                          return e.isFrontFacing(this.a, this.b, this.c, t);
                        },
                      },
                      {
                        key: "intersectsBox",
                        value: function (e) {
                          return e.intersectsTriangle(this);
                        },
                      },
                      {
                        key: "closestPointToPoint",
                        value: function (e, t) {
                          void 0 === t &&
                            (console.warn(
                              "THREE.Triangle: .closestPointToPoint() target is now required"
                            ),
                            (t = new _i()));
                          var n,
                            i,
                            r = this.a,
                            a = this.b,
                            o = this.c;
                          Rr.subVectors(a, r),
                            Ir.subVectors(o, r),
                            Nr.subVectors(e, r);
                          var s = Rr.dot(Nr),
                            l = Ir.dot(Nr);
                          if (s <= 0 && l <= 0) return t.copy(r);
                          Or.subVectors(e, a);
                          var u = Rr.dot(Or),
                            c = Ir.dot(Or);
                          if (u >= 0 && c <= u) return t.copy(a);
                          var h = s * c - u * l;
                          if (h <= 0 && s >= 0 && u <= 0)
                            return (
                              (n = s / (s - u)),
                              t.copy(r).addScaledVector(Rr, n)
                            );
                          Br.subVectors(e, o);
                          var d = Rr.dot(Br),
                            p = Ir.dot(Br);
                          if (p >= 0 && d <= p) return t.copy(o);
                          var f = d * l - s * p;
                          if (f <= 0 && l >= 0 && p <= 0)
                            return (
                              (i = l / (l - p)),
                              t.copy(r).addScaledVector(Ir, i)
                            );
                          var m = u * p - d * c;
                          if (m <= 0 && c - u >= 0 && d - p >= 0)
                            return (
                              Fr.subVectors(o, a),
                              (i = (c - u) / (c - u + (d - p))),
                              t.copy(a).addScaledVector(Fr, i)
                            );
                          var v = 1 / (m + f + h);
                          return (
                            (n = f * v),
                            (i = h * v),
                            t
                              .copy(r)
                              .addScaledVector(Rr, n)
                              .addScaledVector(Ir, i)
                          );
                        },
                      },
                      {
                        key: "equals",
                        value: function (e) {
                          return (
                            e.a.equals(this.a) &&
                            e.b.equals(this.b) &&
                            e.c.equals(this.c)
                          );
                        },
                      },
                    ],
                    [
                      {
                        key: "getNormal",
                        value: function (e, t, n, i) {
                          void 0 === i &&
                            (console.warn(
                              "THREE.Triangle: .getNormal() target is now required"
                            ),
                            (i = new _i())),
                            i.subVectors(n, t),
                            Cr.subVectors(e, t),
                            i.cross(Cr);
                          var r = i.lengthSq();
                          return r > 0
                            ? i.multiplyScalar(1 / Math.sqrt(r))
                            : i.set(0, 0, 0);
                        },
                      },
                      {
                        key: "getBarycoord",
                        value: function (e, t, n, i, r) {
                          Cr.subVectors(i, t),
                            kr.subVectors(n, t),
                            Pr.subVectors(e, t);
                          var a = Cr.dot(Cr),
                            o = Cr.dot(kr),
                            s = Cr.dot(Pr),
                            l = kr.dot(kr),
                            u = kr.dot(Pr),
                            c = a * l - o * o;
                          if (
                            (void 0 === r &&
                              (console.warn(
                                "THREE.Triangle: .getBarycoord() target is now required"
                              ),
                              (r = new _i())),
                            0 === c)
                          )
                            return r.set(-2, -1, -1);
                          var h = 1 / c,
                            d = (l * s - o * u) * h,
                            p = (a * u - o * s) * h;
                          return r.set(1 - d - p, p, d);
                        },
                      },
                      {
                        key: "containsPoint",
                        value: function (e, t, n, i) {
                          return (
                            this.getBarycoord(e, t, n, i, Lr),
                            Lr.x >= 0 && Lr.y >= 0 && Lr.x + Lr.y <= 1
                          );
                        },
                      },
                      {
                        key: "getUV",
                        value: function (e, t, n, i, r, a, o, s) {
                          return (
                            this.getBarycoord(e, t, n, i, Lr),
                            s.set(0, 0),
                            s.addScaledVector(r, Lr.x),
                            s.addScaledVector(a, Lr.y),
                            s.addScaledVector(o, Lr.z),
                            s
                          );
                        },
                      },
                      {
                        key: "isFrontFacing",
                        value: function (e, t, n, i) {
                          return (
                            Cr.subVectors(n, t),
                            kr.subVectors(e, t),
                            Cr.cross(kr).dot(i) < 0
                          );
                        },
                      },
                    ]
                  ),
                  e
                );
              })(),
              Vr = 0,
              Ur = (function (e) {
                function t() {
                  var e;
                  return (
                    f(this, t),
                    (e = c(this, h(t).call(this))),
                    Object.defineProperty(d(e), "id", { value: Vr++ }),
                    (e.uuid = ti()),
                    (e.name = ""),
                    (e.type = "Material"),
                    (e.fog = !0),
                    (e.blending = I),
                    (e.side = T),
                    (e.vertexColors = !1),
                    (e.opacity = 1),
                    (e.transparent = !1),
                    (e.blendSrc = q),
                    (e.blendDst = X),
                    (e.blendEquation = D),
                    (e.blendSrcAlpha = null),
                    (e.blendDstAlpha = null),
                    (e.blendEquationAlpha = null),
                    (e.depthFunc = ie),
                    (e.depthTest = !0),
                    (e.depthWrite = !0),
                    (e.stencilWriteMask = 255),
                    (e.stencilFunc = Bn),
                    (e.stencilRef = 0),
                    (e.stencilFuncMask = 255),
                    (e.stencilFail = Sn),
                    (e.stencilZFail = Sn),
                    (e.stencilZPass = Sn),
                    (e.stencilWrite = !1),
                    (e.clippingPlanes = null),
                    (e.clipIntersection = !1),
                    (e.clipShadows = !1),
                    (e.shadowSide = null),
                    (e.colorWrite = !0),
                    (e.precision = null),
                    (e.polygonOffset = !1),
                    (e.polygonOffsetFactor = 0),
                    (e.polygonOffsetUnits = 0),
                    (e.dithering = !1),
                    (e.alphaTest = 0),
                    (e.alphaToCoverage = !1),
                    (e.premultipliedAlpha = !1),
                    (e.visible = !0),
                    (e.toneMapped = !0),
                    (e.userData = {}),
                    (e.version = 0),
                    e
                  );
                }
                return (
                  p(t, e),
                  m(t, [
                    { key: "onBuild", value: function () {} },
                    { key: "onBeforeCompile", value: function () {} },
                    {
                      key: "customProgramCacheKey",
                      value: function () {
                        return this.onBeforeCompile.toString();
                      },
                    },
                    {
                      key: "setValues",
                      value: function (e) {
                        if (void 0 !== e)
                          for (var t in e) {
                            var n = e[t];
                            if (void 0 !== n)
                              if ("shading" !== t) {
                                var i = this[t];
                                void 0 !== i
                                  ? i && i.isColor
                                    ? i.set(n)
                                    : i && i.isVector3 && n && n.isVector3
                                    ? i.copy(n)
                                    : (this[t] = n)
                                  : console.warn(
                                      "THREE." +
                                        this.type +
                                        ": '" +
                                        t +
                                        "' is not a property of this material."
                                    );
                              } else
                                console.warn(
                                  "THREE." +
                                    this.type +
                                    ": .shading has been removed. Use the boolean .flatShading instead."
                                ),
                                  (this.flatShading = n === P);
                            else
                              console.warn(
                                "THREE.Material: '" +
                                  t +
                                  "' parameter is undefined."
                              );
                          }
                      },
                    },
                    {
                      key: "toJSON",
                      value: function (e) {
                        var t = void 0 === e || "string" === typeof e;
                        t && (e = { textures: {}, images: {} });
                        var n = {
                          metadata: {
                            version: 4.5,
                            type: "Material",
                            generator: "Material.toJSON",
                          },
                        };
                        function i(e) {
                          var t = [];
                          for (var n in e) {
                            var i = e[n];
                            delete i.metadata, t.push(i);
                          }
                          return t;
                        }
                        if (
                          ((n.uuid = this.uuid),
                          (n.type = this.type),
                          "" !== this.name && (n.name = this.name),
                          this.color &&
                            this.color.isColor &&
                            (n.color = this.color.getHex()),
                          void 0 !== this.roughness &&
                            (n.roughness = this.roughness),
                          void 0 !== this.metalness &&
                            (n.metalness = this.metalness),
                          this.sheen &&
                            this.sheen.isColor &&
                            (n.sheen = this.sheen.getHex()),
                          this.emissive &&
                            this.emissive.isColor &&
                            (n.emissive = this.emissive.getHex()),
                          this.emissiveIntensity &&
                            1 !== this.emissiveIntensity &&
                            (n.emissiveIntensity = this.emissiveIntensity),
                          this.specular &&
                            this.specular.isColor &&
                            (n.specular = this.specular.getHex()),
                          void 0 !== this.shininess &&
                            (n.shininess = this.shininess),
                          void 0 !== this.clearcoat &&
                            (n.clearcoat = this.clearcoat),
                          void 0 !== this.clearcoatRoughness &&
                            (n.clearcoatRoughness = this.clearcoatRoughness),
                          this.clearcoatMap &&
                            this.clearcoatMap.isTexture &&
                            (n.clearcoatMap = this.clearcoatMap.toJSON(e).uuid),
                          this.clearcoatRoughnessMap &&
                            this.clearcoatRoughnessMap.isTexture &&
                            (n.clearcoatRoughnessMap =
                              this.clearcoatRoughnessMap.toJSON(e).uuid),
                          this.clearcoatNormalMap &&
                            this.clearcoatNormalMap.isTexture &&
                            ((n.clearcoatNormalMap =
                              this.clearcoatNormalMap.toJSON(e).uuid),
                            (n.clearcoatNormalScale =
                              this.clearcoatNormalScale.toArray())),
                          this.map &&
                            this.map.isTexture &&
                            (n.map = this.map.toJSON(e).uuid),
                          this.matcap &&
                            this.matcap.isTexture &&
                            (n.matcap = this.matcap.toJSON(e).uuid),
                          this.alphaMap &&
                            this.alphaMap.isTexture &&
                            (n.alphaMap = this.alphaMap.toJSON(e).uuid),
                          this.lightMap &&
                            this.lightMap.isTexture &&
                            ((n.lightMap = this.lightMap.toJSON(e).uuid),
                            (n.lightMapIntensity = this.lightMapIntensity)),
                          this.aoMap &&
                            this.aoMap.isTexture &&
                            ((n.aoMap = this.aoMap.toJSON(e).uuid),
                            (n.aoMapIntensity = this.aoMapIntensity)),
                          this.bumpMap &&
                            this.bumpMap.isTexture &&
                            ((n.bumpMap = this.bumpMap.toJSON(e).uuid),
                            (n.bumpScale = this.bumpScale)),
                          this.normalMap &&
                            this.normalMap.isTexture &&
                            ((n.normalMap = this.normalMap.toJSON(e).uuid),
                            (n.normalMapType = this.normalMapType),
                            (n.normalScale = this.normalScale.toArray())),
                          this.displacementMap &&
                            this.displacementMap.isTexture &&
                            ((n.displacementMap =
                              this.displacementMap.toJSON(e).uuid),
                            (n.displacementScale = this.displacementScale),
                            (n.displacementBias = this.displacementBias)),
                          this.roughnessMap &&
                            this.roughnessMap.isTexture &&
                            (n.roughnessMap = this.roughnessMap.toJSON(e).uuid),
                          this.metalnessMap &&
                            this.metalnessMap.isTexture &&
                            (n.metalnessMap = this.metalnessMap.toJSON(e).uuid),
                          this.emissiveMap &&
                            this.emissiveMap.isTexture &&
                            (n.emissiveMap = this.emissiveMap.toJSON(e).uuid),
                          this.specularMap &&
                            this.specularMap.isTexture &&
                            (n.specularMap = this.specularMap.toJSON(e).uuid),
                          this.envMap &&
                            this.envMap.isTexture &&
                            ((n.envMap = this.envMap.toJSON(e).uuid),
                            void 0 !== this.combine &&
                              (n.combine = this.combine)),
                          void 0 !== this.envMapIntensity &&
                            (n.envMapIntensity = this.envMapIntensity),
                          void 0 !== this.reflectivity &&
                            (n.reflectivity = this.reflectivity),
                          void 0 !== this.refractionRatio &&
                            (n.refractionRatio = this.refractionRatio),
                          this.gradientMap &&
                            this.gradientMap.isTexture &&
                            (n.gradientMap = this.gradientMap.toJSON(e).uuid),
                          void 0 !== this.transmission &&
                            (n.transmission = this.transmission),
                          this.transmissionMap &&
                            this.transmissionMap.isTexture &&
                            (n.transmissionMap =
                              this.transmissionMap.toJSON(e).uuid),
                          void 0 !== this.thickness &&
                            (n.thickness = this.thickness),
                          this.thicknessMap &&
                            this.thicknessMap.isTexture &&
                            (n.thicknessMap = this.thicknessMap.toJSON(e).uuid),
                          void 0 !== this.attenuationDistance &&
                            (n.attenuationDistance = this.attenuationDistance),
                          void 0 !== this.attenuationColor &&
                            (n.attenuationColor =
                              this.attenuationColor.getHex()),
                          void 0 !== this.size && (n.size = this.size),
                          null !== this.shadowSide &&
                            (n.shadowSide = this.shadowSide),
                          void 0 !== this.sizeAttenuation &&
                            (n.sizeAttenuation = this.sizeAttenuation),
                          this.blending !== I && (n.blending = this.blending),
                          this.side !== T && (n.side = this.side),
                          this.vertexColors && (n.vertexColors = !0),
                          this.opacity < 1 && (n.opacity = this.opacity),
                          !0 === this.transparent &&
                            (n.transparent = this.transparent),
                          (n.depthFunc = this.depthFunc),
                          (n.depthTest = this.depthTest),
                          (n.depthWrite = this.depthWrite),
                          (n.colorWrite = this.colorWrite),
                          (n.stencilWrite = this.stencilWrite),
                          (n.stencilWriteMask = this.stencilWriteMask),
                          (n.stencilFunc = this.stencilFunc),
                          (n.stencilRef = this.stencilRef),
                          (n.stencilFuncMask = this.stencilFuncMask),
                          (n.stencilFail = this.stencilFail),
                          (n.stencilZFail = this.stencilZFail),
                          (n.stencilZPass = this.stencilZPass),
                          this.rotation &&
                            0 !== this.rotation &&
                            (n.rotation = this.rotation),
                          !0 === this.polygonOffset && (n.polygonOffset = !0),
                          0 !== this.polygonOffsetFactor &&
                            (n.polygonOffsetFactor = this.polygonOffsetFactor),
                          0 !== this.polygonOffsetUnits &&
                            (n.polygonOffsetUnits = this.polygonOffsetUnits),
                          this.linewidth &&
                            1 !== this.linewidth &&
                            (n.linewidth = this.linewidth),
                          void 0 !== this.dashSize &&
                            (n.dashSize = this.dashSize),
                          void 0 !== this.gapSize && (n.gapSize = this.gapSize),
                          void 0 !== this.scale && (n.scale = this.scale),
                          !0 === this.dithering && (n.dithering = !0),
                          this.alphaTest > 0 && (n.alphaTest = this.alphaTest),
                          !0 === this.alphaToCoverage &&
                            (n.alphaToCoverage = this.alphaToCoverage),
                          !0 === this.premultipliedAlpha &&
                            (n.premultipliedAlpha = this.premultipliedAlpha),
                          !0 === this.wireframe &&
                            (n.wireframe = this.wireframe),
                          this.wireframeLinewidth > 1 &&
                            (n.wireframeLinewidth = this.wireframeLinewidth),
                          "round" !== this.wireframeLinecap &&
                            (n.wireframeLinecap = this.wireframeLinecap),
                          "round" !== this.wireframeLinejoin &&
                            (n.wireframeLinejoin = this.wireframeLinejoin),
                          !0 === this.morphTargets && (n.morphTargets = !0),
                          !0 === this.morphNormals && (n.morphNormals = !0),
                          !0 === this.flatShading &&
                            (n.flatShading = this.flatShading),
                          !1 === this.visible && (n.visible = !1),
                          !1 === this.toneMapped && (n.toneMapped = !1),
                          "{}" !== JSON.stringify(this.userData) &&
                            (n.userData = this.userData),
                          t)
                        ) {
                          var r = i(e.textures),
                            a = i(e.images);
                          r.length > 0 && (n.textures = r),
                            a.length > 0 && (n.images = a);
                        }
                        return n;
                      },
                    },
                    {
                      key: "clone",
                      value: function () {
                        return new this.constructor().copy(this);
                      },
                    },
                    {
                      key: "copy",
                      value: function (e) {
                        (this.name = e.name),
                          (this.fog = e.fog),
                          (this.blending = e.blending),
                          (this.side = e.side),
                          (this.vertexColors = e.vertexColors),
                          (this.opacity = e.opacity),
                          (this.transparent = e.transparent),
                          (this.blendSrc = e.blendSrc),
                          (this.blendDst = e.blendDst),
                          (this.blendEquation = e.blendEquation),
                          (this.blendSrcAlpha = e.blendSrcAlpha),
                          (this.blendDstAlpha = e.blendDstAlpha),
                          (this.blendEquationAlpha = e.blendEquationAlpha),
                          (this.depthFunc = e.depthFunc),
                          (this.depthTest = e.depthTest),
                          (this.depthWrite = e.depthWrite),
                          (this.stencilWriteMask = e.stencilWriteMask),
                          (this.stencilFunc = e.stencilFunc),
                          (this.stencilRef = e.stencilRef),
                          (this.stencilFuncMask = e.stencilFuncMask),
                          (this.stencilFail = e.stencilFail),
                          (this.stencilZFail = e.stencilZFail),
                          (this.stencilZPass = e.stencilZPass),
                          (this.stencilWrite = e.stencilWrite);
                        var t = e.clippingPlanes,
                          n = null;
                        if (null !== t) {
                          var i = t.length;
                          n = new Array(i);
                          for (var r = 0; r !== i; ++r) n[r] = t[r].clone();
                        }
                        return (
                          (this.clippingPlanes = n),
                          (this.clipIntersection = e.clipIntersection),
                          (this.clipShadows = e.clipShadows),
                          (this.shadowSide = e.shadowSide),
                          (this.colorWrite = e.colorWrite),
                          (this.precision = e.precision),
                          (this.polygonOffset = e.polygonOffset),
                          (this.polygonOffsetFactor = e.polygonOffsetFactor),
                          (this.polygonOffsetUnits = e.polygonOffsetUnits),
                          (this.dithering = e.dithering),
                          (this.alphaTest = e.alphaTest),
                          (this.alphaToCoverage = e.alphaToCoverage),
                          (this.premultipliedAlpha = e.premultipliedAlpha),
                          (this.visible = e.visible),
                          (this.toneMapped = e.toneMapped),
                          (this.userData = JSON.parse(
                            JSON.stringify(e.userData)
                          )),
                          this
                        );
                      },
                    },
                    {
                      key: "dispose",
                      value: function () {
                        this.dispatchEvent({ type: "dispose" });
                      },
                    },
                    {
                      key: "needsUpdate",
                      set: function (e) {
                        !0 === e && this.version++;
                      },
                    },
                  ]),
                  t
                );
              })(Qn);
            Ur.prototype.isMaterial = !0;
            var zr = {
                aliceblue: 15792383,
                antiquewhite: 16444375,
                aqua: 65535,
                aquamarine: 8388564,
                azure: 15794175,
                beige: 16119260,
                bisque: 16770244,
                black: 0,
                blanchedalmond: 16772045,
                blue: 255,
                blueviolet: 9055202,
                brown: 10824234,
                burlywood: 14596231,
                cadetblue: 6266528,
                chartreuse: 8388352,
                chocolate: 13789470,
                coral: 16744272,
                cornflowerblue: 6591981,
                cornsilk: 16775388,
                crimson: 14423100,
                cyan: 65535,
                darkblue: 139,
                darkcyan: 35723,
                darkgoldenrod: 12092939,
                darkgray: 11119017,
                darkgreen: 25600,
                darkgrey: 11119017,
                darkkhaki: 12433259,
                darkmagenta: 9109643,
                darkolivegreen: 5597999,
                darkorange: 16747520,
                darkorchid: 10040012,
                darkred: 9109504,
                darksalmon: 15308410,
                darkseagreen: 9419919,
                darkslateblue: 4734347,
                darkslategray: 3100495,
                darkslategrey: 3100495,
                darkturquoise: 52945,
                darkviolet: 9699539,
                deeppink: 16716947,
                deepskyblue: 49151,
                dimgray: 6908265,
                dimgrey: 6908265,
                dodgerblue: 2003199,
                firebrick: 11674146,
                floralwhite: 16775920,
                forestgreen: 2263842,
                fuchsia: 16711935,
                gainsboro: 14474460,
                ghostwhite: 16316671,
                gold: 16766720,
                goldenrod: 14329120,
                gray: 8421504,
                green: 32768,
                greenyellow: 11403055,
                grey: 8421504,
                honeydew: 15794160,
                hotpink: 16738740,
                indianred: 13458524,
                indigo: 4915330,
                ivory: 16777200,
                khaki: 15787660,
                lavender: 15132410,
                lavenderblush: 16773365,
                lawngreen: 8190976,
                lemonchiffon: 16775885,
                lightblue: 11393254,
                lightcoral: 15761536,
                lightcyan: 14745599,
                lightgoldenrodyellow: 16448210,
                lightgray: 13882323,
                lightgreen: 9498256,
                lightgrey: 13882323,
                lightpink: 16758465,
                lightsalmon: 16752762,
                lightseagreen: 2142890,
                lightskyblue: 8900346,
                lightslategray: 7833753,
                lightslategrey: 7833753,
                lightsteelblue: 11584734,
                lightyellow: 16777184,
                lime: 65280,
                limegreen: 3329330,
                linen: 16445670,
                magenta: 16711935,
                maroon: 8388608,
                mediumaquamarine: 6737322,
                mediumblue: 205,
                mediumorchid: 12211667,
                mediumpurple: 9662683,
                mediumseagreen: 3978097,
                mediumslateblue: 8087790,
                mediumspringgreen: 64154,
                mediumturquoise: 4772300,
                mediumvioletred: 13047173,
                midnightblue: 1644912,
                mintcream: 16121850,
                mistyrose: 16770273,
                moccasin: 16770229,
                navajowhite: 16768685,
                navy: 128,
                oldlace: 16643558,
                olive: 8421376,
                olivedrab: 7048739,
                orange: 16753920,
                orangered: 16729344,
                orchid: 14315734,
                palegoldenrod: 15657130,
                palegreen: 10025880,
                paleturquoise: 11529966,
                palevioletred: 14381203,
                papayawhip: 16773077,
                peachpuff: 16767673,
                peru: 13468991,
                pink: 16761035,
                plum: 14524637,
                powderblue: 11591910,
                purple: 8388736,
                rebeccapurple: 6697881,
                red: 16711680,
                rosybrown: 12357519,
                royalblue: 4286945,
                saddlebrown: 9127187,
                salmon: 16416882,
                sandybrown: 16032864,
                seagreen: 3050327,
                seashell: 16774638,
                sienna: 10506797,
                silver: 12632256,
                skyblue: 8900331,
                slateblue: 6970061,
                slategray: 7372944,
                slategrey: 7372944,
                snow: 16775930,
                springgreen: 65407,
                steelblue: 4620980,
                tan: 13808780,
                teal: 32896,
                thistle: 14204888,
                tomato: 16737095,
                turquoise: 4251856,
                violet: 15631086,
                wheat: 16113331,
                white: 16777215,
                whitesmoke: 16119285,
                yellow: 16776960,
                yellowgreen: 10145074,
              },
              jr = { h: 0, s: 0, l: 0 },
              Gr = { h: 0, s: 0, l: 0 };
            function Hr(e, t, n) {
              return (
                n < 0 && (n += 1),
                n > 1 && (n -= 1),
                n < 1 / 6
                  ? e + 6 * (t - e) * n
                  : n < 0.5
                  ? t
                  : n < 2 / 3
                  ? e + 6 * (t - e) * (2 / 3 - n)
                  : e
              );
            }
            function Wr(e) {
              return e < 0.04045
                ? 0.0773993808 * e
                : Math.pow(0.9478672986 * e + 0.0521327014, 2.4);
            }
            function Yr(e) {
              return e < 0.0031308
                ? 12.92 * e
                : 1.055 * Math.pow(e, 0.41666) - 0.055;
            }
            var qr = (function () {
              function e(t, n, i) {
                return (
                  f(this, e),
                  void 0 === n && void 0 === i
                    ? this.set(t)
                    : this.setRGB(t, n, i)
                );
              }
              return (
                m(e, [
                  {
                    key: "set",
                    value: function (e) {
                      return (
                        e && e.isColor
                          ? this.copy(e)
                          : "number" === typeof e
                          ? this.setHex(e)
                          : "string" === typeof e && this.setStyle(e),
                        this
                      );
                    },
                  },
                  {
                    key: "setScalar",
                    value: function (e) {
                      return (this.r = e), (this.g = e), (this.b = e), this;
                    },
                  },
                  {
                    key: "setHex",
                    value: function (e) {
                      return (
                        (e = Math.floor(e)),
                        (this.r = ((e >> 16) & 255) / 255),
                        (this.g = ((e >> 8) & 255) / 255),
                        (this.b = (255 & e) / 255),
                        this
                      );
                    },
                  },
                  {
                    key: "setRGB",
                    value: function (e, t, n) {
                      return (this.r = e), (this.g = t), (this.b = n), this;
                    },
                  },
                  {
                    key: "setHSL",
                    value: function (e, t, n) {
                      if (
                        ((e = ii(e, 1)),
                        (t = ni(t, 0, 1)),
                        (n = ni(n, 0, 1)),
                        0 === t)
                      )
                        this.r = this.g = this.b = n;
                      else {
                        var i = n <= 0.5 ? n * (1 + t) : n + t - n * t,
                          r = 2 * n - i;
                        (this.r = Hr(r, i, e + 1 / 3)),
                          (this.g = Hr(r, i, e)),
                          (this.b = Hr(r, i, e - 1 / 3));
                      }
                      return this;
                    },
                  },
                  {
                    key: "setStyle",
                    value: function (e) {
                      function t(t) {
                        void 0 !== t &&
                          parseFloat(t) < 1 &&
                          console.warn(
                            "THREE.Color: Alpha component of " +
                              e +
                              " will be ignored."
                          );
                      }
                      var n;
                      if ((n = /^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e))) {
                        var i,
                          r = n[1],
                          a = n[2];
                        switch (r) {
                          case "rgb":
                          case "rgba":
                            if (
                              (i =
                                /^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(
                                  a
                                ))
                            )
                              return (
                                (this.r =
                                  Math.min(255, parseInt(i[1], 10)) / 255),
                                (this.g =
                                  Math.min(255, parseInt(i[2], 10)) / 255),
                                (this.b =
                                  Math.min(255, parseInt(i[3], 10)) / 255),
                                t(i[4]),
                                this
                              );
                            if (
                              (i =
                                /^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(
                                  a
                                ))
                            )
                              return (
                                (this.r =
                                  Math.min(100, parseInt(i[1], 10)) / 100),
                                (this.g =
                                  Math.min(100, parseInt(i[2], 10)) / 100),
                                (this.b =
                                  Math.min(100, parseInt(i[3], 10)) / 100),
                                t(i[4]),
                                this
                              );
                            break;
                          case "hsl":
                          case "hsla":
                            if (
                              (i =
                                /^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(
                                  a
                                ))
                            ) {
                              var o = parseFloat(i[1]) / 360,
                                s = parseInt(i[2], 10) / 100,
                                l = parseInt(i[3], 10) / 100;
                              return t(i[4]), this.setHSL(o, s, l);
                            }
                        }
                      } else if ((n = /^\#([A-Fa-f\d]+)$/.exec(e))) {
                        var u = n[1],
                          c = u.length;
                        if (3 === c)
                          return (
                            (this.r =
                              parseInt(u.charAt(0) + u.charAt(0), 16) / 255),
                            (this.g =
                              parseInt(u.charAt(1) + u.charAt(1), 16) / 255),
                            (this.b =
                              parseInt(u.charAt(2) + u.charAt(2), 16) / 255),
                            this
                          );
                        if (6 === c)
                          return (
                            (this.r =
                              parseInt(u.charAt(0) + u.charAt(1), 16) / 255),
                            (this.g =
                              parseInt(u.charAt(2) + u.charAt(3), 16) / 255),
                            (this.b =
                              parseInt(u.charAt(4) + u.charAt(5), 16) / 255),
                            this
                          );
                      }
                      return e && e.length > 0 ? this.setColorName(e) : this;
                    },
                  },
                  {
                    key: "setColorName",
                    value: function (e) {
                      var t = zr[e.toLowerCase()];
                      return (
                        void 0 !== t
                          ? this.setHex(t)
                          : console.warn("THREE.Color: Unknown color " + e),
                        this
                      );
                    },
                  },
                  {
                    key: "clone",
                    value: function () {
                      return new this.constructor(this.r, this.g, this.b);
                    },
                  },
                  {
                    key: "copy",
                    value: function (e) {
                      return (
                        (this.r = e.r), (this.g = e.g), (this.b = e.b), this
                      );
                    },
                  },
                  {
                    key: "copyGammaToLinear",
                    value: function (e) {
                      var t =
                        arguments.length > 1 && void 0 !== arguments[1]
                          ? arguments[1]
                          : 2;
                      return (
                        (this.r = Math.pow(e.r, t)),
                        (this.g = Math.pow(e.g, t)),
                        (this.b = Math.pow(e.b, t)),
                        this
                      );
                    },
                  },
                  {
                    key: "copyLinearToGamma",
                    value: function (e) {
                      var t =
                          arguments.length > 1 && void 0 !== arguments[1]
                            ? arguments[1]
                            : 2,
                        n = t > 0 ? 1 / t : 1;
                      return (
                        (this.r = Math.pow(e.r, n)),
                        (this.g = Math.pow(e.g, n)),
                        (this.b = Math.pow(e.b, n)),
                        this
                      );
                    },
                  },
                  {
                    key: "convertGammaToLinear",
                    value: function (e) {
                      return this.copyGammaToLinear(this, e), this;
                    },
                  },
                  {
                    key: "convertLinearToGamma",
                    value: function (e) {
                      return this.copyLinearToGamma(this, e), this;
                    },
                  },
                  {
                    key: "copySRGBToLinear",
                    value: function (e) {
                      return (
                        (this.r = Wr(e.r)),
                        (this.g = Wr(e.g)),
                        (this.b = Wr(e.b)),
                        this
                      );
                    },
                  },
                  {
                    key: "copyLinearToSRGB",
                    value: function (e) {
                      return (
                        (this.r = Yr(e.r)),
                        (this.g = Yr(e.g)),
                        (this.b = Yr(e.b)),
                        this
                      );
                    },
                  },
                  {
                    key: "convertSRGBToLinear",
                    value: function () {
                      return this.copySRGBToLinear(this), this;
                    },
                  },
                  {
                    key: "convertLinearToSRGB",
                    value: function () {
                      return this.copyLinearToSRGB(this), this;
                    },
                  },
                  {
                    key: "getHex",
                    value: function () {
                      return (
                        ((255 * this.r) << 16) ^
                        ((255 * this.g) << 8) ^
                        ((255 * this.b) << 0)
                      );
                    },
                  },
                  {
                    key: "getHexString",
                    value: function () {
                      return ("000000" + this.getHex().toString(16)).slice(-6);
                    },
                  },
                  {
                    key: "getHSL",
                    value: function (e) {
                      void 0 === e &&
                        (console.warn(
                          "THREE.Color: .getHSL() target is now required"
                        ),
                        (e = { h: 0, s: 0, l: 0 }));
                      var t,
                        n,
                        i = this.r,
                        r = this.g,
                        a = this.b,
                        o = Math.max(i, r, a),
                        s = Math.min(i, r, a),
                        l = (s + o) / 2;
                      if (s === o) (t = 0), (n = 0);
                      else {
                        var u = o - s;
                        switch (
                          ((n = l <= 0.5 ? u / (o + s) : u / (2 - o - s)), o)
                        ) {
                          case i:
                            t = (r - a) / u + (r < a ? 6 : 0);
                            break;
                          case r:
                            t = (a - i) / u + 2;
                            break;
                          case a:
                            t = (i - r) / u + 4;
                        }
                        t /= 6;
                      }
                      return (e.h = t), (e.s = n), (e.l = l), e;
                    },
                  },
                  {
                    key: "getStyle",
                    value: function () {
                      return (
                        "rgb(" +
                        ((255 * this.r) | 0) +
                        "," +
                        ((255 * this.g) | 0) +
                        "," +
                        ((255 * this.b) | 0) +
                        ")"
                      );
                    },
                  },
                  {
                    key: "offsetHSL",
                    value: function (e, t, n) {
                      return (
                        this.getHSL(jr),
                        (jr.h += e),
                        (jr.s += t),
                        (jr.l += n),
                        this.setHSL(jr.h, jr.s, jr.l),
                        this
                      );
                    },
                  },
                  {
                    key: "add",
                    value: function (e) {
                      return (
                        (this.r += e.r), (this.g += e.g), (this.b += e.b), this
                      );
                    },
                  },
                  {
                    key: "addColors",
                    value: function (e, t) {
                      return (
                        (this.r = e.r + t.r),
                        (this.g = e.g + t.g),
                        (this.b = e.b + t.b),
                        this
                      );
                    },
                  },
                  {
                    key: "addScalar",
                    value: function (e) {
                      return (this.r += e), (this.g += e), (this.b += e), this;
                    },
                  },
                  {
                    key: "sub",
                    value: function (e) {
                      return (
                        (this.r = Math.max(0, this.r - e.r)),
                        (this.g = Math.max(0, this.g - e.g)),
                        (this.b = Math.max(0, this.b - e.b)),
                        this
                      );
                    },
                  },
                  {
                    key: "multiply",
                    value: function (e) {
                      return (
                        (this.r *= e.r), (this.g *= e.g), (this.b *= e.b), this
                      );
                    },
                  },
                  {
                    key: "multiplyScalar",
                    value: function (e) {
                      return (this.r *= e), (this.g *= e), (this.b *= e), this;
                    },
                  },
                  {
                    key: "lerp",
                    value: function (e, t) {
                      return (
                        (this.r += (e.r - this.r) * t),
                        (this.g += (e.g - this.g) * t),
                        (this.b += (e.b - this.b) * t),
                        this
                      );
                    },
                  },
                  {
                    key: "lerpColors",
                    value: function (e, t, n) {
                      return (
                        (this.r = e.r + (t.r - e.r) * n),
                        (this.g = e.g + (t.g - e.g) * n),
                        (this.b = e.b + (t.b - e.b) * n),
                        this
                      );
                    },
                  },
                  {
                    key: "lerpHSL",
                    value: function (e, t) {
                      this.getHSL(jr), e.getHSL(Gr);
                      var n = ri(jr.h, Gr.h, t),
                        i = ri(jr.s, Gr.s, t),
                        r = ri(jr.l, Gr.l, t);
                      return this.setHSL(n, i, r), this;
                    },
                  },
                  {
                    key: "equals",
                    value: function (e) {
                      return e.r === this.r && e.g === this.g && e.b === this.b;
                    },
                  },
                  {
                    key: "fromArray",
                    value: function (e) {
                      var t =
                        arguments.length > 1 && void 0 !== arguments[1]
                          ? arguments[1]
                          : 0;
                      return (
                        (this.r = e[t]),
                        (this.g = e[t + 1]),
                        (this.b = e[t + 2]),
                        this
                      );
                    },
                  },
                  {
                    key: "toArray",
                    value: function () {
                      var e =
                          arguments.length > 0 && void 0 !== arguments[0]
                            ? arguments[0]
                            : [],
                        t =
                          arguments.length > 1 && void 0 !== arguments[1]
                            ? arguments[1]
                            : 0;
                      return (
                        (e[t] = this.r),
                        (e[t + 1] = this.g),
                        (e[t + 2] = this.b),
                        e
                      );
                    },
                  },
                  {
                    key: "fromBufferAttribute",
                    value: function (e, t) {
                      return (
                        (this.r = e.getX(t)),
                        (this.g = e.getY(t)),
                        (this.b = e.getZ(t)),
                        !0 === e.normalized &&
                          ((this.r /= 255), (this.g /= 255), (this.b /= 255)),
                        this
                      );
                    },
                  },
                  {
                    key: "toJSON",
                    value: function () {
                      return this.getHex();
                    },
                  },
                ]),
                e
              );
            })();
            (qr.NAMES = zr),
              (qr.prototype.isColor = !0),
              (qr.prototype.r = 1),
              (qr.prototype.g = 1),
              (qr.prototype.b = 1);
            var Xr = (function (e) {
              function t(e) {
                var n;
                return (
                  f(this, t),
                  ((n = c(this, h(t).call(this))).type = "MeshBasicMaterial"),
                  (n.color = new qr(16777215)),
                  (n.map = null),
                  (n.lightMap = null),
                  (n.lightMapIntensity = 1),
                  (n.aoMap = null),
                  (n.aoMapIntensity = 1),
                  (n.specularMap = null),
                  (n.alphaMap = null),
                  (n.envMap = null),
                  (n.combine = le),
                  (n.reflectivity = 1),
                  (n.refractionRatio = 0.98),
                  (n.wireframe = !1),
                  (n.wireframeLinewidth = 1),
                  (n.wireframeLinecap = "round"),
                  (n.wireframeLinejoin = "round"),
                  (n.morphTargets = !1),
                  n.setValues(e),
                  n
                );
              }
              return (
                p(t, e),
                m(t, [
                  {
                    key: "copy",
                    value: function (e) {
                      return (
                        l(h(t.prototype), "copy", this).call(this, e),
                        this.color.copy(e.color),
                        (this.map = e.map),
                        (this.lightMap = e.lightMap),
                        (this.lightMapIntensity = e.lightMapIntensity),
                        (this.aoMap = e.aoMap),
                        (this.aoMapIntensity = e.aoMapIntensity),
                        (this.specularMap = e.specularMap),
                        (this.alphaMap = e.alphaMap),
                        (this.envMap = e.envMap),
                        (this.combine = e.combine),
                        (this.reflectivity = e.reflectivity),
                        (this.refractionRatio = e.refractionRatio),
                        (this.wireframe = e.wireframe),
                        (this.wireframeLinewidth = e.wireframeLinewidth),
                        (this.wireframeLinecap = e.wireframeLinecap),
                        (this.wireframeLinejoin = e.wireframeLinejoin),
                        (this.morphTargets = e.morphTargets),
                        this
                      );
                    },
                  },
                ]),
                t
              );
            })(Ur);
            Xr.prototype.isMeshBasicMaterial = !0;
            var Qr = new _i(),
              Zr = new ui(),
              Jr = (function () {
                function e(t, n, i) {
                  if ((f(this, e), Array.isArray(t)))
                    throw new TypeError(
                      "THREE.BufferAttribute: array should be a Typed Array."
                    );
                  (this.name = ""),
                    (this.array = t),
                    (this.itemSize = n),
                    (this.count = void 0 !== t ? t.length / n : 0),
                    (this.normalized = !0 === i),
                    (this.usage = Dn),
                    (this.updateRange = { offset: 0, count: -1 }),
                    (this.version = 0);
                }
                return (
                  m(e, [
                    { key: "onUploadCallback", value: function () {} },
                    {
                      key: "setUsage",
                      value: function (e) {
                        return (this.usage = e), this;
                      },
                    },
                    {
                      key: "copy",
                      value: function (e) {
                        return (
                          (this.name = e.name),
                          (this.array = new e.array.constructor(e.array)),
                          (this.itemSize = e.itemSize),
                          (this.count = e.count),
                          (this.normalized = e.normalized),
                          (this.usage = e.usage),
                          this
                        );
                      },
                    },
                    {
                      key: "copyAt",
                      value: function (e, t, n) {
                        (e *= this.itemSize), (n *= t.itemSize);
                        for (var i = 0, r = this.itemSize; i < r; i++)
                          this.array[e + i] = t.array[n + i];
                        return this;
                      },
                    },
                    {
                      key: "copyArray",
                      value: function (e) {
                        return this.array.set(e), this;
                      },
                    },
                    {
                      key: "copyColorsArray",
                      value: function (e) {
                        for (
                          var t = this.array, n = 0, i = 0, r = e.length;
                          i < r;
                          i++
                        ) {
                          var a = e[i];
                          void 0 === a &&
                            (console.warn(
                              "THREE.BufferAttribute.copyColorsArray(): color is undefined",
                              i
                            ),
                            (a = new qr())),
                            (t[n++] = a.r),
                            (t[n++] = a.g),
                            (t[n++] = a.b);
                        }
                        return this;
                      },
                    },
                    {
                      key: "copyVector2sArray",
                      value: function (e) {
                        for (
                          var t = this.array, n = 0, i = 0, r = e.length;
                          i < r;
                          i++
                        ) {
                          var a = e[i];
                          void 0 === a &&
                            (console.warn(
                              "THREE.BufferAttribute.copyVector2sArray(): vector is undefined",
                              i
                            ),
                            (a = new ui())),
                            (t[n++] = a.x),
                            (t[n++] = a.y);
                        }
                        return this;
                      },
                    },
                    {
                      key: "copyVector3sArray",
                      value: function (e) {
                        for (
                          var t = this.array, n = 0, i = 0, r = e.length;
                          i < r;
                          i++
                        ) {
                          var a = e[i];
                          void 0 === a &&
                            (console.warn(
                              "THREE.BufferAttribute.copyVector3sArray(): vector is undefined",
                              i
                            ),
                            (a = new _i())),
                            (t[n++] = a.x),
                            (t[n++] = a.y),
                            (t[n++] = a.z);
                        }
                        return this;
                      },
                    },
                    {
                      key: "copyVector4sArray",
                      value: function (e) {
                        for (
                          var t = this.array, n = 0, i = 0, r = e.length;
                          i < r;
                          i++
                        ) {
                          var a = e[i];
                          void 0 === a &&
                            (console.warn(
                              "THREE.BufferAttribute.copyVector4sArray(): vector is undefined",
                              i
                            ),
                            (a = new vi())),
                            (t[n++] = a.x),
                            (t[n++] = a.y),
                            (t[n++] = a.z),
                            (t[n++] = a.w);
                        }
                        return this;
                      },
                    },
                    {
                      key: "applyMatrix3",
                      value: function (e) {
                        if (2 === this.itemSize)
                          for (var t = 0, n = this.count; t < n; t++)
                            Zr.fromBufferAttribute(this, t),
                              Zr.applyMatrix3(e),
                              this.setXY(t, Zr.x, Zr.y);
                        else if (3 === this.itemSize)
                          for (var i = 0, r = this.count; i < r; i++)
                            Qr.fromBufferAttribute(this, i),
                              Qr.applyMatrix3(e),
                              this.setXYZ(i, Qr.x, Qr.y, Qr.z);
                        return this;
                      },
                    },
                    {
                      key: "applyMatrix4",
                      value: function (e) {
                        for (var t = 0, n = this.count; t < n; t++)
                          (Qr.x = this.getX(t)),
                            (Qr.y = this.getY(t)),
                            (Qr.z = this.getZ(t)),
                            Qr.applyMatrix4(e),
                            this.setXYZ(t, Qr.x, Qr.y, Qr.z);
                        return this;
                      },
                    },
                    {
                      key: "applyNormalMatrix",
                      value: function (e) {
                        for (var t = 0, n = this.count; t < n; t++)
                          (Qr.x = this.getX(t)),
                            (Qr.y = this.getY(t)),
                            (Qr.z = this.getZ(t)),
                            Qr.applyNormalMatrix(e),
                            this.setXYZ(t, Qr.x, Qr.y, Qr.z);
                        return this;
                      },
                    },
                    {
                      key: "transformDirection",
                      value: function (e) {
                        for (var t = 0, n = this.count; t < n; t++)
                          (Qr.x = this.getX(t)),
                            (Qr.y = this.getY(t)),
                            (Qr.z = this.getZ(t)),
                            Qr.transformDirection(e),
                            this.setXYZ(t, Qr.x, Qr.y, Qr.z);
                        return this;
                      },
                    },
                    {
                      key: "set",
                      value: function (e) {
                        var t =
                          arguments.length > 1 && void 0 !== arguments[1]
                            ? arguments[1]
                            : 0;
                        return this.array.set(e, t), this;
                      },
                    },
                    {
                      key: "getX",
                      value: function (e) {
                        return this.array[e * this.itemSize];
                      },
                    },
                    {
                      key: "setX",
                      value: function (e, t) {
                        return (this.array[e * this.itemSize] = t), this;
                      },
                    },
                    {
                      key: "getY",
                      value: function (e) {
                        return this.array[e * this.itemSize + 1];
                      },
                    },
                    {
                      key: "setY",
                      value: function (e, t) {
                        return (this.array[e * this.itemSize + 1] = t), this;
                      },
                    },
                    {
                      key: "getZ",
                      value: function (e) {
                        return this.array[e * this.itemSize + 2];
                      },
                    },
                    {
                      key: "setZ",
                      value: function (e, t) {
                        return (this.array[e * this.itemSize + 2] = t), this;
                      },
                    },
                    {
                      key: "getW",
                      value: function (e) {
                        return this.array[e * this.itemSize + 3];
                      },
                    },
                    {
                      key: "setW",
                      value: function (e, t) {
                        return (this.array[e * this.itemSize + 3] = t), this;
                      },
                    },
                    {
                      key: "setXY",
                      value: function (e, t, n) {
                        return (
                          (e *= this.itemSize),
                          (this.array[e + 0] = t),
                          (this.array[e + 1] = n),
                          this
                        );
                      },
                    },
                    {
                      key: "setXYZ",
                      value: function (e, t, n, i) {
                        return (
                          (e *= this.itemSize),
                          (this.array[e + 0] = t),
                          (this.array[e + 1] = n),
                          (this.array[e + 2] = i),
                          this
                        );
                      },
                    },
                    {
                      key: "setXYZW",
                      value: function (e, t, n, i, r) {
                        return (
                          (e *= this.itemSize),
                          (this.array[e + 0] = t),
                          (this.array[e + 1] = n),
                          (this.array[e + 2] = i),
                          (this.array[e + 3] = r),
                          this
                        );
                      },
                    },
                    {
                      key: "onUpload",
                      value: function (e) {
                        return (this.onUploadCallback = e), this;
                      },
                    },
                    {
                      key: "clone",
                      value: function () {
                        return new this.constructor(
                          this.array,
                          this.itemSize
                        ).copy(this);
                      },
                    },
                    {
                      key: "toJSON",
                      value: function () {
                        var e = {
                          itemSize: this.itemSize,
                          type: this.array.constructor.name,
                          array: Array.prototype.slice.call(this.array),
                          normalized: this.normalized,
                        };
                        return (
                          "" !== this.name && (e.name = this.name),
                          this.usage !== Dn && (e.usage = this.usage),
                          (0 === this.updateRange.offset &&
                            -1 === this.updateRange.count) ||
                            (e.updateRange = this.updateRange),
                          e
                        );
                      },
                    },
                    {
                      key: "needsUpdate",
                      set: function (e) {
                        !0 === e && this.version++;
                      },
                    },
                  ]),
                  e
                );
              })();
            Jr.prototype.isBufferAttribute = !0;
            var Kr = (function (e) {
                function t(e, n, i) {
                  return (
                    f(this, t), c(this, h(t).call(this, new Int8Array(e), n, i))
                  );
                }
                return p(t, e), t;
              })(Jr),
              $r = (function (e) {
                function t(e, n, i) {
                  return (
                    f(this, t),
                    c(this, h(t).call(this, new Uint8Array(e), n, i))
                  );
                }
                return p(t, e), t;
              })(Jr),
              ea = (function (e) {
                function t(e, n, i) {
                  return (
                    f(this, t),
                    c(this, h(t).call(this, new Uint8ClampedArray(e), n, i))
                  );
                }
                return p(t, e), t;
              })(Jr),
              ta = (function (e) {
                function t(e, n, i) {
                  return (
                    f(this, t),
                    c(this, h(t).call(this, new Int16Array(e), n, i))
                  );
                }
                return p(t, e), t;
              })(Jr),
              na = (function (e) {
                function t(e, n, i) {
                  return (
                    f(this, t),
                    c(this, h(t).call(this, new Uint16Array(e), n, i))
                  );
                }
                return p(t, e), t;
              })(Jr),
              ia = (function (e) {
                function t(e, n, i) {
                  return (
                    f(this, t),
                    c(this, h(t).call(this, new Int32Array(e), n, i))
                  );
                }
                return p(t, e), t;
              })(Jr),
              ra = (function (e) {
                function t(e, n, i) {
                  return (
                    f(this, t),
                    c(this, h(t).call(this, new Uint32Array(e), n, i))
                  );
                }
                return p(t, e), t;
              })(Jr),
              aa = (function (e) {
                function t(e, n, i) {
                  return (
                    f(this, t),
                    c(this, h(t).call(this, new Uint16Array(e), n, i))
                  );
                }
                return p(t, e), t;
              })(Jr);
            aa.prototype.isFloat16BufferAttribute = !0;
            var oa = (function (e) {
                function t(e, n, i) {
                  return (
                    f(this, t),
                    c(this, h(t).call(this, new Float32Array(e), n, i))
                  );
                }
                return p(t, e), t;
              })(Jr),
              sa = (function (e) {
                function t(e, n, i) {
                  return (
                    f(this, t),
                    c(this, h(t).call(this, new Float64Array(e), n, i))
                  );
                }
                return p(t, e), t;
              })(Jr);
            function la(e) {
              if (0 === e.length) return -1 / 0;
              for (var t = e[0], n = 1, i = e.length; n < i; ++n)
                e[n] > t && (t = e[n]);
              return t;
            }
            var ua = {
              Int8Array: Int8Array,
              Uint8Array: Uint8Array,
              Uint8ClampedArray: Uint8ClampedArray,
              Int16Array: Int16Array,
              Uint16Array: Uint16Array,
              Int32Array: Int32Array,
              Uint32Array: Uint32Array,
              Float32Array: Float32Array,
              Float64Array: Float64Array,
            };
            function ca(e, t) {
              return new ua[e](t);
            }
            var ha = 0,
              da = new Ki(),
              pa = new Sr(),
              fa = new _i(),
              ma = new Ei(),
              va = new Ei(),
              ga = new _i(),
              ya = (function (e) {
                function t() {
                  var e;
                  return (
                    f(this, t),
                    (e = c(this, h(t).call(this))),
                    Object.defineProperty(d(e), "id", { value: ha++ }),
                    (e.uuid = ti()),
                    (e.name = ""),
                    (e.type = "BufferGeometry"),
                    (e.index = null),
                    (e.attributes = {}),
                    (e.morphAttributes = {}),
                    (e.morphTargetsRelative = !1),
                    (e.groups = []),
                    (e.boundingBox = null),
                    (e.boundingSphere = null),
                    (e.drawRange = { start: 0, count: 1 / 0 }),
                    (e.userData = {}),
                    e
                  );
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "getIndex",
                      value: function () {
                        return this.index;
                      },
                    },
                    {
                      key: "setIndex",
                      value: function (e) {
                        return (
                          Array.isArray(e)
                            ? (this.index = new (la(e) > 65535 ? ra : na)(e, 1))
                            : (this.index = e),
                          this
                        );
                      },
                    },
                    {
                      key: "getAttribute",
                      value: function (e) {
                        return this.attributes[e];
                      },
                    },
                    {
                      key: "setAttribute",
                      value: function (e, t) {
                        return (this.attributes[e] = t), this;
                      },
                    },
                    {
                      key: "deleteAttribute",
                      value: function (e) {
                        return delete this.attributes[e], this;
                      },
                    },
                    {
                      key: "hasAttribute",
                      value: function (e) {
                        return void 0 !== this.attributes[e];
                      },
                    },
                    {
                      key: "addGroup",
                      value: function (e, t) {
                        var n =
                          arguments.length > 2 && void 0 !== arguments[2]
                            ? arguments[2]
                            : 0;
                        this.groups.push({
                          start: e,
                          count: t,
                          materialIndex: n,
                        });
                      },
                    },
                    {
                      key: "clearGroups",
                      value: function () {
                        this.groups = [];
                      },
                    },
                    {
                      key: "setDrawRange",
                      value: function (e, t) {
                        (this.drawRange.start = e), (this.drawRange.count = t);
                      },
                    },
                    {
                      key: "applyMatrix4",
                      value: function (e) {
                        var t = this.attributes.position;
                        void 0 !== t &&
                          (t.applyMatrix4(e), (t.needsUpdate = !0));
                        var n = this.attributes.normal;
                        if (void 0 !== n) {
                          var i = new hi().getNormalMatrix(e);
                          n.applyNormalMatrix(i), (n.needsUpdate = !0);
                        }
                        var r = this.attributes.tangent;
                        return (
                          void 0 !== r &&
                            (r.transformDirection(e), (r.needsUpdate = !0)),
                          null !== this.boundingBox &&
                            this.computeBoundingBox(),
                          null !== this.boundingSphere &&
                            this.computeBoundingSphere(),
                          this
                        );
                      },
                    },
                    {
                      key: "applyQuaternion",
                      value: function (e) {
                        return (
                          da.makeRotationFromQuaternion(e),
                          this.applyMatrix4(da),
                          this
                        );
                      },
                    },
                    {
                      key: "rotateX",
                      value: function (e) {
                        return da.makeRotationX(e), this.applyMatrix4(da), this;
                      },
                    },
                    {
                      key: "rotateY",
                      value: function (e) {
                        return da.makeRotationY(e), this.applyMatrix4(da), this;
                      },
                    },
                    {
                      key: "rotateZ",
                      value: function (e) {
                        return da.makeRotationZ(e), this.applyMatrix4(da), this;
                      },
                    },
                    {
                      key: "translate",
                      value: function (e, t, n) {
                        return (
                          da.makeTranslation(e, t, n),
                          this.applyMatrix4(da),
                          this
                        );
                      },
                    },
                    {
                      key: "scale",
                      value: function (e, t, n) {
                        return (
                          da.makeScale(e, t, n), this.applyMatrix4(da), this
                        );
                      },
                    },
                    {
                      key: "lookAt",
                      value: function (e) {
                        return (
                          pa.lookAt(e),
                          pa.updateMatrix(),
                          this.applyMatrix4(pa.matrix),
                          this
                        );
                      },
                    },
                    {
                      key: "center",
                      value: function () {
                        return (
                          this.computeBoundingBox(),
                          this.boundingBox.getCenter(fa).negate(),
                          this.translate(fa.x, fa.y, fa.z),
                          this
                        );
                      },
                    },
                    {
                      key: "setFromPoints",
                      value: function (e) {
                        for (var t = [], n = 0, i = e.length; n < i; n++) {
                          var r = e[n];
                          t.push(r.x, r.y, r.z || 0);
                        }
                        return (
                          this.setAttribute("position", new oa(t, 3)), this
                        );
                      },
                    },
                    {
                      key: "computeBoundingBox",
                      value: function () {
                        null === this.boundingBox &&
                          (this.boundingBox = new Ei());
                        var e = this.attributes.position,
                          t = this.morphAttributes.position;
                        if (e && e.isGLBufferAttribute)
                          return (
                            console.error(
                              'THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',
                              this
                            ),
                            void this.boundingBox.set(
                              new _i(-1 / 0, -1 / 0, -1 / 0),
                              new _i(1 / 0, 1 / 0, 1 / 0)
                            )
                          );
                        if (void 0 !== e) {
                          if ((this.boundingBox.setFromBufferAttribute(e), t))
                            for (var n = 0, i = t.length; n < i; n++) {
                              var r = t[n];
                              ma.setFromBufferAttribute(r),
                                this.morphTargetsRelative
                                  ? (ga.addVectors(
                                      this.boundingBox.min,
                                      ma.min
                                    ),
                                    this.boundingBox.expandByPoint(ga),
                                    ga.addVectors(this.boundingBox.max, ma.max),
                                    this.boundingBox.expandByPoint(ga))
                                  : (this.boundingBox.expandByPoint(ma.min),
                                    this.boundingBox.expandByPoint(ma.max));
                            }
                        } else this.boundingBox.makeEmpty();
                        (isNaN(this.boundingBox.min.x) ||
                          isNaN(this.boundingBox.min.y) ||
                          isNaN(this.boundingBox.min.z)) &&
                          console.error(
                            'THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',
                            this
                          );
                      },
                    },
                    {
                      key: "computeBoundingSphere",
                      value: function () {
                        null === this.boundingSphere &&
                          (this.boundingSphere = new Gi());
                        var e = this.attributes.position,
                          t = this.morphAttributes.position;
                        if (e && e.isGLBufferAttribute)
                          return (
                            console.error(
                              'THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',
                              this
                            ),
                            void this.boundingSphere.set(new _i(), 1 / 0)
                          );
                        if (e) {
                          var n = this.boundingSphere.center;
                          if ((ma.setFromBufferAttribute(e), t))
                            for (var i = 0, r = t.length; i < r; i++) {
                              var a = t[i];
                              va.setFromBufferAttribute(a),
                                this.morphTargetsRelative
                                  ? (ga.addVectors(ma.min, va.min),
                                    ma.expandByPoint(ga),
                                    ga.addVectors(ma.max, va.max),
                                    ma.expandByPoint(ga))
                                  : (ma.expandByPoint(va.min),
                                    ma.expandByPoint(va.max));
                            }
                          ma.getCenter(n);
                          for (var o = 0, s = 0, l = e.count; s < l; s++)
                            ga.fromBufferAttribute(e, s),
                              (o = Math.max(o, n.distanceToSquared(ga)));
                          if (t)
                            for (var u = 0, c = t.length; u < c; u++)
                              for (
                                var h = t[u],
                                  d = this.morphTargetsRelative,
                                  p = 0,
                                  f = h.count;
                                p < f;
                                p++
                              )
                                ga.fromBufferAttribute(h, p),
                                  d &&
                                    (fa.fromBufferAttribute(e, p), ga.add(fa)),
                                  (o = Math.max(o, n.distanceToSquared(ga)));
                          (this.boundingSphere.radius = Math.sqrt(o)),
                            isNaN(this.boundingSphere.radius) &&
                              console.error(
                                'THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',
                                this
                              );
                        }
                      },
                    },
                    { key: "computeFaceNormals", value: function () {} },
                    {
                      key: "computeTangents",
                      value: function () {
                        var e = this.index,
                          t = this.attributes;
                        if (
                          null !== e &&
                          void 0 !== t.position &&
                          void 0 !== t.normal &&
                          void 0 !== t.uv
                        ) {
                          var n = e.array,
                            i = t.position.array,
                            r = t.normal.array,
                            a = t.uv.array,
                            o = i.length / 3;
                          void 0 === t.tangent &&
                            this.setAttribute(
                              "tangent",
                              new Jr(new Float32Array(4 * o), 4)
                            );
                          for (
                            var s = t.tangent.array, l = [], u = [], c = 0;
                            c < o;
                            c++
                          )
                            (l[c] = new _i()), (u[c] = new _i());
                          var h = new _i(),
                            d = new _i(),
                            p = new _i(),
                            f = new ui(),
                            m = new ui(),
                            v = new ui(),
                            g = new _i(),
                            y = new _i(),
                            x = this.groups;
                          0 === x.length &&
                            (x = [{ start: 0, count: n.length }]);
                          for (var b = 0, _ = x.length; b < _; ++b)
                            for (
                              var w = x[b], S = w.start, E = S, M = S + w.count;
                              E < M;
                              E += 3
                            )
                              O(n[E + 0], n[E + 1], n[E + 2]);
                          for (
                            var A = new _i(),
                              T = new _i(),
                              C = new _i(),
                              k = new _i(),
                              P = 0,
                              L = x.length;
                            P < L;
                            ++P
                          )
                            for (
                              var R = x[P], I = R.start, F = I, N = I + R.count;
                              F < N;
                              F += 3
                            )
                              B(n[F + 0]), B(n[F + 1]), B(n[F + 2]);
                        } else
                          console.error(
                            "THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)"
                          );
                        function O(e, t, n) {
                          h.fromArray(i, 3 * e),
                            d.fromArray(i, 3 * t),
                            p.fromArray(i, 3 * n),
                            f.fromArray(a, 2 * e),
                            m.fromArray(a, 2 * t),
                            v.fromArray(a, 2 * n),
                            d.sub(h),
                            p.sub(h),
                            m.sub(f),
                            v.sub(f);
                          var r = 1 / (m.x * v.y - v.x * m.y);
                          isFinite(r) &&
                            (g
                              .copy(d)
                              .multiplyScalar(v.y)
                              .addScaledVector(p, -m.y)
                              .multiplyScalar(r),
                            y
                              .copy(p)
                              .multiplyScalar(m.x)
                              .addScaledVector(d, -v.x)
                              .multiplyScalar(r),
                            l[e].add(g),
                            l[t].add(g),
                            l[n].add(g),
                            u[e].add(y),
                            u[t].add(y),
                            u[n].add(y));
                        }
                        function B(e) {
                          C.fromArray(r, 3 * e), k.copy(C);
                          var t = l[e];
                          A.copy(t),
                            A.sub(C.multiplyScalar(C.dot(t))).normalize(),
                            T.crossVectors(k, t);
                          var n = T.dot(u[e]) < 0 ? -1 : 1;
                          (s[4 * e] = A.x),
                            (s[4 * e + 1] = A.y),
                            (s[4 * e + 2] = A.z),
                            (s[4 * e + 3] = n);
                        }
                      },
                    },
                    {
                      key: "computeVertexNormals",
                      value: function () {
                        var e = this.index,
                          t = this.getAttribute("position");
                        if (void 0 !== t) {
                          var n = this.getAttribute("normal");
                          if (void 0 === n)
                            (n = new Jr(new Float32Array(3 * t.count), 3)),
                              this.setAttribute("normal", n);
                          else
                            for (var i = 0, r = n.count; i < r; i++)
                              n.setXYZ(i, 0, 0, 0);
                          var a = new _i(),
                            o = new _i(),
                            s = new _i(),
                            l = new _i(),
                            u = new _i(),
                            c = new _i(),
                            h = new _i(),
                            d = new _i();
                          if (e)
                            for (var p = 0, f = e.count; p < f; p += 3) {
                              var m = e.getX(p + 0),
                                v = e.getX(p + 1),
                                g = e.getX(p + 2);
                              a.fromBufferAttribute(t, m),
                                o.fromBufferAttribute(t, v),
                                s.fromBufferAttribute(t, g),
                                h.subVectors(s, o),
                                d.subVectors(a, o),
                                h.cross(d),
                                l.fromBufferAttribute(n, m),
                                u.fromBufferAttribute(n, v),
                                c.fromBufferAttribute(n, g),
                                l.add(h),
                                u.add(h),
                                c.add(h),
                                n.setXYZ(m, l.x, l.y, l.z),
                                n.setXYZ(v, u.x, u.y, u.z),
                                n.setXYZ(g, c.x, c.y, c.z);
                            }
                          else
                            for (var y = 0, x = t.count; y < x; y += 3)
                              a.fromBufferAttribute(t, y + 0),
                                o.fromBufferAttribute(t, y + 1),
                                s.fromBufferAttribute(t, y + 2),
                                h.subVectors(s, o),
                                d.subVectors(a, o),
                                h.cross(d),
                                n.setXYZ(y + 0, h.x, h.y, h.z),
                                n.setXYZ(y + 1, h.x, h.y, h.z),
                                n.setXYZ(y + 2, h.x, h.y, h.z);
                          this.normalizeNormals(), (n.needsUpdate = !0);
                        }
                      },
                    },
                    {
                      key: "merge",
                      value: function (e, t) {
                        if (e && e.isBufferGeometry) {
                          void 0 === t &&
                            ((t = 0),
                            console.warn(
                              "THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."
                            ));
                          var n = this.attributes;
                          for (var i in n)
                            if (void 0 !== e.attributes[i])
                              for (
                                var r = n[i].array,
                                  a = e.attributes[i],
                                  o = a.array,
                                  s = a.itemSize * t,
                                  l = Math.min(o.length, r.length - s),
                                  u = 0,
                                  c = s;
                                u < l;
                                u++, c++
                              )
                                r[c] = o[u];
                          return this;
                        }
                        console.error(
                          "THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",
                          e
                        );
                      },
                    },
                    {
                      key: "normalizeNormals",
                      value: function () {
                        for (
                          var e = this.attributes.normal, t = 0, n = e.count;
                          t < n;
                          t++
                        )
                          ga.fromBufferAttribute(e, t),
                            ga.normalize(),
                            e.setXYZ(t, ga.x, ga.y, ga.z);
                      },
                    },
                    {
                      key: "toNonIndexed",
                      value: function () {
                        function e(e, t) {
                          for (
                            var n = e.array,
                              i = e.itemSize,
                              r = e.normalized,
                              a = new n.constructor(t.length * i),
                              o = 0,
                              s = 0,
                              l = 0,
                              u = t.length;
                            l < u;
                            l++
                          ) {
                            o = t[l] * i;
                            for (var c = 0; c < i; c++) a[s++] = n[o++];
                          }
                          return new Jr(a, i, r);
                        }
                        if (null === this.index)
                          return (
                            console.warn(
                              "THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."
                            ),
                            this
                          );
                        var n = new t(),
                          i = this.index.array,
                          r = this.attributes;
                        for (var a in r) {
                          var o = e(r[a], i);
                          n.setAttribute(a, o);
                        }
                        var s = this.morphAttributes;
                        for (var l in s) {
                          for (
                            var u = [], c = s[l], h = 0, d = c.length;
                            h < d;
                            h++
                          ) {
                            var p = e(c[h], i);
                            u.push(p);
                          }
                          n.morphAttributes[l] = u;
                        }
                        n.morphTargetsRelative = this.morphTargetsRelative;
                        for (
                          var f = this.groups, m = 0, v = f.length;
                          m < v;
                          m++
                        ) {
                          var g = f[m];
                          n.addGroup(g.start, g.count, g.materialIndex);
                        }
                        return n;
                      },
                    },
                    {
                      key: "toJSON",
                      value: function () {
                        var e = {
                          metadata: {
                            version: 4.5,
                            type: "BufferGeometry",
                            generator: "BufferGeometry.toJSON",
                          },
                        };
                        if (
                          ((e.uuid = this.uuid),
                          (e.type = this.type),
                          "" !== this.name && (e.name = this.name),
                          Object.keys(this.userData).length > 0 &&
                            (e.userData = this.userData),
                          void 0 !== this.parameters)
                        ) {
                          var t = this.parameters;
                          for (var n in t) void 0 !== t[n] && (e[n] = t[n]);
                          return e;
                        }
                        e.data = { attributes: {} };
                        var i = this.index;
                        null !== i &&
                          (e.data.index = {
                            type: i.array.constructor.name,
                            array: Array.prototype.slice.call(i.array),
                          });
                        var r = this.attributes;
                        for (var a in r) {
                          var o = r[a];
                          e.data.attributes[a] = o.toJSON(e.data);
                        }
                        var s = {},
                          l = !1;
                        for (var u in this.morphAttributes) {
                          for (
                            var c = this.morphAttributes[u],
                              h = [],
                              d = 0,
                              p = c.length;
                            d < p;
                            d++
                          ) {
                            var f = c[d];
                            h.push(f.toJSON(e.data));
                          }
                          h.length > 0 && ((s[u] = h), (l = !0));
                        }
                        l &&
                          ((e.data.morphAttributes = s),
                          (e.data.morphTargetsRelative =
                            this.morphTargetsRelative));
                        var m = this.groups;
                        m.length > 0 &&
                          (e.data.groups = JSON.parse(JSON.stringify(m)));
                        var v = this.boundingSphere;
                        return (
                          null !== v &&
                            (e.data.boundingSphere = {
                              center: v.center.toArray(),
                              radius: v.radius,
                            }),
                          e
                        );
                      },
                    },
                    {
                      key: "clone",
                      value: function () {
                        return new t().copy(this);
                      },
                    },
                    {
                      key: "copy",
                      value: function (e) {
                        (this.index = null),
                          (this.attributes = {}),
                          (this.morphAttributes = {}),
                          (this.groups = []),
                          (this.boundingBox = null),
                          (this.boundingSphere = null);
                        var t = {};
                        this.name = e.name;
                        var n = e.index;
                        null !== n && this.setIndex(n.clone(t));
                        var i = e.attributes;
                        for (var r in i) {
                          var a = i[r];
                          this.setAttribute(r, a.clone(t));
                        }
                        var o = e.morphAttributes;
                        for (var s in o) {
                          for (
                            var l = [], u = o[s], c = 0, h = u.length;
                            c < h;
                            c++
                          )
                            l.push(u[c].clone(t));
                          this.morphAttributes[s] = l;
                        }
                        this.morphTargetsRelative = e.morphTargetsRelative;
                        for (
                          var d = e.groups, p = 0, f = d.length;
                          p < f;
                          p++
                        ) {
                          var m = d[p];
                          this.addGroup(m.start, m.count, m.materialIndex);
                        }
                        var v = e.boundingBox;
                        null !== v && (this.boundingBox = v.clone());
                        var g = e.boundingSphere;
                        return (
                          null !== g && (this.boundingSphere = g.clone()),
                          (this.drawRange.start = e.drawRange.start),
                          (this.drawRange.count = e.drawRange.count),
                          (this.userData = e.userData),
                          this
                        );
                      },
                    },
                    {
                      key: "dispose",
                      value: function () {
                        this.dispatchEvent({ type: "dispose" });
                      },
                    },
                  ]),
                  t
                );
              })(Qn);
            ya.prototype.isBufferGeometry = !0;
            var xa = new Ki(),
              ba = new Ji(),
              _a = new Gi(),
              wa = new _i(),
              Sa = new _i(),
              Ea = new _i(),
              Ma = new _i(),
              Aa = new _i(),
              Ta = new _i(),
              Ca = new _i(),
              ka = new _i(),
              Pa = new _i(),
              La = new ui(),
              Ra = new ui(),
              Ia = new ui(),
              Fa = new _i(),
              Na = new _i(),
              Oa = (function (e) {
                function t() {
                  var e,
                    n =
                      arguments.length > 0 && void 0 !== arguments[0]
                        ? arguments[0]
                        : new ya(),
                    i =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : new Xr();
                  return (
                    f(this, t),
                    ((e = c(this, h(t).call(this))).type = "Mesh"),
                    (e.geometry = n),
                    (e.material = i),
                    e.updateMorphTargets(),
                    e
                  );
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "copy",
                      value: function (e) {
                        return (
                          l(h(t.prototype), "copy", this).call(this, e),
                          void 0 !== e.morphTargetInfluences &&
                            (this.morphTargetInfluences =
                              e.morphTargetInfluences.slice()),
                          void 0 !== e.morphTargetDictionary &&
                            (this.morphTargetDictionary = Object.assign(
                              {},
                              e.morphTargetDictionary
                            )),
                          (this.material = e.material),
                          (this.geometry = e.geometry),
                          this
                        );
                      },
                    },
                    {
                      key: "updateMorphTargets",
                      value: function () {
                        var e = this.geometry;
                        if (e.isBufferGeometry) {
                          var t = e.morphAttributes,
                            n = Object.keys(t);
                          if (n.length > 0) {
                            var i = t[n[0]];
                            if (void 0 !== i) {
                              (this.morphTargetInfluences = []),
                                (this.morphTargetDictionary = {});
                              for (var r = 0, a = i.length; r < a; r++) {
                                var o = i[r].name || String(r);
                                this.morphTargetInfluences.push(0),
                                  (this.morphTargetDictionary[o] = r);
                              }
                            }
                          }
                        } else {
                          var s = e.morphTargets;
                          void 0 !== s &&
                            s.length > 0 &&
                            console.error(
                              "THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."
                            );
                        }
                      },
                    },
                    {
                      key: "raycast",
                      value: function (e, t) {
                        var n,
                          i = this.geometry,
                          r = this.material,
                          a = this.matrixWorld;
                        if (
                          void 0 !== r &&
                          (null === i.boundingSphere &&
                            i.computeBoundingSphere(),
                          _a.copy(i.boundingSphere),
                          _a.applyMatrix4(a),
                          !1 !== e.ray.intersectsSphere(_a) &&
                            (xa.copy(a).invert(),
                            ba.copy(e.ray).applyMatrix4(xa),
                            null === i.boundingBox ||
                              !1 !== ba.intersectsBox(i.boundingBox)))
                        )
                          if (i.isBufferGeometry) {
                            var o = i.index,
                              s = i.attributes.position,
                              l = i.morphAttributes.position,
                              u = i.morphTargetsRelative,
                              c = i.attributes.uv,
                              h = i.attributes.uv2,
                              d = i.groups,
                              p = i.drawRange;
                            if (null !== o)
                              if (Array.isArray(r))
                                for (var f = 0, m = d.length; f < m; f++)
                                  for (
                                    var v = d[f],
                                      g = r[v.materialIndex],
                                      y = Math.max(v.start, p.start),
                                      x = Math.min(
                                        v.start + v.count,
                                        p.start + p.count
                                      );
                                    y < x;
                                    y += 3
                                  ) {
                                    var b = o.getX(y),
                                      _ = o.getX(y + 1),
                                      w = o.getX(y + 2);
                                    (n = Ba(
                                      this,
                                      g,
                                      e,
                                      ba,
                                      s,
                                      l,
                                      u,
                                      c,
                                      h,
                                      b,
                                      _,
                                      w
                                    )) &&
                                      ((n.faceIndex = Math.floor(y / 3)),
                                      (n.face.materialIndex = v.materialIndex),
                                      t.push(n));
                                  }
                              else
                                for (
                                  var S = Math.max(0, p.start),
                                    E = Math.min(o.count, p.start + p.count);
                                  S < E;
                                  S += 3
                                ) {
                                  var M = o.getX(S),
                                    A = o.getX(S + 1),
                                    T = o.getX(S + 2);
                                  (n = Ba(
                                    this,
                                    r,
                                    e,
                                    ba,
                                    s,
                                    l,
                                    u,
                                    c,
                                    h,
                                    M,
                                    A,
                                    T
                                  )) &&
                                    ((n.faceIndex = Math.floor(S / 3)),
                                    t.push(n));
                                }
                            else if (void 0 !== s)
                              if (Array.isArray(r))
                                for (var C = 0, k = d.length; C < k; C++)
                                  for (
                                    var P = d[C],
                                      L = r[P.materialIndex],
                                      R = Math.max(P.start, p.start),
                                      I = Math.min(
                                        P.start + P.count,
                                        p.start + p.count
                                      );
                                    R < I;
                                    R += 3
                                  )
                                    (n = Ba(
                                      this,
                                      L,
                                      e,
                                      ba,
                                      s,
                                      l,
                                      u,
                                      c,
                                      h,
                                      R,
                                      R + 1,
                                      R + 2
                                    )) &&
                                      ((n.faceIndex = Math.floor(R / 3)),
                                      (n.face.materialIndex = P.materialIndex),
                                      t.push(n));
                              else
                                for (
                                  var F = Math.max(0, p.start),
                                    N = Math.min(s.count, p.start + p.count);
                                  F < N;
                                  F += 3
                                )
                                  (n = Ba(
                                    this,
                                    r,
                                    e,
                                    ba,
                                    s,
                                    l,
                                    u,
                                    c,
                                    h,
                                    F,
                                    F + 1,
                                    F + 2
                                  )) &&
                                    ((n.faceIndex = Math.floor(F / 3)),
                                    t.push(n));
                          } else
                            i.isGeometry &&
                              console.error(
                                "THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."
                              );
                      },
                    },
                  ]),
                  t
                );
              })(Sr);
            function Ba(e, t, n, i, r, a, o, s, l, u, c, h) {
              wa.fromBufferAttribute(r, u),
                Sa.fromBufferAttribute(r, c),
                Ea.fromBufferAttribute(r, h);
              var d = e.morphTargetInfluences;
              if (t.morphTargets && a && d) {
                Ca.set(0, 0, 0), ka.set(0, 0, 0), Pa.set(0, 0, 0);
                for (var p = 0, f = a.length; p < f; p++) {
                  var m = d[p],
                    v = a[p];
                  0 !== m &&
                    (Ma.fromBufferAttribute(v, u),
                    Aa.fromBufferAttribute(v, c),
                    Ta.fromBufferAttribute(v, h),
                    o
                      ? (Ca.addScaledVector(Ma, m),
                        ka.addScaledVector(Aa, m),
                        Pa.addScaledVector(Ta, m))
                      : (Ca.addScaledVector(Ma.sub(wa), m),
                        ka.addScaledVector(Aa.sub(Sa), m),
                        Pa.addScaledVector(Ta.sub(Ea), m)));
                }
                wa.add(Ca), Sa.add(ka), Ea.add(Pa);
              }
              e.isSkinnedMesh &&
                (e.boneTransform(u, wa),
                e.boneTransform(c, Sa),
                e.boneTransform(h, Ea));
              var g = (function (e, t, n, i, r, a, o, s) {
                if (
                  null ===
                  (t.side === C
                    ? i.intersectTriangle(o, a, r, !0, s)
                    : i.intersectTriangle(r, a, o, t.side !== k, s))
                )
                  return null;
                Na.copy(s), Na.applyMatrix4(e.matrixWorld);
                var l = n.ray.origin.distanceTo(Na);
                return l < n.near || l > n.far
                  ? null
                  : { distance: l, point: Na.clone(), object: e };
              })(e, t, n, i, wa, Sa, Ea, Fa);
              if (g) {
                s &&
                  (La.fromBufferAttribute(s, u),
                  Ra.fromBufferAttribute(s, c),
                  Ia.fromBufferAttribute(s, h),
                  (g.uv = Dr.getUV(Fa, wa, Sa, Ea, La, Ra, Ia, new ui()))),
                  l &&
                    (La.fromBufferAttribute(l, u),
                    Ra.fromBufferAttribute(l, c),
                    Ia.fromBufferAttribute(l, h),
                    (g.uv2 = Dr.getUV(Fa, wa, Sa, Ea, La, Ra, Ia, new ui())));
                var y = {
                  a: u,
                  b: c,
                  c: h,
                  normal: new _i(),
                  materialIndex: 0,
                };
                Dr.getNormal(wa, Sa, Ea, y.normal), (g.face = y);
              }
              return g;
            }
            Oa.prototype.isMesh = !0;
            var Da = (function (e) {
              function t() {
                var e,
                  n =
                    arguments.length > 0 && void 0 !== arguments[0]
                      ? arguments[0]
                      : 1,
                  i =
                    arguments.length > 1 && void 0 !== arguments[1]
                      ? arguments[1]
                      : 1,
                  r =
                    arguments.length > 2 && void 0 !== arguments[2]
                      ? arguments[2]
                      : 1,
                  a =
                    arguments.length > 3 && void 0 !== arguments[3]
                      ? arguments[3]
                      : 1,
                  o =
                    arguments.length > 4 && void 0 !== arguments[4]
                      ? arguments[4]
                      : 1,
                  s =
                    arguments.length > 5 && void 0 !== arguments[5]
                      ? arguments[5]
                      : 1;
                f(this, t),
                  ((e = c(this, h(t).call(this))).type = "BoxGeometry"),
                  (e.parameters = {
                    width: n,
                    height: i,
                    depth: r,
                    widthSegments: a,
                    heightSegments: o,
                    depthSegments: s,
                  });
                var l = d(e);
                (a = Math.floor(a)), (o = Math.floor(o)), (s = Math.floor(s));
                var u = [],
                  p = [],
                  m = [],
                  v = [],
                  g = 0,
                  y = 0;
                function x(e, t, n, i, r, a, o, s, c, h, d) {
                  for (
                    var f = a / c,
                      x = o / h,
                      b = a / 2,
                      _ = o / 2,
                      w = s / 2,
                      S = c + 1,
                      E = h + 1,
                      M = 0,
                      A = 0,
                      T = new _i(),
                      C = 0;
                    C < E;
                    C++
                  )
                    for (var k = C * x - _, P = 0; P < S; P++) {
                      var L = P * f - b;
                      (T[e] = L * i),
                        (T[t] = k * r),
                        (T[n] = w),
                        p.push(T.x, T.y, T.z),
                        (T[e] = 0),
                        (T[t] = 0),
                        (T[n] = s > 0 ? 1 : -1),
                        m.push(T.x, T.y, T.z),
                        v.push(P / c),
                        v.push(1 - C / h),
                        (M += 1);
                    }
                  for (var R = 0; R < h; R++)
                    for (var I = 0; I < c; I++) {
                      var F = g + I + S * R,
                        N = g + I + S * (R + 1),
                        O = g + (I + 1) + S * (R + 1),
                        B = g + (I + 1) + S * R;
                      u.push(F, N, B), u.push(N, O, B), (A += 6);
                    }
                  l.addGroup(y, A, d), (y += A), (g += M);
                }
                return (
                  x("z", "y", "x", -1, -1, r, i, n, s, o, 0),
                  x("z", "y", "x", 1, -1, r, i, -n, s, o, 1),
                  x("x", "z", "y", 1, 1, n, r, i, a, s, 2),
                  x("x", "z", "y", 1, -1, n, r, -i, a, s, 3),
                  x("x", "y", "z", 1, -1, n, i, r, a, o, 4),
                  x("x", "y", "z", -1, -1, n, i, -r, a, o, 5),
                  e.setIndex(u),
                  e.setAttribute("position", new oa(p, 3)),
                  e.setAttribute("normal", new oa(m, 3)),
                  e.setAttribute("uv", new oa(v, 2)),
                  e
                );
              }
              return p(t, e), t;
            })(ya);
            function Va(e) {
              var t = {};
              for (var n in e)
                for (var i in ((t[n] = {}), e[n])) {
                  var r = e[n][i];
                  r &&
                  (r.isColor ||
                    r.isMatrix3 ||
                    r.isMatrix4 ||
                    r.isVector2 ||
                    r.isVector3 ||
                    r.isVector4 ||
                    r.isTexture ||
                    r.isQuaternion)
                    ? (t[n][i] = r.clone())
                    : Array.isArray(r)
                    ? (t[n][i] = r.slice())
                    : (t[n][i] = r);
                }
              return t;
            }
            function Ua(e) {
              for (var t = {}, n = 0; n < e.length; n++) {
                var i = Va(e[n]);
                for (var r in i) t[r] = i[r];
              }
              return t;
            }
            var za = { clone: Va, merge: Ua },
              ja = (function (e) {
                function t(e) {
                  var n;
                  return (
                    f(this, t),
                    ((n = c(this, h(t).call(this))).type = "ShaderMaterial"),
                    (n.defines = {}),
                    (n.uniforms = {}),
                    (n.vertexShader =
                      "void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}"),
                    (n.fragmentShader =
                      "void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}"),
                    (n.linewidth = 1),
                    (n.wireframe = !1),
                    (n.wireframeLinewidth = 1),
                    (n.fog = !1),
                    (n.lights = !1),
                    (n.clipping = !1),
                    (n.morphTargets = !1),
                    (n.morphNormals = !1),
                    (n.extensions = {
                      derivatives: !1,
                      fragDepth: !1,
                      drawBuffers: !1,
                      shaderTextureLOD: !1,
                    }),
                    (n.defaultAttributeValues = {
                      color: [1, 1, 1],
                      uv: [0, 0],
                      uv2: [0, 0],
                    }),
                    (n.index0AttributeName = void 0),
                    (n.uniformsNeedUpdate = !1),
                    (n.glslVersion = null),
                    void 0 !== e &&
                      (void 0 !== e.attributes &&
                        console.error(
                          "THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."
                        ),
                      n.setValues(e)),
                    n
                  );
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "copy",
                      value: function (e) {
                        return (
                          l(h(t.prototype), "copy", this).call(this, e),
                          (this.fragmentShader = e.fragmentShader),
                          (this.vertexShader = e.vertexShader),
                          (this.uniforms = Va(e.uniforms)),
                          (this.defines = Object.assign({}, e.defines)),
                          (this.wireframe = e.wireframe),
                          (this.wireframeLinewidth = e.wireframeLinewidth),
                          (this.lights = e.lights),
                          (this.clipping = e.clipping),
                          (this.morphTargets = e.morphTargets),
                          (this.morphNormals = e.morphNormals),
                          (this.extensions = Object.assign({}, e.extensions)),
                          (this.glslVersion = e.glslVersion),
                          this
                        );
                      },
                    },
                    {
                      key: "toJSON",
                      value: function (e) {
                        var n = l(h(t.prototype), "toJSON", this).call(this, e);
                        for (var i in ((n.glslVersion = this.glslVersion),
                        (n.uniforms = {}),
                        this.uniforms)) {
                          var r = this.uniforms[i].value;
                          r && r.isTexture
                            ? (n.uniforms[i] = {
                                type: "t",
                                value: r.toJSON(e).uuid,
                              })
                            : r && r.isColor
                            ? (n.uniforms[i] = { type: "c", value: r.getHex() })
                            : r && r.isVector2
                            ? (n.uniforms[i] = {
                                type: "v2",
                                value: r.toArray(),
                              })
                            : r && r.isVector3
                            ? (n.uniforms[i] = {
                                type: "v3",
                                value: r.toArray(),
                              })
                            : r && r.isVector4
                            ? (n.uniforms[i] = {
                                type: "v4",
                                value: r.toArray(),
                              })
                            : r && r.isMatrix3
                            ? (n.uniforms[i] = {
                                type: "m3",
                                value: r.toArray(),
                              })
                            : r && r.isMatrix4
                            ? (n.uniforms[i] = {
                                type: "m4",
                                value: r.toArray(),
                              })
                            : (n.uniforms[i] = { value: r });
                        }
                        Object.keys(this.defines).length > 0 &&
                          (n.defines = this.defines),
                          (n.vertexShader = this.vertexShader),
                          (n.fragmentShader = this.fragmentShader);
                        var a = {};
                        for (var o in this.extensions)
                          !0 === this.extensions[o] && (a[o] = !0);
                        return (
                          Object.keys(a).length > 0 && (n.extensions = a), n
                        );
                      },
                    },
                  ]),
                  t
                );
              })(Ur);
            ja.prototype.isShaderMaterial = !0;
            var Ga = (function (e) {
              function t() {
                var e;
                return (
                  f(this, t),
                  ((e = c(this, h(t).call(this))).type = "Camera"),
                  (e.matrixWorldInverse = new Ki()),
                  (e.projectionMatrix = new Ki()),
                  (e.projectionMatrixInverse = new Ki()),
                  e
                );
              }
              return (
                p(t, e),
                m(t, [
                  {
                    key: "copy",
                    value: function (e, n) {
                      return (
                        l(h(t.prototype), "copy", this).call(this, e, n),
                        this.matrixWorldInverse.copy(e.matrixWorldInverse),
                        this.projectionMatrix.copy(e.projectionMatrix),
                        this.projectionMatrixInverse.copy(
                          e.projectionMatrixInverse
                        ),
                        this
                      );
                    },
                  },
                  {
                    key: "getWorldDirection",
                    value: function (e) {
                      void 0 === e &&
                        (console.warn(
                          "THREE.Camera: .getWorldDirection() target is now required"
                        ),
                        (e = new _i())),
                        this.updateWorldMatrix(!0, !1);
                      var t = this.matrixWorld.elements;
                      return e.set(-t[8], -t[9], -t[10]).normalize();
                    },
                  },
                  {
                    key: "updateMatrixWorld",
                    value: function (e) {
                      l(h(t.prototype), "updateMatrixWorld", this).call(
                        this,
                        e
                      ),
                        this.matrixWorldInverse.copy(this.matrixWorld).invert();
                    },
                  },
                  {
                    key: "updateWorldMatrix",
                    value: function (e, n) {
                      l(h(t.prototype), "updateWorldMatrix", this).call(
                        this,
                        e,
                        n
                      ),
                        this.matrixWorldInverse.copy(this.matrixWorld).invert();
                    },
                  },
                  {
                    key: "clone",
                    value: function () {
                      return new this.constructor().copy(this);
                    },
                  },
                ]),
                t
              );
            })(Sr);
            Ga.prototype.isCamera = !0;
            var Ha = (function (e) {
              function t() {
                var e,
                  n =
                    arguments.length > 0 && void 0 !== arguments[0]
                      ? arguments[0]
                      : 50,
                  i =
                    arguments.length > 1 && void 0 !== arguments[1]
                      ? arguments[1]
                      : 1,
                  r =
                    arguments.length > 2 && void 0 !== arguments[2]
                      ? arguments[2]
                      : 0.1,
                  a =
                    arguments.length > 3 && void 0 !== arguments[3]
                      ? arguments[3]
                      : 2e3;
                return (
                  f(this, t),
                  ((e = c(this, h(t).call(this))).type = "PerspectiveCamera"),
                  (e.fov = n),
                  (e.zoom = 1),
                  (e.near = r),
                  (e.far = a),
                  (e.focus = 10),
                  (e.aspect = i),
                  (e.view = null),
                  (e.filmGauge = 35),
                  (e.filmOffset = 0),
                  e.updateProjectionMatrix(),
                  e
                );
              }
              return (
                p(t, e),
                m(t, [
                  {
                    key: "copy",
                    value: function (e, n) {
                      return (
                        l(h(t.prototype), "copy", this).call(this, e, n),
                        (this.fov = e.fov),
                        (this.zoom = e.zoom),
                        (this.near = e.near),
                        (this.far = e.far),
                        (this.focus = e.focus),
                        (this.aspect = e.aspect),
                        (this.view =
                          null === e.view ? null : Object.assign({}, e.view)),
                        (this.filmGauge = e.filmGauge),
                        (this.filmOffset = e.filmOffset),
                        this
                      );
                    },
                  },
                  {
                    key: "setFocalLength",
                    value: function (e) {
                      var t = (0.5 * this.getFilmHeight()) / e;
                      (this.fov = 2 * ei * Math.atan(t)),
                        this.updateProjectionMatrix();
                    },
                  },
                  {
                    key: "getFocalLength",
                    value: function () {
                      var e = Math.tan(0.5 * $n * this.fov);
                      return (0.5 * this.getFilmHeight()) / e;
                    },
                  },
                  {
                    key: "getEffectiveFOV",
                    value: function () {
                      return (
                        2 *
                        ei *
                        Math.atan(Math.tan(0.5 * $n * this.fov) / this.zoom)
                      );
                    },
                  },
                  {
                    key: "getFilmWidth",
                    value: function () {
                      return this.filmGauge * Math.min(this.aspect, 1);
                    },
                  },
                  {
                    key: "getFilmHeight",
                    value: function () {
                      return this.filmGauge / Math.max(this.aspect, 1);
                    },
                  },
                  {
                    key: "setViewOffset",
                    value: function (e, t, n, i, r, a) {
                      (this.aspect = e / t),
                        null === this.view &&
                          (this.view = {
                            enabled: !0,
                            fullWidth: 1,
                            fullHeight: 1,
                            offsetX: 0,
                            offsetY: 0,
                            width: 1,
                            height: 1,
                          }),
                        (this.view.enabled = !0),
                        (this.view.fullWidth = e),
                        (this.view.fullHeight = t),
                        (this.view.offsetX = n),
                        (this.view.offsetY = i),
                        (this.view.width = r),
                        (this.view.height = a),
                        this.updateProjectionMatrix();
                    },
                  },
                  {
                    key: "clearViewOffset",
                    value: function () {
                      null !== this.view && (this.view.enabled = !1),
                        this.updateProjectionMatrix();
                    },
                  },
                  {
                    key: "updateProjectionMatrix",
                    value: function () {
                      var e = this.near,
                        t = (e * Math.tan(0.5 * $n * this.fov)) / this.zoom,
                        n = 2 * t,
                        i = this.aspect * n,
                        r = -0.5 * i,
                        a = this.view;
                      if (null !== this.view && this.view.enabled) {
                        var o = a.fullWidth,
                          s = a.fullHeight;
                        (r += (a.offsetX * i) / o),
                          (t -= (a.offsetY * n) / s),
                          (i *= a.width / o),
                          (n *= a.height / s);
                      }
                      var l = this.filmOffset;
                      0 !== l && (r += (e * l) / this.getFilmWidth()),
                        this.projectionMatrix.makePerspective(
                          r,
                          r + i,
                          t,
                          t - n,
                          e,
                          this.far
                        ),
                        this.projectionMatrixInverse
                          .copy(this.projectionMatrix)
                          .invert();
                    },
                  },
                  {
                    key: "toJSON",
                    value: function (e) {
                      var n = l(h(t.prototype), "toJSON", this).call(this, e);
                      return (
                        (n.object.fov = this.fov),
                        (n.object.zoom = this.zoom),
                        (n.object.near = this.near),
                        (n.object.far = this.far),
                        (n.object.focus = this.focus),
                        (n.object.aspect = this.aspect),
                        null !== this.view &&
                          (n.object.view = Object.assign({}, this.view)),
                        (n.object.filmGauge = this.filmGauge),
                        (n.object.filmOffset = this.filmOffset),
                        n
                      );
                    },
                  },
                ]),
                t
              );
            })(Ga);
            Ha.prototype.isPerspectiveCamera = !0;
            var Wa = (function (e) {
                function t(e, n, i) {
                  var r;
                  if (
                    (f(this, t),
                    ((r = c(this, h(t).call(this))).type = "CubeCamera"),
                    !0 !== i.isWebGLCubeRenderTarget)
                  )
                    return (
                      console.error(
                        "THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter."
                      ),
                      c(r)
                    );
                  r.renderTarget = i;
                  var a = new Ha(90, 1, e, n);
                  (a.layers = r.layers),
                    a.up.set(0, -1, 0),
                    a.lookAt(new _i(1, 0, 0)),
                    r.add(a);
                  var o = new Ha(90, 1, e, n);
                  (o.layers = r.layers),
                    o.up.set(0, -1, 0),
                    o.lookAt(new _i(-1, 0, 0)),
                    r.add(o);
                  var s = new Ha(90, 1, e, n);
                  (s.layers = r.layers),
                    s.up.set(0, 0, 1),
                    s.lookAt(new _i(0, 1, 0)),
                    r.add(s);
                  var l = new Ha(90, 1, e, n);
                  (l.layers = r.layers),
                    l.up.set(0, 0, -1),
                    l.lookAt(new _i(0, -1, 0)),
                    r.add(l);
                  var u = new Ha(90, 1, e, n);
                  (u.layers = r.layers),
                    u.up.set(0, -1, 0),
                    u.lookAt(new _i(0, 0, 1)),
                    r.add(u);
                  var d = new Ha(90, 1, e, n);
                  return (
                    (d.layers = r.layers),
                    d.up.set(0, -1, 0),
                    d.lookAt(new _i(0, 0, -1)),
                    r.add(d),
                    r
                  );
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "update",
                      value: function (e, t) {
                        null === this.parent && this.updateMatrixWorld();
                        var n = this.renderTarget,
                          i = s(this.children, 6),
                          r = i[0],
                          a = i[1],
                          o = i[2],
                          l = i[3],
                          u = i[4],
                          c = i[5],
                          h = e.xr.enabled,
                          d = e.getRenderTarget();
                        e.xr.enabled = !1;
                        var p = n.texture.generateMipmaps;
                        (n.texture.generateMipmaps = !1),
                          e.setRenderTarget(n, 0),
                          e.render(t, r),
                          e.setRenderTarget(n, 1),
                          e.render(t, a),
                          e.setRenderTarget(n, 2),
                          e.render(t, o),
                          e.setRenderTarget(n, 3),
                          e.render(t, l),
                          e.setRenderTarget(n, 4),
                          e.render(t, u),
                          (n.texture.generateMipmaps = p),
                          e.setRenderTarget(n, 5),
                          e.render(t, c),
                          e.setRenderTarget(d),
                          (e.xr.enabled = h);
                      },
                    },
                  ]),
                  t
                );
              })(Sr),
              Ya = (function (e) {
                function t(e, n, i, r, a, o, s, l, u, d) {
                  var p;
                  return (
                    f(this, t),
                    (e = void 0 !== e ? e : []),
                    (n = void 0 !== n ? n : ye),
                    (s = void 0 !== s ? s : Ze),
                    ((p = c(
                      this,
                      h(t).call(this, e, n, i, r, a, o, s, l, u, d)
                    ))._needsFlipEnvMap = !0),
                    (p.flipY = !1),
                    p
                  );
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "images",
                      get: function () {
                        return this.image;
                      },
                      set: function (e) {
                        this.image = e;
                      },
                    },
                  ]),
                  t
                );
              })(fi);
            Ya.prototype.isCubeTexture = !0;
            var qa = (function (e) {
              function t(e, n, i) {
                var r;
                return (
                  f(this, t),
                  Number.isInteger(n) &&
                    (console.warn(
                      "THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"
                    ),
                    (n = i)),
                  (r = c(this, h(t).call(this, e, e, n))),
                  (n = n || {}),
                  (r.texture = new Ya(
                    void 0,
                    n.mapping,
                    n.wrapS,
                    n.wrapT,
                    n.magFilter,
                    n.minFilter,
                    n.format,
                    n.type,
                    n.anisotropy,
                    n.encoding
                  )),
                  (r.texture.generateMipmaps =
                    void 0 !== n.generateMipmaps && n.generateMipmaps),
                  (r.texture.minFilter =
                    void 0 !== n.minFilter ? n.minFilter : Re),
                  (r.texture._needsFlipEnvMap = !1),
                  r
                );
              }
              return (
                p(t, e),
                m(t, [
                  {
                    key: "fromEquirectangularTexture",
                    value: function (e, t) {
                      (this.texture.type = t.type),
                        (this.texture.format = Je),
                        (this.texture.encoding = t.encoding),
                        (this.texture.generateMipmaps = t.generateMipmaps),
                        (this.texture.minFilter = t.minFilter),
                        (this.texture.magFilter = t.magFilter);
                      var n = { tEquirect: { value: null } },
                        i =
                          "\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",
                        r =
                          "\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",
                        a = new Da(5, 5, 5),
                        o = new ja({
                          name: "CubemapFromEquirect",
                          uniforms: Va(n),
                          vertexShader: i,
                          fragmentShader: r,
                          side: C,
                          blending: R,
                        });
                      o.uniforms.tEquirect.value = t;
                      var s = new Oa(a, o),
                        l = t.minFilter;
                      return (
                        t.minFilter === Ne && (t.minFilter = Re),
                        new Wa(1, 10, this).update(e, s),
                        (t.minFilter = l),
                        s.geometry.dispose(),
                        s.material.dispose(),
                        this
                      );
                    },
                  },
                  {
                    key: "clear",
                    value: function (e, t, n, i) {
                      for (var r = e.getRenderTarget(), a = 0; a < 6; a++)
                        e.setRenderTarget(this, a), e.clear(t, n, i);
                      e.setRenderTarget(r);
                    },
                  },
                ]),
                t
              );
            })(gi);
            qa.prototype.isWebGLCubeRenderTarget = !0;
            var Xa = new Gi(),
              Qa = new _i(),
              Za = (function () {
                function e() {
                  var t =
                      arguments.length > 0 && void 0 !== arguments[0]
                        ? arguments[0]
                        : new Tr(),
                    n =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : new Tr(),
                    i =
                      arguments.length > 2 && void 0 !== arguments[2]
                        ? arguments[2]
                        : new Tr(),
                    r =
                      arguments.length > 3 && void 0 !== arguments[3]
                        ? arguments[3]
                        : new Tr(),
                    a =
                      arguments.length > 4 && void 0 !== arguments[4]
                        ? arguments[4]
                        : new Tr(),
                    o =
                      arguments.length > 5 && void 0 !== arguments[5]
                        ? arguments[5]
                        : new Tr();
                  f(this, e), (this.planes = [t, n, i, r, a, o]);
                }
                return (
                  m(e, [
                    {
                      key: "set",
                      value: function (e, t, n, i, r, a) {
                        var o = this.planes;
                        return (
                          o[0].copy(e),
                          o[1].copy(t),
                          o[2].copy(n),
                          o[3].copy(i),
                          o[4].copy(r),
                          o[5].copy(a),
                          this
                        );
                      },
                    },
                    {
                      key: "copy",
                      value: function (e) {
                        for (var t = this.planes, n = 0; n < 6; n++)
                          t[n].copy(e.planes[n]);
                        return this;
                      },
                    },
                    {
                      key: "setFromProjectionMatrix",
                      value: function (e) {
                        var t = this.planes,
                          n = e.elements,
                          i = n[0],
                          r = n[1],
                          a = n[2],
                          o = n[3],
                          s = n[4],
                          l = n[5],
                          u = n[6],
                          c = n[7],
                          h = n[8],
                          d = n[9],
                          p = n[10],
                          f = n[11],
                          m = n[12],
                          v = n[13],
                          g = n[14],
                          y = n[15];
                        return (
                          t[0]
                            .setComponents(o - i, c - s, f - h, y - m)
                            .normalize(),
                          t[1]
                            .setComponents(o + i, c + s, f + h, y + m)
                            .normalize(),
                          t[2]
                            .setComponents(o + r, c + l, f + d, y + v)
                            .normalize(),
                          t[3]
                            .setComponents(o - r, c - l, f - d, y - v)
                            .normalize(),
                          t[4]
                            .setComponents(o - a, c - u, f - p, y - g)
                            .normalize(),
                          t[5]
                            .setComponents(o + a, c + u, f + p, y + g)
                            .normalize(),
                          this
                        );
                      },
                    },
                    {
                      key: "intersectsObject",
                      value: function (e) {
                        var t = e.geometry;
                        return (
                          null === t.boundingSphere &&
                            t.computeBoundingSphere(),
                          Xa.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),
                          this.intersectsSphere(Xa)
                        );
                      },
                    },
                    {
                      key: "intersectsSprite",
                      value: function (e) {
                        return (
                          Xa.center.set(0, 0, 0),
                          (Xa.radius = 0.7071067811865476),
                          Xa.applyMatrix4(e.matrixWorld),
                          this.intersectsSphere(Xa)
                        );
                      },
                    },
                    {
                      key: "intersectsSphere",
                      value: function (e) {
                        for (
                          var t = this.planes,
                            n = e.center,
                            i = -e.radius,
                            r = 0;
                          r < 6;
                          r++
                        )
                          if (t[r].distanceToPoint(n) < i) return !1;
                        return !0;
                      },
                    },
                    {
                      key: "intersectsBox",
                      value: function (e) {
                        for (var t = this.planes, n = 0; n < 6; n++) {
                          var i = t[n];
                          if (
                            ((Qa.x = i.normal.x > 0 ? e.max.x : e.min.x),
                            (Qa.y = i.normal.y > 0 ? e.max.y : e.min.y),
                            (Qa.z = i.normal.z > 0 ? e.max.z : e.min.z),
                            i.distanceToPoint(Qa) < 0)
                          )
                            return !1;
                        }
                        return !0;
                      },
                    },
                    {
                      key: "containsPoint",
                      value: function (e) {
                        for (var t = this.planes, n = 0; n < 6; n++)
                          if (t[n].distanceToPoint(e) < 0) return !1;
                        return !0;
                      },
                    },
                    {
                      key: "clone",
                      value: function () {
                        return new this.constructor().copy(this);
                      },
                    },
                  ]),
                  e
                );
              })();
            function Ja() {
              var e = null,
                t = !1,
                n = null,
                i = null;
              function r(t, a) {
                n(t, a), (i = e.requestAnimationFrame(r));
              }
              return {
                start: function () {
                  !0 !== t &&
                    null !== n &&
                    ((i = e.requestAnimationFrame(r)), (t = !0));
                },
                stop: function () {
                  e.cancelAnimationFrame(i), (t = !1);
                },
                setAnimationLoop: function (e) {
                  n = e;
                },
                setContext: function (t) {
                  e = t;
                },
              };
            }
            function Ka(e, t) {
              var n = t.isWebGL2,
                i = new WeakMap();
              return {
                get: function (e) {
                  return (
                    e.isInterleavedBufferAttribute && (e = e.data), i.get(e)
                  );
                },
                remove: function (t) {
                  t.isInterleavedBufferAttribute && (t = t.data);
                  var n = i.get(t);
                  n && (e.deleteBuffer(n.buffer), i.delete(t));
                },
                update: function (t, r) {
                  if (t.isGLBufferAttribute) {
                    var a = i.get(t);
                    (!a || a.version < t.version) &&
                      i.set(t, {
                        buffer: t.buffer,
                        type: t.type,
                        bytesPerElement: t.elementSize,
                        version: t.version,
                      });
                  } else {
                    t.isInterleavedBufferAttribute && (t = t.data);
                    var o = i.get(t);
                    void 0 === o
                      ? i.set(
                          t,
                          (function (t, i) {
                            var r = t.array,
                              a = t.usage,
                              o = e.createBuffer();
                            e.bindBuffer(i, o),
                              e.bufferData(i, r, a),
                              t.onUploadCallback();
                            var s = 5126;
                            return (
                              r instanceof Float32Array
                                ? (s = 5126)
                                : r instanceof Float64Array
                                ? console.warn(
                                    "THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."
                                  )
                                : r instanceof Uint16Array
                                ? t.isFloat16BufferAttribute
                                  ? n
                                    ? (s = 5131)
                                    : console.warn(
                                        "THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."
                                      )
                                  : (s = 5123)
                                : r instanceof Int16Array
                                ? (s = 5122)
                                : r instanceof Uint32Array
                                ? (s = 5125)
                                : r instanceof Int32Array
                                ? (s = 5124)
                                : r instanceof Int8Array
                                ? (s = 5120)
                                : (r instanceof Uint8Array ||
                                    r instanceof Uint8ClampedArray) &&
                                  (s = 5121),
                              {
                                buffer: o,
                                type: s,
                                bytesPerElement: r.BYTES_PER_ELEMENT,
                                version: t.version,
                              }
                            );
                          })(t, r)
                        )
                      : o.version < t.version &&
                        ((function (t, i, r) {
                          var a = i.array,
                            o = i.updateRange;
                          e.bindBuffer(r, t),
                            -1 === o.count
                              ? e.bufferSubData(r, 0, a)
                              : (n
                                  ? e.bufferSubData(
                                      r,
                                      o.offset * a.BYTES_PER_ELEMENT,
                                      a,
                                      o.offset,
                                      o.count
                                    )
                                  : e.bufferSubData(
                                      r,
                                      o.offset * a.BYTES_PER_ELEMENT,
                                      a.subarray(o.offset, o.offset + o.count)
                                    ),
                                (o.count = -1));
                        })(o.buffer, t, r),
                        (o.version = t.version));
                  }
                },
              };
            }
            var $a = (function (e) {
                function t() {
                  var e,
                    n =
                      arguments.length > 0 && void 0 !== arguments[0]
                        ? arguments[0]
                        : 1,
                    i =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : 1,
                    r =
                      arguments.length > 2 && void 0 !== arguments[2]
                        ? arguments[2]
                        : 1,
                    a =
                      arguments.length > 3 && void 0 !== arguments[3]
                        ? arguments[3]
                        : 1;
                  f(this, t),
                    ((e = c(this, h(t).call(this))).type = "PlaneGeometry"),
                    (e.parameters = {
                      width: n,
                      height: i,
                      widthSegments: r,
                      heightSegments: a,
                    });
                  for (
                    var o = n / 2,
                      s = i / 2,
                      l = Math.floor(r),
                      u = Math.floor(a),
                      d = l + 1,
                      p = u + 1,
                      m = n / l,
                      v = i / u,
                      g = [],
                      y = [],
                      x = [],
                      b = [],
                      _ = 0;
                    _ < p;
                    _++
                  )
                    for (var w = _ * v - s, S = 0; S < d; S++) {
                      var E = S * m - o;
                      y.push(E, -w, 0),
                        x.push(0, 0, 1),
                        b.push(S / l),
                        b.push(1 - _ / u);
                    }
                  for (var M = 0; M < u; M++)
                    for (var A = 0; A < l; A++) {
                      var T = A + d * M,
                        C = A + d * (M + 1),
                        k = A + 1 + d * (M + 1),
                        P = A + 1 + d * M;
                      g.push(T, C, P), g.push(C, k, P);
                    }
                  return (
                    e.setIndex(g),
                    e.setAttribute("position", new oa(y, 3)),
                    e.setAttribute("normal", new oa(x, 3)),
                    e.setAttribute("uv", new oa(b, 2)),
                    e
                  );
                }
                return p(t, e), t;
              })(ya),
              eo = {
                alphamap_fragment:
                  "#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",
                alphamap_pars_fragment:
                  "#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",
                alphatest_fragment:
                  "#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",
                aomap_fragment:
                  "#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",
                aomap_pars_fragment:
                  "#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",
                begin_vertex: "vec3 transformed = vec3( position );",
                beginnormal_vertex:
                  "vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",
                bsdfs:
                  "vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",
                bumpmap_pars_fragment:
                  "#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",
                clipping_planes_fragment:
                  "#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",
                clipping_planes_pars_fragment:
                  "#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",
                clipping_planes_pars_vertex:
                  "#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",
                clipping_planes_vertex:
                  "#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",
                color_fragment:
                  "#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",
                color_pars_fragment:
                  "#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",
                color_pars_vertex:
                  "#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",
                color_vertex:
                  "#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",
                common:
                  "#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",
                cube_uv_reflection_fragment:
                  "#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",
                defaultnormal_vertex:
                  "vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",
                displacementmap_pars_vertex:
                  "#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",
                displacementmap_vertex:
                  "#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",
                emissivemap_fragment:
                  "#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",
                emissivemap_pars_fragment:
                  "#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",
                encodings_fragment:
                  "gl_FragColor = linearToOutputTexel( gl_FragColor );",
                encodings_pars_fragment:
                  "\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value ) {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",
                envmap_fragment:
                  "#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",
                envmap_common_pars_fragment:
                  "#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",
                envmap_pars_fragment:
                  "#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",
                envmap_pars_vertex:
                  "#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",
                envmap_physical_pars_fragment:
                  "#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",
                envmap_vertex:
                  "#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",
                fog_vertex:
                  "#ifdef USE_FOG\n\tfogDepth = - mvPosition.z;\n#endif",
                fog_pars_vertex:
                  "#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",
                fog_fragment:
                  "#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",
                fog_pars_fragment:
                  "#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",
                gradientmap_pars_fragment:
                  "#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",
                lightmap_fragment:
                  "#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif",
                lightmap_pars_fragment:
                  "#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",
                lights_lambert_vertex:
                  "vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",
                lights_pars_begin:
                  "uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",
                lights_toon_fragment:
                  "ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",
                lights_toon_pars_fragment:
                  "varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",
                lights_phong_fragment:
                  "BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",
                lights_phong_pars_fragment:
                  "varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",
                lights_physical_fragment:
                  "PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), rawDiffuseColor, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), rawDiffuseColor, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",
                lights_physical_pars_fragment:
                  "struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat specularRoughness;\n\tvec3 specularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",
                lights_fragment_begin:
                  "\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",
                lights_fragment_maps:
                  "#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",
                lights_fragment_end:
                  "#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",
                logdepthbuf_fragment:
                  "#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",
                logdepthbuf_pars_fragment:
                  "#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",
                logdepthbuf_pars_vertex:
                  "#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",
                logdepthbuf_vertex:
                  "#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",
                map_fragment:
                  "#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",
                map_pars_fragment:
                  "#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",
                map_particle_fragment:
                  "#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",
                map_particle_pars_fragment:
                  "#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",
                metalnessmap_fragment:
                  "float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",
                metalnessmap_pars_fragment:
                  "#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",
                morphnormal_vertex:
                  "#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",
                morphtarget_pars_vertex:
                  "#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\t\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\t\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",
                morphtarget_vertex:
                  "#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",
                normal_fragment_begin:
                  "float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",
                normal_fragment_maps:
                  "#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",
                normalmap_pars_fragment:
                  "#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",
                clearcoat_normal_fragment_begin:
                  "#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",
                clearcoat_normal_fragment_maps:
                  "#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",
                clearcoat_pars_fragment:
                  "#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",
                packing:
                  "vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",
                premultiplied_alpha_fragment:
                  "#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",
                project_vertex:
                  "vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",
                dithering_fragment:
                  "#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",
                dithering_pars_fragment:
                  "#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",
                roughnessmap_fragment:
                  "float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",
                roughnessmap_pars_fragment:
                  "#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",
                shadowmap_pars_fragment:
                  "#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",
                shadowmap_pars_vertex:
                  "#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",
                shadowmap_vertex:
                  "#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",
                shadowmask_pars_fragment:
                  "float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",
                skinbase_vertex:
                  "#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",
                skinning_pars_vertex:
                  "#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",
                skinning_vertex:
                  "#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",
                skinnormal_vertex:
                  "#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",
                specularmap_fragment:
                  "float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",
                specularmap_pars_fragment:
                  "#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",
                tonemapping_fragment:
                  "#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",
                tonemapping_pars_fragment:
                  "#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",
                transmission_fragment:
                  "#ifdef USE_TRANSMISSION\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttotalTransmission *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSNMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition.xyz / vWorldPosition.w;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n\tfloat ior = ( 1.0 + 0.4 * reflectivity ) / ( 1.0 - 0.4 * reflectivity );\n\tvec3 f0 = vec3( pow( ior - 1.0, 2.0 ) / pow( ior + 1.0, 2.0 ) );\n\tvec3 f90 = vec3( 1.0 );\n\tvec3 f_transmission = totalTransmission * getIBLVolumeRefraction(\n\t\tnormal, v, viewDir, roughnessFactor, diffuseColor.rgb, f0, f90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance);\n\tdiffuseColor.rgb = mix( diffuseColor.rgb, f_transmission, totalTransmission );\n#endif",
                transmission_pars_fragment:
                  "#ifdef USE_TRANSMISSION\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec4 vWorldPosition;\n\tvec3 getVolumeTransmissionRay(vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix) {\n\t\tvec3 refractionVector = refract(-v, normalize(n), 1.0 / ior);\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length(vec3(modelMatrix[0].xyz));\n\t\tmodelScale.y = length(vec3(modelMatrix[1].xyz));\n\t\tmodelScale.z = length(vec3(modelMatrix[2].xyz));\n\t\treturn normalize(refractionVector) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness(float roughness, float ior) {\n\t\treturn roughness * clamp(ior * 2.0 - 2.0, 0.0, 1.0);\n\t}\n\tvec3 getTransmissionSample(vec2 fragCoord, float roughness, float ior) {\n\t\tfloat framebufferLod = log2(transmissionSamplerSize.x) * applyIorToRoughness(roughness, ior);\n\t\treturn texture2DLodEXT(transmissionSamplerMap, fragCoord.xy, framebufferLod).rgb;\n\t}\n\tvec3 applyVolumeAttenuation(vec3 radiance, float transmissionDistance, vec3 attenuationColor, float attenuationDistance) {\n\t\tif (attenuationDistance == 0.0) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log(attenuationColor) / attenuationDistance;\n\t\t\tvec3 transmittance = exp(-attenuationCoefficient * transmissionDistance);\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec3 getIBLVolumeRefraction(vec3 n, vec3 v, vec3 viewDir, float perceptualRoughness, vec3 baseColor, vec3 f0, vec3 f90,\n\t\tvec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness, vec3 attenuationColor, float attenuationDistance) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay(n, v, thickness, ior, modelMatrix);\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4(refractedRayExit, 1.0);\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec3 transmittedLight = getTransmissionSample(refractionCoords, perceptualRoughness, ior);\n\t\tvec3 attenuatedColor = applyVolumeAttenuation(transmittedLight, length(transmissionRay), attenuationColor, attenuationDistance);\n\t\tfloat NdotV = saturate(dot(n, viewDir));\n\t\tvec2 brdf = integrateSpecularBRDF(NdotV, perceptualRoughness);\n\t\tvec3 specularColor = f0 * brdf.x + f90 * brdf.y;\n\t\treturn (1.0 - specularColor) * attenuatedColor * baseColor;\n\t}\n#endif",
                uv_pars_fragment:
                  "#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",
                uv_pars_vertex:
                  "#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",
                uv_vertex:
                  "#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",
                uv2_pars_fragment:
                  "#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",
                uv2_pars_vertex:
                  "#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",
                uv2_vertex:
                  "#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",
                worldpos_vertex:
                  "#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",
                background_frag:
                  "uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",
                background_vert:
                  "varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",
                cube_frag:
                  "#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",
                cube_vert:
                  "varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",
                depth_frag:
                  "#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",
                depth_vert:
                  "#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",
                distanceRGBA_frag:
                  "#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",
                distanceRGBA_vert:
                  "#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",
                equirect_frag:
                  "uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",
                equirect_vert:
                  "varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",
                linedashed_frag:
                  "uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",
                linedashed_vert:
                  "uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",
                meshbasic_frag:
                  "uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
                meshbasic_vert:
                  "#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",
                meshlambert_frag:
                  "uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
                meshlambert_vert:
                  "#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",
                meshmatcap_frag:
                  "#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
                meshmatcap_vert:
                  "#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",
                meshtoon_frag:
                  "#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
                meshtoon_vert:
                  "#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",
                meshphong_frag:
                  "#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
                meshphong_vert:
                  "#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",
                meshphysical_frag:
                  "#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform vec3 attenuationColor;\n\tuniform float attenuationDistance;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <transmission_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#ifdef USE_TRANSMISSION\n\t\tfloat totalTransmission = transmission;\n\t\tfloat thicknessFactor = thickness;\n\t#endif\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\tvec3 rawDiffuseColor = diffuseColor.rgb;\n\t#include <transmission_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
                meshphysical_vert:
                  "#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#ifdef USE_TRANSMISSION\n\tvarying vec4 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition;\n#endif\n}",
                normal_frag:
                  "#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",
                normal_vert:
                  "#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",
                points_frag:
                  "uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",
                points_vert:
                  "uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",
                shadow_frag:
                  "uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",
                shadow_vert:
                  "#include <common>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",
                sprite_frag:
                  "uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",
                sprite_vert:
                  "uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",
              },
              to = {
                common: {
                  diffuse: { value: new qr(16777215) },
                  opacity: { value: 1 },
                  map: { value: null },
                  uvTransform: { value: new hi() },
                  uv2Transform: { value: new hi() },
                  alphaMap: { value: null },
                },
                specularmap: { specularMap: { value: null } },
                envmap: {
                  envMap: { value: null },
                  flipEnvMap: { value: -1 },
                  reflectivity: { value: 1 },
                  refractionRatio: { value: 0.98 },
                  maxMipLevel: { value: 0 },
                },
                aomap: { aoMap: { value: null }, aoMapIntensity: { value: 1 } },
                lightmap: {
                  lightMap: { value: null },
                  lightMapIntensity: { value: 1 },
                },
                emissivemap: { emissiveMap: { value: null } },
                bumpmap: { bumpMap: { value: null }, bumpScale: { value: 1 } },
                normalmap: {
                  normalMap: { value: null },
                  normalScale: { value: new ui(1, 1) },
                },
                displacementmap: {
                  displacementMap: { value: null },
                  displacementScale: { value: 1 },
                  displacementBias: { value: 0 },
                },
                roughnessmap: { roughnessMap: { value: null } },
                metalnessmap: { metalnessMap: { value: null } },
                gradientmap: { gradientMap: { value: null } },
                fog: {
                  fogDensity: { value: 25e-5 },
                  fogNear: { value: 1 },
                  fogFar: { value: 2e3 },
                  fogColor: { value: new qr(16777215) },
                },
                lights: {
                  ambientLightColor: { value: [] },
                  lightProbe: { value: [] },
                  directionalLights: {
                    value: [],
                    properties: { direction: {}, color: {} },
                  },
                  directionalLightShadows: {
                    value: [],
                    properties: {
                      shadowBias: {},
                      shadowNormalBias: {},
                      shadowRadius: {},
                      shadowMapSize: {},
                    },
                  },
                  directionalShadowMap: { value: [] },
                  directionalShadowMatrix: { value: [] },
                  spotLights: {
                    value: [],
                    properties: {
                      color: {},
                      position: {},
                      direction: {},
                      distance: {},
                      coneCos: {},
                      penumbraCos: {},
                      decay: {},
                    },
                  },
                  spotLightShadows: {
                    value: [],
                    properties: {
                      shadowBias: {},
                      shadowNormalBias: {},
                      shadowRadius: {},
                      shadowMapSize: {},
                    },
                  },
                  spotShadowMap: { value: [] },
                  spotShadowMatrix: { value: [] },
                  pointLights: {
                    value: [],
                    properties: {
                      color: {},
                      position: {},
                      decay: {},
                      distance: {},
                    },
                  },
                  pointLightShadows: {
                    value: [],
                    properties: {
                      shadowBias: {},
                      shadowNormalBias: {},
                      shadowRadius: {},
                      shadowMapSize: {},
                      shadowCameraNear: {},
                      shadowCameraFar: {},
                    },
                  },
                  pointShadowMap: { value: [] },
                  pointShadowMatrix: { value: [] },
                  hemisphereLights: {
                    value: [],
                    properties: {
                      direction: {},
                      skyColor: {},
                      groundColor: {},
                    },
                  },
                  rectAreaLights: {
                    value: [],
                    properties: {
                      color: {},
                      position: {},
                      width: {},
                      height: {},
                    },
                  },
                  ltc_1: { value: null },
                  ltc_2: { value: null },
                },
                points: {
                  diffuse: { value: new qr(16777215) },
                  opacity: { value: 1 },
                  size: { value: 1 },
                  scale: { value: 1 },
                  map: { value: null },
                  alphaMap: { value: null },
                  uvTransform: { value: new hi() },
                },
                sprite: {
                  diffuse: { value: new qr(16777215) },
                  opacity: { value: 1 },
                  center: { value: new ui(0.5, 0.5) },
                  rotation: { value: 0 },
                  map: { value: null },
                  alphaMap: { value: null },
                  uvTransform: { value: new hi() },
                },
              },
              no = {
                basic: {
                  uniforms: Ua([
                    to.common,
                    to.specularmap,
                    to.envmap,
                    to.aomap,
                    to.lightmap,
                    to.fog,
                  ]),
                  vertexShader: eo.meshbasic_vert,
                  fragmentShader: eo.meshbasic_frag,
                },
                lambert: {
                  uniforms: Ua([
                    to.common,
                    to.specularmap,
                    to.envmap,
                    to.aomap,
                    to.lightmap,
                    to.emissivemap,
                    to.fog,
                    to.lights,
                    { emissive: { value: new qr(0) } },
                  ]),
                  vertexShader: eo.meshlambert_vert,
                  fragmentShader: eo.meshlambert_frag,
                },
                phong: {
                  uniforms: Ua([
                    to.common,
                    to.specularmap,
                    to.envmap,
                    to.aomap,
                    to.lightmap,
                    to.emissivemap,
                    to.bumpmap,
                    to.normalmap,
                    to.displacementmap,
                    to.fog,
                    to.lights,
                    {
                      emissive: { value: new qr(0) },
                      specular: { value: new qr(1118481) },
                      shininess: { value: 30 },
                    },
                  ]),
                  vertexShader: eo.meshphong_vert,
                  fragmentShader: eo.meshphong_frag,
                },
                standard: {
                  uniforms: Ua([
                    to.common,
                    to.envmap,
                    to.aomap,
                    to.lightmap,
                    to.emissivemap,
                    to.bumpmap,
                    to.normalmap,
                    to.displacementmap,
                    to.roughnessmap,
                    to.metalnessmap,
                    to.fog,
                    to.lights,
                    {
                      emissive: { value: new qr(0) },
                      roughness: { value: 1 },
                      metalness: { value: 0 },
                      envMapIntensity: { value: 1 },
                    },
                  ]),
                  vertexShader: eo.meshphysical_vert,
                  fragmentShader: eo.meshphysical_frag,
                },
                toon: {
                  uniforms: Ua([
                    to.common,
                    to.aomap,
                    to.lightmap,
                    to.emissivemap,
                    to.bumpmap,
                    to.normalmap,
                    to.displacementmap,
                    to.gradientmap,
                    to.fog,
                    to.lights,
                    { emissive: { value: new qr(0) } },
                  ]),
                  vertexShader: eo.meshtoon_vert,
                  fragmentShader: eo.meshtoon_frag,
                },
                matcap: {
                  uniforms: Ua([
                    to.common,
                    to.bumpmap,
                    to.normalmap,
                    to.displacementmap,
                    to.fog,
                    { matcap: { value: null } },
                  ]),
                  vertexShader: eo.meshmatcap_vert,
                  fragmentShader: eo.meshmatcap_frag,
                },
                points: {
                  uniforms: Ua([to.points, to.fog]),
                  vertexShader: eo.points_vert,
                  fragmentShader: eo.points_frag,
                },
                dashed: {
                  uniforms: Ua([
                    to.common,
                    to.fog,
                    {
                      scale: { value: 1 },
                      dashSize: { value: 1 },
                      totalSize: { value: 2 },
                    },
                  ]),
                  vertexShader: eo.linedashed_vert,
                  fragmentShader: eo.linedashed_frag,
                },
                depth: {
                  uniforms: Ua([to.common, to.displacementmap]),
                  vertexShader: eo.depth_vert,
                  fragmentShader: eo.depth_frag,
                },
                normal: {
                  uniforms: Ua([
                    to.common,
                    to.bumpmap,
                    to.normalmap,
                    to.displacementmap,
                    { opacity: { value: 1 } },
                  ]),
                  vertexShader: eo.normal_vert,
                  fragmentShader: eo.normal_frag,
                },
                sprite: {
                  uniforms: Ua([to.sprite, to.fog]),
                  vertexShader: eo.sprite_vert,
                  fragmentShader: eo.sprite_frag,
                },
                background: {
                  uniforms: {
                    uvTransform: { value: new hi() },
                    t2D: { value: null },
                  },
                  vertexShader: eo.background_vert,
                  fragmentShader: eo.background_frag,
                },
                cube: {
                  uniforms: Ua([to.envmap, { opacity: { value: 1 } }]),
                  vertexShader: eo.cube_vert,
                  fragmentShader: eo.cube_frag,
                },
                equirect: {
                  uniforms: { tEquirect: { value: null } },
                  vertexShader: eo.equirect_vert,
                  fragmentShader: eo.equirect_frag,
                },
                distanceRGBA: {
                  uniforms: Ua([
                    to.common,
                    to.displacementmap,
                    {
                      referencePosition: { value: new _i() },
                      nearDistance: { value: 1 },
                      farDistance: { value: 1e3 },
                    },
                  ]),
                  vertexShader: eo.distanceRGBA_vert,
                  fragmentShader: eo.distanceRGBA_frag,
                },
                shadow: {
                  uniforms: Ua([
                    to.lights,
                    to.fog,
                    { color: { value: new qr(0) }, opacity: { value: 1 } },
                  ]),
                  vertexShader: eo.shadow_vert,
                  fragmentShader: eo.shadow_frag,
                },
              };
            function io(e, t, n, i, r) {
              var a,
                o,
                s = new qr(0),
                l = 0,
                u = null,
                c = 0,
                h = null;
              function d(e, t) {
                n.buffers.color.setClear(e.r, e.g, e.b, t, r);
              }
              return {
                getClearColor: function () {
                  return s;
                },
                setClearColor: function (e) {
                  var t =
                    arguments.length > 1 && void 0 !== arguments[1]
                      ? arguments[1]
                      : 1;
                  s.set(e), d(s, (l = t));
                },
                getClearAlpha: function () {
                  return l;
                },
                setClearAlpha: function (e) {
                  d(s, (l = e));
                },
                render: function (n, r) {
                  var p = !1,
                    f = !0 === r.isScene ? r.background : null;
                  f && f.isTexture && (f = t.get(f));
                  var m = e.xr,
                    v = m.getSession && m.getSession();
                  v && "additive" === v.environmentBlendMode && (f = null),
                    null === f
                      ? d(s, l)
                      : f && f.isColor && (d(f, 1), (p = !0)),
                    (e.autoClear || p) &&
                      e.clear(
                        e.autoClearColor,
                        e.autoClearDepth,
                        e.autoClearStencil
                      ),
                    f && (f.isCubeTexture || f.mapping === we)
                      ? (void 0 === o &&
                          ((o = new Oa(
                            new Da(1, 1, 1),
                            new ja({
                              name: "BackgroundCubeMaterial",
                              uniforms: Va(no.cube.uniforms),
                              vertexShader: no.cube.vertexShader,
                              fragmentShader: no.cube.fragmentShader,
                              side: C,
                              depthTest: !1,
                              depthWrite: !1,
                              fog: !1,
                            })
                          )).geometry.deleteAttribute("normal"),
                          o.geometry.deleteAttribute("uv"),
                          (o.onBeforeRender = function (e, t, n) {
                            this.matrixWorld.copyPosition(n.matrixWorld);
                          }),
                          Object.defineProperty(o.material, "envMap", {
                            get: function () {
                              return this.uniforms.envMap.value;
                            },
                          }),
                          i.update(o)),
                        (o.material.uniforms.envMap.value = f),
                        (o.material.uniforms.flipEnvMap.value =
                          f.isCubeTexture && f._needsFlipEnvMap ? -1 : 1),
                        (u === f && c === f.version && h === e.toneMapping) ||
                          ((o.material.needsUpdate = !0),
                          (u = f),
                          (c = f.version),
                          (h = e.toneMapping)),
                        n.unshift(o, o.geometry, o.material, 0, 0, null))
                      : f &&
                        f.isTexture &&
                        (void 0 === a &&
                          ((a = new Oa(
                            new $a(2, 2),
                            new ja({
                              name: "BackgroundMaterial",
                              uniforms: Va(no.background.uniforms),
                              vertexShader: no.background.vertexShader,
                              fragmentShader: no.background.fragmentShader,
                              side: T,
                              depthTest: !1,
                              depthWrite: !1,
                              fog: !1,
                            })
                          )).geometry.deleteAttribute("normal"),
                          Object.defineProperty(a.material, "map", {
                            get: function () {
                              return this.uniforms.t2D.value;
                            },
                          }),
                          i.update(a)),
                        (a.material.uniforms.t2D.value = f),
                        !0 === f.matrixAutoUpdate && f.updateMatrix(),
                        a.material.uniforms.uvTransform.value.copy(f.matrix),
                        (u === f && c === f.version && h === e.toneMapping) ||
                          ((a.material.needsUpdate = !0),
                          (u = f),
                          (c = f.version),
                          (h = e.toneMapping)),
                        n.unshift(a, a.geometry, a.material, 0, 0, null));
                },
              };
            }
            function ro(e, t, n, i) {
              var r = e.getParameter(34921),
                a = i.isWebGL2 ? null : t.get("OES_vertex_array_object"),
                o = i.isWebGL2 || null !== a,
                s = {},
                l = d(null),
                u = l;
              function c(t) {
                return i.isWebGL2
                  ? e.bindVertexArray(t)
                  : a.bindVertexArrayOES(t);
              }
              function h(t) {
                return i.isWebGL2
                  ? e.deleteVertexArray(t)
                  : a.deleteVertexArrayOES(t);
              }
              function d(e) {
                for (var t = [], n = [], i = [], a = 0; a < r; a++)
                  (t[a] = 0), (n[a] = 0), (i[a] = 0);
                return {
                  geometry: null,
                  program: null,
                  wireframe: !1,
                  newAttributes: t,
                  enabledAttributes: n,
                  attributeDivisors: i,
                  object: e,
                  attributes: {},
                  index: null,
                };
              }
              function p() {
                for (var e = u.newAttributes, t = 0, n = e.length; t < n; t++)
                  e[t] = 0;
              }
              function f(e) {
                m(e, 0);
              }
              function m(n, r) {
                var a = u.newAttributes,
                  o = u.enabledAttributes,
                  s = u.attributeDivisors;
                (a[n] = 1),
                  0 === o[n] && (e.enableVertexAttribArray(n), (o[n] = 1)),
                  s[n] !== r &&
                    ((i.isWebGL2 ? e : t.get("ANGLE_instanced_arrays"))[
                      i.isWebGL2
                        ? "vertexAttribDivisor"
                        : "vertexAttribDivisorANGLE"
                    ](n, r),
                    (s[n] = r));
              }
              function v() {
                for (
                  var t = u.newAttributes,
                    n = u.enabledAttributes,
                    i = 0,
                    r = n.length;
                  i < r;
                  i++
                )
                  n[i] !== t[i] && (e.disableVertexAttribArray(i), (n[i] = 0));
              }
              function g(t, n, r, a, o, s) {
                !0 !== i.isWebGL2 || (5124 !== r && 5125 !== r)
                  ? e.vertexAttribPointer(t, n, r, a, o, s)
                  : e.vertexAttribIPointer(t, n, r, o, s);
              }
              function y() {
                x(), u !== l && c((u = l).object);
              }
              function x() {
                (l.geometry = null), (l.program = null), (l.wireframe = !1);
              }
              return {
                setup: function (r, l, h, y, x) {
                  var b = !1;
                  if (o) {
                    var _ = (function (t, n, r) {
                      var o = !0 === r.wireframe,
                        l = s[t.id];
                      void 0 === l && ((l = {}), (s[t.id] = l));
                      var u = l[n.id];
                      void 0 === u && ((u = {}), (l[n.id] = u));
                      var c = u[o];
                      return (
                        void 0 === c &&
                          ((c = d(
                            i.isWebGL2
                              ? e.createVertexArray()
                              : a.createVertexArrayOES()
                          )),
                          (u[o] = c)),
                        c
                      );
                    })(y, h, l);
                    u !== _ && c((u = _).object),
                      (b = (function (e, t) {
                        var n = u.attributes,
                          i = e.attributes,
                          r = 0;
                        for (var a in i) {
                          var o = n[a],
                            s = i[a];
                          if (void 0 === o) return !0;
                          if (o.attribute !== s) return !0;
                          if (o.data !== s.data) return !0;
                          r++;
                        }
                        return u.attributesNum !== r || u.index !== t;
                      })(y, x)) &&
                        (function (e, t) {
                          var n = {},
                            i = e.attributes,
                            r = 0;
                          for (var a in i) {
                            var o = i[a],
                              s = {};
                            (s.attribute = o),
                              o.data && (s.data = o.data),
                              (n[a] = s),
                              r++;
                          }
                          (u.attributes = n),
                            (u.attributesNum = r),
                            (u.index = t);
                        })(y, x);
                  } else {
                    var w = !0 === l.wireframe;
                    (u.geometry === y.id &&
                      u.program === h.id &&
                      u.wireframe === w) ||
                      ((u.geometry = y.id),
                      (u.program = h.id),
                      (u.wireframe = w),
                      (b = !0));
                  }
                  !0 === r.isInstancedMesh && (b = !0),
                    null !== x && n.update(x, 34963),
                    b &&
                      ((function (r, a, o, s) {
                        if (
                          !1 !== i.isWebGL2 ||
                          (!r.isInstancedMesh &&
                            !s.isInstancedBufferGeometry) ||
                          null !== t.get("ANGLE_instanced_arrays")
                        ) {
                          p();
                          var l = s.attributes,
                            u = o.getAttributes(),
                            c = a.defaultAttributeValues;
                          for (var h in u) {
                            var d = u[h];
                            if (d >= 0) {
                              var y = l[h];
                              if (void 0 !== y) {
                                var x = y.normalized,
                                  b = y.itemSize,
                                  _ = n.get(y);
                                if (void 0 === _) continue;
                                var w = _.buffer,
                                  S = _.type,
                                  E = _.bytesPerElement;
                                if (y.isInterleavedBufferAttribute) {
                                  var M = y.data,
                                    A = M.stride,
                                    T = y.offset;
                                  M && M.isInstancedInterleavedBuffer
                                    ? (m(d, M.meshPerAttribute),
                                      void 0 === s._maxInstanceCount &&
                                        (s._maxInstanceCount =
                                          M.meshPerAttribute * M.count))
                                    : f(d),
                                    e.bindBuffer(34962, w),
                                    g(d, b, S, x, A * E, T * E);
                                } else
                                  y.isInstancedBufferAttribute
                                    ? (m(d, y.meshPerAttribute),
                                      void 0 === s._maxInstanceCount &&
                                        (s._maxInstanceCount =
                                          y.meshPerAttribute * y.count))
                                    : f(d),
                                    e.bindBuffer(34962, w),
                                    g(d, b, S, x, 0, 0);
                              } else if ("instanceMatrix" === h) {
                                var C = n.get(r.instanceMatrix);
                                if (void 0 === C) continue;
                                var k = C.buffer,
                                  P = C.type;
                                m(d + 0, 1),
                                  m(d + 1, 1),
                                  m(d + 2, 1),
                                  m(d + 3, 1),
                                  e.bindBuffer(34962, k),
                                  e.vertexAttribPointer(d + 0, 4, P, !1, 64, 0),
                                  e.vertexAttribPointer(
                                    d + 1,
                                    4,
                                    P,
                                    !1,
                                    64,
                                    16
                                  ),
                                  e.vertexAttribPointer(
                                    d + 2,
                                    4,
                                    P,
                                    !1,
                                    64,
                                    32
                                  ),
                                  e.vertexAttribPointer(
                                    d + 3,
                                    4,
                                    P,
                                    !1,
                                    64,
                                    48
                                  );
                              } else if ("instanceColor" === h) {
                                var L = n.get(r.instanceColor);
                                if (void 0 === L) continue;
                                var R = L.buffer,
                                  I = L.type;
                                m(d, 1),
                                  e.bindBuffer(34962, R),
                                  e.vertexAttribPointer(d, 3, I, !1, 12, 0);
                              } else if (void 0 !== c) {
                                var F = c[h];
                                if (void 0 !== F)
                                  switch (F.length) {
                                    case 2:
                                      e.vertexAttrib2fv(d, F);
                                      break;
                                    case 3:
                                      e.vertexAttrib3fv(d, F);
                                      break;
                                    case 4:
                                      e.vertexAttrib4fv(d, F);
                                      break;
                                    default:
                                      e.vertexAttrib1fv(d, F);
                                  }
                              }
                            }
                          }
                          v();
                        }
                      })(r, l, h, y),
                      null !== x && e.bindBuffer(34963, n.get(x).buffer));
                },
                reset: y,
                resetDefaultState: x,
                dispose: function () {
                  for (var e in (y(), s)) {
                    var t = s[e];
                    for (var n in t) {
                      var i = t[n];
                      for (var r in i) h(i[r].object), delete i[r];
                      delete t[n];
                    }
                    delete s[e];
                  }
                },
                releaseStatesOfGeometry: function (e) {
                  if (void 0 !== s[e.id]) {
                    var t = s[e.id];
                    for (var n in t) {
                      var i = t[n];
                      for (var r in i) h(i[r].object), delete i[r];
                      delete t[n];
                    }
                    delete s[e.id];
                  }
                },
                releaseStatesOfProgram: function (e) {
                  for (var t in s) {
                    var n = s[t];
                    if (void 0 !== n[e.id]) {
                      var i = n[e.id];
                      for (var r in i) h(i[r].object), delete i[r];
                      delete n[e.id];
                    }
                  }
                },
                initAttributes: p,
                enableAttribute: f,
                disableUnusedAttributes: v,
              };
            }
            function ao(e, t, n, i) {
              var r,
                a = i.isWebGL2;
              (this.setMode = function (e) {
                r = e;
              }),
                (this.render = function (t, i) {
                  e.drawArrays(r, t, i), n.update(i, r, 1);
                }),
                (this.renderInstances = function (i, o, s) {
                  if (0 !== s) {
                    var l, u;
                    if (a) (l = e), (u = "drawArraysInstanced");
                    else if (
                      ((u = "drawArraysInstancedANGLE"),
                      null === (l = t.get("ANGLE_instanced_arrays")))
                    )
                      return void console.error(
                        "THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays."
                      );
                    l[u](r, i, o, s), n.update(o, r, s);
                  }
                });
            }
            function oo(e, t, n) {
              var i;
              function r(t) {
                if ("highp" === t) {
                  if (
                    e.getShaderPrecisionFormat(35633, 36338).precision > 0 &&
                    e.getShaderPrecisionFormat(35632, 36338).precision > 0
                  )
                    return "highp";
                  t = "mediump";
                }
                return "mediump" === t &&
                  e.getShaderPrecisionFormat(35633, 36337).precision > 0 &&
                  e.getShaderPrecisionFormat(35632, 36337).precision > 0
                  ? "mediump"
                  : "lowp";
              }
              var a =
                  ("undefined" !== typeof WebGL2RenderingContext &&
                    e instanceof WebGL2RenderingContext) ||
                  ("undefined" !== typeof WebGL2ComputeRenderingContext &&
                    e instanceof WebGL2ComputeRenderingContext),
                o = void 0 !== n.precision ? n.precision : "highp",
                s = r(o);
              s !== o &&
                (console.warn(
                  "THREE.WebGLRenderer:",
                  o,
                  "not supported, using",
                  s,
                  "instead."
                ),
                (o = s));
              var l = a || t.has("WEBGL_draw_buffers"),
                u = !0 === n.logarithmicDepthBuffer,
                c = e.getParameter(34930),
                h = e.getParameter(35660),
                d = e.getParameter(3379),
                p = e.getParameter(34076),
                f = e.getParameter(34921),
                m = e.getParameter(36347),
                v = e.getParameter(36348),
                g = e.getParameter(36349),
                y = h > 0,
                x = a || t.has("OES_texture_float");
              return {
                isWebGL2: a,
                drawBuffers: l,
                getMaxAnisotropy: function () {
                  if (void 0 !== i) return i;
                  if (!0 === t.has("EXT_texture_filter_anisotropic")) {
                    var n = t.get("EXT_texture_filter_anisotropic");
                    i = e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT);
                  } else i = 0;
                  return i;
                },
                getMaxPrecision: r,
                precision: o,
                logarithmicDepthBuffer: u,
                maxTextures: c,
                maxVertexTextures: h,
                maxTextureSize: d,
                maxCubemapSize: p,
                maxAttributes: f,
                maxVertexUniforms: m,
                maxVaryings: v,
                maxFragmentUniforms: g,
                vertexTextures: y,
                floatFragmentTextures: x,
                floatVertexTextures: y && x,
                maxSamples: a ? e.getParameter(36183) : 0,
              };
            }
            function so(e) {
              var t = this,
                n = null,
                i = 0,
                r = !1,
                a = !1,
                o = new Tr(),
                s = new hi(),
                l = { value: null, needsUpdate: !1 };
              function u() {
                l.value !== n && ((l.value = n), (l.needsUpdate = i > 0)),
                  (t.numPlanes = i),
                  (t.numIntersection = 0);
              }
              function c(e, n, i, r) {
                var a = null !== e ? e.length : 0,
                  u = null;
                if (0 !== a) {
                  if (((u = l.value), !0 !== r || null === u)) {
                    var c = i + 4 * a,
                      h = n.matrixWorldInverse;
                    s.getNormalMatrix(h),
                      (null === u || u.length < c) && (u = new Float32Array(c));
                    for (var d = 0, p = i; d !== a; ++d, p += 4)
                      o.copy(e[d]).applyMatrix4(h, s),
                        o.normal.toArray(u, p),
                        (u[p + 3] = o.constant);
                  }
                  (l.value = u), (l.needsUpdate = !0);
                }
                return (t.numPlanes = a), (t.numIntersection = 0), u;
              }
              (this.uniform = l),
                (this.numPlanes = 0),
                (this.numIntersection = 0),
                (this.init = function (e, t, a) {
                  var o = 0 !== e.length || t || 0 !== i || r;
                  return (r = t), (n = c(e, a, 0)), (i = e.length), o;
                }),
                (this.beginShadows = function () {
                  (a = !0), c(null);
                }),
                (this.endShadows = function () {
                  (a = !1), u();
                }),
                (this.setState = function (t, o, s) {
                  var h = t.clippingPlanes,
                    d = t.clipIntersection,
                    p = t.clipShadows,
                    f = e.get(t);
                  if (!r || null === h || 0 === h.length || (a && !p))
                    a ? c(null) : u();
                  else {
                    var m = a ? 0 : i,
                      v = 4 * m,
                      g = f.clippingState || null;
                    (l.value = g), (g = c(h, o, v, s));
                    for (var y = 0; y !== v; ++y) g[y] = n[y];
                    (f.clippingState = g),
                      (this.numIntersection = d ? this.numPlanes : 0),
                      (this.numPlanes += m);
                  }
                });
            }
            function lo(e) {
              var t = new WeakMap();
              function n(e, t) {
                return (
                  t === be ? (e.mapping = ye) : t === _e && (e.mapping = xe), e
                );
              }
              function i(e) {
                var n = e.target;
                n.removeEventListener("dispose", i);
                var r = t.get(n);
                void 0 !== r && (t.delete(n), r.dispose());
              }
              return {
                get: function (r) {
                  if (r && r.isTexture) {
                    var a = r.mapping;
                    if (a === be || a === _e) {
                      if (t.has(r)) return n(t.get(r).texture, r.mapping);
                      var o = r.image;
                      if (o && o.height > 0) {
                        var s = e.getRenderTarget(),
                          l = new qa(o.height / 2);
                        return (
                          l.fromEquirectangularTexture(e, r),
                          t.set(r, l),
                          e.setRenderTarget(s),
                          r.addEventListener("dispose", i),
                          n(l.texture, r.mapping)
                        );
                      }
                      return null;
                    }
                  }
                  return r;
                },
                dispose: function () {
                  t = new WeakMap();
                },
              };
            }
            function uo(e) {
              var t = {};
              function n(n) {
                if (void 0 !== t[n]) return t[n];
                var i;
                switch (n) {
                  case "WEBGL_depth_texture":
                    i =
                      e.getExtension("WEBGL_depth_texture") ||
                      e.getExtension("MOZ_WEBGL_depth_texture") ||
                      e.getExtension("WEBKIT_WEBGL_depth_texture");
                    break;
                  case "EXT_texture_filter_anisotropic":
                    i =
                      e.getExtension("EXT_texture_filter_anisotropic") ||
                      e.getExtension("MOZ_EXT_texture_filter_anisotropic") ||
                      e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");
                    break;
                  case "WEBGL_compressed_texture_s3tc":
                    i =
                      e.getExtension("WEBGL_compressed_texture_s3tc") ||
                      e.getExtension("MOZ_WEBGL_compressed_texture_s3tc") ||
                      e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");
                    break;
                  case "WEBGL_compressed_texture_pvrtc":
                    i =
                      e.getExtension("WEBGL_compressed_texture_pvrtc") ||
                      e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");
                    break;
                  default:
                    i = e.getExtension(n);
                }
                return (t[n] = i), i;
              }
              return {
                has: function (e) {
                  return null !== n(e);
                },
                init: function (e) {
                  e.isWebGL2
                    ? n("EXT_color_buffer_float")
                    : (n("WEBGL_depth_texture"),
                      n("OES_texture_float"),
                      n("OES_texture_half_float"),
                      n("OES_texture_half_float_linear"),
                      n("OES_standard_derivatives"),
                      n("OES_element_index_uint"),
                      n("OES_vertex_array_object"),
                      n("ANGLE_instanced_arrays")),
                    n("OES_texture_float_linear"),
                    n("EXT_color_buffer_half_float");
                },
                get: function (e) {
                  var t = n(e);
                  return (
                    null === t &&
                      console.warn(
                        "THREE.WebGLRenderer: " +
                          e +
                          " extension not supported."
                      ),
                    t
                  );
                },
              };
            }
            function co(e, t, n, i) {
              var r = {},
                a = new WeakMap();
              function o(e) {
                var s = e.target;
                for (var l in (null !== s.index && t.remove(s.index),
                s.attributes))
                  t.remove(s.attributes[l]);
                s.removeEventListener("dispose", o), delete r[s.id];
                var u = a.get(s);
                u && (t.remove(u), a.delete(s)),
                  i.releaseStatesOfGeometry(s),
                  !0 === s.isInstancedBufferGeometry &&
                    delete s._maxInstanceCount,
                  n.memory.geometries--;
              }
              function s(e) {
                var n = [],
                  i = e.index,
                  r = e.attributes.position,
                  o = 0;
                if (null !== i) {
                  var s = i.array;
                  o = i.version;
                  for (var l = 0, u = s.length; l < u; l += 3) {
                    var c = s[l + 0],
                      h = s[l + 1],
                      d = s[l + 2];
                    n.push(c, h, h, d, d, c);
                  }
                } else {
                  var p = r.array;
                  o = r.version;
                  for (var f = 0, m = p.length / 3 - 1; f < m; f += 3) {
                    var v = f + 0,
                      g = f + 1,
                      y = f + 2;
                    n.push(v, g, g, y, y, v);
                  }
                }
                var x = new (la(n) > 65535 ? ra : na)(n, 1);
                x.version = o;
                var b = a.get(e);
                b && t.remove(b), a.set(e, x);
              }
              return {
                get: function (e, t) {
                  return (
                    !0 === r[t.id] ||
                      (t.addEventListener("dispose", o),
                      (r[t.id] = !0),
                      n.memory.geometries++),
                    t
                  );
                },
                update: function (e) {
                  var n = e.attributes;
                  for (var i in n) t.update(n[i], 34962);
                  var r = e.morphAttributes;
                  for (var a in r)
                    for (var o = r[a], s = 0, l = o.length; s < l; s++)
                      t.update(o[s], 34962);
                },
                getWireframeAttribute: function (e) {
                  var t = a.get(e);
                  if (t) {
                    var n = e.index;
                    null !== n && t.version < n.version && s(e);
                  } else s(e);
                  return a.get(e);
                },
              };
            }
            function ho(e, t, n, i) {
              var r,
                a,
                o,
                s = i.isWebGL2;
              (this.setMode = function (e) {
                r = e;
              }),
                (this.setIndex = function (e) {
                  (a = e.type), (o = e.bytesPerElement);
                }),
                (this.render = function (t, i) {
                  e.drawElements(r, i, a, t * o), n.update(i, r, 1);
                }),
                (this.renderInstances = function (i, l, u) {
                  if (0 !== u) {
                    var c, h;
                    if (s) (c = e), (h = "drawElementsInstanced");
                    else if (
                      ((h = "drawElementsInstancedANGLE"),
                      null === (c = t.get("ANGLE_instanced_arrays")))
                    )
                      return void console.error(
                        "THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays."
                      );
                    c[h](r, l, a, i * o, u), n.update(l, r, u);
                  }
                });
            }
            function po(e) {
              var t = { frame: 0, calls: 0, triangles: 0, points: 0, lines: 0 };
              return {
                memory: { geometries: 0, textures: 0 },
                render: t,
                programs: null,
                autoReset: !0,
                reset: function () {
                  t.frame++,
                    (t.calls = 0),
                    (t.triangles = 0),
                    (t.points = 0),
                    (t.lines = 0);
                },
                update: function (e, n, i) {
                  switch ((t.calls++, n)) {
                    case 4:
                      t.triangles += i * (e / 3);
                      break;
                    case 1:
                      t.lines += i * (e / 2);
                      break;
                    case 3:
                      t.lines += i * (e - 1);
                      break;
                    case 2:
                      t.lines += i * e;
                      break;
                    case 0:
                      t.points += i * e;
                      break;
                    default:
                      console.error("THREE.WebGLInfo: Unknown draw mode:", n);
                  }
                },
              };
            }
            function fo(e, t) {
              return e[0] - t[0];
            }
            function mo(e, t) {
              return Math.abs(t[1]) - Math.abs(e[1]);
            }
            function vo(e) {
              for (
                var t = {}, n = new Float32Array(8), i = [], r = 0;
                r < 8;
                r++
              )
                i[r] = [r, 0];
              return {
                update: function (r, a, o, s) {
                  var l = r.morphTargetInfluences,
                    u = void 0 === l ? 0 : l.length,
                    c = t[a.id];
                  if (void 0 === c) {
                    c = [];
                    for (var h = 0; h < u; h++) c[h] = [h, 0];
                    t[a.id] = c;
                  }
                  for (var d = 0; d < u; d++) {
                    var p = c[d];
                    (p[0] = d), (p[1] = l[d]);
                  }
                  c.sort(mo);
                  for (var f = 0; f < 8; f++)
                    f < u && c[f][1]
                      ? ((i[f][0] = c[f][0]), (i[f][1] = c[f][1]))
                      : ((i[f][0] = Number.MAX_SAFE_INTEGER), (i[f][1] = 0));
                  i.sort(fo);
                  for (
                    var m = o.morphTargets && a.morphAttributes.position,
                      v = o.morphNormals && a.morphAttributes.normal,
                      g = 0,
                      y = 0;
                    y < 8;
                    y++
                  ) {
                    var x = i[y],
                      b = x[0],
                      _ = x[1];
                    b !== Number.MAX_SAFE_INTEGER && _
                      ? (m &&
                          a.getAttribute("morphTarget" + y) !== m[b] &&
                          a.setAttribute("morphTarget" + y, m[b]),
                        v &&
                          a.getAttribute("morphNormal" + y) !== v[b] &&
                          a.setAttribute("morphNormal" + y, v[b]),
                        (n[y] = _),
                        (g += _))
                      : (m &&
                          !0 === a.hasAttribute("morphTarget" + y) &&
                          a.deleteAttribute("morphTarget" + y),
                        v &&
                          !0 === a.hasAttribute("morphNormal" + y) &&
                          a.deleteAttribute("morphNormal" + y),
                        (n[y] = 0));
                  }
                  var w = a.morphTargetsRelative ? 1 : 1 - g;
                  s.getUniforms().setValue(e, "morphTargetBaseInfluence", w),
                    s.getUniforms().setValue(e, "morphTargetInfluences", n);
                },
              };
            }
            function go(e, t, n, i) {
              var r = new WeakMap();
              function a(e) {
                var t = e.target;
                t.removeEventListener("dispose", a),
                  n.remove(t.instanceMatrix),
                  null !== t.instanceColor && n.remove(t.instanceColor);
              }
              return {
                update: function (e) {
                  var o = i.render.frame,
                    s = e.geometry,
                    l = t.get(e, s);
                  return (
                    r.get(l) !== o && (t.update(l), r.set(l, o)),
                    e.isInstancedMesh &&
                      (!1 === e.hasEventListener("dispose", a) &&
                        e.addEventListener("dispose", a),
                      n.update(e.instanceMatrix, 34962),
                      null !== e.instanceColor &&
                        n.update(e.instanceColor, 34962)),
                    l
                  );
                },
                dispose: function () {
                  r = new WeakMap();
                },
              };
            }
            no.physical = {
              uniforms: Ua([
                no.standard.uniforms,
                {
                  clearcoat: { value: 0 },
                  clearcoatMap: { value: null },
                  clearcoatRoughness: { value: 0 },
                  clearcoatRoughnessMap: { value: null },
                  clearcoatNormalScale: { value: new ui(1, 1) },
                  clearcoatNormalMap: { value: null },
                  sheen: { value: new qr(0) },
                  transmission: { value: 0 },
                  transmissionMap: { value: null },
                  transmissionSamplerSize: { value: new ui() },
                  transmissionSamplerMap: { value: null },
                  thickness: { value: 0 },
                  thicknessMap: { value: null },
                  attenuationDistance: { value: 0 },
                  attenuationColor: { value: new qr(0) },
                },
              ]),
              vertexShader: eo.meshphysical_vert,
              fragmentShader: eo.meshphysical_frag,
            };
            var yo = (function (e) {
              function t() {
                var e,
                  n =
                    arguments.length > 0 && void 0 !== arguments[0]
                      ? arguments[0]
                      : null,
                  i =
                    arguments.length > 1 && void 0 !== arguments[1]
                      ? arguments[1]
                      : 1,
                  r =
                    arguments.length > 2 && void 0 !== arguments[2]
                      ? arguments[2]
                      : 1,
                  a =
                    arguments.length > 3 && void 0 !== arguments[3]
                      ? arguments[3]
                      : 1;
                return (
                  f(this, t),
                  ((e = c(this, h(t).call(this, null))).image = {
                    data: n,
                    width: i,
                    height: r,
                    depth: a,
                  }),
                  (e.magFilter = Te),
                  (e.minFilter = Te),
                  (e.wrapR = Me),
                  (e.generateMipmaps = !1),
                  (e.flipY = !1),
                  (e.unpackAlignment = 1),
                  (e.needsUpdate = !0),
                  e
                );
              }
              return p(t, e), t;
            })(fi);
            yo.prototype.isDataTexture2DArray = !0;
            var xo = (function (e) {
              function t() {
                var e,
                  n =
                    arguments.length > 0 && void 0 !== arguments[0]
                      ? arguments[0]
                      : null,
                  i =
                    arguments.length > 1 && void 0 !== arguments[1]
                      ? arguments[1]
                      : 1,
                  r =
                    arguments.length > 2 && void 0 !== arguments[2]
                      ? arguments[2]
                      : 1,
                  a =
                    arguments.length > 3 && void 0 !== arguments[3]
                      ? arguments[3]
                      : 1;
                return (
                  f(this, t),
                  ((e = c(this, h(t).call(this, null))).image = {
                    data: n,
                    width: i,
                    height: r,
                    depth: a,
                  }),
                  (e.magFilter = Te),
                  (e.minFilter = Te),
                  (e.wrapR = Me),
                  (e.generateMipmaps = !1),
                  (e.flipY = !1),
                  (e.unpackAlignment = 1),
                  (e.needsUpdate = !0),
                  e
                );
              }
              return p(t, e), t;
            })(fi);
            xo.prototype.isDataTexture3D = !0;
            var bo = new fi(),
              _o = new yo(),
              wo = new xo(),
              So = new Ya(),
              Eo = [],
              Mo = [],
              Ao = new Float32Array(16),
              To = new Float32Array(9),
              Co = new Float32Array(4);
            function ko(e, t, n) {
              var i = e[0];
              if (i <= 0 || i > 0) return e;
              var r = t * n,
                a = Eo[r];
              if (
                (void 0 === a && ((a = new Float32Array(r)), (Eo[r] = a)),
                0 !== t)
              ) {
                i.toArray(a, 0);
                for (var o = 1, s = 0; o !== t; ++o)
                  (s += n), e[o].toArray(a, s);
              }
              return a;
            }
            function Po(e, t) {
              if (e.length !== t.length) return !1;
              for (var n = 0, i = e.length; n < i; n++)
                if (e[n] !== t[n]) return !1;
              return !0;
            }
            function Lo(e, t) {
              for (var n = 0, i = t.length; n < i; n++) e[n] = t[n];
            }
            function Ro(e, t) {
              var n = Mo[t];
              void 0 === n && ((n = new Int32Array(t)), (Mo[t] = n));
              for (var i = 0; i !== t; ++i) n[i] = e.allocateTextureUnit();
              return n;
            }
            function Io(e, t) {
              var n = this.cache;
              n[0] !== t && (e.uniform1f(this.addr, t), (n[0] = t));
            }
            function Fo(e, t) {
              var n = this.cache;
              if (void 0 !== t.x)
                (n[0] === t.x && n[1] === t.y) ||
                  (e.uniform2f(this.addr, t.x, t.y),
                  (n[0] = t.x),
                  (n[1] = t.y));
              else {
                if (Po(n, t)) return;
                e.uniform2fv(this.addr, t), Lo(n, t);
              }
            }
            function No(e, t) {
              var n = this.cache;
              if (void 0 !== t.x)
                (n[0] === t.x && n[1] === t.y && n[2] === t.z) ||
                  (e.uniform3f(this.addr, t.x, t.y, t.z),
                  (n[0] = t.x),
                  (n[1] = t.y),
                  (n[2] = t.z));
              else if (void 0 !== t.r)
                (n[0] === t.r && n[1] === t.g && n[2] === t.b) ||
                  (e.uniform3f(this.addr, t.r, t.g, t.b),
                  (n[0] = t.r),
                  (n[1] = t.g),
                  (n[2] = t.b));
              else {
                if (Po(n, t)) return;
                e.uniform3fv(this.addr, t), Lo(n, t);
              }
            }
            function Oo(e, t) {
              var n = this.cache;
              if (void 0 !== t.x)
                (n[0] === t.x &&
                  n[1] === t.y &&
                  n[2] === t.z &&
                  n[3] === t.w) ||
                  (e.uniform4f(this.addr, t.x, t.y, t.z, t.w),
                  (n[0] = t.x),
                  (n[1] = t.y),
                  (n[2] = t.z),
                  (n[3] = t.w));
              else {
                if (Po(n, t)) return;
                e.uniform4fv(this.addr, t), Lo(n, t);
              }
            }
            function Bo(e, t) {
              var n = this.cache,
                i = t.elements;
              if (void 0 === i) {
                if (Po(n, t)) return;
                e.uniformMatrix2fv(this.addr, !1, t), Lo(n, t);
              } else {
                if (Po(n, i)) return;
                Co.set(i), e.uniformMatrix2fv(this.addr, !1, Co), Lo(n, i);
              }
            }
            function Do(e, t) {
              var n = this.cache,
                i = t.elements;
              if (void 0 === i) {
                if (Po(n, t)) return;
                e.uniformMatrix3fv(this.addr, !1, t), Lo(n, t);
              } else {
                if (Po(n, i)) return;
                To.set(i), e.uniformMatrix3fv(this.addr, !1, To), Lo(n, i);
              }
            }
            function Vo(e, t) {
              var n = this.cache,
                i = t.elements;
              if (void 0 === i) {
                if (Po(n, t)) return;
                e.uniformMatrix4fv(this.addr, !1, t), Lo(n, t);
              } else {
                if (Po(n, i)) return;
                Ao.set(i), e.uniformMatrix4fv(this.addr, !1, Ao), Lo(n, i);
              }
            }
            function Uo(e, t) {
              var n = this.cache;
              n[0] !== t && (e.uniform1i(this.addr, t), (n[0] = t));
            }
            function zo(e, t) {
              var n = this.cache;
              Po(n, t) || (e.uniform2iv(this.addr, t), Lo(n, t));
            }
            function jo(e, t) {
              var n = this.cache;
              Po(n, t) || (e.uniform3iv(this.addr, t), Lo(n, t));
            }
            function Go(e, t) {
              var n = this.cache;
              Po(n, t) || (e.uniform4iv(this.addr, t), Lo(n, t));
            }
            function Ho(e, t) {
              var n = this.cache;
              n[0] !== t && (e.uniform1ui(this.addr, t), (n[0] = t));
            }
            function Wo(e, t) {
              var n = this.cache;
              Po(n, t) || (e.uniform2uiv(this.addr, t), Lo(n, t));
            }
            function Yo(e, t) {
              var n = this.cache;
              Po(n, t) || (e.uniform3uiv(this.addr, t), Lo(n, t));
            }
            function qo(e, t) {
              var n = this.cache;
              Po(n, t) || (e.uniform4uiv(this.addr, t), Lo(n, t));
            }
            function Xo(e, t, n) {
              var i = this.cache,
                r = n.allocateTextureUnit();
              i[0] !== r && (e.uniform1i(this.addr, r), (i[0] = r)),
                n.safeSetTexture2D(t || bo, r);
            }
            function Qo(e, t, n) {
              var i = this.cache,
                r = n.allocateTextureUnit();
              i[0] !== r && (e.uniform1i(this.addr, r), (i[0] = r)),
                n.setTexture3D(t || wo, r);
            }
            function Zo(e, t, n) {
              var i = this.cache,
                r = n.allocateTextureUnit();
              i[0] !== r && (e.uniform1i(this.addr, r), (i[0] = r)),
                n.safeSetTextureCube(t || So, r);
            }
            function Jo(e, t, n) {
              var i = this.cache,
                r = n.allocateTextureUnit();
              i[0] !== r && (e.uniform1i(this.addr, r), (i[0] = r)),
                n.setTexture2DArray(t || _o, r);
            }
            function Ko(e, t) {
              e.uniform1fv(this.addr, t);
            }
            function $o(e, t) {
              var n = ko(t, this.size, 2);
              e.uniform2fv(this.addr, n);
            }
            function es(e, t) {
              var n = ko(t, this.size, 3);
              e.uniform3fv(this.addr, n);
            }
            function ts(e, t) {
              var n = ko(t, this.size, 4);
              e.uniform4fv(this.addr, n);
            }
            function ns(e, t) {
              var n = ko(t, this.size, 4);
              e.uniformMatrix2fv(this.addr, !1, n);
            }
            function is(e, t) {
              var n = ko(t, this.size, 9);
              e.uniformMatrix3fv(this.addr, !1, n);
            }
            function rs(e, t) {
              var n = ko(t, this.size, 16);
              e.uniformMatrix4fv(this.addr, !1, n);
            }
            function as(e, t) {
              e.uniform1iv(this.addr, t);
            }
            function os(e, t) {
              e.uniform2iv(this.addr, t);
            }
            function ss(e, t) {
              e.uniform3iv(this.addr, t);
            }
            function ls(e, t) {
              e.uniform4iv(this.addr, t);
            }
            function us(e, t) {
              e.uniform1uiv(this.addr, t);
            }
            function cs(e, t) {
              e.uniform2uiv(this.addr, t);
            }
            function hs(e, t) {
              e.uniform3uiv(this.addr, t);
            }
            function ds(e, t) {
              e.uniform4uiv(this.addr, t);
            }
            function ps(e, t, n) {
              var i = t.length,
                r = Ro(n, i);
              e.uniform1iv(this.addr, r);
              for (var a = 0; a !== i; ++a)
                n.safeSetTexture2D(t[a] || bo, r[a]);
            }
            function fs(e, t, n) {
              var i = t.length,
                r = Ro(n, i);
              e.uniform1iv(this.addr, r);
              for (var a = 0; a !== i; ++a)
                n.safeSetTextureCube(t[a] || So, r[a]);
            }
            function ms(e, t, n) {
              (this.id = e),
                (this.addr = n),
                (this.cache = []),
                (this.setValue = (function (e) {
                  switch (e) {
                    case 5126:
                      return Io;
                    case 35664:
                      return Fo;
                    case 35665:
                      return No;
                    case 35666:
                      return Oo;
                    case 35674:
                      return Bo;
                    case 35675:
                      return Do;
                    case 35676:
                      return Vo;
                    case 5124:
                    case 35670:
                      return Uo;
                    case 35667:
                    case 35671:
                      return zo;
                    case 35668:
                    case 35672:
                      return jo;
                    case 35669:
                    case 35673:
                      return Go;
                    case 5125:
                      return Ho;
                    case 36294:
                      return Wo;
                    case 36295:
                      return Yo;
                    case 36296:
                      return qo;
                    case 35678:
                    case 36198:
                    case 36298:
                    case 36306:
                    case 35682:
                      return Xo;
                    case 35679:
                    case 36299:
                    case 36307:
                      return Qo;
                    case 35680:
                    case 36300:
                    case 36308:
                    case 36293:
                      return Zo;
                    case 36289:
                    case 36303:
                    case 36311:
                    case 36292:
                      return Jo;
                  }
                })(t.type));
            }
            function vs(e, t, n) {
              (this.id = e),
                (this.addr = n),
                (this.cache = []),
                (this.size = t.size),
                (this.setValue = (function (e) {
                  switch (e) {
                    case 5126:
                      return Ko;
                    case 35664:
                      return $o;
                    case 35665:
                      return es;
                    case 35666:
                      return ts;
                    case 35674:
                      return ns;
                    case 35675:
                      return is;
                    case 35676:
                      return rs;
                    case 5124:
                    case 35670:
                      return as;
                    case 35667:
                    case 35671:
                      return os;
                    case 35668:
                    case 35672:
                      return ss;
                    case 35669:
                    case 35673:
                      return ls;
                    case 5125:
                      return us;
                    case 36294:
                      return cs;
                    case 36295:
                      return hs;
                    case 36296:
                      return ds;
                    case 35678:
                    case 36198:
                    case 36298:
                    case 36306:
                    case 35682:
                      return ps;
                    case 35680:
                    case 36300:
                    case 36308:
                    case 36293:
                      return fs;
                  }
                })(t.type));
            }
            function gs(e) {
              (this.id = e), (this.seq = []), (this.map = {});
            }
            (vs.prototype.updateCache = function (e) {
              var t = this.cache;
              e instanceof Float32Array &&
                t.length !== e.length &&
                (this.cache = new Float32Array(e.length)),
                Lo(t, e);
            }),
              (gs.prototype.setValue = function (e, t, n) {
                for (var i = this.seq, r = 0, a = i.length; r !== a; ++r) {
                  var o = i[r];
                  o.setValue(e, t[o.id], n);
                }
              });
            var ys = /(\w+)(\])?(\[|\.)?/g;
            function xs(e, t) {
              e.seq.push(t), (e.map[t.id] = t);
            }
            function bs(e, t, n) {
              var i = e.name,
                r = i.length;
              for (ys.lastIndex = 0; ; ) {
                var a = ys.exec(i),
                  o = ys.lastIndex,
                  s = a[1],
                  l = "]" === a[2],
                  u = a[3];
                if (
                  (l && (s |= 0), void 0 === u || ("[" === u && o + 2 === r))
                ) {
                  xs(n, void 0 === u ? new ms(s, e, t) : new vs(s, e, t));
                  break;
                }
                var c = n.map[s];
                void 0 === c && xs(n, (c = new gs(s))), (n = c);
              }
            }
            function _s(e, t) {
              (this.seq = []), (this.map = {});
              for (var n = e.getProgramParameter(t, 35718), i = 0; i < n; ++i) {
                var r = e.getActiveUniform(t, i);
                bs(r, e.getUniformLocation(t, r.name), this);
              }
            }
            function ws(e, t, n) {
              var i = e.createShader(t);
              return e.shaderSource(i, n), e.compileShader(i), i;
            }
            (_s.prototype.setValue = function (e, t, n, i) {
              var r = this.map[t];
              void 0 !== r && r.setValue(e, n, i);
            }),
              (_s.prototype.setOptional = function (e, t, n) {
                var i = t[n];
                void 0 !== i && this.setValue(e, n, i);
              }),
              (_s.upload = function (e, t, n, i) {
                for (var r = 0, a = t.length; r !== a; ++r) {
                  var o = t[r],
                    s = n[o.id];
                  !1 !== s.needsUpdate && o.setValue(e, s.value, i);
                }
              }),
              (_s.seqWithValue = function (e, t) {
                for (var n = [], i = 0, r = e.length; i !== r; ++i) {
                  var a = e[i];
                  a.id in t && n.push(a);
                }
                return n;
              });
            var Ss = 0;
            function Es(e) {
              switch (e) {
                case cn:
                  return ["Linear", "( value )"];
                case hn:
                  return ["sRGB", "( value )"];
                case pn:
                  return ["RGBE", "( value )"];
                case mn:
                  return ["RGBM", "( value, 7.0 )"];
                case vn:
                  return ["RGBM", "( value, 16.0 )"];
                case gn:
                  return ["RGBD", "( value, 256.0 )"];
                case dn:
                  return ["Gamma", "( value, float( GAMMA_FACTOR ) )"];
                case fn:
                  return ["LogLuv", "( value )"];
                default:
                  return (
                    console.warn(
                      "THREE.WebGLProgram: Unsupported encoding:",
                      e
                    ),
                    ["Linear", "( value )"]
                  );
              }
            }
            function Ms(e, t, n) {
              var i = e.getShaderParameter(t, 35713),
                r = e.getShaderInfoLog(t).trim();
              return i && "" === r
                ? ""
                : "THREE.WebGLShader: gl.getShaderInfoLog() " +
                    n +
                    "\n" +
                    r +
                    (function (e) {
                      for (var t = e.split("\n"), n = 0; n < t.length; n++)
                        t[n] = n + 1 + ": " + t[n];
                      return t.join("\n");
                    })(e.getShaderSource(t));
            }
            function As(e, t) {
              var n = Es(t);
              return (
                "vec4 " +
                e +
                "( vec4 value ) { return " +
                n[0] +
                "ToLinear" +
                n[1] +
                "; }"
              );
            }
            function Ts(e, t) {
              var n = Es(t);
              return (
                "vec4 " +
                e +
                "( vec4 value ) { return LinearTo" +
                n[0] +
                n[1] +
                "; }"
              );
            }
            function Cs(e, t) {
              var n;
              switch (t) {
                case de:
                  n = "Linear";
                  break;
                case pe:
                  n = "Reinhard";
                  break;
                case fe:
                  n = "OptimizedCineon";
                  break;
                case me:
                  n = "ACESFilmic";
                  break;
                case ve:
                  n = "Custom";
                  break;
                default:
                  console.warn(
                    "THREE.WebGLProgram: Unsupported toneMapping:",
                    t
                  ),
                    (n = "Linear");
              }
              return (
                "vec3 " +
                e +
                "( vec3 color ) { return " +
                n +
                "ToneMapping( color ); }"
              );
            }
            function ks(e) {
              return "" !== e;
            }
            function Ps(e, t) {
              return e
                .replace(/NUM_DIR_LIGHTS/g, t.numDirLights)
                .replace(/NUM_SPOT_LIGHTS/g, t.numSpotLights)
                .replace(/NUM_RECT_AREA_LIGHTS/g, t.numRectAreaLights)
                .replace(/NUM_POINT_LIGHTS/g, t.numPointLights)
                .replace(/NUM_HEMI_LIGHTS/g, t.numHemiLights)
                .replace(/NUM_DIR_LIGHT_SHADOWS/g, t.numDirLightShadows)
                .replace(/NUM_SPOT_LIGHT_SHADOWS/g, t.numSpotLightShadows)
                .replace(/NUM_POINT_LIGHT_SHADOWS/g, t.numPointLightShadows);
            }
            function Ls(e, t) {
              return e
                .replace(/NUM_CLIPPING_PLANES/g, t.numClippingPlanes)
                .replace(
                  /UNION_CLIPPING_PLANES/g,
                  t.numClippingPlanes - t.numClipIntersection
                );
            }
            var Rs = /^[ \t]*#include +<([\w\d./]+)>/gm;
            function Is(e) {
              return e.replace(Rs, Fs);
            }
            function Fs(e, t) {
              var n = eo[t];
              if (void 0 === n)
                throw new Error("Can not resolve #include <" + t + ">");
              return Is(n);
            }
            var Ns =
                /#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,
              Os =
                /#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;
            function Bs(e) {
              return e.replace(Os, Vs).replace(Ns, Ds);
            }
            function Ds(e, t, n, i) {
              return (
                console.warn(
                  "WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."
                ),
                Vs(0, t, n, i)
              );
            }
            function Vs(e, t, n, i) {
              for (var r = "", a = parseInt(t); a < parseInt(n); a++)
                r += i
                  .replace(/\[\s*i\s*\]/g, "[ " + a + " ]")
                  .replace(/UNROLLED_LOOP_INDEX/g, a);
              return r;
            }
            function Us(e) {
              var t =
                "precision " +
                e.precision +
                " float;\nprecision " +
                e.precision +
                " int;";
              return (
                "highp" === e.precision
                  ? (t += "\n#define HIGH_PRECISION")
                  : "mediump" === e.precision
                  ? (t += "\n#define MEDIUM_PRECISION")
                  : "lowp" === e.precision && (t += "\n#define LOW_PRECISION"),
                t
              );
            }
            function zs(e, t, n, i) {
              var r,
                a,
                o = e.getContext(),
                s = n.defines,
                l = n.vertexShader,
                u = n.fragmentShader,
                c = (function (e) {
                  var t = "SHADOWMAP_TYPE_BASIC";
                  return (
                    e.shadowMapType === E
                      ? (t = "SHADOWMAP_TYPE_PCF")
                      : e.shadowMapType === M
                      ? (t = "SHADOWMAP_TYPE_PCF_SOFT")
                      : e.shadowMapType === A && (t = "SHADOWMAP_TYPE_VSM"),
                    t
                  );
                })(n),
                h = (function (e) {
                  var t = "ENVMAP_TYPE_CUBE";
                  if (e.envMap)
                    switch (e.envMapMode) {
                      case ye:
                      case xe:
                        t = "ENVMAP_TYPE_CUBE";
                        break;
                      case we:
                      case Se:
                        t = "ENVMAP_TYPE_CUBE_UV";
                    }
                  return t;
                })(n),
                d = (function (e) {
                  var t = "ENVMAP_MODE_REFLECTION";
                  if (e.envMap)
                    switch (e.envMapMode) {
                      case xe:
                      case Se:
                        t = "ENVMAP_MODE_REFRACTION";
                    }
                  return t;
                })(n),
                p = (function (e) {
                  var t = "ENVMAP_BLENDING_NONE";
                  if (e.envMap)
                    switch (e.combine) {
                      case le:
                        t = "ENVMAP_BLENDING_MULTIPLY";
                        break;
                      case ue:
                        t = "ENVMAP_BLENDING_MIX";
                        break;
                      case ce:
                        t = "ENVMAP_BLENDING_ADD";
                    }
                  return t;
                })(n),
                f = e.gammaFactor > 0 ? e.gammaFactor : 1,
                m = n.isWebGL2
                  ? ""
                  : (function (e) {
                      return [
                        e.extensionDerivatives ||
                        e.envMapCubeUV ||
                        e.bumpMap ||
                        e.tangentSpaceNormalMap ||
                        e.clearcoatNormalMap ||
                        e.flatShading ||
                        "physical" === e.shaderID
                          ? "#extension GL_OES_standard_derivatives : enable"
                          : "",
                        (e.extensionFragDepth || e.logarithmicDepthBuffer) &&
                        e.rendererExtensionFragDepth
                          ? "#extension GL_EXT_frag_depth : enable"
                          : "",
                        e.extensionDrawBuffers && e.rendererExtensionDrawBuffers
                          ? "#extension GL_EXT_draw_buffers : require"
                          : "",
                        (e.extensionShaderTextureLOD ||
                          e.envMap ||
                          e.transmission > 0) &&
                        e.rendererExtensionShaderTextureLod
                          ? "#extension GL_EXT_shader_texture_lod : enable"
                          : "",
                      ]
                        .filter(ks)
                        .join("\n");
                    })(n),
                v = (function (e) {
                  var t = [];
                  for (var n in e) {
                    var i = e[n];
                    !1 !== i && t.push("#define " + n + " " + i);
                  }
                  return t.join("\n");
                })(s),
                g = o.createProgram(),
                y = n.glslVersion ? "#version " + n.glslVersion + "\n" : "";
              n.isRawShaderMaterial
                ? ((r = [v].filter(ks).join("\n")).length > 0 && (r += "\n"),
                  (a = [m, v].filter(ks).join("\n")).length > 0 && (a += "\n"))
                : ((r = [
                    Us(n),
                    "#define SHADER_NAME " + n.shaderName,
                    v,
                    n.instancing ? "#define USE_INSTANCING" : "",
                    n.instancingColor ? "#define USE_INSTANCING_COLOR" : "",
                    n.supportsVertexTextures ? "#define VERTEX_TEXTURES" : "",
                    "#define GAMMA_FACTOR " + f,
                    "#define MAX_BONES " + n.maxBones,
                    n.useFog && n.fog ? "#define USE_FOG" : "",
                    n.useFog && n.fogExp2 ? "#define FOG_EXP2" : "",
                    n.map ? "#define USE_MAP" : "",
                    n.envMap ? "#define USE_ENVMAP" : "",
                    n.envMap ? "#define " + d : "",
                    n.lightMap ? "#define USE_LIGHTMAP" : "",
                    n.aoMap ? "#define USE_AOMAP" : "",
                    n.emissiveMap ? "#define USE_EMISSIVEMAP" : "",
                    n.bumpMap ? "#define USE_BUMPMAP" : "",
                    n.normalMap ? "#define USE_NORMALMAP" : "",
                    n.normalMap && n.objectSpaceNormalMap
                      ? "#define OBJECTSPACE_NORMALMAP"
                      : "",
                    n.normalMap && n.tangentSpaceNormalMap
                      ? "#define TANGENTSPACE_NORMALMAP"
                      : "",
                    n.clearcoatMap ? "#define USE_CLEARCOATMAP" : "",
                    n.clearcoatRoughnessMap
                      ? "#define USE_CLEARCOAT_ROUGHNESSMAP"
                      : "",
                    n.clearcoatNormalMap
                      ? "#define USE_CLEARCOAT_NORMALMAP"
                      : "",
                    n.displacementMap && n.supportsVertexTextures
                      ? "#define USE_DISPLACEMENTMAP"
                      : "",
                    n.specularMap ? "#define USE_SPECULARMAP" : "",
                    n.roughnessMap ? "#define USE_ROUGHNESSMAP" : "",
                    n.metalnessMap ? "#define USE_METALNESSMAP" : "",
                    n.alphaMap ? "#define USE_ALPHAMAP" : "",
                    n.transmission ? "#define USE_TRANSMISSION" : "",
                    n.transmissionMap ? "#define USE_TRANSMISSIONMAP" : "",
                    n.thicknessMap ? "#define USE_THICKNESSMAP" : "",
                    n.vertexTangents ? "#define USE_TANGENT" : "",
                    n.vertexColors ? "#define USE_COLOR" : "",
                    n.vertexAlphas ? "#define USE_COLOR_ALPHA" : "",
                    n.vertexUvs ? "#define USE_UV" : "",
                    n.uvsVertexOnly ? "#define UVS_VERTEX_ONLY" : "",
                    n.flatShading ? "#define FLAT_SHADED" : "",
                    n.skinning ? "#define USE_SKINNING" : "",
                    n.useVertexTexture ? "#define BONE_TEXTURE" : "",
                    n.morphTargets ? "#define USE_MORPHTARGETS" : "",
                    n.morphNormals && !1 === n.flatShading
                      ? "#define USE_MORPHNORMALS"
                      : "",
                    n.doubleSided ? "#define DOUBLE_SIDED" : "",
                    n.flipSided ? "#define FLIP_SIDED" : "",
                    n.shadowMapEnabled ? "#define USE_SHADOWMAP" : "",
                    n.shadowMapEnabled ? "#define " + c : "",
                    n.sizeAttenuation ? "#define USE_SIZEATTENUATION" : "",
                    n.logarithmicDepthBuffer ? "#define USE_LOGDEPTHBUF" : "",
                    n.logarithmicDepthBuffer && n.rendererExtensionFragDepth
                      ? "#define USE_LOGDEPTHBUF_EXT"
                      : "",
                    "uniform mat4 modelMatrix;",
                    "uniform mat4 modelViewMatrix;",
                    "uniform mat4 projectionMatrix;",
                    "uniform mat4 viewMatrix;",
                    "uniform mat3 normalMatrix;",
                    "uniform vec3 cameraPosition;",
                    "uniform bool isOrthographic;",
                    "#ifdef USE_INSTANCING",
                    "\tattribute mat4 instanceMatrix;",
                    "#endif",
                    "#ifdef USE_INSTANCING_COLOR",
                    "\tattribute vec3 instanceColor;",
                    "#endif",
                    "attribute vec3 position;",
                    "attribute vec3 normal;",
                    "attribute vec2 uv;",
                    "#ifdef USE_TANGENT",
                    "\tattribute vec4 tangent;",
                    "#endif",
                    "#if defined( USE_COLOR_ALPHA )",
                    "\tattribute vec4 color;",
                    "#elif defined( USE_COLOR )",
                    "\tattribute vec3 color;",
                    "#endif",
                    "#ifdef USE_MORPHTARGETS",
                    "\tattribute vec3 morphTarget0;",
                    "\tattribute vec3 morphTarget1;",
                    "\tattribute vec3 morphTarget2;",
                    "\tattribute vec3 morphTarget3;",
                    "\t#ifdef USE_MORPHNORMALS",
                    "\t\tattribute vec3 morphNormal0;",
                    "\t\tattribute vec3 morphNormal1;",
                    "\t\tattribute vec3 morphNormal2;",
                    "\t\tattribute vec3 morphNormal3;",
                    "\t#else",
                    "\t\tattribute vec3 morphTarget4;",
                    "\t\tattribute vec3 morphTarget5;",
                    "\t\tattribute vec3 morphTarget6;",
                    "\t\tattribute vec3 morphTarget7;",
                    "\t#endif",
                    "#endif",
                    "#ifdef USE_SKINNING",
                    "\tattribute vec4 skinIndex;",
                    "\tattribute vec4 skinWeight;",
                    "#endif",
                    "\n",
                  ]
                    .filter(ks)
                    .join("\n")),
                  (a = [
                    m,
                    Us(n),
                    "#define SHADER_NAME " + n.shaderName,
                    v,
                    n.alphaTest
                      ? "#define ALPHATEST " +
                        n.alphaTest +
                        (n.alphaTest % 1 ? "" : ".0")
                      : "",
                    "#define GAMMA_FACTOR " + f,
                    n.useFog && n.fog ? "#define USE_FOG" : "",
                    n.useFog && n.fogExp2 ? "#define FOG_EXP2" : "",
                    n.map ? "#define USE_MAP" : "",
                    n.matcap ? "#define USE_MATCAP" : "",
                    n.envMap ? "#define USE_ENVMAP" : "",
                    n.envMap ? "#define " + h : "",
                    n.envMap ? "#define " + d : "",
                    n.envMap ? "#define " + p : "",
                    n.lightMap ? "#define USE_LIGHTMAP" : "",
                    n.aoMap ? "#define USE_AOMAP" : "",
                    n.emissiveMap ? "#define USE_EMISSIVEMAP" : "",
                    n.bumpMap ? "#define USE_BUMPMAP" : "",
                    n.normalMap ? "#define USE_NORMALMAP" : "",
                    n.normalMap && n.objectSpaceNormalMap
                      ? "#define OBJECTSPACE_NORMALMAP"
                      : "",
                    n.normalMap && n.tangentSpaceNormalMap
                      ? "#define TANGENTSPACE_NORMALMAP"
                      : "",
                    n.clearcoatMap ? "#define USE_CLEARCOATMAP" : "",
                    n.clearcoatRoughnessMap
                      ? "#define USE_CLEARCOAT_ROUGHNESSMAP"
                      : "",
                    n.clearcoatNormalMap
                      ? "#define USE_CLEARCOAT_NORMALMAP"
                      : "",
                    n.specularMap ? "#define USE_SPECULARMAP" : "",
                    n.roughnessMap ? "#define USE_ROUGHNESSMAP" : "",
                    n.metalnessMap ? "#define USE_METALNESSMAP" : "",
                    n.alphaMap ? "#define USE_ALPHAMAP" : "",
                    n.sheen ? "#define USE_SHEEN" : "",
                    n.transmission ? "#define USE_TRANSMISSION" : "",
                    n.transmissionMap ? "#define USE_TRANSMISSIONMAP" : "",
                    n.thicknessMap ? "#define USE_THICKNESSMAP" : "",
                    n.vertexTangents ? "#define USE_TANGENT" : "",
                    n.vertexColors || n.instancingColor
                      ? "#define USE_COLOR"
                      : "",
                    n.vertexAlphas ? "#define USE_COLOR_ALPHA" : "",
                    n.vertexUvs ? "#define USE_UV" : "",
                    n.uvsVertexOnly ? "#define UVS_VERTEX_ONLY" : "",
                    n.gradientMap ? "#define USE_GRADIENTMAP" : "",
                    n.flatShading ? "#define FLAT_SHADED" : "",
                    n.doubleSided ? "#define DOUBLE_SIDED" : "",
                    n.flipSided ? "#define FLIP_SIDED" : "",
                    n.shadowMapEnabled ? "#define USE_SHADOWMAP" : "",
                    n.shadowMapEnabled ? "#define " + c : "",
                    n.premultipliedAlpha ? "#define PREMULTIPLIED_ALPHA" : "",
                    n.physicallyCorrectLights
                      ? "#define PHYSICALLY_CORRECT_LIGHTS"
                      : "",
                    n.logarithmicDepthBuffer ? "#define USE_LOGDEPTHBUF" : "",
                    n.logarithmicDepthBuffer && n.rendererExtensionFragDepth
                      ? "#define USE_LOGDEPTHBUF_EXT"
                      : "",
                    (n.extensionShaderTextureLOD || n.envMap) &&
                    n.rendererExtensionShaderTextureLod
                      ? "#define TEXTURE_LOD_EXT"
                      : "",
                    "uniform mat4 viewMatrix;",
                    "uniform vec3 cameraPosition;",
                    "uniform bool isOrthographic;",
                    n.toneMapping !== he ? "#define TONE_MAPPING" : "",
                    n.toneMapping !== he ? eo.tonemapping_pars_fragment : "",
                    n.toneMapping !== he
                      ? Cs("toneMapping", n.toneMapping)
                      : "",
                    n.dithering ? "#define DITHERING" : "",
                    eo.encodings_pars_fragment,
                    n.map ? As("mapTexelToLinear", n.mapEncoding) : "",
                    n.matcap ? As("matcapTexelToLinear", n.matcapEncoding) : "",
                    n.envMap ? As("envMapTexelToLinear", n.envMapEncoding) : "",
                    n.emissiveMap
                      ? As("emissiveMapTexelToLinear", n.emissiveMapEncoding)
                      : "",
                    n.lightMap
                      ? As("lightMapTexelToLinear", n.lightMapEncoding)
                      : "",
                    Ts("linearToOutputTexel", n.outputEncoding),
                    n.depthPacking
                      ? "#define DEPTH_PACKING " + n.depthPacking
                      : "",
                    "\n",
                  ]
                    .filter(ks)
                    .join("\n"))),
                (l = Ls((l = Ps((l = Is(l)), n)), n)),
                (u = Ls((u = Ps((u = Is(u)), n)), n)),
                (l = Bs(l)),
                (u = Bs(u)),
                n.isWebGL2 &&
                  !0 !== n.isRawShaderMaterial &&
                  ((y = "#version 300 es\n"),
                  (r =
                    [
                      "#define attribute in",
                      "#define varying out",
                      "#define texture2D texture",
                    ].join("\n") +
                    "\n" +
                    r),
                  (a =
                    [
                      "#define varying in",
                      n.glslVersion === Xn
                        ? ""
                        : "out highp vec4 pc_fragColor;",
                      n.glslVersion === Xn
                        ? ""
                        : "#define gl_FragColor pc_fragColor",
                      "#define gl_FragDepthEXT gl_FragDepth",
                      "#define texture2D texture",
                      "#define textureCube texture",
                      "#define texture2DProj textureProj",
                      "#define texture2DLodEXT textureLod",
                      "#define texture2DProjLodEXT textureProjLod",
                      "#define textureCubeLodEXT textureLod",
                      "#define texture2DGradEXT textureGrad",
                      "#define texture2DProjGradEXT textureProjGrad",
                      "#define textureCubeGradEXT textureGrad",
                    ].join("\n") +
                    "\n" +
                    a));
              var x,
                b,
                _ = y + a + u,
                w = ws(o, 35633, y + r + l),
                S = ws(o, 35632, _);
              if (
                (o.attachShader(g, w),
                o.attachShader(g, S),
                void 0 !== n.index0AttributeName
                  ? o.bindAttribLocation(g, 0, n.index0AttributeName)
                  : !0 === n.morphTargets &&
                    o.bindAttribLocation(g, 0, "position"),
                o.linkProgram(g),
                e.debug.checkShaderErrors)
              ) {
                var T = o.getProgramInfoLog(g).trim(),
                  C = o.getShaderInfoLog(w).trim(),
                  k = o.getShaderInfoLog(S).trim(),
                  P = !0,
                  L = !0;
                if (!1 === o.getProgramParameter(g, 35714)) {
                  P = !1;
                  var R = Ms(o, w, "vertex"),
                    I = Ms(o, S, "fragment");
                  console.error(
                    "THREE.WebGLProgram: shader error: ",
                    o.getError(),
                    "35715",
                    o.getProgramParameter(g, 35715),
                    "gl.getProgramInfoLog",
                    T,
                    R,
                    I
                  );
                } else
                  "" !== T
                    ? console.warn(
                        "THREE.WebGLProgram: gl.getProgramInfoLog()",
                        T
                      )
                    : ("" !== C && "" !== k) || (L = !1);
                L &&
                  (this.diagnostics = {
                    runnable: P,
                    programLog: T,
                    vertexShader: { log: C, prefix: r },
                    fragmentShader: { log: k, prefix: a },
                  });
              }
              return (
                o.deleteShader(w),
                o.deleteShader(S),
                (this.getUniforms = function () {
                  return void 0 === x && (x = new _s(o, g)), x;
                }),
                (this.getAttributes = function () {
                  return (
                    void 0 === b &&
                      (b = (function (e, t) {
                        for (
                          var n = {},
                            i = e.getProgramParameter(t, 35721),
                            r = 0;
                          r < i;
                          r++
                        ) {
                          var a = e.getActiveAttrib(t, r).name;
                          n[a] = e.getAttribLocation(t, a);
                        }
                        return n;
                      })(o, g)),
                    b
                  );
                }),
                (this.destroy = function () {
                  i.releaseStatesOfProgram(this),
                    o.deleteProgram(g),
                    (this.program = void 0);
                }),
                (this.name = n.shaderName),
                (this.id = Ss++),
                (this.cacheKey = t),
                (this.usedTimes = 1),
                (this.program = g),
                (this.vertexShader = w),
                (this.fragmentShader = S),
                this
              );
            }
            function js(e, t, n, i, r, a) {
              var o = [],
                s = i.isWebGL2,
                l = i.logarithmicDepthBuffer,
                u = i.floatVertexTextures,
                c = i.maxVertexUniforms,
                h = i.vertexTextures,
                d = i.precision,
                p = {
                  MeshDepthMaterial: "depth",
                  MeshDistanceMaterial: "distanceRGBA",
                  MeshNormalMaterial: "normal",
                  MeshBasicMaterial: "basic",
                  MeshLambertMaterial: "lambert",
                  MeshPhongMaterial: "phong",
                  MeshToonMaterial: "toon",
                  MeshStandardMaterial: "physical",
                  MeshPhysicalMaterial: "physical",
                  MeshMatcapMaterial: "matcap",
                  LineBasicMaterial: "basic",
                  LineDashedMaterial: "dashed",
                  PointsMaterial: "points",
                  ShadowMaterial: "shadow",
                  SpriteMaterial: "sprite",
                },
                f = [
                  "precision",
                  "isWebGL2",
                  "supportsVertexTextures",
                  "outputEncoding",
                  "instancing",
                  "instancingColor",
                  "map",
                  "mapEncoding",
                  "matcap",
                  "matcapEncoding",
                  "envMap",
                  "envMapMode",
                  "envMapEncoding",
                  "envMapCubeUV",
                  "lightMap",
                  "lightMapEncoding",
                  "aoMap",
                  "emissiveMap",
                  "emissiveMapEncoding",
                  "bumpMap",
                  "normalMap",
                  "objectSpaceNormalMap",
                  "tangentSpaceNormalMap",
                  "clearcoatMap",
                  "clearcoatRoughnessMap",
                  "clearcoatNormalMap",
                  "displacementMap",
                  "specularMap",
                  "roughnessMap",
                  "metalnessMap",
                  "gradientMap",
                  "alphaMap",
                  "combine",
                  "vertexColors",
                  "vertexAlphas",
                  "vertexTangents",
                  "vertexUvs",
                  "uvsVertexOnly",
                  "fog",
                  "useFog",
                  "fogExp2",
                  "flatShading",
                  "sizeAttenuation",
                  "logarithmicDepthBuffer",
                  "skinning",
                  "maxBones",
                  "useVertexTexture",
                  "morphTargets",
                  "morphNormals",
                  "premultipliedAlpha",
                  "numDirLights",
                  "numPointLights",
                  "numSpotLights",
                  "numHemiLights",
                  "numRectAreaLights",
                  "numDirLightShadows",
                  "numPointLightShadows",
                  "numSpotLightShadows",
                  "shadowMapEnabled",
                  "shadowMapType",
                  "toneMapping",
                  "physicallyCorrectLights",
                  "alphaTest",
                  "doubleSided",
                  "flipSided",
                  "numClippingPlanes",
                  "numClipIntersection",
                  "depthPacking",
                  "dithering",
                  "sheen",
                  "transmission",
                  "transmissionMap",
                  "thicknessMap",
                ];
              function m(e) {
                var t;
                return (
                  e && e.isTexture
                    ? (t = e.encoding)
                    : e && e.isWebGLRenderTarget
                    ? (console.warn(
                        "THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."
                      ),
                      (t = e.texture.encoding))
                    : (t = cn),
                  t
                );
              }
              return {
                getParameters: function (r, o, f, v, g) {
                  var y,
                    x,
                    b = v.fog,
                    _ = r.isMeshStandardMaterial ? v.environment : null,
                    w = t.get(r.envMap || _),
                    S = p[r.type],
                    E = g.isSkinnedMesh
                      ? (function (e) {
                          var t = e.skeleton.bones;
                          if (u) return 1024;
                          var n = c,
                            i = Math.floor((n - 20) / 4),
                            r = Math.min(i, t.length);
                          return r < t.length
                            ? (console.warn(
                                "THREE.WebGLRenderer: Skeleton has " +
                                  t.length +
                                  " bones. This GPU supports " +
                                  r +
                                  "."
                              ),
                              0)
                            : r;
                        })(g)
                      : 0;
                  if (
                    (null !== r.precision &&
                      (d = i.getMaxPrecision(r.precision)) !== r.precision &&
                      console.warn(
                        "THREE.WebGLProgram.getParameters:",
                        r.precision,
                        "not supported, using",
                        d,
                        "instead."
                      ),
                    S)
                  ) {
                    var M = no[S];
                    (y = M.vertexShader), (x = M.fragmentShader);
                  } else (y = r.vertexShader), (x = r.fragmentShader);
                  var A = e.getRenderTarget();
                  return {
                    isWebGL2: s,
                    shaderID: S,
                    shaderName: r.type,
                    vertexShader: y,
                    fragmentShader: x,
                    defines: r.defines,
                    isRawShaderMaterial: !0 === r.isRawShaderMaterial,
                    glslVersion: r.glslVersion,
                    precision: d,
                    instancing: !0 === g.isInstancedMesh,
                    instancingColor:
                      !0 === g.isInstancedMesh && null !== g.instanceColor,
                    supportsVertexTextures: h,
                    outputEncoding:
                      null !== A ? m(A.texture) : e.outputEncoding,
                    map: !!r.map,
                    mapEncoding: m(r.map),
                    matcap: !!r.matcap,
                    matcapEncoding: m(r.matcap),
                    envMap: !!w,
                    envMapMode: w && w.mapping,
                    envMapEncoding: m(w),
                    envMapCubeUV: !!w && (w.mapping === we || w.mapping === Se),
                    lightMap: !!r.lightMap,
                    lightMapEncoding: m(r.lightMap),
                    aoMap: !!r.aoMap,
                    emissiveMap: !!r.emissiveMap,
                    emissiveMapEncoding: m(r.emissiveMap),
                    bumpMap: !!r.bumpMap,
                    normalMap: !!r.normalMap,
                    objectSpaceNormalMap: r.normalMapType === _n,
                    tangentSpaceNormalMap: r.normalMapType === bn,
                    clearcoatMap: !!r.clearcoatMap,
                    clearcoatRoughnessMap: !!r.clearcoatRoughnessMap,
                    clearcoatNormalMap: !!r.clearcoatNormalMap,
                    displacementMap: !!r.displacementMap,
                    roughnessMap: !!r.roughnessMap,
                    metalnessMap: !!r.metalnessMap,
                    specularMap: !!r.specularMap,
                    alphaMap: !!r.alphaMap,
                    gradientMap: !!r.gradientMap,
                    sheen: !!r.sheen,
                    transmission: !!r.transmission,
                    transmissionMap: !!r.transmissionMap,
                    thicknessMap: !!r.thicknessMap,
                    combine: r.combine,
                    vertexTangents: r.normalMap && r.vertexTangents,
                    vertexColors: r.vertexColors,
                    vertexAlphas:
                      !0 === r.vertexColors &&
                      g.geometry &&
                      g.geometry.attributes.color &&
                      4 === g.geometry.attributes.color.itemSize,
                    vertexUvs:
                      !!r.map ||
                      !!r.bumpMap ||
                      !!r.normalMap ||
                      !!r.specularMap ||
                      !!r.alphaMap ||
                      !!r.emissiveMap ||
                      !!r.roughnessMap ||
                      !!r.metalnessMap ||
                      !!r.clearcoatMap ||
                      !!r.clearcoatRoughnessMap ||
                      !!r.clearcoatNormalMap ||
                      !!r.displacementMap ||
                      !!r.transmission ||
                      !!r.transmissionMap ||
                      !!r.thicknessMap,
                    uvsVertexOnly:
                      !(
                        r.map ||
                        r.bumpMap ||
                        r.normalMap ||
                        r.specularMap ||
                        r.alphaMap ||
                        r.emissiveMap ||
                        r.roughnessMap ||
                        r.metalnessMap ||
                        r.clearcoatNormalMap ||
                        r.transmission ||
                        r.transmissionMap ||
                        r.thicknessMap
                      ) && !!r.displacementMap,
                    fog: !!b,
                    useFog: r.fog,
                    fogExp2: b && b.isFogExp2,
                    flatShading: !!r.flatShading,
                    sizeAttenuation: r.sizeAttenuation,
                    logarithmicDepthBuffer: l,
                    skinning: !0 === g.isSkinnedMesh && E > 0,
                    maxBones: E,
                    useVertexTexture: u,
                    morphTargets: r.morphTargets,
                    morphNormals: r.morphNormals,
                    numDirLights: o.directional.length,
                    numPointLights: o.point.length,
                    numSpotLights: o.spot.length,
                    numRectAreaLights: o.rectArea.length,
                    numHemiLights: o.hemi.length,
                    numDirLightShadows: o.directionalShadowMap.length,
                    numPointLightShadows: o.pointShadowMap.length,
                    numSpotLightShadows: o.spotShadowMap.length,
                    numClippingPlanes: a.numPlanes,
                    numClipIntersection: a.numIntersection,
                    dithering: r.dithering,
                    shadowMapEnabled: e.shadowMap.enabled && f.length > 0,
                    shadowMapType: e.shadowMap.type,
                    toneMapping: r.toneMapped ? e.toneMapping : he,
                    physicallyCorrectLights: e.physicallyCorrectLights,
                    premultipliedAlpha: r.premultipliedAlpha,
                    alphaTest: r.alphaTest,
                    doubleSided: r.side === k,
                    flipSided: r.side === C,
                    depthPacking: void 0 !== r.depthPacking && r.depthPacking,
                    index0AttributeName: r.index0AttributeName,
                    extensionDerivatives:
                      r.extensions && r.extensions.derivatives,
                    extensionFragDepth: r.extensions && r.extensions.fragDepth,
                    extensionDrawBuffers:
                      r.extensions && r.extensions.drawBuffers,
                    extensionShaderTextureLOD:
                      r.extensions && r.extensions.shaderTextureLOD,
                    rendererExtensionFragDepth: s || n.has("EXT_frag_depth"),
                    rendererExtensionDrawBuffers:
                      s || n.has("WEBGL_draw_buffers"),
                    rendererExtensionShaderTextureLod:
                      s || n.has("EXT_shader_texture_lod"),
                    customProgramCacheKey: r.customProgramCacheKey(),
                  };
                },
                getProgramCacheKey: function (t) {
                  var n = [];
                  if (
                    (t.shaderID
                      ? n.push(t.shaderID)
                      : (n.push(t.fragmentShader), n.push(t.vertexShader)),
                    void 0 !== t.defines)
                  )
                    for (var i in t.defines) n.push(i), n.push(t.defines[i]);
                  if (!1 === t.isRawShaderMaterial) {
                    for (var r = 0; r < f.length; r++) n.push(t[f[r]]);
                    n.push(e.outputEncoding), n.push(e.gammaFactor);
                  }
                  return n.push(t.customProgramCacheKey), n.join();
                },
                getUniforms: function (e) {
                  var t,
                    n = p[e.type];
                  if (n) {
                    var i = no[n];
                    t = za.clone(i.uniforms);
                  } else t = e.uniforms;
                  return t;
                },
                acquireProgram: function (t, n) {
                  for (var i, a = 0, s = o.length; a < s; a++) {
                    var l = o[a];
                    if (l.cacheKey === n) {
                      ++(i = l).usedTimes;
                      break;
                    }
                  }
                  return (
                    void 0 === i && ((i = new zs(e, n, t, r)), o.push(i)), i
                  );
                },
                releaseProgram: function (e) {
                  if (0 === --e.usedTimes) {
                    var t = o.indexOf(e);
                    (o[t] = o[o.length - 1]), o.pop(), e.destroy();
                  }
                },
                programs: o,
              };
            }
            function Gs() {
              var e = new WeakMap();
              return {
                get: function (t) {
                  var n = e.get(t);
                  return void 0 === n && ((n = {}), e.set(t, n)), n;
                },
                remove: function (t) {
                  e.delete(t);
                },
                update: function (t, n, i) {
                  e.get(t)[n] = i;
                },
                dispose: function () {
                  e = new WeakMap();
                },
              };
            }
            function Hs(e, t) {
              return e.groupOrder !== t.groupOrder
                ? e.groupOrder - t.groupOrder
                : e.renderOrder !== t.renderOrder
                ? e.renderOrder - t.renderOrder
                : e.program !== t.program
                ? e.program.id - t.program.id
                : e.material.id !== t.material.id
                ? e.material.id - t.material.id
                : e.z !== t.z
                ? e.z - t.z
                : e.id - t.id;
            }
            function Ws(e, t) {
              return e.groupOrder !== t.groupOrder
                ? e.groupOrder - t.groupOrder
                : e.renderOrder !== t.renderOrder
                ? e.renderOrder - t.renderOrder
                : e.z !== t.z
                ? t.z - e.z
                : e.id - t.id;
            }
            function Ys(e) {
              var t = [],
                n = 0,
                i = [],
                r = [],
                a = [],
                o = { id: -1 };
              function s(i, r, a, s, l, u) {
                var c = t[n],
                  h = e.get(a);
                return (
                  void 0 === c
                    ? ((c = {
                        id: i.id,
                        object: i,
                        geometry: r,
                        material: a,
                        program: h.program || o,
                        groupOrder: s,
                        renderOrder: i.renderOrder,
                        z: l,
                        group: u,
                      }),
                      (t[n] = c))
                    : ((c.id = i.id),
                      (c.object = i),
                      (c.geometry = r),
                      (c.material = a),
                      (c.program = h.program || o),
                      (c.groupOrder = s),
                      (c.renderOrder = i.renderOrder),
                      (c.z = l),
                      (c.group = u)),
                  n++,
                  c
                );
              }
              return {
                opaque: i,
                transmissive: r,
                transparent: a,
                init: function () {
                  (n = 0), (i.length = 0), (r.length = 0), (a.length = 0);
                },
                push: function (e, t, n, o, l, u) {
                  var c = s(e, t, n, o, l, u);
                  n.transmission > 0
                    ? r.push(c)
                    : !0 === n.transparent
                    ? a.push(c)
                    : i.push(c);
                },
                unshift: function (e, t, n, o, l, u) {
                  var c = s(e, t, n, o, l, u);
                  n.transmission > 0
                    ? r.unshift(c)
                    : !0 === n.transparent
                    ? a.unshift(c)
                    : i.unshift(c);
                },
                finish: function () {
                  for (var e = n, i = t.length; e < i; e++) {
                    var r = t[e];
                    if (null === r.id) break;
                    (r.id = null),
                      (r.object = null),
                      (r.geometry = null),
                      (r.material = null),
                      (r.program = null),
                      (r.group = null);
                  }
                },
                sort: function (e, t) {
                  i.length > 1 && i.sort(e || Hs),
                    r.length > 1 && r.sort(t || Ws),
                    a.length > 1 && a.sort(t || Ws);
                },
              };
            }
            function qs(e) {
              var t = new WeakMap();
              return {
                get: function (n, i) {
                  var r;
                  return (
                    !1 === t.has(n)
                      ? ((r = new Ys(e)), t.set(n, [r]))
                      : i >= t.get(n).length
                      ? ((r = new Ys(e)), t.get(n).push(r))
                      : (r = t.get(n)[i]),
                    r
                  );
                },
                dispose: function () {
                  t = new WeakMap();
                },
              };
            }
            function Xs() {
              var e = {};
              return {
                get: function (t) {
                  if (void 0 !== e[t.id]) return e[t.id];
                  var n;
                  switch (t.type) {
                    case "DirectionalLight":
                      n = { direction: new _i(), color: new qr() };
                      break;
                    case "SpotLight":
                      n = {
                        position: new _i(),
                        direction: new _i(),
                        color: new qr(),
                        distance: 0,
                        coneCos: 0,
                        penumbraCos: 0,
                        decay: 0,
                      };
                      break;
                    case "PointLight":
                      n = {
                        position: new _i(),
                        color: new qr(),
                        distance: 0,
                        decay: 0,
                      };
                      break;
                    case "HemisphereLight":
                      n = {
                        direction: new _i(),
                        skyColor: new qr(),
                        groundColor: new qr(),
                      };
                      break;
                    case "RectAreaLight":
                      n = {
                        color: new qr(),
                        position: new _i(),
                        halfWidth: new _i(),
                        halfHeight: new _i(),
                      };
                  }
                  return (e[t.id] = n), n;
                },
              };
            }
            var Qs = 0;
            function Zs(e, t) {
              return (t.castShadow ? 1 : 0) - (e.castShadow ? 1 : 0);
            }
            function Js(e, t) {
              for (
                var n = new Xs(),
                  i = (function () {
                    var e = {};
                    return {
                      get: function (t) {
                        if (void 0 !== e[t.id]) return e[t.id];
                        var n;
                        switch (t.type) {
                          case "DirectionalLight":
                          case "SpotLight":
                            n = {
                              shadowBias: 0,
                              shadowNormalBias: 0,
                              shadowRadius: 1,
                              shadowMapSize: new ui(),
                            };
                            break;
                          case "PointLight":
                            n = {
                              shadowBias: 0,
                              shadowNormalBias: 0,
                              shadowRadius: 1,
                              shadowMapSize: new ui(),
                              shadowCameraNear: 1,
                              shadowCameraFar: 1e3,
                            };
                        }
                        return (e[t.id] = n), n;
                      },
                    };
                  })(),
                  r = {
                    version: 0,
                    hash: {
                      directionalLength: -1,
                      pointLength: -1,
                      spotLength: -1,
                      rectAreaLength: -1,
                      hemiLength: -1,
                      numDirectionalShadows: -1,
                      numPointShadows: -1,
                      numSpotShadows: -1,
                    },
                    ambient: [0, 0, 0],
                    probe: [],
                    directional: [],
                    directionalShadow: [],
                    directionalShadowMap: [],
                    directionalShadowMatrix: [],
                    spot: [],
                    spotShadow: [],
                    spotShadowMap: [],
                    spotShadowMatrix: [],
                    rectArea: [],
                    rectAreaLTC1: null,
                    rectAreaLTC2: null,
                    point: [],
                    pointShadow: [],
                    pointShadowMap: [],
                    pointShadowMatrix: [],
                    hemi: [],
                  },
                  a = 0;
                a < 9;
                a++
              )
                r.probe.push(new _i());
              var o = new _i(),
                s = new Ki(),
                l = new Ki();
              return {
                setup: function (a) {
                  for (var o = 0, s = 0, l = 0, u = 0; u < 9; u++)
                    r.probe[u].set(0, 0, 0);
                  var c = 0,
                    h = 0,
                    d = 0,
                    p = 0,
                    f = 0,
                    m = 0,
                    v = 0,
                    g = 0;
                  a.sort(Zs);
                  for (var y = 0, x = a.length; y < x; y++) {
                    var b = a[y],
                      _ = b.color,
                      w = b.intensity,
                      S = b.distance,
                      E =
                        b.shadow && b.shadow.map ? b.shadow.map.texture : null;
                    if (b.isAmbientLight)
                      (o += _.r * w), (s += _.g * w), (l += _.b * w);
                    else if (b.isLightProbe)
                      for (var M = 0; M < 9; M++)
                        r.probe[M].addScaledVector(b.sh.coefficients[M], w);
                    else if (b.isDirectionalLight) {
                      var A = n.get(b);
                      if (
                        (A.color.copy(b.color).multiplyScalar(b.intensity),
                        b.castShadow)
                      ) {
                        var T = b.shadow,
                          C = i.get(b);
                        (C.shadowBias = T.bias),
                          (C.shadowNormalBias = T.normalBias),
                          (C.shadowRadius = T.radius),
                          (C.shadowMapSize = T.mapSize),
                          (r.directionalShadow[c] = C),
                          (r.directionalShadowMap[c] = E),
                          (r.directionalShadowMatrix[c] = b.shadow.matrix),
                          m++;
                      }
                      (r.directional[c] = A), c++;
                    } else if (b.isSpotLight) {
                      var k = n.get(b);
                      if (
                        (k.position.setFromMatrixPosition(b.matrixWorld),
                        k.color.copy(_).multiplyScalar(w),
                        (k.distance = S),
                        (k.coneCos = Math.cos(b.angle)),
                        (k.penumbraCos = Math.cos(b.angle * (1 - b.penumbra))),
                        (k.decay = b.decay),
                        b.castShadow)
                      ) {
                        var P = b.shadow,
                          L = i.get(b);
                        (L.shadowBias = P.bias),
                          (L.shadowNormalBias = P.normalBias),
                          (L.shadowRadius = P.radius),
                          (L.shadowMapSize = P.mapSize),
                          (r.spotShadow[d] = L),
                          (r.spotShadowMap[d] = E),
                          (r.spotShadowMatrix[d] = b.shadow.matrix),
                          g++;
                      }
                      (r.spot[d] = k), d++;
                    } else if (b.isRectAreaLight) {
                      var R = n.get(b);
                      R.color.copy(_).multiplyScalar(w),
                        R.halfWidth.set(0.5 * b.width, 0, 0),
                        R.halfHeight.set(0, 0.5 * b.height, 0),
                        (r.rectArea[p] = R),
                        p++;
                    } else if (b.isPointLight) {
                      var I = n.get(b);
                      if (
                        (I.color.copy(b.color).multiplyScalar(b.intensity),
                        (I.distance = b.distance),
                        (I.decay = b.decay),
                        b.castShadow)
                      ) {
                        var F = b.shadow,
                          N = i.get(b);
                        (N.shadowBias = F.bias),
                          (N.shadowNormalBias = F.normalBias),
                          (N.shadowRadius = F.radius),
                          (N.shadowMapSize = F.mapSize),
                          (N.shadowCameraNear = F.camera.near),
                          (N.shadowCameraFar = F.camera.far),
                          (r.pointShadow[h] = N),
                          (r.pointShadowMap[h] = E),
                          (r.pointShadowMatrix[h] = b.shadow.matrix),
                          v++;
                      }
                      (r.point[h] = I), h++;
                    } else if (b.isHemisphereLight) {
                      var O = n.get(b);
                      O.skyColor.copy(b.color).multiplyScalar(w),
                        O.groundColor.copy(b.groundColor).multiplyScalar(w),
                        (r.hemi[f] = O),
                        f++;
                    }
                  }
                  p > 0 &&
                    (t.isWebGL2 || !0 === e.has("OES_texture_float_linear")
                      ? ((r.rectAreaLTC1 = to.LTC_FLOAT_1),
                        (r.rectAreaLTC2 = to.LTC_FLOAT_2))
                      : !0 === e.has("OES_texture_half_float_linear")
                      ? ((r.rectAreaLTC1 = to.LTC_HALF_1),
                        (r.rectAreaLTC2 = to.LTC_HALF_2))
                      : console.error(
                          "THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions."
                        )),
                    (r.ambient[0] = o),
                    (r.ambient[1] = s),
                    (r.ambient[2] = l);
                  var B = r.hash;
                  (B.directionalLength === c &&
                    B.pointLength === h &&
                    B.spotLength === d &&
                    B.rectAreaLength === p &&
                    B.hemiLength === f &&
                    B.numDirectionalShadows === m &&
                    B.numPointShadows === v &&
                    B.numSpotShadows === g) ||
                    ((r.directional.length = c),
                    (r.spot.length = d),
                    (r.rectArea.length = p),
                    (r.point.length = h),
                    (r.hemi.length = f),
                    (r.directionalShadow.length = m),
                    (r.directionalShadowMap.length = m),
                    (r.pointShadow.length = v),
                    (r.pointShadowMap.length = v),
                    (r.spotShadow.length = g),
                    (r.spotShadowMap.length = g),
                    (r.directionalShadowMatrix.length = m),
                    (r.pointShadowMatrix.length = v),
                    (r.spotShadowMatrix.length = g),
                    (B.directionalLength = c),
                    (B.pointLength = h),
                    (B.spotLength = d),
                    (B.rectAreaLength = p),
                    (B.hemiLength = f),
                    (B.numDirectionalShadows = m),
                    (B.numPointShadows = v),
                    (B.numSpotShadows = g),
                    (r.version = Qs++));
                },
                setupView: function (e, t) {
                  for (
                    var n = 0,
                      i = 0,
                      a = 0,
                      u = 0,
                      c = 0,
                      h = t.matrixWorldInverse,
                      d = 0,
                      p = e.length;
                    d < p;
                    d++
                  ) {
                    var f = e[d];
                    if (f.isDirectionalLight) {
                      var m = r.directional[n];
                      m.direction.setFromMatrixPosition(f.matrixWorld),
                        o.setFromMatrixPosition(f.target.matrixWorld),
                        m.direction.sub(o),
                        m.direction.transformDirection(h),
                        n++;
                    } else if (f.isSpotLight) {
                      var v = r.spot[a];
                      v.position.setFromMatrixPosition(f.matrixWorld),
                        v.position.applyMatrix4(h),
                        v.direction.setFromMatrixPosition(f.matrixWorld),
                        o.setFromMatrixPosition(f.target.matrixWorld),
                        v.direction.sub(o),
                        v.direction.transformDirection(h),
                        a++;
                    } else if (f.isRectAreaLight) {
                      var g = r.rectArea[u];
                      g.position.setFromMatrixPosition(f.matrixWorld),
                        g.position.applyMatrix4(h),
                        l.identity(),
                        s.copy(f.matrixWorld),
                        s.premultiply(h),
                        l.extractRotation(s),
                        g.halfWidth.set(0.5 * f.width, 0, 0),
                        g.halfHeight.set(0, 0.5 * f.height, 0),
                        g.halfWidth.applyMatrix4(l),
                        g.halfHeight.applyMatrix4(l),
                        u++;
                    } else if (f.isPointLight) {
                      var y = r.point[i];
                      y.position.setFromMatrixPosition(f.matrixWorld),
                        y.position.applyMatrix4(h),
                        i++;
                    } else if (f.isHemisphereLight) {
                      var x = r.hemi[c];
                      x.direction.setFromMatrixPosition(f.matrixWorld),
                        x.direction.transformDirection(h),
                        x.direction.normalize(),
                        c++;
                    }
                  }
                },
                state: r,
              };
            }
            function Ks(e, t) {
              var n = new Js(e, t),
                i = [],
                r = [];
              return {
                init: function () {
                  (i.length = 0), (r.length = 0);
                },
                state: { lightsArray: i, shadowsArray: r, lights: n },
                setupLights: function () {
                  n.setup(i);
                },
                setupLightsView: function (e) {
                  n.setupView(i, e);
                },
                pushLight: function (e) {
                  i.push(e);
                },
                pushShadow: function (e) {
                  r.push(e);
                },
              };
            }
            function $s(e, t) {
              var n = new WeakMap();
              return {
                get: function (i) {
                  var r,
                    a =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : 0;
                  return (
                    !1 === n.has(i)
                      ? ((r = new Ks(e, t)), n.set(i, [r]))
                      : a >= n.get(i).length
                      ? ((r = new Ks(e, t)), n.get(i).push(r))
                      : (r = n.get(i)[a]),
                    r
                  );
                },
                dispose: function () {
                  n = new WeakMap();
                },
              };
            }
            var el = (function (e) {
              function t(e) {
                var n;
                return (
                  f(this, t),
                  ((n = c(this, h(t).call(this))).type = "MeshDepthMaterial"),
                  (n.depthPacking = yn),
                  (n.morphTargets = !1),
                  (n.map = null),
                  (n.alphaMap = null),
                  (n.displacementMap = null),
                  (n.displacementScale = 1),
                  (n.displacementBias = 0),
                  (n.wireframe = !1),
                  (n.wireframeLinewidth = 1),
                  (n.fog = !1),
                  n.setValues(e),
                  n
                );
              }
              return (
                p(t, e),
                m(t, [
                  {
                    key: "copy",
                    value: function (e) {
                      return (
                        l(h(t.prototype), "copy", this).call(this, e),
                        (this.depthPacking = e.depthPacking),
                        (this.morphTargets = e.morphTargets),
                        (this.map = e.map),
                        (this.alphaMap = e.alphaMap),
                        (this.displacementMap = e.displacementMap),
                        (this.displacementScale = e.displacementScale),
                        (this.displacementBias = e.displacementBias),
                        (this.wireframe = e.wireframe),
                        (this.wireframeLinewidth = e.wireframeLinewidth),
                        this
                      );
                    },
                  },
                ]),
                t
              );
            })(Ur);
            el.prototype.isMeshDepthMaterial = !0;
            var tl = (function (e) {
              function t(e) {
                var n;
                return (
                  f(this, t),
                  ((n = c(this, h(t).call(this))).type =
                    "MeshDistanceMaterial"),
                  (n.referencePosition = new _i()),
                  (n.nearDistance = 1),
                  (n.farDistance = 1e3),
                  (n.morphTargets = !1),
                  (n.map = null),
                  (n.alphaMap = null),
                  (n.displacementMap = null),
                  (n.displacementScale = 1),
                  (n.displacementBias = 0),
                  (n.fog = !1),
                  n.setValues(e),
                  n
                );
              }
              return (
                p(t, e),
                m(t, [
                  {
                    key: "copy",
                    value: function (e) {
                      return (
                        l(h(t.prototype), "copy", this).call(this, e),
                        this.referencePosition.copy(e.referencePosition),
                        (this.nearDistance = e.nearDistance),
                        (this.farDistance = e.farDistance),
                        (this.morphTargets = e.morphTargets),
                        (this.map = e.map),
                        (this.alphaMap = e.alphaMap),
                        (this.displacementMap = e.displacementMap),
                        (this.displacementScale = e.displacementScale),
                        (this.displacementBias = e.displacementBias),
                        this
                      );
                    },
                  },
                ]),
                t
              );
            })(Ur);
            function nl(e, t, n) {
              var i = new Za(),
                r = new ui(),
                a = new ui(),
                o = new vi(),
                s = [],
                l = [],
                u = {},
                c = n.maxTextureSize,
                h = { 0: C, 1: T, 2: k },
                d = new ja({
                  defines: { SAMPLE_RATE: 2 / 8, HALF_SAMPLE_RATE: 1 / 8 },
                  uniforms: {
                    shadow_pass: { value: null },
                    resolution: { value: new ui() },
                    radius: { value: 4 },
                  },
                  vertexShader:
                    "void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",
                  fragmentShader:
                    "uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );\n\tfor ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean * HALF_SAMPLE_RATE;\n\tsquared_mean = squared_mean * HALF_SAMPLE_RATE;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}",
                }),
                p = d.clone();
              p.defines.HORIZONTAL_PASS = 1;
              var f = new ya();
              f.setAttribute(
                "position",
                new Jr(
                  new Float32Array([-1, -1, 0.5, 3, -1, 0.5, -1, 3, 0.5]),
                  3
                )
              );
              var m = new Oa(f, d),
                v = this;
              function g(n, i) {
                var r = t.update(m);
                (d.uniforms.shadow_pass.value = n.map.texture),
                  (d.uniforms.resolution.value = n.mapSize),
                  (d.uniforms.radius.value = n.radius),
                  e.setRenderTarget(n.mapPass),
                  e.clear(),
                  e.renderBufferDirect(i, null, r, d, m, null),
                  (p.uniforms.shadow_pass.value = n.mapPass.texture),
                  (p.uniforms.resolution.value = n.mapSize),
                  (p.uniforms.radius.value = n.radius),
                  e.setRenderTarget(n.map),
                  e.clear(),
                  e.renderBufferDirect(i, null, r, p, m, null);
              }
              function y(e) {
                var t = e << 0,
                  n = s[t];
                return (
                  void 0 === n &&
                    ((n = new el({ depthPacking: xn, morphTargets: e })),
                    (s[t] = n)),
                  n
                );
              }
              function x(e) {
                var t = e << 0,
                  n = l[t];
                return (
                  void 0 === n &&
                    ((n = new tl({ morphTargets: e })), (l[t] = n)),
                  n
                );
              }
              function b(t, n, i, r, a, o, s) {
                var l = null,
                  c = y,
                  d = t.customDepthMaterial;
                if (
                  (!0 === r.isPointLight &&
                    ((c = x), (d = t.customDistanceMaterial)),
                  void 0 === d)
                ) {
                  var p = !1;
                  !0 === i.morphTargets &&
                    (p =
                      n.morphAttributes &&
                      n.morphAttributes.position &&
                      n.morphAttributes.position.length > 0),
                    (l = c(p));
                } else l = d;
                if (
                  e.localClippingEnabled &&
                  !0 === i.clipShadows &&
                  0 !== i.clippingPlanes.length
                ) {
                  var f = l.uuid,
                    m = i.uuid,
                    v = u[f];
                  void 0 === v && ((v = {}), (u[f] = v));
                  var g = v[m];
                  void 0 === g && ((g = l.clone()), (v[m] = g)), (l = g);
                }
                return (
                  (l.visible = i.visible),
                  (l.wireframe = i.wireframe),
                  (l.side =
                    s === A
                      ? null !== i.shadowSide
                        ? i.shadowSide
                        : i.side
                      : null !== i.shadowSide
                      ? i.shadowSide
                      : h[i.side]),
                  (l.clipShadows = i.clipShadows),
                  (l.clippingPlanes = i.clippingPlanes),
                  (l.clipIntersection = i.clipIntersection),
                  (l.wireframeLinewidth = i.wireframeLinewidth),
                  (l.linewidth = i.linewidth),
                  !0 === r.isPointLight &&
                    !0 === l.isMeshDistanceMaterial &&
                    (l.referencePosition.setFromMatrixPosition(r.matrixWorld),
                    (l.nearDistance = a),
                    (l.farDistance = o)),
                  l
                );
              }
              function _(n, r, a, o, s) {
                if (!1 !== n.visible) {
                  if (
                    n.layers.test(r.layers) &&
                    (n.isMesh || n.isLine || n.isPoints) &&
                    (n.castShadow || (n.receiveShadow && s === A)) &&
                    (!n.frustumCulled || i.intersectsObject(n))
                  ) {
                    n.modelViewMatrix.multiplyMatrices(
                      a.matrixWorldInverse,
                      n.matrixWorld
                    );
                    var l = t.update(n),
                      u = n.material;
                    if (Array.isArray(u))
                      for (var c = l.groups, h = 0, d = c.length; h < d; h++) {
                        var p = c[h],
                          f = u[p.materialIndex];
                        if (f && f.visible) {
                          var m = b(n, l, f, o, a.near, a.far, s);
                          e.renderBufferDirect(a, null, l, m, n, p);
                        }
                      }
                    else if (u.visible) {
                      var v = b(n, l, u, o, a.near, a.far, s);
                      e.renderBufferDirect(a, null, l, v, n, null);
                    }
                  }
                  for (var g = n.children, y = 0, x = g.length; y < x; y++)
                    _(g[y], r, a, o, s);
                }
              }
              (this.enabled = !1),
                (this.autoUpdate = !0),
                (this.needsUpdate = !1),
                (this.type = E),
                (this.render = function (t, n, s) {
                  if (
                    !1 !== v.enabled &&
                    (!1 !== v.autoUpdate || !1 !== v.needsUpdate) &&
                    0 !== t.length
                  ) {
                    var l = e.getRenderTarget(),
                      u = e.getActiveCubeFace(),
                      h = e.getActiveMipmapLevel(),
                      d = e.state;
                    d.setBlending(R),
                      d.buffers.color.setClear(1, 1, 1, 1),
                      d.buffers.depth.setTest(!0),
                      d.setScissorTest(!1);
                    for (var p = 0, f = t.length; p < f; p++) {
                      var m = t[p],
                        y = m.shadow;
                      if (void 0 !== y) {
                        if (!1 !== y.autoUpdate || !1 !== y.needsUpdate) {
                          r.copy(y.mapSize);
                          var x = y.getFrameExtents();
                          if (
                            (r.multiply(x),
                            a.copy(y.mapSize),
                            (r.x > c || r.y > c) &&
                              (r.x > c &&
                                ((a.x = Math.floor(c / x.x)),
                                (r.x = a.x * x.x),
                                (y.mapSize.x = a.x)),
                              r.y > c &&
                                ((a.y = Math.floor(c / x.y)),
                                (r.y = a.y * x.y),
                                (y.mapSize.y = a.y))),
                            null === y.map &&
                              !y.isPointLightShadow &&
                              this.type === A)
                          ) {
                            var b = {
                              minFilter: Re,
                              magFilter: Re,
                              format: Je,
                            };
                            (y.map = new gi(r.x, r.y, b)),
                              (y.map.texture.name = m.name + ".shadowMap"),
                              (y.mapPass = new gi(r.x, r.y, b)),
                              y.camera.updateProjectionMatrix();
                          }
                          if (null === y.map) {
                            var w = {
                              minFilter: Te,
                              magFilter: Te,
                              format: Je,
                            };
                            (y.map = new gi(r.x, r.y, w)),
                              (y.map.texture.name = m.name + ".shadowMap"),
                              y.camera.updateProjectionMatrix();
                          }
                          e.setRenderTarget(y.map), e.clear();
                          for (
                            var S = y.getViewportCount(), E = 0;
                            E < S;
                            E++
                          ) {
                            var M = y.getViewport(E);
                            o.set(a.x * M.x, a.y * M.y, a.x * M.z, a.y * M.w),
                              d.viewport(o),
                              y.updateMatrices(m, E),
                              (i = y.getFrustum()),
                              _(n, s, y.camera, m, this.type);
                          }
                          y.isPointLightShadow || this.type !== A || g(y, s),
                            (y.needsUpdate = !1);
                        }
                      } else
                        console.warn(
                          "THREE.WebGLShadowMap:",
                          m,
                          "has no shadow."
                        );
                    }
                    (v.needsUpdate = !1), e.setRenderTarget(l, u, h);
                  }
                });
            }
            function il(e, t, n) {
              var i,
                r,
                a = n.isWebGL2,
                s = new (function () {
                  var t = !1,
                    n = new vi(),
                    i = null,
                    r = new vi(0, 0, 0, 0);
                  return {
                    setMask: function (n) {
                      i === n || t || (e.colorMask(n, n, n, n), (i = n));
                    },
                    setLocked: function (e) {
                      t = e;
                    },
                    setClear: function (t, i, a, o, s) {
                      !0 === s && ((t *= o), (i *= o), (a *= o)),
                        n.set(t, i, a, o),
                        !1 === r.equals(n) &&
                          (e.clearColor(t, i, a, o), r.copy(n));
                    },
                    reset: function () {
                      (t = !1), (i = null), r.set(-1, 0, 0, 0);
                    },
                  };
                })(),
                l = new (function () {
                  var t = !1,
                    n = null,
                    i = null,
                    r = null;
                  return {
                    setTest: function (e) {
                      e ? _e(2929) : we(2929);
                    },
                    setMask: function (i) {
                      n === i || t || (e.depthMask(i), (n = i));
                    },
                    setFunc: function (t) {
                      if (i !== t) {
                        if (t)
                          switch (t) {
                            case ee:
                              e.depthFunc(512);
                              break;
                            case te:
                              e.depthFunc(519);
                              break;
                            case ne:
                              e.depthFunc(513);
                              break;
                            case ie:
                              e.depthFunc(515);
                              break;
                            case re:
                              e.depthFunc(514);
                              break;
                            case ae:
                              e.depthFunc(518);
                              break;
                            case oe:
                              e.depthFunc(516);
                              break;
                            case se:
                              e.depthFunc(517);
                              break;
                            default:
                              e.depthFunc(515);
                          }
                        else e.depthFunc(515);
                        i = t;
                      }
                    },
                    setLocked: function (e) {
                      t = e;
                    },
                    setClear: function (t) {
                      r !== t && (e.clearDepth(t), (r = t));
                    },
                    reset: function () {
                      (t = !1), (n = null), (i = null), (r = null);
                    },
                  };
                })(),
                u = new (function () {
                  var t = !1,
                    n = null,
                    i = null,
                    r = null,
                    a = null,
                    o = null,
                    s = null,
                    l = null,
                    u = null;
                  return {
                    setTest: function (e) {
                      t || (e ? _e(2960) : we(2960));
                    },
                    setMask: function (i) {
                      n === i || t || (e.stencilMask(i), (n = i));
                    },
                    setFunc: function (t, n, o) {
                      (i === t && r === n && a === o) ||
                        (e.stencilFunc(t, n, o), (i = t), (r = n), (a = o));
                    },
                    setOp: function (t, n, i) {
                      (o === t && s === n && l === i) ||
                        (e.stencilOp(t, n, i), (o = t), (s = n), (l = i));
                    },
                    setLocked: function (e) {
                      t = e;
                    },
                    setClear: function (t) {
                      u !== t && (e.clearStencil(t), (u = t));
                    },
                    reset: function () {
                      (t = !1),
                        (n = null),
                        (i = null),
                        (r = null),
                        (a = null),
                        (o = null),
                        (s = null),
                        (l = null),
                        (u = null);
                    },
                  };
                })(),
                c = {},
                h = null,
                d = {},
                p = null,
                f = !1,
                m = null,
                v = null,
                g = null,
                y = null,
                w = null,
                S = null,
                E = null,
                M = !1,
                A = null,
                T = null,
                P = null,
                L = null,
                le = null,
                ue = e.getParameter(35661),
                ce = !1,
                he = 0,
                de = e.getParameter(7938);
              -1 !== de.indexOf("WebGL")
                ? ((he = parseFloat(/^WebGL (\d)/.exec(de)[1])), (ce = he >= 1))
                : -1 !== de.indexOf("OpenGL ES") &&
                  ((he = parseFloat(/^OpenGL ES (\d)/.exec(de)[1])),
                  (ce = he >= 2));
              var pe = null,
                fe = {},
                me = e.getParameter(3088),
                ve = e.getParameter(2978),
                ge = new vi().fromArray(me),
                ye = new vi().fromArray(ve);
              function xe(t, n, i) {
                var r = new Uint8Array(4),
                  a = e.createTexture();
                e.bindTexture(t, a),
                  e.texParameteri(t, 10241, 9728),
                  e.texParameteri(t, 10240, 9728);
                for (var o = 0; o < i; o++)
                  e.texImage2D(n + o, 0, 6408, 1, 1, 0, 6408, 5121, r);
                return a;
              }
              var be = {};
              function _e(t) {
                !0 !== c[t] && (e.enable(t), (c[t] = !0));
              }
              function we(t) {
                !1 !== c[t] && (e.disable(t), (c[t] = !1));
              }
              (be[3553] = xe(3553, 3553, 1)),
                (be[34067] = xe(34067, 34069, 6)),
                s.setClear(0, 0, 0, 1),
                l.setClear(1),
                u.setClear(0),
                _e(2929),
                l.setFunc(ie),
                Te(!1),
                Ce(b),
                _e(2884),
                Ae(R);
              var Se =
                (o((i = {}), D, 32774), o(i, V, 32778), o(i, U, 32779), i);
              if (a) (Se[z] = 32775), (Se[j] = 32776);
              else {
                var Ee = t.get("EXT_blend_minmax");
                null !== Ee && ((Se[z] = Ee.MIN_EXT), (Se[j] = Ee.MAX_EXT));
              }
              var Me =
                (o((r = {}), G, 0),
                o(r, H, 1),
                o(r, W, 768),
                o(r, q, 770),
                o(r, $, 776),
                o(r, J, 774),
                o(r, Q, 772),
                o(r, Y, 769),
                o(r, X, 771),
                o(r, K, 775),
                o(r, Z, 773),
                r);
              function Ae(t, n, i, r, a, o, s, l) {
                if (t !== R) {
                  if ((!1 === f && (_e(3042), (f = !0)), t === B))
                    (a = a || n),
                      (o = o || i),
                      (s = s || r),
                      (n === v && a === w) ||
                        (e.blendEquationSeparate(Se[n], Se[a]),
                        (v = n),
                        (w = a)),
                      (i === g && r === y && o === S && s === E) ||
                        (e.blendFuncSeparate(Me[i], Me[r], Me[o], Me[s]),
                        (g = i),
                        (y = r),
                        (S = o),
                        (E = s)),
                      (m = t),
                      (M = null);
                  else if (t !== m || l !== M) {
                    if (
                      ((v === D && w === D) ||
                        (e.blendEquation(32774), (v = D), (w = D)),
                      l)
                    )
                      switch (t) {
                        case I:
                          e.blendFuncSeparate(1, 771, 1, 771);
                          break;
                        case F:
                          e.blendFunc(1, 1);
                          break;
                        case N:
                          e.blendFuncSeparate(0, 0, 769, 771);
                          break;
                        case O:
                          e.blendFuncSeparate(0, 768, 0, 770);
                          break;
                        default:
                          console.error(
                            "THREE.WebGLState: Invalid blending: ",
                            t
                          );
                      }
                    else
                      switch (t) {
                        case I:
                          e.blendFuncSeparate(770, 771, 1, 771);
                          break;
                        case F:
                          e.blendFunc(770, 1);
                          break;
                        case N:
                          e.blendFunc(0, 769);
                          break;
                        case O:
                          e.blendFunc(0, 768);
                          break;
                        default:
                          console.error(
                            "THREE.WebGLState: Invalid blending: ",
                            t
                          );
                      }
                    (g = null),
                      (y = null),
                      (S = null),
                      (E = null),
                      (m = t),
                      (M = l);
                  }
                } else !0 === f && (we(3042), (f = !1));
              }
              function Te(t) {
                A !== t && (t ? e.frontFace(2304) : e.frontFace(2305), (A = t));
              }
              function Ce(t) {
                t !== x
                  ? (_e(2884),
                    t !== T &&
                      (t === b
                        ? e.cullFace(1029)
                        : t === _
                        ? e.cullFace(1028)
                        : e.cullFace(1032)))
                  : we(2884),
                  (T = t);
              }
              function ke(t, n, i) {
                t
                  ? (_e(32823),
                    (L === n && le === i) ||
                      (e.polygonOffset(n, i), (L = n), (le = i)))
                  : we(32823);
              }
              function Pe(t) {
                void 0 === t && (t = 33984 + ue - 1),
                  pe !== t && (e.activeTexture(t), (pe = t));
              }
              return {
                buffers: { color: s, depth: l, stencil: u },
                enable: _e,
                disable: we,
                bindFramebuffer: function (t, n) {
                  return (
                    null === n && null !== h && (n = h),
                    d[t] !== n &&
                      (e.bindFramebuffer(t, n),
                      (d[t] = n),
                      a &&
                        (36009 === t && (d[36160] = n),
                        36160 === t && (d[36009] = n)),
                      !0)
                  );
                },
                bindXRFramebuffer: function (t) {
                  t !== h && (e.bindFramebuffer(36160, t), (h = t));
                },
                useProgram: function (t) {
                  return p !== t && (e.useProgram(t), (p = t), !0);
                },
                setBlending: Ae,
                setMaterial: function (e, t) {
                  e.side === k ? we(2884) : _e(2884);
                  var n = e.side === C;
                  t && (n = !n),
                    Te(n),
                    e.blending === I && !1 === e.transparent
                      ? Ae(R)
                      : Ae(
                          e.blending,
                          e.blendEquation,
                          e.blendSrc,
                          e.blendDst,
                          e.blendEquationAlpha,
                          e.blendSrcAlpha,
                          e.blendDstAlpha,
                          e.premultipliedAlpha
                        ),
                    l.setFunc(e.depthFunc),
                    l.setTest(e.depthTest),
                    l.setMask(e.depthWrite),
                    s.setMask(e.colorWrite);
                  var i = e.stencilWrite;
                  u.setTest(i),
                    i &&
                      (u.setMask(e.stencilWriteMask),
                      u.setFunc(e.stencilFunc, e.stencilRef, e.stencilFuncMask),
                      u.setOp(e.stencilFail, e.stencilZFail, e.stencilZPass)),
                    ke(
                      e.polygonOffset,
                      e.polygonOffsetFactor,
                      e.polygonOffsetUnits
                    ),
                    !0 === e.alphaToCoverage ? _e(32926) : we(32926);
                },
                setFlipSided: Te,
                setCullFace: Ce,
                setLineWidth: function (t) {
                  t !== P && (ce && e.lineWidth(t), (P = t));
                },
                setPolygonOffset: ke,
                setScissorTest: function (e) {
                  e ? _e(3089) : we(3089);
                },
                activeTexture: Pe,
                bindTexture: function (t, n) {
                  null === pe && Pe();
                  var i = fe[pe];
                  void 0 === i &&
                    ((i = { type: void 0, texture: void 0 }), (fe[pe] = i)),
                    (i.type === t && i.texture === n) ||
                      (e.bindTexture(t, n || be[t]),
                      (i.type = t),
                      (i.texture = n));
                },
                unbindTexture: function () {
                  var t = fe[pe];
                  void 0 !== t &&
                    void 0 !== t.type &&
                    (e.bindTexture(t.type, null),
                    (t.type = void 0),
                    (t.texture = void 0));
                },
                compressedTexImage2D: function () {
                  try {
                    e.compressedTexImage2D.apply(e, arguments);
                  } catch (t) {
                    console.error("THREE.WebGLState:", t);
                  }
                },
                texImage2D: function () {
                  try {
                    e.texImage2D.apply(e, arguments);
                  } catch (t) {
                    console.error("THREE.WebGLState:", t);
                  }
                },
                texImage3D: function () {
                  try {
                    e.texImage3D.apply(e, arguments);
                  } catch (t) {
                    console.error("THREE.WebGLState:", t);
                  }
                },
                scissor: function (t) {
                  !1 === ge.equals(t) &&
                    (e.scissor(t.x, t.y, t.z, t.w), ge.copy(t));
                },
                viewport: function (t) {
                  !1 === ye.equals(t) &&
                    (e.viewport(t.x, t.y, t.z, t.w), ye.copy(t));
                },
                reset: function () {
                  e.disable(3042),
                    e.disable(2884),
                    e.disable(2929),
                    e.disable(32823),
                    e.disable(3089),
                    e.disable(2960),
                    e.disable(32926),
                    e.blendEquation(32774),
                    e.blendFunc(1, 0),
                    e.blendFuncSeparate(1, 0, 1, 0),
                    e.colorMask(!0, !0, !0, !0),
                    e.clearColor(0, 0, 0, 0),
                    e.depthMask(!0),
                    e.depthFunc(513),
                    e.clearDepth(1),
                    e.stencilMask(4294967295),
                    e.stencilFunc(519, 0, 4294967295),
                    e.stencilOp(7680, 7680, 7680),
                    e.clearStencil(0),
                    e.cullFace(1029),
                    e.frontFace(2305),
                    e.polygonOffset(0, 0),
                    e.activeTexture(33984),
                    e.bindFramebuffer(36160, null),
                    !0 === a &&
                      (e.bindFramebuffer(36009, null),
                      e.bindFramebuffer(36008, null)),
                    e.useProgram(null),
                    e.lineWidth(1),
                    e.scissor(0, 0, e.canvas.width, e.canvas.height),
                    e.viewport(0, 0, e.canvas.width, e.canvas.height),
                    (c = {}),
                    (pe = null),
                    (fe = {}),
                    (h = null),
                    (d = {}),
                    (p = null),
                    (f = !1),
                    (m = null),
                    (v = null),
                    (g = null),
                    (y = null),
                    (w = null),
                    (S = null),
                    (E = null),
                    (M = !1),
                    (A = null),
                    (T = null),
                    (P = null),
                    (L = null),
                    (le = null),
                    ge.set(0, 0, e.canvas.width, e.canvas.height),
                    ye.set(0, 0, e.canvas.width, e.canvas.height),
                    s.reset(),
                    l.reset(),
                    u.reset();
                },
              };
            }
            function rl(e, t, n, i, r, a, s) {
              var l,
                u,
                c,
                h = r.isWebGL2,
                d = r.maxTextures,
                p = r.maxCubemapSize,
                f = r.maxTextureSize,
                m = r.maxSamples,
                v = new WeakMap(),
                g = !1;
              try {
                g =
                  "undefined" !== typeof OffscreenCanvas &&
                  null !== new OffscreenCanvas(1, 1).getContext("2d");
              } catch (z) {}
              function y(e, t) {
                return g
                  ? new OffscreenCanvas(e, t)
                  : document.createElementNS(
                      "http://www.w3.org/1999/xhtml",
                      "canvas"
                    );
              }
              function x(e, t, n, i) {
                var r = 1;
                if (
                  ((e.width > i || e.height > i) &&
                    (r = i / Math.max(e.width, e.height)),
                  r < 1 || !0 === t)
                ) {
                  if (
                    ("undefined" !== typeof HTMLImageElement &&
                      e instanceof HTMLImageElement) ||
                    ("undefined" !== typeof HTMLCanvasElement &&
                      e instanceof HTMLCanvasElement) ||
                    ("undefined" !== typeof ImageBitmap &&
                      e instanceof ImageBitmap)
                  ) {
                    var a = t ? si : Math.floor,
                      o = a(r * e.width),
                      s = a(r * e.height);
                    void 0 === c && (c = y(o, s));
                    var l = n ? y(o, s) : c;
                    return (
                      (l.width = o),
                      (l.height = s),
                      l.getContext("2d").drawImage(e, 0, 0, o, s),
                      console.warn(
                        "THREE.WebGLRenderer: Texture has been resized from (" +
                          e.width +
                          "x" +
                          e.height +
                          ") to (" +
                          o +
                          "x" +
                          s +
                          ")."
                      ),
                      l
                    );
                  }
                  return (
                    "data" in e &&
                      console.warn(
                        "THREE.WebGLRenderer: Image in DataTexture is too big (" +
                          e.width +
                          "x" +
                          e.height +
                          ")."
                      ),
                    e
                  );
                }
                return e;
              }
              function b(e) {
                return ai(e.width) && ai(e.height);
              }
              function _(e, t) {
                return (
                  e.generateMipmaps &&
                  t &&
                  e.minFilter !== Te &&
                  e.minFilter !== Re
                );
              }
              function w(t, n, r, a) {
                e.generateMipmap(t),
                  (i.get(n).__maxMipLevel = Math.log2(Math.max(r, a)));
              }
              function S(n, i, r) {
                if (!1 === h) return i;
                if (null !== n) {
                  if (void 0 !== e[n]) return e[n];
                  console.warn(
                    "THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '" +
                      n +
                      "'"
                  );
                }
                var a = i;
                return (
                  6403 === i &&
                    (5126 === r && (a = 33326),
                    5131 === r && (a = 33325),
                    5121 === r && (a = 33321)),
                  6407 === i &&
                    (5126 === r && (a = 34837),
                    5131 === r && (a = 34843),
                    5121 === r && (a = 32849)),
                  6408 === i &&
                    (5126 === r && (a = 34836),
                    5131 === r && (a = 34842),
                    5121 === r && (a = 32856)),
                  (33325 !== a && 33326 !== a && 34842 !== a && 34836 !== a) ||
                    t.get("EXT_color_buffer_float"),
                  a
                );
              }
              function E(e) {
                return e === Te || e === Ce || e === Pe ? 9728 : 9729;
              }
              function M(t) {
                var n = t.target;
                n.removeEventListener("dispose", M),
                  (function (t) {
                    var n = i.get(t);
                    void 0 !== n.__webglInit &&
                      (e.deleteTexture(n.__webglTexture), i.remove(t));
                  })(n),
                  n.isVideoTexture && v.delete(n),
                  s.memory.textures--;
              }
              function A(t) {
                var n = t.target;
                n.removeEventListener("dispose", A),
                  (function (t) {
                    var n = t.texture,
                      r = i.get(t),
                      a = i.get(n);
                    if (t) {
                      if (
                        (void 0 !== a.__webglTexture &&
                          (e.deleteTexture(a.__webglTexture),
                          s.memory.textures--),
                        t.depthTexture && t.depthTexture.dispose(),
                        t.isWebGLCubeRenderTarget)
                      )
                        for (var o = 0; o < 6; o++)
                          e.deleteFramebuffer(r.__webglFramebuffer[o]),
                            r.__webglDepthbuffer &&
                              e.deleteRenderbuffer(r.__webglDepthbuffer[o]);
                      else
                        e.deleteFramebuffer(r.__webglFramebuffer),
                          r.__webglDepthbuffer &&
                            e.deleteRenderbuffer(r.__webglDepthbuffer),
                          r.__webglMultisampledFramebuffer &&
                            e.deleteFramebuffer(
                              r.__webglMultisampledFramebuffer
                            ),
                          r.__webglColorRenderbuffer &&
                            e.deleteRenderbuffer(r.__webglColorRenderbuffer),
                          r.__webglDepthRenderbuffer &&
                            e.deleteRenderbuffer(r.__webglDepthRenderbuffer);
                      if (t.isWebGLMultipleRenderTargets)
                        for (var l = 0, u = n.length; l < u; l++) {
                          var c = i.get(n[l]);
                          c.__webglTexture &&
                            (e.deleteTexture(c.__webglTexture),
                            s.memory.textures--),
                            i.remove(n[l]);
                        }
                      i.remove(n), i.remove(t);
                    }
                  })(n);
              }
              var T = 0;
              function C(e, t) {
                var r = i.get(e);
                if (
                  (e.isVideoTexture &&
                    (function (e) {
                      var t = s.render.frame;
                      v.get(e) !== t && (v.set(e, t), e.update());
                    })(e),
                  e.version > 0 && r.__version !== e.version)
                ) {
                  var a = e.image;
                  if (void 0 === a)
                    console.warn(
                      "THREE.WebGLRenderer: Texture marked for update but image is undefined"
                    );
                  else {
                    if (!1 !== a.complete) return void F(r, e, t);
                    console.warn(
                      "THREE.WebGLRenderer: Texture marked for update but image is incomplete"
                    );
                  }
                }
                n.activeTexture(33984 + t),
                  n.bindTexture(3553, r.__webglTexture);
              }
              function k(t, r) {
                var o = i.get(t);
                t.version > 0 && o.__version !== t.version
                  ? (function (t, i, r) {
                      if (6 === i.image.length) {
                        I(t, i),
                          n.activeTexture(33984 + r),
                          n.bindTexture(34067, t.__webglTexture),
                          e.pixelStorei(37440, i.flipY),
                          e.pixelStorei(37441, i.premultiplyAlpha),
                          e.pixelStorei(3317, i.unpackAlignment),
                          e.pixelStorei(37443, 0);
                        for (
                          var o =
                              i &&
                              (i.isCompressedTexture ||
                                i.image[0].isCompressedTexture),
                            s = i.image[0] && i.image[0].isDataTexture,
                            l = [],
                            u = 0;
                          u < 6;
                          u++
                        )
                          l[u] =
                            o || s
                              ? s
                                ? i.image[u].image
                                : i.image[u]
                              : x(i.image[u], !1, !0, p);
                        var c,
                          d = l[0],
                          f = b(d) || h,
                          m = a.convert(i.format),
                          v = a.convert(i.type),
                          g = S(i.internalFormat, m, v);
                        if ((R(34067, i, f), o)) {
                          for (var y = 0; y < 6; y++) {
                            c = l[y].mipmaps;
                            for (var E = 0; E < c.length; E++) {
                              var M = c[E];
                              i.format !== Je && i.format !== Ze
                                ? null !== m
                                  ? n.compressedTexImage2D(
                                      34069 + y,
                                      E,
                                      g,
                                      M.width,
                                      M.height,
                                      0,
                                      M.data
                                    )
                                  : console.warn(
                                      "THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"
                                    )
                                : n.texImage2D(
                                    34069 + y,
                                    E,
                                    g,
                                    M.width,
                                    M.height,
                                    0,
                                    m,
                                    v,
                                    M.data
                                  );
                            }
                          }
                          t.__maxMipLevel = c.length - 1;
                        } else {
                          c = i.mipmaps;
                          for (var A = 0; A < 6; A++)
                            if (s) {
                              n.texImage2D(
                                34069 + A,
                                0,
                                g,
                                l[A].width,
                                l[A].height,
                                0,
                                m,
                                v,
                                l[A].data
                              );
                              for (var T = 0; T < c.length; T++) {
                                var C = c[T].image[A].image;
                                n.texImage2D(
                                  34069 + A,
                                  T + 1,
                                  g,
                                  C.width,
                                  C.height,
                                  0,
                                  m,
                                  v,
                                  C.data
                                );
                              }
                            } else {
                              n.texImage2D(34069 + A, 0, g, m, v, l[A]);
                              for (var k = 0; k < c.length; k++) {
                                var P = c[k];
                                n.texImage2D(
                                  34069 + A,
                                  k + 1,
                                  g,
                                  m,
                                  v,
                                  P.image[A]
                                );
                              }
                            }
                          t.__maxMipLevel = c.length;
                        }
                        _(i, f) && w(34067, i, d.width, d.height),
                          (t.__version = i.version),
                          i.onUpdate && i.onUpdate(i);
                      }
                    })(o, t, r)
                  : (n.activeTexture(33984 + r),
                    n.bindTexture(34067, o.__webglTexture));
              }
              var P =
                  (o((l = {}), Ee, 10497), o(l, Me, 33071), o(l, Ae, 33648), l),
                L =
                  (o((u = {}), Te, 9728),
                  o(u, Ce, 9984),
                  o(u, Pe, 9986),
                  o(u, Re, 9729),
                  o(u, Ie, 9985),
                  o(u, Ne, 9987),
                  u);
              function R(n, a, o) {
                if (
                  (o
                    ? (e.texParameteri(n, 10242, P[a.wrapS]),
                      e.texParameteri(n, 10243, P[a.wrapT]),
                      (32879 !== n && 35866 !== n) ||
                        e.texParameteri(n, 32882, P[a.wrapR]),
                      e.texParameteri(n, 10240, L[a.magFilter]),
                      e.texParameteri(n, 10241, L[a.minFilter]))
                    : (e.texParameteri(n, 10242, 33071),
                      e.texParameteri(n, 10243, 33071),
                      (32879 !== n && 35866 !== n) ||
                        e.texParameteri(n, 32882, 33071),
                      (a.wrapS === Me && a.wrapT === Me) ||
                        console.warn(
                          "THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."
                        ),
                      e.texParameteri(n, 10240, E(a.magFilter)),
                      e.texParameteri(n, 10241, E(a.minFilter)),
                      a.minFilter !== Te &&
                        a.minFilter !== Re &&
                        console.warn(
                          "THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."
                        )),
                  !0 === t.has("EXT_texture_filter_anisotropic"))
                ) {
                  var s = t.get("EXT_texture_filter_anisotropic");
                  if (a.type === Ge && !1 === t.has("OES_texture_float_linear"))
                    return;
                  if (
                    !1 === h &&
                    a.type === He &&
                    !1 === t.has("OES_texture_half_float_linear")
                  )
                    return;
                  (a.anisotropy > 1 || i.get(a).__currentAnisotropy) &&
                    (e.texParameterf(
                      n,
                      s.TEXTURE_MAX_ANISOTROPY_EXT,
                      Math.min(a.anisotropy, r.getMaxAnisotropy())
                    ),
                    (i.get(a).__currentAnisotropy = a.anisotropy));
                }
              }
              function I(t, n) {
                void 0 === t.__webglInit &&
                  ((t.__webglInit = !0),
                  n.addEventListener("dispose", M),
                  (t.__webglTexture = e.createTexture()),
                  s.memory.textures++);
              }
              function F(t, i, r) {
                var o = 3553;
                i.isDataTexture2DArray && (o = 35866),
                  i.isDataTexture3D && (o = 32879),
                  I(t, i),
                  n.activeTexture(33984 + r),
                  n.bindTexture(o, t.__webglTexture),
                  e.pixelStorei(37440, i.flipY),
                  e.pixelStorei(37441, i.premultiplyAlpha),
                  e.pixelStorei(3317, i.unpackAlignment),
                  e.pixelStorei(37443, 0);
                var s,
                  l =
                    (function (e) {
                      return (
                        !h &&
                        (e.wrapS !== Me ||
                          e.wrapT !== Me ||
                          (e.minFilter !== Te && e.minFilter !== Re))
                      );
                    })(i) && !1 === b(i.image),
                  u = x(i.image, l, !1, f),
                  c = b(u) || h,
                  d = a.convert(i.format),
                  p = a.convert(i.type),
                  m = S(i.internalFormat, d, p);
                R(o, i, c);
                var v = i.mipmaps;
                if (i.isDepthTexture)
                  (m = 6402),
                    h
                      ? (m =
                          i.type === Ge
                            ? 36012
                            : i.type === je
                            ? 33190
                            : i.type === Xe
                            ? 35056
                            : 33189)
                      : i.type === Ge &&
                        console.error(
                          "WebGLRenderer: Floating point depth texture requires WebGL2."
                        ),
                    i.format === tt &&
                      6402 === m &&
                      i.type !== Ue &&
                      i.type !== je &&
                      (console.warn(
                        "THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."
                      ),
                      (i.type = Ue),
                      (p = a.convert(i.type))),
                    i.format === nt &&
                      6402 === m &&
                      ((m = 34041),
                      i.type !== Xe &&
                        (console.warn(
                          "THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."
                        ),
                        (i.type = Xe),
                        (p = a.convert(i.type)))),
                    n.texImage2D(3553, 0, m, u.width, u.height, 0, d, p, null);
                else if (i.isDataTexture)
                  if (v.length > 0 && c) {
                    for (var g = 0, y = v.length; g < y; g++)
                      (s = v[g]),
                        n.texImage2D(
                          3553,
                          g,
                          m,
                          s.width,
                          s.height,
                          0,
                          d,
                          p,
                          s.data
                        );
                    (i.generateMipmaps = !1), (t.__maxMipLevel = v.length - 1);
                  } else
                    n.texImage2D(
                      3553,
                      0,
                      m,
                      u.width,
                      u.height,
                      0,
                      d,
                      p,
                      u.data
                    ),
                      (t.__maxMipLevel = 0);
                else if (i.isCompressedTexture) {
                  for (var E = 0, M = v.length; E < M; E++)
                    (s = v[E]),
                      i.format !== Je && i.format !== Ze
                        ? null !== d
                          ? n.compressedTexImage2D(
                              3553,
                              E,
                              m,
                              s.width,
                              s.height,
                              0,
                              s.data
                            )
                          : console.warn(
                              "THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"
                            )
                        : n.texImage2D(
                            3553,
                            E,
                            m,
                            s.width,
                            s.height,
                            0,
                            d,
                            p,
                            s.data
                          );
                  t.__maxMipLevel = v.length - 1;
                } else if (i.isDataTexture2DArray)
                  n.texImage3D(
                    35866,
                    0,
                    m,
                    u.width,
                    u.height,
                    u.depth,
                    0,
                    d,
                    p,
                    u.data
                  ),
                    (t.__maxMipLevel = 0);
                else if (i.isDataTexture3D)
                  n.texImage3D(
                    32879,
                    0,
                    m,
                    u.width,
                    u.height,
                    u.depth,
                    0,
                    d,
                    p,
                    u.data
                  ),
                    (t.__maxMipLevel = 0);
                else if (v.length > 0 && c) {
                  for (var A = 0, T = v.length; A < T; A++)
                    (s = v[A]), n.texImage2D(3553, A, m, d, p, s);
                  (i.generateMipmaps = !1), (t.__maxMipLevel = v.length - 1);
                } else n.texImage2D(3553, 0, m, d, p, u), (t.__maxMipLevel = 0);
                _(i, c) && w(o, i, u.width, u.height),
                  (t.__version = i.version),
                  i.onUpdate && i.onUpdate(i);
              }
              function N(t, r, o, s, l) {
                var u = a.convert(o.format),
                  c = a.convert(o.type),
                  h = S(o.internalFormat, u, c);
                32879 === l || 35866 === l
                  ? n.texImage3D(
                      l,
                      0,
                      h,
                      r.width,
                      r.height,
                      r.depth,
                      0,
                      u,
                      c,
                      null
                    )
                  : n.texImage2D(l, 0, h, r.width, r.height, 0, u, c, null),
                  n.bindFramebuffer(36160, t),
                  e.framebufferTexture2D(
                    36160,
                    s,
                    l,
                    i.get(o).__webglTexture,
                    0
                  ),
                  n.bindFramebuffer(36160, null);
              }
              function O(t, n, i) {
                if (
                  (e.bindRenderbuffer(36161, t),
                  n.depthBuffer && !n.stencilBuffer)
                ) {
                  var r = 33189;
                  if (i) {
                    var o = n.depthTexture;
                    o &&
                      o.isDepthTexture &&
                      (o.type === Ge
                        ? (r = 36012)
                        : o.type === je && (r = 33190));
                    var s = D(n);
                    e.renderbufferStorageMultisample(
                      36161,
                      s,
                      r,
                      n.width,
                      n.height
                    );
                  } else e.renderbufferStorage(36161, r, n.width, n.height);
                  e.framebufferRenderbuffer(36160, 36096, 36161, t);
                } else if (n.depthBuffer && n.stencilBuffer) {
                  if (i) {
                    var l = D(n);
                    e.renderbufferStorageMultisample(
                      36161,
                      l,
                      35056,
                      n.width,
                      n.height
                    );
                  } else e.renderbufferStorage(36161, 34041, n.width, n.height);
                  e.framebufferRenderbuffer(36160, 33306, 36161, t);
                } else {
                  var u =
                      !0 === n.isWebGLMultipleRenderTargets
                        ? n.texture[0]
                        : n.texture,
                    c = a.convert(u.format),
                    h = a.convert(u.type),
                    d = S(u.internalFormat, c, h);
                  if (i) {
                    var p = D(n);
                    e.renderbufferStorageMultisample(
                      36161,
                      p,
                      d,
                      n.width,
                      n.height
                    );
                  } else e.renderbufferStorage(36161, d, n.width, n.height);
                }
                e.bindRenderbuffer(36161, null);
              }
              function B(t) {
                var r = i.get(t),
                  a = !0 === t.isWebGLCubeRenderTarget;
                if (t.depthTexture) {
                  if (a)
                    throw new Error(
                      "target.depthTexture not supported in Cube render targets"
                    );
                  !(function (t, r) {
                    if (r && r.isWebGLCubeRenderTarget)
                      throw new Error(
                        "Depth Texture with cube render targets is not supported"
                      );
                    if (
                      (n.bindFramebuffer(36160, t),
                      !r.depthTexture || !r.depthTexture.isDepthTexture)
                    )
                      throw new Error(
                        "renderTarget.depthTexture must be an instance of THREE.DepthTexture"
                      );
                    (i.get(r.depthTexture).__webglTexture &&
                      r.depthTexture.image.width === r.width &&
                      r.depthTexture.image.height === r.height) ||
                      ((r.depthTexture.image.width = r.width),
                      (r.depthTexture.image.height = r.height),
                      (r.depthTexture.needsUpdate = !0)),
                      C(r.depthTexture, 0);
                    var a = i.get(r.depthTexture).__webglTexture;
                    if (r.depthTexture.format === tt)
                      e.framebufferTexture2D(36160, 36096, 3553, a, 0);
                    else {
                      if (r.depthTexture.format !== nt)
                        throw new Error("Unknown depthTexture format");
                      e.framebufferTexture2D(36160, 33306, 3553, a, 0);
                    }
                  })(r.__webglFramebuffer, t);
                } else if (a) {
                  r.__webglDepthbuffer = [];
                  for (var o = 0; o < 6; o++)
                    n.bindFramebuffer(36160, r.__webglFramebuffer[o]),
                      (r.__webglDepthbuffer[o] = e.createRenderbuffer()),
                      O(r.__webglDepthbuffer[o], t, !1);
                } else
                  n.bindFramebuffer(36160, r.__webglFramebuffer),
                    (r.__webglDepthbuffer = e.createRenderbuffer()),
                    O(r.__webglDepthbuffer, t, !1);
                n.bindFramebuffer(36160, null);
              }
              function D(e) {
                return h && e.isWebGLMultisampleRenderTarget
                  ? Math.min(m, e.samples)
                  : 0;
              }
              var V = !1,
                U = !1;
              (this.allocateTextureUnit = function () {
                var e = T;
                return (
                  e >= d &&
                    console.warn(
                      "THREE.WebGLTextures: Trying to use " +
                        e +
                        " texture units while this GPU supports only " +
                        d
                    ),
                  (T += 1),
                  e
                );
              }),
                (this.resetTextureUnits = function () {
                  T = 0;
                }),
                (this.setTexture2D = C),
                (this.setTexture2DArray = function (e, t) {
                  var r = i.get(e);
                  e.version > 0 && r.__version !== e.version
                    ? F(r, e, t)
                    : (n.activeTexture(33984 + t),
                      n.bindTexture(35866, r.__webglTexture));
                }),
                (this.setTexture3D = function (e, t) {
                  var r = i.get(e);
                  e.version > 0 && r.__version !== e.version
                    ? F(r, e, t)
                    : (n.activeTexture(33984 + t),
                      n.bindTexture(32879, r.__webglTexture));
                }),
                (this.setTextureCube = k),
                (this.setupRenderTarget = function (t) {
                  var o = t.texture,
                    l = i.get(t),
                    u = i.get(o);
                  t.addEventListener("dispose", A),
                    !0 !== t.isWebGLMultipleRenderTargets &&
                      ((u.__webglTexture = e.createTexture()),
                      (u.__version = o.version),
                      s.memory.textures++);
                  var c = !0 === t.isWebGLCubeRenderTarget,
                    d = !0 === t.isWebGLMultipleRenderTargets,
                    p = !0 === t.isWebGLMultisampleRenderTarget,
                    f = o.isDataTexture3D || o.isDataTexture2DArray,
                    m = b(t) || h;
                  if (
                    (!h ||
                      o.format !== Ze ||
                      (o.type !== Ge && o.type !== He) ||
                      ((o.format = Je),
                      console.warn(
                        "THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead."
                      )),
                    c)
                  ) {
                    l.__webglFramebuffer = [];
                    for (var v = 0; v < 6; v++)
                      l.__webglFramebuffer[v] = e.createFramebuffer();
                  } else if (
                    ((l.__webglFramebuffer = e.createFramebuffer()), d)
                  )
                    if (r.drawBuffers)
                      for (var g = t.texture, y = 0, x = g.length; y < x; y++) {
                        var E = i.get(g[y]);
                        void 0 === E.__webglTexture &&
                          ((E.__webglTexture = e.createTexture()),
                          s.memory.textures++);
                      }
                    else
                      console.warn(
                        "THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension."
                      );
                  else if (p)
                    if (h) {
                      (l.__webglMultisampledFramebuffer =
                        e.createFramebuffer()),
                        (l.__webglColorRenderbuffer = e.createRenderbuffer()),
                        e.bindRenderbuffer(36161, l.__webglColorRenderbuffer);
                      var M = a.convert(o.format),
                        T = a.convert(o.type),
                        C = S(o.internalFormat, M, T),
                        k = D(t);
                      e.renderbufferStorageMultisample(
                        36161,
                        k,
                        C,
                        t.width,
                        t.height
                      ),
                        n.bindFramebuffer(
                          36160,
                          l.__webglMultisampledFramebuffer
                        ),
                        e.framebufferRenderbuffer(
                          36160,
                          36064,
                          36161,
                          l.__webglColorRenderbuffer
                        ),
                        e.bindRenderbuffer(36161, null),
                        t.depthBuffer &&
                          ((l.__webglDepthRenderbuffer =
                            e.createRenderbuffer()),
                          O(l.__webglDepthRenderbuffer, t, !0)),
                        n.bindFramebuffer(36160, null);
                    } else
                      console.warn(
                        "THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2."
                      );
                  if (c) {
                    n.bindTexture(34067, u.__webglTexture), R(34067, o, m);
                    for (var P = 0; P < 6; P++)
                      N(l.__webglFramebuffer[P], t, o, 36064, 34069 + P);
                    _(o, m) && w(34067, o, t.width, t.height),
                      n.bindTexture(34067, null);
                  } else if (d) {
                    for (var L = t.texture, I = 0, F = L.length; I < F; I++) {
                      var V = L[I],
                        U = i.get(V);
                      n.bindTexture(3553, U.__webglTexture),
                        R(3553, V, m),
                        N(l.__webglFramebuffer, t, V, 36064 + I, 3553),
                        _(V, m) && w(3553, V, t.width, t.height);
                    }
                    n.bindTexture(3553, null);
                  } else {
                    var z = 3553;
                    f &&
                      (h
                        ? (z = o.isDataTexture3D ? 32879 : 35866)
                        : console.warn(
                            "THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2."
                          )),
                      n.bindTexture(z, u.__webglTexture),
                      R(z, o, m),
                      N(l.__webglFramebuffer, t, o, 36064, z),
                      _(o, m) && w(3553, o, t.width, t.height),
                      n.bindTexture(3553, null);
                  }
                  t.depthBuffer && B(t);
                }),
                (this.updateRenderTargetMipmap = function (e) {
                  for (
                    var t = b(e) || h,
                      r =
                        !0 === e.isWebGLMultipleRenderTargets
                          ? e.texture
                          : [e.texture],
                      a = 0,
                      o = r.length;
                    a < o;
                    a++
                  ) {
                    var s = r[a];
                    if (_(s, t)) {
                      var l = e.isWebGLCubeRenderTarget ? 34067 : 3553,
                        u = i.get(s).__webglTexture;
                      n.bindTexture(l, u),
                        w(l, s, e.width, e.height),
                        n.bindTexture(l, null);
                    }
                  }
                }),
                (this.updateMultisampleRenderTarget = function (t) {
                  if (t.isWebGLMultisampleRenderTarget)
                    if (h) {
                      var r = t.width,
                        a = t.height,
                        o = 16384;
                      t.depthBuffer && (o |= 256),
                        t.stencilBuffer && (o |= 1024);
                      var s = i.get(t);
                      n.bindFramebuffer(
                        36008,
                        s.__webglMultisampledFramebuffer
                      ),
                        n.bindFramebuffer(36009, s.__webglFramebuffer),
                        e.blitFramebuffer(0, 0, r, a, 0, 0, r, a, o, 9728),
                        n.bindFramebuffer(36008, null),
                        n.bindFramebuffer(
                          36009,
                          s.__webglMultisampledFramebuffer
                        );
                    } else
                      console.warn(
                        "THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2."
                      );
                }),
                (this.safeSetTexture2D = function (e, t) {
                  e &&
                    e.isWebGLRenderTarget &&
                    (!1 === V &&
                      (console.warn(
                        "THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."
                      ),
                      (V = !0)),
                    (e = e.texture)),
                    C(e, t);
                }),
                (this.safeSetTextureCube = function (e, t) {
                  e &&
                    e.isWebGLCubeRenderTarget &&
                    (!1 === U &&
                      (console.warn(
                        "THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."
                      ),
                      (U = !0)),
                    (e = e.texture)),
                    k(e, t);
                });
            }
            function al(e, t, n) {
              var i = n.isWebGL2;
              return {
                convert: function (e) {
                  var n;
                  if (e === Be) return 5121;
                  if (e === We) return 32819;
                  if (e === Ye) return 32820;
                  if (e === qe) return 33635;
                  if (e === De) return 5120;
                  if (e === Ve) return 5122;
                  if (e === Ue) return 5123;
                  if (e === ze) return 5124;
                  if (e === je) return 5125;
                  if (e === Ge) return 5126;
                  if (e === He)
                    return i
                      ? 5131
                      : null !== (n = t.get("OES_texture_half_float"))
                      ? n.HALF_FLOAT_OES
                      : null;
                  if (e === Qe) return 6406;
                  if (e === Ze) return 6407;
                  if (e === Je) return 6408;
                  if (e === Ke) return 6409;
                  if (e === $e) return 6410;
                  if (e === tt) return 6402;
                  if (e === nt) return 34041;
                  if (e === it) return 6403;
                  if (e === rt) return 36244;
                  if (e === at) return 33319;
                  if (e === ot) return 33320;
                  if (e === st) return 36248;
                  if (e === lt) return 36249;
                  if (e === ut || e === ct || e === ht || e === dt) {
                    if (null === (n = t.get("WEBGL_compressed_texture_s3tc")))
                      return null;
                    if (e === ut) return n.COMPRESSED_RGB_S3TC_DXT1_EXT;
                    if (e === ct) return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;
                    if (e === ht) return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;
                    if (e === dt) return n.COMPRESSED_RGBA_S3TC_DXT5_EXT;
                  }
                  if (e === pt || e === ft || e === mt || e === vt) {
                    if (null === (n = t.get("WEBGL_compressed_texture_pvrtc")))
                      return null;
                    if (e === pt) return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;
                    if (e === ft) return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;
                    if (e === mt) return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;
                    if (e === vt) return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;
                  }
                  if (e === gt)
                    return null !== (n = t.get("WEBGL_compressed_texture_etc1"))
                      ? n.COMPRESSED_RGB_ETC1_WEBGL
                      : null;
                  if (
                    (e === yt || e === xt) &&
                    null !== (n = t.get("WEBGL_compressed_texture_etc"))
                  ) {
                    if (e === yt) return n.COMPRESSED_RGB8_ETC2;
                    if (e === xt) return n.COMPRESSED_RGBA8_ETC2_EAC;
                  }
                  return e === bt ||
                    e === _t ||
                    e === wt ||
                    e === St ||
                    e === Et ||
                    e === Mt ||
                    e === At ||
                    e === Tt ||
                    e === Ct ||
                    e === kt ||
                    e === Pt ||
                    e === Lt ||
                    e === Rt ||
                    e === It ||
                    e === Nt ||
                    e === Ot ||
                    e === Bt ||
                    e === Dt ||
                    e === Vt ||
                    e === Ut ||
                    e === zt ||
                    e === jt ||
                    e === Gt ||
                    e === Ht ||
                    e === Wt ||
                    e === Yt ||
                    e === qt ||
                    e === Xt
                    ? null !== (n = t.get("WEBGL_compressed_texture_astc"))
                      ? e
                      : null
                    : e === Ft
                    ? null !== (n = t.get("EXT_texture_compression_bptc"))
                      ? e
                      : null
                    : e === Xe
                    ? i
                      ? 34042
                      : null !== (n = t.get("WEBGL_depth_texture"))
                      ? n.UNSIGNED_INT_24_8_WEBGL
                      : null
                    : void 0;
                },
              };
            }
            tl.prototype.isMeshDistanceMaterial = !0;
            var ol = (function (e) {
              function t() {
                var e,
                  n =
                    arguments.length > 0 && void 0 !== arguments[0]
                      ? arguments[0]
                      : [];
                return (
                  f(this, t), ((e = c(this, h(t).call(this))).cameras = n), e
                );
              }
              return p(t, e), t;
            })(Ha);
            ol.prototype.isArrayCamera = !0;
            var sl = (function (e) {
              function t() {
                var e;
                return (
                  f(this, t), ((e = c(this, h(t).call(this))).type = "Group"), e
                );
              }
              return p(t, e), t;
            })(Sr);
            sl.prototype.isGroup = !0;
            var ll = { type: "move" },
              ul = (function () {
                function e() {
                  f(this, e),
                    (this._targetRay = null),
                    (this._grip = null),
                    (this._hand = null);
                }
                return (
                  m(e, [
                    {
                      key: "getHandSpace",
                      value: function () {
                        return (
                          null === this._hand &&
                            ((this._hand = new sl()),
                            (this._hand.matrixAutoUpdate = !1),
                            (this._hand.visible = !1),
                            (this._hand.joints = {}),
                            (this._hand.inputState = { pinching: !1 })),
                          this._hand
                        );
                      },
                    },
                    {
                      key: "getTargetRaySpace",
                      value: function () {
                        return (
                          null === this._targetRay &&
                            ((this._targetRay = new sl()),
                            (this._targetRay.matrixAutoUpdate = !1),
                            (this._targetRay.visible = !1),
                            (this._targetRay.hasLinearVelocity = !1),
                            (this._targetRay.linearVelocity = new _i()),
                            (this._targetRay.hasAngularVelocity = !1),
                            (this._targetRay.angularVelocity = new _i())),
                          this._targetRay
                        );
                      },
                    },
                    {
                      key: "getGripSpace",
                      value: function () {
                        return (
                          null === this._grip &&
                            ((this._grip = new sl()),
                            (this._grip.matrixAutoUpdate = !1),
                            (this._grip.visible = !1),
                            (this._grip.hasLinearVelocity = !1),
                            (this._grip.linearVelocity = new _i()),
                            (this._grip.hasAngularVelocity = !1),
                            (this._grip.angularVelocity = new _i())),
                          this._grip
                        );
                      },
                    },
                    {
                      key: "dispatchEvent",
                      value: function (e) {
                        return (
                          null !== this._targetRay &&
                            this._targetRay.dispatchEvent(e),
                          null !== this._grip && this._grip.dispatchEvent(e),
                          null !== this._hand && this._hand.dispatchEvent(e),
                          this
                        );
                      },
                    },
                    {
                      key: "disconnect",
                      value: function (e) {
                        return (
                          this.dispatchEvent({ type: "disconnected", data: e }),
                          null !== this._targetRay &&
                            (this._targetRay.visible = !1),
                          null !== this._grip && (this._grip.visible = !1),
                          null !== this._hand && (this._hand.visible = !1),
                          this
                        );
                      },
                    },
                    {
                      key: "update",
                      value: function (e, t, n) {
                        var i = null,
                          r = null,
                          a = null,
                          o = this._targetRay,
                          s = this._grip,
                          l = this._hand;
                        if (
                          e &&
                          "visible-blurred" !== t.session.visibilityState
                        )
                          if (
                            (null !== o &&
                              null !== (i = t.getPose(e.targetRaySpace, n)) &&
                              (o.matrix.fromArray(i.transform.matrix),
                              o.matrix.decompose(
                                o.position,
                                o.rotation,
                                o.scale
                              ),
                              i.linearVelocity
                                ? ((o.hasLinearVelocity = !0),
                                  o.linearVelocity.copy(i.linearVelocity))
                                : (o.hasLinearVelocity = !1),
                              i.angularVelocity
                                ? ((o.hasAngularVelocity = !0),
                                  o.angularVelocity.copy(i.angularVelocity))
                                : (o.hasAngularVelocity = !1),
                              this.dispatchEvent(ll)),
                            l && e.hand)
                          ) {
                            a = !0;
                            var u = !0,
                              c = !1,
                              h = void 0;
                            try {
                              for (
                                var d, p = e.hand.values()[Symbol.iterator]();
                                !(u = (d = p.next()).done);
                                u = !0
                              ) {
                                var f = d.value,
                                  m = t.getJointPose(f, n);
                                if (void 0 === l.joints[f.jointName]) {
                                  var v = new sl();
                                  (v.matrixAutoUpdate = !1),
                                    (v.visible = !1),
                                    (l.joints[f.jointName] = v),
                                    l.add(v);
                                }
                                var g = l.joints[f.jointName];
                                null !== m &&
                                  (g.matrix.fromArray(m.transform.matrix),
                                  g.matrix.decompose(
                                    g.position,
                                    g.rotation,
                                    g.scale
                                  ),
                                  (g.jointRadius = m.radius)),
                                  (g.visible = null !== m);
                              }
                            } catch (_) {
                              (c = !0), (h = _);
                            } finally {
                              try {
                                u || null == p.return || p.return();
                              } finally {
                                if (c) throw h;
                              }
                            }
                            var y = l.joints["index-finger-tip"],
                              x = l.joints["thumb-tip"],
                              b = y.position.distanceTo(x.position);
                            l.inputState.pinching && b > 0.025
                              ? ((l.inputState.pinching = !1),
                                this.dispatchEvent({
                                  type: "pinchend",
                                  handedness: e.handedness,
                                  target: this,
                                }))
                              : !l.inputState.pinching &&
                                b <= 0.015 &&
                                ((l.inputState.pinching = !0),
                                this.dispatchEvent({
                                  type: "pinchstart",
                                  handedness: e.handedness,
                                  target: this,
                                }));
                          } else
                            null !== s &&
                              e.gripSpace &&
                              null !== (r = t.getPose(e.gripSpace, n)) &&
                              (s.matrix.fromArray(r.transform.matrix),
                              s.matrix.decompose(
                                s.position,
                                s.rotation,
                                s.scale
                              ),
                              r.linearVelocity
                                ? ((s.hasLinearVelocity = !0),
                                  s.linearVelocity.copy(r.linearVelocity))
                                : (s.hasLinearVelocity = !1),
                              r.angularVelocity
                                ? ((s.hasAngularVelocity = !0),
                                  s.angularVelocity.copy(r.angularVelocity))
                                : (s.hasAngularVelocity = !1));
                        return (
                          null !== o && (o.visible = null !== i),
                          null !== s && (s.visible = null !== r),
                          null !== l && (l.visible = null !== a),
                          this
                        );
                      },
                    },
                  ]),
                  e
                );
              })(),
              cl = (function (e) {
                function t(e, n) {
                  var i;
                  f(this, t), (i = c(this, h(t).call(this)));
                  var o = d(i),
                    s = e.state,
                    l = null,
                    u = 1,
                    p = null,
                    m = "local-floor",
                    v = null,
                    g = [],
                    y = new Map(),
                    x = new Ha();
                  x.layers.enable(1), (x.viewport = new vi());
                  var b = new Ha();
                  b.layers.enable(2), (b.viewport = new vi());
                  var _ = [x, b],
                    w = new ol();
                  w.layers.enable(1), w.layers.enable(2);
                  var S = null,
                    E = null;
                  function M(e) {
                    var t = y.get(e.inputSource);
                    t && t.dispatchEvent({ type: e.type, data: e.inputSource });
                  }
                  function A() {
                    y.forEach(function (e, t) {
                      e.disconnect(t);
                    }),
                      y.clear(),
                      (S = null),
                      (E = null),
                      s.bindXRFramebuffer(null),
                      e.setRenderTarget(e.getRenderTarget()),
                      R.stop(),
                      (o.isPresenting = !1),
                      o.dispatchEvent({ type: "sessionend" });
                  }
                  function T(e) {
                    for (var t = l.inputSources, n = 0; n < g.length; n++)
                      y.set(t[n], g[n]);
                    for (var i = 0; i < e.removed.length; i++) {
                      var r = e.removed[i],
                        a = y.get(r);
                      a &&
                        (a.dispatchEvent({ type: "disconnected", data: r }),
                        y.delete(r));
                    }
                    for (var o = 0; o < e.added.length; o++) {
                      var s = e.added[o],
                        u = y.get(s);
                      u && u.dispatchEvent({ type: "connected", data: s });
                    }
                  }
                  (i.cameraAutoUpdate = !0),
                    (i.enabled = !1),
                    (i.isPresenting = !1),
                    (i.getController = function (e) {
                      var t = g[e];
                      return (
                        void 0 === t && ((t = new ul()), (g[e] = t)),
                        t.getTargetRaySpace()
                      );
                    }),
                    (i.getControllerGrip = function (e) {
                      var t = g[e];
                      return (
                        void 0 === t && ((t = new ul()), (g[e] = t)),
                        t.getGripSpace()
                      );
                    }),
                    (i.getHand = function (e) {
                      var t = g[e];
                      return (
                        void 0 === t && ((t = new ul()), (g[e] = t)),
                        t.getHandSpace()
                      );
                    }),
                    (i.setFramebufferScaleFactor = function (e) {
                      (u = e),
                        !0 === o.isPresenting &&
                          console.warn(
                            "THREE.WebXRManager: Cannot change framebuffer scale while presenting."
                          );
                    }),
                    (i.setReferenceSpaceType = function (e) {
                      (m = e),
                        !0 === o.isPresenting &&
                          console.warn(
                            "THREE.WebXRManager: Cannot change reference space type while presenting."
                          );
                    }),
                    (i.getReferenceSpace = function () {
                      return p;
                    }),
                    (i.getSession = function () {
                      return l;
                    }),
                    (i.setSession = (function () {
                      var e = a(
                        r.mark(function e(t) {
                          var i, a, s;
                          return r.wrap(function (e) {
                            for (;;)
                              switch ((e.prev = e.next)) {
                                case 0:
                                  if (null === (l = t)) {
                                    e.next = 24;
                                    break;
                                  }
                                  if (
                                    (l.addEventListener("select", M),
                                    l.addEventListener("selectstart", M),
                                    l.addEventListener("selectend", M),
                                    l.addEventListener("squeeze", M),
                                    l.addEventListener("squeezestart", M),
                                    l.addEventListener("squeezeend", M),
                                    l.addEventListener("end", A),
                                    l.addEventListener("inputsourceschange", T),
                                    !0 ===
                                      (i = n.getContextAttributes())
                                        .xrCompatible)
                                  ) {
                                    e.next = 14;
                                    break;
                                  }
                                  return (e.next = 14), n.makeXRCompatible();
                                case 14:
                                  return (
                                    (a = {
                                      antialias: i.antialias,
                                      alpha: i.alpha,
                                      depth: i.depth,
                                      stencil: i.stencil,
                                      framebufferScaleFactor: u,
                                    }),
                                    (s = new XRWebGLLayer(l, n, a)),
                                    l.updateRenderState({ baseLayer: s }),
                                    (e.next = 19),
                                    l.requestReferenceSpace(m)
                                  );
                                case 19:
                                  (p = e.sent),
                                    R.setContext(l),
                                    R.start(),
                                    (o.isPresenting = !0),
                                    o.dispatchEvent({ type: "sessionstart" });
                                case 24:
                                case "end":
                                  return e.stop();
                              }
                          }, e);
                        })
                      );
                      return function (t) {
                        return e.apply(this, arguments);
                      };
                    })());
                  var C = new _i(),
                    k = new _i();
                  function P(e, t) {
                    null === t
                      ? e.matrixWorld.copy(e.matrix)
                      : e.matrixWorld.multiplyMatrices(t.matrixWorld, e.matrix),
                      e.matrixWorldInverse.copy(e.matrixWorld).invert();
                  }
                  (i.updateCamera = function (e) {
                    if (null !== l) {
                      (w.near = b.near = x.near = e.near),
                        (w.far = b.far = x.far = e.far),
                        (S === w.near && E === w.far) ||
                          (l.updateRenderState({
                            depthNear: w.near,
                            depthFar: w.far,
                          }),
                          (S = w.near),
                          (E = w.far));
                      var t = e.parent,
                        n = w.cameras;
                      P(w, t);
                      for (var i = 0; i < n.length; i++) P(n[i], t);
                      e.matrixWorld.copy(w.matrixWorld),
                        e.matrix.copy(w.matrix),
                        e.matrix.decompose(e.position, e.quaternion, e.scale);
                      for (var r = e.children, a = 0, o = r.length; a < o; a++)
                        r[a].updateMatrixWorld(!0);
                      2 === n.length
                        ? (function (e, t, n) {
                            C.setFromMatrixPosition(t.matrixWorld),
                              k.setFromMatrixPosition(n.matrixWorld);
                            var i = C.distanceTo(k),
                              r = t.projectionMatrix.elements,
                              a = n.projectionMatrix.elements,
                              o = r[14] / (r[10] - 1),
                              s = r[14] / (r[10] + 1),
                              l = (r[9] + 1) / r[5],
                              u = (r[9] - 1) / r[5],
                              c = (r[8] - 1) / r[0],
                              h = (a[8] + 1) / a[0],
                              d = o * c,
                              p = o * h,
                              f = i / (-c + h),
                              m = f * -c;
                            t.matrixWorld.decompose(
                              e.position,
                              e.quaternion,
                              e.scale
                            ),
                              e.translateX(m),
                              e.translateZ(f),
                              e.matrixWorld.compose(
                                e.position,
                                e.quaternion,
                                e.scale
                              ),
                              e.matrixWorldInverse.copy(e.matrixWorld).invert();
                            var v = o + f,
                              g = s + f,
                              y = d - m,
                              x = p + (i - m),
                              b = ((l * s) / g) * v,
                              _ = ((u * s) / g) * v;
                            e.projectionMatrix.makePerspective(
                              y,
                              x,
                              b,
                              _,
                              v,
                              g
                            );
                          })(w, x, b)
                        : w.projectionMatrix.copy(x.projectionMatrix);
                    }
                  }),
                    (i.getCamera = function () {
                      return w;
                    });
                  var L = null,
                    R = new Ja();
                  return (
                    R.setAnimationLoop(function (e, t) {
                      if (null !== (v = t.getViewerPose(p))) {
                        var n = v.views,
                          i = l.renderState.baseLayer;
                        s.bindXRFramebuffer(i.framebuffer);
                        var r = !1;
                        n.length !== w.cameras.length &&
                          ((w.cameras.length = 0), (r = !0));
                        for (var a = 0; a < n.length; a++) {
                          var o = n[a],
                            u = i.getViewport(o),
                            c = _[a];
                          c.matrix.fromArray(o.transform.matrix),
                            c.projectionMatrix.fromArray(o.projectionMatrix),
                            c.viewport.set(u.x, u.y, u.width, u.height),
                            0 === a && w.matrix.copy(c.matrix),
                            !0 === r && w.cameras.push(c);
                        }
                      }
                      for (var h = l.inputSources, d = 0; d < g.length; d++) {
                        var f = g[d],
                          m = h[d];
                        f.update(m, t, p);
                      }
                      L && L(e, t);
                    }),
                    (i.setAnimationLoop = function (e) {
                      L = e;
                    }),
                    (i.dispose = function () {}),
                    i
                  );
                }
                return p(t, e), t;
              })(Qn);
            function hl(e) {
              function t(t, n) {
                (t.opacity.value = n.opacity),
                  n.color && t.diffuse.value.copy(n.color),
                  n.emissive &&
                    t.emissive.value
                      .copy(n.emissive)
                      .multiplyScalar(n.emissiveIntensity),
                  n.map && (t.map.value = n.map),
                  n.alphaMap && (t.alphaMap.value = n.alphaMap),
                  n.specularMap && (t.specularMap.value = n.specularMap);
                var i,
                  r,
                  a = e.get(n).envMap;
                if (a) {
                  (t.envMap.value = a),
                    (t.flipEnvMap.value =
                      a.isCubeTexture && a._needsFlipEnvMap ? -1 : 1),
                    (t.reflectivity.value = n.reflectivity),
                    (t.refractionRatio.value = n.refractionRatio);
                  var o = e.get(a).__maxMipLevel;
                  void 0 !== o && (t.maxMipLevel.value = o);
                }
                n.lightMap &&
                  ((t.lightMap.value = n.lightMap),
                  (t.lightMapIntensity.value = n.lightMapIntensity)),
                  n.aoMap &&
                    ((t.aoMap.value = n.aoMap),
                    (t.aoMapIntensity.value = n.aoMapIntensity)),
                  n.map
                    ? (i = n.map)
                    : n.specularMap
                    ? (i = n.specularMap)
                    : n.displacementMap
                    ? (i = n.displacementMap)
                    : n.normalMap
                    ? (i = n.normalMap)
                    : n.bumpMap
                    ? (i = n.bumpMap)
                    : n.roughnessMap
                    ? (i = n.roughnessMap)
                    : n.metalnessMap
                    ? (i = n.metalnessMap)
                    : n.alphaMap
                    ? (i = n.alphaMap)
                    : n.emissiveMap
                    ? (i = n.emissiveMap)
                    : n.clearcoatMap
                    ? (i = n.clearcoatMap)
                    : n.clearcoatNormalMap
                    ? (i = n.clearcoatNormalMap)
                    : n.clearcoatRoughnessMap && (i = n.clearcoatRoughnessMap),
                  void 0 !== i &&
                    (i.isWebGLRenderTarget && (i = i.texture),
                    !0 === i.matrixAutoUpdate && i.updateMatrix(),
                    t.uvTransform.value.copy(i.matrix)),
                  n.aoMap ? (r = n.aoMap) : n.lightMap && (r = n.lightMap),
                  void 0 !== r &&
                    (r.isWebGLRenderTarget && (r = r.texture),
                    !0 === r.matrixAutoUpdate && r.updateMatrix(),
                    t.uv2Transform.value.copy(r.matrix));
              }
              function n(t, n) {
                (t.roughness.value = n.roughness),
                  (t.metalness.value = n.metalness),
                  n.roughnessMap && (t.roughnessMap.value = n.roughnessMap),
                  n.metalnessMap && (t.metalnessMap.value = n.metalnessMap),
                  n.emissiveMap && (t.emissiveMap.value = n.emissiveMap),
                  n.bumpMap &&
                    ((t.bumpMap.value = n.bumpMap),
                    (t.bumpScale.value = n.bumpScale),
                    n.side === C && (t.bumpScale.value *= -1)),
                  n.normalMap &&
                    ((t.normalMap.value = n.normalMap),
                    t.normalScale.value.copy(n.normalScale),
                    n.side === C && t.normalScale.value.negate()),
                  n.displacementMap &&
                    ((t.displacementMap.value = n.displacementMap),
                    (t.displacementScale.value = n.displacementScale),
                    (t.displacementBias.value = n.displacementBias)),
                  e.get(n).envMap &&
                    (t.envMapIntensity.value = n.envMapIntensity);
              }
              return {
                refreshFogUniforms: function (e, t) {
                  e.fogColor.value.copy(t.color),
                    t.isFog
                      ? ((e.fogNear.value = t.near), (e.fogFar.value = t.far))
                      : t.isFogExp2 && (e.fogDensity.value = t.density);
                },
                refreshMaterialUniforms: function (e, i, r, a, o) {
                  i.isMeshBasicMaterial
                    ? t(e, i)
                    : i.isMeshLambertMaterial
                    ? (t(e, i),
                      (function (e, t) {
                        t.emissiveMap && (e.emissiveMap.value = t.emissiveMap);
                      })(e, i))
                    : i.isMeshToonMaterial
                    ? (t(e, i),
                      (function (e, t) {
                        t.gradientMap && (e.gradientMap.value = t.gradientMap),
                          t.emissiveMap &&
                            (e.emissiveMap.value = t.emissiveMap),
                          t.bumpMap &&
                            ((e.bumpMap.value = t.bumpMap),
                            (e.bumpScale.value = t.bumpScale),
                            t.side === C && (e.bumpScale.value *= -1)),
                          t.normalMap &&
                            ((e.normalMap.value = t.normalMap),
                            e.normalScale.value.copy(t.normalScale),
                            t.side === C && e.normalScale.value.negate()),
                          t.displacementMap &&
                            ((e.displacementMap.value = t.displacementMap),
                            (e.displacementScale.value = t.displacementScale),
                            (e.displacementBias.value = t.displacementBias));
                      })(e, i))
                    : i.isMeshPhongMaterial
                    ? (t(e, i),
                      (function (e, t) {
                        e.specular.value.copy(t.specular),
                          (e.shininess.value = Math.max(t.shininess, 1e-4)),
                          t.emissiveMap &&
                            (e.emissiveMap.value = t.emissiveMap),
                          t.bumpMap &&
                            ((e.bumpMap.value = t.bumpMap),
                            (e.bumpScale.value = t.bumpScale),
                            t.side === C && (e.bumpScale.value *= -1)),
                          t.normalMap &&
                            ((e.normalMap.value = t.normalMap),
                            e.normalScale.value.copy(t.normalScale),
                            t.side === C && e.normalScale.value.negate()),
                          t.displacementMap &&
                            ((e.displacementMap.value = t.displacementMap),
                            (e.displacementScale.value = t.displacementScale),
                            (e.displacementBias.value = t.displacementBias));
                      })(e, i))
                    : i.isMeshStandardMaterial
                    ? (t(e, i),
                      i.isMeshPhysicalMaterial
                        ? (function (e, t, i) {
                            n(e, t),
                              (e.reflectivity.value = t.reflectivity),
                              (e.clearcoat.value = t.clearcoat),
                              (e.clearcoatRoughness.value =
                                t.clearcoatRoughness),
                              t.sheen && e.sheen.value.copy(t.sheen),
                              t.clearcoatMap &&
                                (e.clearcoatMap.value = t.clearcoatMap),
                              t.clearcoatRoughnessMap &&
                                (e.clearcoatRoughnessMap.value =
                                  t.clearcoatRoughnessMap),
                              t.clearcoatNormalMap &&
                                (e.clearcoatNormalScale.value.copy(
                                  t.clearcoatNormalScale
                                ),
                                (e.clearcoatNormalMap.value =
                                  t.clearcoatNormalMap),
                                t.side === C &&
                                  e.clearcoatNormalScale.value.negate()),
                              (e.transmission.value = t.transmission),
                              t.transmissionMap &&
                                (e.transmissionMap.value = t.transmissionMap),
                              t.transmission > 0 &&
                                ((e.transmissionSamplerMap.value = i.texture),
                                e.transmissionSamplerSize.value.set(
                                  i.width,
                                  i.height
                                )),
                              (e.thickness.value = t.thickness),
                              t.thicknessMap &&
                                (e.thicknessMap.value = t.thicknessMap),
                              (e.attenuationDistance.value =
                                t.attenuationDistance),
                              e.attenuationColor.value.copy(t.attenuationColor);
                          })(e, i, o)
                        : n(e, i))
                    : i.isMeshMatcapMaterial
                    ? (t(e, i),
                      (function (e, t) {
                        t.matcap && (e.matcap.value = t.matcap),
                          t.bumpMap &&
                            ((e.bumpMap.value = t.bumpMap),
                            (e.bumpScale.value = t.bumpScale),
                            t.side === C && (e.bumpScale.value *= -1)),
                          t.normalMap &&
                            ((e.normalMap.value = t.normalMap),
                            e.normalScale.value.copy(t.normalScale),
                            t.side === C && e.normalScale.value.negate()),
                          t.displacementMap &&
                            ((e.displacementMap.value = t.displacementMap),
                            (e.displacementScale.value = t.displacementScale),
                            (e.displacementBias.value = t.displacementBias));
                      })(e, i))
                    : i.isMeshDepthMaterial
                    ? (t(e, i),
                      (function (e, t) {
                        t.displacementMap &&
                          ((e.displacementMap.value = t.displacementMap),
                          (e.displacementScale.value = t.displacementScale),
                          (e.displacementBias.value = t.displacementBias));
                      })(e, i))
                    : i.isMeshDistanceMaterial
                    ? (t(e, i),
                      (function (e, t) {
                        t.displacementMap &&
                          ((e.displacementMap.value = t.displacementMap),
                          (e.displacementScale.value = t.displacementScale),
                          (e.displacementBias.value = t.displacementBias)),
                          e.referencePosition.value.copy(t.referencePosition),
                          (e.nearDistance.value = t.nearDistance),
                          (e.farDistance.value = t.farDistance);
                      })(e, i))
                    : i.isMeshNormalMaterial
                    ? (t(e, i),
                      (function (e, t) {
                        t.bumpMap &&
                          ((e.bumpMap.value = t.bumpMap),
                          (e.bumpScale.value = t.bumpScale),
                          t.side === C && (e.bumpScale.value *= -1)),
                          t.normalMap &&
                            ((e.normalMap.value = t.normalMap),
                            e.normalScale.value.copy(t.normalScale),
                            t.side === C && e.normalScale.value.negate()),
                          t.displacementMap &&
                            ((e.displacementMap.value = t.displacementMap),
                            (e.displacementScale.value = t.displacementScale),
                            (e.displacementBias.value = t.displacementBias));
                      })(e, i))
                    : i.isLineBasicMaterial
                    ? ((function (e, t) {
                        e.diffuse.value.copy(t.color),
                          (e.opacity.value = t.opacity);
                      })(e, i),
                      i.isLineDashedMaterial &&
                        (function (e, t) {
                          (e.dashSize.value = t.dashSize),
                            (e.totalSize.value = t.dashSize + t.gapSize),
                            (e.scale.value = t.scale);
                        })(e, i))
                    : i.isPointsMaterial
                    ? (function (e, t, n, i) {
                        var r;
                        e.diffuse.value.copy(t.color),
                          (e.opacity.value = t.opacity),
                          (e.size.value = t.size * n),
                          (e.scale.value = 0.5 * i),
                          t.map && (e.map.value = t.map),
                          t.alphaMap && (e.alphaMap.value = t.alphaMap),
                          t.map ? (r = t.map) : t.alphaMap && (r = t.alphaMap),
                          void 0 !== r &&
                            (!0 === r.matrixAutoUpdate && r.updateMatrix(),
                            e.uvTransform.value.copy(r.matrix));
                      })(e, i, r, a)
                    : i.isSpriteMaterial
                    ? (function (e, t) {
                        var n;
                        e.diffuse.value.copy(t.color),
                          (e.opacity.value = t.opacity),
                          (e.rotation.value = t.rotation),
                          t.map && (e.map.value = t.map),
                          t.alphaMap && (e.alphaMap.value = t.alphaMap),
                          t.map ? (n = t.map) : t.alphaMap && (n = t.alphaMap),
                          void 0 !== n &&
                            (!0 === n.matrixAutoUpdate && n.updateMatrix(),
                            e.uvTransform.value.copy(n.matrix));
                      })(e, i)
                    : i.isShadowMaterial
                    ? (e.color.value.copy(i.color),
                      (e.opacity.value = i.opacity))
                    : i.isShaderMaterial && (i.uniformsNeedUpdate = !1);
                },
              };
            }
            function dl(e) {
              var t =
                  void 0 !== (e = e || {}).canvas
                    ? e.canvas
                    : (function () {
                        var e = document.createElementNS(
                          "http://www.w3.org/1999/xhtml",
                          "canvas"
                        );
                        return (e.style.display = "block"), e;
                      })(),
                n = void 0 !== e.context ? e.context : null,
                i = void 0 !== e.alpha && e.alpha,
                r = void 0 === e.depth || e.depth,
                a = void 0 === e.stencil || e.stencil,
                o = void 0 !== e.antialias && e.antialias,
                s = void 0 === e.premultipliedAlpha || e.premultipliedAlpha,
                l =
                  void 0 !== e.preserveDrawingBuffer && e.preserveDrawingBuffer,
                u =
                  void 0 !== e.powerPreference ? e.powerPreference : "default",
                c =
                  void 0 !== e.failIfMajorPerformanceCaveat &&
                  e.failIfMajorPerformanceCaveat,
                h = null,
                d = null,
                p = [],
                f = [];
              (this.domElement = t),
                (this.debug = { checkShaderErrors: !0 }),
                (this.autoClear = !0),
                (this.autoClearColor = !0),
                (this.autoClearDepth = !0),
                (this.autoClearStencil = !0),
                (this.sortObjects = !0),
                (this.clippingPlanes = []),
                (this.localClippingEnabled = !1),
                (this.gammaFactor = 2),
                (this.outputEncoding = cn),
                (this.physicallyCorrectLights = !1),
                (this.toneMapping = he),
                (this.toneMappingExposure = 1);
              var m = this,
                v = !1,
                g = 0,
                y = 0,
                x = null,
                b = -1,
                _ = null,
                w = new vi(),
                S = new vi(),
                E = null,
                M = t.width,
                A = t.height,
                T = 1,
                C = null,
                k = null,
                P = new vi(0, 0, M, A),
                L = new vi(0, 0, M, A),
                R = !1,
                I = [],
                F = new Za(),
                N = !1,
                O = !1,
                B = null,
                D = new Ki(),
                V = new _i(),
                U = {
                  background: null,
                  fog: null,
                  environment: null,
                  overrideMaterial: null,
                  isScene: !0,
                };
              function z() {
                return null === x ? T : 1;
              }
              var j,
                G,
                H,
                W,
                Y,
                q,
                X,
                Q,
                Z,
                J,
                K,
                $,
                ee,
                te,
                ne,
                ie,
                re,
                ae,
                oe,
                se,
                le,
                ue,
                ce = n;
              function de(e, n) {
                for (var i = 0; i < e.length; i++) {
                  var r = e[i],
                    a = t.getContext(r, n);
                  if (null !== a) return a;
                }
                return null;
              }
              try {
                var pe = {
                  alpha: i,
                  depth: r,
                  stencil: a,
                  antialias: o,
                  premultipliedAlpha: s,
                  preserveDrawingBuffer: l,
                  powerPreference: u,
                  failIfMajorPerformanceCaveat: c,
                };
                if (
                  (t.addEventListener("webglcontextlost", ge, !1),
                  t.addEventListener("webglcontextrestored", ye, !1),
                  null === ce)
                ) {
                  var fe = ["webgl2", "webgl", "experimental-webgl"];
                  if (
                    (!0 === m.isWebGL1Renderer && fe.shift(),
                    null === (ce = de(fe, pe)))
                  )
                    throw de(fe)
                      ? new Error(
                          "Error creating WebGL context with your selected attributes."
                        )
                      : new Error("Error creating WebGL context.");
                }
                void 0 === ce.getShaderPrecisionFormat &&
                  (ce.getShaderPrecisionFormat = function () {
                    return { rangeMin: 1, rangeMax: 1, precision: 1 };
                  });
              } catch (Le) {
                throw (console.error("THREE.WebGLRenderer: " + Le.message), Le);
              }
              function me() {
                (j = new uo(ce)),
                  (G = new oo(ce, j, e)),
                  j.init(G),
                  (le = new al(ce, j, G)),
                  (H = new il(ce, j, G)),
                  (I[0] = 1029),
                  (W = new po(ce)),
                  (Y = new Gs()),
                  (q = new rl(ce, j, H, Y, G, le, W)),
                  (X = new lo(m)),
                  (Q = new Ka(ce, G)),
                  (ue = new ro(ce, j, Q, G)),
                  (Z = new co(ce, Q, W, ue)),
                  (J = new go(ce, Z, Q, W)),
                  (ae = new vo(ce)),
                  (ne = new so(Y)),
                  (K = new js(m, X, j, G, ue, ne)),
                  ($ = new hl(Y)),
                  (ee = new qs(Y)),
                  (te = new $s(j, G)),
                  (re = new io(m, X, H, J, s)),
                  (ie = new nl(m, J, G)),
                  (oe = new ao(ce, j, W, G)),
                  (se = new ho(ce, j, W, G)),
                  (W.programs = K.programs),
                  (m.capabilities = G),
                  (m.extensions = j),
                  (m.properties = Y),
                  (m.renderLists = ee),
                  (m.shadowMap = ie),
                  (m.state = H),
                  (m.info = W);
              }
              me();
              var ve = new cl(m, ce);
              function ge(e) {
                e.preventDefault(),
                  console.log("THREE.WebGLRenderer: Context Lost."),
                  (v = !0);
              }
              function ye() {
                console.log("THREE.WebGLRenderer: Context Restored."), (v = !1);
                var e = W.autoReset,
                  t = ie.enabled,
                  n = ie.autoUpdate,
                  i = ie.needsUpdate,
                  r = ie.type;
                me(),
                  (W.autoReset = e),
                  (ie.enabled = t),
                  (ie.autoUpdate = n),
                  (ie.needsUpdate = i),
                  (ie.type = r);
              }
              function xe(e) {
                var t = e.target;
                t.removeEventListener("dispose", xe),
                  (function (e) {
                    (function (e) {
                      var t = Y.get(e).programs;
                      void 0 !== t &&
                        t.forEach(function (e) {
                          K.releaseProgram(e);
                        });
                    })(e),
                      Y.remove(e);
                  })(t);
              }
              (this.xr = ve),
                (this.getContext = function () {
                  return ce;
                }),
                (this.getContextAttributes = function () {
                  return ce.getContextAttributes();
                }),
                (this.forceContextLoss = function () {
                  var e = j.get("WEBGL_lose_context");
                  e && e.loseContext();
                }),
                (this.forceContextRestore = function () {
                  var e = j.get("WEBGL_lose_context");
                  e && e.restoreContext();
                }),
                (this.getPixelRatio = function () {
                  return T;
                }),
                (this.setPixelRatio = function (e) {
                  void 0 !== e && ((T = e), this.setSize(M, A, !1));
                }),
                (this.getSize = function (e) {
                  return (
                    void 0 === e &&
                      (console.warn(
                        "WebGLRenderer: .getsize() now requires a Vector2 as an argument"
                      ),
                      (e = new ui())),
                    e.set(M, A)
                  );
                }),
                (this.setSize = function (e, n, i) {
                  ve.isPresenting
                    ? console.warn(
                        "THREE.WebGLRenderer: Can't change size while VR device is presenting."
                      )
                    : ((M = e),
                      (A = n),
                      (t.width = Math.floor(e * T)),
                      (t.height = Math.floor(n * T)),
                      !1 !== i &&
                        ((t.style.width = e + "px"),
                        (t.style.height = n + "px")),
                      this.setViewport(0, 0, e, n));
                }),
                (this.getDrawingBufferSize = function (e) {
                  return (
                    void 0 === e &&
                      (console.warn(
                        "WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"
                      ),
                      (e = new ui())),
                    e.set(M * T, A * T).floor()
                  );
                }),
                (this.setDrawingBufferSize = function (e, n, i) {
                  (M = e),
                    (A = n),
                    (T = i),
                    (t.width = Math.floor(e * i)),
                    (t.height = Math.floor(n * i)),
                    this.setViewport(0, 0, e, n);
                }),
                (this.getCurrentViewport = function (e) {
                  return (
                    void 0 === e &&
                      (console.warn(
                        "WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"
                      ),
                      (e = new vi())),
                    e.copy(w)
                  );
                }),
                (this.getViewport = function (e) {
                  return e.copy(P);
                }),
                (this.setViewport = function (e, t, n, i) {
                  e.isVector4 ? P.set(e.x, e.y, e.z, e.w) : P.set(e, t, n, i),
                    H.viewport(w.copy(P).multiplyScalar(T).floor());
                }),
                (this.getScissor = function (e) {
                  return e.copy(L);
                }),
                (this.setScissor = function (e, t, n, i) {
                  e.isVector4 ? L.set(e.x, e.y, e.z, e.w) : L.set(e, t, n, i),
                    H.scissor(S.copy(L).multiplyScalar(T).floor());
                }),
                (this.getScissorTest = function () {
                  return R;
                }),
                (this.setScissorTest = function (e) {
                  H.setScissorTest((R = e));
                }),
                (this.setOpaqueSort = function (e) {
                  C = e;
                }),
                (this.setTransparentSort = function (e) {
                  k = e;
                }),
                (this.getClearColor = function (e) {
                  return (
                    void 0 === e &&
                      (console.warn(
                        "WebGLRenderer: .getClearColor() now requires a Color as an argument"
                      ),
                      (e = new qr())),
                    e.copy(re.getClearColor())
                  );
                }),
                (this.setClearColor = function () {
                  re.setClearColor.apply(re, arguments);
                }),
                (this.getClearAlpha = function () {
                  return re.getClearAlpha();
                }),
                (this.setClearAlpha = function () {
                  re.setClearAlpha.apply(re, arguments);
                }),
                (this.clear = function (e, t, n) {
                  var i = 0;
                  (void 0 === e || e) && (i |= 16384),
                    (void 0 === t || t) && (i |= 256),
                    (void 0 === n || n) && (i |= 1024),
                    ce.clear(i);
                }),
                (this.clearColor = function () {
                  this.clear(!0, !1, !1);
                }),
                (this.clearDepth = function () {
                  this.clear(!1, !0, !1);
                }),
                (this.clearStencil = function () {
                  this.clear(!1, !1, !0);
                }),
                (this.dispose = function () {
                  t.removeEventListener("webglcontextlost", ge, !1),
                    t.removeEventListener("webglcontextrestored", ye, !1),
                    ee.dispose(),
                    te.dispose(),
                    Y.dispose(),
                    X.dispose(),
                    J.dispose(),
                    ue.dispose(),
                    ve.dispose(),
                    ve.removeEventListener("sessionstart", _e),
                    ve.removeEventListener("sessionend", we),
                    B && (B.dispose(), (B = null)),
                    Se.stop();
                }),
                (this.renderBufferImmediate = function (e, t) {
                  ue.initAttributes();
                  var n = Y.get(e);
                  e.hasPositions &&
                    !n.position &&
                    (n.position = ce.createBuffer()),
                    e.hasNormals && !n.normal && (n.normal = ce.createBuffer()),
                    e.hasUvs && !n.uv && (n.uv = ce.createBuffer()),
                    e.hasColors && !n.color && (n.color = ce.createBuffer());
                  var i = t.getAttributes();
                  e.hasPositions &&
                    (ce.bindBuffer(34962, n.position),
                    ce.bufferData(34962, e.positionArray, 35048),
                    ue.enableAttribute(i.position),
                    ce.vertexAttribPointer(i.position, 3, 5126, !1, 0, 0)),
                    e.hasNormals &&
                      (ce.bindBuffer(34962, n.normal),
                      ce.bufferData(34962, e.normalArray, 35048),
                      ue.enableAttribute(i.normal),
                      ce.vertexAttribPointer(i.normal, 3, 5126, !1, 0, 0)),
                    e.hasUvs &&
                      (ce.bindBuffer(34962, n.uv),
                      ce.bufferData(34962, e.uvArray, 35048),
                      ue.enableAttribute(i.uv),
                      ce.vertexAttribPointer(i.uv, 2, 5126, !1, 0, 0)),
                    e.hasColors &&
                      (ce.bindBuffer(34962, n.color),
                      ce.bufferData(34962, e.colorArray, 35048),
                      ue.enableAttribute(i.color),
                      ce.vertexAttribPointer(i.color, 3, 5126, !1, 0, 0)),
                    ue.disableUnusedAttributes(),
                    ce.drawArrays(4, 0, e.count),
                    (e.count = 0);
                }),
                (this.renderBufferDirect = function (e, t, n, i, r, a) {
                  null === t && (t = U);
                  var o = r.isMesh && r.matrixWorld.determinant() < 0,
                    s = Pe(e, t, i, r);
                  H.setMaterial(i, o);
                  var l = n.index,
                    u = n.attributes.position;
                  if (null === l) {
                    if (void 0 === u || 0 === u.count) return;
                  } else if (0 === l.count) return;
                  var c,
                    h = 1;
                  !0 === i.wireframe &&
                    ((l = Z.getWireframeAttribute(n)), (h = 2)),
                    (i.morphTargets || i.morphNormals) && ae.update(r, n, i, s),
                    ue.setup(r, i, s, n, l);
                  var d = oe;
                  null !== l && ((c = Q.get(l)), (d = se).setIndex(c));
                  var p = null !== l ? l.count : u.count,
                    f = n.drawRange.start * h,
                    m = n.drawRange.count * h,
                    v = null !== a ? a.start * h : 0,
                    g = null !== a ? a.count * h : 1 / 0,
                    y = Math.max(f, v),
                    x = Math.min(p, f + m, v + g) - 1,
                    b = Math.max(0, x - y + 1);
                  if (0 !== b) {
                    if (r.isMesh)
                      !0 === i.wireframe
                        ? (H.setLineWidth(i.wireframeLinewidth * z()),
                          d.setMode(1))
                        : d.setMode(4);
                    else if (r.isLine) {
                      var _ = i.linewidth;
                      void 0 === _ && (_ = 1),
                        H.setLineWidth(_ * z()),
                        r.isLineSegments
                          ? d.setMode(1)
                          : r.isLineLoop
                          ? d.setMode(2)
                          : d.setMode(3);
                    } else
                      r.isPoints ? d.setMode(0) : r.isSprite && d.setMode(4);
                    if (r.isInstancedMesh) d.renderInstances(y, b, r.count);
                    else if (n.isInstancedBufferGeometry) {
                      var w = Math.min(n.instanceCount, n._maxInstanceCount);
                      d.renderInstances(y, b, w);
                    } else d.render(y, b);
                  }
                }),
                (this.compile = function (e, t) {
                  (d = te.get(e)).init(),
                    e.traverseVisible(function (e) {
                      e.isLight &&
                        e.layers.test(t.layers) &&
                        (d.pushLight(e), e.castShadow && d.pushShadow(e));
                    }),
                    d.setupLights(),
                    e.traverse(function (t) {
                      var n = t.material;
                      if (n)
                        if (Array.isArray(n))
                          for (var i = 0; i < n.length; i++) Ce(n[i], e, t);
                        else Ce(n, e, t);
                    });
                });
              var be = null;
              function _e() {
                Se.stop();
              }
              function we() {
                Se.start();
              }
              var Se = new Ja();
              function Ee(e, t, n) {
                for (
                  var i = !0 === t.isScene ? t.overrideMaterial : null,
                    r = 0,
                    a = e.length;
                  r < a;
                  r++
                ) {
                  var o = e[r],
                    s = o.object,
                    l = o.geometry,
                    u = null === i ? o.material : i,
                    c = o.group;
                  if (n.isArrayCamera)
                    for (var h = n.cameras, p = 0, f = h.length; p < f; p++) {
                      var m = h[p];
                      s.layers.test(m.layers) &&
                        (H.viewport(w.copy(m.viewport)),
                        d.setupLightsView(m),
                        Ae(s, t, m, l, u, c));
                    }
                  else Ae(s, t, n, l, u, c);
                }
              }
              function Ae(e, t, n, i, r, a) {
                if (
                  (e.onBeforeRender(m, t, n, i, r, a),
                  e.modelViewMatrix.multiplyMatrices(
                    n.matrixWorldInverse,
                    e.matrixWorld
                  ),
                  e.normalMatrix.getNormalMatrix(e.modelViewMatrix),
                  e.isImmediateRenderObject)
                ) {
                  var o = Pe(n, t, r, e);
                  H.setMaterial(r),
                    ue.reset(),
                    (function (e, t) {
                      e.render(function (e) {
                        m.renderBufferImmediate(e, t);
                      });
                    })(e, o);
                } else m.renderBufferDirect(n, t, i, r, e, a);
                e.onAfterRender(m, t, n, i, r, a);
              }
              function Ce(e, t, n) {
                !0 !== t.isScene && (t = U);
                var i = Y.get(e),
                  r = d.state.lights,
                  a = d.state.shadowsArray,
                  o = r.state.version,
                  s = K.getParameters(e, r.state, a, t, n),
                  l = K.getProgramCacheKey(s),
                  u = i.programs;
                (i.environment = e.isMeshStandardMaterial
                  ? t.environment
                  : null),
                  (i.fog = t.fog),
                  (i.envMap = X.get(e.envMap || i.environment)),
                  void 0 === u &&
                    (e.addEventListener("dispose", xe),
                    (u = new Map()),
                    (i.programs = u));
                var c = u.get(l);
                if (void 0 !== c) {
                  if (i.currentProgram === c && i.lightsStateVersion === o)
                    return ke(e, s), c;
                } else
                  (s.uniforms = K.getUniforms(e)),
                    e.onBuild(s, m),
                    e.onBeforeCompile(s, m),
                    (c = K.acquireProgram(s, l)),
                    u.set(l, c),
                    (i.uniforms = s.uniforms);
                var h = i.uniforms;
                ((e.isShaderMaterial || e.isRawShaderMaterial) &&
                  !0 !== e.clipping) ||
                  (h.clippingPlanes = ne.uniform),
                  ke(e, s),
                  (i.needsLights = (function (e) {
                    return (
                      e.isMeshLambertMaterial ||
                      e.isMeshToonMaterial ||
                      e.isMeshPhongMaterial ||
                      e.isMeshStandardMaterial ||
                      e.isShadowMaterial ||
                      (e.isShaderMaterial && !0 === e.lights)
                    );
                  })(e)),
                  (i.lightsStateVersion = o),
                  i.needsLights &&
                    ((h.ambientLightColor.value = r.state.ambient),
                    (h.lightProbe.value = r.state.probe),
                    (h.directionalLights.value = r.state.directional),
                    (h.directionalLightShadows.value =
                      r.state.directionalShadow),
                    (h.spotLights.value = r.state.spot),
                    (h.spotLightShadows.value = r.state.spotShadow),
                    (h.rectAreaLights.value = r.state.rectArea),
                    (h.ltc_1.value = r.state.rectAreaLTC1),
                    (h.ltc_2.value = r.state.rectAreaLTC2),
                    (h.pointLights.value = r.state.point),
                    (h.pointLightShadows.value = r.state.pointShadow),
                    (h.hemisphereLights.value = r.state.hemi),
                    (h.directionalShadowMap.value =
                      r.state.directionalShadowMap),
                    (h.directionalShadowMatrix.value =
                      r.state.directionalShadowMatrix),
                    (h.spotShadowMap.value = r.state.spotShadowMap),
                    (h.spotShadowMatrix.value = r.state.spotShadowMatrix),
                    (h.pointShadowMap.value = r.state.pointShadowMap),
                    (h.pointShadowMatrix.value = r.state.pointShadowMatrix));
                var p = c.getUniforms(),
                  f = _s.seqWithValue(p.seq, h);
                return (i.currentProgram = c), (i.uniformsList = f), c;
              }
              function ke(e, t) {
                var n = Y.get(e);
                (n.outputEncoding = t.outputEncoding),
                  (n.instancing = t.instancing),
                  (n.skinning = t.skinning),
                  (n.numClippingPlanes = t.numClippingPlanes),
                  (n.numIntersection = t.numClipIntersection),
                  (n.vertexAlphas = t.vertexAlphas);
              }
              function Pe(e, t, n, i) {
                !0 !== t.isScene && (t = U), q.resetTextureUnits();
                var r = t.fog,
                  a = n.isMeshStandardMaterial ? t.environment : null,
                  o = null === x ? m.outputEncoding : x.texture.encoding,
                  s = X.get(n.envMap || a),
                  l =
                    !0 === n.vertexColors &&
                    i.geometry &&
                    i.geometry.attributes.color &&
                    4 === i.geometry.attributes.color.itemSize,
                  u = Y.get(n),
                  c = d.state.lights;
                if (!0 === N && (!0 === O || e !== _)) {
                  var h = e === _ && n.id === b;
                  ne.setState(n, e, h);
                }
                var p = !1;
                n.version === u.__version
                  ? (u.needsLights &&
                      u.lightsStateVersion !== c.state.version) ||
                    u.outputEncoding !== o ||
                    (i.isInstancedMesh && !1 === u.instancing)
                    ? (p = !0)
                    : i.isInstancedMesh || !0 !== u.instancing
                    ? i.isSkinnedMesh && !1 === u.skinning
                      ? (p = !0)
                      : i.isSkinnedMesh || !0 !== u.skinning
                      ? u.envMap !== s || (n.fog && u.fog !== r)
                        ? (p = !0)
                        : void 0 === u.numClippingPlanes ||
                          (u.numClippingPlanes === ne.numPlanes &&
                            u.numIntersection === ne.numIntersection)
                        ? u.vertexAlphas !== l && (p = !0)
                        : (p = !0)
                      : (p = !0)
                    : (p = !0)
                  : ((p = !0), (u.__version = n.version));
                var f = u.currentProgram;
                !0 === p && (f = Ce(n, t, i));
                var v,
                  g,
                  y = !1,
                  w = !1,
                  S = !1,
                  E = f.getUniforms(),
                  M = u.uniforms;
                if (
                  (H.useProgram(f.program) && ((y = !0), (w = !0), (S = !0)),
                  n.id !== b && ((b = n.id), (w = !0)),
                  y || _ !== e)
                ) {
                  if (
                    (E.setValue(ce, "projectionMatrix", e.projectionMatrix),
                    G.logarithmicDepthBuffer &&
                      E.setValue(
                        ce,
                        "logDepthBufFC",
                        2 / (Math.log(e.far + 1) / Math.LN2)
                      ),
                    _ !== e && ((_ = e), (w = !0), (S = !0)),
                    n.isShaderMaterial ||
                      n.isMeshPhongMaterial ||
                      n.isMeshToonMaterial ||
                      n.isMeshStandardMaterial ||
                      n.envMap)
                  ) {
                    var C = E.map.cameraPosition;
                    void 0 !== C &&
                      C.setValue(ce, V.setFromMatrixPosition(e.matrixWorld));
                  }
                  (n.isMeshPhongMaterial ||
                    n.isMeshToonMaterial ||
                    n.isMeshLambertMaterial ||
                    n.isMeshBasicMaterial ||
                    n.isMeshStandardMaterial ||
                    n.isShaderMaterial) &&
                    E.setValue(
                      ce,
                      "isOrthographic",
                      !0 === e.isOrthographicCamera
                    ),
                    (n.isMeshPhongMaterial ||
                      n.isMeshToonMaterial ||
                      n.isMeshLambertMaterial ||
                      n.isMeshBasicMaterial ||
                      n.isMeshStandardMaterial ||
                      n.isShaderMaterial ||
                      n.isShadowMaterial ||
                      i.isSkinnedMesh) &&
                      E.setValue(ce, "viewMatrix", e.matrixWorldInverse);
                }
                if (i.isSkinnedMesh) {
                  E.setOptional(ce, i, "bindMatrix"),
                    E.setOptional(ce, i, "bindMatrixInverse");
                  var k = i.skeleton;
                  k &&
                    (G.floatVertexTextures
                      ? (null === k.boneTexture && k.computeBoneTexture(),
                        E.setValue(ce, "boneTexture", k.boneTexture, q),
                        E.setValue(ce, "boneTextureSize", k.boneTextureSize))
                      : E.setOptional(ce, k, "boneMatrices"));
                }
                return (
                  (w || u.receiveShadow !== i.receiveShadow) &&
                    ((u.receiveShadow = i.receiveShadow),
                    E.setValue(ce, "receiveShadow", i.receiveShadow)),
                  w &&
                    (E.setValue(
                      ce,
                      "toneMappingExposure",
                      m.toneMappingExposure
                    ),
                    u.needsLights &&
                      ((g = S),
                      ((v = M).ambientLightColor.needsUpdate = g),
                      (v.lightProbe.needsUpdate = g),
                      (v.directionalLights.needsUpdate = g),
                      (v.directionalLightShadows.needsUpdate = g),
                      (v.pointLights.needsUpdate = g),
                      (v.pointLightShadows.needsUpdate = g),
                      (v.spotLights.needsUpdate = g),
                      (v.spotLightShadows.needsUpdate = g),
                      (v.rectAreaLights.needsUpdate = g),
                      (v.hemisphereLights.needsUpdate = g)),
                    r && n.fog && $.refreshFogUniforms(M, r),
                    $.refreshMaterialUniforms(M, n, T, A, B),
                    _s.upload(ce, u.uniformsList, M, q)),
                  n.isShaderMaterial &&
                    !0 === n.uniformsNeedUpdate &&
                    (_s.upload(ce, u.uniformsList, M, q),
                    (n.uniformsNeedUpdate = !1)),
                  n.isSpriteMaterial && E.setValue(ce, "center", i.center),
                  E.setValue(ce, "modelViewMatrix", i.modelViewMatrix),
                  E.setValue(ce, "normalMatrix", i.normalMatrix),
                  E.setValue(ce, "modelMatrix", i.matrixWorld),
                  f
                );
              }
              Se.setAnimationLoop(function (e) {
                be && be(e);
              }),
                "undefined" !== typeof window && Se.setContext(window),
                (this.setAnimationLoop = function (e) {
                  (be = e),
                    ve.setAnimationLoop(e),
                    null === e ? Se.stop() : Se.start();
                }),
                ve.addEventListener("sessionstart", _e),
                ve.addEventListener("sessionend", we),
                (this.render = function (e, t) {
                  if (void 0 === t || !0 === t.isCamera) {
                    if (!0 !== v) {
                      !0 === e.autoUpdate && e.updateMatrixWorld(),
                        null === t.parent && t.updateMatrixWorld(),
                        !0 === ve.enabled &&
                          !0 === ve.isPresenting &&
                          (!0 === ve.cameraAutoUpdate && ve.updateCamera(t),
                          (t = ve.getCamera())),
                        !0 === e.isScene && e.onBeforeRender(m, e, t, x),
                        (d = te.get(e, f.length)).init(),
                        f.push(d),
                        D.multiplyMatrices(
                          t.projectionMatrix,
                          t.matrixWorldInverse
                        ),
                        F.setFromProjectionMatrix(D),
                        (O = this.localClippingEnabled),
                        (N = ne.init(this.clippingPlanes, O, t)),
                        (h = ee.get(e, p.length)).init(),
                        p.push(h),
                        (function e(t, n, i, r) {
                          if (!1 !== t.visible) {
                            if (t.layers.test(n.layers))
                              if (t.isGroup) i = t.renderOrder;
                              else if (t.isLOD)
                                !0 === t.autoUpdate && t.update(n);
                              else if (t.isLight)
                                d.pushLight(t), t.castShadow && d.pushShadow(t);
                              else if (t.isSprite) {
                                if (!t.frustumCulled || F.intersectsSprite(t)) {
                                  r &&
                                    V.setFromMatrixPosition(
                                      t.matrixWorld
                                    ).applyMatrix4(D);
                                  var a = J.update(t),
                                    o = t.material;
                                  o.visible && h.push(t, a, o, i, V.z, null);
                                }
                              } else if (t.isImmediateRenderObject)
                                r &&
                                  V.setFromMatrixPosition(
                                    t.matrixWorld
                                  ).applyMatrix4(D),
                                  h.push(t, null, t.material, i, V.z, null);
                              else if (
                                (t.isMesh || t.isLine || t.isPoints) &&
                                (t.isSkinnedMesh &&
                                  t.skeleton.frame !== W.render.frame &&
                                  (t.skeleton.update(),
                                  (t.skeleton.frame = W.render.frame)),
                                !t.frustumCulled || F.intersectsObject(t))
                              ) {
                                r &&
                                  V.setFromMatrixPosition(
                                    t.matrixWorld
                                  ).applyMatrix4(D);
                                var s = J.update(t),
                                  l = t.material;
                                if (Array.isArray(l))
                                  for (
                                    var u = s.groups, c = 0, p = u.length;
                                    c < p;
                                    c++
                                  ) {
                                    var f = u[c],
                                      m = l[f.materialIndex];
                                    m &&
                                      m.visible &&
                                      h.push(t, s, m, i, V.z, f);
                                  }
                                else l.visible && h.push(t, s, l, i, V.z, null);
                              }
                            for (
                              var v = t.children, g = 0, y = v.length;
                              g < y;
                              g++
                            )
                              e(v[g], n, i, r);
                          }
                        })(e, t, 0, m.sortObjects),
                        h.finish(),
                        !0 === m.sortObjects && h.sort(C, k),
                        !0 === N && ne.beginShadows();
                      var n = d.state.shadowsArray;
                      ie.render(n, e, t),
                        d.setupLights(),
                        d.setupLightsView(t),
                        !0 === N && ne.endShadows(),
                        !0 === this.info.autoReset && this.info.reset(),
                        re.render(h, e);
                      var i = h.opaque,
                        r = h.transmissive,
                        a = h.transparent;
                      i.length > 0 && Ee(i, e, t),
                        r.length > 0 &&
                          (function (e, t, n, i) {
                            null === B &&
                              (B = new gi(1024, 1024, {
                                generateMipmaps: !0,
                                minFilter: Ne,
                                magFilter: Te,
                                wrapS: Me,
                                wrapT: Me,
                              }));
                            var r = m.getRenderTarget();
                            m.setRenderTarget(B),
                              m.clear(),
                              Ee(e, n, i),
                              q.updateRenderTargetMipmap(B),
                              m.setRenderTarget(r),
                              Ee(t, n, i);
                          })(i, r, e, t),
                        a.length > 0 && Ee(a, e, t),
                        null !== x &&
                          (q.updateRenderTargetMipmap(x),
                          q.updateMultisampleRenderTarget(x)),
                        !0 === e.isScene && e.onAfterRender(m, e, t),
                        H.buffers.depth.setTest(!0),
                        H.buffers.depth.setMask(!0),
                        H.buffers.color.setMask(!0),
                        H.setPolygonOffset(!1),
                        ue.resetDefaultState(),
                        (b = -1),
                        (_ = null),
                        f.pop(),
                        (d = f.length > 0 ? f[f.length - 1] : null),
                        p.pop(),
                        (h = p.length > 0 ? p[p.length - 1] : null);
                    }
                  } else
                    console.error(
                      "THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera."
                    );
                }),
                (this.getActiveCubeFace = function () {
                  return g;
                }),
                (this.getActiveMipmapLevel = function () {
                  return y;
                }),
                (this.getRenderTarget = function () {
                  return x;
                }),
                (this.setRenderTarget = function (e) {
                  var t =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : 0,
                    n =
                      arguments.length > 2 && void 0 !== arguments[2]
                        ? arguments[2]
                        : 0;
                  (x = e),
                    (g = t),
                    (y = n),
                    e &&
                      void 0 === Y.get(e).__webglFramebuffer &&
                      q.setupRenderTarget(e);
                  var i = null,
                    r = !1,
                    a = !1;
                  if (e) {
                    var o = e.texture;
                    (o.isDataTexture3D || o.isDataTexture2DArray) && (a = !0);
                    var s = Y.get(e).__webglFramebuffer;
                    e.isWebGLCubeRenderTarget
                      ? ((i = s[t]), (r = !0))
                      : (i = e.isWebGLMultisampleRenderTarget
                          ? Y.get(e).__webglMultisampledFramebuffer
                          : s),
                      w.copy(e.viewport),
                      S.copy(e.scissor),
                      (E = e.scissorTest);
                  } else
                    w.copy(P).multiplyScalar(T).floor(),
                      S.copy(L).multiplyScalar(T).floor(),
                      (E = R);
                  var l = H.bindFramebuffer(36160, i);
                  if (l && G.drawBuffers) {
                    var u = !1;
                    if (e)
                      if (e.isWebGLMultipleRenderTargets) {
                        var c = e.texture;
                        if (I.length !== c.length || 36064 !== I[0]) {
                          for (var h = 0, d = c.length; h < d; h++)
                            I[h] = 36064 + h;
                          (I.length = c.length), (u = !0);
                        }
                      } else
                        (1 === I.length && 36064 === I[0]) ||
                          ((I[0] = 36064), (I.length = 1), (u = !0));
                    else
                      (1 === I.length && 1029 === I[0]) ||
                        ((I[0] = 1029), (I.length = 1), (u = !0));
                    u &&
                      (G.isWebGL2
                        ? ce.drawBuffers(I)
                        : j.get("WEBGL_draw_buffers").drawBuffersWEBGL(I));
                  }
                  if ((H.viewport(w), H.scissor(S), H.setScissorTest(E), r)) {
                    var p = Y.get(e.texture);
                    ce.framebufferTexture2D(
                      36160,
                      36064,
                      34069 + t,
                      p.__webglTexture,
                      n
                    );
                  } else if (a) {
                    var f = Y.get(e.texture),
                      m = t || 0;
                    ce.framebufferTextureLayer(
                      36160,
                      36064,
                      f.__webglTexture,
                      n || 0,
                      m
                    );
                  }
                }),
                (this.readRenderTargetPixels = function (e, t, n, i, r, a, o) {
                  if (e && e.isWebGLRenderTarget) {
                    var s = Y.get(e).__webglFramebuffer;
                    if (
                      (e.isWebGLCubeRenderTarget && void 0 !== o && (s = s[o]),
                      s)
                    ) {
                      H.bindFramebuffer(36160, s);
                      try {
                        var l = e.texture,
                          u = l.format,
                          c = l.type;
                        if (
                          u !== Je &&
                          le.convert(u) !== ce.getParameter(35739)
                        )
                          return void console.error(
                            "THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format."
                          );
                        var h =
                          c === He &&
                          (j.has("EXT_color_buffer_half_float") ||
                            (G.isWebGL2 && j.has("EXT_color_buffer_float")));
                        if (
                          c !== Be &&
                          le.convert(c) !== ce.getParameter(35738) &&
                          (c !== Ge ||
                            !(
                              G.isWebGL2 ||
                              j.has("OES_texture_float") ||
                              j.has("WEBGL_color_buffer_float")
                            )) &&
                          !h
                        )
                          return void console.error(
                            "THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type."
                          );
                        36053 === ce.checkFramebufferStatus(36160)
                          ? t >= 0 &&
                            t <= e.width - i &&
                            n >= 0 &&
                            n <= e.height - r &&
                            ce.readPixels(
                              t,
                              n,
                              i,
                              r,
                              le.convert(u),
                              le.convert(c),
                              a
                            )
                          : console.error(
                              "THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete."
                            );
                      } finally {
                        var d = null !== x ? Y.get(x).__webglFramebuffer : null;
                        H.bindFramebuffer(36160, d);
                      }
                    }
                  } else
                    console.error(
                      "THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget."
                    );
                }),
                (this.copyFramebufferToTexture = function (e, t) {
                  var n =
                      arguments.length > 2 && void 0 !== arguments[2]
                        ? arguments[2]
                        : 0,
                    i = Math.pow(2, -n),
                    r = Math.floor(t.image.width * i),
                    a = Math.floor(t.image.height * i),
                    o = le.convert(t.format);
                  G.isWebGL2 &&
                    (6407 === o && (o = 32849), 6408 === o && (o = 32856)),
                    q.setTexture2D(t, 0),
                    ce.copyTexImage2D(3553, n, o, e.x, e.y, r, a, 0),
                    H.unbindTexture();
                }),
                (this.copyTextureToTexture = function (e, t, n) {
                  var i =
                      arguments.length > 3 && void 0 !== arguments[3]
                        ? arguments[3]
                        : 0,
                    r = t.image.width,
                    a = t.image.height,
                    o = le.convert(n.format),
                    s = le.convert(n.type);
                  q.setTexture2D(n, 0),
                    ce.pixelStorei(37440, n.flipY),
                    ce.pixelStorei(37441, n.premultiplyAlpha),
                    ce.pixelStorei(3317, n.unpackAlignment),
                    t.isDataTexture
                      ? ce.texSubImage2D(
                          3553,
                          i,
                          e.x,
                          e.y,
                          r,
                          a,
                          o,
                          s,
                          t.image.data
                        )
                      : t.isCompressedTexture
                      ? ce.compressedTexSubImage2D(
                          3553,
                          i,
                          e.x,
                          e.y,
                          t.mipmaps[0].width,
                          t.mipmaps[0].height,
                          o,
                          t.mipmaps[0].data
                        )
                      : ce.texSubImage2D(3553, i, e.x, e.y, o, s, t.image),
                    0 === i && n.generateMipmaps && ce.generateMipmap(3553),
                    H.unbindTexture();
                }),
                (this.copyTextureToTexture3D = function (e, t, n, i) {
                  var r =
                    arguments.length > 4 && void 0 !== arguments[4]
                      ? arguments[4]
                      : 0;
                  if (m.isWebGL1Renderer)
                    console.warn(
                      "THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2."
                    );
                  else {
                    var a,
                      o = n.image,
                      s = o.width,
                      l = o.height,
                      u = o.data,
                      c = le.convert(i.format),
                      h = le.convert(i.type);
                    if (i.isDataTexture3D) q.setTexture3D(i, 0), (a = 32879);
                    else {
                      if (!i.isDataTexture2DArray)
                        return void console.warn(
                          "THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray."
                        );
                      q.setTexture2DArray(i, 0), (a = 35866);
                    }
                    ce.pixelStorei(37440, i.flipY),
                      ce.pixelStorei(37441, i.premultiplyAlpha),
                      ce.pixelStorei(3317, i.unpackAlignment);
                    var d = ce.getParameter(3314),
                      p = ce.getParameter(32878),
                      f = ce.getParameter(3316),
                      v = ce.getParameter(3315),
                      g = ce.getParameter(32877);
                    ce.pixelStorei(3314, s),
                      ce.pixelStorei(32878, l),
                      ce.pixelStorei(3316, e.min.x),
                      ce.pixelStorei(3315, e.min.y),
                      ce.pixelStorei(32877, e.min.z),
                      ce.texSubImage3D(
                        a,
                        r,
                        t.x,
                        t.y,
                        t.z,
                        e.max.x - e.min.x + 1,
                        e.max.y - e.min.y + 1,
                        e.max.z - e.min.z + 1,
                        c,
                        h,
                        u
                      ),
                      ce.pixelStorei(3314, d),
                      ce.pixelStorei(32878, p),
                      ce.pixelStorei(3316, f),
                      ce.pixelStorei(3315, v),
                      ce.pixelStorei(32877, g),
                      0 === r && i.generateMipmaps && ce.generateMipmap(a),
                      H.unbindTexture();
                  }
                }),
                (this.initTexture = function (e) {
                  q.setTexture2D(e, 0), H.unbindTexture();
                }),
                (this.resetState = function () {
                  (g = 0), (y = 0), (x = null), H.reset(), ue.reset();
                }),
                "undefined" !== typeof __THREE_DEVTOOLS__ &&
                  __THREE_DEVTOOLS__.dispatchEvent(
                    new CustomEvent("observe", { detail: this })
                  );
            }
            var pl = (function (e) {
              function t() {
                return f(this, t), c(this, h(t).apply(this, arguments));
              }
              return p(t, e), t;
            })(dl);
            pl.prototype.isWebGL1Renderer = !0;
            var fl = (function () {
              function e(t) {
                var n =
                  arguments.length > 1 && void 0 !== arguments[1]
                    ? arguments[1]
                    : 25e-5;
                f(this, e),
                  (this.name = ""),
                  (this.color = new qr(t)),
                  (this.density = n);
              }
              return (
                m(e, [
                  {
                    key: "clone",
                    value: function () {
                      return new e(this.color, this.density);
                    },
                  },
                  {
                    key: "toJSON",
                    value: function () {
                      return {
                        type: "FogExp2",
                        color: this.color.getHex(),
                        density: this.density,
                      };
                    },
                  },
                ]),
                e
              );
            })();
            fl.prototype.isFogExp2 = !0;
            var ml = (function () {
              function e(t) {
                var n =
                    arguments.length > 1 && void 0 !== arguments[1]
                      ? arguments[1]
                      : 1,
                  i =
                    arguments.length > 2 && void 0 !== arguments[2]
                      ? arguments[2]
                      : 1e3;
                f(this, e),
                  (this.name = ""),
                  (this.color = new qr(t)),
                  (this.near = n),
                  (this.far = i);
              }
              return (
                m(e, [
                  {
                    key: "clone",
                    value: function () {
                      return new e(this.color, this.near, this.far);
                    },
                  },
                  {
                    key: "toJSON",
                    value: function () {
                      return {
                        type: "Fog",
                        color: this.color.getHex(),
                        near: this.near,
                        far: this.far,
                      };
                    },
                  },
                ]),
                e
              );
            })();
            ml.prototype.isFog = !0;
            var vl = (function (e) {
              function t() {
                var e;
                return (
                  f(this, t),
                  ((e = c(this, h(t).call(this))).type = "Scene"),
                  (e.background = null),
                  (e.environment = null),
                  (e.fog = null),
                  (e.overrideMaterial = null),
                  (e.autoUpdate = !0),
                  "undefined" !== typeof __THREE_DEVTOOLS__ &&
                    __THREE_DEVTOOLS__.dispatchEvent(
                      new CustomEvent("observe", { detail: d(e) })
                    ),
                  e
                );
              }
              return (
                p(t, e),
                m(t, [
                  {
                    key: "copy",
                    value: function (e, n) {
                      return (
                        l(h(t.prototype), "copy", this).call(this, e, n),
                        null !== e.background &&
                          (this.background = e.background.clone()),
                        null !== e.environment &&
                          (this.environment = e.environment.clone()),
                        null !== e.fog && (this.fog = e.fog.clone()),
                        null !== e.overrideMaterial &&
                          (this.overrideMaterial = e.overrideMaterial.clone()),
                        (this.autoUpdate = e.autoUpdate),
                        (this.matrixAutoUpdate = e.matrixAutoUpdate),
                        this
                      );
                    },
                  },
                  {
                    key: "toJSON",
                    value: function (e) {
                      var n = l(h(t.prototype), "toJSON", this).call(this, e);
                      return (
                        null !== this.background &&
                          (n.object.background = this.background.toJSON(e)),
                        null !== this.environment &&
                          (n.object.environment = this.environment.toJSON(e)),
                        null !== this.fog && (n.object.fog = this.fog.toJSON()),
                        n
                      );
                    },
                  },
                ]),
                t
              );
            })(Sr);
            vl.prototype.isScene = !0;
            var gl = (function () {
              function e(t, n) {
                f(this, e),
                  (this.array = t),
                  (this.stride = n),
                  (this.count = void 0 !== t ? t.length / n : 0),
                  (this.usage = Dn),
                  (this.updateRange = { offset: 0, count: -1 }),
                  (this.version = 0),
                  (this.uuid = ti());
              }
              return (
                m(e, [
                  { key: "onUploadCallback", value: function () {} },
                  {
                    key: "setUsage",
                    value: function (e) {
                      return (this.usage = e), this;
                    },
                  },
                  {
                    key: "copy",
                    value: function (e) {
                      return (
                        (this.array = new e.array.constructor(e.array)),
                        (this.count = e.count),
                        (this.stride = e.stride),
                        (this.usage = e.usage),
                        this
                      );
                    },
                  },
                  {
                    key: "copyAt",
                    value: function (e, t, n) {
                      (e *= this.stride), (n *= t.stride);
                      for (var i = 0, r = this.stride; i < r; i++)
                        this.array[e + i] = t.array[n + i];
                      return this;
                    },
                  },
                  {
                    key: "set",
                    value: function (e) {
                      var t =
                        arguments.length > 1 && void 0 !== arguments[1]
                          ? arguments[1]
                          : 0;
                      return this.array.set(e, t), this;
                    },
                  },
                  {
                    key: "clone",
                    value: function (e) {
                      void 0 === e.arrayBuffers && (e.arrayBuffers = {}),
                        void 0 === this.array.buffer._uuid &&
                          (this.array.buffer._uuid = ti()),
                        void 0 === e.arrayBuffers[this.array.buffer._uuid] &&
                          (e.arrayBuffers[this.array.buffer._uuid] =
                            this.array.slice(0).buffer);
                      var t = new this.array.constructor(
                          e.arrayBuffers[this.array.buffer._uuid]
                        ),
                        n = new this.constructor(t, this.stride);
                      return n.setUsage(this.usage), n;
                    },
                  },
                  {
                    key: "onUpload",
                    value: function (e) {
                      return (this.onUploadCallback = e), this;
                    },
                  },
                  {
                    key: "toJSON",
                    value: function (e) {
                      return (
                        void 0 === e.arrayBuffers && (e.arrayBuffers = {}),
                        void 0 === this.array.buffer._uuid &&
                          (this.array.buffer._uuid = ti()),
                        void 0 === e.arrayBuffers[this.array.buffer._uuid] &&
                          (e.arrayBuffers[this.array.buffer._uuid] =
                            Array.prototype.slice.call(
                              new Uint32Array(this.array.buffer)
                            )),
                        {
                          uuid: this.uuid,
                          buffer: this.array.buffer._uuid,
                          type: this.array.constructor.name,
                          stride: this.stride,
                        }
                      );
                    },
                  },
                  {
                    key: "needsUpdate",
                    set: function (e) {
                      !0 === e && this.version++;
                    },
                  },
                ]),
                e
              );
            })();
            gl.prototype.isInterleavedBuffer = !0;
            var yl = new _i(),
              xl = (function () {
                function e(t, n, i, r) {
                  f(this, e),
                    (this.name = ""),
                    (this.data = t),
                    (this.itemSize = n),
                    (this.offset = i),
                    (this.normalized = !0 === r);
                }
                return (
                  m(e, [
                    {
                      key: "applyMatrix4",
                      value: function (e) {
                        for (var t = 0, n = this.data.count; t < n; t++)
                          (yl.x = this.getX(t)),
                            (yl.y = this.getY(t)),
                            (yl.z = this.getZ(t)),
                            yl.applyMatrix4(e),
                            this.setXYZ(t, yl.x, yl.y, yl.z);
                        return this;
                      },
                    },
                    {
                      key: "applyNormalMatrix",
                      value: function (e) {
                        for (var t = 0, n = this.count; t < n; t++)
                          (yl.x = this.getX(t)),
                            (yl.y = this.getY(t)),
                            (yl.z = this.getZ(t)),
                            yl.applyNormalMatrix(e),
                            this.setXYZ(t, yl.x, yl.y, yl.z);
                        return this;
                      },
                    },
                    {
                      key: "transformDirection",
                      value: function (e) {
                        for (var t = 0, n = this.count; t < n; t++)
                          (yl.x = this.getX(t)),
                            (yl.y = this.getY(t)),
                            (yl.z = this.getZ(t)),
                            yl.transformDirection(e),
                            this.setXYZ(t, yl.x, yl.y, yl.z);
                        return this;
                      },
                    },
                    {
                      key: "setX",
                      value: function (e, t) {
                        return (
                          (this.data.array[e * this.data.stride + this.offset] =
                            t),
                          this
                        );
                      },
                    },
                    {
                      key: "setY",
                      value: function (e, t) {
                        return (
                          (this.data.array[
                            e * this.data.stride + this.offset + 1
                          ] = t),
                          this
                        );
                      },
                    },
                    {
                      key: "setZ",
                      value: function (e, t) {
                        return (
                          (this.data.array[
                            e * this.data.stride + this.offset + 2
                          ] = t),
                          this
                        );
                      },
                    },
                    {
                      key: "setW",
                      value: function (e, t) {
                        return (
                          (this.data.array[
                            e * this.data.stride + this.offset + 3
                          ] = t),
                          this
                        );
                      },
                    },
                    {
                      key: "getX",
                      value: function (e) {
                        return this.data.array[
                          e * this.data.stride + this.offset
                        ];
                      },
                    },
                    {
                      key: "getY",
                      value: function (e) {
                        return this.data.array[
                          e * this.data.stride + this.offset + 1
                        ];
                      },
                    },
                    {
                      key: "getZ",
                      value: function (e) {
                        return this.data.array[
                          e * this.data.stride + this.offset + 2
                        ];
                      },
                    },
                    {
                      key: "getW",
                      value: function (e) {
                        return this.data.array[
                          e * this.data.stride + this.offset + 3
                        ];
                      },
                    },
                    {
                      key: "setXY",
                      value: function (e, t, n) {
                        return (
                          (e = e * this.data.stride + this.offset),
                          (this.data.array[e + 0] = t),
                          (this.data.array[e + 1] = n),
                          this
                        );
                      },
                    },
                    {
                      key: "setXYZ",
                      value: function (e, t, n, i) {
                        return (
                          (e = e * this.data.stride + this.offset),
                          (this.data.array[e + 0] = t),
                          (this.data.array[e + 1] = n),
                          (this.data.array[e + 2] = i),
                          this
                        );
                      },
                    },
                    {
                      key: "setXYZW",
                      value: function (e, t, n, i, r) {
                        return (
                          (e = e * this.data.stride + this.offset),
                          (this.data.array[e + 0] = t),
                          (this.data.array[e + 1] = n),
                          (this.data.array[e + 2] = i),
                          (this.data.array[e + 3] = r),
                          this
                        );
                      },
                    },
                    {
                      key: "clone",
                      value: function (t) {
                        if (void 0 === t) {
                          console.log(
                            "THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data."
                          );
                          for (var n = [], i = 0; i < this.count; i++)
                            for (
                              var r = i * this.data.stride + this.offset, a = 0;
                              a < this.itemSize;
                              a++
                            )
                              n.push(this.data.array[r + a]);
                          return new Jr(
                            new this.array.constructor(n),
                            this.itemSize,
                            this.normalized
                          );
                        }
                        return (
                          void 0 === t.interleavedBuffers &&
                            (t.interleavedBuffers = {}),
                          void 0 === t.interleavedBuffers[this.data.uuid] &&
                            (t.interleavedBuffers[this.data.uuid] =
                              this.data.clone(t)),
                          new e(
                            t.interleavedBuffers[this.data.uuid],
                            this.itemSize,
                            this.offset,
                            this.normalized
                          )
                        );
                      },
                    },
                    {
                      key: "toJSON",
                      value: function (e) {
                        if (void 0 === e) {
                          console.log(
                            "THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data."
                          );
                          for (var t = [], n = 0; n < this.count; n++)
                            for (
                              var i = n * this.data.stride + this.offset, r = 0;
                              r < this.itemSize;
                              r++
                            )
                              t.push(this.data.array[i + r]);
                          return {
                            itemSize: this.itemSize,
                            type: this.array.constructor.name,
                            array: t,
                            normalized: this.normalized,
                          };
                        }
                        return (
                          void 0 === e.interleavedBuffers &&
                            (e.interleavedBuffers = {}),
                          void 0 === e.interleavedBuffers[this.data.uuid] &&
                            (e.interleavedBuffers[this.data.uuid] =
                              this.data.toJSON(e)),
                          {
                            isInterleavedBufferAttribute: !0,
                            itemSize: this.itemSize,
                            data: this.data.uuid,
                            offset: this.offset,
                            normalized: this.normalized,
                          }
                        );
                      },
                    },
                    {
                      key: "count",
                      get: function () {
                        return this.data.count;
                      },
                    },
                    {
                      key: "array",
                      get: function () {
                        return this.data.array;
                      },
                    },
                    {
                      key: "needsUpdate",
                      set: function (e) {
                        this.data.needsUpdate = e;
                      },
                    },
                  ]),
                  e
                );
              })();
            xl.prototype.isInterleavedBufferAttribute = !0;
            var bl,
              _l = (function (e) {
                function t(e) {
                  var n;
                  return (
                    f(this, t),
                    ((n = c(this, h(t).call(this))).type = "SpriteMaterial"),
                    (n.color = new qr(16777215)),
                    (n.map = null),
                    (n.alphaMap = null),
                    (n.rotation = 0),
                    (n.sizeAttenuation = !0),
                    (n.transparent = !0),
                    n.setValues(e),
                    n
                  );
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "copy",
                      value: function (e) {
                        return (
                          l(h(t.prototype), "copy", this).call(this, e),
                          this.color.copy(e.color),
                          (this.map = e.map),
                          (this.alphaMap = e.alphaMap),
                          (this.rotation = e.rotation),
                          (this.sizeAttenuation = e.sizeAttenuation),
                          this
                        );
                      },
                    },
                  ]),
                  t
                );
              })(Ur);
            _l.prototype.isSpriteMaterial = !0;
            var wl = new _i(),
              Sl = new _i(),
              El = new _i(),
              Ml = new ui(),
              Al = new ui(),
              Tl = new Ki(),
              Cl = new _i(),
              kl = new _i(),
              Pl = new _i(),
              Ll = new ui(),
              Rl = new ui(),
              Il = new ui(),
              Fl = (function (e) {
                function t(e) {
                  var n;
                  if (
                    (f(this, t),
                    ((n = c(this, h(t).call(this))).type = "Sprite"),
                    void 0 === bl)
                  ) {
                    bl = new ya();
                    var i = new Float32Array([
                        -0.5, -0.5, 0, 0, 0, 0.5, -0.5, 0, 1, 0, 0.5, 0.5, 0, 1,
                        1, -0.5, 0.5, 0, 0, 1,
                      ]),
                      r = new gl(i, 5);
                    bl.setIndex([0, 1, 2, 0, 2, 3]),
                      bl.setAttribute("position", new xl(r, 3, 0, !1)),
                      bl.setAttribute("uv", new xl(r, 2, 3, !1));
                  }
                  return (
                    (n.geometry = bl),
                    (n.material = void 0 !== e ? e : new _l()),
                    (n.center = new ui(0.5, 0.5)),
                    n
                  );
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "raycast",
                      value: function (e, t) {
                        null === e.camera &&
                          console.error(
                            'THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'
                          ),
                          Sl.setFromMatrixScale(this.matrixWorld),
                          Tl.copy(e.camera.matrixWorld),
                          this.modelViewMatrix.multiplyMatrices(
                            e.camera.matrixWorldInverse,
                            this.matrixWorld
                          ),
                          El.setFromMatrixPosition(this.modelViewMatrix),
                          e.camera.isPerspectiveCamera &&
                            !1 === this.material.sizeAttenuation &&
                            Sl.multiplyScalar(-El.z);
                        var n,
                          i,
                          r = this.material.rotation;
                        0 !== r && ((i = Math.cos(r)), (n = Math.sin(r)));
                        var a = this.center;
                        Nl(Cl.set(-0.5, -0.5, 0), El, a, Sl, n, i),
                          Nl(kl.set(0.5, -0.5, 0), El, a, Sl, n, i),
                          Nl(Pl.set(0.5, 0.5, 0), El, a, Sl, n, i),
                          Ll.set(0, 0),
                          Rl.set(1, 0),
                          Il.set(1, 1);
                        var o = e.ray.intersectTriangle(Cl, kl, Pl, !1, wl);
                        if (
                          null !== o ||
                          (Nl(kl.set(-0.5, 0.5, 0), El, a, Sl, n, i),
                          Rl.set(0, 1),
                          null !==
                            (o = e.ray.intersectTriangle(Cl, Pl, kl, !1, wl)))
                        ) {
                          var s = e.ray.origin.distanceTo(wl);
                          s < e.near ||
                            s > e.far ||
                            t.push({
                              distance: s,
                              point: wl.clone(),
                              uv: Dr.getUV(
                                wl,
                                Cl,
                                kl,
                                Pl,
                                Ll,
                                Rl,
                                Il,
                                new ui()
                              ),
                              face: null,
                              object: this,
                            });
                        }
                      },
                    },
                    {
                      key: "copy",
                      value: function (e) {
                        return (
                          l(h(t.prototype), "copy", this).call(this, e),
                          void 0 !== e.center && this.center.copy(e.center),
                          (this.material = e.material),
                          this
                        );
                      },
                    },
                  ]),
                  t
                );
              })(Sr);
            function Nl(e, t, n, i, r, a) {
              Ml.subVectors(e, n).addScalar(0.5).multiply(i),
                void 0 !== r
                  ? ((Al.x = a * Ml.x - r * Ml.y), (Al.y = r * Ml.x + a * Ml.y))
                  : Al.copy(Ml),
                e.copy(t),
                (e.x += Al.x),
                (e.y += Al.y),
                e.applyMatrix4(Tl);
            }
            Fl.prototype.isSprite = !0;
            var Ol = new _i(),
              Bl = new _i(),
              Dl = (function (e) {
                function t() {
                  var e;
                  return (
                    f(this, t),
                    ((e = c(this, h(t).call(this)))._currentLevel = 0),
                    (e.type = "LOD"),
                    Object.defineProperties(d(e), {
                      levels: { enumerable: !0, value: [] },
                      isLOD: { value: !0 },
                    }),
                    (e.autoUpdate = !0),
                    e
                  );
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "copy",
                      value: function (e) {
                        l(h(t.prototype), "copy", this).call(this, e, !1);
                        for (
                          var n = e.levels, i = 0, r = n.length;
                          i < r;
                          i++
                        ) {
                          var a = n[i];
                          this.addLevel(a.object.clone(), a.distance);
                        }
                        return (this.autoUpdate = e.autoUpdate), this;
                      },
                    },
                    {
                      key: "addLevel",
                      value: function (e) {
                        var t =
                          arguments.length > 1 && void 0 !== arguments[1]
                            ? arguments[1]
                            : 0;
                        t = Math.abs(t);
                        var n,
                          i = this.levels;
                        for (n = 0; n < i.length && !(t < i[n].distance); n++);
                        return (
                          i.splice(n, 0, { distance: t, object: e }),
                          this.add(e),
                          this
                        );
                      },
                    },
                    {
                      key: "getCurrentLevel",
                      value: function () {
                        return this._currentLevel;
                      },
                    },
                    {
                      key: "getObjectForDistance",
                      value: function (e) {
                        var t = this.levels;
                        if (t.length > 0) {
                          var n, i;
                          for (
                            n = 1, i = t.length;
                            n < i && !(e < t[n].distance);
                            n++
                          );
                          return t[n - 1].object;
                        }
                        return null;
                      },
                    },
                    {
                      key: "raycast",
                      value: function (e, t) {
                        if (this.levels.length > 0) {
                          Ol.setFromMatrixPosition(this.matrixWorld);
                          var n = e.ray.origin.distanceTo(Ol);
                          this.getObjectForDistance(n).raycast(e, t);
                        }
                      },
                    },
                    {
                      key: "update",
                      value: function (e) {
                        var t = this.levels;
                        if (t.length > 1) {
                          Ol.setFromMatrixPosition(e.matrixWorld),
                            Bl.setFromMatrixPosition(this.matrixWorld);
                          var n,
                            i,
                            r = Ol.distanceTo(Bl) / e.zoom;
                          for (
                            t[0].object.visible = !0, n = 1, i = t.length;
                            n < i && r >= t[n].distance;
                            n++
                          )
                            (t[n - 1].object.visible = !1),
                              (t[n].object.visible = !0);
                          for (this._currentLevel = n - 1; n < i; n++)
                            t[n].object.visible = !1;
                        }
                      },
                    },
                    {
                      key: "toJSON",
                      value: function (e) {
                        var n = l(h(t.prototype), "toJSON", this).call(this, e);
                        !1 === this.autoUpdate && (n.object.autoUpdate = !1),
                          (n.object.levels = []);
                        for (
                          var i = this.levels, r = 0, a = i.length;
                          r < a;
                          r++
                        ) {
                          var o = i[r];
                          n.object.levels.push({
                            object: o.object.uuid,
                            distance: o.distance,
                          });
                        }
                        return n;
                      },
                    },
                  ]),
                  t
                );
              })(Sr),
              Vl = new _i(),
              Ul = new vi(),
              zl = new vi(),
              jl = new _i(),
              Gl = new Ki(),
              Hl = (function (e) {
                function t(e, n) {
                  var i;
                  return (
                    f(this, t),
                    ((i = c(this, h(t).call(this, e, n))).type = "SkinnedMesh"),
                    (i.bindMode = "attached"),
                    (i.bindMatrix = new Ki()),
                    (i.bindMatrixInverse = new Ki()),
                    i
                  );
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "copy",
                      value: function (e) {
                        return (
                          l(h(t.prototype), "copy", this).call(this, e),
                          (this.bindMode = e.bindMode),
                          this.bindMatrix.copy(e.bindMatrix),
                          this.bindMatrixInverse.copy(e.bindMatrixInverse),
                          (this.skeleton = e.skeleton),
                          this
                        );
                      },
                    },
                    {
                      key: "bind",
                      value: function (e, t) {
                        (this.skeleton = e),
                          void 0 === t &&
                            (this.updateMatrixWorld(!0),
                            this.skeleton.calculateInverses(),
                            (t = this.matrixWorld)),
                          this.bindMatrix.copy(t),
                          this.bindMatrixInverse.copy(t).invert();
                      },
                    },
                    {
                      key: "pose",
                      value: function () {
                        this.skeleton.pose();
                      },
                    },
                    {
                      key: "normalizeSkinWeights",
                      value: function () {
                        for (
                          var e = new vi(),
                            t = this.geometry.attributes.skinWeight,
                            n = 0,
                            i = t.count;
                          n < i;
                          n++
                        ) {
                          (e.x = t.getX(n)),
                            (e.y = t.getY(n)),
                            (e.z = t.getZ(n)),
                            (e.w = t.getW(n));
                          var r = 1 / e.manhattanLength();
                          r !== 1 / 0 ? e.multiplyScalar(r) : e.set(1, 0, 0, 0),
                            t.setXYZW(n, e.x, e.y, e.z, e.w);
                        }
                      },
                    },
                    {
                      key: "updateMatrixWorld",
                      value: function (e) {
                        l(h(t.prototype), "updateMatrixWorld", this).call(
                          this,
                          e
                        ),
                          "attached" === this.bindMode
                            ? this.bindMatrixInverse
                                .copy(this.matrixWorld)
                                .invert()
                            : "detached" === this.bindMode
                            ? this.bindMatrixInverse
                                .copy(this.bindMatrix)
                                .invert()
                            : console.warn(
                                "THREE.SkinnedMesh: Unrecognized bindMode: " +
                                  this.bindMode
                              );
                      },
                    },
                    {
                      key: "boneTransform",
                      value: function (e, t) {
                        var n = this.skeleton,
                          i = this.geometry;
                        Ul.fromBufferAttribute(i.attributes.skinIndex, e),
                          zl.fromBufferAttribute(i.attributes.skinWeight, e),
                          Vl.fromBufferAttribute(
                            i.attributes.position,
                            e
                          ).applyMatrix4(this.bindMatrix),
                          t.set(0, 0, 0);
                        for (var r = 0; r < 4; r++) {
                          var a = zl.getComponent(r);
                          if (0 !== a) {
                            var o = Ul.getComponent(r);
                            Gl.multiplyMatrices(
                              n.bones[o].matrixWorld,
                              n.boneInverses[o]
                            ),
                              t.addScaledVector(
                                jl.copy(Vl).applyMatrix4(Gl),
                                a
                              );
                          }
                        }
                        return t.applyMatrix4(this.bindMatrixInverse);
                      },
                    },
                  ]),
                  t
                );
              })(Oa);
            Hl.prototype.isSkinnedMesh = !0;
            var Wl = (function (e) {
              function t() {
                var e;
                return (
                  f(this, t), ((e = c(this, h(t).call(this))).type = "Bone"), e
                );
              }
              return p(t, e), t;
            })(Sr);
            Wl.prototype.isBone = !0;
            var Yl = (function (e) {
              function t(e, n, i, r, a, o, s, l, u, d, p, m) {
                var v;
                return (
                  f(this, t),
                  ((v = c(
                    this,
                    h(t).call(this, null, o, s, l, u, d, r, a, p, m)
                  )).image = {
                    data: e || null,
                    width: n || 1,
                    height: i || 1,
                  }),
                  (v.magFilter = void 0 !== u ? u : Te),
                  (v.minFilter = void 0 !== d ? d : Te),
                  (v.generateMipmaps = !1),
                  (v.flipY = !1),
                  (v.unpackAlignment = 1),
                  (v.needsUpdate = !0),
                  v
                );
              }
              return p(t, e), t;
            })(fi);
            Yl.prototype.isDataTexture = !0;
            var ql = new Ki(),
              Xl = new Ki(),
              Ql = (function () {
                function e() {
                  var t =
                      arguments.length > 0 && void 0 !== arguments[0]
                        ? arguments[0]
                        : [],
                    n =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : [];
                  f(this, e),
                    (this.uuid = ti()),
                    (this.bones = t.slice(0)),
                    (this.boneInverses = n),
                    (this.boneMatrices = null),
                    (this.boneTexture = null),
                    (this.boneTextureSize = 0),
                    (this.frame = -1),
                    this.init();
                }
                return (
                  m(e, [
                    {
                      key: "init",
                      value: function () {
                        var e = this.bones,
                          t = this.boneInverses;
                        if (
                          ((this.boneMatrices = new Float32Array(
                            16 * e.length
                          )),
                          0 === t.length)
                        )
                          this.calculateInverses();
                        else if (e.length !== t.length) {
                          console.warn(
                            "THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."
                          ),
                            (this.boneInverses = []);
                          for (var n = 0, i = this.bones.length; n < i; n++)
                            this.boneInverses.push(new Ki());
                        }
                      },
                    },
                    {
                      key: "calculateInverses",
                      value: function () {
                        this.boneInverses.length = 0;
                        for (var e = 0, t = this.bones.length; e < t; e++) {
                          var n = new Ki();
                          this.bones[e] &&
                            n.copy(this.bones[e].matrixWorld).invert(),
                            this.boneInverses.push(n);
                        }
                      },
                    },
                    {
                      key: "pose",
                      value: function () {
                        for (var e = 0, t = this.bones.length; e < t; e++) {
                          var n = this.bones[e];
                          n &&
                            n.matrixWorld.copy(this.boneInverses[e]).invert();
                        }
                        for (var i = 0, r = this.bones.length; i < r; i++) {
                          var a = this.bones[i];
                          a &&
                            (a.parent && a.parent.isBone
                              ? (a.matrix.copy(a.parent.matrixWorld).invert(),
                                a.matrix.multiply(a.matrixWorld))
                              : a.matrix.copy(a.matrixWorld),
                            a.matrix.decompose(
                              a.position,
                              a.quaternion,
                              a.scale
                            ));
                        }
                      },
                    },
                    {
                      key: "update",
                      value: function () {
                        for (
                          var e = this.bones,
                            t = this.boneInverses,
                            n = this.boneMatrices,
                            i = this.boneTexture,
                            r = 0,
                            a = e.length;
                          r < a;
                          r++
                        ) {
                          var o = e[r] ? e[r].matrixWorld : Xl;
                          ql.multiplyMatrices(o, t[r]), ql.toArray(n, 16 * r);
                        }
                        null !== i && (i.needsUpdate = !0);
                      },
                    },
                    {
                      key: "clone",
                      value: function () {
                        return new e(this.bones, this.boneInverses);
                      },
                    },
                    {
                      key: "computeBoneTexture",
                      value: function () {
                        var e = Math.sqrt(4 * this.bones.length);
                        (e = oi(e)), (e = Math.max(e, 4));
                        var t = new Float32Array(e * e * 4);
                        t.set(this.boneMatrices);
                        var n = new Yl(t, e, e, Je, Ge);
                        return (
                          (this.boneMatrices = t),
                          (this.boneTexture = n),
                          (this.boneTextureSize = e),
                          this
                        );
                      },
                    },
                    {
                      key: "getBoneByName",
                      value: function (e) {
                        for (var t = 0, n = this.bones.length; t < n; t++) {
                          var i = this.bones[t];
                          if (i.name === e) return i;
                        }
                      },
                    },
                    {
                      key: "dispose",
                      value: function () {
                        null !== this.boneTexture &&
                          (this.boneTexture.dispose(),
                          (this.boneTexture = null));
                      },
                    },
                    {
                      key: "fromJSON",
                      value: function (e, t) {
                        this.uuid = e.uuid;
                        for (var n = 0, i = e.bones.length; n < i; n++) {
                          var r = e.bones[n],
                            a = t[r];
                          void 0 === a &&
                            (console.warn(
                              "THREE.Skeleton: No bone found with UUID:",
                              r
                            ),
                            (a = new Wl())),
                            this.bones.push(a),
                            this.boneInverses.push(
                              new Ki().fromArray(e.boneInverses[n])
                            );
                        }
                        return this.init(), this;
                      },
                    },
                    {
                      key: "toJSON",
                      value: function () {
                        var e = {
                          metadata: {
                            version: 4.5,
                            type: "Skeleton",
                            generator: "Skeleton.toJSON",
                          },
                          bones: [],
                          boneInverses: [],
                        };
                        e.uuid = this.uuid;
                        for (
                          var t = this.bones,
                            n = this.boneInverses,
                            i = 0,
                            r = t.length;
                          i < r;
                          i++
                        ) {
                          var a = t[i];
                          e.bones.push(a.uuid);
                          var o = n[i];
                          e.boneInverses.push(o.toArray());
                        }
                        return e;
                      },
                    },
                  ]),
                  e
                );
              })(),
              Zl = new Ki(),
              Jl = new Ki(),
              Kl = [],
              $l = new Oa(),
              eu = (function (e) {
                function t(e, n, i) {
                  var r;
                  return (
                    f(this, t),
                    ((r = c(this, h(t).call(this, e, n))).instanceMatrix =
                      new Jr(new Float32Array(16 * i), 16)),
                    (r.instanceColor = null),
                    (r.count = i),
                    (r.frustumCulled = !1),
                    r
                  );
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "copy",
                      value: function (e) {
                        return (
                          l(h(t.prototype), "copy", this).call(this, e),
                          this.instanceMatrix.copy(e.instanceMatrix),
                          null !== e.instanceColor &&
                            (this.instanceColor = e.instanceColor.clone()),
                          (this.count = e.count),
                          this
                        );
                      },
                    },
                    {
                      key: "getColorAt",
                      value: function (e, t) {
                        t.fromArray(this.instanceColor.array, 3 * e);
                      },
                    },
                    {
                      key: "getMatrixAt",
                      value: function (e, t) {
                        t.fromArray(this.instanceMatrix.array, 16 * e);
                      },
                    },
                    {
                      key: "raycast",
                      value: function (e, t) {
                        var n = this.matrixWorld,
                          i = this.count;
                        if (
                          (($l.geometry = this.geometry),
                          ($l.material = this.material),
                          void 0 !== $l.material)
                        )
                          for (var r = 0; r < i; r++) {
                            this.getMatrixAt(r, Zl),
                              Jl.multiplyMatrices(n, Zl),
                              ($l.matrixWorld = Jl),
                              $l.raycast(e, Kl);
                            for (var a = 0, o = Kl.length; a < o; a++) {
                              var s = Kl[a];
                              (s.instanceId = r), (s.object = this), t.push(s);
                            }
                            Kl.length = 0;
                          }
                      },
                    },
                    {
                      key: "setColorAt",
                      value: function (e, t) {
                        null === this.instanceColor &&
                          (this.instanceColor = new Jr(
                            new Float32Array(3 * this.count),
                            3
                          )),
                          t.toArray(this.instanceColor.array, 3 * e);
                      },
                    },
                    {
                      key: "setMatrixAt",
                      value: function (e, t) {
                        t.toArray(this.instanceMatrix.array, 16 * e);
                      },
                    },
                    { key: "updateMorphTargets", value: function () {} },
                    {
                      key: "dispose",
                      value: function () {
                        this.dispatchEvent({ type: "dispose" });
                      },
                    },
                  ]),
                  t
                );
              })(Oa);
            eu.prototype.isInstancedMesh = !0;
            var tu = (function (e) {
              function t(e) {
                var n;
                return (
                  f(this, t),
                  ((n = c(this, h(t).call(this))).type = "LineBasicMaterial"),
                  (n.color = new qr(16777215)),
                  (n.linewidth = 1),
                  (n.linecap = "round"),
                  (n.linejoin = "round"),
                  (n.morphTargets = !1),
                  n.setValues(e),
                  n
                );
              }
              return (
                p(t, e),
                m(t, [
                  {
                    key: "copy",
                    value: function (e) {
                      return (
                        l(h(t.prototype), "copy", this).call(this, e),
                        this.color.copy(e.color),
                        (this.linewidth = e.linewidth),
                        (this.linecap = e.linecap),
                        (this.linejoin = e.linejoin),
                        (this.morphTargets = e.morphTargets),
                        this
                      );
                    },
                  },
                ]),
                t
              );
            })(Ur);
            tu.prototype.isLineBasicMaterial = !0;
            var nu = new _i(),
              iu = new _i(),
              ru = new Ki(),
              au = new Ji(),
              ou = new Gi(),
              su = (function (e) {
                function t() {
                  var e,
                    n =
                      arguments.length > 0 && void 0 !== arguments[0]
                        ? arguments[0]
                        : new ya(),
                    i =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : new tu();
                  return (
                    f(this, t),
                    ((e = c(this, h(t).call(this))).type = "Line"),
                    (e.geometry = n),
                    (e.material = i),
                    e.updateMorphTargets(),
                    e
                  );
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "copy",
                      value: function (e) {
                        return (
                          l(h(t.prototype), "copy", this).call(this, e),
                          (this.material = e.material),
                          (this.geometry = e.geometry),
                          this
                        );
                      },
                    },
                    {
                      key: "computeLineDistances",
                      value: function () {
                        var e = this.geometry;
                        if (e.isBufferGeometry)
                          if (null === e.index) {
                            for (
                              var t = e.attributes.position,
                                n = [0],
                                i = 1,
                                r = t.count;
                              i < r;
                              i++
                            )
                              nu.fromBufferAttribute(t, i - 1),
                                iu.fromBufferAttribute(t, i),
                                (n[i] = n[i - 1]),
                                (n[i] += nu.distanceTo(iu));
                            e.setAttribute("lineDistance", new oa(n, 1));
                          } else
                            console.warn(
                              "THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry."
                            );
                        else
                          e.isGeometry &&
                            console.error(
                              "THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."
                            );
                        return this;
                      },
                    },
                    {
                      key: "raycast",
                      value: function (e, t) {
                        var n = this.geometry,
                          i = this.matrixWorld,
                          r = e.params.Line.threshold,
                          a = n.drawRange;
                        if (
                          (null === n.boundingSphere &&
                            n.computeBoundingSphere(),
                          ou.copy(n.boundingSphere),
                          ou.applyMatrix4(i),
                          (ou.radius += r),
                          !1 !== e.ray.intersectsSphere(ou))
                        ) {
                          ru.copy(i).invert(), au.copy(e.ray).applyMatrix4(ru);
                          var o =
                              r /
                              ((this.scale.x + this.scale.y + this.scale.z) /
                                3),
                            s = o * o,
                            l = new _i(),
                            u = new _i(),
                            c = new _i(),
                            h = new _i(),
                            d = this.isLineSegments ? 2 : 1;
                          if (n.isBufferGeometry) {
                            var p = n.index,
                              f = n.attributes.position;
                            if (null !== p)
                              for (
                                var m = Math.max(0, a.start),
                                  v = Math.min(p.count, a.start + a.count) - 1;
                                m < v;
                                m += d
                              ) {
                                var g = p.getX(m),
                                  y = p.getX(m + 1);
                                if (
                                  (l.fromBufferAttribute(f, g),
                                  u.fromBufferAttribute(f, y),
                                  !(au.distanceSqToSegment(l, u, h, c) > s))
                                ) {
                                  h.applyMatrix4(this.matrixWorld);
                                  var x = e.ray.origin.distanceTo(h);
                                  x < e.near ||
                                    x > e.far ||
                                    t.push({
                                      distance: x,
                                      point: c
                                        .clone()
                                        .applyMatrix4(this.matrixWorld),
                                      index: m,
                                      face: null,
                                      faceIndex: null,
                                      object: this,
                                    });
                                }
                              }
                            else
                              for (
                                var b = Math.max(0, a.start),
                                  _ = Math.min(f.count, a.start + a.count) - 1;
                                b < _;
                                b += d
                              )
                                if (
                                  (l.fromBufferAttribute(f, b),
                                  u.fromBufferAttribute(f, b + 1),
                                  !(au.distanceSqToSegment(l, u, h, c) > s))
                                ) {
                                  h.applyMatrix4(this.matrixWorld);
                                  var w = e.ray.origin.distanceTo(h);
                                  w < e.near ||
                                    w > e.far ||
                                    t.push({
                                      distance: w,
                                      point: c
                                        .clone()
                                        .applyMatrix4(this.matrixWorld),
                                      index: b,
                                      face: null,
                                      faceIndex: null,
                                      object: this,
                                    });
                                }
                          } else
                            n.isGeometry &&
                              console.error(
                                "THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."
                              );
                        }
                      },
                    },
                    {
                      key: "updateMorphTargets",
                      value: function () {
                        var e = this.geometry;
                        if (e.isBufferGeometry) {
                          var t = e.morphAttributes,
                            n = Object.keys(t);
                          if (n.length > 0) {
                            var i = t[n[0]];
                            if (void 0 !== i) {
                              (this.morphTargetInfluences = []),
                                (this.morphTargetDictionary = {});
                              for (var r = 0, a = i.length; r < a; r++) {
                                var o = i[r].name || String(r);
                                this.morphTargetInfluences.push(0),
                                  (this.morphTargetDictionary[o] = r);
                              }
                            }
                          }
                        } else {
                          var s = e.morphTargets;
                          void 0 !== s &&
                            s.length > 0 &&
                            console.error(
                              "THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead."
                            );
                        }
                      },
                    },
                  ]),
                  t
                );
              })(Sr);
            su.prototype.isLine = !0;
            var lu = new _i(),
              uu = new _i(),
              cu = (function (e) {
                function t(e, n) {
                  var i;
                  return (
                    f(this, t),
                    ((i = c(this, h(t).call(this, e, n))).type =
                      "LineSegments"),
                    i
                  );
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "computeLineDistances",
                      value: function () {
                        var e = this.geometry;
                        if (e.isBufferGeometry)
                          if (null === e.index) {
                            for (
                              var t = e.attributes.position,
                                n = [],
                                i = 0,
                                r = t.count;
                              i < r;
                              i += 2
                            )
                              lu.fromBufferAttribute(t, i),
                                uu.fromBufferAttribute(t, i + 1),
                                (n[i] = 0 === i ? 0 : n[i - 1]),
                                (n[i + 1] = n[i] + lu.distanceTo(uu));
                            e.setAttribute("lineDistance", new oa(n, 1));
                          } else
                            console.warn(
                              "THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry."
                            );
                        else
                          e.isGeometry &&
                            console.error(
                              "THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."
                            );
                        return this;
                      },
                    },
                  ]),
                  t
                );
              })(su);
            cu.prototype.isLineSegments = !0;
            var hu = (function (e) {
              function t(e, n) {
                var i;
                return (
                  f(this, t),
                  ((i = c(this, h(t).call(this, e, n))).type = "LineLoop"),
                  i
                );
              }
              return p(t, e), t;
            })(su);
            hu.prototype.isLineLoop = !0;
            var du = (function (e) {
              function t(e) {
                var n;
                return (
                  f(this, t),
                  ((n = c(this, h(t).call(this))).type = "PointsMaterial"),
                  (n.color = new qr(16777215)),
                  (n.map = null),
                  (n.alphaMap = null),
                  (n.size = 1),
                  (n.sizeAttenuation = !0),
                  (n.morphTargets = !1),
                  n.setValues(e),
                  n
                );
              }
              return (
                p(t, e),
                m(t, [
                  {
                    key: "copy",
                    value: function (e) {
                      return (
                        l(h(t.prototype), "copy", this).call(this, e),
                        this.color.copy(e.color),
                        (this.map = e.map),
                        (this.alphaMap = e.alphaMap),
                        (this.size = e.size),
                        (this.sizeAttenuation = e.sizeAttenuation),
                        (this.morphTargets = e.morphTargets),
                        this
                      );
                    },
                  },
                ]),
                t
              );
            })(Ur);
            du.prototype.isPointsMaterial = !0;
            var pu = new Ki(),
              fu = new Ji(),
              mu = new Gi(),
              vu = new _i(),
              gu = (function (e) {
                function t() {
                  var e,
                    n =
                      arguments.length > 0 && void 0 !== arguments[0]
                        ? arguments[0]
                        : new ya(),
                    i =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : new du();
                  return (
                    f(this, t),
                    ((e = c(this, h(t).call(this))).type = "Points"),
                    (e.geometry = n),
                    (e.material = i),
                    e.updateMorphTargets(),
                    e
                  );
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "copy",
                      value: function (e) {
                        return (
                          l(h(t.prototype), "copy", this).call(this, e),
                          (this.material = e.material),
                          (this.geometry = e.geometry),
                          this
                        );
                      },
                    },
                    {
                      key: "raycast",
                      value: function (e, t) {
                        var n = this.geometry,
                          i = this.matrixWorld,
                          r = e.params.Points.threshold,
                          a = n.drawRange;
                        if (
                          (null === n.boundingSphere &&
                            n.computeBoundingSphere(),
                          mu.copy(n.boundingSphere),
                          mu.applyMatrix4(i),
                          (mu.radius += r),
                          !1 !== e.ray.intersectsSphere(mu))
                        ) {
                          pu.copy(i).invert(), fu.copy(e.ray).applyMatrix4(pu);
                          var o =
                              r /
                              ((this.scale.x + this.scale.y + this.scale.z) /
                                3),
                            s = o * o;
                          if (n.isBufferGeometry) {
                            var l = n.index,
                              u = n.attributes.position;
                            if (null !== l)
                              for (
                                var c = Math.max(0, a.start),
                                  h = Math.min(l.count, a.start + a.count);
                                c < h;
                                c++
                              ) {
                                var d = l.getX(c);
                                vu.fromBufferAttribute(u, d),
                                  yu(vu, d, s, i, e, t, this);
                              }
                            else
                              for (
                                var p = Math.max(0, a.start),
                                  f = Math.min(u.count, a.start + a.count);
                                p < f;
                                p++
                              )
                                vu.fromBufferAttribute(u, p),
                                  yu(vu, p, s, i, e, t, this);
                          } else
                            console.error(
                              "THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."
                            );
                        }
                      },
                    },
                    {
                      key: "updateMorphTargets",
                      value: function () {
                        var e = this.geometry;
                        if (e.isBufferGeometry) {
                          var t = e.morphAttributes,
                            n = Object.keys(t);
                          if (n.length > 0) {
                            var i = t[n[0]];
                            if (void 0 !== i) {
                              (this.morphTargetInfluences = []),
                                (this.morphTargetDictionary = {});
                              for (var r = 0, a = i.length; r < a; r++) {
                                var o = i[r].name || String(r);
                                this.morphTargetInfluences.push(0),
                                  (this.morphTargetDictionary[o] = r);
                              }
                            }
                          }
                        } else {
                          var s = e.morphTargets;
                          void 0 !== s &&
                            s.length > 0 &&
                            console.error(
                              "THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead."
                            );
                        }
                      },
                    },
                  ]),
                  t
                );
              })(Sr);
            function yu(e, t, n, i, r, a, o) {
              var s = fu.distanceSqToPoint(e);
              if (s < n) {
                var l = new _i();
                fu.closestPointToPoint(e, l), l.applyMatrix4(i);
                var u = r.ray.origin.distanceTo(l);
                if (u < r.near || u > r.far) return;
                a.push({
                  distance: u,
                  distanceToRay: Math.sqrt(s),
                  point: l,
                  index: t,
                  face: null,
                  object: o,
                });
              }
            }
            gu.prototype.isPoints = !0;
            var xu = (function (e) {
              function t(e, n, i, r, a, o, s, l, u) {
                var p;
                f(this, t),
                  ((p = c(
                    this,
                    h(t).call(this, e, n, i, r, a, o, s, l, u)
                  )).format = void 0 !== s ? s : Ze),
                  (p.minFilter = void 0 !== o ? o : Re),
                  (p.magFilter = void 0 !== a ? a : Re),
                  (p.generateMipmaps = !1);
                var m = d(p);
                return (
                  "requestVideoFrameCallback" in e &&
                    e.requestVideoFrameCallback(function t() {
                      (m.needsUpdate = !0), e.requestVideoFrameCallback(t);
                    }),
                  p
                );
              }
              return (
                p(t, e),
                m(t, [
                  {
                    key: "clone",
                    value: function () {
                      return new this.constructor(this.image).copy(this);
                    },
                  },
                  {
                    key: "update",
                    value: function () {
                      var e = this.image;
                      !1 === "requestVideoFrameCallback" in e &&
                        e.readyState >= e.HAVE_CURRENT_DATA &&
                        (this.needsUpdate = !0);
                    },
                  },
                ]),
                t
              );
            })(fi);
            xu.prototype.isVideoTexture = !0;
            var bu = (function (e) {
              function t(e, n, i, r, a, o, s, l, u, d, p, m) {
                var v;
                return (
                  f(this, t),
                  ((v = c(
                    this,
                    h(t).call(this, null, o, s, l, u, d, r, a, p, m)
                  )).image = { width: n, height: i }),
                  (v.mipmaps = e),
                  (v.flipY = !1),
                  (v.generateMipmaps = !1),
                  v
                );
              }
              return p(t, e), t;
            })(fi);
            bu.prototype.isCompressedTexture = !0;
            var _u = (function (e) {
              function t(e, n, i, r, a, o, s, l, u) {
                var d;
                return (
                  f(this, t),
                  ((d = c(
                    this,
                    h(t).call(this, e, n, i, r, a, o, s, l, u)
                  )).needsUpdate = !0),
                  d
                );
              }
              return p(t, e), t;
            })(fi);
            _u.prototype.isCanvasTexture = !0;
            var wu = (function (e) {
              function t(e, n, i, r, a, o, s, l, u, d) {
                var p;
                if (
                  (f(this, t), (d = void 0 !== d ? d : tt) !== tt && d !== nt)
                )
                  throw new Error(
                    "DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat"
                  );
                return (
                  void 0 === i && d === tt && (i = Ue),
                  void 0 === i && d === nt && (i = Xe),
                  ((p = c(
                    this,
                    h(t).call(this, null, r, a, o, s, l, d, i, u)
                  )).image = { width: e, height: n }),
                  (p.magFilter = void 0 !== s ? s : Te),
                  (p.minFilter = void 0 !== l ? l : Te),
                  (p.flipY = !1),
                  (p.generateMipmaps = !1),
                  p
                );
              }
              return p(t, e), t;
            })(fi);
            wu.prototype.isDepthTexture = !0;
            var Su = (function (e) {
                function t() {
                  var e,
                    n =
                      arguments.length > 0 && void 0 !== arguments[0]
                        ? arguments[0]
                        : 1,
                    i =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : 8,
                    r =
                      arguments.length > 2 && void 0 !== arguments[2]
                        ? arguments[2]
                        : 0,
                    a =
                      arguments.length > 3 && void 0 !== arguments[3]
                        ? arguments[3]
                        : 2 * Math.PI;
                  f(this, t),
                    ((e = c(this, h(t).call(this))).type = "CircleGeometry"),
                    (e.parameters = {
                      radius: n,
                      segments: i,
                      thetaStart: r,
                      thetaLength: a,
                    }),
                    (i = Math.max(3, i));
                  var o = [],
                    s = [],
                    l = [],
                    u = [],
                    d = new _i(),
                    p = new ui();
                  s.push(0, 0, 0), l.push(0, 0, 1), u.push(0.5, 0.5);
                  for (var m = 0, v = 3; m <= i; m++, v += 3) {
                    var g = r + (m / i) * a;
                    (d.x = n * Math.cos(g)),
                      (d.y = n * Math.sin(g)),
                      s.push(d.x, d.y, d.z),
                      l.push(0, 0, 1),
                      (p.x = (s[v] / n + 1) / 2),
                      (p.y = (s[v + 1] / n + 1) / 2),
                      u.push(p.x, p.y);
                  }
                  for (var y = 1; y <= i; y++) o.push(y, y + 1, 0);
                  return (
                    e.setIndex(o),
                    e.setAttribute("position", new oa(s, 3)),
                    e.setAttribute("normal", new oa(l, 3)),
                    e.setAttribute("uv", new oa(u, 2)),
                    e
                  );
                }
                return p(t, e), t;
              })(ya),
              Eu = (function (e) {
                function t() {
                  var e,
                    n =
                      arguments.length > 0 && void 0 !== arguments[0]
                        ? arguments[0]
                        : 1,
                    i =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : 1,
                    r =
                      arguments.length > 2 && void 0 !== arguments[2]
                        ? arguments[2]
                        : 1,
                    a =
                      arguments.length > 3 && void 0 !== arguments[3]
                        ? arguments[3]
                        : 8,
                    o =
                      arguments.length > 4 && void 0 !== arguments[4]
                        ? arguments[4]
                        : 1,
                    s =
                      arguments.length > 5 &&
                      void 0 !== arguments[5] &&
                      arguments[5],
                    l =
                      arguments.length > 6 && void 0 !== arguments[6]
                        ? arguments[6]
                        : 0,
                    u =
                      arguments.length > 7 && void 0 !== arguments[7]
                        ? arguments[7]
                        : 2 * Math.PI;
                  f(this, t),
                    ((e = c(this, h(t).call(this))).type = "CylinderGeometry"),
                    (e.parameters = {
                      radiusTop: n,
                      radiusBottom: i,
                      height: r,
                      radialSegments: a,
                      heightSegments: o,
                      openEnded: s,
                      thetaStart: l,
                      thetaLength: u,
                    });
                  var p = d(e);
                  (a = Math.floor(a)), (o = Math.floor(o));
                  var m = [],
                    v = [],
                    g = [],
                    y = [],
                    x = 0,
                    b = [],
                    _ = r / 2,
                    w = 0;
                  function S() {
                    for (
                      var e = new _i(),
                        t = new _i(),
                        s = 0,
                        c = (i - n) / r,
                        h = 0;
                      h <= o;
                      h++
                    ) {
                      for (
                        var d = [], f = h / o, S = f * (i - n) + n, E = 0;
                        E <= a;
                        E++
                      ) {
                        var M = E / a,
                          A = M * u + l,
                          T = Math.sin(A),
                          C = Math.cos(A);
                        (t.x = S * T),
                          (t.y = -f * r + _),
                          (t.z = S * C),
                          v.push(t.x, t.y, t.z),
                          e.set(T, c, C).normalize(),
                          g.push(e.x, e.y, e.z),
                          y.push(M, 1 - f),
                          d.push(x++);
                      }
                      b.push(d);
                    }
                    for (var k = 0; k < a; k++)
                      for (var P = 0; P < o; P++) {
                        var L = b[P][k],
                          R = b[P + 1][k],
                          I = b[P + 1][k + 1],
                          F = b[P][k + 1];
                        m.push(L, R, F), m.push(R, I, F), (s += 6);
                      }
                    p.addGroup(w, s, 0), (w += s);
                  }
                  function E(e) {
                    for (
                      var t = x,
                        r = new ui(),
                        o = new _i(),
                        s = 0,
                        c = !0 === e ? n : i,
                        h = !0 === e ? 1 : -1,
                        d = 1;
                      d <= a;
                      d++
                    )
                      v.push(0, _ * h, 0),
                        g.push(0, h, 0),
                        y.push(0.5, 0.5),
                        x++;
                    for (var f = x, b = 0; b <= a; b++) {
                      var S = (b / a) * u + l,
                        E = Math.cos(S),
                        M = Math.sin(S);
                      (o.x = c * M),
                        (o.y = _ * h),
                        (o.z = c * E),
                        v.push(o.x, o.y, o.z),
                        g.push(0, h, 0),
                        (r.x = 0.5 * E + 0.5),
                        (r.y = 0.5 * M * h + 0.5),
                        y.push(r.x, r.y),
                        x++;
                    }
                    for (var A = 0; A < a; A++) {
                      var T = t + A,
                        C = f + A;
                      !0 === e ? m.push(C, C + 1, T) : m.push(C + 1, C, T),
                        (s += 3);
                    }
                    p.addGroup(w, s, !0 === e ? 1 : 2), (w += s);
                  }
                  return (
                    S(),
                    !1 === s && (n > 0 && E(!0), i > 0 && E(!1)),
                    e.setIndex(m),
                    e.setAttribute("position", new oa(v, 3)),
                    e.setAttribute("normal", new oa(g, 3)),
                    e.setAttribute("uv", new oa(y, 2)),
                    e
                  );
                }
                return p(t, e), t;
              })(ya),
              Mu = (function (e) {
                function t() {
                  var e,
                    n =
                      arguments.length > 0 && void 0 !== arguments[0]
                        ? arguments[0]
                        : 1,
                    i =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : 1,
                    r =
                      arguments.length > 2 && void 0 !== arguments[2]
                        ? arguments[2]
                        : 8,
                    a =
                      arguments.length > 3 && void 0 !== arguments[3]
                        ? arguments[3]
                        : 1,
                    o =
                      arguments.length > 4 &&
                      void 0 !== arguments[4] &&
                      arguments[4],
                    s =
                      arguments.length > 5 && void 0 !== arguments[5]
                        ? arguments[5]
                        : 0,
                    l =
                      arguments.length > 6 && void 0 !== arguments[6]
                        ? arguments[6]
                        : 2 * Math.PI;
                  return (
                    f(this, t),
                    ((e = c(
                      this,
                      h(t).call(this, 0, n, i, r, a, o, s, l)
                    )).type = "ConeGeometry"),
                    (e.parameters = {
                      radius: n,
                      height: i,
                      radialSegments: r,
                      heightSegments: a,
                      openEnded: o,
                      thetaStart: s,
                      thetaLength: l,
                    }),
                    e
                  );
                }
                return p(t, e), t;
              })(Eu),
              Au = (function (e) {
                function t(e, n) {
                  var i,
                    r =
                      arguments.length > 2 && void 0 !== arguments[2]
                        ? arguments[2]
                        : 1,
                    a =
                      arguments.length > 3 && void 0 !== arguments[3]
                        ? arguments[3]
                        : 0;
                  f(this, t),
                    ((i = c(this, h(t).call(this))).type =
                      "PolyhedronGeometry"),
                    (i.parameters = {
                      vertices: e,
                      indices: n,
                      radius: r,
                      detail: a,
                    });
                  var o = [],
                    s = [];
                  function l(e) {
                    for (
                      var t = new _i(), i = new _i(), r = new _i(), a = 0;
                      a < n.length;
                      a += 3
                    )
                      g(n[a + 0], t),
                        g(n[a + 1], i),
                        g(n[a + 2], r),
                        u(t, i, r, e);
                  }
                  function u(e, t, n, i) {
                    for (var r = i + 1, a = [], o = 0; o <= r; o++) {
                      a[o] = [];
                      for (
                        var s = e.clone().lerp(n, o / r),
                          l = t.clone().lerp(n, o / r),
                          u = r - o,
                          c = 0;
                        c <= u;
                        c++
                      )
                        a[o][c] =
                          0 === c && o === r ? s : s.clone().lerp(l, c / u);
                    }
                    for (var h = 0; h < r; h++)
                      for (var d = 0; d < 2 * (r - h) - 1; d++) {
                        var p = Math.floor(d / 2);
                        d % 2 === 0
                          ? (v(a[h][p + 1]), v(a[h + 1][p]), v(a[h][p]))
                          : (v(a[h][p + 1]),
                            v(a[h + 1][p + 1]),
                            v(a[h + 1][p]));
                      }
                  }
                  function d(e) {
                    for (var t = new _i(), n = 0; n < o.length; n += 3)
                      (t.x = o[n + 0]),
                        (t.y = o[n + 1]),
                        (t.z = o[n + 2]),
                        t.normalize().multiplyScalar(e),
                        (o[n + 0] = t.x),
                        (o[n + 1] = t.y),
                        (o[n + 2] = t.z);
                  }
                  function p() {
                    for (var e = new _i(), t = 0; t < o.length; t += 3) {
                      (e.x = o[t + 0]), (e.y = o[t + 1]), (e.z = o[t + 2]);
                      var n = b(e) / 2 / Math.PI + 0.5,
                        i = _(e) / Math.PI + 0.5;
                      s.push(n, 1 - i);
                    }
                    y(), m();
                  }
                  function m() {
                    for (var e = 0; e < s.length; e += 6) {
                      var t = s[e + 0],
                        n = s[e + 2],
                        i = s[e + 4],
                        r = Math.max(t, n, i),
                        a = Math.min(t, n, i);
                      r > 0.9 &&
                        a < 0.1 &&
                        (t < 0.2 && (s[e + 0] += 1),
                        n < 0.2 && (s[e + 2] += 1),
                        i < 0.2 && (s[e + 4] += 1));
                    }
                  }
                  function v(e) {
                    o.push(e.x, e.y, e.z);
                  }
                  function g(t, n) {
                    var i = 3 * t;
                    (n.x = e[i + 0]), (n.y = e[i + 1]), (n.z = e[i + 2]);
                  }
                  function y() {
                    for (
                      var e = new _i(),
                        t = new _i(),
                        n = new _i(),
                        i = new _i(),
                        r = new ui(),
                        a = new ui(),
                        l = new ui(),
                        u = 0,
                        c = 0;
                      u < o.length;
                      u += 9, c += 6
                    ) {
                      e.set(o[u + 0], o[u + 1], o[u + 2]),
                        t.set(o[u + 3], o[u + 4], o[u + 5]),
                        n.set(o[u + 6], o[u + 7], o[u + 8]),
                        r.set(s[c + 0], s[c + 1]),
                        a.set(s[c + 2], s[c + 3]),
                        l.set(s[c + 4], s[c + 5]),
                        i.copy(e).add(t).add(n).divideScalar(3);
                      var h = b(i);
                      x(r, c + 0, e, h), x(a, c + 2, t, h), x(l, c + 4, n, h);
                    }
                  }
                  function x(e, t, n, i) {
                    i < 0 && 1 === e.x && (s[t] = e.x - 1),
                      0 === n.x && 0 === n.z && (s[t] = i / 2 / Math.PI + 0.5);
                  }
                  function b(e) {
                    return Math.atan2(e.z, -e.x);
                  }
                  function _(e) {
                    return Math.atan2(-e.y, Math.sqrt(e.x * e.x + e.z * e.z));
                  }
                  return (
                    l(a),
                    d(r),
                    p(),
                    i.setAttribute("position", new oa(o, 3)),
                    i.setAttribute("normal", new oa(o.slice(), 3)),
                    i.setAttribute("uv", new oa(s, 2)),
                    0 === a ? i.computeVertexNormals() : i.normalizeNormals(),
                    i
                  );
                }
                return p(t, e), t;
              })(ya),
              Tu = (function (e) {
                function t() {
                  var e,
                    n =
                      arguments.length > 0 && void 0 !== arguments[0]
                        ? arguments[0]
                        : 1,
                    i =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : 0;
                  f(this, t);
                  var r = (1 + Math.sqrt(5)) / 2,
                    a = 1 / r,
                    o = [
                      -1,
                      -1,
                      -1,
                      -1,
                      -1,
                      1,
                      -1,
                      1,
                      -1,
                      -1,
                      1,
                      1,
                      1,
                      -1,
                      -1,
                      1,
                      -1,
                      1,
                      1,
                      1,
                      -1,
                      1,
                      1,
                      1,
                      0,
                      -a,
                      -r,
                      0,
                      -a,
                      r,
                      0,
                      a,
                      -r,
                      0,
                      a,
                      r,
                      -a,
                      -r,
                      0,
                      -a,
                      r,
                      0,
                      a,
                      -r,
                      0,
                      a,
                      r,
                      0,
                      -r,
                      0,
                      -a,
                      r,
                      0,
                      -a,
                      -r,
                      0,
                      a,
                      r,
                      0,
                      a,
                    ],
                    s = [
                      3, 11, 7, 3, 7, 15, 3, 15, 13, 7, 19, 17, 7, 17, 6, 7, 6,
                      15, 17, 4, 8, 17, 8, 10, 17, 10, 6, 8, 0, 16, 8, 16, 2, 8,
                      2, 10, 0, 12, 1, 0, 1, 18, 0, 18, 16, 6, 10, 2, 6, 2, 13,
                      6, 13, 15, 2, 16, 18, 2, 18, 3, 2, 3, 13, 18, 1, 9, 18, 9,
                      11, 18, 11, 3, 4, 14, 12, 4, 12, 0, 4, 0, 8, 11, 9, 5, 11,
                      5, 19, 11, 19, 7, 19, 5, 14, 19, 14, 4, 19, 4, 17, 1, 12,
                      14, 1, 14, 5, 1, 5, 9,
                    ];
                  return (
                    ((e = c(this, h(t).call(this, o, s, n, i))).type =
                      "DodecahedronGeometry"),
                    (e.parameters = { radius: n, detail: i }),
                    e
                  );
                }
                return p(t, e), t;
              })(Au),
              Cu = new _i(),
              ku = new _i(),
              Pu = new _i(),
              Lu = new Dr(),
              Ru = (function (e) {
                function t(e, n) {
                  var i;
                  if (
                    (f(this, t),
                    ((i = c(this, h(t).call(this))).type = "EdgesGeometry"),
                    (i.parameters = { thresholdAngle: n }),
                    (n = void 0 !== n ? n : 1),
                    !0 === e.isGeometry)
                  )
                    return (
                      console.error(
                        "THREE.EdgesGeometry no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."
                      ),
                      c(i)
                    );
                  for (
                    var r = Math.pow(10, 4),
                      a = Math.cos($n * n),
                      o = e.getIndex(),
                      s = e.getAttribute("position"),
                      l = o ? o.count : s.count,
                      u = [0, 0, 0],
                      d = ["a", "b", "c"],
                      p = new Array(3),
                      m = {},
                      v = [],
                      g = 0;
                    g < l;
                    g += 3
                  ) {
                    o
                      ? ((u[0] = o.getX(g)),
                        (u[1] = o.getX(g + 1)),
                        (u[2] = o.getX(g + 2)))
                      : ((u[0] = g), (u[1] = g + 1), (u[2] = g + 2));
                    var y = Lu.a,
                      x = Lu.b,
                      b = Lu.c;
                    if (
                      (y.fromBufferAttribute(s, u[0]),
                      x.fromBufferAttribute(s, u[1]),
                      b.fromBufferAttribute(s, u[2]),
                      Lu.getNormal(Pu),
                      (p[0] = ""
                        .concat(Math.round(y.x * r), ",")
                        .concat(Math.round(y.y * r), ",")
                        .concat(Math.round(y.z * r))),
                      (p[1] = ""
                        .concat(Math.round(x.x * r), ",")
                        .concat(Math.round(x.y * r), ",")
                        .concat(Math.round(x.z * r))),
                      (p[2] = ""
                        .concat(Math.round(b.x * r), ",")
                        .concat(Math.round(b.y * r), ",")
                        .concat(Math.round(b.z * r))),
                      p[0] !== p[1] && p[1] !== p[2] && p[2] !== p[0])
                    )
                      for (var _ = 0; _ < 3; _++) {
                        var w = (_ + 1) % 3,
                          S = p[_],
                          E = p[w],
                          M = Lu[d[_]],
                          A = Lu[d[w]],
                          T = "".concat(S, "_").concat(E),
                          C = "".concat(E, "_").concat(S);
                        C in m && m[C]
                          ? (Pu.dot(m[C].normal) <= a &&
                              (v.push(M.x, M.y, M.z), v.push(A.x, A.y, A.z)),
                            (m[C] = null))
                          : T in m ||
                            (m[T] = {
                              index0: u[_],
                              index1: u[w],
                              normal: Pu.clone(),
                            });
                      }
                  }
                  for (var k in m)
                    if (m[k]) {
                      var P = m[k],
                        L = P.index0,
                        R = P.index1;
                      Cu.fromBufferAttribute(s, L),
                        ku.fromBufferAttribute(s, R),
                        v.push(Cu.x, Cu.y, Cu.z),
                        v.push(ku.x, ku.y, ku.z);
                    }
                  return i.setAttribute("position", new oa(v, 3)), i;
                }
                return p(t, e), t;
              })(ya),
              Iu = function (e, t, n) {
                n = n || 2;
                var i,
                  r,
                  a,
                  o,
                  s,
                  l,
                  u,
                  c = t && t.length,
                  h = c ? t[0] * n : e.length,
                  d = Fu(e, 0, h, n, !0),
                  p = [];
                if (!d || d.next === d.prev) return p;
                if (
                  (c &&
                    (d = (function (e, t, n, i) {
                      var r,
                        a,
                        o,
                        s,
                        l,
                        u = [];
                      for (r = 0, a = t.length; r < a; r++)
                        (o = t[r] * i),
                          (s = r < a - 1 ? t[r + 1] * i : e.length),
                          (l = Fu(e, o, s, i, !1)) === l.next &&
                            (l.steiner = !0),
                          u.push(Wu(l));
                      for (u.sort(zu), r = 0; r < u.length; r++)
                        ju(u[r], n), (n = Nu(n, n.next));
                      return n;
                    })(e, t, d, n)),
                  e.length > 80 * n)
                ) {
                  (i = a = e[0]), (r = o = e[1]);
                  for (var f = n; f < h; f += n)
                    (s = e[f]) < i && (i = s),
                      (l = e[f + 1]) < r && (r = l),
                      s > a && (a = s),
                      l > o && (o = l);
                  u = 0 !== (u = Math.max(a - i, o - r)) ? 1 / u : 0;
                }
                return Ou(d, p, n, i, r, u), p;
              };
            function Fu(e, t, n, i, r) {
              var a, o;
              if (
                r ===
                (function (e, t, n, i) {
                  for (var r = 0, a = t, o = n - i; a < n; a += i)
                    (r += (e[o] - e[a]) * (e[a + 1] + e[o + 1])), (o = a);
                  return r;
                })(e, t, n, i) >
                  0
              )
                for (a = t; a < n; a += i) o = tc(a, e[a], e[a + 1], o);
              else for (a = n - i; a >= t; a -= i) o = tc(a, e[a], e[a + 1], o);
              return o && Qu(o, o.next) && (nc(o), (o = o.next)), o;
            }
            function Nu(e, t) {
              if (!e) return e;
              t || (t = e);
              var n,
                i = e;
              do {
                if (
                  ((n = !1),
                  i.steiner || (!Qu(i, i.next) && 0 !== Xu(i.prev, i, i.next)))
                )
                  i = i.next;
                else {
                  if ((nc(i), (i = t = i.prev) === i.next)) break;
                  n = !0;
                }
              } while (n || i !== t);
              return t;
            }
            function Ou(e, t, n, i, r, a, o) {
              if (e) {
                !o &&
                  a &&
                  (function (e, t, n, i) {
                    var r = e;
                    do {
                      null === r.z && (r.z = Hu(r.x, r.y, t, n, i)),
                        (r.prevZ = r.prev),
                        (r.nextZ = r.next),
                        (r = r.next);
                    } while (r !== e);
                    (r.prevZ.nextZ = null),
                      (r.prevZ = null),
                      (function (e) {
                        var t,
                          n,
                          i,
                          r,
                          a,
                          o,
                          s,
                          l,
                          u = 1;
                        do {
                          for (n = e, e = null, a = null, o = 0; n; ) {
                            for (
                              o++, i = n, s = 0, t = 0;
                              t < u && (s++, (i = i.nextZ));
                              t++
                            );
                            for (l = u; s > 0 || (l > 0 && i); )
                              0 !== s && (0 === l || !i || n.z <= i.z)
                                ? ((r = n), (n = n.nextZ), s--)
                                : ((r = i), (i = i.nextZ), l--),
                                a ? (a.nextZ = r) : (e = r),
                                (r.prevZ = a),
                                (a = r);
                            n = i;
                          }
                          (a.nextZ = null), (u *= 2);
                        } while (o > 1);
                      })(r);
                  })(e, i, r, a);
                for (var s, l, u = e; e.prev !== e.next; )
                  if (((s = e.prev), (l = e.next), a ? Du(e, i, r, a) : Bu(e)))
                    t.push(s.i / n),
                      t.push(e.i / n),
                      t.push(l.i / n),
                      nc(e),
                      (e = l.next),
                      (u = l.next);
                  else if ((e = l) === u) {
                    o
                      ? 1 === o
                        ? Ou((e = Vu(Nu(e), t, n)), t, n, i, r, a, 2)
                        : 2 === o && Uu(e, t, n, i, r, a)
                      : Ou(Nu(e), t, n, i, r, a, 1);
                    break;
                  }
              }
            }
            function Bu(e) {
              var t = e.prev,
                n = e,
                i = e.next;
              if (Xu(t, n, i) >= 0) return !1;
              for (var r = e.next.next; r !== e.prev; ) {
                if (
                  Yu(t.x, t.y, n.x, n.y, i.x, i.y, r.x, r.y) &&
                  Xu(r.prev, r, r.next) >= 0
                )
                  return !1;
                r = r.next;
              }
              return !0;
            }
            function Du(e, t, n, i) {
              var r = e.prev,
                a = e,
                o = e.next;
              if (Xu(r, a, o) >= 0) return !1;
              for (
                var s =
                    r.x < a.x ? (r.x < o.x ? r.x : o.x) : a.x < o.x ? a.x : o.x,
                  l =
                    r.y < a.y ? (r.y < o.y ? r.y : o.y) : a.y < o.y ? a.y : o.y,
                  u =
                    r.x > a.x ? (r.x > o.x ? r.x : o.x) : a.x > o.x ? a.x : o.x,
                  c =
                    r.y > a.y ? (r.y > o.y ? r.y : o.y) : a.y > o.y ? a.y : o.y,
                  h = Hu(s, l, t, n, i),
                  d = Hu(u, c, t, n, i),
                  p = e.prevZ,
                  f = e.nextZ;
                p && p.z >= h && f && f.z <= d;

              ) {
                if (
                  p !== e.prev &&
                  p !== e.next &&
                  Yu(r.x, r.y, a.x, a.y, o.x, o.y, p.x, p.y) &&
                  Xu(p.prev, p, p.next) >= 0
                )
                  return !1;
                if (
                  ((p = p.prevZ),
                  f !== e.prev &&
                    f !== e.next &&
                    Yu(r.x, r.y, a.x, a.y, o.x, o.y, f.x, f.y) &&
                    Xu(f.prev, f, f.next) >= 0)
                )
                  return !1;
                f = f.nextZ;
              }
              for (; p && p.z >= h; ) {
                if (
                  p !== e.prev &&
                  p !== e.next &&
                  Yu(r.x, r.y, a.x, a.y, o.x, o.y, p.x, p.y) &&
                  Xu(p.prev, p, p.next) >= 0
                )
                  return !1;
                p = p.prevZ;
              }
              for (; f && f.z <= d; ) {
                if (
                  f !== e.prev &&
                  f !== e.next &&
                  Yu(r.x, r.y, a.x, a.y, o.x, o.y, f.x, f.y) &&
                  Xu(f.prev, f, f.next) >= 0
                )
                  return !1;
                f = f.nextZ;
              }
              return !0;
            }
            function Vu(e, t, n) {
              var i = e;
              do {
                var r = i.prev,
                  a = i.next.next;
                !Qu(r, a) &&
                  Zu(r, i, i.next, a) &&
                  $u(r, a) &&
                  $u(a, r) &&
                  (t.push(r.i / n),
                  t.push(i.i / n),
                  t.push(a.i / n),
                  nc(i),
                  nc(i.next),
                  (i = e = a)),
                  (i = i.next);
              } while (i !== e);
              return Nu(i);
            }
            function Uu(e, t, n, i, r, a) {
              var o = e;
              do {
                for (var s = o.next.next; s !== o.prev; ) {
                  if (o.i !== s.i && qu(o, s)) {
                    var l = ec(o, s);
                    return (
                      (o = Nu(o, o.next)),
                      (l = Nu(l, l.next)),
                      Ou(o, t, n, i, r, a),
                      void Ou(l, t, n, i, r, a)
                    );
                  }
                  s = s.next;
                }
                o = o.next;
              } while (o !== e);
            }
            function zu(e, t) {
              return e.x - t.x;
            }
            function ju(e, t) {
              if (
                (t = (function (e, t) {
                  var n,
                    i = t,
                    r = e.x,
                    a = e.y,
                    o = -1 / 0;
                  do {
                    if (a <= i.y && a >= i.next.y && i.next.y !== i.y) {
                      var s =
                        i.x + ((a - i.y) * (i.next.x - i.x)) / (i.next.y - i.y);
                      if (s <= r && s > o) {
                        if (((o = s), s === r)) {
                          if (a === i.y) return i;
                          if (a === i.next.y) return i.next;
                        }
                        n = i.x < i.next.x ? i : i.next;
                      }
                    }
                    i = i.next;
                  } while (i !== t);
                  if (!n) return null;
                  if (r === o) return n;
                  var l,
                    u = n,
                    c = n.x,
                    h = n.y,
                    d = 1 / 0;
                  i = n;
                  do {
                    r >= i.x &&
                      i.x >= c &&
                      r !== i.x &&
                      Yu(a < h ? r : o, a, c, h, a < h ? o : r, a, i.x, i.y) &&
                      ((l = Math.abs(a - i.y) / (r - i.x)),
                      $u(i, e) &&
                        (l < d ||
                          (l === d &&
                            (i.x > n.x || (i.x === n.x && Gu(n, i))))) &&
                        ((n = i), (d = l))),
                      (i = i.next);
                  } while (i !== u);
                  return n;
                })(e, t))
              ) {
                var n = ec(t, e);
                Nu(t, t.next), Nu(n, n.next);
              }
            }
            function Gu(e, t) {
              return Xu(e.prev, e, t.prev) < 0 && Xu(t.next, e, e.next) < 0;
            }
            function Hu(e, t, n, i, r) {
              return (
                (e =
                  1431655765 &
                  ((e =
                    858993459 &
                    ((e =
                      252645135 &
                      ((e = 16711935 & ((e = 32767 * (e - n) * r) | (e << 8))) |
                        (e << 4))) |
                      (e << 2))) |
                    (e << 1))) |
                ((t =
                  1431655765 &
                  ((t =
                    858993459 &
                    ((t =
                      252645135 &
                      ((t = 16711935 & ((t = 32767 * (t - i) * r) | (t << 8))) |
                        (t << 4))) |
                      (t << 2))) |
                    (t << 1))) <<
                  1)
              );
            }
            function Wu(e) {
              var t = e,
                n = e;
              do {
                (t.x < n.x || (t.x === n.x && t.y < n.y)) && (n = t),
                  (t = t.next);
              } while (t !== e);
              return n;
            }
            function Yu(e, t, n, i, r, a, o, s) {
              return (
                (r - o) * (t - s) - (e - o) * (a - s) >= 0 &&
                (e - o) * (i - s) - (n - o) * (t - s) >= 0 &&
                (n - o) * (a - s) - (r - o) * (i - s) >= 0
              );
            }
            function qu(e, t) {
              return (
                e.next.i !== t.i &&
                e.prev.i !== t.i &&
                !(function (e, t) {
                  var n = e;
                  do {
                    if (
                      n.i !== e.i &&
                      n.next.i !== e.i &&
                      n.i !== t.i &&
                      n.next.i !== t.i &&
                      Zu(n, n.next, e, t)
                    )
                      return !0;
                    n = n.next;
                  } while (n !== e);
                  return !1;
                })(e, t) &&
                (($u(e, t) &&
                  $u(t, e) &&
                  (function (e, t) {
                    var n = e,
                      i = !1,
                      r = (e.x + t.x) / 2,
                      a = (e.y + t.y) / 2;
                    do {
                      n.y > a !== n.next.y > a &&
                        n.next.y !== n.y &&
                        r <
                          ((n.next.x - n.x) * (a - n.y)) / (n.next.y - n.y) +
                            n.x &&
                        (i = !i),
                        (n = n.next);
                    } while (n !== e);
                    return i;
                  })(e, t) &&
                  (Xu(e.prev, e, t.prev) || Xu(e, t.prev, t))) ||
                  (Qu(e, t) &&
                    Xu(e.prev, e, e.next) > 0 &&
                    Xu(t.prev, t, t.next) > 0))
              );
            }
            function Xu(e, t, n) {
              return (t.y - e.y) * (n.x - t.x) - (t.x - e.x) * (n.y - t.y);
            }
            function Qu(e, t) {
              return e.x === t.x && e.y === t.y;
            }
            function Zu(e, t, n, i) {
              var r = Ku(Xu(e, t, n)),
                a = Ku(Xu(e, t, i)),
                o = Ku(Xu(n, i, e)),
                s = Ku(Xu(n, i, t));
              return (
                (r !== a && o !== s) ||
                !(0 !== r || !Ju(e, n, t)) ||
                !(0 !== a || !Ju(e, i, t)) ||
                !(0 !== o || !Ju(n, e, i)) ||
                !(0 !== s || !Ju(n, t, i))
              );
            }
            function Ju(e, t, n) {
              return (
                t.x <= Math.max(e.x, n.x) &&
                t.x >= Math.min(e.x, n.x) &&
                t.y <= Math.max(e.y, n.y) &&
                t.y >= Math.min(e.y, n.y)
              );
            }
            function Ku(e) {
              return e > 0 ? 1 : e < 0 ? -1 : 0;
            }
            function $u(e, t) {
              return Xu(e.prev, e, e.next) < 0
                ? Xu(e, t, e.next) >= 0 && Xu(e, e.prev, t) >= 0
                : Xu(e, t, e.prev) < 0 || Xu(e, e.next, t) < 0;
            }
            function ec(e, t) {
              var n = new ic(e.i, e.x, e.y),
                i = new ic(t.i, t.x, t.y),
                r = e.next,
                a = t.prev;
              return (
                (e.next = t),
                (t.prev = e),
                (n.next = r),
                (r.prev = n),
                (i.next = n),
                (n.prev = i),
                (a.next = i),
                (i.prev = a),
                i
              );
            }
            function tc(e, t, n, i) {
              var r = new ic(e, t, n);
              return (
                i
                  ? ((r.next = i.next),
                    (r.prev = i),
                    (i.next.prev = r),
                    (i.next = r))
                  : ((r.prev = r), (r.next = r)),
                r
              );
            }
            function nc(e) {
              (e.next.prev = e.prev),
                (e.prev.next = e.next),
                e.prevZ && (e.prevZ.nextZ = e.nextZ),
                e.nextZ && (e.nextZ.prevZ = e.prevZ);
            }
            function ic(e, t, n) {
              (this.i = e),
                (this.x = t),
                (this.y = n),
                (this.prev = null),
                (this.next = null),
                (this.z = null),
                (this.prevZ = null),
                (this.nextZ = null),
                (this.steiner = !1);
            }
            var rc = (function () {
              function e() {
                f(this, e);
              }
              return (
                m(e, null, [
                  {
                    key: "area",
                    value: function (e) {
                      for (
                        var t = e.length, n = 0, i = t - 1, r = 0;
                        r < t;
                        i = r++
                      )
                        n += e[i].x * e[r].y - e[r].x * e[i].y;
                      return 0.5 * n;
                    },
                  },
                  {
                    key: "isClockWise",
                    value: function (t) {
                      return e.area(t) < 0;
                    },
                  },
                  {
                    key: "triangulateShape",
                    value: function (e, t) {
                      var n = [],
                        i = [],
                        r = [];
                      ac(e), oc(n, e);
                      var a = e.length;
                      t.forEach(ac);
                      for (var o = 0; o < t.length; o++)
                        i.push(a), (a += t[o].length), oc(n, t[o]);
                      for (var s = Iu(n, i), l = 0; l < s.length; l += 3)
                        r.push(s.slice(l, l + 3));
                      return r;
                    },
                  },
                ]),
                e
              );
            })();
            function ac(e) {
              var t = e.length;
              t > 2 && e[t - 1].equals(e[0]) && e.pop();
            }
            function oc(e, t) {
              for (var n = 0; n < t.length; n++) e.push(t[n].x), e.push(t[n].y);
            }
            var sc = (function (e) {
                function t(e, n) {
                  var i;
                  f(this, t),
                    ((i = c(this, h(t).call(this))).type = "ExtrudeGeometry"),
                    (i.parameters = { shapes: e, options: n }),
                    (e = Array.isArray(e) ? e : [e]);
                  for (
                    var r = d(i), a = [], o = [], s = 0, l = e.length;
                    s < l;
                    s++
                  )
                    u(e[s]);
                  function u(e) {
                    var t = [],
                      i = void 0 !== n.curveSegments ? n.curveSegments : 12,
                      s = void 0 !== n.steps ? n.steps : 1,
                      l = void 0 !== n.depth ? n.depth : 100,
                      u = void 0 === n.bevelEnabled || n.bevelEnabled,
                      c = void 0 !== n.bevelThickness ? n.bevelThickness : 6,
                      h = void 0 !== n.bevelSize ? n.bevelSize : c - 2,
                      d = void 0 !== n.bevelOffset ? n.bevelOffset : 0,
                      p = void 0 !== n.bevelSegments ? n.bevelSegments : 3,
                      f = n.extrudePath,
                      m = void 0 !== n.UVGenerator ? n.UVGenerator : lc;
                    void 0 !== n.amount &&
                      (console.warn(
                        "THREE.ExtrudeBufferGeometry: amount has been renamed to depth."
                      ),
                      (l = n.amount));
                    var v,
                      g,
                      y,
                      x,
                      b,
                      _ = !1;
                    f &&
                      ((v = f.getSpacedPoints(s)),
                      (_ = !0),
                      (u = !1),
                      (g = f.computeFrenetFrames(s, !1)),
                      (y = new _i()),
                      (x = new _i()),
                      (b = new _i())),
                      u || ((p = 0), (c = 0), (h = 0), (d = 0));
                    var w = e.extractPoints(i),
                      S = w.shape,
                      E = w.holes;
                    if (!rc.isClockWise(S)) {
                      S = S.reverse();
                      for (var M = 0, A = E.length; M < A; M++) {
                        var T = E[M];
                        rc.isClockWise(T) && (E[M] = T.reverse());
                      }
                    }
                    for (
                      var C = rc.triangulateShape(S, E),
                        k = S,
                        P = 0,
                        L = E.length;
                      P < L;
                      P++
                    ) {
                      var R = E[P];
                      S = S.concat(R);
                    }
                    function I(e, t, n) {
                      return (
                        t ||
                          console.error(
                            "THREE.ExtrudeGeometry: vec does not exist"
                          ),
                        t.clone().multiplyScalar(n).add(e)
                      );
                    }
                    var F = S.length,
                      N = C.length;
                    function O(e, t, n) {
                      var i,
                        r,
                        a,
                        o = e.x - t.x,
                        s = e.y - t.y,
                        l = n.x - e.x,
                        u = n.y - e.y,
                        c = o * o + s * s,
                        h = o * u - s * l;
                      if (Math.abs(h) > Number.EPSILON) {
                        var d = Math.sqrt(c),
                          p = Math.sqrt(l * l + u * u),
                          f = t.x - s / d,
                          m = t.y + o / d,
                          v =
                            ((n.x - u / p - f) * u - (n.y + l / p - m) * l) /
                            (o * u - s * l),
                          g =
                            (i = f + o * v - e.x) * i +
                            (r = m + s * v - e.y) * r;
                        if (g <= 2) return new ui(i, r);
                        a = Math.sqrt(g / 2);
                      } else {
                        var y = !1;
                        o > Number.EPSILON
                          ? l > Number.EPSILON && (y = !0)
                          : o < -Number.EPSILON
                          ? l < -Number.EPSILON && (y = !0)
                          : Math.sign(s) === Math.sign(u) && (y = !0),
                          y
                            ? ((i = -s), (r = o), (a = Math.sqrt(c)))
                            : ((i = o), (r = s), (a = Math.sqrt(c / 2)));
                      }
                      return new ui(i / a, r / a);
                    }
                    for (
                      var B = [], D = 0, V = k.length, U = V - 1, z = D + 1;
                      D < V;
                      D++, U++, z++
                    )
                      U === V && (U = 0),
                        z === V && (z = 0),
                        (B[D] = O(k[D], k[U], k[z]));
                    for (
                      var j, G = [], H = B.concat(), W = 0, Y = E.length;
                      W < Y;
                      W++
                    ) {
                      var q = E[W];
                      j = [];
                      for (
                        var X = 0, Q = q.length, Z = Q - 1, J = X + 1;
                        X < Q;
                        X++, Z++, J++
                      )
                        Z === Q && (Z = 0),
                          J === Q && (J = 0),
                          (j[X] = O(q[X], q[Z], q[J]));
                      G.push(j), (H = H.concat(j));
                    }
                    for (var K = 0; K < p; K++) {
                      for (
                        var $ = K / p,
                          ee = c * Math.cos(($ * Math.PI) / 2),
                          te = h * Math.sin(($ * Math.PI) / 2) + d,
                          ne = 0,
                          ie = k.length;
                        ne < ie;
                        ne++
                      ) {
                        var re = I(k[ne], B[ne], te);
                        Le(re.x, re.y, -ee);
                      }
                      for (var ae = 0, oe = E.length; ae < oe; ae++) {
                        var se = E[ae];
                        j = G[ae];
                        for (var le = 0, ue = se.length; le < ue; le++) {
                          var ce = I(se[le], j[le], te);
                          Le(ce.x, ce.y, -ee);
                        }
                      }
                    }
                    for (var he = h + d, de = 0; de < F; de++) {
                      var pe = u ? I(S[de], H[de], he) : S[de];
                      _
                        ? (x.copy(g.normals[0]).multiplyScalar(pe.x),
                          y.copy(g.binormals[0]).multiplyScalar(pe.y),
                          b.copy(v[0]).add(x).add(y),
                          Le(b.x, b.y, b.z))
                        : Le(pe.x, pe.y, 0);
                    }
                    for (var fe = 1; fe <= s; fe++)
                      for (var me = 0; me < F; me++) {
                        var ve = u ? I(S[me], H[me], he) : S[me];
                        _
                          ? (x.copy(g.normals[fe]).multiplyScalar(ve.x),
                            y.copy(g.binormals[fe]).multiplyScalar(ve.y),
                            b.copy(v[fe]).add(x).add(y),
                            Le(b.x, b.y, b.z))
                          : Le(ve.x, ve.y, (l / s) * fe);
                      }
                    for (var ge = p - 1; ge >= 0; ge--) {
                      for (
                        var ye = ge / p,
                          xe = c * Math.cos((ye * Math.PI) / 2),
                          be = h * Math.sin((ye * Math.PI) / 2) + d,
                          _e = 0,
                          we = k.length;
                        _e < we;
                        _e++
                      ) {
                        var Se = I(k[_e], B[_e], be);
                        Le(Se.x, Se.y, l + xe);
                      }
                      for (var Ee = 0, Me = E.length; Ee < Me; Ee++) {
                        var Ae = E[Ee];
                        j = G[Ee];
                        for (var Te = 0, Ce = Ae.length; Te < Ce; Te++) {
                          var ke = I(Ae[Te], j[Te], be);
                          _
                            ? Le(ke.x, ke.y + v[s - 1].y, v[s - 1].x + xe)
                            : Le(ke.x, ke.y, l + xe);
                        }
                      }
                    }
                    function Pe(e, t) {
                      for (var n = e.length; --n >= 0; ) {
                        var i = n,
                          r = n - 1;
                        r < 0 && (r = e.length - 1);
                        for (var a = 0, o = s + 2 * p; a < o; a++) {
                          var l = F * a,
                            u = F * (a + 1);
                          Ie(t + i + l, t + r + l, t + r + u, t + i + u);
                        }
                      }
                    }
                    function Le(e, n, i) {
                      t.push(e), t.push(n), t.push(i);
                    }
                    function Re(e, t, n) {
                      Fe(e), Fe(t), Fe(n);
                      var i = a.length / 3,
                        o = m.generateTopUV(r, a, i - 3, i - 2, i - 1);
                      Ne(o[0]), Ne(o[1]), Ne(o[2]);
                    }
                    function Ie(e, t, n, i) {
                      Fe(e), Fe(t), Fe(i), Fe(t), Fe(n), Fe(i);
                      var o = a.length / 3,
                        s = m.generateSideWallUV(
                          r,
                          a,
                          o - 6,
                          o - 3,
                          o - 2,
                          o - 1
                        );
                      Ne(s[0]),
                        Ne(s[1]),
                        Ne(s[3]),
                        Ne(s[1]),
                        Ne(s[2]),
                        Ne(s[3]);
                    }
                    function Fe(e) {
                      a.push(t[3 * e + 0]),
                        a.push(t[3 * e + 1]),
                        a.push(t[3 * e + 2]);
                    }
                    function Ne(e) {
                      o.push(e.x), o.push(e.y);
                    }
                    !(function () {
                      var e = a.length / 3;
                      if (u) {
                        for (var t = 0, n = F * t, i = 0; i < N; i++) {
                          var o = C[i];
                          Re(o[2] + n, o[1] + n, o[0] + n);
                        }
                        n = F * (t = s + 2 * p);
                        for (var l = 0; l < N; l++) {
                          var c = C[l];
                          Re(c[0] + n, c[1] + n, c[2] + n);
                        }
                      } else {
                        for (var h = 0; h < N; h++) {
                          var d = C[h];
                          Re(d[2], d[1], d[0]);
                        }
                        for (var f = 0; f < N; f++) {
                          var m = C[f];
                          Re(m[0] + F * s, m[1] + F * s, m[2] + F * s);
                        }
                      }
                      r.addGroup(e, a.length / 3 - e, 0);
                    })(),
                      (function () {
                        var e = a.length / 3,
                          t = 0;
                        Pe(k, t), (t += k.length);
                        for (var n = 0, i = E.length; n < i; n++) {
                          var o = E[n];
                          Pe(o, t), (t += o.length);
                        }
                        r.addGroup(e, a.length / 3 - e, 1);
                      })();
                  }
                  return (
                    i.setAttribute("position", new oa(a, 3)),
                    i.setAttribute("uv", new oa(o, 2)),
                    i.computeVertexNormals(),
                    i
                  );
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "toJSON",
                      value: function () {
                        var e = l(h(t.prototype), "toJSON", this).call(this);
                        return (function (e, t, n) {
                          if (((n.shapes = []), Array.isArray(e)))
                            for (var i = 0, r = e.length; i < r; i++) {
                              var a = e[i];
                              n.shapes.push(a.uuid);
                            }
                          else n.shapes.push(e.uuid);
                          return (
                            void 0 !== t.extrudePath &&
                              (n.options.extrudePath = t.extrudePath.toJSON()),
                            n
                          );
                        })(this.parameters.shapes, this.parameters.options, e);
                      },
                    },
                  ]),
                  t
                );
              })(ya),
              lc = {
                generateTopUV: function (e, t, n, i, r) {
                  var a = t[3 * n],
                    o = t[3 * n + 1],
                    s = t[3 * i],
                    l = t[3 * i + 1],
                    u = t[3 * r],
                    c = t[3 * r + 1];
                  return [new ui(a, o), new ui(s, l), new ui(u, c)];
                },
                generateSideWallUV: function (e, t, n, i, r, a) {
                  var o = t[3 * n],
                    s = t[3 * n + 1],
                    l = t[3 * n + 2],
                    u = t[3 * i],
                    c = t[3 * i + 1],
                    h = t[3 * i + 2],
                    d = t[3 * r],
                    p = t[3 * r + 1],
                    f = t[3 * r + 2],
                    m = t[3 * a],
                    v = t[3 * a + 1],
                    g = t[3 * a + 2];
                  return Math.abs(s - c) < Math.abs(o - u)
                    ? [
                        new ui(o, 1 - l),
                        new ui(u, 1 - h),
                        new ui(d, 1 - f),
                        new ui(m, 1 - g),
                      ]
                    : [
                        new ui(s, 1 - l),
                        new ui(c, 1 - h),
                        new ui(p, 1 - f),
                        new ui(v, 1 - g),
                      ];
                },
              },
              uc = (function (e) {
                function t() {
                  var e,
                    n =
                      arguments.length > 0 && void 0 !== arguments[0]
                        ? arguments[0]
                        : 1,
                    i =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : 0;
                  f(this, t);
                  var r = (1 + Math.sqrt(5)) / 2,
                    a = [
                      -1,
                      r,
                      0,
                      1,
                      r,
                      0,
                      -1,
                      -r,
                      0,
                      1,
                      -r,
                      0,
                      0,
                      -1,
                      r,
                      0,
                      1,
                      r,
                      0,
                      -1,
                      -r,
                      0,
                      1,
                      -r,
                      r,
                      0,
                      -1,
                      r,
                      0,
                      1,
                      -r,
                      0,
                      -1,
                      -r,
                      0,
                      1,
                    ],
                    o = [
                      0, 11, 5, 0, 5, 1, 0, 1, 7, 0, 7, 10, 0, 10, 11, 1, 5, 9,
                      5, 11, 4, 11, 10, 2, 10, 7, 6, 7, 1, 8, 3, 9, 4, 3, 4, 2,
                      3, 2, 6, 3, 6, 8, 3, 8, 9, 4, 9, 5, 2, 4, 11, 6, 2, 10, 8,
                      6, 7, 9, 8, 1,
                    ];
                  return (
                    ((e = c(this, h(t).call(this, a, o, n, i))).type =
                      "IcosahedronGeometry"),
                    (e.parameters = { radius: n, detail: i }),
                    e
                  );
                }
                return p(t, e), t;
              })(Au),
              cc = (function (e) {
                function t(e) {
                  var n,
                    i =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : 12,
                    r =
                      arguments.length > 2 && void 0 !== arguments[2]
                        ? arguments[2]
                        : 0,
                    a =
                      arguments.length > 3 && void 0 !== arguments[3]
                        ? arguments[3]
                        : 2 * Math.PI;
                  f(this, t),
                    ((n = c(this, h(t).call(this))).type = "LatheGeometry"),
                    (n.parameters = {
                      points: e,
                      segments: i,
                      phiStart: r,
                      phiLength: a,
                    }),
                    (i = Math.floor(i)),
                    (a = ni(a, 0, 2 * Math.PI));
                  for (
                    var o = [],
                      s = [],
                      l = [],
                      u = 1 / i,
                      d = new _i(),
                      p = new ui(),
                      m = 0;
                    m <= i;
                    m++
                  )
                    for (
                      var v = r + m * u * a,
                        g = Math.sin(v),
                        y = Math.cos(v),
                        x = 0;
                      x <= e.length - 1;
                      x++
                    )
                      (d.x = e[x].x * g),
                        (d.y = e[x].y),
                        (d.z = e[x].x * y),
                        s.push(d.x, d.y, d.z),
                        (p.x = m / i),
                        (p.y = x / (e.length - 1)),
                        l.push(p.x, p.y);
                  for (var b = 0; b < i; b++)
                    for (var _ = 0; _ < e.length - 1; _++) {
                      var w = _ + b * e.length,
                        S = w,
                        E = w + e.length,
                        M = w + e.length + 1,
                        A = w + 1;
                      o.push(S, E, A), o.push(E, M, A);
                    }
                  if (
                    (n.setIndex(o),
                    n.setAttribute("position", new oa(s, 3)),
                    n.setAttribute("uv", new oa(l, 2)),
                    n.computeVertexNormals(),
                    a === 2 * Math.PI)
                  )
                    for (
                      var T = n.attributes.normal.array,
                        C = new _i(),
                        k = new _i(),
                        P = new _i(),
                        L = i * e.length * 3,
                        R = 0,
                        I = 0;
                      R < e.length;
                      R++, I += 3
                    )
                      (C.x = T[I + 0]),
                        (C.y = T[I + 1]),
                        (C.z = T[I + 2]),
                        (k.x = T[L + I + 0]),
                        (k.y = T[L + I + 1]),
                        (k.z = T[L + I + 2]),
                        P.addVectors(C, k).normalize(),
                        (T[I + 0] = T[L + I + 0] = P.x),
                        (T[I + 1] = T[L + I + 1] = P.y),
                        (T[I + 2] = T[L + I + 2] = P.z);
                  return n;
                }
                return p(t, e), t;
              })(ya),
              hc = (function (e) {
                function t() {
                  var e,
                    n =
                      arguments.length > 0 && void 0 !== arguments[0]
                        ? arguments[0]
                        : 1,
                    i =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : 0;
                  f(this, t);
                  var r = [
                      1, 0, 0, -1, 0, 0, 0, 1, 0, 0, -1, 0, 0, 0, 1, 0, 0, -1,
                    ],
                    a = [
                      0, 2, 4, 0, 4, 3, 0, 3, 5, 0, 5, 2, 1, 2, 5, 1, 5, 3, 1,
                      3, 4, 1, 4, 2,
                    ];
                  return (
                    ((e = c(this, h(t).call(this, r, a, n, i))).type =
                      "OctahedronGeometry"),
                    (e.parameters = { radius: n, detail: i }),
                    e
                  );
                }
                return p(t, e), t;
              })(Au),
              dc = (function (e) {
                function t(e, n, i) {
                  var r;
                  f(this, t),
                    ((r = c(this, h(t).call(this))).type =
                      "ParametricGeometry"),
                    (r.parameters = { func: e, slices: n, stacks: i });
                  var a = [],
                    o = [],
                    s = [],
                    l = [],
                    u = 1e-5,
                    d = new _i(),
                    p = new _i(),
                    m = new _i(),
                    v = new _i(),
                    g = new _i();
                  e.length < 3 &&
                    console.error(
                      "THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter."
                    );
                  for (var y = n + 1, x = 0; x <= i; x++)
                    for (var b = x / i, _ = 0; _ <= n; _++) {
                      var w = _ / n;
                      e(w, b, p),
                        o.push(p.x, p.y, p.z),
                        w - u >= 0
                          ? (e(w - u, b, m), v.subVectors(p, m))
                          : (e(w + u, b, m), v.subVectors(m, p)),
                        b - u >= 0
                          ? (e(w, b - u, m), g.subVectors(p, m))
                          : (e(w, b + u, m), g.subVectors(m, p)),
                        d.crossVectors(v, g).normalize(),
                        s.push(d.x, d.y, d.z),
                        l.push(w, b);
                    }
                  for (var S = 0; S < i; S++)
                    for (var E = 0; E < n; E++) {
                      var M = S * y + E,
                        A = S * y + E + 1,
                        T = (S + 1) * y + E + 1,
                        C = (S + 1) * y + E;
                      a.push(M, A, C), a.push(A, T, C);
                    }
                  return (
                    r.setIndex(a),
                    r.setAttribute("position", new oa(o, 3)),
                    r.setAttribute("normal", new oa(s, 3)),
                    r.setAttribute("uv", new oa(l, 2)),
                    r
                  );
                }
                return p(t, e), t;
              })(ya),
              pc = (function (e) {
                function t() {
                  var e,
                    n =
                      arguments.length > 0 && void 0 !== arguments[0]
                        ? arguments[0]
                        : 0.5,
                    i =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : 1,
                    r =
                      arguments.length > 2 && void 0 !== arguments[2]
                        ? arguments[2]
                        : 8,
                    a =
                      arguments.length > 3 && void 0 !== arguments[3]
                        ? arguments[3]
                        : 1,
                    o =
                      arguments.length > 4 && void 0 !== arguments[4]
                        ? arguments[4]
                        : 0,
                    s =
                      arguments.length > 5 && void 0 !== arguments[5]
                        ? arguments[5]
                        : 2 * Math.PI;
                  f(this, t),
                    ((e = c(this, h(t).call(this))).type = "RingGeometry"),
                    (e.parameters = {
                      innerRadius: n,
                      outerRadius: i,
                      thetaSegments: r,
                      phiSegments: a,
                      thetaStart: o,
                      thetaLength: s,
                    }),
                    (r = Math.max(3, r));
                  for (
                    var l = [],
                      u = [],
                      d = [],
                      p = [],
                      m = n,
                      v = (i - n) / (a = Math.max(1, a)),
                      g = new _i(),
                      y = new ui(),
                      x = 0;
                    x <= a;
                    x++
                  ) {
                    for (var b = 0; b <= r; b++) {
                      var _ = o + (b / r) * s;
                      (g.x = m * Math.cos(_)),
                        (g.y = m * Math.sin(_)),
                        u.push(g.x, g.y, g.z),
                        d.push(0, 0, 1),
                        (y.x = (g.x / i + 1) / 2),
                        (y.y = (g.y / i + 1) / 2),
                        p.push(y.x, y.y);
                    }
                    m += v;
                  }
                  for (var w = 0; w < a; w++)
                    for (var S = w * (r + 1), E = 0; E < r; E++) {
                      var M = E + S,
                        A = M,
                        T = M + r + 1,
                        C = M + r + 2,
                        k = M + 1;
                      l.push(A, T, k), l.push(T, C, k);
                    }
                  return (
                    e.setIndex(l),
                    e.setAttribute("position", new oa(u, 3)),
                    e.setAttribute("normal", new oa(d, 3)),
                    e.setAttribute("uv", new oa(p, 2)),
                    e
                  );
                }
                return p(t, e), t;
              })(ya),
              fc = (function (e) {
                function t(e) {
                  var n,
                    i =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : 12;
                  f(this, t),
                    ((n = c(this, h(t).call(this))).type = "ShapeGeometry"),
                    (n.parameters = { shapes: e, curveSegments: i });
                  var r = [],
                    a = [],
                    o = [],
                    s = [],
                    l = 0,
                    u = 0;
                  if (!1 === Array.isArray(e)) p(e);
                  else
                    for (var d = 0; d < e.length; d++)
                      p(e[d]), n.addGroup(l, u, d), (l += u), (u = 0);
                  function p(e) {
                    var t = a.length / 3,
                      n = e.extractPoints(i),
                      l = n.shape,
                      c = n.holes;
                    !1 === rc.isClockWise(l) && (l = l.reverse());
                    for (var h = 0, d = c.length; h < d; h++) {
                      var p = c[h];
                      !0 === rc.isClockWise(p) && (c[h] = p.reverse());
                    }
                    for (
                      var f = rc.triangulateShape(l, c), m = 0, v = c.length;
                      m < v;
                      m++
                    ) {
                      var g = c[m];
                      l = l.concat(g);
                    }
                    for (var y = 0, x = l.length; y < x; y++) {
                      var b = l[y];
                      a.push(b.x, b.y, 0), o.push(0, 0, 1), s.push(b.x, b.y);
                    }
                    for (var _ = 0, w = f.length; _ < w; _++) {
                      var S = f[_],
                        E = S[0] + t,
                        M = S[1] + t,
                        A = S[2] + t;
                      r.push(E, M, A), (u += 3);
                    }
                  }
                  return (
                    n.setIndex(r),
                    n.setAttribute("position", new oa(a, 3)),
                    n.setAttribute("normal", new oa(o, 3)),
                    n.setAttribute("uv", new oa(s, 2)),
                    n
                  );
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "toJSON",
                      value: function () {
                        var e = l(h(t.prototype), "toJSON", this).call(this);
                        return (function (e, t) {
                          if (((t.shapes = []), Array.isArray(e)))
                            for (var n = 0, i = e.length; n < i; n++) {
                              var r = e[n];
                              t.shapes.push(r.uuid);
                            }
                          else t.shapes.push(e.uuid);
                          return t;
                        })(this.parameters.shapes, e);
                      },
                    },
                  ]),
                  t
                );
              })(ya),
              mc = (function (e) {
                function t() {
                  var e,
                    n =
                      arguments.length > 0 && void 0 !== arguments[0]
                        ? arguments[0]
                        : 1,
                    i =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : 8,
                    r =
                      arguments.length > 2 && void 0 !== arguments[2]
                        ? arguments[2]
                        : 6,
                    a =
                      arguments.length > 3 && void 0 !== arguments[3]
                        ? arguments[3]
                        : 0,
                    o =
                      arguments.length > 4 && void 0 !== arguments[4]
                        ? arguments[4]
                        : 2 * Math.PI,
                    s =
                      arguments.length > 5 && void 0 !== arguments[5]
                        ? arguments[5]
                        : 0,
                    l =
                      arguments.length > 6 && void 0 !== arguments[6]
                        ? arguments[6]
                        : Math.PI;
                  f(this, t),
                    ((e = c(this, h(t).call(this))).type = "SphereGeometry"),
                    (e.parameters = {
                      radius: n,
                      widthSegments: i,
                      heightSegments: r,
                      phiStart: a,
                      phiLength: o,
                      thetaStart: s,
                      thetaLength: l,
                    }),
                    (i = Math.max(3, Math.floor(i))),
                    (r = Math.max(2, Math.floor(r)));
                  for (
                    var u = Math.min(s + l, Math.PI),
                      d = 0,
                      p = [],
                      m = new _i(),
                      v = new _i(),
                      g = [],
                      y = [],
                      x = [],
                      b = [],
                      _ = 0;
                    _ <= r;
                    _++
                  ) {
                    var w = [],
                      S = _ / r,
                      E = 0;
                    0 == _ && 0 == s
                      ? (E = 0.5 / i)
                      : _ == r && u == Math.PI && (E = -0.5 / i);
                    for (var M = 0; M <= i; M++) {
                      var A = M / i;
                      (m.x = -n * Math.cos(a + A * o) * Math.sin(s + S * l)),
                        (m.y = n * Math.cos(s + S * l)),
                        (m.z = n * Math.sin(a + A * o) * Math.sin(s + S * l)),
                        y.push(m.x, m.y, m.z),
                        v.copy(m).normalize(),
                        x.push(v.x, v.y, v.z),
                        b.push(A + E, 1 - S),
                        w.push(d++);
                    }
                    p.push(w);
                  }
                  for (var T = 0; T < r; T++)
                    for (var C = 0; C < i; C++) {
                      var k = p[T][C + 1],
                        P = p[T][C],
                        L = p[T + 1][C],
                        R = p[T + 1][C + 1];
                      (0 !== T || s > 0) && g.push(k, P, R),
                        (T !== r - 1 || u < Math.PI) && g.push(P, L, R);
                    }
                  return (
                    e.setIndex(g),
                    e.setAttribute("position", new oa(y, 3)),
                    e.setAttribute("normal", new oa(x, 3)),
                    e.setAttribute("uv", new oa(b, 2)),
                    e
                  );
                }
                return p(t, e), t;
              })(ya),
              vc = (function (e) {
                function t() {
                  var e,
                    n =
                      arguments.length > 0 && void 0 !== arguments[0]
                        ? arguments[0]
                        : 1,
                    i =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : 0;
                  f(this, t);
                  var r = [1, 1, 1, -1, -1, 1, -1, 1, -1, 1, -1, -1],
                    a = [2, 1, 0, 0, 3, 2, 1, 3, 0, 2, 3, 1];
                  return (
                    ((e = c(this, h(t).call(this, r, a, n, i))).type =
                      "TetrahedronGeometry"),
                    (e.parameters = { radius: n, detail: i }),
                    e
                  );
                }
                return p(t, e), t;
              })(Au),
              gc = (function (e) {
                function t(e) {
                  var n,
                    i =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : {};
                  f(this, t);
                  var r = i.font;
                  if (!r || !r.isFont)
                    return (
                      console.error(
                        "THREE.TextGeometry: font parameter is not an instance of THREE.Font."
                      ),
                      c(n, new ya())
                    );
                  var a = r.generateShapes(e, i.size);
                  return (
                    (i.depth = void 0 !== i.height ? i.height : 50),
                    void 0 === i.bevelThickness && (i.bevelThickness = 10),
                    void 0 === i.bevelSize && (i.bevelSize = 8),
                    void 0 === i.bevelEnabled && (i.bevelEnabled = !1),
                    ((n = c(this, h(t).call(this, a, i))).type =
                      "TextGeometry"),
                    n
                  );
                }
                return p(t, e), t;
              })(sc),
              yc = (function (e) {
                function t() {
                  var e,
                    n =
                      arguments.length > 0 && void 0 !== arguments[0]
                        ? arguments[0]
                        : 1,
                    i =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : 0.4,
                    r =
                      arguments.length > 2 && void 0 !== arguments[2]
                        ? arguments[2]
                        : 8,
                    a =
                      arguments.length > 3 && void 0 !== arguments[3]
                        ? arguments[3]
                        : 6,
                    o =
                      arguments.length > 4 && void 0 !== arguments[4]
                        ? arguments[4]
                        : 2 * Math.PI;
                  f(this, t),
                    ((e = c(this, h(t).call(this))).type = "TorusGeometry"),
                    (e.parameters = {
                      radius: n,
                      tube: i,
                      radialSegments: r,
                      tubularSegments: a,
                      arc: o,
                    }),
                    (r = Math.floor(r)),
                    (a = Math.floor(a));
                  for (
                    var s = [],
                      l = [],
                      u = [],
                      d = [],
                      p = new _i(),
                      m = new _i(),
                      v = new _i(),
                      g = 0;
                    g <= r;
                    g++
                  )
                    for (var y = 0; y <= a; y++) {
                      var x = (y / a) * o,
                        b = (g / r) * Math.PI * 2;
                      (m.x = (n + i * Math.cos(b)) * Math.cos(x)),
                        (m.y = (n + i * Math.cos(b)) * Math.sin(x)),
                        (m.z = i * Math.sin(b)),
                        l.push(m.x, m.y, m.z),
                        (p.x = n * Math.cos(x)),
                        (p.y = n * Math.sin(x)),
                        v.subVectors(m, p).normalize(),
                        u.push(v.x, v.y, v.z),
                        d.push(y / a),
                        d.push(g / r);
                    }
                  for (var _ = 1; _ <= r; _++)
                    for (var w = 1; w <= a; w++) {
                      var S = (a + 1) * _ + w - 1,
                        E = (a + 1) * (_ - 1) + w - 1,
                        M = (a + 1) * (_ - 1) + w,
                        A = (a + 1) * _ + w;
                      s.push(S, E, A), s.push(E, M, A);
                    }
                  return (
                    e.setIndex(s),
                    e.setAttribute("position", new oa(l, 3)),
                    e.setAttribute("normal", new oa(u, 3)),
                    e.setAttribute("uv", new oa(d, 2)),
                    e
                  );
                }
                return p(t, e), t;
              })(ya),
              xc = (function (e) {
                function t() {
                  var e,
                    n =
                      arguments.length > 0 && void 0 !== arguments[0]
                        ? arguments[0]
                        : 1,
                    i =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : 0.4,
                    r =
                      arguments.length > 2 && void 0 !== arguments[2]
                        ? arguments[2]
                        : 64,
                    a =
                      arguments.length > 3 && void 0 !== arguments[3]
                        ? arguments[3]
                        : 8,
                    o =
                      arguments.length > 4 && void 0 !== arguments[4]
                        ? arguments[4]
                        : 2,
                    s =
                      arguments.length > 5 && void 0 !== arguments[5]
                        ? arguments[5]
                        : 3;
                  f(this, t),
                    ((e = c(this, h(t).call(this))).type = "TorusKnotGeometry"),
                    (e.parameters = {
                      radius: n,
                      tube: i,
                      tubularSegments: r,
                      radialSegments: a,
                      p: o,
                      q: s,
                    }),
                    (r = Math.floor(r)),
                    (a = Math.floor(a));
                  for (
                    var l = [],
                      u = [],
                      d = [],
                      p = [],
                      m = new _i(),
                      v = new _i(),
                      g = new _i(),
                      y = new _i(),
                      x = new _i(),
                      b = new _i(),
                      _ = new _i(),
                      w = 0;
                    w <= r;
                    ++w
                  ) {
                    var S = (w / r) * o * Math.PI * 2;
                    F(S, o, s, n, g),
                      F(S + 0.01, o, s, n, y),
                      b.subVectors(y, g),
                      _.addVectors(y, g),
                      x.crossVectors(b, _),
                      _.crossVectors(x, b),
                      x.normalize(),
                      _.normalize();
                    for (var E = 0; E <= a; ++E) {
                      var M = (E / a) * Math.PI * 2,
                        A = -i * Math.cos(M),
                        T = i * Math.sin(M);
                      (m.x = g.x + (A * _.x + T * x.x)),
                        (m.y = g.y + (A * _.y + T * x.y)),
                        (m.z = g.z + (A * _.z + T * x.z)),
                        u.push(m.x, m.y, m.z),
                        v.subVectors(m, g).normalize(),
                        d.push(v.x, v.y, v.z),
                        p.push(w / r),
                        p.push(E / a);
                    }
                  }
                  for (var C = 1; C <= r; C++)
                    for (var k = 1; k <= a; k++) {
                      var P = (a + 1) * (C - 1) + (k - 1),
                        L = (a + 1) * C + (k - 1),
                        R = (a + 1) * C + k,
                        I = (a + 1) * (C - 1) + k;
                      l.push(P, L, I), l.push(L, R, I);
                    }
                  function F(e, t, n, i, r) {
                    var a = Math.cos(e),
                      o = Math.sin(e),
                      s = (n / t) * e,
                      l = Math.cos(s);
                    (r.x = i * (2 + l) * 0.5 * a),
                      (r.y = i * (2 + l) * o * 0.5),
                      (r.z = i * Math.sin(s) * 0.5);
                  }
                  return (
                    e.setIndex(l),
                    e.setAttribute("position", new oa(u, 3)),
                    e.setAttribute("normal", new oa(d, 3)),
                    e.setAttribute("uv", new oa(p, 2)),
                    e
                  );
                }
                return p(t, e), t;
              })(ya),
              bc = (function (e) {
                function t(e) {
                  var n,
                    i =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : 64,
                    r =
                      arguments.length > 2 && void 0 !== arguments[2]
                        ? arguments[2]
                        : 1,
                    a =
                      arguments.length > 3 && void 0 !== arguments[3]
                        ? arguments[3]
                        : 8,
                    o =
                      arguments.length > 4 &&
                      void 0 !== arguments[4] &&
                      arguments[4];
                  f(this, t),
                    ((n = c(this, h(t).call(this))).type = "TubeGeometry"),
                    (n.parameters = {
                      path: e,
                      tubularSegments: i,
                      radius: r,
                      radialSegments: a,
                      closed: o,
                    });
                  var s = e.computeFrenetFrames(i, o);
                  (n.tangents = s.tangents),
                    (n.normals = s.normals),
                    (n.binormals = s.binormals);
                  var l = new _i(),
                    u = new _i(),
                    d = new ui(),
                    p = new _i(),
                    m = [],
                    v = [],
                    g = [],
                    y = [];
                  function x() {
                    for (var e = 0; e < i; e++) b(e);
                    b(!1 === o ? i : 0), w(), _();
                  }
                  function b(t) {
                    p = e.getPointAt(t / i, p);
                    for (
                      var n = s.normals[t], o = s.binormals[t], c = 0;
                      c <= a;
                      c++
                    ) {
                      var h = (c / a) * Math.PI * 2,
                        d = Math.sin(h),
                        f = -Math.cos(h);
                      (u.x = f * n.x + d * o.x),
                        (u.y = f * n.y + d * o.y),
                        (u.z = f * n.z + d * o.z),
                        u.normalize(),
                        v.push(u.x, u.y, u.z),
                        (l.x = p.x + r * u.x),
                        (l.y = p.y + r * u.y),
                        (l.z = p.z + r * u.z),
                        m.push(l.x, l.y, l.z);
                    }
                  }
                  function _() {
                    for (var e = 1; e <= i; e++)
                      for (var t = 1; t <= a; t++) {
                        var n = (a + 1) * (e - 1) + (t - 1),
                          r = (a + 1) * e + (t - 1),
                          o = (a + 1) * e + t,
                          s = (a + 1) * (e - 1) + t;
                        y.push(n, r, s), y.push(r, o, s);
                      }
                  }
                  function w() {
                    for (var e = 0; e <= i; e++)
                      for (var t = 0; t <= a; t++)
                        (d.x = e / i), (d.y = t / a), g.push(d.x, d.y);
                  }
                  return (
                    x(),
                    n.setIndex(y),
                    n.setAttribute("position", new oa(m, 3)),
                    n.setAttribute("normal", new oa(v, 3)),
                    n.setAttribute("uv", new oa(g, 2)),
                    n
                  );
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "toJSON",
                      value: function () {
                        var e = l(h(t.prototype), "toJSON", this).call(this);
                        return (e.path = this.parameters.path.toJSON()), e;
                      },
                    },
                  ]),
                  t
                );
              })(ya),
              _c = (function (e) {
                function t(e) {
                  var n;
                  if (
                    (f(this, t),
                    ((n = c(this, h(t).call(this))).type = "WireframeGeometry"),
                    !0 === e.isGeometry)
                  )
                    return (
                      console.error(
                        "THREE.WireframeGeometry no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."
                      ),
                      c(n)
                    );
                  var i = [],
                    r = [0, 0],
                    a = {},
                    o = new _i();
                  if (null !== e.index) {
                    var s = e.attributes.position,
                      l = e.index,
                      u = e.groups;
                    0 === u.length &&
                      (u = [{ start: 0, count: l.count, materialIndex: 0 }]);
                    for (var d = 0, p = u.length; d < p; ++d)
                      for (
                        var m = u[d], v = m.start, g = v, y = v + m.count;
                        g < y;
                        g += 3
                      )
                        for (var x = 0; x < 3; x++) {
                          var b = l.getX(g + x),
                            _ = l.getX(g + ((x + 1) % 3));
                          (r[0] = Math.min(b, _)), (r[1] = Math.max(b, _));
                          var w = r[0] + "," + r[1];
                          void 0 === a[w] &&
                            (a[w] = { index1: r[0], index2: r[1] });
                        }
                    for (var S in a) {
                      var E = a[S];
                      o.fromBufferAttribute(s, E.index1),
                        i.push(o.x, o.y, o.z),
                        o.fromBufferAttribute(s, E.index2),
                        i.push(o.x, o.y, o.z);
                    }
                  } else
                    for (
                      var M = e.attributes.position, A = 0, T = M.count / 3;
                      A < T;
                      A++
                    )
                      for (var C = 0; C < 3; C++) {
                        var k = 3 * A + C;
                        o.fromBufferAttribute(M, k), i.push(o.x, o.y, o.z);
                        var P = 3 * A + ((C + 1) % 3);
                        o.fromBufferAttribute(M, P), i.push(o.x, o.y, o.z);
                      }
                  return n.setAttribute("position", new oa(i, 3)), n;
                }
                return p(t, e), t;
              })(ya),
              wc = Object.freeze({
                __proto__: null,
                BoxGeometry: Da,
                BoxBufferGeometry: Da,
                CircleGeometry: Su,
                CircleBufferGeometry: Su,
                ConeGeometry: Mu,
                ConeBufferGeometry: Mu,
                CylinderGeometry: Eu,
                CylinderBufferGeometry: Eu,
                DodecahedronGeometry: Tu,
                DodecahedronBufferGeometry: Tu,
                EdgesGeometry: Ru,
                ExtrudeGeometry: sc,
                ExtrudeBufferGeometry: sc,
                IcosahedronGeometry: uc,
                IcosahedronBufferGeometry: uc,
                LatheGeometry: cc,
                LatheBufferGeometry: cc,
                OctahedronGeometry: hc,
                OctahedronBufferGeometry: hc,
                ParametricGeometry: dc,
                ParametricBufferGeometry: dc,
                PlaneGeometry: $a,
                PlaneBufferGeometry: $a,
                PolyhedronGeometry: Au,
                PolyhedronBufferGeometry: Au,
                RingGeometry: pc,
                RingBufferGeometry: pc,
                ShapeGeometry: fc,
                ShapeBufferGeometry: fc,
                SphereGeometry: mc,
                SphereBufferGeometry: mc,
                TetrahedronGeometry: vc,
                TetrahedronBufferGeometry: vc,
                TextGeometry: gc,
                TextBufferGeometry: gc,
                TorusGeometry: yc,
                TorusBufferGeometry: yc,
                TorusKnotGeometry: xc,
                TorusKnotBufferGeometry: xc,
                TubeGeometry: bc,
                TubeBufferGeometry: bc,
                WireframeGeometry: _c,
              }),
              Sc = (function (e) {
                function t(e) {
                  var n;
                  return (
                    f(this, t),
                    ((n = c(this, h(t).call(this))).type = "ShadowMaterial"),
                    (n.color = new qr(0)),
                    (n.transparent = !0),
                    n.setValues(e),
                    n
                  );
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "copy",
                      value: function (e) {
                        return (
                          l(h(t.prototype), "copy", this).call(this, e),
                          this.color.copy(e.color),
                          this
                        );
                      },
                    },
                  ]),
                  t
                );
              })(Ur);
            Sc.prototype.isShadowMaterial = !0;
            var Ec = (function (e) {
              function t(e) {
                var n;
                return (
                  f(this, t),
                  ((n = c(this, h(t).call(this, e))).type =
                    "RawShaderMaterial"),
                  n
                );
              }
              return p(t, e), t;
            })(ja);
            Ec.prototype.isRawShaderMaterial = !0;
            var Mc = (function (e) {
              function t(e) {
                var n;
                return (
                  f(this, t),
                  ((n = c(this, h(t).call(this))).defines = { STANDARD: "" }),
                  (n.type = "MeshStandardMaterial"),
                  (n.color = new qr(16777215)),
                  (n.roughness = 1),
                  (n.metalness = 0),
                  (n.map = null),
                  (n.lightMap = null),
                  (n.lightMapIntensity = 1),
                  (n.aoMap = null),
                  (n.aoMapIntensity = 1),
                  (n.emissive = new qr(0)),
                  (n.emissiveIntensity = 1),
                  (n.emissiveMap = null),
                  (n.bumpMap = null),
                  (n.bumpScale = 1),
                  (n.normalMap = null),
                  (n.normalMapType = bn),
                  (n.normalScale = new ui(1, 1)),
                  (n.displacementMap = null),
                  (n.displacementScale = 1),
                  (n.displacementBias = 0),
                  (n.roughnessMap = null),
                  (n.metalnessMap = null),
                  (n.alphaMap = null),
                  (n.envMap = null),
                  (n.envMapIntensity = 1),
                  (n.refractionRatio = 0.98),
                  (n.wireframe = !1),
                  (n.wireframeLinewidth = 1),
                  (n.wireframeLinecap = "round"),
                  (n.wireframeLinejoin = "round"),
                  (n.morphTargets = !1),
                  (n.morphNormals = !1),
                  (n.flatShading = !1),
                  (n.vertexTangents = !1),
                  n.setValues(e),
                  n
                );
              }
              return (
                p(t, e),
                m(t, [
                  {
                    key: "copy",
                    value: function (e) {
                      return (
                        l(h(t.prototype), "copy", this).call(this, e),
                        (this.defines = { STANDARD: "" }),
                        this.color.copy(e.color),
                        (this.roughness = e.roughness),
                        (this.metalness = e.metalness),
                        (this.map = e.map),
                        (this.lightMap = e.lightMap),
                        (this.lightMapIntensity = e.lightMapIntensity),
                        (this.aoMap = e.aoMap),
                        (this.aoMapIntensity = e.aoMapIntensity),
                        this.emissive.copy(e.emissive),
                        (this.emissiveMap = e.emissiveMap),
                        (this.emissiveIntensity = e.emissiveIntensity),
                        (this.bumpMap = e.bumpMap),
                        (this.bumpScale = e.bumpScale),
                        (this.normalMap = e.normalMap),
                        (this.normalMapType = e.normalMapType),
                        this.normalScale.copy(e.normalScale),
                        (this.displacementMap = e.displacementMap),
                        (this.displacementScale = e.displacementScale),
                        (this.displacementBias = e.displacementBias),
                        (this.roughnessMap = e.roughnessMap),
                        (this.metalnessMap = e.metalnessMap),
                        (this.alphaMap = e.alphaMap),
                        (this.envMap = e.envMap),
                        (this.envMapIntensity = e.envMapIntensity),
                        (this.refractionRatio = e.refractionRatio),
                        (this.wireframe = e.wireframe),
                        (this.wireframeLinewidth = e.wireframeLinewidth),
                        (this.wireframeLinecap = e.wireframeLinecap),
                        (this.wireframeLinejoin = e.wireframeLinejoin),
                        (this.morphTargets = e.morphTargets),
                        (this.morphNormals = e.morphNormals),
                        (this.flatShading = e.flatShading),
                        (this.vertexTangents = e.vertexTangents),
                        this
                      );
                    },
                  },
                ]),
                t
              );
            })(Ur);
            Mc.prototype.isMeshStandardMaterial = !0;
            var Ac = (function (e) {
              function t(e) {
                var n;
                return (
                  f(this, t),
                  ((n = c(this, h(t).call(this))).defines = {
                    STANDARD: "",
                    PHYSICAL: "",
                  }),
                  (n.type = "MeshPhysicalMaterial"),
                  (n.clearcoat = 0),
                  (n.clearcoatMap = null),
                  (n.clearcoatRoughness = 0),
                  (n.clearcoatRoughnessMap = null),
                  (n.clearcoatNormalScale = new ui(1, 1)),
                  (n.clearcoatNormalMap = null),
                  (n.reflectivity = 0.5),
                  Object.defineProperty(d(n), "ior", {
                    get: function () {
                      return (
                        (1 + 0.4 * this.reflectivity) /
                        (1 - 0.4 * this.reflectivity)
                      );
                    },
                    set: function (e) {
                      this.reflectivity = ni((2.5 * (e - 1)) / (e + 1), 0, 1);
                    },
                  }),
                  (n.sheen = null),
                  (n.transmission = 0),
                  (n.transmissionMap = null),
                  (n.thickness = 0.01),
                  (n.thicknessMap = null),
                  (n.attenuationDistance = 0),
                  (n.attenuationColor = new qr(1, 1, 1)),
                  n.setValues(e),
                  n
                );
              }
              return (
                p(t, e),
                m(t, [
                  {
                    key: "copy",
                    value: function (e) {
                      return (
                        l(h(t.prototype), "copy", this).call(this, e),
                        (this.defines = { STANDARD: "", PHYSICAL: "" }),
                        (this.clearcoat = e.clearcoat),
                        (this.clearcoatMap = e.clearcoatMap),
                        (this.clearcoatRoughness = e.clearcoatRoughness),
                        (this.clearcoatRoughnessMap = e.clearcoatRoughnessMap),
                        (this.clearcoatNormalMap = e.clearcoatNormalMap),
                        this.clearcoatNormalScale.copy(e.clearcoatNormalScale),
                        (this.reflectivity = e.reflectivity),
                        e.sheen
                          ? (this.sheen = (this.sheen || new qr()).copy(
                              e.sheen
                            ))
                          : (this.sheen = null),
                        (this.transmission = e.transmission),
                        (this.transmissionMap = e.transmissionMap),
                        (this.thickness = e.thickness),
                        (this.thicknessMap = e.thicknessMap),
                        (this.attenuationDistance = e.attenuationDistance),
                        this.attenuationColor.copy(e.attenuationColor),
                        this
                      );
                    },
                  },
                ]),
                t
              );
            })(Mc);
            Ac.prototype.isMeshPhysicalMaterial = !0;
            var Tc = (function (e) {
              function t(e) {
                var n;
                return (
                  f(this, t),
                  ((n = c(this, h(t).call(this))).type = "MeshPhongMaterial"),
                  (n.color = new qr(16777215)),
                  (n.specular = new qr(1118481)),
                  (n.shininess = 30),
                  (n.map = null),
                  (n.lightMap = null),
                  (n.lightMapIntensity = 1),
                  (n.aoMap = null),
                  (n.aoMapIntensity = 1),
                  (n.emissive = new qr(0)),
                  (n.emissiveIntensity = 1),
                  (n.emissiveMap = null),
                  (n.bumpMap = null),
                  (n.bumpScale = 1),
                  (n.normalMap = null),
                  (n.normalMapType = bn),
                  (n.normalScale = new ui(1, 1)),
                  (n.displacementMap = null),
                  (n.displacementScale = 1),
                  (n.displacementBias = 0),
                  (n.specularMap = null),
                  (n.alphaMap = null),
                  (n.envMap = null),
                  (n.combine = le),
                  (n.reflectivity = 1),
                  (n.refractionRatio = 0.98),
                  (n.wireframe = !1),
                  (n.wireframeLinewidth = 1),
                  (n.wireframeLinecap = "round"),
                  (n.wireframeLinejoin = "round"),
                  (n.morphTargets = !1),
                  (n.morphNormals = !1),
                  (n.flatShading = !1),
                  n.setValues(e),
                  n
                );
              }
              return (
                p(t, e),
                m(t, [
                  {
                    key: "copy",
                    value: function (e) {
                      return (
                        l(h(t.prototype), "copy", this).call(this, e),
                        this.color.copy(e.color),
                        this.specular.copy(e.specular),
                        (this.shininess = e.shininess),
                        (this.map = e.map),
                        (this.lightMap = e.lightMap),
                        (this.lightMapIntensity = e.lightMapIntensity),
                        (this.aoMap = e.aoMap),
                        (this.aoMapIntensity = e.aoMapIntensity),
                        this.emissive.copy(e.emissive),
                        (this.emissiveMap = e.emissiveMap),
                        (this.emissiveIntensity = e.emissiveIntensity),
                        (this.bumpMap = e.bumpMap),
                        (this.bumpScale = e.bumpScale),
                        (this.normalMap = e.normalMap),
                        (this.normalMapType = e.normalMapType),
                        this.normalScale.copy(e.normalScale),
                        (this.displacementMap = e.displacementMap),
                        (this.displacementScale = e.displacementScale),
                        (this.displacementBias = e.displacementBias),
                        (this.specularMap = e.specularMap),
                        (this.alphaMap = e.alphaMap),
                        (this.envMap = e.envMap),
                        (this.combine = e.combine),
                        (this.reflectivity = e.reflectivity),
                        (this.refractionRatio = e.refractionRatio),
                        (this.wireframe = e.wireframe),
                        (this.wireframeLinewidth = e.wireframeLinewidth),
                        (this.wireframeLinecap = e.wireframeLinecap),
                        (this.wireframeLinejoin = e.wireframeLinejoin),
                        (this.morphTargets = e.morphTargets),
                        (this.morphNormals = e.morphNormals),
                        (this.flatShading = e.flatShading),
                        this
                      );
                    },
                  },
                ]),
                t
              );
            })(Ur);
            Tc.prototype.isMeshPhongMaterial = !0;
            var Cc = (function (e) {
              function t(e) {
                var n;
                return (
                  f(this, t),
                  ((n = c(this, h(t).call(this))).defines = { TOON: "" }),
                  (n.type = "MeshToonMaterial"),
                  (n.color = new qr(16777215)),
                  (n.map = null),
                  (n.gradientMap = null),
                  (n.lightMap = null),
                  (n.lightMapIntensity = 1),
                  (n.aoMap = null),
                  (n.aoMapIntensity = 1),
                  (n.emissive = new qr(0)),
                  (n.emissiveIntensity = 1),
                  (n.emissiveMap = null),
                  (n.bumpMap = null),
                  (n.bumpScale = 1),
                  (n.normalMap = null),
                  (n.normalMapType = bn),
                  (n.normalScale = new ui(1, 1)),
                  (n.displacementMap = null),
                  (n.displacementScale = 1),
                  (n.displacementBias = 0),
                  (n.alphaMap = null),
                  (n.wireframe = !1),
                  (n.wireframeLinewidth = 1),
                  (n.wireframeLinecap = "round"),
                  (n.wireframeLinejoin = "round"),
                  (n.morphTargets = !1),
                  (n.morphNormals = !1),
                  n.setValues(e),
                  n
                );
              }
              return (
                p(t, e),
                m(t, [
                  {
                    key: "copy",
                    value: function (e) {
                      return (
                        l(h(t.prototype), "copy", this).call(this, e),
                        this.color.copy(e.color),
                        (this.map = e.map),
                        (this.gradientMap = e.gradientMap),
                        (this.lightMap = e.lightMap),
                        (this.lightMapIntensity = e.lightMapIntensity),
                        (this.aoMap = e.aoMap),
                        (this.aoMapIntensity = e.aoMapIntensity),
                        this.emissive.copy(e.emissive),
                        (this.emissiveMap = e.emissiveMap),
                        (this.emissiveIntensity = e.emissiveIntensity),
                        (this.bumpMap = e.bumpMap),
                        (this.bumpScale = e.bumpScale),
                        (this.normalMap = e.normalMap),
                        (this.normalMapType = e.normalMapType),
                        this.normalScale.copy(e.normalScale),
                        (this.displacementMap = e.displacementMap),
                        (this.displacementScale = e.displacementScale),
                        (this.displacementBias = e.displacementBias),
                        (this.alphaMap = e.alphaMap),
                        (this.wireframe = e.wireframe),
                        (this.wireframeLinewidth = e.wireframeLinewidth),
                        (this.wireframeLinecap = e.wireframeLinecap),
                        (this.wireframeLinejoin = e.wireframeLinejoin),
                        (this.morphTargets = e.morphTargets),
                        (this.morphNormals = e.morphNormals),
                        this
                      );
                    },
                  },
                ]),
                t
              );
            })(Ur);
            Cc.prototype.isMeshToonMaterial = !0;
            var kc = (function (e) {
              function t(e) {
                var n;
                return (
                  f(this, t),
                  ((n = c(this, h(t).call(this))).type = "MeshNormalMaterial"),
                  (n.bumpMap = null),
                  (n.bumpScale = 1),
                  (n.normalMap = null),
                  (n.normalMapType = bn),
                  (n.normalScale = new ui(1, 1)),
                  (n.displacementMap = null),
                  (n.displacementScale = 1),
                  (n.displacementBias = 0),
                  (n.wireframe = !1),
                  (n.wireframeLinewidth = 1),
                  (n.fog = !1),
                  (n.morphTargets = !1),
                  (n.morphNormals = !1),
                  (n.flatShading = !1),
                  n.setValues(e),
                  n
                );
              }
              return (
                p(t, e),
                m(t, [
                  {
                    key: "copy",
                    value: function (e) {
                      return (
                        l(h(t.prototype), "copy", this).call(this, e),
                        (this.bumpMap = e.bumpMap),
                        (this.bumpScale = e.bumpScale),
                        (this.normalMap = e.normalMap),
                        (this.normalMapType = e.normalMapType),
                        this.normalScale.copy(e.normalScale),
                        (this.displacementMap = e.displacementMap),
                        (this.displacementScale = e.displacementScale),
                        (this.displacementBias = e.displacementBias),
                        (this.wireframe = e.wireframe),
                        (this.wireframeLinewidth = e.wireframeLinewidth),
                        (this.morphTargets = e.morphTargets),
                        (this.morphNormals = e.morphNormals),
                        (this.flatShading = e.flatShading),
                        this
                      );
                    },
                  },
                ]),
                t
              );
            })(Ur);
            kc.prototype.isMeshNormalMaterial = !0;
            var Pc = (function (e) {
              function t(e) {
                var n;
                return (
                  f(this, t),
                  ((n = c(this, h(t).call(this))).type = "MeshLambertMaterial"),
                  (n.color = new qr(16777215)),
                  (n.map = null),
                  (n.lightMap = null),
                  (n.lightMapIntensity = 1),
                  (n.aoMap = null),
                  (n.aoMapIntensity = 1),
                  (n.emissive = new qr(0)),
                  (n.emissiveIntensity = 1),
                  (n.emissiveMap = null),
                  (n.specularMap = null),
                  (n.alphaMap = null),
                  (n.envMap = null),
                  (n.combine = le),
                  (n.reflectivity = 1),
                  (n.refractionRatio = 0.98),
                  (n.wireframe = !1),
                  (n.wireframeLinewidth = 1),
                  (n.wireframeLinecap = "round"),
                  (n.wireframeLinejoin = "round"),
                  (n.morphTargets = !1),
                  (n.morphNormals = !1),
                  n.setValues(e),
                  n
                );
              }
              return (
                p(t, e),
                m(t, [
                  {
                    key: "copy",
                    value: function (e) {
                      return (
                        l(h(t.prototype), "copy", this).call(this, e),
                        this.color.copy(e.color),
                        (this.map = e.map),
                        (this.lightMap = e.lightMap),
                        (this.lightMapIntensity = e.lightMapIntensity),
                        (this.aoMap = e.aoMap),
                        (this.aoMapIntensity = e.aoMapIntensity),
                        this.emissive.copy(e.emissive),
                        (this.emissiveMap = e.emissiveMap),
                        (this.emissiveIntensity = e.emissiveIntensity),
                        (this.specularMap = e.specularMap),
                        (this.alphaMap = e.alphaMap),
                        (this.envMap = e.envMap),
                        (this.combine = e.combine),
                        (this.reflectivity = e.reflectivity),
                        (this.refractionRatio = e.refractionRatio),
                        (this.wireframe = e.wireframe),
                        (this.wireframeLinewidth = e.wireframeLinewidth),
                        (this.wireframeLinecap = e.wireframeLinecap),
                        (this.wireframeLinejoin = e.wireframeLinejoin),
                        (this.morphTargets = e.morphTargets),
                        (this.morphNormals = e.morphNormals),
                        this
                      );
                    },
                  },
                ]),
                t
              );
            })(Ur);
            Pc.prototype.isMeshLambertMaterial = !0;
            var Lc = (function (e) {
              function t(e) {
                var n;
                return (
                  f(this, t),
                  ((n = c(this, h(t).call(this))).defines = { MATCAP: "" }),
                  (n.type = "MeshMatcapMaterial"),
                  (n.color = new qr(16777215)),
                  (n.matcap = null),
                  (n.map = null),
                  (n.bumpMap = null),
                  (n.bumpScale = 1),
                  (n.normalMap = null),
                  (n.normalMapType = bn),
                  (n.normalScale = new ui(1, 1)),
                  (n.displacementMap = null),
                  (n.displacementScale = 1),
                  (n.displacementBias = 0),
                  (n.alphaMap = null),
                  (n.morphTargets = !1),
                  (n.morphNormals = !1),
                  (n.flatShading = !1),
                  n.setValues(e),
                  n
                );
              }
              return (
                p(t, e),
                m(t, [
                  {
                    key: "copy",
                    value: function (e) {
                      return (
                        l(h(t.prototype), "copy", this).call(this, e),
                        (this.defines = { MATCAP: "" }),
                        this.color.copy(e.color),
                        (this.matcap = e.matcap),
                        (this.map = e.map),
                        (this.bumpMap = e.bumpMap),
                        (this.bumpScale = e.bumpScale),
                        (this.normalMap = e.normalMap),
                        (this.normalMapType = e.normalMapType),
                        this.normalScale.copy(e.normalScale),
                        (this.displacementMap = e.displacementMap),
                        (this.displacementScale = e.displacementScale),
                        (this.displacementBias = e.displacementBias),
                        (this.alphaMap = e.alphaMap),
                        (this.morphTargets = e.morphTargets),
                        (this.morphNormals = e.morphNormals),
                        (this.flatShading = e.flatShading),
                        this
                      );
                    },
                  },
                ]),
                t
              );
            })(Ur);
            Lc.prototype.isMeshMatcapMaterial = !0;
            var Rc = (function (e) {
              function t(e) {
                var n;
                return (
                  f(this, t),
                  ((n = c(this, h(t).call(this))).type = "LineDashedMaterial"),
                  (n.scale = 1),
                  (n.dashSize = 3),
                  (n.gapSize = 1),
                  n.setValues(e),
                  n
                );
              }
              return (
                p(t, e),
                m(t, [
                  {
                    key: "copy",
                    value: function (e) {
                      return (
                        l(h(t.prototype), "copy", this).call(this, e),
                        (this.scale = e.scale),
                        (this.dashSize = e.dashSize),
                        (this.gapSize = e.gapSize),
                        this
                      );
                    },
                  },
                ]),
                t
              );
            })(tu);
            Rc.prototype.isLineDashedMaterial = !0;
            var Ic = Object.freeze({
                __proto__: null,
                ShadowMaterial: Sc,
                SpriteMaterial: _l,
                RawShaderMaterial: Ec,
                ShaderMaterial: ja,
                PointsMaterial: du,
                MeshPhysicalMaterial: Ac,
                MeshStandardMaterial: Mc,
                MeshPhongMaterial: Tc,
                MeshToonMaterial: Cc,
                MeshNormalMaterial: kc,
                MeshLambertMaterial: Pc,
                MeshDepthMaterial: el,
                MeshDistanceMaterial: tl,
                MeshBasicMaterial: Xr,
                MeshMatcapMaterial: Lc,
                LineDashedMaterial: Rc,
                LineBasicMaterial: tu,
                Material: Ur,
              }),
              Fc = {
                arraySlice: function (e, t, n) {
                  return Fc.isTypedArray(e)
                    ? new e.constructor(
                        e.subarray(t, void 0 !== n ? n : e.length)
                      )
                    : e.slice(t, n);
                },
                convertArray: function (e, t, n) {
                  return !e || (!n && e.constructor === t)
                    ? e
                    : "number" === typeof t.BYTES_PER_ELEMENT
                    ? new t(e)
                    : Array.prototype.slice.call(e);
                },
                isTypedArray: function (e) {
                  return ArrayBuffer.isView(e) && !(e instanceof DataView);
                },
                getKeyframeOrder: function (e) {
                  for (var t = e.length, n = new Array(t), i = 0; i !== t; ++i)
                    n[i] = i;
                  return (
                    n.sort(function (t, n) {
                      return e[t] - e[n];
                    }),
                    n
                  );
                },
                sortedArray: function (e, t, n) {
                  for (
                    var i = e.length, r = new e.constructor(i), a = 0, o = 0;
                    o !== i;
                    ++a
                  )
                    for (var s = n[a] * t, l = 0; l !== t; ++l)
                      r[o++] = e[s + l];
                  return r;
                },
                flattenJSON: function (e, t, n, i) {
                  for (var r = 1, a = e[0]; void 0 !== a && void 0 === a[i]; )
                    a = e[r++];
                  if (void 0 !== a) {
                    var o = a[i];
                    if (void 0 !== o)
                      if (Array.isArray(o))
                        do {
                          void 0 !== (o = a[i]) &&
                            (t.push(a.time), n.push.apply(n, o)),
                            (a = e[r++]);
                        } while (void 0 !== a);
                      else if (void 0 !== o.toArray)
                        do {
                          void 0 !== (o = a[i]) &&
                            (t.push(a.time), o.toArray(n, n.length)),
                            (a = e[r++]);
                        } while (void 0 !== a);
                      else
                        do {
                          void 0 !== (o = a[i]) && (t.push(a.time), n.push(o)),
                            (a = e[r++]);
                        } while (void 0 !== a);
                  }
                },
                subclip: function (e, t, n, i) {
                  var r =
                      arguments.length > 4 && void 0 !== arguments[4]
                        ? arguments[4]
                        : 30,
                    a = e.clone();
                  a.name = t;
                  for (var o = [], s = 0; s < a.tracks.length; ++s) {
                    for (
                      var l = a.tracks[s],
                        u = l.getValueSize(),
                        c = [],
                        h = [],
                        d = 0;
                      d < l.times.length;
                      ++d
                    ) {
                      var p = l.times[d] * r;
                      if (!(p < n || p >= i)) {
                        c.push(l.times[d]);
                        for (var f = 0; f < u; ++f) h.push(l.values[d * u + f]);
                      }
                    }
                    0 !== c.length &&
                      ((l.times = Fc.convertArray(c, l.times.constructor)),
                      (l.values = Fc.convertArray(h, l.values.constructor)),
                      o.push(l));
                  }
                  a.tracks = o;
                  for (var m = 1 / 0, v = 0; v < a.tracks.length; ++v)
                    m > a.tracks[v].times[0] && (m = a.tracks[v].times[0]);
                  for (var g = 0; g < a.tracks.length; ++g)
                    a.tracks[g].shift(-1 * m);
                  return a.resetDuration(), a;
                },
                makeClipAdditive: function (e) {
                  var t =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : 0,
                    n =
                      arguments.length > 2 && void 0 !== arguments[2]
                        ? arguments[2]
                        : e,
                    i =
                      arguments.length > 3 && void 0 !== arguments[3]
                        ? arguments[3]
                        : 30;
                  i <= 0 && (i = 30);
                  for (
                    var r = n.tracks.length,
                      a = t / i,
                      o = function (t) {
                        var i = n.tracks[t],
                          r = i.ValueTypeName;
                        if ("bool" === r || "string" === r) return "continue";
                        var o = e.tracks.find(function (e) {
                          return e.name === i.name && e.ValueTypeName === r;
                        });
                        if (void 0 === o) return "continue";
                        var s = 0,
                          l = i.getValueSize();
                        i.createInterpolant
                          .isInterpolantFactoryMethodGLTFCubicSpline &&
                          (s = l / 3);
                        var u = 0,
                          c = o.getValueSize();
                        o.createInterpolant
                          .isInterpolantFactoryMethodGLTFCubicSpline &&
                          (u = c / 3);
                        var h = i.times.length - 1,
                          d = void 0;
                        if (a <= i.times[0]) {
                          var p = s,
                            f = l - s;
                          d = Fc.arraySlice(i.values, p, f);
                        } else if (a >= i.times[h]) {
                          var m = h * l + s,
                            v = m + l - s;
                          d = Fc.arraySlice(i.values, m, v);
                        } else {
                          var g = i.createInterpolant(),
                            y = s,
                            x = l - s;
                          g.evaluate(a),
                            (d = Fc.arraySlice(g.resultBuffer, y, x));
                        }
                        "quaternion" === r &&
                          new bi()
                            .fromArray(d)
                            .normalize()
                            .conjugate()
                            .toArray(d);
                        for (var b = o.times.length, _ = 0; _ < b; ++_) {
                          var w = _ * c + u;
                          if ("quaternion" === r)
                            bi.multiplyQuaternionsFlat(
                              o.values,
                              w,
                              d,
                              0,
                              o.values,
                              w
                            );
                          else
                            for (var S = c - 2 * u, E = 0; E < S; ++E)
                              o.values[w + E] -= d[E];
                        }
                      },
                      s = 0;
                    s < r;
                    ++s
                  )
                    o(s);
                  return (e.blendMode = on), e;
                },
              },
              Nc = (function () {
                function e(t, n, i, r) {
                  f(this, e),
                    (this.parameterPositions = t),
                    (this._cachedIndex = 0),
                    (this.resultBuffer =
                      void 0 !== r ? r : new n.constructor(i)),
                    (this.sampleValues = n),
                    (this.valueSize = i),
                    (this.settings = null),
                    (this.DefaultSettings_ = {});
                }
                return (
                  m(e, [
                    {
                      key: "evaluate",
                      value: function (e) {
                        var t = this.parameterPositions,
                          n = this._cachedIndex,
                          i = t[n],
                          r = t[n - 1];
                        e: {
                          t: {
                            var a;
                            n: {
                              i: if (!(e < i)) {
                                for (var o = n + 2; ; ) {
                                  if (void 0 === i) {
                                    if (e < r) break i;
                                    return (
                                      (n = t.length),
                                      (this._cachedIndex = n),
                                      this.afterEnd_(n - 1, e, r)
                                    );
                                  }
                                  if (n === o) break;
                                  if (((r = i), e < (i = t[++n]))) break t;
                                }
                                a = t.length;
                                break n;
                              }
                              if (e >= r) break e;
                              var s = t[1];
                              e < s && ((n = 2), (r = s));
                              for (var l = n - 2; ; ) {
                                if (void 0 === r)
                                  return (
                                    (this._cachedIndex = 0),
                                    this.beforeStart_(0, e, i)
                                  );
                                if (n === l) break;
                                if (((i = r), e >= (r = t[--n - 1]))) break t;
                              }
                              (a = n), (n = 0);
                            }
                            for (; n < a; ) {
                              var u = (n + a) >>> 1;
                              e < t[u] ? (a = u) : (n = u + 1);
                            }
                            if (((i = t[n]), void 0 === (r = t[n - 1])))
                              return (
                                (this._cachedIndex = 0),
                                this.beforeStart_(0, e, i)
                              );
                            if (void 0 === i)
                              return (
                                (n = t.length),
                                (this._cachedIndex = n),
                                this.afterEnd_(n - 1, r, e)
                              );
                          }
                          (this._cachedIndex = n),
                            this.intervalChanged_(n, r, i);
                        }
                        return this.interpolate_(n, r, e, i);
                      },
                    },
                    {
                      key: "getSettings_",
                      value: function () {
                        return this.settings || this.DefaultSettings_;
                      },
                    },
                    {
                      key: "copySampleValue_",
                      value: function (e) {
                        for (
                          var t = this.resultBuffer,
                            n = this.sampleValues,
                            i = this.valueSize,
                            r = e * i,
                            a = 0;
                          a !== i;
                          ++a
                        )
                          t[a] = n[r + a];
                        return t;
                      },
                    },
                    {
                      key: "interpolate_",
                      value: function () {
                        throw new Error("call to abstract method");
                      },
                    },
                    { key: "intervalChanged_", value: function () {} },
                  ]),
                  e
                );
              })();
            (Nc.prototype.beforeStart_ = Nc.prototype.copySampleValue_),
              (Nc.prototype.afterEnd_ = Nc.prototype.copySampleValue_);
            var Oc = (function (e) {
                function t(e, n, i, r) {
                  var a;
                  return (
                    f(this, t),
                    ((a = c(this, h(t).call(this, e, n, i, r)))._weightPrev =
                      -0),
                    (a._offsetPrev = -0),
                    (a._weightNext = -0),
                    (a._offsetNext = -0),
                    (a.DefaultSettings_ = { endingStart: tn, endingEnd: tn }),
                    a
                  );
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "intervalChanged_",
                      value: function (e, t, n) {
                        var i = this.parameterPositions,
                          r = e - 2,
                          a = e + 1,
                          o = i[r],
                          s = i[a];
                        if (void 0 === o)
                          switch (this.getSettings_().endingStart) {
                            case nn:
                              (r = e), (o = 2 * t - n);
                              break;
                            case rn:
                              o = t + i[(r = i.length - 2)] - i[r + 1];
                              break;
                            default:
                              (r = e), (o = n);
                          }
                        if (void 0 === s)
                          switch (this.getSettings_().endingEnd) {
                            case nn:
                              (a = e), (s = 2 * n - t);
                              break;
                            case rn:
                              (a = 1), (s = n + i[1] - i[0]);
                              break;
                            default:
                              (a = e - 1), (s = t);
                          }
                        var l = 0.5 * (n - t),
                          u = this.valueSize;
                        (this._weightPrev = l / (t - o)),
                          (this._weightNext = l / (s - n)),
                          (this._offsetPrev = r * u),
                          (this._offsetNext = a * u);
                      },
                    },
                    {
                      key: "interpolate_",
                      value: function (e, t, n, i) {
                        for (
                          var r = this.resultBuffer,
                            a = this.sampleValues,
                            o = this.valueSize,
                            s = e * o,
                            l = s - o,
                            u = this._offsetPrev,
                            c = this._offsetNext,
                            h = this._weightPrev,
                            d = this._weightNext,
                            p = (n - t) / (i - t),
                            f = p * p,
                            m = f * p,
                            v = -h * m + 2 * h * f - h * p,
                            g =
                              (1 + h) * m +
                              (-1.5 - 2 * h) * f +
                              (-0.5 + h) * p +
                              1,
                            y = (-1 - d) * m + (1.5 + d) * f + 0.5 * p,
                            x = d * m - d * f,
                            b = 0;
                          b !== o;
                          ++b
                        )
                          r[b] =
                            v * a[u + b] +
                            g * a[l + b] +
                            y * a[s + b] +
                            x * a[c + b];
                        return r;
                      },
                    },
                  ]),
                  t
                );
              })(Nc),
              Bc = (function (e) {
                function t(e, n, i, r) {
                  return f(this, t), c(this, h(t).call(this, e, n, i, r));
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "interpolate_",
                      value: function (e, t, n, i) {
                        for (
                          var r = this.resultBuffer,
                            a = this.sampleValues,
                            o = this.valueSize,
                            s = e * o,
                            l = s - o,
                            u = (n - t) / (i - t),
                            c = 1 - u,
                            h = 0;
                          h !== o;
                          ++h
                        )
                          r[h] = a[l + h] * c + a[s + h] * u;
                        return r;
                      },
                    },
                  ]),
                  t
                );
              })(Nc),
              Dc = (function (e) {
                function t(e, n, i, r) {
                  return f(this, t), c(this, h(t).call(this, e, n, i, r));
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "interpolate_",
                      value: function (e) {
                        return this.copySampleValue_(e - 1);
                      },
                    },
                  ]),
                  t
                );
              })(Nc),
              Vc = (function () {
                function e(t, n, i, r) {
                  if ((f(this, e), void 0 === t))
                    throw new Error(
                      "THREE.KeyframeTrack: track name is undefined"
                    );
                  if (void 0 === n || 0 === n.length)
                    throw new Error(
                      "THREE.KeyframeTrack: no keyframes in track named " + t
                    );
                  (this.name = t),
                    (this.times = Fc.convertArray(n, this.TimeBufferType)),
                    (this.values = Fc.convertArray(i, this.ValueBufferType)),
                    this.setInterpolation(r || this.DefaultInterpolation);
                }
                return (
                  m(
                    e,
                    [
                      {
                        key: "InterpolantFactoryMethodDiscrete",
                        value: function (e) {
                          return new Dc(
                            this.times,
                            this.values,
                            this.getValueSize(),
                            e
                          );
                        },
                      },
                      {
                        key: "InterpolantFactoryMethodLinear",
                        value: function (e) {
                          return new Bc(
                            this.times,
                            this.values,
                            this.getValueSize(),
                            e
                          );
                        },
                      },
                      {
                        key: "InterpolantFactoryMethodSmooth",
                        value: function (e) {
                          return new Oc(
                            this.times,
                            this.values,
                            this.getValueSize(),
                            e
                          );
                        },
                      },
                      {
                        key: "setInterpolation",
                        value: function (e) {
                          var t;
                          switch (e) {
                            case Kt:
                              t = this.InterpolantFactoryMethodDiscrete;
                              break;
                            case $t:
                              t = this.InterpolantFactoryMethodLinear;
                              break;
                            case en:
                              t = this.InterpolantFactoryMethodSmooth;
                          }
                          if (void 0 === t) {
                            var n =
                              "unsupported interpolation for " +
                              this.ValueTypeName +
                              " keyframe track named " +
                              this.name;
                            if (void 0 === this.createInterpolant) {
                              if (e === this.DefaultInterpolation)
                                throw new Error(n);
                              this.setInterpolation(this.DefaultInterpolation);
                            }
                            return (
                              console.warn("THREE.KeyframeTrack:", n), this
                            );
                          }
                          return (this.createInterpolant = t), this;
                        },
                      },
                      {
                        key: "getInterpolation",
                        value: function () {
                          switch (this.createInterpolant) {
                            case this.InterpolantFactoryMethodDiscrete:
                              return Kt;
                            case this.InterpolantFactoryMethodLinear:
                              return $t;
                            case this.InterpolantFactoryMethodSmooth:
                              return en;
                          }
                        },
                      },
                      {
                        key: "getValueSize",
                        value: function () {
                          return this.values.length / this.times.length;
                        },
                      },
                      {
                        key: "shift",
                        value: function (e) {
                          if (0 !== e)
                            for (
                              var t = this.times, n = 0, i = t.length;
                              n !== i;
                              ++n
                            )
                              t[n] += e;
                          return this;
                        },
                      },
                      {
                        key: "scale",
                        value: function (e) {
                          if (1 !== e)
                            for (
                              var t = this.times, n = 0, i = t.length;
                              n !== i;
                              ++n
                            )
                              t[n] *= e;
                          return this;
                        },
                      },
                      {
                        key: "trim",
                        value: function (e, t) {
                          for (
                            var n = this.times, i = n.length, r = 0, a = i - 1;
                            r !== i && n[r] < e;

                          )
                            ++r;
                          for (; -1 !== a && n[a] > t; ) --a;
                          if ((++a, 0 !== r || a !== i)) {
                            r >= a && (r = (a = Math.max(a, 1)) - 1);
                            var o = this.getValueSize();
                            (this.times = Fc.arraySlice(n, r, a)),
                              (this.values = Fc.arraySlice(
                                this.values,
                                r * o,
                                a * o
                              ));
                          }
                          return this;
                        },
                      },
                      {
                        key: "validate",
                        value: function () {
                          var e = !0,
                            t = this.getValueSize();
                          t - Math.floor(t) !== 0 &&
                            (console.error(
                              "THREE.KeyframeTrack: Invalid value size in track.",
                              this
                            ),
                            (e = !1));
                          var n = this.times,
                            i = this.values,
                            r = n.length;
                          0 === r &&
                            (console.error(
                              "THREE.KeyframeTrack: Track is empty.",
                              this
                            ),
                            (e = !1));
                          for (var a = null, o = 0; o !== r; o++) {
                            var s = n[o];
                            if ("number" === typeof s && isNaN(s)) {
                              console.error(
                                "THREE.KeyframeTrack: Time is not a valid number.",
                                this,
                                o,
                                s
                              ),
                                (e = !1);
                              break;
                            }
                            if (null !== a && a > s) {
                              console.error(
                                "THREE.KeyframeTrack: Out of order keys.",
                                this,
                                o,
                                s,
                                a
                              ),
                                (e = !1);
                              break;
                            }
                            a = s;
                          }
                          if (void 0 !== i && Fc.isTypedArray(i))
                            for (var l = 0, u = i.length; l !== u; ++l) {
                              var c = i[l];
                              if (isNaN(c)) {
                                console.error(
                                  "THREE.KeyframeTrack: Value is not a valid number.",
                                  this,
                                  l,
                                  c
                                ),
                                  (e = !1);
                                break;
                              }
                            }
                          return e;
                        },
                      },
                      {
                        key: "optimize",
                        value: function () {
                          for (
                            var e = Fc.arraySlice(this.times),
                              t = Fc.arraySlice(this.values),
                              n = this.getValueSize(),
                              i = this.getInterpolation() === en,
                              r = e.length - 1,
                              a = 1,
                              o = 1;
                            o < r;
                            ++o
                          ) {
                            var s = !1,
                              l = e[o];
                            if (l !== e[o + 1] && (1 !== o || l !== e[0]))
                              if (i) s = !0;
                              else
                                for (
                                  var u = o * n, c = u - n, h = u + n, d = 0;
                                  d !== n;
                                  ++d
                                ) {
                                  var p = t[u + d];
                                  if (p !== t[c + d] || p !== t[h + d]) {
                                    s = !0;
                                    break;
                                  }
                                }
                            if (s) {
                              if (o !== a) {
                                e[a] = e[o];
                                for (
                                  var f = o * n, m = a * n, v = 0;
                                  v !== n;
                                  ++v
                                )
                                  t[m + v] = t[f + v];
                              }
                              ++a;
                            }
                          }
                          if (r > 0) {
                            e[a] = e[r];
                            for (var g = r * n, y = a * n, x = 0; x !== n; ++x)
                              t[y + x] = t[g + x];
                            ++a;
                          }
                          return (
                            a !== e.length
                              ? ((this.times = Fc.arraySlice(e, 0, a)),
                                (this.values = Fc.arraySlice(t, 0, a * n)))
                              : ((this.times = e), (this.values = t)),
                            this
                          );
                        },
                      },
                      {
                        key: "clone",
                        value: function () {
                          var e = Fc.arraySlice(this.times, 0),
                            t = Fc.arraySlice(this.values, 0),
                            n = new (0, this.constructor)(this.name, e, t);
                          return (
                            (n.createInterpolant = this.createInterpolant), n
                          );
                        },
                      },
                    ],
                    [
                      {
                        key: "toJSON",
                        value: function (e) {
                          var t,
                            n = e.constructor;
                          if (n.toJSON !== this.toJSON) t = n.toJSON(e);
                          else {
                            t = {
                              name: e.name,
                              times: Fc.convertArray(e.times, Array),
                              values: Fc.convertArray(e.values, Array),
                            };
                            var i = e.getInterpolation();
                            i !== e.DefaultInterpolation &&
                              (t.interpolation = i);
                          }
                          return (t.type = e.ValueTypeName), t;
                        },
                      },
                    ]
                  ),
                  e
                );
              })();
            (Vc.prototype.TimeBufferType = Float32Array),
              (Vc.prototype.ValueBufferType = Float32Array),
              (Vc.prototype.DefaultInterpolation = $t);
            var Uc = (function (e) {
              function t() {
                return f(this, t), c(this, h(t).apply(this, arguments));
              }
              return p(t, e), t;
            })(Vc);
            (Uc.prototype.ValueTypeName = "bool"),
              (Uc.prototype.ValueBufferType = Array),
              (Uc.prototype.DefaultInterpolation = Kt),
              (Uc.prototype.InterpolantFactoryMethodLinear = void 0),
              (Uc.prototype.InterpolantFactoryMethodSmooth = void 0);
            var zc = (function (e) {
              function t() {
                return f(this, t), c(this, h(t).apply(this, arguments));
              }
              return p(t, e), t;
            })(Vc);
            zc.prototype.ValueTypeName = "color";
            var jc = (function (e) {
              function t() {
                return f(this, t), c(this, h(t).apply(this, arguments));
              }
              return p(t, e), t;
            })(Vc);
            jc.prototype.ValueTypeName = "number";
            var Gc = (function (e) {
                function t(e, n, i, r) {
                  return f(this, t), c(this, h(t).call(this, e, n, i, r));
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "interpolate_",
                      value: function (e, t, n, i) {
                        for (
                          var r = this.resultBuffer,
                            a = this.sampleValues,
                            o = this.valueSize,
                            s = (n - t) / (i - t),
                            l = e * o,
                            u = l + o;
                          l !== u;
                          l += 4
                        )
                          bi.slerpFlat(r, 0, a, l - o, a, l, s);
                        return r;
                      },
                    },
                  ]),
                  t
                );
              })(Nc),
              Hc = (function (e) {
                function t() {
                  return f(this, t), c(this, h(t).apply(this, arguments));
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "InterpolantFactoryMethodLinear",
                      value: function (e) {
                        return new Gc(
                          this.times,
                          this.values,
                          this.getValueSize(),
                          e
                        );
                      },
                    },
                  ]),
                  t
                );
              })(Vc);
            (Hc.prototype.ValueTypeName = "quaternion"),
              (Hc.prototype.DefaultInterpolation = $t),
              (Hc.prototype.InterpolantFactoryMethodSmooth = void 0);
            var Wc = (function (e) {
              function t() {
                return f(this, t), c(this, h(t).apply(this, arguments));
              }
              return p(t, e), t;
            })(Vc);
            (Wc.prototype.ValueTypeName = "string"),
              (Wc.prototype.ValueBufferType = Array),
              (Wc.prototype.DefaultInterpolation = Kt),
              (Wc.prototype.InterpolantFactoryMethodLinear = void 0),
              (Wc.prototype.InterpolantFactoryMethodSmooth = void 0);
            var Yc = (function (e) {
              function t() {
                return f(this, t), c(this, h(t).apply(this, arguments));
              }
              return p(t, e), t;
            })(Vc);
            Yc.prototype.ValueTypeName = "vector";
            var qc = (function () {
              function e(t) {
                var n =
                    arguments.length > 1 && void 0 !== arguments[1]
                      ? arguments[1]
                      : -1,
                  i = arguments.length > 2 ? arguments[2] : void 0,
                  r =
                    arguments.length > 3 && void 0 !== arguments[3]
                      ? arguments[3]
                      : an;
                f(this, e),
                  (this.name = t),
                  (this.tracks = i),
                  (this.duration = n),
                  (this.blendMode = r),
                  (this.uuid = ti()),
                  this.duration < 0 && this.resetDuration();
              }
              return (
                m(
                  e,
                  [
                    {
                      key: "resetDuration",
                      value: function () {
                        for (
                          var e = 0, t = 0, n = this.tracks.length;
                          t !== n;
                          ++t
                        ) {
                          var i = this.tracks[t];
                          e = Math.max(e, i.times[i.times.length - 1]);
                        }
                        return (this.duration = e), this;
                      },
                    },
                    {
                      key: "trim",
                      value: function () {
                        for (var e = 0; e < this.tracks.length; e++)
                          this.tracks[e].trim(0, this.duration);
                        return this;
                      },
                    },
                    {
                      key: "validate",
                      value: function () {
                        for (var e = !0, t = 0; t < this.tracks.length; t++)
                          e = e && this.tracks[t].validate();
                        return e;
                      },
                    },
                    {
                      key: "optimize",
                      value: function () {
                        for (var e = 0; e < this.tracks.length; e++)
                          this.tracks[e].optimize();
                        return this;
                      },
                    },
                    {
                      key: "clone",
                      value: function () {
                        for (var e = [], t = 0; t < this.tracks.length; t++)
                          e.push(this.tracks[t].clone());
                        return new this.constructor(
                          this.name,
                          this.duration,
                          e,
                          this.blendMode
                        );
                      },
                    },
                    {
                      key: "toJSON",
                      value: function () {
                        return this.constructor.toJSON(this);
                      },
                    },
                  ],
                  [
                    {
                      key: "parse",
                      value: function (e) {
                        for (
                          var t = [],
                            n = e.tracks,
                            i = 1 / (e.fps || 1),
                            r = 0,
                            a = n.length;
                          r !== a;
                          ++r
                        )
                          t.push(Xc(n[r]).scale(i));
                        var o = new this(e.name, e.duration, t, e.blendMode);
                        return (o.uuid = e.uuid), o;
                      },
                    },
                    {
                      key: "toJSON",
                      value: function (e) {
                        for (
                          var t = [],
                            n = e.tracks,
                            i = {
                              name: e.name,
                              duration: e.duration,
                              tracks: t,
                              uuid: e.uuid,
                              blendMode: e.blendMode,
                            },
                            r = 0,
                            a = n.length;
                          r !== a;
                          ++r
                        )
                          t.push(Vc.toJSON(n[r]));
                        return i;
                      },
                    },
                    {
                      key: "CreateFromMorphTargetSequence",
                      value: function (e, t, n, i) {
                        for (var r = t.length, a = [], o = 0; o < r; o++) {
                          var s = [],
                            l = [];
                          s.push((o + r - 1) % r, o, (o + 1) % r),
                            l.push(0, 1, 0);
                          var u = Fc.getKeyframeOrder(s);
                          (s = Fc.sortedArray(s, 1, u)),
                            (l = Fc.sortedArray(l, 1, u)),
                            i || 0 !== s[0] || (s.push(r), l.push(l[0])),
                            a.push(
                              new jc(
                                ".morphTargetInfluences[" + t[o].name + "]",
                                s,
                                l
                              ).scale(1 / n)
                            );
                        }
                        return new this(e, -1, a);
                      },
                    },
                    {
                      key: "findByName",
                      value: function (e, t) {
                        var n = e;
                        if (!Array.isArray(e)) {
                          var i = e;
                          n =
                            (i.geometry && i.geometry.animations) ||
                            i.animations;
                        }
                        for (var r = 0; r < n.length; r++)
                          if (n[r].name === t) return n[r];
                        return null;
                      },
                    },
                    {
                      key: "CreateClipsFromMorphTargetSequences",
                      value: function (e, t, n) {
                        for (
                          var i = {},
                            r = /^([\w-]*?)([\d]+)$/,
                            a = 0,
                            o = e.length;
                          a < o;
                          a++
                        ) {
                          var s = e[a],
                            l = s.name.match(r);
                          if (l && l.length > 1) {
                            var u = l[1],
                              c = i[u];
                            c || (i[u] = c = []), c.push(s);
                          }
                        }
                        var h = [];
                        for (var d in i)
                          h.push(
                            this.CreateFromMorphTargetSequence(d, i[d], t, n)
                          );
                        return h;
                      },
                    },
                    {
                      key: "parseAnimation",
                      value: function (e, t) {
                        if (!e)
                          return (
                            console.error(
                              "THREE.AnimationClip: No animation in JSONLoader data."
                            ),
                            null
                          );
                        for (
                          var n = function (e, t, n, i, r) {
                              if (0 !== n.length) {
                                var a = [],
                                  o = [];
                                Fc.flattenJSON(n, a, o, i),
                                  0 !== a.length && r.push(new e(t, a, o));
                              }
                            },
                            i = [],
                            r = e.name || "default",
                            a = e.fps || 30,
                            o = e.blendMode,
                            s = e.length || -1,
                            l = e.hierarchy || [],
                            u = 0;
                          u < l.length;
                          u++
                        ) {
                          var c = l[u].keys;
                          if (c && 0 !== c.length)
                            if (c[0].morphTargets) {
                              var h = {},
                                d = void 0;
                              for (d = 0; d < c.length; d++)
                                if (c[d].morphTargets)
                                  for (
                                    var p = 0;
                                    p < c[d].morphTargets.length;
                                    p++
                                  )
                                    h[c[d].morphTargets[p]] = -1;
                              for (var f in h) {
                                for (
                                  var m = [], v = [], g = 0;
                                  g !== c[d].morphTargets.length;
                                  ++g
                                ) {
                                  var y = c[d];
                                  m.push(y.time),
                                    v.push(y.morphTarget === f ? 1 : 0);
                                }
                                i.push(
                                  new jc(
                                    ".morphTargetInfluence[" + f + "]",
                                    m,
                                    v
                                  )
                                );
                              }
                              s = h.length * (a || 1);
                            } else {
                              var x = ".bones[" + t[u].name + "]";
                              n(Yc, x + ".position", c, "pos", i),
                                n(Hc, x + ".quaternion", c, "rot", i),
                                n(Yc, x + ".scale", c, "scl", i);
                            }
                        }
                        return 0 === i.length ? null : new this(r, s, i, o);
                      },
                    },
                  ]
                ),
                e
              );
            })();
            function Xc(e) {
              if (void 0 === e.type)
                throw new Error(
                  "THREE.KeyframeTrack: track type undefined, can not parse"
                );
              var t = (function (e) {
                switch (e.toLowerCase()) {
                  case "scalar":
                  case "double":
                  case "float":
                  case "number":
                  case "integer":
                    return jc;
                  case "vector":
                  case "vector2":
                  case "vector3":
                  case "vector4":
                    return Yc;
                  case "color":
                    return zc;
                  case "quaternion":
                    return Hc;
                  case "bool":
                  case "boolean":
                    return Uc;
                  case "string":
                    return Wc;
                }
                throw new Error(
                  "THREE.KeyframeTrack: Unsupported typeName: " + e
                );
              })(e.type);
              if (void 0 === e.times) {
                var n = [],
                  i = [];
                Fc.flattenJSON(e.keys, n, i, "value"),
                  (e.times = n),
                  (e.values = i);
              }
              return void 0 !== t.parse
                ? t.parse(e)
                : new t(e.name, e.times, e.values, e.interpolation);
            }
            var Qc = {
                enabled: !1,
                files: {},
                add: function (e, t) {
                  !1 !== this.enabled && (this.files[e] = t);
                },
                get: function (e) {
                  if (!1 !== this.enabled) return this.files[e];
                },
                remove: function (e) {
                  delete this.files[e];
                },
                clear: function () {
                  this.files = {};
                },
              },
              Zc = function e(t, n, i) {
                f(this, e);
                var r = this,
                  a = !1,
                  o = 0,
                  s = 0,
                  l = void 0,
                  u = [];
                (this.onStart = void 0),
                  (this.onLoad = t),
                  (this.onProgress = n),
                  (this.onError = i),
                  (this.itemStart = function (e) {
                    s++,
                      !1 === a && void 0 !== r.onStart && r.onStart(e, o, s),
                      (a = !0);
                  }),
                  (this.itemEnd = function (e) {
                    o++,
                      void 0 !== r.onProgress && r.onProgress(e, o, s),
                      o === s && ((a = !1), void 0 !== r.onLoad && r.onLoad());
                  }),
                  (this.itemError = function (e) {
                    void 0 !== r.onError && r.onError(e);
                  }),
                  (this.resolveURL = function (e) {
                    return l ? l(e) : e;
                  }),
                  (this.setURLModifier = function (e) {
                    return (l = e), this;
                  }),
                  (this.addHandler = function (e, t) {
                    return u.push(e, t), this;
                  }),
                  (this.removeHandler = function (e) {
                    var t = u.indexOf(e);
                    return -1 !== t && u.splice(t, 2), this;
                  }),
                  (this.getHandler = function (e) {
                    for (var t = 0, n = u.length; t < n; t += 2) {
                      var i = u[t],
                        r = u[t + 1];
                      if ((i.global && (i.lastIndex = 0), i.test(e))) return r;
                    }
                    return null;
                  });
              },
              Jc = new Zc(),
              Kc = (function () {
                function e(t) {
                  f(this, e),
                    (this.manager = void 0 !== t ? t : Jc),
                    (this.crossOrigin = "anonymous"),
                    (this.withCredentials = !1),
                    (this.path = ""),
                    (this.resourcePath = ""),
                    (this.requestHeader = {});
                }
                return (
                  m(e, [
                    { key: "load", value: function () {} },
                    {
                      key: "loadAsync",
                      value: function (e, t) {
                        var n = this;
                        return new Promise(function (i, r) {
                          n.load(e, i, t, r);
                        });
                      },
                    },
                    { key: "parse", value: function () {} },
                    {
                      key: "setCrossOrigin",
                      value: function (e) {
                        return (this.crossOrigin = e), this;
                      },
                    },
                    {
                      key: "setWithCredentials",
                      value: function (e) {
                        return (this.withCredentials = e), this;
                      },
                    },
                    {
                      key: "setPath",
                      value: function (e) {
                        return (this.path = e), this;
                      },
                    },
                    {
                      key: "setResourcePath",
                      value: function (e) {
                        return (this.resourcePath = e), this;
                      },
                    },
                    {
                      key: "setRequestHeader",
                      value: function (e) {
                        return (this.requestHeader = e), this;
                      },
                    },
                  ]),
                  e
                );
              })(),
              $c = {},
              eh = (function (e) {
                function t(e) {
                  return f(this, t), c(this, h(t).call(this, e));
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "load",
                      value: function (e, t, n, i) {
                        void 0 === e && (e = ""),
                          void 0 !== this.path && (e = this.path + e),
                          (e = this.manager.resolveURL(e));
                        var r = this,
                          a = Qc.get(e);
                        if (void 0 !== a)
                          return (
                            r.manager.itemStart(e),
                            setTimeout(function () {
                              t && t(a), r.manager.itemEnd(e);
                            }, 0),
                            a
                          );
                        if (void 0 === $c[e]) {
                          var o,
                            s = e.match(/^data:(.*?)(;base64)?,(.*)$/);
                          if (s) {
                            var l = s[1],
                              u = !!s[2],
                              c = s[3];
                            (c = decodeURIComponent(c)), u && (c = atob(c));
                            try {
                              var h,
                                d = (this.responseType || "").toLowerCase();
                              switch (d) {
                                case "arraybuffer":
                                case "blob":
                                  for (
                                    var p = new Uint8Array(c.length), f = 0;
                                    f < c.length;
                                    f++
                                  )
                                    p[f] = c.charCodeAt(f);
                                  h =
                                    "blob" === d
                                      ? new Blob([p.buffer], { type: l })
                                      : p.buffer;
                                  break;
                                case "document":
                                  var m = new DOMParser();
                                  h = m.parseFromString(c, l);
                                  break;
                                case "json":
                                  h = JSON.parse(c);
                                  break;
                                default:
                                  h = c;
                              }
                              setTimeout(function () {
                                t && t(h), r.manager.itemEnd(e);
                              }, 0);
                            } catch (g) {
                              setTimeout(function () {
                                i && i(g),
                                  r.manager.itemError(e),
                                  r.manager.itemEnd(e);
                              }, 0);
                            }
                          } else {
                            for (var v in (($c[e] = []),
                            $c[e].push({
                              onLoad: t,
                              onProgress: n,
                              onError: i,
                            }),
                            (o = new XMLHttpRequest()).open("GET", e, !0),
                            o.addEventListener(
                              "load",
                              function (t) {
                                var n = this.response,
                                  i = $c[e];
                                if (
                                  (delete $c[e],
                                  200 === this.status || 0 === this.status)
                                ) {
                                  0 === this.status &&
                                    console.warn(
                                      "THREE.FileLoader: HTTP Status 0 received."
                                    ),
                                    Qc.add(e, n);
                                  for (var a = 0, o = i.length; a < o; a++) {
                                    var s = i[a];
                                    s.onLoad && s.onLoad(n);
                                  }
                                  r.manager.itemEnd(e);
                                } else {
                                  for (var l = 0, u = i.length; l < u; l++) {
                                    var c = i[l];
                                    c.onError && c.onError(t);
                                  }
                                  r.manager.itemError(e), r.manager.itemEnd(e);
                                }
                              },
                              !1
                            ),
                            o.addEventListener(
                              "progress",
                              function (t) {
                                for (
                                  var n = $c[e], i = 0, r = n.length;
                                  i < r;
                                  i++
                                ) {
                                  var a = n[i];
                                  a.onProgress && a.onProgress(t);
                                }
                              },
                              !1
                            ),
                            o.addEventListener(
                              "error",
                              function (t) {
                                var n = $c[e];
                                delete $c[e];
                                for (var i = 0, a = n.length; i < a; i++) {
                                  var o = n[i];
                                  o.onError && o.onError(t);
                                }
                                r.manager.itemError(e), r.manager.itemEnd(e);
                              },
                              !1
                            ),
                            o.addEventListener(
                              "abort",
                              function (t) {
                                var n = $c[e];
                                delete $c[e];
                                for (var i = 0, a = n.length; i < a; i++) {
                                  var o = n[i];
                                  o.onError && o.onError(t);
                                }
                                r.manager.itemError(e), r.manager.itemEnd(e);
                              },
                              !1
                            ),
                            void 0 !== this.responseType &&
                              (o.responseType = this.responseType),
                            void 0 !== this.withCredentials &&
                              (o.withCredentials = this.withCredentials),
                            o.overrideMimeType &&
                              o.overrideMimeType(
                                void 0 !== this.mimeType
                                  ? this.mimeType
                                  : "text/plain"
                              ),
                            this.requestHeader))
                              o.setRequestHeader(v, this.requestHeader[v]);
                            o.send(null);
                          }
                          return r.manager.itemStart(e), o;
                        }
                        $c[e].push({ onLoad: t, onProgress: n, onError: i });
                      },
                    },
                    {
                      key: "setResponseType",
                      value: function (e) {
                        return (this.responseType = e), this;
                      },
                    },
                    {
                      key: "setMimeType",
                      value: function (e) {
                        return (this.mimeType = e), this;
                      },
                    },
                  ]),
                  t
                );
              })(Kc),
              th = (function (e) {
                function t(e) {
                  return f(this, t), c(this, h(t).call(this, e));
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "load",
                      value: function (e, t, n, i) {
                        var r = this,
                          a = new eh(this.manager);
                        a.setPath(this.path),
                          a.setRequestHeader(this.requestHeader),
                          a.setWithCredentials(this.withCredentials),
                          a.load(
                            e,
                            function (n) {
                              try {
                                t(r.parse(JSON.parse(n)));
                              } catch (a) {
                                i ? i(a) : console.error(a),
                                  r.manager.itemError(e);
                              }
                            },
                            n,
                            i
                          );
                      },
                    },
                    {
                      key: "parse",
                      value: function (e) {
                        for (var t = [], n = 0; n < e.length; n++) {
                          var i = qc.parse(e[n]);
                          t.push(i);
                        }
                        return t;
                      },
                    },
                  ]),
                  t
                );
              })(Kc),
              nh = (function (e) {
                function t(e) {
                  return f(this, t), c(this, h(t).call(this, e));
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "load",
                      value: function (e, t, n, i) {
                        var r = this,
                          a = [],
                          o = new bu(),
                          s = new eh(this.manager);
                        s.setPath(this.path),
                          s.setResponseType("arraybuffer"),
                          s.setRequestHeader(this.requestHeader),
                          s.setWithCredentials(r.withCredentials);
                        var l = 0;
                        function u(u) {
                          s.load(
                            e[u],
                            function (e) {
                              var n = r.parse(e, !0);
                              (a[u] = {
                                width: n.width,
                                height: n.height,
                                format: n.format,
                                mipmaps: n.mipmaps,
                              }),
                                6 === (l += 1) &&
                                  (1 === n.mipmapCount && (o.minFilter = Re),
                                  (o.image = a),
                                  (o.format = n.format),
                                  (o.needsUpdate = !0),
                                  t && t(o));
                            },
                            n,
                            i
                          );
                        }
                        if (Array.isArray(e))
                          for (var c = 0, h = e.length; c < h; ++c) u(c);
                        else
                          s.load(
                            e,
                            function (e) {
                              var n = r.parse(e, !0);
                              if (n.isCubemap) {
                                for (
                                  var i = n.mipmaps.length / n.mipmapCount,
                                    s = 0;
                                  s < i;
                                  s++
                                ) {
                                  a[s] = { mipmaps: [] };
                                  for (var l = 0; l < n.mipmapCount; l++)
                                    a[s].mipmaps.push(
                                      n.mipmaps[s * n.mipmapCount + l]
                                    ),
                                      (a[s].format = n.format),
                                      (a[s].width = n.width),
                                      (a[s].height = n.height);
                                }
                                o.image = a;
                              } else
                                (o.image.width = n.width),
                                  (o.image.height = n.height),
                                  (o.mipmaps = n.mipmaps);
                              1 === n.mipmapCount && (o.minFilter = Re),
                                (o.format = n.format),
                                (o.needsUpdate = !0),
                                t && t(o);
                            },
                            n,
                            i
                          );
                        return o;
                      },
                    },
                  ]),
                  t
                );
              })(Kc),
              ih = (function (e) {
                function t(e) {
                  return f(this, t), c(this, h(t).call(this, e));
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "load",
                      value: function (e, t, n, i) {
                        void 0 !== this.path && (e = this.path + e),
                          (e = this.manager.resolveURL(e));
                        var r = this,
                          a = Qc.get(e);
                        if (void 0 !== a)
                          return (
                            r.manager.itemStart(e),
                            setTimeout(function () {
                              t && t(a), r.manager.itemEnd(e);
                            }, 0),
                            a
                          );
                        var o = document.createElementNS(
                          "http://www.w3.org/1999/xhtml",
                          "img"
                        );
                        function s() {
                          o.removeEventListener("load", s, !1),
                            o.removeEventListener("error", l, !1),
                            Qc.add(e, this),
                            t && t(this),
                            r.manager.itemEnd(e);
                        }
                        function l(t) {
                          o.removeEventListener("load", s, !1),
                            o.removeEventListener("error", l, !1),
                            i && i(t),
                            r.manager.itemError(e),
                            r.manager.itemEnd(e);
                        }
                        return (
                          o.addEventListener("load", s, !1),
                          o.addEventListener("error", l, !1),
                          "data:" !== e.substr(0, 5) &&
                            void 0 !== this.crossOrigin &&
                            (o.crossOrigin = this.crossOrigin),
                          r.manager.itemStart(e),
                          (o.src = e),
                          o
                        );
                      },
                    },
                  ]),
                  t
                );
              })(Kc),
              rh = (function (e) {
                function t(e) {
                  return f(this, t), c(this, h(t).call(this, e));
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "load",
                      value: function (e, t, n, i) {
                        var r = new Ya(),
                          a = new ih(this.manager);
                        a.setCrossOrigin(this.crossOrigin),
                          a.setPath(this.path);
                        var o = 0;
                        function s(n) {
                          a.load(
                            e[n],
                            function (e) {
                              (r.images[n] = e),
                                6 === ++o && ((r.needsUpdate = !0), t && t(r));
                            },
                            void 0,
                            i
                          );
                        }
                        for (var l = 0; l < e.length; ++l) s(l);
                        return r;
                      },
                    },
                  ]),
                  t
                );
              })(Kc),
              ah = (function (e) {
                function t(e) {
                  return f(this, t), c(this, h(t).call(this, e));
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "load",
                      value: function (e, t, n, i) {
                        var r = this,
                          a = new Yl(),
                          o = new eh(this.manager);
                        return (
                          o.setResponseType("arraybuffer"),
                          o.setRequestHeader(this.requestHeader),
                          o.setPath(this.path),
                          o.setWithCredentials(r.withCredentials),
                          o.load(
                            e,
                            function (e) {
                              var n = r.parse(e);
                              n &&
                                (void 0 !== n.image
                                  ? (a.image = n.image)
                                  : void 0 !== n.data &&
                                    ((a.image.width = n.width),
                                    (a.image.height = n.height),
                                    (a.image.data = n.data)),
                                (a.wrapS = void 0 !== n.wrapS ? n.wrapS : Me),
                                (a.wrapT = void 0 !== n.wrapT ? n.wrapT : Me),
                                (a.magFilter =
                                  void 0 !== n.magFilter ? n.magFilter : Re),
                                (a.minFilter =
                                  void 0 !== n.minFilter ? n.minFilter : Re),
                                (a.anisotropy =
                                  void 0 !== n.anisotropy ? n.anisotropy : 1),
                                void 0 !== n.encoding &&
                                  (a.encoding = n.encoding),
                                void 0 !== n.flipY && (a.flipY = n.flipY),
                                void 0 !== n.format && (a.format = n.format),
                                void 0 !== n.type && (a.type = n.type),
                                void 0 !== n.mipmaps &&
                                  ((a.mipmaps = n.mipmaps), (a.minFilter = Ne)),
                                1 === n.mipmapCount && (a.minFilter = Re),
                                void 0 !== n.generateMipmaps &&
                                  (a.generateMipmaps = n.generateMipmaps),
                                (a.needsUpdate = !0),
                                t && t(a, n));
                            },
                            n,
                            i
                          ),
                          a
                        );
                      },
                    },
                  ]),
                  t
                );
              })(Kc),
              oh = (function (e) {
                function t(e) {
                  return f(this, t), c(this, h(t).call(this, e));
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "load",
                      value: function (e, t, n, i) {
                        var r = new fi(),
                          a = new ih(this.manager);
                        return (
                          a.setCrossOrigin(this.crossOrigin),
                          a.setPath(this.path),
                          a.load(
                            e,
                            function (n) {
                              r.image = n;
                              var i =
                                e.search(/\.jpe?g($|\?)/i) > 0 ||
                                0 === e.search(/^data\:image\/jpeg/);
                              (r.format = i ? Ze : Je),
                                (r.needsUpdate = !0),
                                void 0 !== t && t(r);
                            },
                            n,
                            i
                          ),
                          r
                        );
                      },
                    },
                  ]),
                  t
                );
              })(Kc),
              sh = (function () {
                function e() {
                  f(this, e),
                    (this.type = "Curve"),
                    (this.arcLengthDivisions = 200);
                }
                return (
                  m(e, [
                    {
                      key: "getPoint",
                      value: function () {
                        return (
                          console.warn(
                            "THREE.Curve: .getPoint() not implemented."
                          ),
                          null
                        );
                      },
                    },
                    {
                      key: "getPointAt",
                      value: function (e, t) {
                        var n = this.getUtoTmapping(e);
                        return this.getPoint(n, t);
                      },
                    },
                    {
                      key: "getPoints",
                      value: function () {
                        for (
                          var e =
                              arguments.length > 0 && void 0 !== arguments[0]
                                ? arguments[0]
                                : 5,
                            t = [],
                            n = 0;
                          n <= e;
                          n++
                        )
                          t.push(this.getPoint(n / e));
                        return t;
                      },
                    },
                    {
                      key: "getSpacedPoints",
                      value: function () {
                        for (
                          var e =
                              arguments.length > 0 && void 0 !== arguments[0]
                                ? arguments[0]
                                : 5,
                            t = [],
                            n = 0;
                          n <= e;
                          n++
                        )
                          t.push(this.getPointAt(n / e));
                        return t;
                      },
                    },
                    {
                      key: "getLength",
                      value: function () {
                        var e = this.getLengths();
                        return e[e.length - 1];
                      },
                    },
                    {
                      key: "getLengths",
                      value: function () {
                        var e =
                          arguments.length > 0 && void 0 !== arguments[0]
                            ? arguments[0]
                            : this.arcLengthDivisions;
                        if (
                          this.cacheArcLengths &&
                          this.cacheArcLengths.length === e + 1 &&
                          !this.needsUpdate
                        )
                          return this.cacheArcLengths;
                        this.needsUpdate = !1;
                        var t,
                          n = [],
                          i = this.getPoint(0),
                          r = 0;
                        n.push(0);
                        for (var a = 1; a <= e; a++)
                          (r += (t = this.getPoint(a / e)).distanceTo(i)),
                            n.push(r),
                            (i = t);
                        return (this.cacheArcLengths = n), n;
                      },
                    },
                    {
                      key: "updateArcLengths",
                      value: function () {
                        (this.needsUpdate = !0), this.getLengths();
                      },
                    },
                    {
                      key: "getUtoTmapping",
                      value: function (e, t) {
                        var n,
                          i = this.getLengths(),
                          r = 0,
                          a = i.length;
                        n = t || e * i[a - 1];
                        for (var o, s = 0, l = a - 1; s <= l; )
                          if (
                            (o = i[(r = Math.floor(s + (l - s) / 2))] - n) < 0
                          )
                            s = r + 1;
                          else {
                            if (!(o > 0)) {
                              l = r;
                              break;
                            }
                            l = r - 1;
                          }
                        if (i[(r = l)] === n) return r / (a - 1);
                        var u = i[r];
                        return (r + (n - u) / (i[r + 1] - u)) / (a - 1);
                      },
                    },
                    {
                      key: "getTangent",
                      value: function (e, t) {
                        var n = e - 1e-4,
                          i = e + 1e-4;
                        n < 0 && (n = 0), i > 1 && (i = 1);
                        var r = this.getPoint(n),
                          a = this.getPoint(i),
                          o = t || (r.isVector2 ? new ui() : new _i());
                        return o.copy(a).sub(r).normalize(), o;
                      },
                    },
                    {
                      key: "getTangentAt",
                      value: function (e, t) {
                        var n = this.getUtoTmapping(e);
                        return this.getTangent(n, t);
                      },
                    },
                    {
                      key: "computeFrenetFrames",
                      value: function (e, t) {
                        for (
                          var n = new _i(),
                            i = [],
                            r = [],
                            a = [],
                            o = new _i(),
                            s = new Ki(),
                            l = 0;
                          l <= e;
                          l++
                        ) {
                          var u = l / e;
                          (i[l] = this.getTangentAt(u, new _i())),
                            i[l].normalize();
                        }
                        (r[0] = new _i()), (a[0] = new _i());
                        var c = Number.MAX_VALUE,
                          h = Math.abs(i[0].x),
                          d = Math.abs(i[0].y),
                          p = Math.abs(i[0].z);
                        h <= c && ((c = h), n.set(1, 0, 0)),
                          d <= c && ((c = d), n.set(0, 1, 0)),
                          p <= c && n.set(0, 0, 1),
                          o.crossVectors(i[0], n).normalize(),
                          r[0].crossVectors(i[0], o),
                          a[0].crossVectors(i[0], r[0]);
                        for (var f = 1; f <= e; f++) {
                          if (
                            ((r[f] = r[f - 1].clone()),
                            (a[f] = a[f - 1].clone()),
                            o.crossVectors(i[f - 1], i[f]),
                            o.length() > Number.EPSILON)
                          ) {
                            o.normalize();
                            var m = Math.acos(ni(i[f - 1].dot(i[f]), -1, 1));
                            r[f].applyMatrix4(s.makeRotationAxis(o, m));
                          }
                          a[f].crossVectors(i[f], r[f]);
                        }
                        if (!0 === t) {
                          var v = Math.acos(ni(r[0].dot(r[e]), -1, 1));
                          (v /= e),
                            i[0].dot(o.crossVectors(r[0], r[e])) > 0 &&
                              (v = -v);
                          for (var g = 1; g <= e; g++)
                            r[g].applyMatrix4(s.makeRotationAxis(i[g], v * g)),
                              a[g].crossVectors(i[g], r[g]);
                        }
                        return { tangents: i, normals: r, binormals: a };
                      },
                    },
                    {
                      key: "clone",
                      value: function () {
                        return new this.constructor().copy(this);
                      },
                    },
                    {
                      key: "copy",
                      value: function (e) {
                        return (
                          (this.arcLengthDivisions = e.arcLengthDivisions), this
                        );
                      },
                    },
                    {
                      key: "toJSON",
                      value: function () {
                        var e = {
                          metadata: {
                            version: 4.5,
                            type: "Curve",
                            generator: "Curve.toJSON",
                          },
                        };
                        return (
                          (e.arcLengthDivisions = this.arcLengthDivisions),
                          (e.type = this.type),
                          e
                        );
                      },
                    },
                    {
                      key: "fromJSON",
                      value: function (e) {
                        return (
                          (this.arcLengthDivisions = e.arcLengthDivisions), this
                        );
                      },
                    },
                  ]),
                  e
                );
              })(),
              lh = (function (e) {
                function t() {
                  var e,
                    n =
                      arguments.length > 0 && void 0 !== arguments[0]
                        ? arguments[0]
                        : 0,
                    i =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : 0,
                    r =
                      arguments.length > 2 && void 0 !== arguments[2]
                        ? arguments[2]
                        : 1,
                    a =
                      arguments.length > 3 && void 0 !== arguments[3]
                        ? arguments[3]
                        : 1,
                    o =
                      arguments.length > 4 && void 0 !== arguments[4]
                        ? arguments[4]
                        : 0,
                    s =
                      arguments.length > 5 && void 0 !== arguments[5]
                        ? arguments[5]
                        : 2 * Math.PI,
                    l =
                      arguments.length > 6 &&
                      void 0 !== arguments[6] &&
                      arguments[6],
                    u =
                      arguments.length > 7 && void 0 !== arguments[7]
                        ? arguments[7]
                        : 0;
                  return (
                    f(this, t),
                    ((e = c(this, h(t).call(this))).type = "EllipseCurve"),
                    (e.aX = n),
                    (e.aY = i),
                    (e.xRadius = r),
                    (e.yRadius = a),
                    (e.aStartAngle = o),
                    (e.aEndAngle = s),
                    (e.aClockwise = l),
                    (e.aRotation = u),
                    e
                  );
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "getPoint",
                      value: function (e, t) {
                        for (
                          var n = t || new ui(),
                            i = 2 * Math.PI,
                            r = this.aEndAngle - this.aStartAngle,
                            a = Math.abs(r) < Number.EPSILON;
                          r < 0;

                        )
                          r += i;
                        for (; r > i; ) r -= i;
                        r < Number.EPSILON && (r = a ? 0 : i),
                          !0 !== this.aClockwise ||
                            a ||
                            (r === i ? (r = -i) : (r -= i));
                        var o = this.aStartAngle + e * r,
                          s = this.aX + this.xRadius * Math.cos(o),
                          l = this.aY + this.yRadius * Math.sin(o);
                        if (0 !== this.aRotation) {
                          var u = Math.cos(this.aRotation),
                            c = Math.sin(this.aRotation),
                            h = s - this.aX,
                            d = l - this.aY;
                          (s = h * u - d * c + this.aX),
                            (l = h * c + d * u + this.aY);
                        }
                        return n.set(s, l);
                      },
                    },
                    {
                      key: "copy",
                      value: function (e) {
                        return (
                          l(h(t.prototype), "copy", this).call(this, e),
                          (this.aX = e.aX),
                          (this.aY = e.aY),
                          (this.xRadius = e.xRadius),
                          (this.yRadius = e.yRadius),
                          (this.aStartAngle = e.aStartAngle),
                          (this.aEndAngle = e.aEndAngle),
                          (this.aClockwise = e.aClockwise),
                          (this.aRotation = e.aRotation),
                          this
                        );
                      },
                    },
                    {
                      key: "toJSON",
                      value: function () {
                        var e = l(h(t.prototype), "toJSON", this).call(this);
                        return (
                          (e.aX = this.aX),
                          (e.aY = this.aY),
                          (e.xRadius = this.xRadius),
                          (e.yRadius = this.yRadius),
                          (e.aStartAngle = this.aStartAngle),
                          (e.aEndAngle = this.aEndAngle),
                          (e.aClockwise = this.aClockwise),
                          (e.aRotation = this.aRotation),
                          e
                        );
                      },
                    },
                    {
                      key: "fromJSON",
                      value: function (e) {
                        return (
                          l(h(t.prototype), "fromJSON", this).call(this, e),
                          (this.aX = e.aX),
                          (this.aY = e.aY),
                          (this.xRadius = e.xRadius),
                          (this.yRadius = e.yRadius),
                          (this.aStartAngle = e.aStartAngle),
                          (this.aEndAngle = e.aEndAngle),
                          (this.aClockwise = e.aClockwise),
                          (this.aRotation = e.aRotation),
                          this
                        );
                      },
                    },
                  ]),
                  t
                );
              })(sh);
            lh.prototype.isEllipseCurve = !0;
            var uh = (function (e) {
              function t(e, n, i, r, a, o) {
                var s;
                return (
                  f(this, t),
                  ((s = c(this, h(t).call(this, e, n, i, i, r, a, o))).type =
                    "ArcCurve"),
                  s
                );
              }
              return p(t, e), t;
            })(lh);
            function ch() {
              var e = 0,
                t = 0,
                n = 0,
                i = 0;
              function r(r, a, o, s) {
                (e = r),
                  (t = o),
                  (n = -3 * r + 3 * a - 2 * o - s),
                  (i = 2 * r - 2 * a + o + s);
              }
              return {
                initCatmullRom: function (e, t, n, i, a) {
                  r(t, n, a * (n - e), a * (i - t));
                },
                initNonuniformCatmullRom: function (e, t, n, i, a, o, s) {
                  var l = (t - e) / a - (n - e) / (a + o) + (n - t) / o,
                    u = (n - t) / o - (i - t) / (o + s) + (i - n) / s;
                  r(t, n, (l *= o), (u *= o));
                },
                calc: function (r) {
                  var a = r * r;
                  return e + t * r + n * a + i * (a * r);
                },
              };
            }
            uh.prototype.isArcCurve = !0;
            var hh = new _i(),
              dh = new ch(),
              ph = new ch(),
              fh = new ch(),
              mh = (function (e) {
                function t() {
                  var e,
                    n =
                      arguments.length > 0 && void 0 !== arguments[0]
                        ? arguments[0]
                        : [],
                    i =
                      arguments.length > 1 &&
                      void 0 !== arguments[1] &&
                      arguments[1],
                    r =
                      arguments.length > 2 && void 0 !== arguments[2]
                        ? arguments[2]
                        : "centripetal",
                    a =
                      arguments.length > 3 && void 0 !== arguments[3]
                        ? arguments[3]
                        : 0.5;
                  return (
                    f(this, t),
                    ((e = c(this, h(t).call(this))).type = "CatmullRomCurve3"),
                    (e.points = n),
                    (e.closed = i),
                    (e.curveType = r),
                    (e.tension = a),
                    e
                  );
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "getPoint",
                      value: function (e) {
                        var t,
                          n,
                          i =
                            arguments.length > 1 && void 0 !== arguments[1]
                              ? arguments[1]
                              : new _i(),
                          r = i,
                          a = this.points,
                          o = a.length,
                          s = (o - (this.closed ? 0 : 1)) * e,
                          l = Math.floor(s),
                          u = s - l;
                        this.closed
                          ? (l +=
                              l > 0 ? 0 : (Math.floor(Math.abs(l) / o) + 1) * o)
                          : 0 === u && l === o - 1 && ((l = o - 2), (u = 1)),
                          this.closed || l > 0
                            ? (t = a[(l - 1) % o])
                            : (hh.subVectors(a[0], a[1]).add(a[0]), (t = hh));
                        var c = a[l % o],
                          h = a[(l + 1) % o];
                        if (
                          (this.closed || l + 2 < o
                            ? (n = a[(l + 2) % o])
                            : (hh.subVectors(a[o - 1], a[o - 2]).add(a[o - 1]),
                              (n = hh)),
                          "centripetal" === this.curveType ||
                            "chordal" === this.curveType)
                        ) {
                          var d = "chordal" === this.curveType ? 0.5 : 0.25,
                            p = Math.pow(t.distanceToSquared(c), d),
                            f = Math.pow(c.distanceToSquared(h), d),
                            m = Math.pow(h.distanceToSquared(n), d);
                          f < 1e-4 && (f = 1),
                            p < 1e-4 && (p = f),
                            m < 1e-4 && (m = f),
                            dh.initNonuniformCatmullRom(
                              t.x,
                              c.x,
                              h.x,
                              n.x,
                              p,
                              f,
                              m
                            ),
                            ph.initNonuniformCatmullRom(
                              t.y,
                              c.y,
                              h.y,
                              n.y,
                              p,
                              f,
                              m
                            ),
                            fh.initNonuniformCatmullRom(
                              t.z,
                              c.z,
                              h.z,
                              n.z,
                              p,
                              f,
                              m
                            );
                        } else
                          "catmullrom" === this.curveType &&
                            (dh.initCatmullRom(
                              t.x,
                              c.x,
                              h.x,
                              n.x,
                              this.tension
                            ),
                            ph.initCatmullRom(t.y, c.y, h.y, n.y, this.tension),
                            fh.initCatmullRom(
                              t.z,
                              c.z,
                              h.z,
                              n.z,
                              this.tension
                            ));
                        return r.set(dh.calc(u), ph.calc(u), fh.calc(u)), r;
                      },
                    },
                    {
                      key: "copy",
                      value: function (e) {
                        l(h(t.prototype), "copy", this).call(this, e),
                          (this.points = []);
                        for (var n = 0, i = e.points.length; n < i; n++) {
                          var r = e.points[n];
                          this.points.push(r.clone());
                        }
                        return (
                          (this.closed = e.closed),
                          (this.curveType = e.curveType),
                          (this.tension = e.tension),
                          this
                        );
                      },
                    },
                    {
                      key: "toJSON",
                      value: function () {
                        var e = l(h(t.prototype), "toJSON", this).call(this);
                        e.points = [];
                        for (var n = 0, i = this.points.length; n < i; n++) {
                          var r = this.points[n];
                          e.points.push(r.toArray());
                        }
                        return (
                          (e.closed = this.closed),
                          (e.curveType = this.curveType),
                          (e.tension = this.tension),
                          e
                        );
                      },
                    },
                    {
                      key: "fromJSON",
                      value: function (e) {
                        l(h(t.prototype), "fromJSON", this).call(this, e),
                          (this.points = []);
                        for (var n = 0, i = e.points.length; n < i; n++) {
                          var r = e.points[n];
                          this.points.push(new _i().fromArray(r));
                        }
                        return (
                          (this.closed = e.closed),
                          (this.curveType = e.curveType),
                          (this.tension = e.tension),
                          this
                        );
                      },
                    },
                  ]),
                  t
                );
              })(sh);
            function vh(e, t, n, i, r) {
              var a = 0.5 * (i - t),
                o = 0.5 * (r - n),
                s = e * e;
              return (
                (2 * n - 2 * i + a + o) * (e * s) +
                (-3 * n + 3 * i - 2 * a - o) * s +
                a * e +
                n
              );
            }
            function gh(e, t, n, i) {
              return (
                (function (e, t) {
                  var n = 1 - e;
                  return n * n * t;
                })(e, t) +
                (function (e, t) {
                  return 2 * (1 - e) * e * t;
                })(e, n) +
                (function (e, t) {
                  return e * e * t;
                })(e, i)
              );
            }
            function yh(e, t, n, i, r) {
              return (
                (function (e, t) {
                  var n = 1 - e;
                  return n * n * n * t;
                })(e, t) +
                (function (e, t) {
                  var n = 1 - e;
                  return 3 * n * n * e * t;
                })(e, n) +
                (function (e, t) {
                  return 3 * (1 - e) * e * e * t;
                })(e, i) +
                (function (e, t) {
                  return e * e * e * t;
                })(e, r)
              );
            }
            mh.prototype.isCatmullRomCurve3 = !0;
            var xh = (function (e) {
              function t() {
                var e,
                  n =
                    arguments.length > 0 && void 0 !== arguments[0]
                      ? arguments[0]
                      : new ui(),
                  i =
                    arguments.length > 1 && void 0 !== arguments[1]
                      ? arguments[1]
                      : new ui(),
                  r =
                    arguments.length > 2 && void 0 !== arguments[2]
                      ? arguments[2]
                      : new ui(),
                  a =
                    arguments.length > 3 && void 0 !== arguments[3]
                      ? arguments[3]
                      : new ui();
                return (
                  f(this, t),
                  ((e = c(this, h(t).call(this))).type = "CubicBezierCurve"),
                  (e.v0 = n),
                  (e.v1 = i),
                  (e.v2 = r),
                  (e.v3 = a),
                  e
                );
              }
              return (
                p(t, e),
                m(t, [
                  {
                    key: "getPoint",
                    value: function (e) {
                      var t =
                          arguments.length > 1 && void 0 !== arguments[1]
                            ? arguments[1]
                            : new ui(),
                        n = t,
                        i = this.v0,
                        r = this.v1,
                        a = this.v2,
                        o = this.v3;
                      return (
                        n.set(
                          yh(e, i.x, r.x, a.x, o.x),
                          yh(e, i.y, r.y, a.y, o.y)
                        ),
                        n
                      );
                    },
                  },
                  {
                    key: "copy",
                    value: function (e) {
                      return (
                        l(h(t.prototype), "copy", this).call(this, e),
                        this.v0.copy(e.v0),
                        this.v1.copy(e.v1),
                        this.v2.copy(e.v2),
                        this.v3.copy(e.v3),
                        this
                      );
                    },
                  },
                  {
                    key: "toJSON",
                    value: function () {
                      var e = l(h(t.prototype), "toJSON", this).call(this);
                      return (
                        (e.v0 = this.v0.toArray()),
                        (e.v1 = this.v1.toArray()),
                        (e.v2 = this.v2.toArray()),
                        (e.v3 = this.v3.toArray()),
                        e
                      );
                    },
                  },
                  {
                    key: "fromJSON",
                    value: function (e) {
                      return (
                        l(h(t.prototype), "fromJSON", this).call(this, e),
                        this.v0.fromArray(e.v0),
                        this.v1.fromArray(e.v1),
                        this.v2.fromArray(e.v2),
                        this.v3.fromArray(e.v3),
                        this
                      );
                    },
                  },
                ]),
                t
              );
            })(sh);
            xh.prototype.isCubicBezierCurve = !0;
            var bh = (function (e) {
              function t() {
                var e,
                  n =
                    arguments.length > 0 && void 0 !== arguments[0]
                      ? arguments[0]
                      : new _i(),
                  i =
                    arguments.length > 1 && void 0 !== arguments[1]
                      ? arguments[1]
                      : new _i(),
                  r =
                    arguments.length > 2 && void 0 !== arguments[2]
                      ? arguments[2]
                      : new _i(),
                  a =
                    arguments.length > 3 && void 0 !== arguments[3]
                      ? arguments[3]
                      : new _i();
                return (
                  f(this, t),
                  ((e = c(this, h(t).call(this))).type = "CubicBezierCurve3"),
                  (e.v0 = n),
                  (e.v1 = i),
                  (e.v2 = r),
                  (e.v3 = a),
                  e
                );
              }
              return (
                p(t, e),
                m(t, [
                  {
                    key: "getPoint",
                    value: function (e) {
                      var t =
                          arguments.length > 1 && void 0 !== arguments[1]
                            ? arguments[1]
                            : new _i(),
                        n = t,
                        i = this.v0,
                        r = this.v1,
                        a = this.v2,
                        o = this.v3;
                      return (
                        n.set(
                          yh(e, i.x, r.x, a.x, o.x),
                          yh(e, i.y, r.y, a.y, o.y),
                          yh(e, i.z, r.z, a.z, o.z)
                        ),
                        n
                      );
                    },
                  },
                  {
                    key: "copy",
                    value: function (e) {
                      return (
                        l(h(t.prototype), "copy", this).call(this, e),
                        this.v0.copy(e.v0),
                        this.v1.copy(e.v1),
                        this.v2.copy(e.v2),
                        this.v3.copy(e.v3),
                        this
                      );
                    },
                  },
                  {
                    key: "toJSON",
                    value: function () {
                      var e = l(h(t.prototype), "toJSON", this).call(this);
                      return (
                        (e.v0 = this.v0.toArray()),
                        (e.v1 = this.v1.toArray()),
                        (e.v2 = this.v2.toArray()),
                        (e.v3 = this.v3.toArray()),
                        e
                      );
                    },
                  },
                  {
                    key: "fromJSON",
                    value: function (e) {
                      return (
                        l(h(t.prototype), "fromJSON", this).call(this, e),
                        this.v0.fromArray(e.v0),
                        this.v1.fromArray(e.v1),
                        this.v2.fromArray(e.v2),
                        this.v3.fromArray(e.v3),
                        this
                      );
                    },
                  },
                ]),
                t
              );
            })(sh);
            bh.prototype.isCubicBezierCurve3 = !0;
            var _h = (function (e) {
              function t() {
                var e,
                  n =
                    arguments.length > 0 && void 0 !== arguments[0]
                      ? arguments[0]
                      : new ui(),
                  i =
                    arguments.length > 1 && void 0 !== arguments[1]
                      ? arguments[1]
                      : new ui();
                return (
                  f(this, t),
                  ((e = c(this, h(t).call(this))).type = "LineCurve"),
                  (e.v1 = n),
                  (e.v2 = i),
                  e
                );
              }
              return (
                p(t, e),
                m(t, [
                  {
                    key: "getPoint",
                    value: function (e) {
                      var t =
                          arguments.length > 1 && void 0 !== arguments[1]
                            ? arguments[1]
                            : new ui(),
                        n = t;
                      return (
                        1 === e
                          ? n.copy(this.v2)
                          : (n.copy(this.v2).sub(this.v1),
                            n.multiplyScalar(e).add(this.v1)),
                        n
                      );
                    },
                  },
                  {
                    key: "getPointAt",
                    value: function (e, t) {
                      return this.getPoint(e, t);
                    },
                  },
                  {
                    key: "getTangent",
                    value: function (e, t) {
                      var n = t || new ui();
                      return n.copy(this.v2).sub(this.v1).normalize(), n;
                    },
                  },
                  {
                    key: "copy",
                    value: function (e) {
                      return (
                        l(h(t.prototype), "copy", this).call(this, e),
                        this.v1.copy(e.v1),
                        this.v2.copy(e.v2),
                        this
                      );
                    },
                  },
                  {
                    key: "toJSON",
                    value: function () {
                      var e = l(h(t.prototype), "toJSON", this).call(this);
                      return (
                        (e.v1 = this.v1.toArray()),
                        (e.v2 = this.v2.toArray()),
                        e
                      );
                    },
                  },
                  {
                    key: "fromJSON",
                    value: function (e) {
                      return (
                        l(h(t.prototype), "fromJSON", this).call(this, e),
                        this.v1.fromArray(e.v1),
                        this.v2.fromArray(e.v2),
                        this
                      );
                    },
                  },
                ]),
                t
              );
            })(sh);
            _h.prototype.isLineCurve = !0;
            var wh = (function (e) {
                function t() {
                  var e,
                    n =
                      arguments.length > 0 && void 0 !== arguments[0]
                        ? arguments[0]
                        : new _i(),
                    i =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : new _i();
                  return (
                    f(this, t),
                    ((e = c(this, h(t).call(this))).type = "LineCurve3"),
                    (e.isLineCurve3 = !0),
                    (e.v1 = n),
                    (e.v2 = i),
                    e
                  );
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "getPoint",
                      value: function (e) {
                        var t =
                            arguments.length > 1 && void 0 !== arguments[1]
                              ? arguments[1]
                              : new _i(),
                          n = t;
                        return (
                          1 === e
                            ? n.copy(this.v2)
                            : (n.copy(this.v2).sub(this.v1),
                              n.multiplyScalar(e).add(this.v1)),
                          n
                        );
                      },
                    },
                    {
                      key: "getPointAt",
                      value: function (e, t) {
                        return this.getPoint(e, t);
                      },
                    },
                    {
                      key: "copy",
                      value: function (e) {
                        return (
                          l(h(t.prototype), "copy", this).call(this, e),
                          this.v1.copy(e.v1),
                          this.v2.copy(e.v2),
                          this
                        );
                      },
                    },
                    {
                      key: "toJSON",
                      value: function () {
                        var e = l(h(t.prototype), "toJSON", this).call(this);
                        return (
                          (e.v1 = this.v1.toArray()),
                          (e.v2 = this.v2.toArray()),
                          e
                        );
                      },
                    },
                    {
                      key: "fromJSON",
                      value: function (e) {
                        return (
                          l(h(t.prototype), "fromJSON", this).call(this, e),
                          this.v1.fromArray(e.v1),
                          this.v2.fromArray(e.v2),
                          this
                        );
                      },
                    },
                  ]),
                  t
                );
              })(sh),
              Sh = (function (e) {
                function t() {
                  var e,
                    n =
                      arguments.length > 0 && void 0 !== arguments[0]
                        ? arguments[0]
                        : new ui(),
                    i =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : new ui(),
                    r =
                      arguments.length > 2 && void 0 !== arguments[2]
                        ? arguments[2]
                        : new ui();
                  return (
                    f(this, t),
                    ((e = c(this, h(t).call(this))).type =
                      "QuadraticBezierCurve"),
                    (e.v0 = n),
                    (e.v1 = i),
                    (e.v2 = r),
                    e
                  );
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "getPoint",
                      value: function (e) {
                        var t =
                            arguments.length > 1 && void 0 !== arguments[1]
                              ? arguments[1]
                              : new ui(),
                          n = t,
                          i = this.v0,
                          r = this.v1,
                          a = this.v2;
                        return (
                          n.set(gh(e, i.x, r.x, a.x), gh(e, i.y, r.y, a.y)), n
                        );
                      },
                    },
                    {
                      key: "copy",
                      value: function (e) {
                        return (
                          l(h(t.prototype), "copy", this).call(this, e),
                          this.v0.copy(e.v0),
                          this.v1.copy(e.v1),
                          this.v2.copy(e.v2),
                          this
                        );
                      },
                    },
                    {
                      key: "toJSON",
                      value: function () {
                        var e = l(h(t.prototype), "toJSON", this).call(this);
                        return (
                          (e.v0 = this.v0.toArray()),
                          (e.v1 = this.v1.toArray()),
                          (e.v2 = this.v2.toArray()),
                          e
                        );
                      },
                    },
                    {
                      key: "fromJSON",
                      value: function (e) {
                        return (
                          l(h(t.prototype), "fromJSON", this).call(this, e),
                          this.v0.fromArray(e.v0),
                          this.v1.fromArray(e.v1),
                          this.v2.fromArray(e.v2),
                          this
                        );
                      },
                    },
                  ]),
                  t
                );
              })(sh);
            Sh.prototype.isQuadraticBezierCurve = !0;
            var Eh = (function (e) {
              function t() {
                var e,
                  n =
                    arguments.length > 0 && void 0 !== arguments[0]
                      ? arguments[0]
                      : new _i(),
                  i =
                    arguments.length > 1 && void 0 !== arguments[1]
                      ? arguments[1]
                      : new _i(),
                  r =
                    arguments.length > 2 && void 0 !== arguments[2]
                      ? arguments[2]
                      : new _i();
                return (
                  f(this, t),
                  ((e = c(this, h(t).call(this))).type =
                    "QuadraticBezierCurve3"),
                  (e.v0 = n),
                  (e.v1 = i),
                  (e.v2 = r),
                  e
                );
              }
              return (
                p(t, e),
                m(t, [
                  {
                    key: "getPoint",
                    value: function (e) {
                      var t =
                          arguments.length > 1 && void 0 !== arguments[1]
                            ? arguments[1]
                            : new _i(),
                        n = t,
                        i = this.v0,
                        r = this.v1,
                        a = this.v2;
                      return (
                        n.set(
                          gh(e, i.x, r.x, a.x),
                          gh(e, i.y, r.y, a.y),
                          gh(e, i.z, r.z, a.z)
                        ),
                        n
                      );
                    },
                  },
                  {
                    key: "copy",
                    value: function (e) {
                      return (
                        l(h(t.prototype), "copy", this).call(this, e),
                        this.v0.copy(e.v0),
                        this.v1.copy(e.v1),
                        this.v2.copy(e.v2),
                        this
                      );
                    },
                  },
                  {
                    key: "toJSON",
                    value: function () {
                      var e = l(h(t.prototype), "toJSON", this).call(this);
                      return (
                        (e.v0 = this.v0.toArray()),
                        (e.v1 = this.v1.toArray()),
                        (e.v2 = this.v2.toArray()),
                        e
                      );
                    },
                  },
                  {
                    key: "fromJSON",
                    value: function (e) {
                      return (
                        l(h(t.prototype), "fromJSON", this).call(this, e),
                        this.v0.fromArray(e.v0),
                        this.v1.fromArray(e.v1),
                        this.v2.fromArray(e.v2),
                        this
                      );
                    },
                  },
                ]),
                t
              );
            })(sh);
            Eh.prototype.isQuadraticBezierCurve3 = !0;
            var Mh = (function (e) {
              function t() {
                var e,
                  n =
                    arguments.length > 0 && void 0 !== arguments[0]
                      ? arguments[0]
                      : [];
                return (
                  f(this, t),
                  ((e = c(this, h(t).call(this))).type = "SplineCurve"),
                  (e.points = n),
                  e
                );
              }
              return (
                p(t, e),
                m(t, [
                  {
                    key: "getPoint",
                    value: function (e) {
                      var t =
                          arguments.length > 1 && void 0 !== arguments[1]
                            ? arguments[1]
                            : new ui(),
                        n = t,
                        i = this.points,
                        r = (i.length - 1) * e,
                        a = Math.floor(r),
                        o = r - a,
                        s = i[0 === a ? a : a - 1],
                        l = i[a],
                        u = i[a > i.length - 2 ? i.length - 1 : a + 1],
                        c = i[a > i.length - 3 ? i.length - 1 : a + 2];
                      return (
                        n.set(
                          vh(o, s.x, l.x, u.x, c.x),
                          vh(o, s.y, l.y, u.y, c.y)
                        ),
                        n
                      );
                    },
                  },
                  {
                    key: "copy",
                    value: function (e) {
                      l(h(t.prototype), "copy", this).call(this, e),
                        (this.points = []);
                      for (var n = 0, i = e.points.length; n < i; n++) {
                        var r = e.points[n];
                        this.points.push(r.clone());
                      }
                      return this;
                    },
                  },
                  {
                    key: "toJSON",
                    value: function () {
                      var e = l(h(t.prototype), "toJSON", this).call(this);
                      e.points = [];
                      for (var n = 0, i = this.points.length; n < i; n++) {
                        var r = this.points[n];
                        e.points.push(r.toArray());
                      }
                      return e;
                    },
                  },
                  {
                    key: "fromJSON",
                    value: function (e) {
                      l(h(t.prototype), "fromJSON", this).call(this, e),
                        (this.points = []);
                      for (var n = 0, i = e.points.length; n < i; n++) {
                        var r = e.points[n];
                        this.points.push(new ui().fromArray(r));
                      }
                      return this;
                    },
                  },
                ]),
                t
              );
            })(sh);
            Mh.prototype.isSplineCurve = !0;
            var Ah = Object.freeze({
                __proto__: null,
                ArcCurve: uh,
                CatmullRomCurve3: mh,
                CubicBezierCurve: xh,
                CubicBezierCurve3: bh,
                EllipseCurve: lh,
                LineCurve: _h,
                LineCurve3: wh,
                QuadraticBezierCurve: Sh,
                QuadraticBezierCurve3: Eh,
                SplineCurve: Mh,
              }),
              Th = (function (e) {
                function t() {
                  var e;
                  return (
                    f(this, t),
                    ((e = c(this, h(t).call(this))).type = "CurvePath"),
                    (e.curves = []),
                    (e.autoClose = !1),
                    e
                  );
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "add",
                      value: function (e) {
                        this.curves.push(e);
                      },
                    },
                    {
                      key: "closePath",
                      value: function () {
                        var e = this.curves[0].getPoint(0),
                          t = this.curves[this.curves.length - 1].getPoint(1);
                        e.equals(t) || this.curves.push(new _h(t, e));
                      },
                    },
                    {
                      key: "getPoint",
                      value: function (e) {
                        for (
                          var t = e * this.getLength(),
                            n = this.getCurveLengths(),
                            i = 0;
                          i < n.length;

                        ) {
                          if (n[i] >= t) {
                            var r = n[i] - t,
                              a = this.curves[i],
                              o = a.getLength(),
                              s = 0 === o ? 0 : 1 - r / o;
                            return a.getPointAt(s);
                          }
                          i++;
                        }
                        return null;
                      },
                    },
                    {
                      key: "getLength",
                      value: function () {
                        var e = this.getCurveLengths();
                        return e[e.length - 1];
                      },
                    },
                    {
                      key: "updateArcLengths",
                      value: function () {
                        (this.needsUpdate = !0),
                          (this.cacheLengths = null),
                          this.getCurveLengths();
                      },
                    },
                    {
                      key: "getCurveLengths",
                      value: function () {
                        if (
                          this.cacheLengths &&
                          this.cacheLengths.length === this.curves.length
                        )
                          return this.cacheLengths;
                        for (
                          var e = [], t = 0, n = 0, i = this.curves.length;
                          n < i;
                          n++
                        )
                          (t += this.curves[n].getLength()), e.push(t);
                        return (this.cacheLengths = e), e;
                      },
                    },
                    {
                      key: "getSpacedPoints",
                      value: function () {
                        for (
                          var e =
                              arguments.length > 0 && void 0 !== arguments[0]
                                ? arguments[0]
                                : 40,
                            t = [],
                            n = 0;
                          n <= e;
                          n++
                        )
                          t.push(this.getPoint(n / e));
                        return this.autoClose && t.push(t[0]), t;
                      },
                    },
                    {
                      key: "getPoints",
                      value: function () {
                        for (
                          var e,
                            t =
                              arguments.length > 0 && void 0 !== arguments[0]
                                ? arguments[0]
                                : 12,
                            n = [],
                            i = 0,
                            r = this.curves;
                          i < r.length;
                          i++
                        )
                          for (
                            var a = r[i],
                              o =
                                a && a.isEllipseCurve
                                  ? 2 * t
                                  : a && (a.isLineCurve || a.isLineCurve3)
                                  ? 1
                                  : a && a.isSplineCurve
                                  ? t * a.points.length
                                  : t,
                              s = a.getPoints(o),
                              l = 0;
                            l < s.length;
                            l++
                          ) {
                            var u = s[l];
                            (e && e.equals(u)) || (n.push(u), (e = u));
                          }
                        return (
                          this.autoClose &&
                            n.length > 1 &&
                            !n[n.length - 1].equals(n[0]) &&
                            n.push(n[0]),
                          n
                        );
                      },
                    },
                    {
                      key: "copy",
                      value: function (e) {
                        l(h(t.prototype), "copy", this).call(this, e),
                          (this.curves = []);
                        for (var n = 0, i = e.curves.length; n < i; n++) {
                          var r = e.curves[n];
                          this.curves.push(r.clone());
                        }
                        return (this.autoClose = e.autoClose), this;
                      },
                    },
                    {
                      key: "toJSON",
                      value: function () {
                        var e = l(h(t.prototype), "toJSON", this).call(this);
                        (e.autoClose = this.autoClose), (e.curves = []);
                        for (var n = 0, i = this.curves.length; n < i; n++) {
                          var r = this.curves[n];
                          e.curves.push(r.toJSON());
                        }
                        return e;
                      },
                    },
                    {
                      key: "fromJSON",
                      value: function (e) {
                        l(h(t.prototype), "fromJSON", this).call(this, e),
                          (this.autoClose = e.autoClose),
                          (this.curves = []);
                        for (var n = 0, i = e.curves.length; n < i; n++) {
                          var r = e.curves[n];
                          this.curves.push(new Ah[r.type]().fromJSON(r));
                        }
                        return this;
                      },
                    },
                  ]),
                  t
                );
              })(sh),
              Ch = (function (e) {
                function t(e) {
                  var n;
                  return (
                    f(this, t),
                    ((n = c(this, h(t).call(this))).type = "Path"),
                    (n.currentPoint = new ui()),
                    e && n.setFromPoints(e),
                    n
                  );
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "setFromPoints",
                      value: function (e) {
                        this.moveTo(e[0].x, e[0].y);
                        for (var t = 1, n = e.length; t < n; t++)
                          this.lineTo(e[t].x, e[t].y);
                        return this;
                      },
                    },
                    {
                      key: "moveTo",
                      value: function (e, t) {
                        return this.currentPoint.set(e, t), this;
                      },
                    },
                    {
                      key: "lineTo",
                      value: function (e, t) {
                        var n = new _h(this.currentPoint.clone(), new ui(e, t));
                        return (
                          this.curves.push(n), this.currentPoint.set(e, t), this
                        );
                      },
                    },
                    {
                      key: "quadraticCurveTo",
                      value: function (e, t, n, i) {
                        var r = new Sh(
                          this.currentPoint.clone(),
                          new ui(e, t),
                          new ui(n, i)
                        );
                        return (
                          this.curves.push(r), this.currentPoint.set(n, i), this
                        );
                      },
                    },
                    {
                      key: "bezierCurveTo",
                      value: function (e, t, n, i, r, a) {
                        var o = new xh(
                          this.currentPoint.clone(),
                          new ui(e, t),
                          new ui(n, i),
                          new ui(r, a)
                        );
                        return (
                          this.curves.push(o), this.currentPoint.set(r, a), this
                        );
                      },
                    },
                    {
                      key: "splineThru",
                      value: function (e) {
                        var t = [this.currentPoint.clone()].concat(e),
                          n = new Mh(t);
                        return (
                          this.curves.push(n),
                          this.currentPoint.copy(e[e.length - 1]),
                          this
                        );
                      },
                    },
                    {
                      key: "arc",
                      value: function (e, t, n, i, r, a) {
                        var o = this.currentPoint.x,
                          s = this.currentPoint.y;
                        return this.absarc(e + o, t + s, n, i, r, a), this;
                      },
                    },
                    {
                      key: "absarc",
                      value: function (e, t, n, i, r, a) {
                        return this.absellipse(e, t, n, n, i, r, a), this;
                      },
                    },
                    {
                      key: "ellipse",
                      value: function (e, t, n, i, r, a, o, s) {
                        var l = this.currentPoint.x,
                          u = this.currentPoint.y;
                        return (
                          this.absellipse(e + l, t + u, n, i, r, a, o, s), this
                        );
                      },
                    },
                    {
                      key: "absellipse",
                      value: function (e, t, n, i, r, a, o, s) {
                        var l = new lh(e, t, n, i, r, a, o, s);
                        if (this.curves.length > 0) {
                          var u = l.getPoint(0);
                          u.equals(this.currentPoint) || this.lineTo(u.x, u.y);
                        }
                        this.curves.push(l);
                        var c = l.getPoint(1);
                        return this.currentPoint.copy(c), this;
                      },
                    },
                    {
                      key: "copy",
                      value: function (e) {
                        return (
                          l(h(t.prototype), "copy", this).call(this, e),
                          this.currentPoint.copy(e.currentPoint),
                          this
                        );
                      },
                    },
                    {
                      key: "toJSON",
                      value: function () {
                        var e = l(h(t.prototype), "toJSON", this).call(this);
                        return (
                          (e.currentPoint = this.currentPoint.toArray()), e
                        );
                      },
                    },
                    {
                      key: "fromJSON",
                      value: function (e) {
                        return (
                          l(h(t.prototype), "fromJSON", this).call(this, e),
                          this.currentPoint.fromArray(e.currentPoint),
                          this
                        );
                      },
                    },
                  ]),
                  t
                );
              })(Th),
              kh = (function (e) {
                function t(e) {
                  var n;
                  return (
                    f(this, t),
                    ((n = c(this, h(t).call(this, e))).uuid = ti()),
                    (n.type = "Shape"),
                    (n.holes = []),
                    n
                  );
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "getPointsHoles",
                      value: function (e) {
                        for (
                          var t = [], n = 0, i = this.holes.length;
                          n < i;
                          n++
                        )
                          t[n] = this.holes[n].getPoints(e);
                        return t;
                      },
                    },
                    {
                      key: "extractPoints",
                      value: function (e) {
                        return {
                          shape: this.getPoints(e),
                          holes: this.getPointsHoles(e),
                        };
                      },
                    },
                    {
                      key: "copy",
                      value: function (e) {
                        l(h(t.prototype), "copy", this).call(this, e),
                          (this.holes = []);
                        for (var n = 0, i = e.holes.length; n < i; n++) {
                          var r = e.holes[n];
                          this.holes.push(r.clone());
                        }
                        return this;
                      },
                    },
                    {
                      key: "toJSON",
                      value: function () {
                        var e = l(h(t.prototype), "toJSON", this).call(this);
                        (e.uuid = this.uuid), (e.holes = []);
                        for (var n = 0, i = this.holes.length; n < i; n++) {
                          var r = this.holes[n];
                          e.holes.push(r.toJSON());
                        }
                        return e;
                      },
                    },
                    {
                      key: "fromJSON",
                      value: function (e) {
                        l(h(t.prototype), "fromJSON", this).call(this, e),
                          (this.uuid = e.uuid),
                          (this.holes = []);
                        for (var n = 0, i = e.holes.length; n < i; n++) {
                          var r = e.holes[n];
                          this.holes.push(new Ch().fromJSON(r));
                        }
                        return this;
                      },
                    },
                  ]),
                  t
                );
              })(Ch),
              Ph = (function (e) {
                function t(e) {
                  var n,
                    i =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : 1;
                  return (
                    f(this, t),
                    ((n = c(this, h(t).call(this))).type = "Light"),
                    (n.color = new qr(e)),
                    (n.intensity = i),
                    n
                  );
                }
                return (
                  p(t, e),
                  m(t, [
                    { key: "dispose", value: function () {} },
                    {
                      key: "copy",
                      value: function (e) {
                        return (
                          l(h(t.prototype), "copy", this).call(this, e),
                          this.color.copy(e.color),
                          (this.intensity = e.intensity),
                          this
                        );
                      },
                    },
                    {
                      key: "toJSON",
                      value: function (e) {
                        var n = l(h(t.prototype), "toJSON", this).call(this, e);
                        return (
                          (n.object.color = this.color.getHex()),
                          (n.object.intensity = this.intensity),
                          void 0 !== this.groundColor &&
                            (n.object.groundColor = this.groundColor.getHex()),
                          void 0 !== this.distance &&
                            (n.object.distance = this.distance),
                          void 0 !== this.angle &&
                            (n.object.angle = this.angle),
                          void 0 !== this.decay &&
                            (n.object.decay = this.decay),
                          void 0 !== this.penumbra &&
                            (n.object.penumbra = this.penumbra),
                          void 0 !== this.shadow &&
                            (n.object.shadow = this.shadow.toJSON()),
                          n
                        );
                      },
                    },
                  ]),
                  t
                );
              })(Sr);
            Ph.prototype.isLight = !0;
            var Lh = (function (e) {
              function t(e, n, i) {
                var r;
                return (
                  f(this, t),
                  ((r = c(this, h(t).call(this, e, i))).type =
                    "HemisphereLight"),
                  r.position.copy(Sr.DefaultUp),
                  r.updateMatrix(),
                  (r.groundColor = new qr(n)),
                  r
                );
              }
              return (
                p(t, e),
                m(t, [
                  {
                    key: "copy",
                    value: function (e) {
                      return (
                        Ph.prototype.copy.call(this, e),
                        this.groundColor.copy(e.groundColor),
                        this
                      );
                    },
                  },
                ]),
                t
              );
            })(Ph);
            Lh.prototype.isHemisphereLight = !0;
            var Rh = new Ki(),
              Ih = new _i(),
              Fh = new _i(),
              Nh = (function () {
                function e(t) {
                  f(this, e),
                    (this.camera = t),
                    (this.bias = 0),
                    (this.normalBias = 0),
                    (this.radius = 1),
                    (this.mapSize = new ui(512, 512)),
                    (this.map = null),
                    (this.mapPass = null),
                    (this.matrix = new Ki()),
                    (this.autoUpdate = !0),
                    (this.needsUpdate = !1),
                    (this._frustum = new Za()),
                    (this._frameExtents = new ui(1, 1)),
                    (this._viewportCount = 1),
                    (this._viewports = [new vi(0, 0, 1, 1)]);
                }
                return (
                  m(e, [
                    {
                      key: "getViewportCount",
                      value: function () {
                        return this._viewportCount;
                      },
                    },
                    {
                      key: "getFrustum",
                      value: function () {
                        return this._frustum;
                      },
                    },
                    {
                      key: "updateMatrices",
                      value: function (e) {
                        var t = this.camera,
                          n = this.matrix;
                        Ih.setFromMatrixPosition(e.matrixWorld),
                          t.position.copy(Ih),
                          Fh.setFromMatrixPosition(e.target.matrixWorld),
                          t.lookAt(Fh),
                          t.updateMatrixWorld(),
                          Rh.multiplyMatrices(
                            t.projectionMatrix,
                            t.matrixWorldInverse
                          ),
                          this._frustum.setFromProjectionMatrix(Rh),
                          n.set(
                            0.5,
                            0,
                            0,
                            0.5,
                            0,
                            0.5,
                            0,
                            0.5,
                            0,
                            0,
                            0.5,
                            0.5,
                            0,
                            0,
                            0,
                            1
                          ),
                          n.multiply(t.projectionMatrix),
                          n.multiply(t.matrixWorldInverse);
                      },
                    },
                    {
                      key: "getViewport",
                      value: function (e) {
                        return this._viewports[e];
                      },
                    },
                    {
                      key: "getFrameExtents",
                      value: function () {
                        return this._frameExtents;
                      },
                    },
                    {
                      key: "dispose",
                      value: function () {
                        this.map && this.map.dispose(),
                          this.mapPass && this.mapPass.dispose();
                      },
                    },
                    {
                      key: "copy",
                      value: function (e) {
                        return (
                          (this.camera = e.camera.clone()),
                          (this.bias = e.bias),
                          (this.radius = e.radius),
                          this.mapSize.copy(e.mapSize),
                          this
                        );
                      },
                    },
                    {
                      key: "clone",
                      value: function () {
                        return new this.constructor().copy(this);
                      },
                    },
                    {
                      key: "toJSON",
                      value: function () {
                        var e = {};
                        return (
                          0 !== this.bias && (e.bias = this.bias),
                          0 !== this.normalBias &&
                            (e.normalBias = this.normalBias),
                          1 !== this.radius && (e.radius = this.radius),
                          (512 === this.mapSize.x && 512 === this.mapSize.y) ||
                            (e.mapSize = this.mapSize.toArray()),
                          (e.camera = this.camera.toJSON(!1).object),
                          delete e.camera.matrix,
                          e
                        );
                      },
                    },
                  ]),
                  e
                );
              })(),
              Oh = (function (e) {
                function t() {
                  var e;
                  return (
                    f(this, t),
                    ((e = c(
                      this,
                      h(t).call(this, new Ha(50, 1, 0.5, 500))
                    )).focus = 1),
                    e
                  );
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "updateMatrices",
                      value: function (e) {
                        var n = this.camera,
                          i = 2 * ei * e.angle * this.focus,
                          r = this.mapSize.width / this.mapSize.height,
                          a = e.distance || n.far;
                        (i === n.fov && r === n.aspect && a === n.far) ||
                          ((n.fov = i),
                          (n.aspect = r),
                          (n.far = a),
                          n.updateProjectionMatrix()),
                          l(h(t.prototype), "updateMatrices", this).call(
                            this,
                            e
                          );
                      },
                    },
                    {
                      key: "copy",
                      value: function (e) {
                        return (
                          l(h(t.prototype), "copy", this).call(this, e),
                          (this.focus = e.focus),
                          this
                        );
                      },
                    },
                  ]),
                  t
                );
              })(Nh);
            Oh.prototype.isSpotLightShadow = !0;
            var Bh = (function (e) {
              function t(e, n) {
                var i,
                  r =
                    arguments.length > 2 && void 0 !== arguments[2]
                      ? arguments[2]
                      : 0,
                  a =
                    arguments.length > 3 && void 0 !== arguments[3]
                      ? arguments[3]
                      : Math.PI / 3,
                  o =
                    arguments.length > 4 && void 0 !== arguments[4]
                      ? arguments[4]
                      : 0,
                  s =
                    arguments.length > 5 && void 0 !== arguments[5]
                      ? arguments[5]
                      : 1;
                return (
                  f(this, t),
                  ((i = c(this, h(t).call(this, e, n))).type = "SpotLight"),
                  i.position.copy(Sr.DefaultUp),
                  i.updateMatrix(),
                  (i.target = new Sr()),
                  (i.distance = r),
                  (i.angle = a),
                  (i.penumbra = o),
                  (i.decay = s),
                  (i.shadow = new Oh()),
                  i
                );
              }
              return (
                p(t, e),
                m(t, [
                  {
                    key: "dispose",
                    value: function () {
                      this.shadow.dispose();
                    },
                  },
                  {
                    key: "copy",
                    value: function (e) {
                      return (
                        l(h(t.prototype), "copy", this).call(this, e),
                        (this.distance = e.distance),
                        (this.angle = e.angle),
                        (this.penumbra = e.penumbra),
                        (this.decay = e.decay),
                        (this.target = e.target.clone()),
                        (this.shadow = e.shadow.clone()),
                        this
                      );
                    },
                  },
                  {
                    key: "power",
                    get: function () {
                      return this.intensity * Math.PI;
                    },
                    set: function (e) {
                      this.intensity = e / Math.PI;
                    },
                  },
                ]),
                t
              );
            })(Ph);
            Bh.prototype.isSpotLight = !0;
            var Dh = new Ki(),
              Vh = new _i(),
              Uh = new _i(),
              zh = (function (e) {
                function t() {
                  var e;
                  return (
                    f(this, t),
                    ((e = c(
                      this,
                      h(t).call(this, new Ha(90, 1, 0.5, 500))
                    ))._frameExtents = new ui(4, 2)),
                    (e._viewportCount = 6),
                    (e._viewports = [
                      new vi(2, 1, 1, 1),
                      new vi(0, 1, 1, 1),
                      new vi(3, 1, 1, 1),
                      new vi(1, 1, 1, 1),
                      new vi(3, 0, 1, 1),
                      new vi(1, 0, 1, 1),
                    ]),
                    (e._cubeDirections = [
                      new _i(1, 0, 0),
                      new _i(-1, 0, 0),
                      new _i(0, 0, 1),
                      new _i(0, 0, -1),
                      new _i(0, 1, 0),
                      new _i(0, -1, 0),
                    ]),
                    (e._cubeUps = [
                      new _i(0, 1, 0),
                      new _i(0, 1, 0),
                      new _i(0, 1, 0),
                      new _i(0, 1, 0),
                      new _i(0, 0, 1),
                      new _i(0, 0, -1),
                    ]),
                    e
                  );
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "updateMatrices",
                      value: function (e) {
                        var t =
                            arguments.length > 1 && void 0 !== arguments[1]
                              ? arguments[1]
                              : 0,
                          n = this.camera,
                          i = this.matrix,
                          r = e.distance || n.far;
                        r !== n.far &&
                          ((n.far = r), n.updateProjectionMatrix()),
                          Vh.setFromMatrixPosition(e.matrixWorld),
                          n.position.copy(Vh),
                          Uh.copy(n.position),
                          Uh.add(this._cubeDirections[t]),
                          n.up.copy(this._cubeUps[t]),
                          n.lookAt(Uh),
                          n.updateMatrixWorld(),
                          i.makeTranslation(-Vh.x, -Vh.y, -Vh.z),
                          Dh.multiplyMatrices(
                            n.projectionMatrix,
                            n.matrixWorldInverse
                          ),
                          this._frustum.setFromProjectionMatrix(Dh);
                      },
                    },
                  ]),
                  t
                );
              })(Nh);
            zh.prototype.isPointLightShadow = !0;
            var jh = (function (e) {
              function t(e, n) {
                var i,
                  r =
                    arguments.length > 2 && void 0 !== arguments[2]
                      ? arguments[2]
                      : 0,
                  a =
                    arguments.length > 3 && void 0 !== arguments[3]
                      ? arguments[3]
                      : 1;
                return (
                  f(this, t),
                  ((i = c(this, h(t).call(this, e, n))).type = "PointLight"),
                  (i.distance = r),
                  (i.decay = a),
                  (i.shadow = new zh()),
                  i
                );
              }
              return (
                p(t, e),
                m(t, [
                  {
                    key: "dispose",
                    value: function () {
                      this.shadow.dispose();
                    },
                  },
                  {
                    key: "copy",
                    value: function (e) {
                      return (
                        l(h(t.prototype), "copy", this).call(this, e),
                        (this.distance = e.distance),
                        (this.decay = e.decay),
                        (this.shadow = e.shadow.clone()),
                        this
                      );
                    },
                  },
                  {
                    key: "power",
                    get: function () {
                      return 4 * this.intensity * Math.PI;
                    },
                    set: function (e) {
                      this.intensity = e / (4 * Math.PI);
                    },
                  },
                ]),
                t
              );
            })(Ph);
            jh.prototype.isPointLight = !0;
            var Gh = (function (e) {
              function t() {
                var e,
                  n =
                    arguments.length > 0 && void 0 !== arguments[0]
                      ? arguments[0]
                      : -1,
                  i =
                    arguments.length > 1 && void 0 !== arguments[1]
                      ? arguments[1]
                      : 1,
                  r =
                    arguments.length > 2 && void 0 !== arguments[2]
                      ? arguments[2]
                      : 1,
                  a =
                    arguments.length > 3 && void 0 !== arguments[3]
                      ? arguments[3]
                      : -1,
                  o =
                    arguments.length > 4 && void 0 !== arguments[4]
                      ? arguments[4]
                      : 0.1,
                  s =
                    arguments.length > 5 && void 0 !== arguments[5]
                      ? arguments[5]
                      : 2e3;
                return (
                  f(this, t),
                  ((e = c(this, h(t).call(this))).type = "OrthographicCamera"),
                  (e.zoom = 1),
                  (e.view = null),
                  (e.left = n),
                  (e.right = i),
                  (e.top = r),
                  (e.bottom = a),
                  (e.near = o),
                  (e.far = s),
                  e.updateProjectionMatrix(),
                  e
                );
              }
              return (
                p(t, e),
                m(t, [
                  {
                    key: "copy",
                    value: function (e, n) {
                      return (
                        l(h(t.prototype), "copy", this).call(this, e, n),
                        (this.left = e.left),
                        (this.right = e.right),
                        (this.top = e.top),
                        (this.bottom = e.bottom),
                        (this.near = e.near),
                        (this.far = e.far),
                        (this.zoom = e.zoom),
                        (this.view =
                          null === e.view ? null : Object.assign({}, e.view)),
                        this
                      );
                    },
                  },
                  {
                    key: "setViewOffset",
                    value: function (e, t, n, i, r, a) {
                      null === this.view &&
                        (this.view = {
                          enabled: !0,
                          fullWidth: 1,
                          fullHeight: 1,
                          offsetX: 0,
                          offsetY: 0,
                          width: 1,
                          height: 1,
                        }),
                        (this.view.enabled = !0),
                        (this.view.fullWidth = e),
                        (this.view.fullHeight = t),
                        (this.view.offsetX = n),
                        (this.view.offsetY = i),
                        (this.view.width = r),
                        (this.view.height = a),
                        this.updateProjectionMatrix();
                    },
                  },
                  {
                    key: "clearViewOffset",
                    value: function () {
                      null !== this.view && (this.view.enabled = !1),
                        this.updateProjectionMatrix();
                    },
                  },
                  {
                    key: "updateProjectionMatrix",
                    value: function () {
                      var e = (this.right - this.left) / (2 * this.zoom),
                        t = (this.top - this.bottom) / (2 * this.zoom),
                        n = (this.right + this.left) / 2,
                        i = (this.top + this.bottom) / 2,
                        r = n - e,
                        a = n + e,
                        o = i + t,
                        s = i - t;
                      if (null !== this.view && this.view.enabled) {
                        var l =
                            (this.right - this.left) /
                            this.view.fullWidth /
                            this.zoom,
                          u =
                            (this.top - this.bottom) /
                            this.view.fullHeight /
                            this.zoom;
                        (a =
                          (r += l * this.view.offsetX) + l * this.view.width),
                          (s =
                            (o -= u * this.view.offsetY) -
                            u * this.view.height);
                      }
                      this.projectionMatrix.makeOrthographic(
                        r,
                        a,
                        o,
                        s,
                        this.near,
                        this.far
                      ),
                        this.projectionMatrixInverse
                          .copy(this.projectionMatrix)
                          .invert();
                    },
                  },
                  {
                    key: "toJSON",
                    value: function (e) {
                      var n = l(h(t.prototype), "toJSON", this).call(this, e);
                      return (
                        (n.object.zoom = this.zoom),
                        (n.object.left = this.left),
                        (n.object.right = this.right),
                        (n.object.top = this.top),
                        (n.object.bottom = this.bottom),
                        (n.object.near = this.near),
                        (n.object.far = this.far),
                        null !== this.view &&
                          (n.object.view = Object.assign({}, this.view)),
                        n
                      );
                    },
                  },
                ]),
                t
              );
            })(Ga);
            Gh.prototype.isOrthographicCamera = !0;
            var Hh = (function (e) {
              function t() {
                return (
                  f(this, t),
                  c(this, h(t).call(this, new Gh(-5, 5, 5, -5, 0.5, 500)))
                );
              }
              return p(t, e), t;
            })(Nh);
            Hh.prototype.isDirectionalLightShadow = !0;
            var Wh = (function (e) {
              function t(e, n) {
                var i;
                return (
                  f(this, t),
                  ((i = c(this, h(t).call(this, e, n))).type =
                    "DirectionalLight"),
                  i.position.copy(Sr.DefaultUp),
                  i.updateMatrix(),
                  (i.target = new Sr()),
                  (i.shadow = new Hh()),
                  i
                );
              }
              return (
                p(t, e),
                m(t, [
                  {
                    key: "dispose",
                    value: function () {
                      this.shadow.dispose();
                    },
                  },
                  {
                    key: "copy",
                    value: function (e) {
                      return (
                        l(h(t.prototype), "copy", this).call(this, e),
                        (this.target = e.target.clone()),
                        (this.shadow = e.shadow.clone()),
                        this
                      );
                    },
                  },
                ]),
                t
              );
            })(Ph);
            Wh.prototype.isDirectionalLight = !0;
            var Yh = (function (e) {
              function t(e, n) {
                var i;
                return (
                  f(this, t),
                  ((i = c(this, h(t).call(this, e, n))).type = "AmbientLight"),
                  i
                );
              }
              return p(t, e), t;
            })(Ph);
            Yh.prototype.isAmbientLight = !0;
            var qh = (function (e) {
              function t(e, n) {
                var i,
                  r =
                    arguments.length > 2 && void 0 !== arguments[2]
                      ? arguments[2]
                      : 10,
                  a =
                    arguments.length > 3 && void 0 !== arguments[3]
                      ? arguments[3]
                      : 10;
                return (
                  f(this, t),
                  ((i = c(this, h(t).call(this, e, n))).type = "RectAreaLight"),
                  (i.width = r),
                  (i.height = a),
                  i
                );
              }
              return (
                p(t, e),
                m(t, [
                  {
                    key: "copy",
                    value: function (e) {
                      return (
                        l(h(t.prototype), "copy", this).call(this, e),
                        (this.width = e.width),
                        (this.height = e.height),
                        this
                      );
                    },
                  },
                  {
                    key: "toJSON",
                    value: function (e) {
                      var n = l(h(t.prototype), "toJSON", this).call(this, e);
                      return (
                        (n.object.width = this.width),
                        (n.object.height = this.height),
                        n
                      );
                    },
                  },
                ]),
                t
              );
            })(Ph);
            qh.prototype.isRectAreaLight = !0;
            var Xh = (function () {
              function e() {
                f(this, e), (this.coefficients = []);
                for (var t = 0; t < 9; t++) this.coefficients.push(new _i());
              }
              return (
                m(
                  e,
                  [
                    {
                      key: "set",
                      value: function (e) {
                        for (var t = 0; t < 9; t++)
                          this.coefficients[t].copy(e[t]);
                        return this;
                      },
                    },
                    {
                      key: "zero",
                      value: function () {
                        for (var e = 0; e < 9; e++)
                          this.coefficients[e].set(0, 0, 0);
                        return this;
                      },
                    },
                    {
                      key: "getAt",
                      value: function (e, t) {
                        var n = e.x,
                          i = e.y,
                          r = e.z,
                          a = this.coefficients;
                        return (
                          t.copy(a[0]).multiplyScalar(0.282095),
                          t.addScaledVector(a[1], 0.488603 * i),
                          t.addScaledVector(a[2], 0.488603 * r),
                          t.addScaledVector(a[3], 0.488603 * n),
                          t.addScaledVector(a[4], n * i * 1.092548),
                          t.addScaledVector(a[5], i * r * 1.092548),
                          t.addScaledVector(a[6], 0.315392 * (3 * r * r - 1)),
                          t.addScaledVector(a[7], n * r * 1.092548),
                          t.addScaledVector(a[8], 0.546274 * (n * n - i * i)),
                          t
                        );
                      },
                    },
                    {
                      key: "getIrradianceAt",
                      value: function (e, t) {
                        var n = e.x,
                          i = e.y,
                          r = e.z,
                          a = this.coefficients;
                        return (
                          t.copy(a[0]).multiplyScalar(0.886227),
                          t.addScaledVector(a[1], 1.023328 * i),
                          t.addScaledVector(a[2], 1.023328 * r),
                          t.addScaledVector(a[3], 1.023328 * n),
                          t.addScaledVector(a[4], 0.858086 * n * i),
                          t.addScaledVector(a[5], 0.858086 * i * r),
                          t.addScaledVector(a[6], 0.743125 * r * r - 0.247708),
                          t.addScaledVector(a[7], 0.858086 * n * r),
                          t.addScaledVector(a[8], 0.429043 * (n * n - i * i)),
                          t
                        );
                      },
                    },
                    {
                      key: "add",
                      value: function (e) {
                        for (var t = 0; t < 9; t++)
                          this.coefficients[t].add(e.coefficients[t]);
                        return this;
                      },
                    },
                    {
                      key: "addScaledSH",
                      value: function (e, t) {
                        for (var n = 0; n < 9; n++)
                          this.coefficients[n].addScaledVector(
                            e.coefficients[n],
                            t
                          );
                        return this;
                      },
                    },
                    {
                      key: "scale",
                      value: function (e) {
                        for (var t = 0; t < 9; t++)
                          this.coefficients[t].multiplyScalar(e);
                        return this;
                      },
                    },
                    {
                      key: "lerp",
                      value: function (e, t) {
                        for (var n = 0; n < 9; n++)
                          this.coefficients[n].lerp(e.coefficients[n], t);
                        return this;
                      },
                    },
                    {
                      key: "equals",
                      value: function (e) {
                        for (var t = 0; t < 9; t++)
                          if (!this.coefficients[t].equals(e.coefficients[t]))
                            return !1;
                        return !0;
                      },
                    },
                    {
                      key: "copy",
                      value: function (e) {
                        return this.set(e.coefficients);
                      },
                    },
                    {
                      key: "clone",
                      value: function () {
                        return new this.constructor().copy(this);
                      },
                    },
                    {
                      key: "fromArray",
                      value: function (e) {
                        for (
                          var t =
                              arguments.length > 1 && void 0 !== arguments[1]
                                ? arguments[1]
                                : 0,
                            n = this.coefficients,
                            i = 0;
                          i < 9;
                          i++
                        )
                          n[i].fromArray(e, t + 3 * i);
                        return this;
                      },
                    },
                    {
                      key: "toArray",
                      value: function () {
                        for (
                          var e =
                              arguments.length > 0 && void 0 !== arguments[0]
                                ? arguments[0]
                                : [],
                            t =
                              arguments.length > 1 && void 0 !== arguments[1]
                                ? arguments[1]
                                : 0,
                            n = this.coefficients,
                            i = 0;
                          i < 9;
                          i++
                        )
                          n[i].toArray(e, t + 3 * i);
                        return e;
                      },
                    },
                  ],
                  [
                    {
                      key: "getBasisAt",
                      value: function (e, t) {
                        var n = e.x,
                          i = e.y,
                          r = e.z;
                        (t[0] = 0.282095),
                          (t[1] = 0.488603 * i),
                          (t[2] = 0.488603 * r),
                          (t[3] = 0.488603 * n),
                          (t[4] = 1.092548 * n * i),
                          (t[5] = 1.092548 * i * r),
                          (t[6] = 0.315392 * (3 * r * r - 1)),
                          (t[7] = 1.092548 * n * r),
                          (t[8] = 0.546274 * (n * n - i * i));
                      },
                    },
                  ]
                ),
                e
              );
            })();
            Xh.prototype.isSphericalHarmonics3 = !0;
            var Qh = (function (e) {
              function t() {
                var e,
                  n =
                    arguments.length > 0 && void 0 !== arguments[0]
                      ? arguments[0]
                      : new Xh(),
                  i =
                    arguments.length > 1 && void 0 !== arguments[1]
                      ? arguments[1]
                      : 1;
                return (
                  f(this, t),
                  ((e = c(this, h(t).call(this, void 0, i))).sh = n),
                  e
                );
              }
              return (
                p(t, e),
                m(t, [
                  {
                    key: "copy",
                    value: function (e) {
                      return (
                        l(h(t.prototype), "copy", this).call(this, e),
                        this.sh.copy(e.sh),
                        this
                      );
                    },
                  },
                  {
                    key: "fromJSON",
                    value: function (e) {
                      return (
                        (this.intensity = e.intensity),
                        this.sh.fromArray(e.sh),
                        this
                      );
                    },
                  },
                  {
                    key: "toJSON",
                    value: function (e) {
                      var n = l(h(t.prototype), "toJSON", this).call(this, e);
                      return (n.object.sh = this.sh.toArray()), n;
                    },
                  },
                ]),
                t
              );
            })(Ph);
            Qh.prototype.isLightProbe = !0;
            var Zh = (function (e) {
                function t(e) {
                  var n;
                  return (
                    f(this, t),
                    ((n = c(this, h(t).call(this, e))).textures = {}),
                    n
                  );
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "load",
                      value: function (e, t, n, i) {
                        var r = this,
                          a = new eh(r.manager);
                        a.setPath(r.path),
                          a.setRequestHeader(r.requestHeader),
                          a.setWithCredentials(r.withCredentials),
                          a.load(
                            e,
                            function (n) {
                              try {
                                t(r.parse(JSON.parse(n)));
                              } catch (a) {
                                i ? i(a) : console.error(a),
                                  r.manager.itemError(e);
                              }
                            },
                            n,
                            i
                          );
                      },
                    },
                    {
                      key: "parse",
                      value: function (e) {
                        var t = this.textures;
                        function n(e) {
                          return (
                            void 0 === t[e] &&
                              console.warn(
                                "THREE.MaterialLoader: Undefined texture",
                                e
                              ),
                            t[e]
                          );
                        }
                        var i = new Ic[e.type]();
                        if (
                          (void 0 !== e.uuid && (i.uuid = e.uuid),
                          void 0 !== e.name && (i.name = e.name),
                          void 0 !== e.color &&
                            void 0 !== i.color &&
                            i.color.setHex(e.color),
                          void 0 !== e.roughness && (i.roughness = e.roughness),
                          void 0 !== e.metalness && (i.metalness = e.metalness),
                          void 0 !== e.sheen &&
                            (i.sheen = new qr().setHex(e.sheen)),
                          void 0 !== e.emissive &&
                            void 0 !== i.emissive &&
                            i.emissive.setHex(e.emissive),
                          void 0 !== e.specular &&
                            void 0 !== i.specular &&
                            i.specular.setHex(e.specular),
                          void 0 !== e.shininess && (i.shininess = e.shininess),
                          void 0 !== e.clearcoat && (i.clearcoat = e.clearcoat),
                          void 0 !== e.clearcoatRoughness &&
                            (i.clearcoatRoughness = e.clearcoatRoughness),
                          void 0 !== e.transmission &&
                            (i.transmission = e.transmission),
                          void 0 !== e.thickness && (i.thickness = e.thickness),
                          void 0 !== e.attenuationDistance &&
                            (i.attenuationDistance = e.attenuationDistance),
                          void 0 !== e.attenuationColor &&
                            void 0 !== i.attenuationColor &&
                            i.attenuationColor.setHex(e.attenuationColor),
                          void 0 !== e.fog && (i.fog = e.fog),
                          void 0 !== e.flatShading &&
                            (i.flatShading = e.flatShading),
                          void 0 !== e.blending && (i.blending = e.blending),
                          void 0 !== e.combine && (i.combine = e.combine),
                          void 0 !== e.side && (i.side = e.side),
                          void 0 !== e.shadowSide &&
                            (i.shadowSide = e.shadowSide),
                          void 0 !== e.opacity && (i.opacity = e.opacity),
                          void 0 !== e.transparent &&
                            (i.transparent = e.transparent),
                          void 0 !== e.alphaTest && (i.alphaTest = e.alphaTest),
                          void 0 !== e.depthTest && (i.depthTest = e.depthTest),
                          void 0 !== e.depthWrite &&
                            (i.depthWrite = e.depthWrite),
                          void 0 !== e.colorWrite &&
                            (i.colorWrite = e.colorWrite),
                          void 0 !== e.stencilWrite &&
                            (i.stencilWrite = e.stencilWrite),
                          void 0 !== e.stencilWriteMask &&
                            (i.stencilWriteMask = e.stencilWriteMask),
                          void 0 !== e.stencilFunc &&
                            (i.stencilFunc = e.stencilFunc),
                          void 0 !== e.stencilRef &&
                            (i.stencilRef = e.stencilRef),
                          void 0 !== e.stencilFuncMask &&
                            (i.stencilFuncMask = e.stencilFuncMask),
                          void 0 !== e.stencilFail &&
                            (i.stencilFail = e.stencilFail),
                          void 0 !== e.stencilZFail &&
                            (i.stencilZFail = e.stencilZFail),
                          void 0 !== e.stencilZPass &&
                            (i.stencilZPass = e.stencilZPass),
                          void 0 !== e.wireframe && (i.wireframe = e.wireframe),
                          void 0 !== e.wireframeLinewidth &&
                            (i.wireframeLinewidth = e.wireframeLinewidth),
                          void 0 !== e.wireframeLinecap &&
                            (i.wireframeLinecap = e.wireframeLinecap),
                          void 0 !== e.wireframeLinejoin &&
                            (i.wireframeLinejoin = e.wireframeLinejoin),
                          void 0 !== e.rotation && (i.rotation = e.rotation),
                          1 !== e.linewidth && (i.linewidth = e.linewidth),
                          void 0 !== e.dashSize && (i.dashSize = e.dashSize),
                          void 0 !== e.gapSize && (i.gapSize = e.gapSize),
                          void 0 !== e.scale && (i.scale = e.scale),
                          void 0 !== e.polygonOffset &&
                            (i.polygonOffset = e.polygonOffset),
                          void 0 !== e.polygonOffsetFactor &&
                            (i.polygonOffsetFactor = e.polygonOffsetFactor),
                          void 0 !== e.polygonOffsetUnits &&
                            (i.polygonOffsetUnits = e.polygonOffsetUnits),
                          void 0 !== e.morphTargets &&
                            (i.morphTargets = e.morphTargets),
                          void 0 !== e.morphNormals &&
                            (i.morphNormals = e.morphNormals),
                          void 0 !== e.dithering && (i.dithering = e.dithering),
                          void 0 !== e.alphaToCoverage &&
                            (i.alphaToCoverage = e.alphaToCoverage),
                          void 0 !== e.premultipliedAlpha &&
                            (i.premultipliedAlpha = e.premultipliedAlpha),
                          void 0 !== e.vertexTangents &&
                            (i.vertexTangents = e.vertexTangents),
                          void 0 !== e.visible && (i.visible = e.visible),
                          void 0 !== e.toneMapped &&
                            (i.toneMapped = e.toneMapped),
                          void 0 !== e.userData && (i.userData = e.userData),
                          void 0 !== e.vertexColors &&
                            ("number" === typeof e.vertexColors
                              ? (i.vertexColors = e.vertexColors > 0)
                              : (i.vertexColors = e.vertexColors)),
                          void 0 !== e.uniforms)
                        )
                          for (var r in e.uniforms) {
                            var a = e.uniforms[r];
                            switch (((i.uniforms[r] = {}), a.type)) {
                              case "t":
                                i.uniforms[r].value = n(a.value);
                                break;
                              case "c":
                                i.uniforms[r].value = new qr().setHex(a.value);
                                break;
                              case "v2":
                                i.uniforms[r].value = new ui().fromArray(
                                  a.value
                                );
                                break;
                              case "v3":
                                i.uniforms[r].value = new _i().fromArray(
                                  a.value
                                );
                                break;
                              case "v4":
                                i.uniforms[r].value = new vi().fromArray(
                                  a.value
                                );
                                break;
                              case "m3":
                                i.uniforms[r].value = new hi().fromArray(
                                  a.value
                                );
                                break;
                              case "m4":
                                i.uniforms[r].value = new Ki().fromArray(
                                  a.value
                                );
                                break;
                              default:
                                i.uniforms[r].value = a.value;
                            }
                          }
                        if (
                          (void 0 !== e.defines && (i.defines = e.defines),
                          void 0 !== e.vertexShader &&
                            (i.vertexShader = e.vertexShader),
                          void 0 !== e.fragmentShader &&
                            (i.fragmentShader = e.fragmentShader),
                          void 0 !== e.extensions)
                        )
                          for (var o in e.extensions)
                            i.extensions[o] = e.extensions[o];
                        if (
                          (void 0 !== e.shading &&
                            (i.flatShading = 1 === e.shading),
                          void 0 !== e.size && (i.size = e.size),
                          void 0 !== e.sizeAttenuation &&
                            (i.sizeAttenuation = e.sizeAttenuation),
                          void 0 !== e.map && (i.map = n(e.map)),
                          void 0 !== e.matcap && (i.matcap = n(e.matcap)),
                          void 0 !== e.alphaMap && (i.alphaMap = n(e.alphaMap)),
                          void 0 !== e.bumpMap && (i.bumpMap = n(e.bumpMap)),
                          void 0 !== e.bumpScale && (i.bumpScale = e.bumpScale),
                          void 0 !== e.normalMap &&
                            (i.normalMap = n(e.normalMap)),
                          void 0 !== e.normalMapType &&
                            (i.normalMapType = e.normalMapType),
                          void 0 !== e.normalScale)
                        ) {
                          var s = e.normalScale;
                          !1 === Array.isArray(s) && (s = [s, s]),
                            (i.normalScale = new ui().fromArray(s));
                        }
                        return (
                          void 0 !== e.displacementMap &&
                            (i.displacementMap = n(e.displacementMap)),
                          void 0 !== e.displacementScale &&
                            (i.displacementScale = e.displacementScale),
                          void 0 !== e.displacementBias &&
                            (i.displacementBias = e.displacementBias),
                          void 0 !== e.roughnessMap &&
                            (i.roughnessMap = n(e.roughnessMap)),
                          void 0 !== e.metalnessMap &&
                            (i.metalnessMap = n(e.metalnessMap)),
                          void 0 !== e.emissiveMap &&
                            (i.emissiveMap = n(e.emissiveMap)),
                          void 0 !== e.emissiveIntensity &&
                            (i.emissiveIntensity = e.emissiveIntensity),
                          void 0 !== e.specularMap &&
                            (i.specularMap = n(e.specularMap)),
                          void 0 !== e.envMap && (i.envMap = n(e.envMap)),
                          void 0 !== e.envMapIntensity &&
                            (i.envMapIntensity = e.envMapIntensity),
                          void 0 !== e.reflectivity &&
                            (i.reflectivity = e.reflectivity),
                          void 0 !== e.refractionRatio &&
                            (i.refractionRatio = e.refractionRatio),
                          void 0 !== e.lightMap && (i.lightMap = n(e.lightMap)),
                          void 0 !== e.lightMapIntensity &&
                            (i.lightMapIntensity = e.lightMapIntensity),
                          void 0 !== e.aoMap && (i.aoMap = n(e.aoMap)),
                          void 0 !== e.aoMapIntensity &&
                            (i.aoMapIntensity = e.aoMapIntensity),
                          void 0 !== e.gradientMap &&
                            (i.gradientMap = n(e.gradientMap)),
                          void 0 !== e.clearcoatMap &&
                            (i.clearcoatMap = n(e.clearcoatMap)),
                          void 0 !== e.clearcoatRoughnessMap &&
                            (i.clearcoatRoughnessMap = n(
                              e.clearcoatRoughnessMap
                            )),
                          void 0 !== e.clearcoatNormalMap &&
                            (i.clearcoatNormalMap = n(e.clearcoatNormalMap)),
                          void 0 !== e.clearcoatNormalScale &&
                            (i.clearcoatNormalScale = new ui().fromArray(
                              e.clearcoatNormalScale
                            )),
                          void 0 !== e.transmissionMap &&
                            (i.transmissionMap = n(e.transmissionMap)),
                          void 0 !== e.thicknessMap &&
                            (i.thicknessMap = n(e.thicknessMap)),
                          i
                        );
                      },
                    },
                    {
                      key: "setTextures",
                      value: function (e) {
                        return (this.textures = e), this;
                      },
                    },
                  ]),
                  t
                );
              })(Kc),
              Jh = (function () {
                function e() {
                  f(this, e);
                }
                return (
                  m(e, null, [
                    {
                      key: "decodeText",
                      value: function (e) {
                        if ("undefined" !== typeof TextDecoder)
                          return new TextDecoder().decode(e);
                        for (var t = "", n = 0, i = e.length; n < i; n++)
                          t += String.fromCharCode(e[n]);
                        try {
                          return decodeURIComponent(escape(t));
                        } catch (r) {
                          return t;
                        }
                      },
                    },
                    {
                      key: "extractUrlBase",
                      value: function (e) {
                        var t = e.lastIndexOf("/");
                        return -1 === t ? "./" : e.substr(0, t + 1);
                      },
                    },
                  ]),
                  e
                );
              })(),
              Kh = (function (e) {
                function t() {
                  var e;
                  return (
                    f(this, t),
                    ((e = c(this, h(t).call(this))).type =
                      "InstancedBufferGeometry"),
                    (e.instanceCount = 1 / 0),
                    e
                  );
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "copy",
                      value: function (e) {
                        return (
                          l(h(t.prototype), "copy", this).call(this, e),
                          (this.instanceCount = e.instanceCount),
                          this
                        );
                      },
                    },
                    {
                      key: "clone",
                      value: function () {
                        return new this.constructor().copy(this);
                      },
                    },
                    {
                      key: "toJSON",
                      value: function () {
                        var e = l(h(t.prototype), "toJSON", this).call(
                          this,
                          this
                        );
                        return (
                          (e.instanceCount = this.instanceCount),
                          (e.isInstancedBufferGeometry = !0),
                          e
                        );
                      },
                    },
                  ]),
                  t
                );
              })(ya);
            Kh.prototype.isInstancedBufferGeometry = !0;
            var $h = (function (e) {
              function t(e, n, i, r) {
                var a;
                return (
                  f(this, t),
                  "number" === typeof i &&
                    ((r = i),
                    (i = !1),
                    console.error(
                      "THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument."
                    )),
                  ((a = c(this, h(t).call(this, e, n, i))).meshPerAttribute =
                    r || 1),
                  a
                );
              }
              return (
                p(t, e),
                m(t, [
                  {
                    key: "copy",
                    value: function (e) {
                      return (
                        l(h(t.prototype), "copy", this).call(this, e),
                        (this.meshPerAttribute = e.meshPerAttribute),
                        this
                      );
                    },
                  },
                  {
                    key: "toJSON",
                    value: function () {
                      var e = l(h(t.prototype), "toJSON", this).call(this);
                      return (
                        (e.meshPerAttribute = this.meshPerAttribute),
                        (e.isInstancedBufferAttribute = !0),
                        e
                      );
                    },
                  },
                ]),
                t
              );
            })(Jr);
            $h.prototype.isInstancedBufferAttribute = !0;
            var ed = (function (e) {
                function t(e) {
                  return f(this, t), c(this, h(t).call(this, e));
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "load",
                      value: function (e, t, n, i) {
                        var r = this,
                          a = new eh(r.manager);
                        a.setPath(r.path),
                          a.setRequestHeader(r.requestHeader),
                          a.setWithCredentials(r.withCredentials),
                          a.load(
                            e,
                            function (n) {
                              try {
                                t(r.parse(JSON.parse(n)));
                              } catch (a) {
                                i ? i(a) : console.error(a),
                                  r.manager.itemError(e);
                              }
                            },
                            n,
                            i
                          );
                      },
                    },
                    {
                      key: "parse",
                      value: function (e) {
                        var t = {},
                          n = {};
                        function i(e, i) {
                          if (void 0 !== t[i]) return t[i];
                          var r = e.interleavedBuffers[i],
                            a = (function (e, t) {
                              if (void 0 !== n[t]) return n[t];
                              var i = e.arrayBuffers[t],
                                r = new Uint32Array(i).buffer;
                              return (n[t] = r), r;
                            })(e, r.buffer),
                            o = ca(r.type, a),
                            s = new gl(o, r.stride);
                          return (s.uuid = r.uuid), (t[i] = s), s;
                        }
                        var r = e.isInstancedBufferGeometry
                            ? new Kh()
                            : new ya(),
                          a = e.data.index;
                        if (void 0 !== a) {
                          var o = ca(a.type, a.array);
                          r.setIndex(new Jr(o, 1));
                        }
                        var s = e.data.attributes;
                        for (var l in s) {
                          var u = s[l],
                            c = void 0;
                          if (u.isInterleavedBufferAttribute) {
                            var h = i(e.data, u.data);
                            c = new xl(h, u.itemSize, u.offset, u.normalized);
                          } else {
                            var d = ca(u.type, u.array);
                            c = new (u.isInstancedBufferAttribute ? $h : Jr)(
                              d,
                              u.itemSize,
                              u.normalized
                            );
                          }
                          void 0 !== u.name && (c.name = u.name),
                            void 0 !== u.usage && c.setUsage(u.usage),
                            void 0 !== u.updateRange &&
                              ((c.updateRange.offset = u.updateRange.offset),
                              (c.updateRange.count = u.updateRange.count)),
                            r.setAttribute(l, c);
                        }
                        var p = e.data.morphAttributes;
                        if (p)
                          for (var f in p) {
                            for (
                              var m = p[f], v = [], g = 0, y = m.length;
                              g < y;
                              g++
                            ) {
                              var x = m[g],
                                b = void 0;
                              if (x.isInterleavedBufferAttribute) {
                                var _ = i(e.data, x.data);
                                b = new xl(
                                  _,
                                  x.itemSize,
                                  x.offset,
                                  x.normalized
                                );
                              } else {
                                var w = ca(x.type, x.array);
                                b = new Jr(w, x.itemSize, x.normalized);
                              }
                              void 0 !== x.name && (b.name = x.name), v.push(b);
                            }
                            r.morphAttributes[f] = v;
                          }
                        e.data.morphTargetsRelative &&
                          (r.morphTargetsRelative = !0);
                        var S =
                          e.data.groups || e.data.drawcalls || e.data.offsets;
                        if (void 0 !== S)
                          for (var E = 0, M = S.length; E !== M; ++E) {
                            var A = S[E];
                            r.addGroup(A.start, A.count, A.materialIndex);
                          }
                        var T = e.data.boundingSphere;
                        if (void 0 !== T) {
                          var C = new _i();
                          void 0 !== T.center && C.fromArray(T.center),
                            (r.boundingSphere = new Gi(C, T.radius));
                        }
                        return (
                          e.name && (r.name = e.name),
                          e.userData && (r.userData = e.userData),
                          r
                        );
                      },
                    },
                  ]),
                  t
                );
              })(Kc),
              td = (function (e) {
                function t(e) {
                  return f(this, t), c(this, h(t).call(this, e));
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "load",
                      value: function (e, t, n, i) {
                        var r = this,
                          a =
                            "" === this.path ? Jh.extractUrlBase(e) : this.path;
                        this.resourcePath = this.resourcePath || a;
                        var o = new eh(this.manager);
                        o.setPath(this.path),
                          o.setRequestHeader(this.requestHeader),
                          o.setWithCredentials(this.withCredentials),
                          o.load(
                            e,
                            function (n) {
                              var a = null;
                              try {
                                a = JSON.parse(n);
                              } catch (s) {
                                return (
                                  void 0 !== i && i(s),
                                  void console.error(
                                    "THREE:ObjectLoader: Can't parse " +
                                      e +
                                      ".",
                                    s.message
                                  )
                                );
                              }
                              var o = a.metadata;
                              void 0 !== o &&
                              void 0 !== o.type &&
                              "geometry" !== o.type.toLowerCase()
                                ? r.parse(a, t)
                                : console.error(
                                    "THREE.ObjectLoader: Can't load " + e
                                  );
                            },
                            n,
                            i
                          );
                      },
                    },
                    {
                      key: "parse",
                      value: function (e, t) {
                        var n = this.parseAnimations(e.animations),
                          i = this.parseShapes(e.shapes),
                          r = this.parseGeometries(e.geometries, i),
                          a = this.parseImages(e.images, function () {
                            void 0 !== t && t(l);
                          }),
                          o = this.parseTextures(e.textures, a),
                          s = this.parseMaterials(e.materials, o),
                          l = this.parseObject(e.object, r, s, n),
                          u = this.parseSkeletons(e.skeletons, l);
                        if ((this.bindSkeletons(l, u), void 0 !== t)) {
                          var c = !1;
                          for (var h in a)
                            if (a[h] instanceof HTMLImageElement) {
                              c = !0;
                              break;
                            }
                          !1 === c && t(l);
                        }
                        return l;
                      },
                    },
                    {
                      key: "parseShapes",
                      value: function (e) {
                        var t = {};
                        if (void 0 !== e)
                          for (var n = 0, i = e.length; n < i; n++) {
                            var r = new kh().fromJSON(e[n]);
                            t[r.uuid] = r;
                          }
                        return t;
                      },
                    },
                    {
                      key: "parseSkeletons",
                      value: function (e, t) {
                        var n = {},
                          i = {};
                        if (
                          (t.traverse(function (e) {
                            e.isBone && (i[e.uuid] = e);
                          }),
                          void 0 !== e)
                        )
                          for (var r = 0, a = e.length; r < a; r++) {
                            var o = new Ql().fromJSON(e[r], i);
                            n[o.uuid] = o;
                          }
                        return n;
                      },
                    },
                    {
                      key: "parseGeometries",
                      value: function (e, t) {
                        var n,
                          i = {};
                        if (void 0 !== e)
                          for (
                            var r = new ed(), a = 0, o = e.length;
                            a < o;
                            a++
                          ) {
                            var s = void 0,
                              l = e[a];
                            switch (l.type) {
                              case "PlaneGeometry":
                              case "PlaneBufferGeometry":
                                s = new wc[l.type](
                                  l.width,
                                  l.height,
                                  l.widthSegments,
                                  l.heightSegments
                                );
                                break;
                              case "BoxGeometry":
                              case "BoxBufferGeometry":
                                s = new wc[l.type](
                                  l.width,
                                  l.height,
                                  l.depth,
                                  l.widthSegments,
                                  l.heightSegments,
                                  l.depthSegments
                                );
                                break;
                              case "CircleGeometry":
                              case "CircleBufferGeometry":
                                s = new wc[l.type](
                                  l.radius,
                                  l.segments,
                                  l.thetaStart,
                                  l.thetaLength
                                );
                                break;
                              case "CylinderGeometry":
                              case "CylinderBufferGeometry":
                                s = new wc[l.type](
                                  l.radiusTop,
                                  l.radiusBottom,
                                  l.height,
                                  l.radialSegments,
                                  l.heightSegments,
                                  l.openEnded,
                                  l.thetaStart,
                                  l.thetaLength
                                );
                                break;
                              case "ConeGeometry":
                              case "ConeBufferGeometry":
                                s = new wc[l.type](
                                  l.radius,
                                  l.height,
                                  l.radialSegments,
                                  l.heightSegments,
                                  l.openEnded,
                                  l.thetaStart,
                                  l.thetaLength
                                );
                                break;
                              case "SphereGeometry":
                              case "SphereBufferGeometry":
                                s = new wc[l.type](
                                  l.radius,
                                  l.widthSegments,
                                  l.heightSegments,
                                  l.phiStart,
                                  l.phiLength,
                                  l.thetaStart,
                                  l.thetaLength
                                );
                                break;
                              case "DodecahedronGeometry":
                              case "DodecahedronBufferGeometry":
                              case "IcosahedronGeometry":
                              case "IcosahedronBufferGeometry":
                              case "OctahedronGeometry":
                              case "OctahedronBufferGeometry":
                              case "TetrahedronGeometry":
                              case "TetrahedronBufferGeometry":
                                s = new wc[l.type](l.radius, l.detail);
                                break;
                              case "RingGeometry":
                              case "RingBufferGeometry":
                                s = new wc[l.type](
                                  l.innerRadius,
                                  l.outerRadius,
                                  l.thetaSegments,
                                  l.phiSegments,
                                  l.thetaStart,
                                  l.thetaLength
                                );
                                break;
                              case "TorusGeometry":
                              case "TorusBufferGeometry":
                                s = new wc[l.type](
                                  l.radius,
                                  l.tube,
                                  l.radialSegments,
                                  l.tubularSegments,
                                  l.arc
                                );
                                break;
                              case "TorusKnotGeometry":
                              case "TorusKnotBufferGeometry":
                                s = new wc[l.type](
                                  l.radius,
                                  l.tube,
                                  l.tubularSegments,
                                  l.radialSegments,
                                  l.p,
                                  l.q
                                );
                                break;
                              case "TubeGeometry":
                              case "TubeBufferGeometry":
                                s = new wc[l.type](
                                  new Ah[l.path.type]().fromJSON(l.path),
                                  l.tubularSegments,
                                  l.radius,
                                  l.radialSegments,
                                  l.closed
                                );
                                break;
                              case "LatheGeometry":
                              case "LatheBufferGeometry":
                                s = new wc[l.type](
                                  l.points,
                                  l.segments,
                                  l.phiStart,
                                  l.phiLength
                                );
                                break;
                              case "PolyhedronGeometry":
                              case "PolyhedronBufferGeometry":
                                s = new wc[l.type](
                                  l.vertices,
                                  l.indices,
                                  l.radius,
                                  l.details
                                );
                                break;
                              case "ShapeGeometry":
                              case "ShapeBufferGeometry":
                                n = [];
                                for (
                                  var u = 0, c = l.shapes.length;
                                  u < c;
                                  u++
                                ) {
                                  var h = t[l.shapes[u]];
                                  n.push(h);
                                }
                                s = new wc[l.type](n, l.curveSegments);
                                break;
                              case "ExtrudeGeometry":
                              case "ExtrudeBufferGeometry":
                                n = [];
                                for (
                                  var d = 0, p = l.shapes.length;
                                  d < p;
                                  d++
                                ) {
                                  var f = t[l.shapes[d]];
                                  n.push(f);
                                }
                                var m = l.options.extrudePath;
                                void 0 !== m &&
                                  (l.options.extrudePath = new Ah[
                                    m.type
                                  ]().fromJSON(m)),
                                  (s = new wc[l.type](n, l.options));
                                break;
                              case "BufferGeometry":
                              case "InstancedBufferGeometry":
                                s = r.parse(l);
                                break;
                              case "Geometry":
                                console.error(
                                  'THREE.ObjectLoader: Loading "Geometry" is not supported anymore.'
                                );
                                break;
                              default:
                                console.warn(
                                  'THREE.ObjectLoader: Unsupported geometry type "' +
                                    l.type +
                                    '"'
                                );
                                continue;
                            }
                            (s.uuid = l.uuid),
                              void 0 !== l.name && (s.name = l.name),
                              !0 === s.isBufferGeometry &&
                                void 0 !== l.userData &&
                                (s.userData = l.userData),
                              (i[l.uuid] = s);
                          }
                        return i;
                      },
                    },
                    {
                      key: "parseMaterials",
                      value: function (e, t) {
                        var n = {},
                          i = {};
                        if (void 0 !== e) {
                          var r = new Zh();
                          r.setTextures(t);
                          for (var a = 0, o = e.length; a < o; a++) {
                            var s = e[a];
                            if ("MultiMaterial" === s.type) {
                              for (
                                var l = [], u = 0;
                                u < s.materials.length;
                                u++
                              ) {
                                var c = s.materials[u];
                                void 0 === n[c.uuid] &&
                                  (n[c.uuid] = r.parse(c)),
                                  l.push(n[c.uuid]);
                              }
                              i[s.uuid] = l;
                            } else
                              void 0 === n[s.uuid] && (n[s.uuid] = r.parse(s)),
                                (i[s.uuid] = n[s.uuid]);
                          }
                        }
                        return i;
                      },
                    },
                    {
                      key: "parseAnimations",
                      value: function (e) {
                        var t = {};
                        if (void 0 !== e)
                          for (var n = 0; n < e.length; n++) {
                            var i = e[n],
                              r = qc.parse(i);
                            t[r.uuid] = r;
                          }
                        return t;
                      },
                    },
                    {
                      key: "parseImages",
                      value: function (e, t) {
                        var n,
                          i = this,
                          r = {};
                        function a(e) {
                          if ("string" === typeof e) {
                            var t = e;
                            return (function (e) {
                              return (
                                i.manager.itemStart(e),
                                n.load(
                                  e,
                                  function () {
                                    i.manager.itemEnd(e);
                                  },
                                  void 0,
                                  function () {
                                    i.manager.itemError(e),
                                      i.manager.itemEnd(e);
                                  }
                                )
                              );
                            })(
                              /^(\/\/)|([a-z]+:(\/\/)?)/i.test(t)
                                ? t
                                : i.resourcePath + t
                            );
                          }
                          return e.data
                            ? {
                                data: ca(e.type, e.data),
                                width: e.width,
                                height: e.height,
                              }
                            : null;
                        }
                        if (void 0 !== e && e.length > 0) {
                          var o = new Zc(t);
                          (n = new ih(o)).setCrossOrigin(this.crossOrigin);
                          for (var s = 0, l = e.length; s < l; s++) {
                            var u = e[s],
                              c = u.url;
                            if (Array.isArray(c)) {
                              r[u.uuid] = [];
                              for (var h = 0, d = c.length; h < d; h++) {
                                var p = a(c[h]);
                                null !== p &&
                                  (p instanceof HTMLImageElement
                                    ? r[u.uuid].push(p)
                                    : r[u.uuid].push(
                                        new Yl(p.data, p.width, p.height)
                                      ));
                              }
                            } else {
                              var f = a(u.url);
                              null !== f && (r[u.uuid] = f);
                            }
                          }
                        }
                        return r;
                      },
                    },
                    {
                      key: "parseTextures",
                      value: function (e, t) {
                        function n(e, t) {
                          return "number" === typeof e
                            ? e
                            : (console.warn(
                                "THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",
                                e
                              ),
                              t[e]);
                        }
                        var i = {};
                        if (void 0 !== e)
                          for (var r = 0, a = e.length; r < a; r++) {
                            var o = e[r];
                            void 0 === o.image &&
                              console.warn(
                                'THREE.ObjectLoader: No "image" specified for',
                                o.uuid
                              ),
                              void 0 === t[o.image] &&
                                console.warn(
                                  "THREE.ObjectLoader: Undefined image",
                                  o.image
                                );
                            var s = void 0,
                              l = t[o.image];
                            Array.isArray(l)
                              ? ((s = new Ya(l)),
                                6 === l.length && (s.needsUpdate = !0))
                              : ((s =
                                  l && l.data
                                    ? new Yl(l.data, l.width, l.height)
                                    : new fi(l)),
                                l && (s.needsUpdate = !0)),
                              (s.uuid = o.uuid),
                              void 0 !== o.name && (s.name = o.name),
                              void 0 !== o.mapping &&
                                (s.mapping = n(o.mapping, nd)),
                              void 0 !== o.offset &&
                                s.offset.fromArray(o.offset),
                              void 0 !== o.repeat &&
                                s.repeat.fromArray(o.repeat),
                              void 0 !== o.center &&
                                s.center.fromArray(o.center),
                              void 0 !== o.rotation &&
                                (s.rotation = o.rotation),
                              void 0 !== o.wrap &&
                                ((s.wrapS = n(o.wrap[0], id)),
                                (s.wrapT = n(o.wrap[1], id))),
                              void 0 !== o.format && (s.format = o.format),
                              void 0 !== o.type && (s.type = o.type),
                              void 0 !== o.encoding &&
                                (s.encoding = o.encoding),
                              void 0 !== o.minFilter &&
                                (s.minFilter = n(o.minFilter, rd)),
                              void 0 !== o.magFilter &&
                                (s.magFilter = n(o.magFilter, rd)),
                              void 0 !== o.anisotropy &&
                                (s.anisotropy = o.anisotropy),
                              void 0 !== o.flipY && (s.flipY = o.flipY),
                              void 0 !== o.premultiplyAlpha &&
                                (s.premultiplyAlpha = o.premultiplyAlpha),
                              void 0 !== o.unpackAlignment &&
                                (s.unpackAlignment = o.unpackAlignment),
                              (i[o.uuid] = s);
                          }
                        return i;
                      },
                    },
                    {
                      key: "parseObject",
                      value: function (e, t, n, i) {
                        var r, a, o;
                        function s(e) {
                          return (
                            void 0 === t[e] &&
                              console.warn(
                                "THREE.ObjectLoader: Undefined geometry",
                                e
                              ),
                            t[e]
                          );
                        }
                        function l(e) {
                          if (void 0 !== e) {
                            if (Array.isArray(e)) {
                              for (
                                var t = [], i = 0, r = e.length;
                                i < r;
                                i++
                              ) {
                                var a = e[i];
                                void 0 === n[a] &&
                                  console.warn(
                                    "THREE.ObjectLoader: Undefined material",
                                    a
                                  ),
                                  t.push(n[a]);
                              }
                              return t;
                            }
                            return (
                              void 0 === n[e] &&
                                console.warn(
                                  "THREE.ObjectLoader: Undefined material",
                                  e
                                ),
                              n[e]
                            );
                          }
                        }
                        switch (e.type) {
                          case "Scene":
                            (r = new vl()),
                              void 0 !== e.background &&
                                Number.isInteger(e.background) &&
                                (r.background = new qr(e.background)),
                              void 0 !== e.fog &&
                                ("Fog" === e.fog.type
                                  ? (r.fog = new ml(
                                      e.fog.color,
                                      e.fog.near,
                                      e.fog.far
                                    ))
                                  : "FogExp2" === e.fog.type &&
                                    (r.fog = new fl(
                                      e.fog.color,
                                      e.fog.density
                                    )));
                            break;
                          case "PerspectiveCamera":
                            (r = new Ha(e.fov, e.aspect, e.near, e.far)),
                              void 0 !== e.focus && (r.focus = e.focus),
                              void 0 !== e.zoom && (r.zoom = e.zoom),
                              void 0 !== e.filmGauge &&
                                (r.filmGauge = e.filmGauge),
                              void 0 !== e.filmOffset &&
                                (r.filmOffset = e.filmOffset),
                              void 0 !== e.view &&
                                (r.view = Object.assign({}, e.view));
                            break;
                          case "OrthographicCamera":
                            (r = new Gh(
                              e.left,
                              e.right,
                              e.top,
                              e.bottom,
                              e.near,
                              e.far
                            )),
                              void 0 !== e.zoom && (r.zoom = e.zoom),
                              void 0 !== e.view &&
                                (r.view = Object.assign({}, e.view));
                            break;
                          case "AmbientLight":
                            r = new Yh(e.color, e.intensity);
                            break;
                          case "DirectionalLight":
                            r = new Wh(e.color, e.intensity);
                            break;
                          case "PointLight":
                            r = new jh(
                              e.color,
                              e.intensity,
                              e.distance,
                              e.decay
                            );
                            break;
                          case "RectAreaLight":
                            r = new qh(e.color, e.intensity, e.width, e.height);
                            break;
                          case "SpotLight":
                            r = new Bh(
                              e.color,
                              e.intensity,
                              e.distance,
                              e.angle,
                              e.penumbra,
                              e.decay
                            );
                            break;
                          case "HemisphereLight":
                            r = new Lh(e.color, e.groundColor, e.intensity);
                            break;
                          case "LightProbe":
                            r = new Qh().fromJSON(e);
                            break;
                          case "SkinnedMesh":
                            (a = s(e.geometry)),
                              (o = l(e.material)),
                              (r = new Hl(a, o)),
                              void 0 !== e.bindMode &&
                                (r.bindMode = e.bindMode),
                              void 0 !== e.bindMatrix &&
                                r.bindMatrix.fromArray(e.bindMatrix),
                              void 0 !== e.skeleton &&
                                (r.skeleton = e.skeleton);
                            break;
                          case "Mesh":
                            (a = s(e.geometry)),
                              (o = l(e.material)),
                              (r = new Oa(a, o));
                            break;
                          case "InstancedMesh":
                            (a = s(e.geometry)), (o = l(e.material));
                            var u = e.count,
                              c = e.instanceMatrix,
                              h = e.instanceColor;
                            ((r = new eu(a, o, u)).instanceMatrix = new Jr(
                              new Float32Array(c.array),
                              16
                            )),
                              void 0 !== h &&
                                (r.instanceColor = new Jr(
                                  new Float32Array(h.array),
                                  h.itemSize
                                ));
                            break;
                          case "LOD":
                            r = new Dl();
                            break;
                          case "Line":
                            r = new su(s(e.geometry), l(e.material));
                            break;
                          case "LineLoop":
                            r = new hu(s(e.geometry), l(e.material));
                            break;
                          case "LineSegments":
                            r = new cu(s(e.geometry), l(e.material));
                            break;
                          case "PointCloud":
                          case "Points":
                            r = new gu(s(e.geometry), l(e.material));
                            break;
                          case "Sprite":
                            r = new Fl(l(e.material));
                            break;
                          case "Group":
                            r = new sl();
                            break;
                          case "Bone":
                            r = new Wl();
                            break;
                          default:
                            r = new Sr();
                        }
                        if (
                          ((r.uuid = e.uuid),
                          void 0 !== e.name && (r.name = e.name),
                          void 0 !== e.matrix
                            ? (r.matrix.fromArray(e.matrix),
                              void 0 !== e.matrixAutoUpdate &&
                                (r.matrixAutoUpdate = e.matrixAutoUpdate),
                              r.matrixAutoUpdate &&
                                r.matrix.decompose(
                                  r.position,
                                  r.quaternion,
                                  r.scale
                                ))
                            : (void 0 !== e.position &&
                                r.position.fromArray(e.position),
                              void 0 !== e.rotation &&
                                r.rotation.fromArray(e.rotation),
                              void 0 !== e.quaternion &&
                                r.quaternion.fromArray(e.quaternion),
                              void 0 !== e.scale && r.scale.fromArray(e.scale)),
                          void 0 !== e.castShadow &&
                            (r.castShadow = e.castShadow),
                          void 0 !== e.receiveShadow &&
                            (r.receiveShadow = e.receiveShadow),
                          e.shadow &&
                            (void 0 !== e.shadow.bias &&
                              (r.shadow.bias = e.shadow.bias),
                            void 0 !== e.shadow.normalBias &&
                              (r.shadow.normalBias = e.shadow.normalBias),
                            void 0 !== e.shadow.radius &&
                              (r.shadow.radius = e.shadow.radius),
                            void 0 !== e.shadow.mapSize &&
                              r.shadow.mapSize.fromArray(e.shadow.mapSize),
                            void 0 !== e.shadow.camera &&
                              (r.shadow.camera = this.parseObject(
                                e.shadow.camera
                              ))),
                          void 0 !== e.visible && (r.visible = e.visible),
                          void 0 !== e.frustumCulled &&
                            (r.frustumCulled = e.frustumCulled),
                          void 0 !== e.renderOrder &&
                            (r.renderOrder = e.renderOrder),
                          void 0 !== e.userData && (r.userData = e.userData),
                          void 0 !== e.layers && (r.layers.mask = e.layers),
                          void 0 !== e.children)
                        )
                          for (var d = e.children, p = 0; p < d.length; p++)
                            r.add(this.parseObject(d[p], t, n, i));
                        if (void 0 !== e.animations)
                          for (var f = e.animations, m = 0; m < f.length; m++) {
                            var v = f[m];
                            r.animations.push(i[v]);
                          }
                        if ("LOD" === e.type) {
                          void 0 !== e.autoUpdate &&
                            (r.autoUpdate = e.autoUpdate);
                          for (var g = e.levels, y = 0; y < g.length; y++) {
                            var x = g[y],
                              b = r.getObjectByProperty("uuid", x.object);
                            void 0 !== b && r.addLevel(b, x.distance);
                          }
                        }
                        return r;
                      },
                    },
                    {
                      key: "bindSkeletons",
                      value: function (e, t) {
                        0 !== Object.keys(t).length &&
                          e.traverse(function (e) {
                            if (
                              !0 === e.isSkinnedMesh &&
                              void 0 !== e.skeleton
                            ) {
                              var n = t[e.skeleton];
                              void 0 === n
                                ? console.warn(
                                    "THREE.ObjectLoader: No skeleton found with UUID:",
                                    e.skeleton
                                  )
                                : e.bind(n, e.bindMatrix);
                            }
                          });
                      },
                    },
                    {
                      key: "setTexturePath",
                      value: function (e) {
                        return (
                          console.warn(
                            "THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."
                          ),
                          this.setResourcePath(e)
                        );
                      },
                    },
                  ]),
                  t
                );
              })(Kc),
              nd = {
                UVMapping: ge,
                CubeReflectionMapping: ye,
                CubeRefractionMapping: xe,
                EquirectangularReflectionMapping: be,
                EquirectangularRefractionMapping: _e,
                CubeUVReflectionMapping: we,
                CubeUVRefractionMapping: Se,
              },
              id = {
                RepeatWrapping: Ee,
                ClampToEdgeWrapping: Me,
                MirroredRepeatWrapping: Ae,
              },
              rd = {
                NearestFilter: Te,
                NearestMipmapNearestFilter: Ce,
                NearestMipmapLinearFilter: Pe,
                LinearFilter: Re,
                LinearMipmapNearestFilter: Ie,
                LinearMipmapLinearFilter: Ne,
              },
              ad = (function (e) {
                function t(e) {
                  var n;
                  return (
                    f(this, t),
                    (n = c(this, h(t).call(this, e))),
                    "undefined" === typeof createImageBitmap &&
                      console.warn(
                        "THREE.ImageBitmapLoader: createImageBitmap() not supported."
                      ),
                    "undefined" === typeof fetch &&
                      console.warn(
                        "THREE.ImageBitmapLoader: fetch() not supported."
                      ),
                    (n.options = { premultiplyAlpha: "none" }),
                    n
                  );
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "setOptions",
                      value: function (e) {
                        return (this.options = e), this;
                      },
                    },
                    {
                      key: "load",
                      value: function (e, t, n, i) {
                        void 0 === e && (e = ""),
                          void 0 !== this.path && (e = this.path + e),
                          (e = this.manager.resolveURL(e));
                        var r = this,
                          a = Qc.get(e);
                        if (void 0 !== a)
                          return (
                            r.manager.itemStart(e),
                            setTimeout(function () {
                              t && t(a), r.manager.itemEnd(e);
                            }, 0),
                            a
                          );
                        var o = {};
                        (o.credentials =
                          "anonymous" === this.crossOrigin
                            ? "same-origin"
                            : "include"),
                          (o.headers = this.requestHeader),
                          fetch(e, o)
                            .then(function (e) {
                              return e.blob();
                            })
                            .then(function (e) {
                              return createImageBitmap(
                                e,
                                Object.assign(r.options, {
                                  colorSpaceConversion: "none",
                                })
                              );
                            })
                            .then(function (n) {
                              Qc.add(e, n), t && t(n), r.manager.itemEnd(e);
                            })
                            .catch(function (t) {
                              i && i(t),
                                r.manager.itemError(e),
                                r.manager.itemEnd(e);
                            }),
                          r.manager.itemStart(e);
                      },
                    },
                  ]),
                  t
                );
              })(Kc);
            ad.prototype.isImageBitmapLoader = !0;
            var od = (function () {
                function e() {
                  f(this, e),
                    (this.type = "ShapePath"),
                    (this.color = new qr()),
                    (this.subPaths = []),
                    (this.currentPath = null);
                }
                return (
                  m(e, [
                    {
                      key: "moveTo",
                      value: function (e, t) {
                        return (
                          (this.currentPath = new Ch()),
                          this.subPaths.push(this.currentPath),
                          this.currentPath.moveTo(e, t),
                          this
                        );
                      },
                    },
                    {
                      key: "lineTo",
                      value: function (e, t) {
                        return this.currentPath.lineTo(e, t), this;
                      },
                    },
                    {
                      key: "quadraticCurveTo",
                      value: function (e, t, n, i) {
                        return (
                          this.currentPath.quadraticCurveTo(e, t, n, i), this
                        );
                      },
                    },
                    {
                      key: "bezierCurveTo",
                      value: function (e, t, n, i, r, a) {
                        return (
                          this.currentPath.bezierCurveTo(e, t, n, i, r, a), this
                        );
                      },
                    },
                    {
                      key: "splineThru",
                      value: function (e) {
                        return this.currentPath.splineThru(e), this;
                      },
                    },
                    {
                      key: "toShapes",
                      value: function (e, t) {
                        function n(e) {
                          for (var t = [], n = 0, i = e.length; n < i; n++) {
                            var r = e[n],
                              a = new kh();
                            (a.curves = r.curves), t.push(a);
                          }
                          return t;
                        }
                        function i(e, t) {
                          for (
                            var n = t.length, i = !1, r = n - 1, a = 0;
                            a < n;
                            r = a++
                          ) {
                            var o = t[r],
                              s = t[a],
                              l = s.x - o.x,
                              u = s.y - o.y;
                            if (Math.abs(u) > Number.EPSILON) {
                              if (
                                (u < 0 &&
                                  ((o = t[a]), (l = -l), (s = t[r]), (u = -u)),
                                e.y < o.y || e.y > s.y)
                              )
                                continue;
                              if (e.y === o.y) {
                                if (e.x === o.x) return !0;
                              } else {
                                var c = u * (e.x - o.x) - l * (e.y - o.y);
                                if (0 === c) return !0;
                                if (c < 0) continue;
                                i = !i;
                              }
                            } else {
                              if (e.y !== o.y) continue;
                              if (
                                (s.x <= e.x && e.x <= o.x) ||
                                (o.x <= e.x && e.x <= s.x)
                              )
                                return !0;
                            }
                          }
                          return i;
                        }
                        var r,
                          a,
                          o,
                          s = rc.isClockWise,
                          l = this.subPaths;
                        if (0 === l.length) return [];
                        if (!0 === t) return n(l);
                        var u = [];
                        if (1 === l.length)
                          return (
                            (a = l[0]),
                            ((o = new kh()).curves = a.curves),
                            u.push(o),
                            u
                          );
                        var c = !s(l[0].getPoints());
                        c = e ? !c : c;
                        var h,
                          d,
                          p = [],
                          f = [],
                          m = [],
                          v = 0;
                        (f[v] = void 0), (m[v] = []);
                        for (var g = 0, y = l.length; g < y; g++)
                          (r = s((h = (a = l[g]).getPoints()))),
                            (r = e ? !r : r)
                              ? (!c && f[v] && v++,
                                (f[v] = { s: new kh(), p: h }),
                                (f[v].s.curves = a.curves),
                                c && v++,
                                (m[v] = []))
                              : m[v].push({ h: a, p: h[0] });
                        if (!f[0]) return n(l);
                        if (f.length > 1) {
                          for (
                            var x = !1, b = [], _ = 0, w = f.length;
                            _ < w;
                            _++
                          )
                            p[_] = [];
                          for (var S = 0, E = f.length; S < E; S++)
                            for (var M = m[S], A = 0; A < M.length; A++) {
                              for (
                                var T = M[A], C = !0, k = 0;
                                k < f.length;
                                k++
                              )
                                i(T.p, f[k].p) &&
                                  (S !== k &&
                                    b.push({ froms: S, tos: k, hole: A }),
                                  C ? ((C = !1), p[k].push(T)) : (x = !0));
                              C && p[S].push(T);
                            }
                          b.length > 0 && (x || (m = p));
                        }
                        for (var P = 0, L = f.length; P < L; P++) {
                          (o = f[P].s), u.push(o);
                          for (var R = 0, I = (d = m[P]).length; R < I; R++)
                            o.holes.push(d[R].h);
                        }
                        return u;
                      },
                    },
                  ]),
                  e
                );
              })(),
              sd = (function () {
                function e(t) {
                  f(this, e), (this.type = "Font"), (this.data = t);
                }
                return (
                  m(e, [
                    {
                      key: "generateShapes",
                      value: function (e) {
                        for (
                          var t =
                              arguments.length > 1 && void 0 !== arguments[1]
                                ? arguments[1]
                                : 100,
                            n = [],
                            i = ld(e, t, this.data),
                            r = 0,
                            a = i.length;
                          r < a;
                          r++
                        )
                          Array.prototype.push.apply(n, i[r].toShapes());
                        return n;
                      },
                    },
                  ]),
                  e
                );
              })();
            function ld(e, t, n) {
              for (
                var i = Array.from(e),
                  r = t / n.resolution,
                  a =
                    (n.boundingBox.yMax -
                      n.boundingBox.yMin +
                      n.underlineThickness) *
                    r,
                  o = [],
                  s = 0,
                  l = 0,
                  u = 0;
                u < i.length;
                u++
              ) {
                var c = i[u];
                if ("\n" === c) (s = 0), (l -= a);
                else {
                  var h = ud(c, r, s, l, n);
                  (s += h.offsetX), o.push(h.path);
                }
              }
              return o;
            }
            function ud(e, t, n, i, r) {
              var a = r.glyphs[e] || r.glyphs["?"];
              if (a) {
                var o,
                  s,
                  l,
                  u,
                  c,
                  h,
                  d,
                  p,
                  f = new od();
                if (a.o)
                  for (
                    var m =
                        a._cachedOutline || (a._cachedOutline = a.o.split(" ")),
                      v = 0,
                      g = m.length;
                    v < g;

                  )
                    switch (m[v++]) {
                      case "m":
                        (o = m[v++] * t + n),
                          (s = m[v++] * t + i),
                          f.moveTo(o, s);
                        break;
                      case "l":
                        (o = m[v++] * t + n),
                          (s = m[v++] * t + i),
                          f.lineTo(o, s);
                        break;
                      case "q":
                        (l = m[v++] * t + n),
                          (u = m[v++] * t + i),
                          (c = m[v++] * t + n),
                          (h = m[v++] * t + i),
                          f.quadraticCurveTo(c, h, l, u);
                        break;
                      case "b":
                        (l = m[v++] * t + n),
                          (u = m[v++] * t + i),
                          (c = m[v++] * t + n),
                          (h = m[v++] * t + i),
                          (d = m[v++] * t + n),
                          (p = m[v++] * t + i),
                          f.bezierCurveTo(c, h, d, p, l, u);
                    }
                return { offsetX: a.ha * t, path: f };
              }
              console.error(
                'THREE.Font: character "' +
                  e +
                  '" does not exists in font family ' +
                  r.familyName +
                  "."
              );
            }
            sd.prototype.isFont = !0;
            var cd,
              hd = (function (e) {
                function t(e) {
                  return f(this, t), c(this, h(t).call(this, e));
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "load",
                      value: function (e, t, n, i) {
                        var r = this,
                          a = new eh(this.manager);
                        a.setPath(this.path),
                          a.setRequestHeader(this.requestHeader),
                          a.setWithCredentials(r.withCredentials),
                          a.load(
                            e,
                            function (e) {
                              var n;
                              try {
                                n = JSON.parse(e);
                              } catch (a) {
                                console.warn(
                                  "THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."
                                ),
                                  (n = JSON.parse(
                                    e.substring(65, e.length - 2)
                                  ));
                              }
                              var i = r.parse(n);
                              t && t(i);
                            },
                            n,
                            i
                          );
                      },
                    },
                    {
                      key: "parse",
                      value: function (e) {
                        return new sd(e);
                      },
                    },
                  ]),
                  t
                );
              })(Kc),
              dd = {
                getContext: function () {
                  return (
                    void 0 === cd &&
                      (cd = new (window.AudioContext ||
                        window.webkitAudioContext)()),
                    cd
                  );
                },
                setContext: function (e) {
                  cd = e;
                },
              },
              pd = (function (e) {
                function t(e) {
                  return f(this, t), c(this, h(t).call(this, e));
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "load",
                      value: function (e, t, n, i) {
                        var r = this,
                          a = new eh(this.manager);
                        a.setResponseType("arraybuffer"),
                          a.setPath(this.path),
                          a.setRequestHeader(this.requestHeader),
                          a.setWithCredentials(this.withCredentials),
                          a.load(
                            e,
                            function (n) {
                              try {
                                var a = n.slice(0);
                                dd.getContext().decodeAudioData(
                                  a,
                                  function (e) {
                                    t(e);
                                  }
                                );
                              } catch (o) {
                                i ? i(o) : console.error(o),
                                  r.manager.itemError(e);
                              }
                            },
                            n,
                            i
                          );
                      },
                    },
                  ]),
                  t
                );
              })(Kc),
              fd = (function (e) {
                function t(e, n) {
                  var i,
                    r =
                      arguments.length > 2 && void 0 !== arguments[2]
                        ? arguments[2]
                        : 1;
                  f(this, t), (i = c(this, h(t).call(this, void 0, r)));
                  var a = new qr().set(e),
                    o = new qr().set(n),
                    s = new _i(a.r, a.g, a.b),
                    l = new _i(o.r, o.g, o.b),
                    u = Math.sqrt(Math.PI),
                    d = u * Math.sqrt(0.75);
                  return (
                    i.sh.coefficients[0].copy(s).add(l).multiplyScalar(u),
                    i.sh.coefficients[1].copy(s).sub(l).multiplyScalar(d),
                    i
                  );
                }
                return p(t, e), t;
              })(Qh);
            fd.prototype.isHemisphereLightProbe = !0;
            var md = (function (e) {
              function t(e) {
                var n,
                  i =
                    arguments.length > 1 && void 0 !== arguments[1]
                      ? arguments[1]
                      : 1;
                f(this, t), (n = c(this, h(t).call(this, void 0, i)));
                var r = new qr().set(e);
                return (
                  n.sh.coefficients[0]
                    .set(r.r, r.g, r.b)
                    .multiplyScalar(2 * Math.sqrt(Math.PI)),
                  n
                );
              }
              return p(t, e), t;
            })(Qh);
            md.prototype.isAmbientLightProbe = !0;
            var vd = new Ki(),
              gd = new Ki(),
              yd = (function () {
                function e() {
                  f(this, e),
                    (this.type = "StereoCamera"),
                    (this.aspect = 1),
                    (this.eyeSep = 0.064),
                    (this.cameraL = new Ha()),
                    this.cameraL.layers.enable(1),
                    (this.cameraL.matrixAutoUpdate = !1),
                    (this.cameraR = new Ha()),
                    this.cameraR.layers.enable(2),
                    (this.cameraR.matrixAutoUpdate = !1),
                    (this._cache = {
                      focus: null,
                      fov: null,
                      aspect: null,
                      near: null,
                      far: null,
                      zoom: null,
                      eyeSep: null,
                    });
                }
                return (
                  m(e, [
                    {
                      key: "update",
                      value: function (e) {
                        var t = this._cache;
                        if (
                          t.focus !== e.focus ||
                          t.fov !== e.fov ||
                          t.aspect !== e.aspect * this.aspect ||
                          t.near !== e.near ||
                          t.far !== e.far ||
                          t.zoom !== e.zoom ||
                          t.eyeSep !== this.eyeSep
                        ) {
                          (t.focus = e.focus),
                            (t.fov = e.fov),
                            (t.aspect = e.aspect * this.aspect),
                            (t.near = e.near),
                            (t.far = e.far),
                            (t.zoom = e.zoom),
                            (t.eyeSep = this.eyeSep);
                          var n,
                            i,
                            r = e.projectionMatrix.clone(),
                            a = t.eyeSep / 2,
                            o = (a * t.near) / t.focus,
                            s = (t.near * Math.tan($n * t.fov * 0.5)) / t.zoom;
                          (gd.elements[12] = -a),
                            (vd.elements[12] = a),
                            (n = -s * t.aspect + o),
                            (i = s * t.aspect + o),
                            (r.elements[0] = (2 * t.near) / (i - n)),
                            (r.elements[8] = (i + n) / (i - n)),
                            this.cameraL.projectionMatrix.copy(r),
                            (n = -s * t.aspect - o),
                            (i = s * t.aspect - o),
                            (r.elements[0] = (2 * t.near) / (i - n)),
                            (r.elements[8] = (i + n) / (i - n)),
                            this.cameraR.projectionMatrix.copy(r);
                        }
                        this.cameraL.matrixWorld
                          .copy(e.matrixWorld)
                          .multiply(gd),
                          this.cameraR.matrixWorld
                            .copy(e.matrixWorld)
                            .multiply(vd);
                      },
                    },
                  ]),
                  e
                );
              })(),
              xd = (function () {
                function e() {
                  var t =
                    !(arguments.length > 0 && void 0 !== arguments[0]) ||
                    arguments[0];
                  f(this, e),
                    (this.autoStart = t),
                    (this.startTime = 0),
                    (this.oldTime = 0),
                    (this.elapsedTime = 0),
                    (this.running = !1);
                }
                return (
                  m(e, [
                    {
                      key: "start",
                      value: function () {
                        (this.startTime = bd()),
                          (this.oldTime = this.startTime),
                          (this.elapsedTime = 0),
                          (this.running = !0);
                      },
                    },
                    {
                      key: "stop",
                      value: function () {
                        this.getElapsedTime(),
                          (this.running = !1),
                          (this.autoStart = !1);
                      },
                    },
                    {
                      key: "getElapsedTime",
                      value: function () {
                        return this.getDelta(), this.elapsedTime;
                      },
                    },
                    {
                      key: "getDelta",
                      value: function () {
                        var e = 0;
                        if (this.autoStart && !this.running)
                          return this.start(), 0;
                        if (this.running) {
                          var t = bd();
                          (e = (t - this.oldTime) / 1e3),
                            (this.oldTime = t),
                            (this.elapsedTime += e);
                        }
                        return e;
                      },
                    },
                  ]),
                  e
                );
              })();
            function bd() {
              return (
                "undefined" === typeof performance ? Date : performance
              ).now();
            }
            var _d = new _i(),
              wd = new bi(),
              Sd = new _i(),
              Ed = new _i(),
              Md = (function (e) {
                function t() {
                  var e;
                  return (
                    f(this, t),
                    ((e = c(this, h(t).call(this))).type = "AudioListener"),
                    (e.context = dd.getContext()),
                    (e.gain = e.context.createGain()),
                    e.gain.connect(e.context.destination),
                    (e.filter = null),
                    (e.timeDelta = 0),
                    (e._clock = new xd()),
                    e
                  );
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "getInput",
                      value: function () {
                        return this.gain;
                      },
                    },
                    {
                      key: "removeFilter",
                      value: function () {
                        return (
                          null !== this.filter &&
                            (this.gain.disconnect(this.filter),
                            this.filter.disconnect(this.context.destination),
                            this.gain.connect(this.context.destination),
                            (this.filter = null)),
                          this
                        );
                      },
                    },
                    {
                      key: "getFilter",
                      value: function () {
                        return this.filter;
                      },
                    },
                    {
                      key: "setFilter",
                      value: function (e) {
                        return (
                          null !== this.filter
                            ? (this.gain.disconnect(this.filter),
                              this.filter.disconnect(this.context.destination))
                            : this.gain.disconnect(this.context.destination),
                          (this.filter = e),
                          this.gain.connect(this.filter),
                          this.filter.connect(this.context.destination),
                          this
                        );
                      },
                    },
                    {
                      key: "getMasterVolume",
                      value: function () {
                        return this.gain.gain.value;
                      },
                    },
                    {
                      key: "setMasterVolume",
                      value: function (e) {
                        return (
                          this.gain.gain.setTargetAtTime(
                            e,
                            this.context.currentTime,
                            0.01
                          ),
                          this
                        );
                      },
                    },
                    {
                      key: "updateMatrixWorld",
                      value: function (e) {
                        l(h(t.prototype), "updateMatrixWorld", this).call(
                          this,
                          e
                        );
                        var n = this.context.listener,
                          i = this.up;
                        if (
                          ((this.timeDelta = this._clock.getDelta()),
                          this.matrixWorld.decompose(_d, wd, Sd),
                          Ed.set(0, 0, -1).applyQuaternion(wd),
                          n.positionX)
                        ) {
                          var r = this.context.currentTime + this.timeDelta;
                          n.positionX.linearRampToValueAtTime(_d.x, r),
                            n.positionY.linearRampToValueAtTime(_d.y, r),
                            n.positionZ.linearRampToValueAtTime(_d.z, r),
                            n.forwardX.linearRampToValueAtTime(Ed.x, r),
                            n.forwardY.linearRampToValueAtTime(Ed.y, r),
                            n.forwardZ.linearRampToValueAtTime(Ed.z, r),
                            n.upX.linearRampToValueAtTime(i.x, r),
                            n.upY.linearRampToValueAtTime(i.y, r),
                            n.upZ.linearRampToValueAtTime(i.z, r);
                        } else
                          n.setPosition(_d.x, _d.y, _d.z),
                            n.setOrientation(Ed.x, Ed.y, Ed.z, i.x, i.y, i.z);
                      },
                    },
                  ]),
                  t
                );
              })(Sr),
              Ad = (function (e) {
                function t(e) {
                  var n;
                  return (
                    f(this, t),
                    ((n = c(this, h(t).call(this))).type = "Audio"),
                    (n.listener = e),
                    (n.context = e.context),
                    (n.gain = n.context.createGain()),
                    n.gain.connect(e.getInput()),
                    (n.autoplay = !1),
                    (n.buffer = null),
                    (n.detune = 0),
                    (n.loop = !1),
                    (n.loopStart = 0),
                    (n.loopEnd = 0),
                    (n.offset = 0),
                    (n.duration = void 0),
                    (n.playbackRate = 1),
                    (n.isPlaying = !1),
                    (n.hasPlaybackControl = !0),
                    (n.source = null),
                    (n.sourceType = "empty"),
                    (n._startedAt = 0),
                    (n._progress = 0),
                    (n._connected = !1),
                    (n.filters = []),
                    n
                  );
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "getOutput",
                      value: function () {
                        return this.gain;
                      },
                    },
                    {
                      key: "setNodeSource",
                      value: function (e) {
                        return (
                          (this.hasPlaybackControl = !1),
                          (this.sourceType = "audioNode"),
                          (this.source = e),
                          this.connect(),
                          this
                        );
                      },
                    },
                    {
                      key: "setMediaElementSource",
                      value: function (e) {
                        return (
                          (this.hasPlaybackControl = !1),
                          (this.sourceType = "mediaNode"),
                          (this.source =
                            this.context.createMediaElementSource(e)),
                          this.connect(),
                          this
                        );
                      },
                    },
                    {
                      key: "setMediaStreamSource",
                      value: function (e) {
                        return (
                          (this.hasPlaybackControl = !1),
                          (this.sourceType = "mediaStreamNode"),
                          (this.source =
                            this.context.createMediaStreamSource(e)),
                          this.connect(),
                          this
                        );
                      },
                    },
                    {
                      key: "setBuffer",
                      value: function (e) {
                        return (
                          (this.buffer = e),
                          (this.sourceType = "buffer"),
                          this.autoplay && this.play(),
                          this
                        );
                      },
                    },
                    {
                      key: "play",
                      value: function () {
                        var e =
                          arguments.length > 0 && void 0 !== arguments[0]
                            ? arguments[0]
                            : 0;
                        if (!0 !== this.isPlaying) {
                          if (!1 !== this.hasPlaybackControl) {
                            this._startedAt = this.context.currentTime + e;
                            var t = this.context.createBufferSource();
                            return (
                              (t.buffer = this.buffer),
                              (t.loop = this.loop),
                              (t.loopStart = this.loopStart),
                              (t.loopEnd = this.loopEnd),
                              (t.onended = this.onEnded.bind(this)),
                              t.start(
                                this._startedAt,
                                this._progress + this.offset,
                                this.duration
                              ),
                              (this.isPlaying = !0),
                              (this.source = t),
                              this.setDetune(this.detune),
                              this.setPlaybackRate(this.playbackRate),
                              this.connect()
                            );
                          }
                          console.warn(
                            "THREE.Audio: this Audio has no playback control."
                          );
                        } else
                          console.warn(
                            "THREE.Audio: Audio is already playing."
                          );
                      },
                    },
                    {
                      key: "pause",
                      value: function () {
                        if (!1 !== this.hasPlaybackControl)
                          return (
                            !0 === this.isPlaying &&
                              ((this._progress +=
                                Math.max(
                                  this.context.currentTime - this._startedAt,
                                  0
                                ) * this.playbackRate),
                              !0 === this.loop &&
                                (this._progress =
                                  this._progress %
                                  (this.duration || this.buffer.duration)),
                              this.source.stop(),
                              (this.source.onended = null),
                              (this.isPlaying = !1)),
                            this
                          );
                        console.warn(
                          "THREE.Audio: this Audio has no playback control."
                        );
                      },
                    },
                    {
                      key: "stop",
                      value: function () {
                        if (!1 !== this.hasPlaybackControl)
                          return (
                            (this._progress = 0),
                            this.source.stop(),
                            (this.source.onended = null),
                            (this.isPlaying = !1),
                            this
                          );
                        console.warn(
                          "THREE.Audio: this Audio has no playback control."
                        );
                      },
                    },
                    {
                      key: "connect",
                      value: function () {
                        if (this.filters.length > 0) {
                          this.source.connect(this.filters[0]);
                          for (var e = 1, t = this.filters.length; e < t; e++)
                            this.filters[e - 1].connect(this.filters[e]);
                          this.filters[this.filters.length - 1].connect(
                            this.getOutput()
                          );
                        } else this.source.connect(this.getOutput());
                        return (this._connected = !0), this;
                      },
                    },
                    {
                      key: "disconnect",
                      value: function () {
                        if (this.filters.length > 0) {
                          this.source.disconnect(this.filters[0]);
                          for (var e = 1, t = this.filters.length; e < t; e++)
                            this.filters[e - 1].disconnect(this.filters[e]);
                          this.filters[this.filters.length - 1].disconnect(
                            this.getOutput()
                          );
                        } else this.source.disconnect(this.getOutput());
                        return (this._connected = !1), this;
                      },
                    },
                    {
                      key: "getFilters",
                      value: function () {
                        return this.filters;
                      },
                    },
                    {
                      key: "setFilters",
                      value: function (e) {
                        return (
                          e || (e = []),
                          !0 === this._connected
                            ? (this.disconnect(),
                              (this.filters = e.slice()),
                              this.connect())
                            : (this.filters = e.slice()),
                          this
                        );
                      },
                    },
                    {
                      key: "setDetune",
                      value: function (e) {
                        if (((this.detune = e), void 0 !== this.source.detune))
                          return (
                            !0 === this.isPlaying &&
                              this.source.detune.setTargetAtTime(
                                this.detune,
                                this.context.currentTime,
                                0.01
                              ),
                            this
                          );
                      },
                    },
                    {
                      key: "getDetune",
                      value: function () {
                        return this.detune;
                      },
                    },
                    {
                      key: "getFilter",
                      value: function () {
                        return this.getFilters()[0];
                      },
                    },
                    {
                      key: "setFilter",
                      value: function (e) {
                        return this.setFilters(e ? [e] : []);
                      },
                    },
                    {
                      key: "setPlaybackRate",
                      value: function (e) {
                        if (!1 !== this.hasPlaybackControl)
                          return (
                            (this.playbackRate = e),
                            !0 === this.isPlaying &&
                              this.source.playbackRate.setTargetAtTime(
                                this.playbackRate,
                                this.context.currentTime,
                                0.01
                              ),
                            this
                          );
                        console.warn(
                          "THREE.Audio: this Audio has no playback control."
                        );
                      },
                    },
                    {
                      key: "getPlaybackRate",
                      value: function () {
                        return this.playbackRate;
                      },
                    },
                    {
                      key: "onEnded",
                      value: function () {
                        this.isPlaying = !1;
                      },
                    },
                    {
                      key: "getLoop",
                      value: function () {
                        return !1 === this.hasPlaybackControl
                          ? (console.warn(
                              "THREE.Audio: this Audio has no playback control."
                            ),
                            !1)
                          : this.loop;
                      },
                    },
                    {
                      key: "setLoop",
                      value: function (e) {
                        if (!1 !== this.hasPlaybackControl)
                          return (
                            (this.loop = e),
                            !0 === this.isPlaying &&
                              (this.source.loop = this.loop),
                            this
                          );
                        console.warn(
                          "THREE.Audio: this Audio has no playback control."
                        );
                      },
                    },
                    {
                      key: "setLoopStart",
                      value: function (e) {
                        return (this.loopStart = e), this;
                      },
                    },
                    {
                      key: "setLoopEnd",
                      value: function (e) {
                        return (this.loopEnd = e), this;
                      },
                    },
                    {
                      key: "getVolume",
                      value: function () {
                        return this.gain.gain.value;
                      },
                    },
                    {
                      key: "setVolume",
                      value: function (e) {
                        return (
                          this.gain.gain.setTargetAtTime(
                            e,
                            this.context.currentTime,
                            0.01
                          ),
                          this
                        );
                      },
                    },
                  ]),
                  t
                );
              })(Sr),
              Td = new _i(),
              Cd = new bi(),
              kd = new _i(),
              Pd = new _i(),
              Ld = (function (e) {
                function t(e) {
                  var n;
                  return (
                    f(this, t),
                    ((n = c(this, h(t).call(this, e))).panner =
                      n.context.createPanner()),
                    (n.panner.panningModel = "HRTF"),
                    n.panner.connect(n.gain),
                    n
                  );
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "getOutput",
                      value: function () {
                        return this.panner;
                      },
                    },
                    {
                      key: "getRefDistance",
                      value: function () {
                        return this.panner.refDistance;
                      },
                    },
                    {
                      key: "setRefDistance",
                      value: function (e) {
                        return (this.panner.refDistance = e), this;
                      },
                    },
                    {
                      key: "getRolloffFactor",
                      value: function () {
                        return this.panner.rolloffFactor;
                      },
                    },
                    {
                      key: "setRolloffFactor",
                      value: function (e) {
                        return (this.panner.rolloffFactor = e), this;
                      },
                    },
                    {
                      key: "getDistanceModel",
                      value: function () {
                        return this.panner.distanceModel;
                      },
                    },
                    {
                      key: "setDistanceModel",
                      value: function (e) {
                        return (this.panner.distanceModel = e), this;
                      },
                    },
                    {
                      key: "getMaxDistance",
                      value: function () {
                        return this.panner.maxDistance;
                      },
                    },
                    {
                      key: "setMaxDistance",
                      value: function (e) {
                        return (this.panner.maxDistance = e), this;
                      },
                    },
                    {
                      key: "setDirectionalCone",
                      value: function (e, t, n) {
                        return (
                          (this.panner.coneInnerAngle = e),
                          (this.panner.coneOuterAngle = t),
                          (this.panner.coneOuterGain = n),
                          this
                        );
                      },
                    },
                    {
                      key: "updateMatrixWorld",
                      value: function (e) {
                        if (
                          (l(h(t.prototype), "updateMatrixWorld", this).call(
                            this,
                            e
                          ),
                          !0 !== this.hasPlaybackControl ||
                            !1 !== this.isPlaying)
                        ) {
                          this.matrixWorld.decompose(Td, Cd, kd),
                            Pd.set(0, 0, 1).applyQuaternion(Cd);
                          var n = this.panner;
                          if (n.positionX) {
                            var i =
                              this.context.currentTime +
                              this.listener.timeDelta;
                            n.positionX.linearRampToValueAtTime(Td.x, i),
                              n.positionY.linearRampToValueAtTime(Td.y, i),
                              n.positionZ.linearRampToValueAtTime(Td.z, i),
                              n.orientationX.linearRampToValueAtTime(Pd.x, i),
                              n.orientationY.linearRampToValueAtTime(Pd.y, i),
                              n.orientationZ.linearRampToValueAtTime(Pd.z, i);
                          } else
                            n.setPosition(Td.x, Td.y, Td.z),
                              n.setOrientation(Pd.x, Pd.y, Pd.z);
                        }
                      },
                    },
                  ]),
                  t
                );
              })(Ad),
              Rd = (function () {
                function e(t) {
                  var n =
                    arguments.length > 1 && void 0 !== arguments[1]
                      ? arguments[1]
                      : 2048;
                  f(this, e),
                    (this.analyser = t.context.createAnalyser()),
                    (this.analyser.fftSize = n),
                    (this.data = new Uint8Array(
                      this.analyser.frequencyBinCount
                    )),
                    t.getOutput().connect(this.analyser);
                }
                return (
                  m(e, [
                    {
                      key: "getFrequencyData",
                      value: function () {
                        return (
                          this.analyser.getByteFrequencyData(this.data),
                          this.data
                        );
                      },
                    },
                    {
                      key: "getAverageFrequency",
                      value: function () {
                        for (
                          var e = 0, t = this.getFrequencyData(), n = 0;
                          n < t.length;
                          n++
                        )
                          e += t[n];
                        return e / t.length;
                      },
                    },
                  ]),
                  e
                );
              })(),
              Id = (function () {
                function e(t, n, i) {
                  var r, a, o;
                  switch (
                    (f(this, e), (this.binding = t), (this.valueSize = i), n)
                  ) {
                    case "quaternion":
                      (r = this._slerp),
                        (a = this._slerpAdditive),
                        (o = this._setAdditiveIdentityQuaternion),
                        (this.buffer = new Float64Array(6 * i)),
                        (this._workIndex = 5);
                      break;
                    case "string":
                    case "bool":
                      (r = this._select),
                        (a = this._select),
                        (o = this._setAdditiveIdentityOther),
                        (this.buffer = new Array(5 * i));
                      break;
                    default:
                      (r = this._lerp),
                        (a = this._lerpAdditive),
                        (o = this._setAdditiveIdentityNumeric),
                        (this.buffer = new Float64Array(5 * i));
                  }
                  (this._mixBufferRegion = r),
                    (this._mixBufferRegionAdditive = a),
                    (this._setIdentity = o),
                    (this._origIndex = 3),
                    (this._addIndex = 4),
                    (this.cumulativeWeight = 0),
                    (this.cumulativeWeightAdditive = 0),
                    (this.useCount = 0),
                    (this.referenceCount = 0);
                }
                return (
                  m(e, [
                    {
                      key: "accumulate",
                      value: function (e, t) {
                        var n = this.buffer,
                          i = this.valueSize,
                          r = e * i + i,
                          a = this.cumulativeWeight;
                        if (0 === a) {
                          for (var o = 0; o !== i; ++o) n[r + o] = n[o];
                          a = t;
                        } else {
                          var s = t / (a += t);
                          this._mixBufferRegion(n, r, 0, s, i);
                        }
                        this.cumulativeWeight = a;
                      },
                    },
                    {
                      key: "accumulateAdditive",
                      value: function (e) {
                        var t = this.buffer,
                          n = this.valueSize,
                          i = n * this._addIndex;
                        0 === this.cumulativeWeightAdditive &&
                          this._setIdentity(),
                          this._mixBufferRegionAdditive(t, i, 0, e, n),
                          (this.cumulativeWeightAdditive += e);
                      },
                    },
                    {
                      key: "apply",
                      value: function (e) {
                        var t = this.valueSize,
                          n = this.buffer,
                          i = e * t + t,
                          r = this.cumulativeWeight,
                          a = this.cumulativeWeightAdditive,
                          o = this.binding;
                        if (
                          ((this.cumulativeWeight = 0),
                          (this.cumulativeWeightAdditive = 0),
                          r < 1)
                        ) {
                          var s = t * this._origIndex;
                          this._mixBufferRegion(n, i, s, 1 - r, t);
                        }
                        a > 0 &&
                          this._mixBufferRegionAdditive(
                            n,
                            i,
                            this._addIndex * t,
                            1,
                            t
                          );
                        for (var l = t, u = t + t; l !== u; ++l)
                          if (n[l] !== n[l + t]) {
                            o.setValue(n, i);
                            break;
                          }
                      },
                    },
                    {
                      key: "saveOriginalState",
                      value: function () {
                        var e = this.binding,
                          t = this.buffer,
                          n = this.valueSize,
                          i = n * this._origIndex;
                        e.getValue(t, i);
                        for (var r = n, a = i; r !== a; ++r)
                          t[r] = t[i + (r % n)];
                        this._setIdentity(),
                          (this.cumulativeWeight = 0),
                          (this.cumulativeWeightAdditive = 0);
                      },
                    },
                    {
                      key: "restoreOriginalState",
                      value: function () {
                        var e = 3 * this.valueSize;
                        this.binding.setValue(this.buffer, e);
                      },
                    },
                    {
                      key: "_setAdditiveIdentityNumeric",
                      value: function () {
                        for (
                          var e = this._addIndex * this.valueSize,
                            t = e + this.valueSize,
                            n = e;
                          n < t;
                          n++
                        )
                          this.buffer[n] = 0;
                      },
                    },
                    {
                      key: "_setAdditiveIdentityQuaternion",
                      value: function () {
                        this._setAdditiveIdentityNumeric(),
                          (this.buffer[
                            this._addIndex * this.valueSize + 3
                          ] = 1);
                      },
                    },
                    {
                      key: "_setAdditiveIdentityOther",
                      value: function () {
                        for (
                          var e = this._origIndex * this.valueSize,
                            t = this._addIndex * this.valueSize,
                            n = 0;
                          n < this.valueSize;
                          n++
                        )
                          this.buffer[t + n] = this.buffer[e + n];
                      },
                    },
                    {
                      key: "_select",
                      value: function (e, t, n, i, r) {
                        if (i >= 0.5)
                          for (var a = 0; a !== r; ++a) e[t + a] = e[n + a];
                      },
                    },
                    {
                      key: "_slerp",
                      value: function (e, t, n, i) {
                        bi.slerpFlat(e, t, e, t, e, n, i);
                      },
                    },
                    {
                      key: "_slerpAdditive",
                      value: function (e, t, n, i, r) {
                        var a = this._workIndex * r;
                        bi.multiplyQuaternionsFlat(e, a, e, t, e, n),
                          bi.slerpFlat(e, t, e, t, e, a, i);
                      },
                    },
                    {
                      key: "_lerp",
                      value: function (e, t, n, i, r) {
                        for (var a = 1 - i, o = 0; o !== r; ++o) {
                          var s = t + o;
                          e[s] = e[s] * a + e[n + o] * i;
                        }
                      },
                    },
                    {
                      key: "_lerpAdditive",
                      value: function (e, t, n, i, r) {
                        for (var a = 0; a !== r; ++a) {
                          var o = t + a;
                          e[o] = e[o] + e[n + a] * i;
                        }
                      },
                    },
                  ]),
                  e
                );
              })(),
              Fd = new RegExp("[\\[\\]\\.:\\/]", "g"),
              Nd = "[^" + "\\[\\]\\.:\\/".replace("\\.", "") + "]",
              Od = /((?:WC+[\/:])*)/.source.replace("WC", "[^\\[\\]\\.:\\/]"),
              Bd = /(WCOD+)?/.source.replace("WCOD", Nd),
              Dd = /(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace(
                "WC",
                "[^\\[\\]\\.:\\/]"
              ),
              Vd = /\.(WC+)(?:\[(.+)\])?/.source.replace(
                "WC",
                "[^\\[\\]\\.:\\/]"
              ),
              Ud = new RegExp("^" + Od + Bd + Dd + Vd + "$"),
              zd = ["material", "materials", "bones"],
              jd = (function () {
                function e(t, n, i) {
                  f(this, e);
                  var r = i || Gd.parseTrackName(n);
                  (this._targetGroup = t),
                    (this._bindings = t.subscribe_(n, r));
                }
                return (
                  m(e, [
                    {
                      key: "getValue",
                      value: function (e, t) {
                        this.bind();
                        var n = this._targetGroup.nCachedObjects_,
                          i = this._bindings[n];
                        void 0 !== i && i.getValue(e, t);
                      },
                    },
                    {
                      key: "setValue",
                      value: function (e, t) {
                        for (
                          var n = this._bindings,
                            i = this._targetGroup.nCachedObjects_,
                            r = n.length;
                          i !== r;
                          ++i
                        )
                          n[i].setValue(e, t);
                      },
                    },
                    {
                      key: "bind",
                      value: function () {
                        for (
                          var e = this._bindings,
                            t = this._targetGroup.nCachedObjects_,
                            n = e.length;
                          t !== n;
                          ++t
                        )
                          e[t].bind();
                      },
                    },
                    {
                      key: "unbind",
                      value: function () {
                        for (
                          var e = this._bindings,
                            t = this._targetGroup.nCachedObjects_,
                            n = e.length;
                          t !== n;
                          ++t
                        )
                          e[t].unbind();
                      },
                    },
                  ]),
                  e
                );
              })(),
              Gd = (function () {
                function e(t, n, i) {
                  f(this, e),
                    (this.path = n),
                    (this.parsedPath = i || e.parseTrackName(n)),
                    (this.node = e.findNode(t, this.parsedPath.nodeName) || t),
                    (this.rootNode = t),
                    (this.getValue = this._getValue_unbound),
                    (this.setValue = this._setValue_unbound);
                }
                return (
                  m(
                    e,
                    [
                      { key: "_getValue_unavailable", value: function () {} },
                      { key: "_setValue_unavailable", value: function () {} },
                      {
                        key: "_getValue_direct",
                        value: function (e, t) {
                          e[t] = this.node[this.propertyName];
                        },
                      },
                      {
                        key: "_getValue_array",
                        value: function (e, t) {
                          for (
                            var n = this.resolvedProperty, i = 0, r = n.length;
                            i !== r;
                            ++i
                          )
                            e[t++] = n[i];
                        },
                      },
                      {
                        key: "_getValue_arrayElement",
                        value: function (e, t) {
                          e[t] = this.resolvedProperty[this.propertyIndex];
                        },
                      },
                      {
                        key: "_getValue_toArray",
                        value: function (e, t) {
                          this.resolvedProperty.toArray(e, t);
                        },
                      },
                      {
                        key: "_setValue_direct",
                        value: function (e, t) {
                          this.targetObject[this.propertyName] = e[t];
                        },
                      },
                      {
                        key: "_setValue_direct_setNeedsUpdate",
                        value: function (e, t) {
                          (this.targetObject[this.propertyName] = e[t]),
                            (this.targetObject.needsUpdate = !0);
                        },
                      },
                      {
                        key: "_setValue_direct_setMatrixWorldNeedsUpdate",
                        value: function (e, t) {
                          (this.targetObject[this.propertyName] = e[t]),
                            (this.targetObject.matrixWorldNeedsUpdate = !0);
                        },
                      },
                      {
                        key: "_setValue_array",
                        value: function (e, t) {
                          for (
                            var n = this.resolvedProperty, i = 0, r = n.length;
                            i !== r;
                            ++i
                          )
                            n[i] = e[t++];
                        },
                      },
                      {
                        key: "_setValue_array_setNeedsUpdate",
                        value: function (e, t) {
                          for (
                            var n = this.resolvedProperty, i = 0, r = n.length;
                            i !== r;
                            ++i
                          )
                            n[i] = e[t++];
                          this.targetObject.needsUpdate = !0;
                        },
                      },
                      {
                        key: "_setValue_array_setMatrixWorldNeedsUpdate",
                        value: function (e, t) {
                          for (
                            var n = this.resolvedProperty, i = 0, r = n.length;
                            i !== r;
                            ++i
                          )
                            n[i] = e[t++];
                          this.targetObject.matrixWorldNeedsUpdate = !0;
                        },
                      },
                      {
                        key: "_setValue_arrayElement",
                        value: function (e, t) {
                          this.resolvedProperty[this.propertyIndex] = e[t];
                        },
                      },
                      {
                        key: "_setValue_arrayElement_setNeedsUpdate",
                        value: function (e, t) {
                          (this.resolvedProperty[this.propertyIndex] = e[t]),
                            (this.targetObject.needsUpdate = !0);
                        },
                      },
                      {
                        key: "_setValue_arrayElement_setMatrixWorldNeedsUpdate",
                        value: function (e, t) {
                          (this.resolvedProperty[this.propertyIndex] = e[t]),
                            (this.targetObject.matrixWorldNeedsUpdate = !0);
                        },
                      },
                      {
                        key: "_setValue_fromArray",
                        value: function (e, t) {
                          this.resolvedProperty.fromArray(e, t);
                        },
                      },
                      {
                        key: "_setValue_fromArray_setNeedsUpdate",
                        value: function (e, t) {
                          this.resolvedProperty.fromArray(e, t),
                            (this.targetObject.needsUpdate = !0);
                        },
                      },
                      {
                        key: "_setValue_fromArray_setMatrixWorldNeedsUpdate",
                        value: function (e, t) {
                          this.resolvedProperty.fromArray(e, t),
                            (this.targetObject.matrixWorldNeedsUpdate = !0);
                        },
                      },
                      {
                        key: "_getValue_unbound",
                        value: function (e, t) {
                          this.bind(), this.getValue(e, t);
                        },
                      },
                      {
                        key: "_setValue_unbound",
                        value: function (e, t) {
                          this.bind(), this.setValue(e, t);
                        },
                      },
                      {
                        key: "bind",
                        value: function () {
                          var t = this.node,
                            n = this.parsedPath,
                            i = n.objectName,
                            r = n.propertyName,
                            a = n.propertyIndex;
                          if (
                            (t ||
                              ((t =
                                e.findNode(this.rootNode, n.nodeName) ||
                                this.rootNode),
                              (this.node = t)),
                            (this.getValue = this._getValue_unavailable),
                            (this.setValue = this._setValue_unavailable),
                            t)
                          ) {
                            if (i) {
                              var o = n.objectIndex;
                              switch (i) {
                                case "materials":
                                  if (!t.material)
                                    return void console.error(
                                      "THREE.PropertyBinding: Can not bind to material as node does not have a material.",
                                      this
                                    );
                                  if (!t.material.materials)
                                    return void console.error(
                                      "THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",
                                      this
                                    );
                                  t = t.material.materials;
                                  break;
                                case "bones":
                                  if (!t.skeleton)
                                    return void console.error(
                                      "THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",
                                      this
                                    );
                                  t = t.skeleton.bones;
                                  for (var s = 0; s < t.length; s++)
                                    if (t[s].name === o) {
                                      o = s;
                                      break;
                                    }
                                  break;
                                default:
                                  if (void 0 === t[i])
                                    return void console.error(
                                      "THREE.PropertyBinding: Can not bind to objectName of node undefined.",
                                      this
                                    );
                                  t = t[i];
                              }
                              if (void 0 !== o) {
                                if (void 0 === t[o])
                                  return void console.error(
                                    "THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",
                                    this,
                                    t
                                  );
                                t = t[o];
                              }
                            }
                            var l = t[r];
                            if (void 0 !== l) {
                              var u = this.Versioning.None;
                              (this.targetObject = t),
                                void 0 !== t.needsUpdate
                                  ? (u = this.Versioning.NeedsUpdate)
                                  : void 0 !== t.matrixWorldNeedsUpdate &&
                                    (u =
                                      this.Versioning.MatrixWorldNeedsUpdate);
                              var c = this.BindingType.Direct;
                              if (void 0 !== a) {
                                if ("morphTargetInfluences" === r) {
                                  if (!t.geometry)
                                    return void console.error(
                                      "THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",
                                      this
                                    );
                                  if (!t.geometry.isBufferGeometry)
                                    return void console.error(
                                      "THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",
                                      this
                                    );
                                  if (!t.geometry.morphAttributes)
                                    return void console.error(
                                      "THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",
                                      this
                                    );
                                  void 0 !== t.morphTargetDictionary[a] &&
                                    (a = t.morphTargetDictionary[a]);
                                }
                                (c = this.BindingType.ArrayElement),
                                  (this.resolvedProperty = l),
                                  (this.propertyIndex = a);
                              } else
                                void 0 !== l.fromArray && void 0 !== l.toArray
                                  ? ((c = this.BindingType.HasFromToArray),
                                    (this.resolvedProperty = l))
                                  : Array.isArray(l)
                                  ? ((c = this.BindingType.EntireArray),
                                    (this.resolvedProperty = l))
                                  : (this.propertyName = r);
                              (this.getValue = this.GetterByBindingType[c]),
                                (this.setValue =
                                  this.SetterByBindingTypeAndVersioning[c][u]);
                            } else {
                              var h = n.nodeName;
                              console.error(
                                "THREE.PropertyBinding: Trying to update property for track: " +
                                  h +
                                  "." +
                                  r +
                                  " but it wasn't found.",
                                t
                              );
                            }
                          } else
                            console.error(
                              "THREE.PropertyBinding: Trying to update node for track: " +
                                this.path +
                                " but it wasn't found."
                            );
                        },
                      },
                      {
                        key: "unbind",
                        value: function () {
                          (this.node = null),
                            (this.getValue = this._getValue_unbound),
                            (this.setValue = this._setValue_unbound);
                        },
                      },
                    ],
                    [
                      {
                        key: "create",
                        value: function (t, n, i) {
                          return t && t.isAnimationObjectGroup
                            ? new e.Composite(t, n, i)
                            : new e(t, n, i);
                        },
                      },
                      {
                        key: "sanitizeNodeName",
                        value: function (e) {
                          return e.replace(/\s/g, "_").replace(Fd, "");
                        },
                      },
                      {
                        key: "parseTrackName",
                        value: function (e) {
                          var t = Ud.exec(e);
                          if (!t)
                            throw new Error(
                              "PropertyBinding: Cannot parse trackName: " + e
                            );
                          var n = {
                              nodeName: t[2],
                              objectName: t[3],
                              objectIndex: t[4],
                              propertyName: t[5],
                              propertyIndex: t[6],
                            },
                            i = n.nodeName && n.nodeName.lastIndexOf(".");
                          if (void 0 !== i && -1 !== i) {
                            var r = n.nodeName.substring(i + 1);
                            -1 !== zd.indexOf(r) &&
                              ((n.nodeName = n.nodeName.substring(0, i)),
                              (n.objectName = r));
                          }
                          if (
                            null === n.propertyName ||
                            0 === n.propertyName.length
                          )
                            throw new Error(
                              "PropertyBinding: can not parse propertyName from trackName: " +
                                e
                            );
                          return n;
                        },
                      },
                      {
                        key: "findNode",
                        value: function (e, t) {
                          if (
                            !t ||
                            "" === t ||
                            "." === t ||
                            -1 === t ||
                            t === e.name ||
                            t === e.uuid
                          )
                            return e;
                          if (e.skeleton) {
                            var n = e.skeleton.getBoneByName(t);
                            if (void 0 !== n) return n;
                          }
                          if (e.children) {
                            var i = (function e(n) {
                              for (var i = 0; i < n.length; i++) {
                                var r = n[i];
                                if (r.name === t || r.uuid === t) return r;
                                var a = e(r.children);
                                if (a) return a;
                              }
                              return null;
                            })(e.children);
                            if (i) return i;
                          }
                          return null;
                        },
                      },
                    ]
                  ),
                  e
                );
              })();
            (Gd.Composite = jd),
              (Gd.prototype.BindingType = {
                Direct: 0,
                EntireArray: 1,
                ArrayElement: 2,
                HasFromToArray: 3,
              }),
              (Gd.prototype.Versioning = {
                None: 0,
                NeedsUpdate: 1,
                MatrixWorldNeedsUpdate: 2,
              }),
              (Gd.prototype.GetterByBindingType = [
                Gd.prototype._getValue_direct,
                Gd.prototype._getValue_array,
                Gd.prototype._getValue_arrayElement,
                Gd.prototype._getValue_toArray,
              ]),
              (Gd.prototype.SetterByBindingTypeAndVersioning = [
                [
                  Gd.prototype._setValue_direct,
                  Gd.prototype._setValue_direct_setNeedsUpdate,
                  Gd.prototype._setValue_direct_setMatrixWorldNeedsUpdate,
                ],
                [
                  Gd.prototype._setValue_array,
                  Gd.prototype._setValue_array_setNeedsUpdate,
                  Gd.prototype._setValue_array_setMatrixWorldNeedsUpdate,
                ],
                [
                  Gd.prototype._setValue_arrayElement,
                  Gd.prototype._setValue_arrayElement_setNeedsUpdate,
                  Gd.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate,
                ],
                [
                  Gd.prototype._setValue_fromArray,
                  Gd.prototype._setValue_fromArray_setNeedsUpdate,
                  Gd.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate,
                ],
              ]);
            var Hd = (function () {
              function e() {
                f(this, e),
                  (this.uuid = ti()),
                  (this._objects = Array.prototype.slice.call(arguments)),
                  (this.nCachedObjects_ = 0);
                var t = {};
                this._indicesByUUID = t;
                for (var n = 0, i = arguments.length; n !== i; ++n)
                  t[arguments[n].uuid] = n;
                (this._paths = []),
                  (this._parsedPaths = []),
                  (this._bindings = []),
                  (this._bindingsIndicesByPath = {});
                var r = this;
                this.stats = {
                  objects: {
                    get total() {
                      return r._objects.length;
                    },
                    get inUse() {
                      return this.total - r.nCachedObjects_;
                    },
                  },
                  get bindingsPerObject() {
                    return r._bindings.length;
                  },
                };
              }
              return (
                m(e, [
                  {
                    key: "add",
                    value: function () {
                      for (
                        var e = this._objects,
                          t = this._indicesByUUID,
                          n = this._paths,
                          i = this._parsedPaths,
                          r = this._bindings,
                          a = r.length,
                          o = void 0,
                          s = e.length,
                          l = this.nCachedObjects_,
                          u = 0,
                          c = arguments.length;
                        u !== c;
                        ++u
                      ) {
                        var h = arguments[u],
                          d = h.uuid,
                          p = t[d];
                        if (void 0 === p) {
                          (p = s++), (t[d] = p), e.push(h);
                          for (var f = 0, m = a; f !== m; ++f)
                            r[f].push(new Gd(h, n[f], i[f]));
                        } else if (p < l) {
                          o = e[p];
                          var v = --l,
                            g = e[v];
                          (t[g.uuid] = p), (e[p] = g), (t[d] = v), (e[v] = h);
                          for (var y = 0, x = a; y !== x; ++y) {
                            var b = r[y],
                              _ = b[v],
                              w = b[p];
                            (b[p] = _),
                              void 0 === w && (w = new Gd(h, n[y], i[y])),
                              (b[v] = w);
                          }
                        } else
                          e[p] !== o &&
                            console.error(
                              "THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes."
                            );
                      }
                      this.nCachedObjects_ = l;
                    },
                  },
                  {
                    key: "remove",
                    value: function () {
                      for (
                        var e = this._objects,
                          t = this._indicesByUUID,
                          n = this._bindings,
                          i = n.length,
                          r = this.nCachedObjects_,
                          a = 0,
                          o = arguments.length;
                        a !== o;
                        ++a
                      ) {
                        var s = arguments[a],
                          l = s.uuid,
                          u = t[l];
                        if (void 0 !== u && u >= r) {
                          var c = r++,
                            h = e[c];
                          (t[h.uuid] = u), (e[u] = h), (t[l] = c), (e[c] = s);
                          for (var d = 0, p = i; d !== p; ++d) {
                            var f = n[d],
                              m = f[c],
                              v = f[u];
                            (f[u] = m), (f[c] = v);
                          }
                        }
                      }
                      this.nCachedObjects_ = r;
                    },
                  },
                  {
                    key: "uncache",
                    value: function () {
                      for (
                        var e = this._objects,
                          t = this._indicesByUUID,
                          n = this._bindings,
                          i = n.length,
                          r = this.nCachedObjects_,
                          a = e.length,
                          o = 0,
                          s = arguments.length;
                        o !== s;
                        ++o
                      ) {
                        var l = arguments[o],
                          u = l.uuid,
                          c = t[u];
                        if (void 0 !== c)
                          if ((delete t[u], c < r)) {
                            var h = --r,
                              d = e[h],
                              p = --a,
                              f = e[p];
                            (t[d.uuid] = c),
                              (e[c] = d),
                              (t[f.uuid] = h),
                              (e[h] = f),
                              e.pop();
                            for (var m = 0, v = i; m !== v; ++m) {
                              var g = n[m],
                                y = g[h],
                                x = g[p];
                              (g[c] = y), (g[h] = x), g.pop();
                            }
                          } else {
                            var b = --a,
                              _ = e[b];
                            b > 0 && (t[_.uuid] = c), (e[c] = _), e.pop();
                            for (var w = 0, S = i; w !== S; ++w) {
                              var E = n[w];
                              (E[c] = E[b]), E.pop();
                            }
                          }
                      }
                      this.nCachedObjects_ = r;
                    },
                  },
                  {
                    key: "subscribe_",
                    value: function (e, t) {
                      var n = this._bindingsIndicesByPath,
                        i = n[e],
                        r = this._bindings;
                      if (void 0 !== i) return r[i];
                      var a = this._paths,
                        o = this._parsedPaths,
                        s = this._objects,
                        l = s.length,
                        u = this.nCachedObjects_,
                        c = new Array(l);
                      (i = r.length),
                        (n[e] = i),
                        a.push(e),
                        o.push(t),
                        r.push(c);
                      for (var h = u, d = s.length; h !== d; ++h) {
                        var p = s[h];
                        c[h] = new Gd(p, e, t);
                      }
                      return c;
                    },
                  },
                  {
                    key: "unsubscribe_",
                    value: function (e) {
                      var t = this._bindingsIndicesByPath,
                        n = t[e];
                      if (void 0 !== n) {
                        var i = this._paths,
                          r = this._parsedPaths,
                          a = this._bindings,
                          o = a.length - 1,
                          s = a[o];
                        (t[e[o]] = n),
                          (a[n] = s),
                          a.pop(),
                          (r[n] = r[o]),
                          r.pop(),
                          (i[n] = i[o]),
                          i.pop();
                      }
                    },
                  },
                ]),
                e
              );
            })();
            Hd.prototype.isAnimationObjectGroup = !0;
            var Wd = (function () {
                function e(t, n) {
                  var i =
                      arguments.length > 2 && void 0 !== arguments[2]
                        ? arguments[2]
                        : null,
                    r =
                      arguments.length > 3 && void 0 !== arguments[3]
                        ? arguments[3]
                        : n.blendMode;
                  f(this, e),
                    (this._mixer = t),
                    (this._clip = n),
                    (this._localRoot = i),
                    (this.blendMode = r);
                  for (
                    var a = n.tracks,
                      o = a.length,
                      s = new Array(o),
                      l = { endingStart: tn, endingEnd: tn },
                      u = 0;
                    u !== o;
                    ++u
                  ) {
                    var c = a[u].createInterpolant(null);
                    (s[u] = c), (c.settings = l);
                  }
                  (this._interpolantSettings = l),
                    (this._interpolants = s),
                    (this._propertyBindings = new Array(o)),
                    (this._cacheIndex = null),
                    (this._byClipCacheIndex = null),
                    (this._timeScaleInterpolant = null),
                    (this._weightInterpolant = null),
                    (this.loop = Zt),
                    (this._loopCount = -1),
                    (this._startTime = null),
                    (this.time = 0),
                    (this.timeScale = 1),
                    (this._effectiveTimeScale = 1),
                    (this.weight = 1),
                    (this._effectiveWeight = 1),
                    (this.repetitions = 1 / 0),
                    (this.paused = !1),
                    (this.enabled = !0),
                    (this.clampWhenFinished = !1),
                    (this.zeroSlopeAtStart = !0),
                    (this.zeroSlopeAtEnd = !0);
                }
                return (
                  m(e, [
                    {
                      key: "play",
                      value: function () {
                        return this._mixer._activateAction(this), this;
                      },
                    },
                    {
                      key: "stop",
                      value: function () {
                        return (
                          this._mixer._deactivateAction(this), this.reset()
                        );
                      },
                    },
                    {
                      key: "reset",
                      value: function () {
                        return (
                          (this.paused = !1),
                          (this.enabled = !0),
                          (this.time = 0),
                          (this._loopCount = -1),
                          (this._startTime = null),
                          this.stopFading().stopWarping()
                        );
                      },
                    },
                    {
                      key: "isRunning",
                      value: function () {
                        return (
                          this.enabled &&
                          !this.paused &&
                          0 !== this.timeScale &&
                          null === this._startTime &&
                          this._mixer._isActiveAction(this)
                        );
                      },
                    },
                    {
                      key: "isScheduled",
                      value: function () {
                        return this._mixer._isActiveAction(this);
                      },
                    },
                    {
                      key: "startAt",
                      value: function (e) {
                        return (this._startTime = e), this;
                      },
                    },
                    {
                      key: "setLoop",
                      value: function (e, t) {
                        return (this.loop = e), (this.repetitions = t), this;
                      },
                    },
                    {
                      key: "setEffectiveWeight",
                      value: function (e) {
                        return (
                          (this.weight = e),
                          (this._effectiveWeight = this.enabled ? e : 0),
                          this.stopFading()
                        );
                      },
                    },
                    {
                      key: "getEffectiveWeight",
                      value: function () {
                        return this._effectiveWeight;
                      },
                    },
                    {
                      key: "fadeIn",
                      value: function (e) {
                        return this._scheduleFading(e, 0, 1);
                      },
                    },
                    {
                      key: "fadeOut",
                      value: function (e) {
                        return this._scheduleFading(e, 1, 0);
                      },
                    },
                    {
                      key: "crossFadeFrom",
                      value: function (e, t, n) {
                        if ((e.fadeOut(t), this.fadeIn(t), n)) {
                          var i = this._clip.duration,
                            r = e._clip.duration,
                            a = r / i,
                            o = i / r;
                          e.warp(1, a, t), this.warp(o, 1, t);
                        }
                        return this;
                      },
                    },
                    {
                      key: "crossFadeTo",
                      value: function (e, t, n) {
                        return e.crossFadeFrom(this, t, n);
                      },
                    },
                    {
                      key: "stopFading",
                      value: function () {
                        var e = this._weightInterpolant;
                        return (
                          null !== e &&
                            ((this._weightInterpolant = null),
                            this._mixer._takeBackControlInterpolant(e)),
                          this
                        );
                      },
                    },
                    {
                      key: "setEffectiveTimeScale",
                      value: function (e) {
                        return (
                          (this.timeScale = e),
                          (this._effectiveTimeScale = this.paused ? 0 : e),
                          this.stopWarping()
                        );
                      },
                    },
                    {
                      key: "getEffectiveTimeScale",
                      value: function () {
                        return this._effectiveTimeScale;
                      },
                    },
                    {
                      key: "setDuration",
                      value: function (e) {
                        return (
                          (this.timeScale = this._clip.duration / e),
                          this.stopWarping()
                        );
                      },
                    },
                    {
                      key: "syncWith",
                      value: function (e) {
                        return (
                          (this.time = e.time),
                          (this.timeScale = e.timeScale),
                          this.stopWarping()
                        );
                      },
                    },
                    {
                      key: "halt",
                      value: function (e) {
                        return this.warp(this._effectiveTimeScale, 0, e);
                      },
                    },
                    {
                      key: "warp",
                      value: function (e, t, n) {
                        var i = this._mixer,
                          r = i.time,
                          a = this.timeScale,
                          o = this._timeScaleInterpolant;
                        null === o &&
                          ((o = i._lendControlInterpolant()),
                          (this._timeScaleInterpolant = o));
                        var s = o.parameterPositions,
                          l = o.sampleValues;
                        return (
                          (s[0] = r),
                          (s[1] = r + n),
                          (l[0] = e / a),
                          (l[1] = t / a),
                          this
                        );
                      },
                    },
                    {
                      key: "stopWarping",
                      value: function () {
                        var e = this._timeScaleInterpolant;
                        return (
                          null !== e &&
                            ((this._timeScaleInterpolant = null),
                            this._mixer._takeBackControlInterpolant(e)),
                          this
                        );
                      },
                    },
                    {
                      key: "getMixer",
                      value: function () {
                        return this._mixer;
                      },
                    },
                    {
                      key: "getClip",
                      value: function () {
                        return this._clip;
                      },
                    },
                    {
                      key: "getRoot",
                      value: function () {
                        return this._localRoot || this._mixer._root;
                      },
                    },
                    {
                      key: "_update",
                      value: function (e, t, n, i) {
                        if (this.enabled) {
                          var r = this._startTime;
                          if (null !== r) {
                            var a = (e - r) * n;
                            if (a < 0 || 0 === n) return;
                            (this._startTime = null), (t = n * a);
                          }
                          t *= this._updateTimeScale(e);
                          var o = this._updateTime(t),
                            s = this._updateWeight(e);
                          if (s > 0) {
                            var l = this._interpolants,
                              u = this._propertyBindings;
                            switch (this.blendMode) {
                              case on:
                                for (var c = 0, h = l.length; c !== h; ++c)
                                  l[c].evaluate(o), u[c].accumulateAdditive(s);
                                break;
                              case an:
                              default:
                                for (var d = 0, p = l.length; d !== p; ++d)
                                  l[d].evaluate(o), u[d].accumulate(i, s);
                            }
                          }
                        } else this._updateWeight(e);
                      },
                    },
                    {
                      key: "_updateWeight",
                      value: function (e) {
                        var t = 0;
                        if (this.enabled) {
                          t = this.weight;
                          var n = this._weightInterpolant;
                          if (null !== n) {
                            var i = n.evaluate(e)[0];
                            (t *= i),
                              e > n.parameterPositions[1] &&
                                (this.stopFading(),
                                0 === i && (this.enabled = !1));
                          }
                        }
                        return (this._effectiveWeight = t), t;
                      },
                    },
                    {
                      key: "_updateTimeScale",
                      value: function (e) {
                        var t = 0;
                        if (!this.paused) {
                          t = this.timeScale;
                          var n = this._timeScaleInterpolant;
                          null !== n &&
                            ((t *= n.evaluate(e)[0]),
                            e > n.parameterPositions[1] &&
                              (this.stopWarping(),
                              0 === t
                                ? (this.paused = !0)
                                : (this.timeScale = t)));
                        }
                        return (this._effectiveTimeScale = t), t;
                      },
                    },
                    {
                      key: "_updateTime",
                      value: function (e) {
                        var t = this._clip.duration,
                          n = this.loop,
                          i = this.time + e,
                          r = this._loopCount,
                          a = n === Jt;
                        if (0 === e)
                          return -1 === r ? i : a && 1 === (1 & r) ? t - i : i;
                        if (n === Qt) {
                          -1 === r &&
                            ((this._loopCount = 0),
                            this._setEndings(!0, !0, !1));
                          e: {
                            if (i >= t) i = t;
                            else {
                              if (!(i < 0)) {
                                this.time = i;
                                break e;
                              }
                              i = 0;
                            }
                            this.clampWhenFinished
                              ? (this.paused = !0)
                              : (this.enabled = !1),
                              (this.time = i),
                              this._mixer.dispatchEvent({
                                type: "finished",
                                action: this,
                                direction: e < 0 ? -1 : 1,
                              });
                          }
                        } else {
                          if (
                            (-1 === r &&
                              (e >= 0
                                ? ((r = 0),
                                  this._setEndings(
                                    !0,
                                    0 === this.repetitions,
                                    a
                                  ))
                                : this._setEndings(
                                    0 === this.repetitions,
                                    !0,
                                    a
                                  )),
                            i >= t || i < 0)
                          ) {
                            var o = Math.floor(i / t);
                            (i -= t * o), (r += Math.abs(o));
                            var s = this.repetitions - r;
                            if (s <= 0)
                              this.clampWhenFinished
                                ? (this.paused = !0)
                                : (this.enabled = !1),
                                (i = e > 0 ? t : 0),
                                (this.time = i),
                                this._mixer.dispatchEvent({
                                  type: "finished",
                                  action: this,
                                  direction: e > 0 ? 1 : -1,
                                });
                            else {
                              if (1 === s) {
                                var l = e < 0;
                                this._setEndings(l, !l, a);
                              } else this._setEndings(!1, !1, a);
                              (this._loopCount = r),
                                (this.time = i),
                                this._mixer.dispatchEvent({
                                  type: "loop",
                                  action: this,
                                  loopDelta: o,
                                });
                            }
                          } else this.time = i;
                          if (a && 1 === (1 & r)) return t - i;
                        }
                        return i;
                      },
                    },
                    {
                      key: "_setEndings",
                      value: function (e, t, n) {
                        var i = this._interpolantSettings;
                        n
                          ? ((i.endingStart = nn), (i.endingEnd = nn))
                          : ((i.endingStart = e
                              ? this.zeroSlopeAtStart
                                ? nn
                                : tn
                              : rn),
                            (i.endingEnd = t
                              ? this.zeroSlopeAtEnd
                                ? nn
                                : tn
                              : rn));
                      },
                    },
                    {
                      key: "_scheduleFading",
                      value: function (e, t, n) {
                        var i = this._mixer,
                          r = i.time,
                          a = this._weightInterpolant;
                        null === a &&
                          ((a = i._lendControlInterpolant()),
                          (this._weightInterpolant = a));
                        var o = a.parameterPositions,
                          s = a.sampleValues;
                        return (
                          (o[0] = r),
                          (s[0] = t),
                          (o[1] = r + e),
                          (s[1] = n),
                          this
                        );
                      },
                    },
                  ]),
                  e
                );
              })(),
              Yd = (function (e) {
                function t(e) {
                  var n;
                  return (
                    f(this, t),
                    ((n = c(this, h(t).call(this)))._root = e),
                    n._initMemoryManager(),
                    (n._accuIndex = 0),
                    (n.time = 0),
                    (n.timeScale = 1),
                    n
                  );
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "_bindAction",
                      value: function (e, t) {
                        var n = e._localRoot || this._root,
                          i = e._clip.tracks,
                          r = i.length,
                          a = e._propertyBindings,
                          o = e._interpolants,
                          s = n.uuid,
                          l = this._bindingsByRootAndName,
                          u = l[s];
                        void 0 === u && ((u = {}), (l[s] = u));
                        for (var c = 0; c !== r; ++c) {
                          var h = i[c],
                            d = h.name,
                            p = u[d];
                          if (void 0 !== p) a[c] = p;
                          else {
                            if (void 0 !== (p = a[c])) {
                              null === p._cacheIndex &&
                                (++p.referenceCount,
                                this._addInactiveBinding(p, s, d));
                              continue;
                            }
                            var f =
                              t && t._propertyBindings[c].binding.parsedPath;
                            ++(p = new Id(
                              Gd.create(n, d, f),
                              h.ValueTypeName,
                              h.getValueSize()
                            )).referenceCount,
                              this._addInactiveBinding(p, s, d),
                              (a[c] = p);
                          }
                          o[c].resultBuffer = p.buffer;
                        }
                      },
                    },
                    {
                      key: "_activateAction",
                      value: function (e) {
                        if (!this._isActiveAction(e)) {
                          if (null === e._cacheIndex) {
                            var t = (e._localRoot || this._root).uuid,
                              n = e._clip.uuid,
                              i = this._actionsByClip[n];
                            this._bindAction(e, i && i.knownActions[0]),
                              this._addInactiveAction(e, n, t);
                          }
                          for (
                            var r = e._propertyBindings, a = 0, o = r.length;
                            a !== o;
                            ++a
                          ) {
                            var s = r[a];
                            0 === s.useCount++ &&
                              (this._lendBinding(s), s.saveOriginalState());
                          }
                          this._lendAction(e);
                        }
                      },
                    },
                    {
                      key: "_deactivateAction",
                      value: function (e) {
                        if (this._isActiveAction(e)) {
                          for (
                            var t = e._propertyBindings, n = 0, i = t.length;
                            n !== i;
                            ++n
                          ) {
                            var r = t[n];
                            0 === --r.useCount &&
                              (r.restoreOriginalState(),
                              this._takeBackBinding(r));
                          }
                          this._takeBackAction(e);
                        }
                      },
                    },
                    {
                      key: "_initMemoryManager",
                      value: function () {
                        (this._actions = []),
                          (this._nActiveActions = 0),
                          (this._actionsByClip = {}),
                          (this._bindings = []),
                          (this._nActiveBindings = 0),
                          (this._bindingsByRootAndName = {}),
                          (this._controlInterpolants = []),
                          (this._nActiveControlInterpolants = 0);
                        var e = this;
                        this.stats = {
                          actions: {
                            get total() {
                              return e._actions.length;
                            },
                            get inUse() {
                              return e._nActiveActions;
                            },
                          },
                          bindings: {
                            get total() {
                              return e._bindings.length;
                            },
                            get inUse() {
                              return e._nActiveBindings;
                            },
                          },
                          controlInterpolants: {
                            get total() {
                              return e._controlInterpolants.length;
                            },
                            get inUse() {
                              return e._nActiveControlInterpolants;
                            },
                          },
                        };
                      },
                    },
                    {
                      key: "_isActiveAction",
                      value: function (e) {
                        var t = e._cacheIndex;
                        return null !== t && t < this._nActiveActions;
                      },
                    },
                    {
                      key: "_addInactiveAction",
                      value: function (e, t, n) {
                        var i = this._actions,
                          r = this._actionsByClip,
                          a = r[t];
                        if (void 0 === a)
                          (a = { knownActions: [e], actionByRoot: {} }),
                            (e._byClipCacheIndex = 0),
                            (r[t] = a);
                        else {
                          var o = a.knownActions;
                          (e._byClipCacheIndex = o.length), o.push(e);
                        }
                        (e._cacheIndex = i.length),
                          i.push(e),
                          (a.actionByRoot[n] = e);
                      },
                    },
                    {
                      key: "_removeInactiveAction",
                      value: function (e) {
                        var t = this._actions,
                          n = t[t.length - 1],
                          i = e._cacheIndex;
                        (n._cacheIndex = i),
                          (t[i] = n),
                          t.pop(),
                          (e._cacheIndex = null);
                        var r = e._clip.uuid,
                          a = this._actionsByClip,
                          o = a[r],
                          s = o.knownActions,
                          l = s[s.length - 1],
                          u = e._byClipCacheIndex;
                        (l._byClipCacheIndex = u),
                          (s[u] = l),
                          s.pop(),
                          (e._byClipCacheIndex = null),
                          delete o.actionByRoot[
                            (e._localRoot || this._root).uuid
                          ],
                          0 === s.length && delete a[r],
                          this._removeInactiveBindingsForAction(e);
                      },
                    },
                    {
                      key: "_removeInactiveBindingsForAction",
                      value: function (e) {
                        for (
                          var t = e._propertyBindings, n = 0, i = t.length;
                          n !== i;
                          ++n
                        ) {
                          var r = t[n];
                          0 === --r.referenceCount &&
                            this._removeInactiveBinding(r);
                        }
                      },
                    },
                    {
                      key: "_lendAction",
                      value: function (e) {
                        var t = this._actions,
                          n = e._cacheIndex,
                          i = this._nActiveActions++,
                          r = t[i];
                        (e._cacheIndex = i),
                          (t[i] = e),
                          (r._cacheIndex = n),
                          (t[n] = r);
                      },
                    },
                    {
                      key: "_takeBackAction",
                      value: function (e) {
                        var t = this._actions,
                          n = e._cacheIndex,
                          i = --this._nActiveActions,
                          r = t[i];
                        (e._cacheIndex = i),
                          (t[i] = e),
                          (r._cacheIndex = n),
                          (t[n] = r);
                      },
                    },
                    {
                      key: "_addInactiveBinding",
                      value: function (e, t, n) {
                        var i = this._bindingsByRootAndName,
                          r = this._bindings,
                          a = i[t];
                        void 0 === a && ((a = {}), (i[t] = a)),
                          (a[n] = e),
                          (e._cacheIndex = r.length),
                          r.push(e);
                      },
                    },
                    {
                      key: "_removeInactiveBinding",
                      value: function (e) {
                        var t = this._bindings,
                          n = e.binding,
                          i = n.rootNode.uuid,
                          r = n.path,
                          a = this._bindingsByRootAndName,
                          o = a[i],
                          s = t[t.length - 1],
                          l = e._cacheIndex;
                        (s._cacheIndex = l),
                          (t[l] = s),
                          t.pop(),
                          delete o[r],
                          0 === Object.keys(o).length && delete a[i];
                      },
                    },
                    {
                      key: "_lendBinding",
                      value: function (e) {
                        var t = this._bindings,
                          n = e._cacheIndex,
                          i = this._nActiveBindings++,
                          r = t[i];
                        (e._cacheIndex = i),
                          (t[i] = e),
                          (r._cacheIndex = n),
                          (t[n] = r);
                      },
                    },
                    {
                      key: "_takeBackBinding",
                      value: function (e) {
                        var t = this._bindings,
                          n = e._cacheIndex,
                          i = --this._nActiveBindings,
                          r = t[i];
                        (e._cacheIndex = i),
                          (t[i] = e),
                          (r._cacheIndex = n),
                          (t[n] = r);
                      },
                    },
                    {
                      key: "_lendControlInterpolant",
                      value: function () {
                        var e = this._controlInterpolants,
                          t = this._nActiveControlInterpolants++,
                          n = e[t];
                        return (
                          void 0 === n &&
                            (((n = new Bc(
                              new Float32Array(2),
                              new Float32Array(2),
                              1,
                              this._controlInterpolantsResultBuffer
                            )).__cacheIndex = t),
                            (e[t] = n)),
                          n
                        );
                      },
                    },
                    {
                      key: "_takeBackControlInterpolant",
                      value: function (e) {
                        var t = this._controlInterpolants,
                          n = e.__cacheIndex,
                          i = --this._nActiveControlInterpolants,
                          r = t[i];
                        (e.__cacheIndex = i),
                          (t[i] = e),
                          (r.__cacheIndex = n),
                          (t[n] = r);
                      },
                    },
                    {
                      key: "clipAction",
                      value: function (e, t, n) {
                        var i = t || this._root,
                          r = i.uuid,
                          a = "string" === typeof e ? qc.findByName(i, e) : e,
                          o = null !== a ? a.uuid : e,
                          s = this._actionsByClip[o],
                          l = null;
                        if (
                          (void 0 === n && (n = null !== a ? a.blendMode : an),
                          void 0 !== s)
                        ) {
                          var u = s.actionByRoot[r];
                          if (void 0 !== u && u.blendMode === n) return u;
                          (l = s.knownActions[0]), null === a && (a = l._clip);
                        }
                        if (null === a) return null;
                        var c = new Wd(this, a, t, n);
                        return (
                          this._bindAction(c, l),
                          this._addInactiveAction(c, o, r),
                          c
                        );
                      },
                    },
                    {
                      key: "existingAction",
                      value: function (e, t) {
                        var n = t || this._root,
                          i = n.uuid,
                          r = "string" === typeof e ? qc.findByName(n, e) : e,
                          a = r ? r.uuid : e,
                          o = this._actionsByClip[a];
                        return (void 0 !== o && o.actionByRoot[i]) || null;
                      },
                    },
                    {
                      key: "stopAllAction",
                      value: function () {
                        for (
                          var e = this._actions, t = this._nActiveActions - 1;
                          t >= 0;
                          --t
                        )
                          e[t].stop();
                        return this;
                      },
                    },
                    {
                      key: "update",
                      value: function (e) {
                        e *= this.timeScale;
                        for (
                          var t = this._actions,
                            n = this._nActiveActions,
                            i = (this.time += e),
                            r = Math.sign(e),
                            a = (this._accuIndex ^= 1),
                            o = 0;
                          o !== n;
                          ++o
                        )
                          t[o]._update(i, e, r, a);
                        for (
                          var s = this._bindings,
                            l = this._nActiveBindings,
                            u = 0;
                          u !== l;
                          ++u
                        )
                          s[u].apply(a);
                        return this;
                      },
                    },
                    {
                      key: "setTime",
                      value: function (e) {
                        this.time = 0;
                        for (var t = 0; t < this._actions.length; t++)
                          this._actions[t].time = 0;
                        return this.update(e);
                      },
                    },
                    {
                      key: "getRoot",
                      value: function () {
                        return this._root;
                      },
                    },
                    {
                      key: "uncacheClip",
                      value: function (e) {
                        var t = this._actions,
                          n = e.uuid,
                          i = this._actionsByClip,
                          r = i[n];
                        if (void 0 !== r) {
                          for (
                            var a = r.knownActions, o = 0, s = a.length;
                            o !== s;
                            ++o
                          ) {
                            var l = a[o];
                            this._deactivateAction(l);
                            var u = l._cacheIndex,
                              c = t[t.length - 1];
                            (l._cacheIndex = null),
                              (l._byClipCacheIndex = null),
                              (c._cacheIndex = u),
                              (t[u] = c),
                              t.pop(),
                              this._removeInactiveBindingsForAction(l);
                          }
                          delete i[n];
                        }
                      },
                    },
                    {
                      key: "uncacheRoot",
                      value: function (e) {
                        var t = e.uuid,
                          n = this._actionsByClip;
                        for (var i in n) {
                          var r = n[i].actionByRoot[t];
                          void 0 !== r &&
                            (this._deactivateAction(r),
                            this._removeInactiveAction(r));
                        }
                        var a = this._bindingsByRootAndName[t];
                        if (void 0 !== a)
                          for (var o in a) {
                            var s = a[o];
                            s.restoreOriginalState(),
                              this._removeInactiveBinding(s);
                          }
                      },
                    },
                    {
                      key: "uncacheAction",
                      value: function (e, t) {
                        var n = this.existingAction(e, t);
                        null !== n &&
                          (this._deactivateAction(n),
                          this._removeInactiveAction(n));
                      },
                    },
                  ]),
                  t
                );
              })(Qn);
            Yd.prototype._controlInterpolantsResultBuffer = new Float32Array(1);
            var qd = (function () {
                function e(t) {
                  f(this, e),
                    "string" === typeof t &&
                      (console.warn(
                        "THREE.Uniform: Type parameter is no longer needed."
                      ),
                      (t = arguments[1])),
                    (this.value = t);
                }
                return (
                  m(e, [
                    {
                      key: "clone",
                      value: function () {
                        return new e(
                          void 0 === this.value.clone
                            ? this.value
                            : this.value.clone()
                        );
                      },
                    },
                  ]),
                  e
                );
              })(),
              Xd = (function (e) {
                function t(e, n) {
                  var i,
                    r =
                      arguments.length > 2 && void 0 !== arguments[2]
                        ? arguments[2]
                        : 1;
                  return (
                    f(this, t),
                    ((i = c(this, h(t).call(this, e, n))).meshPerAttribute =
                      r || 1),
                    i
                  );
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "copy",
                      value: function (e) {
                        return (
                          l(h(t.prototype), "copy", this).call(this, e),
                          (this.meshPerAttribute = e.meshPerAttribute),
                          this
                        );
                      },
                    },
                    {
                      key: "clone",
                      value: function (e) {
                        var n = l(h(t.prototype), "clone", this).call(this, e);
                        return (n.meshPerAttribute = this.meshPerAttribute), n;
                      },
                    },
                    {
                      key: "toJSON",
                      value: function (e) {
                        var n = l(h(t.prototype), "toJSON", this).call(this, e);
                        return (
                          (n.isInstancedInterleavedBuffer = !0),
                          (n.meshPerAttribute = this.meshPerAttribute),
                          n
                        );
                      },
                    },
                  ]),
                  t
                );
              })(gl);
            Xd.prototype.isInstancedInterleavedBuffer = !0;
            var Qd = (function () {
              function e(t, n, i, r, a) {
                f(this, e),
                  (this.buffer = t),
                  (this.type = n),
                  (this.itemSize = i),
                  (this.elementSize = r),
                  (this.count = a),
                  (this.version = 0);
              }
              return (
                m(e, [
                  {
                    key: "setBuffer",
                    value: function (e) {
                      return (this.buffer = e), this;
                    },
                  },
                  {
                    key: "setType",
                    value: function (e, t) {
                      return (this.type = e), (this.elementSize = t), this;
                    },
                  },
                  {
                    key: "setItemSize",
                    value: function (e) {
                      return (this.itemSize = e), this;
                    },
                  },
                  {
                    key: "setCount",
                    value: function (e) {
                      return (this.count = e), this;
                    },
                  },
                  {
                    key: "needsUpdate",
                    set: function (e) {
                      !0 === e && this.version++;
                    },
                  },
                ]),
                e
              );
            })();
            Qd.prototype.isGLBufferAttribute = !0;
            var Zd = (function () {
              function e(t, n) {
                var i =
                    arguments.length > 2 && void 0 !== arguments[2]
                      ? arguments[2]
                      : 0,
                  r =
                    arguments.length > 3 && void 0 !== arguments[3]
                      ? arguments[3]
                      : 1 / 0;
                f(this, e),
                  (this.ray = new Ji(t, n)),
                  (this.near = i),
                  (this.far = r),
                  (this.camera = null),
                  (this.layers = new ur()),
                  (this.params = {
                    Mesh: {},
                    Line: { threshold: 1 },
                    LOD: {},
                    Points: { threshold: 1 },
                    Sprite: {},
                  });
              }
              return (
                m(e, [
                  {
                    key: "set",
                    value: function (e, t) {
                      this.ray.set(e, t);
                    },
                  },
                  {
                    key: "setFromCamera",
                    value: function (e, t) {
                      t && t.isPerspectiveCamera
                        ? (this.ray.origin.setFromMatrixPosition(t.matrixWorld),
                          this.ray.direction
                            .set(e.x, e.y, 0.5)
                            .unproject(t)
                            .sub(this.ray.origin)
                            .normalize(),
                          (this.camera = t))
                        : t && t.isOrthographicCamera
                        ? (this.ray.origin
                            .set(e.x, e.y, (t.near + t.far) / (t.near - t.far))
                            .unproject(t),
                          this.ray.direction
                            .set(0, 0, -1)
                            .transformDirection(t.matrixWorld),
                          (this.camera = t))
                        : console.error(
                            "THREE.Raycaster: Unsupported camera type: " +
                              t.type
                          );
                    },
                  },
                  {
                    key: "intersectObject",
                    value: function (e) {
                      var t =
                          arguments.length > 1 &&
                          void 0 !== arguments[1] &&
                          arguments[1],
                        n =
                          arguments.length > 2 && void 0 !== arguments[2]
                            ? arguments[2]
                            : [];
                      return Kd(e, this, n, t), n.sort(Jd), n;
                    },
                  },
                  {
                    key: "intersectObjects",
                    value: function (e) {
                      for (
                        var t =
                            arguments.length > 1 &&
                            void 0 !== arguments[1] &&
                            arguments[1],
                          n =
                            arguments.length > 2 && void 0 !== arguments[2]
                              ? arguments[2]
                              : [],
                          i = 0,
                          r = e.length;
                        i < r;
                        i++
                      )
                        Kd(e[i], this, n, t);
                      return n.sort(Jd), n;
                    },
                  },
                ]),
                e
              );
            })();
            function Jd(e, t) {
              return e.distance - t.distance;
            }
            function Kd(e, t, n, i) {
              if ((e.layers.test(t.layers) && e.raycast(t, n), !0 === i))
                for (var r = e.children, a = 0, o = r.length; a < o; a++)
                  Kd(r[a], t, n, !0);
            }
            var $d = (function () {
                function e() {
                  var t =
                      arguments.length > 0 && void 0 !== arguments[0]
                        ? arguments[0]
                        : 1,
                    n =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : 0,
                    i =
                      arguments.length > 2 && void 0 !== arguments[2]
                        ? arguments[2]
                        : 0;
                  return (
                    f(this, e),
                    (this.radius = t),
                    (this.phi = n),
                    (this.theta = i),
                    this
                  );
                }
                return (
                  m(e, [
                    {
                      key: "set",
                      value: function (e, t, n) {
                        return (
                          (this.radius = e),
                          (this.phi = t),
                          (this.theta = n),
                          this
                        );
                      },
                    },
                    {
                      key: "copy",
                      value: function (e) {
                        return (
                          (this.radius = e.radius),
                          (this.phi = e.phi),
                          (this.theta = e.theta),
                          this
                        );
                      },
                    },
                    {
                      key: "makeSafe",
                      value: function () {
                        return (
                          (this.phi = Math.max(
                            1e-6,
                            Math.min(Math.PI - 1e-6, this.phi)
                          )),
                          this
                        );
                      },
                    },
                    {
                      key: "setFromVector3",
                      value: function (e) {
                        return this.setFromCartesianCoords(e.x, e.y, e.z);
                      },
                    },
                    {
                      key: "setFromCartesianCoords",
                      value: function (e, t, n) {
                        return (
                          (this.radius = Math.sqrt(e * e + t * t + n * n)),
                          0 === this.radius
                            ? ((this.theta = 0), (this.phi = 0))
                            : ((this.theta = Math.atan2(e, n)),
                              (this.phi = Math.acos(
                                ni(t / this.radius, -1, 1)
                              ))),
                          this
                        );
                      },
                    },
                    {
                      key: "clone",
                      value: function () {
                        return new this.constructor().copy(this);
                      },
                    },
                  ]),
                  e
                );
              })(),
              ep = (function () {
                function e() {
                  var t =
                      arguments.length > 0 && void 0 !== arguments[0]
                        ? arguments[0]
                        : 1,
                    n =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : 0,
                    i =
                      arguments.length > 2 && void 0 !== arguments[2]
                        ? arguments[2]
                        : 0;
                  return (
                    f(this, e),
                    (this.radius = t),
                    (this.theta = n),
                    (this.y = i),
                    this
                  );
                }
                return (
                  m(e, [
                    {
                      key: "set",
                      value: function (e, t, n) {
                        return (
                          (this.radius = e),
                          (this.theta = t),
                          (this.y = n),
                          this
                        );
                      },
                    },
                    {
                      key: "copy",
                      value: function (e) {
                        return (
                          (this.radius = e.radius),
                          (this.theta = e.theta),
                          (this.y = e.y),
                          this
                        );
                      },
                    },
                    {
                      key: "setFromVector3",
                      value: function (e) {
                        return this.setFromCartesianCoords(e.x, e.y, e.z);
                      },
                    },
                    {
                      key: "setFromCartesianCoords",
                      value: function (e, t, n) {
                        return (
                          (this.radius = Math.sqrt(e * e + n * n)),
                          (this.theta = Math.atan2(e, n)),
                          (this.y = t),
                          this
                        );
                      },
                    },
                    {
                      key: "clone",
                      value: function () {
                        return new this.constructor().copy(this);
                      },
                    },
                  ]),
                  e
                );
              })(),
              tp = new ui(),
              np = (function () {
                function e() {
                  var t =
                      arguments.length > 0 && void 0 !== arguments[0]
                        ? arguments[0]
                        : new ui(1 / 0, 1 / 0),
                    n =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : new ui(-1 / 0, -1 / 0);
                  f(this, e), (this.min = t), (this.max = n);
                }
                return (
                  m(e, [
                    {
                      key: "set",
                      value: function (e, t) {
                        return this.min.copy(e), this.max.copy(t), this;
                      },
                    },
                    {
                      key: "setFromPoints",
                      value: function (e) {
                        this.makeEmpty();
                        for (var t = 0, n = e.length; t < n; t++)
                          this.expandByPoint(e[t]);
                        return this;
                      },
                    },
                    {
                      key: "setFromCenterAndSize",
                      value: function (e, t) {
                        var n = tp.copy(t).multiplyScalar(0.5);
                        return (
                          this.min.copy(e).sub(n), this.max.copy(e).add(n), this
                        );
                      },
                    },
                    {
                      key: "clone",
                      value: function () {
                        return new this.constructor().copy(this);
                      },
                    },
                    {
                      key: "copy",
                      value: function (e) {
                        return this.min.copy(e.min), this.max.copy(e.max), this;
                      },
                    },
                    {
                      key: "makeEmpty",
                      value: function () {
                        return (
                          (this.min.x = this.min.y = 1 / 0),
                          (this.max.x = this.max.y = -1 / 0),
                          this
                        );
                      },
                    },
                    {
                      key: "isEmpty",
                      value: function () {
                        return (
                          this.max.x < this.min.x || this.max.y < this.min.y
                        );
                      },
                    },
                    {
                      key: "getCenter",
                      value: function (e) {
                        return (
                          void 0 === e &&
                            (console.warn(
                              "THREE.Box2: .getCenter() target is now required"
                            ),
                            (e = new ui())),
                          this.isEmpty()
                            ? e.set(0, 0)
                            : e
                                .addVectors(this.min, this.max)
                                .multiplyScalar(0.5)
                        );
                      },
                    },
                    {
                      key: "getSize",
                      value: function (e) {
                        return (
                          void 0 === e &&
                            (console.warn(
                              "THREE.Box2: .getSize() target is now required"
                            ),
                            (e = new ui())),
                          this.isEmpty()
                            ? e.set(0, 0)
                            : e.subVectors(this.max, this.min)
                        );
                      },
                    },
                    {
                      key: "expandByPoint",
                      value: function (e) {
                        return this.min.min(e), this.max.max(e), this;
                      },
                    },
                    {
                      key: "expandByVector",
                      value: function (e) {
                        return this.min.sub(e), this.max.add(e), this;
                      },
                    },
                    {
                      key: "expandByScalar",
                      value: function (e) {
                        return (
                          this.min.addScalar(-e), this.max.addScalar(e), this
                        );
                      },
                    },
                    {
                      key: "containsPoint",
                      value: function (e) {
                        return !(
                          e.x < this.min.x ||
                          e.x > this.max.x ||
                          e.y < this.min.y ||
                          e.y > this.max.y
                        );
                      },
                    },
                    {
                      key: "containsBox",
                      value: function (e) {
                        return (
                          this.min.x <= e.min.x &&
                          e.max.x <= this.max.x &&
                          this.min.y <= e.min.y &&
                          e.max.y <= this.max.y
                        );
                      },
                    },
                    {
                      key: "getParameter",
                      value: function (e, t) {
                        return (
                          void 0 === t &&
                            (console.warn(
                              "THREE.Box2: .getParameter() target is now required"
                            ),
                            (t = new ui())),
                          t.set(
                            (e.x - this.min.x) / (this.max.x - this.min.x),
                            (e.y - this.min.y) / (this.max.y - this.min.y)
                          )
                        );
                      },
                    },
                    {
                      key: "intersectsBox",
                      value: function (e) {
                        return !(
                          e.max.x < this.min.x ||
                          e.min.x > this.max.x ||
                          e.max.y < this.min.y ||
                          e.min.y > this.max.y
                        );
                      },
                    },
                    {
                      key: "clampPoint",
                      value: function (e, t) {
                        return (
                          void 0 === t &&
                            (console.warn(
                              "THREE.Box2: .clampPoint() target is now required"
                            ),
                            (t = new ui())),
                          t.copy(e).clamp(this.min, this.max)
                        );
                      },
                    },
                    {
                      key: "distanceToPoint",
                      value: function (e) {
                        return tp
                          .copy(e)
                          .clamp(this.min, this.max)
                          .sub(e)
                          .length();
                      },
                    },
                    {
                      key: "intersect",
                      value: function (e) {
                        return this.min.max(e.min), this.max.min(e.max), this;
                      },
                    },
                    {
                      key: "union",
                      value: function (e) {
                        return this.min.min(e.min), this.max.max(e.max), this;
                      },
                    },
                    {
                      key: "translate",
                      value: function (e) {
                        return this.min.add(e), this.max.add(e), this;
                      },
                    },
                    {
                      key: "equals",
                      value: function (e) {
                        return e.min.equals(this.min) && e.max.equals(this.max);
                      },
                    },
                  ]),
                  e
                );
              })();
            np.prototype.isBox2 = !0;
            var ip = new _i(),
              rp = new _i(),
              ap = (function () {
                function e() {
                  var t =
                      arguments.length > 0 && void 0 !== arguments[0]
                        ? arguments[0]
                        : new _i(),
                    n =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : new _i();
                  f(this, e), (this.start = t), (this.end = n);
                }
                return (
                  m(e, [
                    {
                      key: "set",
                      value: function (e, t) {
                        return this.start.copy(e), this.end.copy(t), this;
                      },
                    },
                    {
                      key: "copy",
                      value: function (e) {
                        return (
                          this.start.copy(e.start), this.end.copy(e.end), this
                        );
                      },
                    },
                    {
                      key: "getCenter",
                      value: function (e) {
                        return (
                          void 0 === e &&
                            (console.warn(
                              "THREE.Line3: .getCenter() target is now required"
                            ),
                            (e = new _i())),
                          e.addVectors(this.start, this.end).multiplyScalar(0.5)
                        );
                      },
                    },
                    {
                      key: "delta",
                      value: function (e) {
                        return (
                          void 0 === e &&
                            (console.warn(
                              "THREE.Line3: .delta() target is now required"
                            ),
                            (e = new _i())),
                          e.subVectors(this.end, this.start)
                        );
                      },
                    },
                    {
                      key: "distanceSq",
                      value: function () {
                        return this.start.distanceToSquared(this.end);
                      },
                    },
                    {
                      key: "distance",
                      value: function () {
                        return this.start.distanceTo(this.end);
                      },
                    },
                    {
                      key: "at",
                      value: function (e, t) {
                        return (
                          void 0 === t &&
                            (console.warn(
                              "THREE.Line3: .at() target is now required"
                            ),
                            (t = new _i())),
                          this.delta(t).multiplyScalar(e).add(this.start)
                        );
                      },
                    },
                    {
                      key: "closestPointToPointParameter",
                      value: function (e, t) {
                        ip.subVectors(e, this.start),
                          rp.subVectors(this.end, this.start);
                        var n = rp.dot(rp),
                          i = rp.dot(ip) / n;
                        return t && (i = ni(i, 0, 1)), i;
                      },
                    },
                    {
                      key: "closestPointToPoint",
                      value: function (e, t, n) {
                        var i = this.closestPointToPointParameter(e, t);
                        return (
                          void 0 === n &&
                            (console.warn(
                              "THREE.Line3: .closestPointToPoint() target is now required"
                            ),
                            (n = new _i())),
                          this.delta(n).multiplyScalar(i).add(this.start)
                        );
                      },
                    },
                    {
                      key: "applyMatrix4",
                      value: function (e) {
                        return (
                          this.start.applyMatrix4(e),
                          this.end.applyMatrix4(e),
                          this
                        );
                      },
                    },
                    {
                      key: "equals",
                      value: function (e) {
                        return (
                          e.start.equals(this.start) && e.end.equals(this.end)
                        );
                      },
                    },
                    {
                      key: "clone",
                      value: function () {
                        return new this.constructor().copy(this);
                      },
                    },
                  ]),
                  e
                );
              })(),
              op = (function (e) {
                function t(e) {
                  var n;
                  return (
                    f(this, t),
                    ((n = c(this, h(t).call(this))).material = e),
                    (n.render = function () {}),
                    (n.hasPositions = !1),
                    (n.hasNormals = !1),
                    (n.hasColors = !1),
                    (n.hasUvs = !1),
                    (n.positionArray = null),
                    (n.normalArray = null),
                    (n.colorArray = null),
                    (n.uvArray = null),
                    (n.count = 0),
                    n
                  );
                }
                return p(t, e), t;
              })(Sr);
            op.prototype.isImmediateRenderObject = !0;
            var sp = new _i(),
              lp = (function (e) {
                function t(e, n) {
                  var i;
                  f(this, t),
                    ((i = c(this, h(t).call(this))).light = e),
                    i.light.updateMatrixWorld(),
                    (i.matrix = e.matrixWorld),
                    (i.matrixAutoUpdate = !1),
                    (i.color = n);
                  for (
                    var r = new ya(),
                      a = [
                        0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0, 0, 0, -1, 0, 1,
                        0, 0, 0, 0, 1, 1, 0, 0, 0, 0, -1, 1,
                      ],
                      o = 0,
                      s = 1;
                    o < 32;
                    o++, s++
                  ) {
                    var l = (o / 32) * Math.PI * 2,
                      u = (s / 32) * Math.PI * 2;
                    a.push(
                      Math.cos(l),
                      Math.sin(l),
                      1,
                      Math.cos(u),
                      Math.sin(u),
                      1
                    );
                  }
                  r.setAttribute("position", new oa(a, 3));
                  var d = new tu({ fog: !1, toneMapped: !1 });
                  return (i.cone = new cu(r, d)), i.add(i.cone), i.update(), i;
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "dispose",
                      value: function () {
                        this.cone.geometry.dispose(),
                          this.cone.material.dispose();
                      },
                    },
                    {
                      key: "update",
                      value: function () {
                        this.light.updateMatrixWorld();
                        var e = this.light.distance ? this.light.distance : 1e3,
                          t = e * Math.tan(this.light.angle);
                        this.cone.scale.set(t, t, e),
                          sp.setFromMatrixPosition(
                            this.light.target.matrixWorld
                          ),
                          this.cone.lookAt(sp),
                          void 0 !== this.color
                            ? this.cone.material.color.set(this.color)
                            : this.cone.material.color.copy(this.light.color);
                      },
                    },
                  ]),
                  t
                );
              })(Sr),
              up = new _i(),
              cp = new Ki(),
              hp = new Ki(),
              dp = (function (e) {
                function t(e) {
                  var n;
                  f(this, t);
                  for (
                    var i = (function e(t) {
                        var n = [];
                        t && t.isBone && n.push(t);
                        for (var i = 0; i < t.children.length; i++)
                          n.push.apply(n, e(t.children[i]));
                        return n;
                      })(e),
                      r = new ya(),
                      a = [],
                      o = [],
                      s = new qr(0, 0, 1),
                      l = new qr(0, 1, 0),
                      u = 0;
                    u < i.length;
                    u++
                  ) {
                    var d = i[u];
                    d.parent &&
                      d.parent.isBone &&
                      (a.push(0, 0, 0),
                      a.push(0, 0, 0),
                      o.push(s.r, s.g, s.b),
                      o.push(l.r, l.g, l.b));
                  }
                  r.setAttribute("position", new oa(a, 3)),
                    r.setAttribute("color", new oa(o, 3));
                  var p = new tu({
                    vertexColors: !0,
                    depthTest: !1,
                    depthWrite: !1,
                    toneMapped: !1,
                    transparent: !0,
                  });
                  return (
                    ((n = c(this, h(t).call(this, r, p))).type =
                      "SkeletonHelper"),
                    (n.isSkeletonHelper = !0),
                    (n.root = e),
                    (n.bones = i),
                    (n.matrix = e.matrixWorld),
                    (n.matrixAutoUpdate = !1),
                    n
                  );
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "updateMatrixWorld",
                      value: function (e) {
                        var n = this.bones,
                          i = this.geometry,
                          r = i.getAttribute("position");
                        hp.copy(this.root.matrixWorld).invert();
                        for (var a = 0, o = 0; a < n.length; a++) {
                          var s = n[a];
                          s.parent &&
                            s.parent.isBone &&
                            (cp.multiplyMatrices(hp, s.matrixWorld),
                            up.setFromMatrixPosition(cp),
                            r.setXYZ(o, up.x, up.y, up.z),
                            cp.multiplyMatrices(hp, s.parent.matrixWorld),
                            up.setFromMatrixPosition(cp),
                            r.setXYZ(o + 1, up.x, up.y, up.z),
                            (o += 2));
                        }
                        (i.getAttribute("position").needsUpdate = !0),
                          l(h(t.prototype), "updateMatrixWorld", this).call(
                            this,
                            e
                          );
                      },
                    },
                  ]),
                  t
                );
              })(cu),
              pp = (function (e) {
                function t(e, n, i) {
                  var r;
                  f(this, t);
                  var a = new mc(n, 4, 2),
                    o = new Xr({ wireframe: !0, fog: !1, toneMapped: !1 });
                  return (
                    ((r = c(this, h(t).call(this, a, o))).light = e),
                    r.light.updateMatrixWorld(),
                    (r.color = i),
                    (r.type = "PointLightHelper"),
                    (r.matrix = r.light.matrixWorld),
                    (r.matrixAutoUpdate = !1),
                    r.update(),
                    r
                  );
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "dispose",
                      value: function () {
                        this.geometry.dispose(), this.material.dispose();
                      },
                    },
                    {
                      key: "update",
                      value: function () {
                        void 0 !== this.color
                          ? this.material.color.set(this.color)
                          : this.material.color.copy(this.light.color);
                      },
                    },
                  ]),
                  t
                );
              })(Oa),
              fp = new _i(),
              mp = new qr(),
              vp = new qr(),
              gp = (function (e) {
                function t(e, n, i) {
                  var r;
                  f(this, t),
                    ((r = c(this, h(t).call(this))).light = e),
                    r.light.updateMatrixWorld(),
                    (r.matrix = e.matrixWorld),
                    (r.matrixAutoUpdate = !1),
                    (r.color = i);
                  var a = new hc(n);
                  a.rotateY(0.5 * Math.PI),
                    (r.material = new Xr({
                      wireframe: !0,
                      fog: !1,
                      toneMapped: !1,
                    })),
                    void 0 === r.color && (r.material.vertexColors = !0);
                  var o = a.getAttribute("position"),
                    s = new Float32Array(3 * o.count);
                  return (
                    a.setAttribute("color", new Jr(s, 3)),
                    r.add(new Oa(a, r.material)),
                    r.update(),
                    r
                  );
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "dispose",
                      value: function () {
                        this.children[0].geometry.dispose(),
                          this.children[0].material.dispose();
                      },
                    },
                    {
                      key: "update",
                      value: function () {
                        var e = this.children[0];
                        if (void 0 !== this.color)
                          this.material.color.set(this.color);
                        else {
                          var t = e.geometry.getAttribute("color");
                          mp.copy(this.light.color),
                            vp.copy(this.light.groundColor);
                          for (var n = 0, i = t.count; n < i; n++) {
                            var r = n < i / 2 ? mp : vp;
                            t.setXYZ(n, r.r, r.g, r.b);
                          }
                          t.needsUpdate = !0;
                        }
                        e.lookAt(
                          fp
                            .setFromMatrixPosition(this.light.matrixWorld)
                            .negate()
                        );
                      },
                    },
                  ]),
                  t
                );
              })(Sr),
              yp = (function (e) {
                function t() {
                  var e,
                    n =
                      arguments.length > 0 && void 0 !== arguments[0]
                        ? arguments[0]
                        : 10,
                    i =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : 10,
                    r =
                      arguments.length > 2 && void 0 !== arguments[2]
                        ? arguments[2]
                        : 4473924,
                    a =
                      arguments.length > 3 && void 0 !== arguments[3]
                        ? arguments[3]
                        : 8947848;
                  f(this, t), (r = new qr(r)), (a = new qr(a));
                  for (
                    var o = i / 2,
                      s = n / i,
                      l = n / 2,
                      u = [],
                      d = [],
                      p = 0,
                      m = 0,
                      v = -l;
                    p <= i;
                    p++, v += s
                  ) {
                    u.push(-l, 0, v, l, 0, v), u.push(v, 0, -l, v, 0, l);
                    var g = p === o ? r : a;
                    g.toArray(d, m),
                      (m += 3),
                      g.toArray(d, m),
                      (m += 3),
                      g.toArray(d, m),
                      (m += 3),
                      g.toArray(d, m),
                      (m += 3);
                  }
                  var y = new ya();
                  y.setAttribute("position", new oa(u, 3)),
                    y.setAttribute("color", new oa(d, 3));
                  var x = new tu({ vertexColors: !0, toneMapped: !1 });
                  return (
                    ((e = c(this, h(t).call(this, y, x))).type = "GridHelper"),
                    e
                  );
                }
                return p(t, e), t;
              })(cu),
              xp = (function (e) {
                function t() {
                  var e,
                    n =
                      arguments.length > 0 && void 0 !== arguments[0]
                        ? arguments[0]
                        : 10,
                    i =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : 16,
                    r =
                      arguments.length > 2 && void 0 !== arguments[2]
                        ? arguments[2]
                        : 8,
                    a =
                      arguments.length > 3 && void 0 !== arguments[3]
                        ? arguments[3]
                        : 64,
                    o =
                      arguments.length > 4 && void 0 !== arguments[4]
                        ? arguments[4]
                        : 4473924,
                    s =
                      arguments.length > 5 && void 0 !== arguments[5]
                        ? arguments[5]
                        : 8947848;
                  f(this, t), (o = new qr(o)), (s = new qr(s));
                  for (var l = [], u = [], d = 0; d <= i; d++) {
                    var p = (d / i) * (2 * Math.PI),
                      m = Math.sin(p) * n,
                      v = Math.cos(p) * n;
                    l.push(0, 0, 0), l.push(m, 0, v);
                    var g = 1 & d ? o : s;
                    u.push(g.r, g.g, g.b), u.push(g.r, g.g, g.b);
                  }
                  for (var y = 0; y <= r; y++)
                    for (
                      var x = 1 & y ? o : s, b = n - (n / r) * y, _ = 0;
                      _ < a;
                      _++
                    ) {
                      var w = (_ / a) * (2 * Math.PI),
                        S = Math.sin(w) * b,
                        E = Math.cos(w) * b;
                      l.push(S, 0, E),
                        u.push(x.r, x.g, x.b),
                        (w = ((_ + 1) / a) * (2 * Math.PI)),
                        (S = Math.sin(w) * b),
                        (E = Math.cos(w) * b),
                        l.push(S, 0, E),
                        u.push(x.r, x.g, x.b);
                    }
                  var M = new ya();
                  M.setAttribute("position", new oa(l, 3)),
                    M.setAttribute("color", new oa(u, 3));
                  var A = new tu({ vertexColors: !0, toneMapped: !1 });
                  return (
                    ((e = c(this, h(t).call(this, M, A))).type =
                      "PolarGridHelper"),
                    e
                  );
                }
                return p(t, e), t;
              })(cu),
              bp = new _i(),
              _p = new _i(),
              wp = new _i(),
              Sp = (function (e) {
                function t(e, n, i) {
                  var r;
                  f(this, t),
                    ((r = c(this, h(t).call(this))).light = e),
                    r.light.updateMatrixWorld(),
                    (r.matrix = e.matrixWorld),
                    (r.matrixAutoUpdate = !1),
                    (r.color = i),
                    void 0 === n && (n = 1);
                  var a = new ya();
                  a.setAttribute(
                    "position",
                    new oa(
                      [-n, n, 0, n, n, 0, n, -n, 0, -n, -n, 0, -n, n, 0],
                      3
                    )
                  );
                  var o = new tu({ fog: !1, toneMapped: !1 });
                  return (
                    (r.lightPlane = new su(a, o)),
                    r.add(r.lightPlane),
                    (a = new ya()).setAttribute(
                      "position",
                      new oa([0, 0, 0, 0, 0, 1], 3)
                    ),
                    (r.targetLine = new su(a, o)),
                    r.add(r.targetLine),
                    r.update(),
                    r
                  );
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "dispose",
                      value: function () {
                        this.lightPlane.geometry.dispose(),
                          this.lightPlane.material.dispose(),
                          this.targetLine.geometry.dispose(),
                          this.targetLine.material.dispose();
                      },
                    },
                    {
                      key: "update",
                      value: function () {
                        bp.setFromMatrixPosition(this.light.matrixWorld),
                          _p.setFromMatrixPosition(
                            this.light.target.matrixWorld
                          ),
                          wp.subVectors(_p, bp),
                          this.lightPlane.lookAt(_p),
                          void 0 !== this.color
                            ? (this.lightPlane.material.color.set(this.color),
                              this.targetLine.material.color.set(this.color))
                            : (this.lightPlane.material.color.copy(
                                this.light.color
                              ),
                              this.targetLine.material.color.copy(
                                this.light.color
                              )),
                          this.targetLine.lookAt(_p),
                          (this.targetLine.scale.z = wp.length());
                      },
                    },
                  ]),
                  t
                );
              })(Sr),
              Ep = new _i(),
              Mp = new Ga(),
              Ap = (function (e) {
                function t(e) {
                  var n;
                  f(this, t);
                  var i = new ya(),
                    r = new tu({
                      color: 16777215,
                      vertexColors: !0,
                      toneMapped: !1,
                    }),
                    a = [],
                    o = [],
                    s = {},
                    l = new qr(16755200),
                    u = new qr(16711680),
                    d = new qr(43775),
                    p = new qr(16777215),
                    m = new qr(3355443);
                  function v(e, t, n) {
                    g(e, n), g(t, n);
                  }
                  function g(e, t) {
                    a.push(0, 0, 0),
                      o.push(t.r, t.g, t.b),
                      void 0 === s[e] && (s[e] = []),
                      s[e].push(a.length / 3 - 1);
                  }
                  return (
                    v("n1", "n2", l),
                    v("n2", "n4", l),
                    v("n4", "n3", l),
                    v("n3", "n1", l),
                    v("f1", "f2", l),
                    v("f2", "f4", l),
                    v("f4", "f3", l),
                    v("f3", "f1", l),
                    v("n1", "f1", l),
                    v("n2", "f2", l),
                    v("n3", "f3", l),
                    v("n4", "f4", l),
                    v("p", "n1", u),
                    v("p", "n2", u),
                    v("p", "n3", u),
                    v("p", "n4", u),
                    v("u1", "u2", d),
                    v("u2", "u3", d),
                    v("u3", "u1", d),
                    v("c", "t", p),
                    v("p", "c", m),
                    v("cn1", "cn2", m),
                    v("cn3", "cn4", m),
                    v("cf1", "cf2", m),
                    v("cf3", "cf4", m),
                    i.setAttribute("position", new oa(a, 3)),
                    i.setAttribute("color", new oa(o, 3)),
                    ((n = c(this, h(t).call(this, i, r))).type =
                      "CameraHelper"),
                    (n.camera = e),
                    n.camera.updateProjectionMatrix &&
                      n.camera.updateProjectionMatrix(),
                    (n.matrix = e.matrixWorld),
                    (n.matrixAutoUpdate = !1),
                    (n.pointMap = s),
                    n.update(),
                    n
                  );
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "update",
                      value: function () {
                        var e = this.geometry,
                          t = this.pointMap;
                        Mp.projectionMatrixInverse.copy(
                          this.camera.projectionMatrixInverse
                        ),
                          Tp("c", t, e, Mp, 0, 0, -1),
                          Tp("t", t, e, Mp, 0, 0, 1),
                          Tp("n1", t, e, Mp, -1, -1, -1),
                          Tp("n2", t, e, Mp, 1, -1, -1),
                          Tp("n3", t, e, Mp, -1, 1, -1),
                          Tp("n4", t, e, Mp, 1, 1, -1),
                          Tp("f1", t, e, Mp, -1, -1, 1),
                          Tp("f2", t, e, Mp, 1, -1, 1),
                          Tp("f3", t, e, Mp, -1, 1, 1),
                          Tp("f4", t, e, Mp, 1, 1, 1),
                          Tp("u1", t, e, Mp, 0.7, 1.1, -1),
                          Tp("u2", t, e, Mp, -0.7, 1.1, -1),
                          Tp("u3", t, e, Mp, 0, 2, -1),
                          Tp("cf1", t, e, Mp, -1, 0, 1),
                          Tp("cf2", t, e, Mp, 1, 0, 1),
                          Tp("cf3", t, e, Mp, 0, -1, 1),
                          Tp("cf4", t, e, Mp, 0, 1, 1),
                          Tp("cn1", t, e, Mp, -1, 0, -1),
                          Tp("cn2", t, e, Mp, 1, 0, -1),
                          Tp("cn3", t, e, Mp, 0, -1, -1),
                          Tp("cn4", t, e, Mp, 0, 1, -1),
                          (e.getAttribute("position").needsUpdate = !0);
                      },
                    },
                    {
                      key: "dispose",
                      value: function () {
                        this.geometry.dispose(), this.material.dispose();
                      },
                    },
                  ]),
                  t
                );
              })(cu);
            function Tp(e, t, n, i, r, a, o) {
              Ep.set(r, a, o).unproject(i);
              var s = t[e];
              if (void 0 !== s)
                for (
                  var l = n.getAttribute("position"), u = 0, c = s.length;
                  u < c;
                  u++
                )
                  l.setXYZ(s[u], Ep.x, Ep.y, Ep.z);
            }
            var Cp,
              kp,
              Pp = new Ei(),
              Lp = (function (e) {
                function t(e) {
                  var n,
                    i =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : 16776960;
                  f(this, t);
                  var r = new Uint16Array([
                      0, 1, 1, 2, 2, 3, 3, 0, 4, 5, 5, 6, 6, 7, 7, 4, 0, 4, 1,
                      5, 2, 6, 3, 7,
                    ]),
                    a = new Float32Array(24),
                    o = new ya();
                  return (
                    o.setIndex(new Jr(r, 1)),
                    o.setAttribute("position", new Jr(a, 3)),
                    ((n = c(
                      this,
                      h(t).call(this, o, new tu({ color: i, toneMapped: !1 }))
                    )).object = e),
                    (n.type = "BoxHelper"),
                    (n.matrixAutoUpdate = !1),
                    n.update(),
                    n
                  );
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "update",
                      value: function (e) {
                        if (
                          (void 0 !== e &&
                            console.warn(
                              "THREE.BoxHelper: .update() has no longer arguments."
                            ),
                          void 0 !== this.object &&
                            Pp.setFromObject(this.object),
                          !Pp.isEmpty())
                        ) {
                          var t = Pp.min,
                            n = Pp.max,
                            i = this.geometry.attributes.position,
                            r = i.array;
                          (r[0] = n.x),
                            (r[1] = n.y),
                            (r[2] = n.z),
                            (r[3] = t.x),
                            (r[4] = n.y),
                            (r[5] = n.z),
                            (r[6] = t.x),
                            (r[7] = t.y),
                            (r[8] = n.z),
                            (r[9] = n.x),
                            (r[10] = t.y),
                            (r[11] = n.z),
                            (r[12] = n.x),
                            (r[13] = n.y),
                            (r[14] = t.z),
                            (r[15] = t.x),
                            (r[16] = n.y),
                            (r[17] = t.z),
                            (r[18] = t.x),
                            (r[19] = t.y),
                            (r[20] = t.z),
                            (r[21] = n.x),
                            (r[22] = t.y),
                            (r[23] = t.z),
                            (i.needsUpdate = !0),
                            this.geometry.computeBoundingSphere();
                        }
                      },
                    },
                    {
                      key: "setFromObject",
                      value: function (e) {
                        return (this.object = e), this.update(), this;
                      },
                    },
                    {
                      key: "copy",
                      value: function (e) {
                        return (
                          cu.prototype.copy.call(this, e),
                          (this.object = e.object),
                          this
                        );
                      },
                    },
                  ]),
                  t
                );
              })(cu),
              Rp = (function (e) {
                function t(e) {
                  var n,
                    i =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : 16776960;
                  f(this, t);
                  var r = new Uint16Array([
                      0, 1, 1, 2, 2, 3, 3, 0, 4, 5, 5, 6, 6, 7, 7, 4, 0, 4, 1,
                      5, 2, 6, 3, 7,
                    ]),
                    a = [
                      1, 1, 1, -1, 1, 1, -1, -1, 1, 1, -1, 1, 1, 1, -1, -1, 1,
                      -1, -1, -1, -1, 1, -1, -1,
                    ],
                    o = new ya();
                  return (
                    o.setIndex(new Jr(r, 1)),
                    o.setAttribute("position", new oa(a, 3)),
                    ((n = c(
                      this,
                      h(t).call(this, o, new tu({ color: i, toneMapped: !1 }))
                    )).box = e),
                    (n.type = "Box3Helper"),
                    n.geometry.computeBoundingSphere(),
                    n
                  );
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "updateMatrixWorld",
                      value: function (e) {
                        var n = this.box;
                        n.isEmpty() ||
                          (n.getCenter(this.position),
                          n.getSize(this.scale),
                          this.scale.multiplyScalar(0.5),
                          l(h(t.prototype), "updateMatrixWorld", this).call(
                            this,
                            e
                          ));
                      },
                    },
                  ]),
                  t
                );
              })(cu),
              Ip = (function (e) {
                function t(e) {
                  var n,
                    i =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : 1,
                    r =
                      arguments.length > 2 && void 0 !== arguments[2]
                        ? arguments[2]
                        : 16776960;
                  f(this, t);
                  var a = r,
                    o = [
                      1, -1, 1, -1, 1, 1, -1, -1, 1, 1, 1, 1, -1, 1, 1, -1, -1,
                      1, 1, -1, 1, 1, 1, 1, 0, 0, 1, 0, 0, 0,
                    ],
                    s = new ya();
                  s.setAttribute("position", new oa(o, 3)),
                    s.computeBoundingSphere(),
                    ((n = c(
                      this,
                      h(t).call(this, s, new tu({ color: a, toneMapped: !1 }))
                    )).type = "PlaneHelper"),
                    (n.plane = e),
                    (n.size = i);
                  var l = [
                      1, 1, 1, -1, 1, 1, -1, -1, 1, 1, 1, 1, -1, -1, 1, 1, -1,
                      1,
                    ],
                    u = new ya();
                  return (
                    u.setAttribute("position", new oa(l, 3)),
                    u.computeBoundingSphere(),
                    n.add(
                      new Oa(
                        u,
                        new Xr({
                          color: a,
                          opacity: 0.2,
                          transparent: !0,
                          depthWrite: !1,
                          toneMapped: !1,
                        })
                      )
                    ),
                    n
                  );
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "updateMatrixWorld",
                      value: function (e) {
                        var n = -this.plane.constant;
                        Math.abs(n) < 1e-8 && (n = 1e-8),
                          this.scale.set(0.5 * this.size, 0.5 * this.size, n),
                          (this.children[0].material.side = n < 0 ? C : T),
                          this.lookAt(this.plane.normal),
                          l(h(t.prototype), "updateMatrixWorld", this).call(
                            this,
                            e
                          );
                      },
                    },
                  ]),
                  t
                );
              })(su),
              Fp = new _i(),
              Np = (function (e) {
                function t() {
                  var e,
                    n =
                      arguments.length > 0 && void 0 !== arguments[0]
                        ? arguments[0]
                        : new _i(0, 0, 1),
                    i =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : new _i(0, 0, 0),
                    r =
                      arguments.length > 2 && void 0 !== arguments[2]
                        ? arguments[2]
                        : 1,
                    a =
                      arguments.length > 3 && void 0 !== arguments[3]
                        ? arguments[3]
                        : 16776960,
                    o =
                      arguments.length > 4 && void 0 !== arguments[4]
                        ? arguments[4]
                        : 0.2 * r,
                    s =
                      arguments.length > 5 && void 0 !== arguments[5]
                        ? arguments[5]
                        : 0.2 * o;
                  return (
                    f(this, t),
                    ((e = c(this, h(t).call(this))).type = "ArrowHelper"),
                    void 0 === Cp &&
                      ((Cp = new ya()).setAttribute(
                        "position",
                        new oa([0, 0, 0, 0, 1, 0], 3)
                      ),
                      (kp = new Eu(0, 0.5, 1, 5, 1)).translate(0, -0.5, 0)),
                    e.position.copy(i),
                    (e.line = new su(Cp, new tu({ color: a, toneMapped: !1 }))),
                    (e.line.matrixAutoUpdate = !1),
                    e.add(e.line),
                    (e.cone = new Oa(kp, new Xr({ color: a, toneMapped: !1 }))),
                    (e.cone.matrixAutoUpdate = !1),
                    e.add(e.cone),
                    e.setDirection(n),
                    e.setLength(r, o, s),
                    e
                  );
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "setDirection",
                      value: function (e) {
                        if (e.y > 0.99999) this.quaternion.set(0, 0, 0, 1);
                        else if (e.y < -0.99999)
                          this.quaternion.set(1, 0, 0, 0);
                        else {
                          Fp.set(e.z, 0, -e.x).normalize();
                          var t = Math.acos(e.y);
                          this.quaternion.setFromAxisAngle(Fp, t);
                        }
                      },
                    },
                    {
                      key: "setLength",
                      value: function (e) {
                        var t =
                            arguments.length > 1 && void 0 !== arguments[1]
                              ? arguments[1]
                              : 0.2 * e,
                          n =
                            arguments.length > 2 && void 0 !== arguments[2]
                              ? arguments[2]
                              : 0.2 * t;
                        this.line.scale.set(1, Math.max(1e-4, e - t), 1),
                          this.line.updateMatrix(),
                          this.cone.scale.set(n, t, n),
                          (this.cone.position.y = e),
                          this.cone.updateMatrix();
                      },
                    },
                    {
                      key: "setColor",
                      value: function (e) {
                        this.line.material.color.set(e),
                          this.cone.material.color.set(e);
                      },
                    },
                    {
                      key: "copy",
                      value: function (e) {
                        return (
                          l(h(t.prototype), "copy", this).call(this, e, !1),
                          this.line.copy(e.line),
                          this.cone.copy(e.cone),
                          this
                        );
                      },
                    },
                  ]),
                  t
                );
              })(Sr),
              Op = (function (e) {
                function t() {
                  var e,
                    n =
                      arguments.length > 0 && void 0 !== arguments[0]
                        ? arguments[0]
                        : 1;
                  f(this, t);
                  var i = [
                      0,
                      0,
                      0,
                      n,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      n,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      n,
                    ],
                    r = [
                      1, 0, 0, 1, 0.6, 0, 0, 1, 0, 0.6, 1, 0, 0, 0, 1, 0, 0.6,
                      1,
                    ],
                    a = new ya();
                  a.setAttribute("position", new oa(i, 3)),
                    a.setAttribute("color", new oa(r, 3));
                  var o = new tu({ vertexColors: !0, toneMapped: !1 });
                  return (
                    ((e = c(this, h(t).call(this, a, o))).type = "AxesHelper"),
                    e
                  );
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "dispose",
                      value: function () {
                        this.geometry.dispose(), this.material.dispose();
                      },
                    },
                  ]),
                  t
                );
              })(cu),
              Bp = new Float32Array(1),
              Dp = new Int32Array(Bp.buffer),
              Vp = (function () {
                function e() {
                  f(this, e);
                }
                return (
                  m(e, null, [
                    {
                      key: "toHalfFloat",
                      value: function (e) {
                        Bp[0] = e;
                        var t = Dp[0],
                          n = (t >> 16) & 32768,
                          i = (t >> 12) & 2047,
                          r = (t >> 23) & 255;
                        return r < 103
                          ? n
                          : r > 142
                          ? ((n |= 31744),
                            (n |= (255 == r ? 0 : 1) && 8388607 & t))
                          : r < 113
                          ? (n |=
                              ((i |= 2048) >> (114 - r)) +
                              ((i >> (113 - r)) & 1))
                          : ((n |= ((r - 112) << 10) | (i >> 1)), (n += 1 & i));
                      },
                    },
                  ]),
                  e
                );
              })(),
              Up = Math.pow(2, 8),
              zp = [0.125, 0.215, 0.35, 0.446, 0.526, 0.582],
              jp = 5 + zp.length,
              Gp =
                (o((i = {}), cn, 0),
                o(i, hn, 1),
                o(i, pn, 2),
                o(i, mn, 3),
                o(i, vn, 4),
                o(i, gn, 5),
                o(i, dn, 6),
                i),
              Hp = new Xr({ side: C, depthWrite: !1, depthTest: !1 }),
              Wp = new Oa(new Da(), Hp),
              Yp = new Gh(),
              qp = of(),
              Xp = qp._lodPlanes,
              Qp = qp._sizeLods,
              Zp = qp._sigmas,
              Jp = new qr(),
              Kp = null,
              $p = (1 + Math.sqrt(5)) / 2,
              ef = 1 / $p,
              tf = [
                new _i(1, 1, 1),
                new _i(-1, 1, 1),
                new _i(1, 1, -1),
                new _i(-1, 1, -1),
                new _i(0, $p, ef),
                new _i(0, $p, -ef),
                new _i(ef, 0, $p),
                new _i(-ef, 0, $p),
                new _i($p, ef, 0),
                new _i(-$p, ef, 0),
              ];
            function nf(e) {
              var t = Math.max(e.r, e.g, e.b),
                n = Math.min(Math.max(Math.ceil(Math.log2(t)), -128), 127);
              return e.multiplyScalar(Math.pow(2, -n)), (n + 128) / 255;
            }
            var rf = (function () {
              function e(t) {
                f(this, e),
                  (this._renderer = t),
                  (this._pingPongRenderTarget = null),
                  (this._blurMaterial = (function (e) {
                    var t = new Float32Array(e),
                      n = new _i(0, 1, 0);
                    return new Ec({
                      name: "SphericalGaussianBlur",
                      defines: { n: e },
                      uniforms: {
                        envMap: { value: null },
                        samples: { value: 1 },
                        weights: { value: t },
                        latitudinal: { value: !1 },
                        dTheta: { value: 0 },
                        mipInt: { value: 0 },
                        poleAxis: { value: n },
                        inputEncoding: { value: Gp[cn] },
                        outputEncoding: { value: Gp[cn] },
                      },
                      vertexShader:
                        "\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",
                      fragmentShader:
                        "\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t".concat(
                          "\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t",
                          "\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t"
                        ),
                      blending: R,
                      depthTest: !1,
                      depthWrite: !1,
                    });
                  })(20)),
                  (this._equirectShader = null),
                  (this._cubemapShader = null),
                  this._compileMaterial(this._blurMaterial);
              }
              return (
                m(e, [
                  {
                    key: "fromScene",
                    value: function (e) {
                      var t =
                          arguments.length > 1 && void 0 !== arguments[1]
                            ? arguments[1]
                            : 0,
                        n =
                          arguments.length > 2 && void 0 !== arguments[2]
                            ? arguments[2]
                            : 0.1,
                        i =
                          arguments.length > 3 && void 0 !== arguments[3]
                            ? arguments[3]
                            : 100;
                      Kp = this._renderer.getRenderTarget();
                      var r = this._allocateTargets();
                      return (
                        this._sceneToCubeUV(e, n, i, r),
                        t > 0 && this._blur(r, 0, 0, t),
                        this._applyPMREM(r),
                        this._cleanup(r),
                        r
                      );
                    },
                  },
                  {
                    key: "fromEquirectangular",
                    value: function (e) {
                      return this._fromTexture(e);
                    },
                  },
                  {
                    key: "fromCubemap",
                    value: function (e) {
                      return this._fromTexture(e);
                    },
                  },
                  {
                    key: "compileCubemapShader",
                    value: function () {
                      null === this._cubemapShader &&
                        ((this._cubemapShader = cf()),
                        this._compileMaterial(this._cubemapShader));
                    },
                  },
                  {
                    key: "compileEquirectangularShader",
                    value: function () {
                      null === this._equirectShader &&
                        ((this._equirectShader = uf()),
                        this._compileMaterial(this._equirectShader));
                    },
                  },
                  {
                    key: "dispose",
                    value: function () {
                      this._blurMaterial.dispose(),
                        null !== this._cubemapShader &&
                          this._cubemapShader.dispose(),
                        null !== this._equirectShader &&
                          this._equirectShader.dispose();
                      for (var e = 0; e < Xp.length; e++) Xp[e].dispose();
                    },
                  },
                  {
                    key: "_cleanup",
                    value: function (e) {
                      this._pingPongRenderTarget.dispose(),
                        this._renderer.setRenderTarget(Kp),
                        (e.scissorTest = !1),
                        lf(e, 0, 0, e.width, e.height);
                    },
                  },
                  {
                    key: "_fromTexture",
                    value: function (e) {
                      Kp = this._renderer.getRenderTarget();
                      var t = this._allocateTargets(e);
                      return (
                        this._textureToCubeUV(e, t),
                        this._applyPMREM(t),
                        this._cleanup(t),
                        t
                      );
                    },
                  },
                  {
                    key: "_allocateTargets",
                    value: function (e) {
                      var t = {
                          magFilter: Te,
                          minFilter: Te,
                          generateMipmaps: !1,
                          type: Be,
                          format: et,
                          encoding: af(e) ? e.encoding : pn,
                          depthBuffer: !1,
                        },
                        n = sf(t);
                      return (
                        (n.depthBuffer = !e),
                        (this._pingPongRenderTarget = sf(t)),
                        n
                      );
                    },
                  },
                  {
                    key: "_compileMaterial",
                    value: function (e) {
                      var t = new Oa(Xp[0], e);
                      this._renderer.compile(t, Yp);
                    },
                  },
                  {
                    key: "_sceneToCubeUV",
                    value: function (e, t, n, i) {
                      var r = new Ha(90, 1, t, n),
                        a = [1, -1, 1, 1, 1, 1],
                        o = [1, 1, 1, -1, -1, -1],
                        s = this._renderer,
                        l = s.autoClear,
                        u = s.outputEncoding,
                        c = s.toneMapping;
                      s.getClearColor(Jp),
                        (s.toneMapping = he),
                        (s.outputEncoding = cn),
                        (s.autoClear = !1);
                      var h = !1,
                        d = e.background;
                      if (d) {
                        if (d.isColor) {
                          Hp.color.copy(d).convertSRGBToLinear(),
                            (e.background = null);
                          var p = nf(Hp.color);
                          (Hp.opacity = p), (h = !0);
                        }
                      } else {
                        Hp.color.copy(Jp).convertSRGBToLinear();
                        var f = nf(Hp.color);
                        (Hp.opacity = f), (h = !0);
                      }
                      for (var m = 0; m < 6; m++) {
                        var v = m % 3;
                        0 == v
                          ? (r.up.set(0, a[m], 0), r.lookAt(o[m], 0, 0))
                          : 1 == v
                          ? (r.up.set(0, 0, a[m]), r.lookAt(0, o[m], 0))
                          : (r.up.set(0, a[m], 0), r.lookAt(0, 0, o[m])),
                          lf(i, v * Up, m > 2 ? Up : 0, Up, Up),
                          s.setRenderTarget(i),
                          h && s.render(Wp, r),
                          s.render(e, r);
                      }
                      (s.toneMapping = c),
                        (s.outputEncoding = u),
                        (s.autoClear = l);
                    },
                  },
                  {
                    key: "_textureToCubeUV",
                    value: function (e, t) {
                      var n = this._renderer;
                      e.isCubeTexture
                        ? null == this._cubemapShader &&
                          (this._cubemapShader = cf())
                        : null == this._equirectShader &&
                          (this._equirectShader = uf());
                      var i = e.isCubeTexture
                          ? this._cubemapShader
                          : this._equirectShader,
                        r = new Oa(Xp[0], i),
                        a = i.uniforms;
                      (a.envMap.value = e),
                        e.isCubeTexture ||
                          a.texelSize.value.set(
                            1 / e.image.width,
                            1 / e.image.height
                          ),
                        (a.inputEncoding.value = Gp[e.encoding]),
                        (a.outputEncoding.value = Gp[t.texture.encoding]),
                        lf(t, 0, 0, 3 * Up, 2 * Up),
                        n.setRenderTarget(t),
                        n.render(r, Yp);
                    },
                  },
                  {
                    key: "_applyPMREM",
                    value: function (e) {
                      var t = this._renderer,
                        n = t.autoClear;
                      t.autoClear = !1;
                      for (var i = 1; i < jp; i++) {
                        var r = Math.sqrt(
                            Zp[i] * Zp[i] - Zp[i - 1] * Zp[i - 1]
                          ),
                          a = tf[(i - 1) % tf.length];
                        this._blur(e, i - 1, i, r, a);
                      }
                      t.autoClear = n;
                    },
                  },
                  {
                    key: "_blur",
                    value: function (e, t, n, i, r) {
                      var a = this._pingPongRenderTarget;
                      this._halfBlur(e, a, t, n, i, "latitudinal", r),
                        this._halfBlur(a, e, n, n, i, "longitudinal", r);
                    },
                  },
                  {
                    key: "_halfBlur",
                    value: function (e, t, n, i, r, a, o) {
                      var s = this._renderer,
                        l = this._blurMaterial;
                      "latitudinal" !== a &&
                        "longitudinal" !== a &&
                        console.error(
                          "blur direction must be either latitudinal or longitudinal!"
                        );
                      var u = new Oa(Xp[i], l),
                        c = l.uniforms,
                        h = Qp[n] - 1,
                        d = isFinite(r)
                          ? Math.PI / (2 * h)
                          : (2 * Math.PI) / 39,
                        p = r / d,
                        f = isFinite(r) ? 1 + Math.floor(3 * p) : 20;
                      f > 20 &&
                        console.warn(
                          "sigmaRadians, "
                            .concat(
                              r,
                              ", is too large and will clip, as it requested "
                            )
                            .concat(f, " samples when the maximum is set to ")
                            .concat(20)
                        );
                      for (var m = [], v = 0, g = 0; g < 20; ++g) {
                        var y = g / p,
                          x = Math.exp((-y * y) / 2);
                        m.push(x), 0 == g ? (v += x) : g < f && (v += 2 * x);
                      }
                      for (var b = 0; b < m.length; b++) m[b] = m[b] / v;
                      (c.envMap.value = e.texture),
                        (c.samples.value = f),
                        (c.weights.value = m),
                        (c.latitudinal.value = "latitudinal" === a),
                        o && (c.poleAxis.value = o),
                        (c.dTheta.value = d),
                        (c.mipInt.value = 8 - n),
                        (c.inputEncoding.value = Gp[e.texture.encoding]),
                        (c.outputEncoding.value = Gp[e.texture.encoding]);
                      var _ = Qp[i];
                      lf(
                        t,
                        3 * Math.max(0, Up - 2 * _),
                        (0 === i ? 0 : 2 * Up) +
                          2 * _ * (i > 4 ? i - 8 + 4 : 0),
                        3 * _,
                        2 * _
                      ),
                        s.setRenderTarget(t),
                        s.render(u, Yp);
                    },
                  },
                ]),
                e
              );
            })();
            function af(e) {
              return (
                void 0 !== e &&
                e.type === Be &&
                (e.encoding === cn || e.encoding === hn || e.encoding === dn)
              );
            }
            function of() {
              for (var e = [], t = [], n = [], i = 8, r = 0; r < jp; r++) {
                var a = Math.pow(2, i);
                t.push(a);
                var o = 1 / a;
                r > 4 ? (o = zp[r - 8 + 4 - 1]) : 0 == r && (o = 0), n.push(o);
                for (
                  var s = 1 / (a - 1),
                    l = -s / 2,
                    u = 1 + s / 2,
                    c = [l, l, u, l, u, u, l, l, u, u, l, u],
                    h = new Float32Array(108),
                    d = new Float32Array(72),
                    p = new Float32Array(36),
                    f = 0;
                  f < 6;
                  f++
                ) {
                  var m = ((f % 3) * 2) / 3 - 1,
                    v = f > 2 ? 0 : -1,
                    g = [
                      m,
                      v,
                      0,
                      m + 2 / 3,
                      v,
                      0,
                      m + 2 / 3,
                      v + 1,
                      0,
                      m,
                      v,
                      0,
                      m + 2 / 3,
                      v + 1,
                      0,
                      m,
                      v + 1,
                      0,
                    ];
                  h.set(g, 18 * f), d.set(c, 12 * f);
                  var y = [f, f, f, f, f, f];
                  p.set(y, 6 * f);
                }
                var x = new ya();
                x.setAttribute("position", new Jr(h, 3)),
                  x.setAttribute("uv", new Jr(d, 2)),
                  x.setAttribute("faceIndex", new Jr(p, 1)),
                  e.push(x),
                  i > 4 && i--;
              }
              return { _lodPlanes: e, _sizeLods: t, _sigmas: n };
            }
            function sf(e) {
              var t = new gi(3 * Up, 3 * Up, e);
              return (
                (t.texture.mapping = we),
                (t.texture.name = "PMREM.cubeUv"),
                (t.scissorTest = !0),
                t
              );
            }
            function lf(e, t, n, i, r) {
              e.viewport.set(t, n, i, r), e.scissor.set(t, n, i, r);
            }
            function uf() {
              var e = new ui(1, 1);
              return new Ec({
                name: "EquirectangularToCubeUV",
                uniforms: {
                  envMap: { value: null },
                  texelSize: { value: e },
                  inputEncoding: { value: Gp[cn] },
                  outputEncoding: { value: Gp[cn] },
                },
                vertexShader:
                  "\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",
                fragmentShader:
                  "\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t".concat(
                    "\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t",
                    "\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t"
                  ),
                blending: R,
                depthTest: !1,
                depthWrite: !1,
              });
            }
            function cf() {
              return new Ec({
                name: "CubemapToCubeUV",
                uniforms: {
                  envMap: { value: null },
                  inputEncoding: { value: Gp[cn] },
                  outputEncoding: { value: Gp[cn] },
                },
                vertexShader:
                  "\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",
                fragmentShader:
                  "\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t".concat(
                    "\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t",
                    "\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t"
                  ),
                blending: R,
                depthTest: !1,
                depthWrite: !1,
              });
            }
            var hf = 0,
              df = 1,
              pf = 0,
              ff = 1,
              mf = 2;
            function vf(e) {
              return (
                console.warn(
                  "THREE.MeshFaceMaterial has been removed. Use an Array instead."
                ),
                e
              );
            }
            function gf() {
              var e =
                arguments.length > 0 && void 0 !== arguments[0]
                  ? arguments[0]
                  : [];
              return (
                console.warn(
                  "THREE.MultiMaterial has been removed. Use an Array instead."
                ),
                (e.isMultiMaterial = !0),
                (e.materials = e),
                (e.clone = function () {
                  return e.slice();
                }),
                e
              );
            }
            function yf(e, t) {
              return (
                console.warn(
                  "THREE.PointCloud has been renamed to THREE.Points."
                ),
                new gu(e, t)
              );
            }
            function xf(e) {
              return (
                console.warn(
                  "THREE.Particle has been renamed to THREE.Sprite."
                ),
                new Fl(e)
              );
            }
            function bf(e, t) {
              return (
                console.warn(
                  "THREE.ParticleSystem has been renamed to THREE.Points."
                ),
                new gu(e, t)
              );
            }
            function _f(e) {
              return (
                console.warn(
                  "THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."
                ),
                new du(e)
              );
            }
            function wf(e) {
              return (
                console.warn(
                  "THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."
                ),
                new du(e)
              );
            }
            function Sf(e) {
              return (
                console.warn(
                  "THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."
                ),
                new du(e)
              );
            }
            function Ef(e, t, n) {
              return (
                console.warn(
                  "THREE.Vertex has been removed. Use THREE.Vector3 instead."
                ),
                new _i(e, t, n)
              );
            }
            function Mf(e, t) {
              return (
                console.warn(
                  "THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."
                ),
                new Jr(e, t).setUsage(Vn)
              );
            }
            function Af(e, t) {
              return (
                console.warn(
                  "THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."
                ),
                new Kr(e, t)
              );
            }
            function Tf(e, t) {
              return (
                console.warn(
                  "THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."
                ),
                new $r(e, t)
              );
            }
            function Cf(e, t) {
              return (
                console.warn(
                  "THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."
                ),
                new ea(e, t)
              );
            }
            function kf(e, t) {
              return (
                console.warn(
                  "THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."
                ),
                new ta(e, t)
              );
            }
            function Pf(e, t) {
              return (
                console.warn(
                  "THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."
                ),
                new na(e, t)
              );
            }
            function Lf(e, t) {
              return (
                console.warn(
                  "THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."
                ),
                new ia(e, t)
              );
            }
            function Rf(e, t) {
              return (
                console.warn(
                  "THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."
                ),
                new ra(e, t)
              );
            }
            function If(e, t) {
              return (
                console.warn(
                  "THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."
                ),
                new oa(e, t)
              );
            }
            function Ff(e, t) {
              return (
                console.warn(
                  "THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."
                ),
                new sa(e, t)
              );
            }
            function Nf(e) {
              return (
                console.warn(
                  "THREE.AxisHelper has been renamed to THREE.AxesHelper."
                ),
                new Op(e)
              );
            }
            function Of(e, t) {
              return (
                console.warn(
                  "THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."
                ),
                new Lp(e, t)
              );
            }
            function Bf(e, t) {
              return (
                console.warn(
                  "THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."
                ),
                new cu(
                  new Ru(e.geometry),
                  new tu({ color: void 0 !== t ? t : 16777215 })
                )
              );
            }
            function Df(e, t) {
              return (
                console.warn(
                  "THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."
                ),
                new cu(
                  new _c(e.geometry),
                  new tu({ color: void 0 !== t ? t : 16777215 })
                )
              );
            }
            function Vf(e) {
              return (
                console.warn(
                  "THREE.XHRLoader has been renamed to THREE.FileLoader."
                ),
                new eh(e)
              );
            }
            function Uf(e) {
              return (
                console.warn(
                  "THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."
                ),
                new ah(e)
              );
            }
            function zf(e, t, n) {
              return (
                console.warn(
                  "THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."
                ),
                new qa(e, n)
              );
            }
            function jf() {
              console.error("THREE.CanvasRenderer has been removed");
            }
            function Gf() {
              console.error("THREE.JSONLoader has been removed.");
            }
            (sh.create = function (e, t) {
              return (
                console.log("THREE.Curve.create() has been deprecated"),
                (e.prototype = Object.create(sh.prototype)),
                (e.prototype.constructor = e),
                (e.prototype.getPoint = t),
                e
              );
            }),
              (Ch.prototype.fromPoints = function (e) {
                return (
                  console.warn(
                    "THREE.Path: .fromPoints() has been renamed to .setFromPoints()."
                  ),
                  this.setFromPoints(e)
                );
              }),
              (yp.prototype.setColors = function () {
                console.error(
                  "THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead."
                );
              }),
              (dp.prototype.update = function () {
                console.error(
                  "THREE.SkeletonHelper: update() no longer needs to be called."
                );
              }),
              (Kc.prototype.extractUrlBase = function (e) {
                return (
                  console.warn(
                    "THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."
                  ),
                  Jh.extractUrlBase(e)
                );
              }),
              (Kc.Handlers = {
                add: function () {
                  console.error(
                    "THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead."
                  );
                },
                get: function () {
                  console.error(
                    "THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead."
                  );
                },
              }),
              (np.prototype.center = function (e) {
                return (
                  console.warn(
                    "THREE.Box2: .center() has been renamed to .getCenter()."
                  ),
                  this.getCenter(e)
                );
              }),
              (np.prototype.empty = function () {
                return (
                  console.warn(
                    "THREE.Box2: .empty() has been renamed to .isEmpty()."
                  ),
                  this.isEmpty()
                );
              }),
              (np.prototype.isIntersectionBox = function (e) {
                return (
                  console.warn(
                    "THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."
                  ),
                  this.intersectsBox(e)
                );
              }),
              (np.prototype.size = function (e) {
                return (
                  console.warn(
                    "THREE.Box2: .size() has been renamed to .getSize()."
                  ),
                  this.getSize(e)
                );
              }),
              (Ei.prototype.center = function (e) {
                return (
                  console.warn(
                    "THREE.Box3: .center() has been renamed to .getCenter()."
                  ),
                  this.getCenter(e)
                );
              }),
              (Ei.prototype.empty = function () {
                return (
                  console.warn(
                    "THREE.Box3: .empty() has been renamed to .isEmpty()."
                  ),
                  this.isEmpty()
                );
              }),
              (Ei.prototype.isIntersectionBox = function (e) {
                return (
                  console.warn(
                    "THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."
                  ),
                  this.intersectsBox(e)
                );
              }),
              (Ei.prototype.isIntersectionSphere = function (e) {
                return (
                  console.warn(
                    "THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."
                  ),
                  this.intersectsSphere(e)
                );
              }),
              (Ei.prototype.size = function (e) {
                return (
                  console.warn(
                    "THREE.Box3: .size() has been renamed to .getSize()."
                  ),
                  this.getSize(e)
                );
              }),
              (Gi.prototype.empty = function () {
                return (
                  console.warn(
                    "THREE.Sphere: .empty() has been renamed to .isEmpty()."
                  ),
                  this.isEmpty()
                );
              }),
              (Za.prototype.setFromMatrix = function (e) {
                return (
                  console.warn(
                    "THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."
                  ),
                  this.setFromProjectionMatrix(e)
                );
              }),
              (ap.prototype.center = function (e) {
                return (
                  console.warn(
                    "THREE.Line3: .center() has been renamed to .getCenter()."
                  ),
                  this.getCenter(e)
                );
              }),
              (hi.prototype.flattenToArrayOffset = function (e, t) {
                return (
                  console.warn(
                    "THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."
                  ),
                  this.toArray(e, t)
                );
              }),
              (hi.prototype.multiplyVector3 = function (e) {
                return (
                  console.warn(
                    "THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."
                  ),
                  e.applyMatrix3(this)
                );
              }),
              (hi.prototype.multiplyVector3Array = function () {
                console.error(
                  "THREE.Matrix3: .multiplyVector3Array() has been removed."
                );
              }),
              (hi.prototype.applyToBufferAttribute = function (e) {
                return (
                  console.warn(
                    "THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."
                  ),
                  e.applyMatrix3(this)
                );
              }),
              (hi.prototype.applyToVector3Array = function () {
                console.error(
                  "THREE.Matrix3: .applyToVector3Array() has been removed."
                );
              }),
              (hi.prototype.getInverse = function (e) {
                return (
                  console.warn(
                    "THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."
                  ),
                  this.copy(e).invert()
                );
              }),
              (Ki.prototype.extractPosition = function (e) {
                return (
                  console.warn(
                    "THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."
                  ),
                  this.copyPosition(e)
                );
              }),
              (Ki.prototype.flattenToArrayOffset = function (e, t) {
                return (
                  console.warn(
                    "THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."
                  ),
                  this.toArray(e, t)
                );
              }),
              (Ki.prototype.getPosition = function () {
                return (
                  console.warn(
                    "THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."
                  ),
                  new _i().setFromMatrixColumn(this, 3)
                );
              }),
              (Ki.prototype.setRotationFromQuaternion = function (e) {
                return (
                  console.warn(
                    "THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."
                  ),
                  this.makeRotationFromQuaternion(e)
                );
              }),
              (Ki.prototype.multiplyToArray = function () {
                console.warn(
                  "THREE.Matrix4: .multiplyToArray() has been removed."
                );
              }),
              (Ki.prototype.multiplyVector3 = function (e) {
                return (
                  console.warn(
                    "THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."
                  ),
                  e.applyMatrix4(this)
                );
              }),
              (Ki.prototype.multiplyVector4 = function (e) {
                return (
                  console.warn(
                    "THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."
                  ),
                  e.applyMatrix4(this)
                );
              }),
              (Ki.prototype.multiplyVector3Array = function () {
                console.error(
                  "THREE.Matrix4: .multiplyVector3Array() has been removed."
                );
              }),
              (Ki.prototype.rotateAxis = function (e) {
                console.warn(
                  "THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."
                ),
                  e.transformDirection(this);
              }),
              (Ki.prototype.crossVector = function (e) {
                return (
                  console.warn(
                    "THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."
                  ),
                  e.applyMatrix4(this)
                );
              }),
              (Ki.prototype.translate = function () {
                console.error("THREE.Matrix4: .translate() has been removed.");
              }),
              (Ki.prototype.rotateX = function () {
                console.error("THREE.Matrix4: .rotateX() has been removed.");
              }),
              (Ki.prototype.rotateY = function () {
                console.error("THREE.Matrix4: .rotateY() has been removed.");
              }),
              (Ki.prototype.rotateZ = function () {
                console.error("THREE.Matrix4: .rotateZ() has been removed.");
              }),
              (Ki.prototype.rotateByAxis = function () {
                console.error(
                  "THREE.Matrix4: .rotateByAxis() has been removed."
                );
              }),
              (Ki.prototype.applyToBufferAttribute = function (e) {
                return (
                  console.warn(
                    "THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."
                  ),
                  e.applyMatrix4(this)
                );
              }),
              (Ki.prototype.applyToVector3Array = function () {
                console.error(
                  "THREE.Matrix4: .applyToVector3Array() has been removed."
                );
              }),
              (Ki.prototype.makeFrustum = function (e, t, n, i, r, a) {
                return (
                  console.warn(
                    "THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."
                  ),
                  this.makePerspective(e, t, i, n, r, a)
                );
              }),
              (Ki.prototype.getInverse = function (e) {
                return (
                  console.warn(
                    "THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."
                  ),
                  this.copy(e).invert()
                );
              }),
              (Tr.prototype.isIntersectionLine = function (e) {
                return (
                  console.warn(
                    "THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."
                  ),
                  this.intersectsLine(e)
                );
              }),
              (bi.prototype.multiplyVector3 = function (e) {
                return (
                  console.warn(
                    "THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."
                  ),
                  e.applyQuaternion(this)
                );
              }),
              (bi.prototype.inverse = function () {
                return (
                  console.warn(
                    "THREE.Quaternion: .inverse() has been renamed to invert()."
                  ),
                  this.invert()
                );
              }),
              (Ji.prototype.isIntersectionBox = function (e) {
                return (
                  console.warn(
                    "THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."
                  ),
                  this.intersectsBox(e)
                );
              }),
              (Ji.prototype.isIntersectionPlane = function (e) {
                return (
                  console.warn(
                    "THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."
                  ),
                  this.intersectsPlane(e)
                );
              }),
              (Ji.prototype.isIntersectionSphere = function (e) {
                return (
                  console.warn(
                    "THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."
                  ),
                  this.intersectsSphere(e)
                );
              }),
              (Dr.prototype.area = function () {
                return (
                  console.warn(
                    "THREE.Triangle: .area() has been renamed to .getArea()."
                  ),
                  this.getArea()
                );
              }),
              (Dr.prototype.barycoordFromPoint = function (e, t) {
                return (
                  console.warn(
                    "THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."
                  ),
                  this.getBarycoord(e, t)
                );
              }),
              (Dr.prototype.midpoint = function (e) {
                return (
                  console.warn(
                    "THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."
                  ),
                  this.getMidpoint(e)
                );
              }),
              (Dr.prototypenormal = function (e) {
                return (
                  console.warn(
                    "THREE.Triangle: .normal() has been renamed to .getNormal()."
                  ),
                  this.getNormal(e)
                );
              }),
              (Dr.prototype.plane = function (e) {
                return (
                  console.warn(
                    "THREE.Triangle: .plane() has been renamed to .getPlane()."
                  ),
                  this.getPlane(e)
                );
              }),
              (Dr.barycoordFromPoint = function (e, t, n, i, r) {
                return (
                  console.warn(
                    "THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."
                  ),
                  Dr.getBarycoord(e, t, n, i, r)
                );
              }),
              (Dr.normal = function (e, t, n, i) {
                return (
                  console.warn(
                    "THREE.Triangle: .normal() has been renamed to .getNormal()."
                  ),
                  Dr.getNormal(e, t, n, i)
                );
              }),
              (kh.prototype.extractAllPoints = function (e) {
                return (
                  console.warn(
                    "THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."
                  ),
                  this.extractPoints(e)
                );
              }),
              (kh.prototype.extrude = function (e) {
                return (
                  console.warn(
                    "THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."
                  ),
                  new sc(this, e)
                );
              }),
              (kh.prototype.makeGeometry = function (e) {
                return (
                  console.warn(
                    "THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."
                  ),
                  new fc(this, e)
                );
              }),
              (ui.prototype.fromAttribute = function (e, t, n) {
                return (
                  console.warn(
                    "THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."
                  ),
                  this.fromBufferAttribute(e, t, n)
                );
              }),
              (ui.prototype.distanceToManhattan = function (e) {
                return (
                  console.warn(
                    "THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."
                  ),
                  this.manhattanDistanceTo(e)
                );
              }),
              (ui.prototype.lengthManhattan = function () {
                return (
                  console.warn(
                    "THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."
                  ),
                  this.manhattanLength()
                );
              }),
              (_i.prototype.setEulerFromRotationMatrix = function () {
                console.error(
                  "THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead."
                );
              }),
              (_i.prototype.setEulerFromQuaternion = function () {
                console.error(
                  "THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead."
                );
              }),
              (_i.prototype.getPositionFromMatrix = function (e) {
                return (
                  console.warn(
                    "THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."
                  ),
                  this.setFromMatrixPosition(e)
                );
              }),
              (_i.prototype.getScaleFromMatrix = function (e) {
                return (
                  console.warn(
                    "THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."
                  ),
                  this.setFromMatrixScale(e)
                );
              }),
              (_i.prototype.getColumnFromMatrix = function (e, t) {
                return (
                  console.warn(
                    "THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."
                  ),
                  this.setFromMatrixColumn(t, e)
                );
              }),
              (_i.prototype.applyProjection = function (e) {
                return (
                  console.warn(
                    "THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."
                  ),
                  this.applyMatrix4(e)
                );
              }),
              (_i.prototype.fromAttribute = function (e, t, n) {
                return (
                  console.warn(
                    "THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."
                  ),
                  this.fromBufferAttribute(e, t, n)
                );
              }),
              (_i.prototype.distanceToManhattan = function (e) {
                return (
                  console.warn(
                    "THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."
                  ),
                  this.manhattanDistanceTo(e)
                );
              }),
              (_i.prototype.lengthManhattan = function () {
                return (
                  console.warn(
                    "THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."
                  ),
                  this.manhattanLength()
                );
              }),
              (vi.prototype.fromAttribute = function (e, t, n) {
                return (
                  console.warn(
                    "THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."
                  ),
                  this.fromBufferAttribute(e, t, n)
                );
              }),
              (vi.prototype.lengthManhattan = function () {
                return (
                  console.warn(
                    "THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."
                  ),
                  this.manhattanLength()
                );
              }),
              (Sr.prototype.getChildByName = function (e) {
                return (
                  console.warn(
                    "THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."
                  ),
                  this.getObjectByName(e)
                );
              }),
              (Sr.prototype.renderDepth = function () {
                console.warn(
                  "THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead."
                );
              }),
              (Sr.prototype.translate = function (e, t) {
                return (
                  console.warn(
                    "THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."
                  ),
                  this.translateOnAxis(t, e)
                );
              }),
              (Sr.prototype.getWorldRotation = function () {
                console.error(
                  "THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead."
                );
              }),
              (Sr.prototype.applyMatrix = function (e) {
                return (
                  console.warn(
                    "THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."
                  ),
                  this.applyMatrix4(e)
                );
              }),
              Object.defineProperties(Sr.prototype, {
                eulerOrder: {
                  get: function () {
                    return (
                      console.warn(
                        "THREE.Object3D: .eulerOrder is now .rotation.order."
                      ),
                      this.rotation.order
                    );
                  },
                  set: function (e) {
                    console.warn(
                      "THREE.Object3D: .eulerOrder is now .rotation.order."
                    ),
                      (this.rotation.order = e);
                  },
                },
                useQuaternion: {
                  get: function () {
                    console.warn(
                      "THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default."
                    );
                  },
                  set: function () {
                    console.warn(
                      "THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default."
                    );
                  },
                },
              }),
              (Oa.prototype.setDrawMode = function () {
                console.error(
                  "THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary."
                );
              }),
              Object.defineProperties(Oa.prototype, {
                drawMode: {
                  get: function () {
                    return (
                      console.error(
                        "THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."
                      ),
                      sn
                    );
                  },
                  set: function () {
                    console.error(
                      "THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary."
                    );
                  },
                },
              }),
              (Hl.prototype.initBones = function () {
                console.error(
                  "THREE.SkinnedMesh: initBones() has been removed."
                );
              }),
              (Ha.prototype.setLens = function (e, t) {
                console.warn(
                  "THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."
                ),
                  void 0 !== t && (this.filmGauge = t),
                  this.setFocalLength(e);
              }),
              Object.defineProperties(Ph.prototype, {
                onlyShadow: {
                  set: function () {
                    console.warn("THREE.Light: .onlyShadow has been removed.");
                  },
                },
                shadowCameraFov: {
                  set: function (e) {
                    console.warn(
                      "THREE.Light: .shadowCameraFov is now .shadow.camera.fov."
                    ),
                      (this.shadow.camera.fov = e);
                  },
                },
                shadowCameraLeft: {
                  set: function (e) {
                    console.warn(
                      "THREE.Light: .shadowCameraLeft is now .shadow.camera.left."
                    ),
                      (this.shadow.camera.left = e);
                  },
                },
                shadowCameraRight: {
                  set: function (e) {
                    console.warn(
                      "THREE.Light: .shadowCameraRight is now .shadow.camera.right."
                    ),
                      (this.shadow.camera.right = e);
                  },
                },
                shadowCameraTop: {
                  set: function (e) {
                    console.warn(
                      "THREE.Light: .shadowCameraTop is now .shadow.camera.top."
                    ),
                      (this.shadow.camera.top = e);
                  },
                },
                shadowCameraBottom: {
                  set: function (e) {
                    console.warn(
                      "THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."
                    ),
                      (this.shadow.camera.bottom = e);
                  },
                },
                shadowCameraNear: {
                  set: function (e) {
                    console.warn(
                      "THREE.Light: .shadowCameraNear is now .shadow.camera.near."
                    ),
                      (this.shadow.camera.near = e);
                  },
                },
                shadowCameraFar: {
                  set: function (e) {
                    console.warn(
                      "THREE.Light: .shadowCameraFar is now .shadow.camera.far."
                    ),
                      (this.shadow.camera.far = e);
                  },
                },
                shadowCameraVisible: {
                  set: function () {
                    console.warn(
                      "THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead."
                    );
                  },
                },
                shadowBias: {
                  set: function (e) {
                    console.warn(
                      "THREE.Light: .shadowBias is now .shadow.bias."
                    ),
                      (this.shadow.bias = e);
                  },
                },
                shadowDarkness: {
                  set: function () {
                    console.warn(
                      "THREE.Light: .shadowDarkness has been removed."
                    );
                  },
                },
                shadowMapWidth: {
                  set: function (e) {
                    console.warn(
                      "THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."
                    ),
                      (this.shadow.mapSize.width = e);
                  },
                },
                shadowMapHeight: {
                  set: function (e) {
                    console.warn(
                      "THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."
                    ),
                      (this.shadow.mapSize.height = e);
                  },
                },
              }),
              Object.defineProperties(Jr.prototype, {
                length: {
                  get: function () {
                    return (
                      console.warn(
                        "THREE.BufferAttribute: .length has been deprecated. Use .count instead."
                      ),
                      this.array.length
                    );
                  },
                },
                dynamic: {
                  get: function () {
                    return (
                      console.warn(
                        "THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."
                      ),
                      this.usage === Vn
                    );
                  },
                  set: function () {
                    console.warn(
                      "THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."
                    ),
                      this.setUsage(Vn);
                  },
                },
              }),
              (Jr.prototype.setDynamic = function (e) {
                return (
                  console.warn(
                    "THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."
                  ),
                  this.setUsage(!0 === e ? Vn : Dn),
                  this
                );
              }),
              (Jr.prototype.copyIndicesArray = function () {
                console.error(
                  "THREE.BufferAttribute: .copyIndicesArray() has been removed."
                );
              }),
              (Jr.prototype.setArray = function () {
                console.error(
                  "THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers"
                );
              }),
              (ya.prototype.addIndex = function (e) {
                console.warn(
                  "THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."
                ),
                  this.setIndex(e);
              }),
              (ya.prototype.addAttribute = function (e, t) {
                return (
                  console.warn(
                    "THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."
                  ),
                  (t && t.isBufferAttribute) ||
                  (t && t.isInterleavedBufferAttribute)
                    ? "index" === e
                      ? (console.warn(
                          "THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."
                        ),
                        this.setIndex(t),
                        this)
                      : this.setAttribute(e, t)
                    : (console.warn(
                        "THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."
                      ),
                      this.setAttribute(e, new Jr(arguments[1], arguments[2])))
                );
              }),
              (ya.prototype.addDrawCall = function (e, t, n) {
                void 0 !== n &&
                  console.warn(
                    "THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."
                  ),
                  console.warn(
                    "THREE.BufferGeometry: .addDrawCall() is now .addGroup()."
                  ),
                  this.addGroup(e, t);
              }),
              (ya.prototype.clearDrawCalls = function () {
                console.warn(
                  "THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."
                ),
                  this.clearGroups();
              }),
              (ya.prototype.computeOffsets = function () {
                console.warn(
                  "THREE.BufferGeometry: .computeOffsets() has been removed."
                );
              }),
              (ya.prototype.removeAttribute = function (e) {
                return (
                  console.warn(
                    "THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."
                  ),
                  this.deleteAttribute(e)
                );
              }),
              (ya.prototype.applyMatrix = function (e) {
                return (
                  console.warn(
                    "THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."
                  ),
                  this.applyMatrix4(e)
                );
              }),
              Object.defineProperties(ya.prototype, {
                drawcalls: {
                  get: function () {
                    return (
                      console.error(
                        "THREE.BufferGeometry: .drawcalls has been renamed to .groups."
                      ),
                      this.groups
                    );
                  },
                },
                offsets: {
                  get: function () {
                    return (
                      console.warn(
                        "THREE.BufferGeometry: .offsets has been renamed to .groups."
                      ),
                      this.groups
                    );
                  },
                },
              }),
              (gl.prototype.setDynamic = function (e) {
                return (
                  console.warn(
                    "THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."
                  ),
                  this.setUsage(!0 === e ? Vn : Dn),
                  this
                );
              }),
              (gl.prototype.setArray = function () {
                console.error(
                  "THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers"
                );
              }),
              (sc.prototype.getArrays = function () {
                console.error(
                  "THREE.ExtrudeGeometry: .getArrays() has been removed."
                );
              }),
              (sc.prototype.addShapeList = function () {
                console.error(
                  "THREE.ExtrudeGeometry: .addShapeList() has been removed."
                );
              }),
              (sc.prototype.addShape = function () {
                console.error(
                  "THREE.ExtrudeGeometry: .addShape() has been removed."
                );
              }),
              (vl.prototype.dispose = function () {
                console.error("THREE.Scene: .dispose() has been removed.");
              }),
              (qd.prototype.onUpdate = function () {
                return (
                  console.warn(
                    "THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."
                  ),
                  this
                );
              }),
              Object.defineProperties(Ur.prototype, {
                wrapAround: {
                  get: function () {
                    console.warn(
                      "THREE.Material: .wrapAround has been removed."
                    );
                  },
                  set: function () {
                    console.warn(
                      "THREE.Material: .wrapAround has been removed."
                    );
                  },
                },
                overdraw: {
                  get: function () {
                    console.warn("THREE.Material: .overdraw has been removed.");
                  },
                  set: function () {
                    console.warn("THREE.Material: .overdraw has been removed.");
                  },
                },
                wrapRGB: {
                  get: function () {
                    return (
                      console.warn(
                        "THREE.Material: .wrapRGB has been removed."
                      ),
                      new qr()
                    );
                  },
                },
                shading: {
                  get: function () {
                    console.error(
                      "THREE." +
                        this.type +
                        ": .shading has been removed. Use the boolean .flatShading instead."
                    );
                  },
                  set: function (e) {
                    console.warn(
                      "THREE." +
                        this.type +
                        ": .shading has been removed. Use the boolean .flatShading instead."
                    ),
                      (this.flatShading = e === P);
                  },
                },
                stencilMask: {
                  get: function () {
                    return (
                      console.warn(
                        "THREE." +
                          this.type +
                          ": .stencilMask has been removed. Use .stencilFuncMask instead."
                      ),
                      this.stencilFuncMask
                    );
                  },
                  set: function (e) {
                    console.warn(
                      "THREE." +
                        this.type +
                        ": .stencilMask has been removed. Use .stencilFuncMask instead."
                    ),
                      (this.stencilFuncMask = e);
                  },
                },
              }),
              Object.defineProperties(ja.prototype, {
                derivatives: {
                  get: function () {
                    return (
                      console.warn(
                        "THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."
                      ),
                      this.extensions.derivatives
                    );
                  },
                  set: function (e) {
                    console.warn(
                      "THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."
                    ),
                      (this.extensions.derivatives = e);
                  },
                },
              }),
              (dl.prototype.clearTarget = function (e, t, n, i) {
                console.warn(
                  "THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."
                ),
                  this.setRenderTarget(e),
                  this.clear(t, n, i);
              }),
              (dl.prototype.animate = function (e) {
                console.warn(
                  "THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."
                ),
                  this.setAnimationLoop(e);
              }),
              (dl.prototype.getCurrentRenderTarget = function () {
                return (
                  console.warn(
                    "THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."
                  ),
                  this.getRenderTarget()
                );
              }),
              (dl.prototype.getMaxAnisotropy = function () {
                return (
                  console.warn(
                    "THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."
                  ),
                  this.capabilities.getMaxAnisotropy()
                );
              }),
              (dl.prototype.getPrecision = function () {
                return (
                  console.warn(
                    "THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."
                  ),
                  this.capabilities.precision
                );
              }),
              (dl.prototype.resetGLState = function () {
                return (
                  console.warn(
                    "THREE.WebGLRenderer: .resetGLState() is now .state.reset()."
                  ),
                  this.state.reset()
                );
              }),
              (dl.prototype.supportsFloatTextures = function () {
                return (
                  console.warn(
                    "THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."
                  ),
                  this.extensions.get("OES_texture_float")
                );
              }),
              (dl.prototype.supportsHalfFloatTextures = function () {
                return (
                  console.warn(
                    "THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."
                  ),
                  this.extensions.get("OES_texture_half_float")
                );
              }),
              (dl.prototype.supportsStandardDerivatives = function () {
                return (
                  console.warn(
                    "THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."
                  ),
                  this.extensions.get("OES_standard_derivatives")
                );
              }),
              (dl.prototype.supportsCompressedTextureS3TC = function () {
                return (
                  console.warn(
                    "THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."
                  ),
                  this.extensions.get("WEBGL_compressed_texture_s3tc")
                );
              }),
              (dl.prototype.supportsCompressedTexturePVRTC = function () {
                return (
                  console.warn(
                    "THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."
                  ),
                  this.extensions.get("WEBGL_compressed_texture_pvrtc")
                );
              }),
              (dl.prototype.supportsBlendMinMax = function () {
                return (
                  console.warn(
                    "THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."
                  ),
                  this.extensions.get("EXT_blend_minmax")
                );
              }),
              (dl.prototype.supportsVertexTextures = function () {
                return (
                  console.warn(
                    "THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."
                  ),
                  this.capabilities.vertexTextures
                );
              }),
              (dl.prototype.supportsInstancedArrays = function () {
                return (
                  console.warn(
                    "THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."
                  ),
                  this.extensions.get("ANGLE_instanced_arrays")
                );
              }),
              (dl.prototype.enableScissorTest = function (e) {
                console.warn(
                  "THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."
                ),
                  this.setScissorTest(e);
              }),
              (dl.prototype.initMaterial = function () {
                console.warn(
                  "THREE.WebGLRenderer: .initMaterial() has been removed."
                );
              }),
              (dl.prototype.addPrePlugin = function () {
                console.warn(
                  "THREE.WebGLRenderer: .addPrePlugin() has been removed."
                );
              }),
              (dl.prototype.addPostPlugin = function () {
                console.warn(
                  "THREE.WebGLRenderer: .addPostPlugin() has been removed."
                );
              }),
              (dl.prototype.updateShadowMap = function () {
                console.warn(
                  "THREE.WebGLRenderer: .updateShadowMap() has been removed."
                );
              }),
              (dl.prototype.setFaceCulling = function () {
                console.warn(
                  "THREE.WebGLRenderer: .setFaceCulling() has been removed."
                );
              }),
              (dl.prototype.allocTextureUnit = function () {
                console.warn(
                  "THREE.WebGLRenderer: .allocTextureUnit() has been removed."
                );
              }),
              (dl.prototype.setTexture = function () {
                console.warn(
                  "THREE.WebGLRenderer: .setTexture() has been removed."
                );
              }),
              (dl.prototype.setTexture2D = function () {
                console.warn(
                  "THREE.WebGLRenderer: .setTexture2D() has been removed."
                );
              }),
              (dl.prototype.setTextureCube = function () {
                console.warn(
                  "THREE.WebGLRenderer: .setTextureCube() has been removed."
                );
              }),
              (dl.prototype.getActiveMipMapLevel = function () {
                return (
                  console.warn(
                    "THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."
                  ),
                  this.getActiveMipmapLevel()
                );
              }),
              Object.defineProperties(dl.prototype, {
                shadowMapEnabled: {
                  get: function () {
                    return this.shadowMap.enabled;
                  },
                  set: function (e) {
                    console.warn(
                      "THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."
                    ),
                      (this.shadowMap.enabled = e);
                  },
                },
                shadowMapType: {
                  get: function () {
                    return this.shadowMap.type;
                  },
                  set: function (e) {
                    console.warn(
                      "THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."
                    ),
                      (this.shadowMap.type = e);
                  },
                },
                shadowMapCullFace: {
                  get: function () {
                    console.warn(
                      "THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead."
                    );
                  },
                  set: function () {
                    console.warn(
                      "THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead."
                    );
                  },
                },
                context: {
                  get: function () {
                    return (
                      console.warn(
                        "THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."
                      ),
                      this.getContext()
                    );
                  },
                },
                vr: {
                  get: function () {
                    return (
                      console.warn(
                        "THREE.WebGLRenderer: .vr has been renamed to .xr"
                      ),
                      this.xr
                    );
                  },
                },
                gammaInput: {
                  get: function () {
                    return (
                      console.warn(
                        "THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."
                      ),
                      !1
                    );
                  },
                  set: function () {
                    console.warn(
                      "THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."
                    );
                  },
                },
                gammaOutput: {
                  get: function () {
                    return (
                      console.warn(
                        "THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."
                      ),
                      !1
                    );
                  },
                  set: function (e) {
                    console.warn(
                      "THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."
                    ),
                      (this.outputEncoding = !0 === e ? hn : cn);
                  },
                },
                toneMappingWhitePoint: {
                  get: function () {
                    return (
                      console.warn(
                        "THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."
                      ),
                      1
                    );
                  },
                  set: function () {
                    console.warn(
                      "THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."
                    );
                  },
                },
              }),
              Object.defineProperties(nl.prototype, {
                cullFace: {
                  get: function () {
                    console.warn(
                      "THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead."
                    );
                  },
                  set: function () {
                    console.warn(
                      "THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead."
                    );
                  },
                },
                renderReverseSided: {
                  get: function () {
                    console.warn(
                      "THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead."
                    );
                  },
                  set: function () {
                    console.warn(
                      "THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead."
                    );
                  },
                },
                renderSingleSided: {
                  get: function () {
                    console.warn(
                      "THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead."
                    );
                  },
                  set: function () {
                    console.warn(
                      "THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead."
                    );
                  },
                },
              }),
              Object.defineProperties(gi.prototype, {
                wrapS: {
                  get: function () {
                    return (
                      console.warn(
                        "THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."
                      ),
                      this.texture.wrapS
                    );
                  },
                  set: function (e) {
                    console.warn(
                      "THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."
                    ),
                      (this.texture.wrapS = e);
                  },
                },
                wrapT: {
                  get: function () {
                    return (
                      console.warn(
                        "THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."
                      ),
                      this.texture.wrapT
                    );
                  },
                  set: function (e) {
                    console.warn(
                      "THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."
                    ),
                      (this.texture.wrapT = e);
                  },
                },
                magFilter: {
                  get: function () {
                    return (
                      console.warn(
                        "THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."
                      ),
                      this.texture.magFilter
                    );
                  },
                  set: function (e) {
                    console.warn(
                      "THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."
                    ),
                      (this.texture.magFilter = e);
                  },
                },
                minFilter: {
                  get: function () {
                    return (
                      console.warn(
                        "THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."
                      ),
                      this.texture.minFilter
                    );
                  },
                  set: function (e) {
                    console.warn(
                      "THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."
                    ),
                      (this.texture.minFilter = e);
                  },
                },
                anisotropy: {
                  get: function () {
                    return (
                      console.warn(
                        "THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."
                      ),
                      this.texture.anisotropy
                    );
                  },
                  set: function (e) {
                    console.warn(
                      "THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."
                    ),
                      (this.texture.anisotropy = e);
                  },
                },
                offset: {
                  get: function () {
                    return (
                      console.warn(
                        "THREE.WebGLRenderTarget: .offset is now .texture.offset."
                      ),
                      this.texture.offset
                    );
                  },
                  set: function (e) {
                    console.warn(
                      "THREE.WebGLRenderTarget: .offset is now .texture.offset."
                    ),
                      (this.texture.offset = e);
                  },
                },
                repeat: {
                  get: function () {
                    return (
                      console.warn(
                        "THREE.WebGLRenderTarget: .repeat is now .texture.repeat."
                      ),
                      this.texture.repeat
                    );
                  },
                  set: function (e) {
                    console.warn(
                      "THREE.WebGLRenderTarget: .repeat is now .texture.repeat."
                    ),
                      (this.texture.repeat = e);
                  },
                },
                format: {
                  get: function () {
                    return (
                      console.warn(
                        "THREE.WebGLRenderTarget: .format is now .texture.format."
                      ),
                      this.texture.format
                    );
                  },
                  set: function (e) {
                    console.warn(
                      "THREE.WebGLRenderTarget: .format is now .texture.format."
                    ),
                      (this.texture.format = e);
                  },
                },
                type: {
                  get: function () {
                    return (
                      console.warn(
                        "THREE.WebGLRenderTarget: .type is now .texture.type."
                      ),
                      this.texture.type
                    );
                  },
                  set: function (e) {
                    console.warn(
                      "THREE.WebGLRenderTarget: .type is now .texture.type."
                    ),
                      (this.texture.type = e);
                  },
                },
                generateMipmaps: {
                  get: function () {
                    return (
                      console.warn(
                        "THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."
                      ),
                      this.texture.generateMipmaps
                    );
                  },
                  set: function (e) {
                    console.warn(
                      "THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."
                    ),
                      (this.texture.generateMipmaps = e);
                  },
                },
              }),
              (Ad.prototype.load = function (e) {
                console.warn(
                  "THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead."
                );
                var t = this;
                return (
                  new pd().load(e, function (e) {
                    t.setBuffer(e);
                  }),
                  this
                );
              }),
              (Rd.prototype.getData = function () {
                return (
                  console.warn(
                    "THREE.AudioAnalyser: .getData() is now .getFrequencyData()."
                  ),
                  this.getFrequencyData()
                );
              }),
              (Wa.prototype.updateCubeMap = function (e, t) {
                return (
                  console.warn(
                    "THREE.CubeCamera: .updateCubeMap() is now .update()."
                  ),
                  this.update(e, t)
                );
              }),
              (Wa.prototype.clear = function (e, t, n, i) {
                return (
                  console.warn(
                    "THREE.CubeCamera: .clear() is now .renderTarget.clear()."
                  ),
                  this.renderTarget.clear(e, t, n, i)
                );
              }),
              (di.crossOrigin = void 0),
              (di.loadTexture = function (e, t, n, i) {
                console.warn(
                  "THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead."
                );
                var r = new oh();
                r.setCrossOrigin(this.crossOrigin);
                var a = r.load(e, n, void 0, i);
                return t && (a.mapping = t), a;
              }),
              (di.loadTextureCube = function (e, t, n, i) {
                console.warn(
                  "THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead."
                );
                var r = new rh();
                r.setCrossOrigin(this.crossOrigin);
                var a = r.load(e, n, void 0, i);
                return t && (a.mapping = t), a;
              }),
              (di.loadCompressedTexture = function () {
                console.error(
                  "THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead."
                );
              }),
              (di.loadCompressedTextureCube = function () {
                console.error(
                  "THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead."
                );
              });
            var Hf = {
              createMultiMaterialObject: function () {
                console.error(
                  "THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js"
                );
              },
              detach: function () {
                console.error(
                  "THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js"
                );
              },
              attach: function () {
                console.error(
                  "THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js"
                );
              },
            };
            function Wf() {
              console.error(
                "THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js"
              );
            }
            "undefined" !== typeof __THREE_DEVTOOLS__ &&
              __THREE_DEVTOOLS__.dispatchEvent(
                new CustomEvent("register", { detail: { revision: v } })
              ),
              "undefined" !== typeof window &&
                (window.__THREE__
                  ? console.warn(
                      "WARNING: Multiple instances of Three.js being imported."
                    )
                  : (window.__THREE__ = v));
          },
          "./node_modules/three/examples/jsm/deprecated/Geometry.js": function (
            e,
            t,
            n
          ) {
            "use strict";
            n.r(t),
              n.d(t, "Face3", function () {
                return u;
              }),
              n.d(t, "Geometry", function () {
                return s;
              });
            var i = n("./node_modules/three/build/three.module.js"),
              r = new i.Matrix4(),
              a = new i.Object3D(),
              o = new i.Vector3(),
              s = (function (e) {
                function t() {
                  var e;
                  return (
                    f(this, t),
                    ((e = c(this, h(t).call(this))).uuid =
                      i.MathUtils.generateUUID()),
                    (e.name = ""),
                    (e.type = "Geometry"),
                    (e.vertices = []),
                    (e.colors = []),
                    (e.faces = []),
                    (e.faceVertexUvs = [[]]),
                    (e.morphTargets = []),
                    (e.morphNormals = []),
                    (e.skinWeights = []),
                    (e.skinIndices = []),
                    (e.lineDistances = []),
                    (e.boundingBox = null),
                    (e.boundingSphere = null),
                    (e.elementsNeedUpdate = !1),
                    (e.verticesNeedUpdate = !1),
                    (e.uvsNeedUpdate = !1),
                    (e.normalsNeedUpdate = !1),
                    (e.colorsNeedUpdate = !1),
                    (e.lineDistancesNeedUpdate = !1),
                    (e.groupsNeedUpdate = !1),
                    e
                  );
                }
                return (
                  p(t, e),
                  m(
                    t,
                    [
                      {
                        key: "applyMatrix4",
                        value: function (e) {
                          for (
                            var t = new i.Matrix3().getNormalMatrix(e),
                              n = 0,
                              r = this.vertices.length;
                            n < r;
                            n++
                          )
                            this.vertices[n].applyMatrix4(e);
                          for (var a = 0, o = this.faces.length; a < o; a++) {
                            var s = this.faces[a];
                            s.normal.applyMatrix3(t).normalize();
                            for (
                              var l = 0, u = s.vertexNormals.length;
                              l < u;
                              l++
                            )
                              s.vertexNormals[l].applyMatrix3(t).normalize();
                          }
                          return (
                            null !== this.boundingBox &&
                              this.computeBoundingBox(),
                            null !== this.boundingSphere &&
                              this.computeBoundingSphere(),
                            (this.verticesNeedUpdate = !0),
                            (this.normalsNeedUpdate = !0),
                            this
                          );
                        },
                      },
                      {
                        key: "rotateX",
                        value: function (e) {
                          return r.makeRotationX(e), this.applyMatrix4(r), this;
                        },
                      },
                      {
                        key: "rotateY",
                        value: function (e) {
                          return r.makeRotationY(e), this.applyMatrix4(r), this;
                        },
                      },
                      {
                        key: "rotateZ",
                        value: function (e) {
                          return r.makeRotationZ(e), this.applyMatrix4(r), this;
                        },
                      },
                      {
                        key: "translate",
                        value: function (e, t, n) {
                          return (
                            r.makeTranslation(e, t, n),
                            this.applyMatrix4(r),
                            this
                          );
                        },
                      },
                      {
                        key: "scale",
                        value: function (e, t, n) {
                          return (
                            r.makeScale(e, t, n), this.applyMatrix4(r), this
                          );
                        },
                      },
                      {
                        key: "lookAt",
                        value: function (e) {
                          return (
                            a.lookAt(e),
                            a.updateMatrix(),
                            this.applyMatrix4(a.matrix),
                            this
                          );
                        },
                      },
                      {
                        key: "fromBufferGeometry",
                        value: function (e) {
                          var t = this,
                            n = null !== e.index ? e.index : void 0,
                            r = e.attributes;
                          if (void 0 === r.position)
                            return (
                              console.error(
                                "THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."
                              ),
                              this
                            );
                          var a = r.position,
                            o = r.normal,
                            s = r.color,
                            l = r.uv,
                            c = r.uv2;
                          void 0 !== c && (this.faceVertexUvs[1] = []);
                          for (var h = 0; h < a.count; h++)
                            t.vertices.push(
                              new i.Vector3().fromBufferAttribute(a, h)
                            ),
                              void 0 !== s &&
                                t.colors.push(
                                  new i.Color().fromBufferAttribute(s, h)
                                );
                          function d(e, n, r, a) {
                            var h =
                                void 0 === s
                                  ? []
                                  : [
                                      t.colors[e].clone(),
                                      t.colors[n].clone(),
                                      t.colors[r].clone(),
                                    ],
                              d =
                                void 0 === o
                                  ? []
                                  : [
                                      new i.Vector3().fromBufferAttribute(o, e),
                                      new i.Vector3().fromBufferAttribute(o, n),
                                      new i.Vector3().fromBufferAttribute(o, r),
                                    ],
                              p = new u(e, n, r, d, h, a);
                            t.faces.push(p),
                              void 0 !== l &&
                                t.faceVertexUvs[0].push([
                                  new i.Vector2().fromBufferAttribute(l, e),
                                  new i.Vector2().fromBufferAttribute(l, n),
                                  new i.Vector2().fromBufferAttribute(l, r),
                                ]),
                              void 0 !== c &&
                                t.faceVertexUvs[1].push([
                                  new i.Vector2().fromBufferAttribute(c, e),
                                  new i.Vector2().fromBufferAttribute(c, n),
                                  new i.Vector2().fromBufferAttribute(c, r),
                                ]);
                          }
                          var p = e.groups;
                          if (p.length > 0)
                            for (var f = 0; f < p.length; f++)
                              for (
                                var m = p[f],
                                  v = m.start,
                                  g = v,
                                  y = v + m.count;
                                g < y;
                                g += 3
                              )
                                void 0 !== n
                                  ? d(
                                      n.getX(g),
                                      n.getX(g + 1),
                                      n.getX(g + 2),
                                      m.materialIndex
                                    )
                                  : d(g, g + 1, g + 2, m.materialIndex);
                          else if (void 0 !== n)
                            for (var x = 0; x < n.count; x += 3)
                              d(n.getX(x), n.getX(x + 1), n.getX(x + 2));
                          else
                            for (var b = 0; b < a.count; b += 3)
                              d(b, b + 1, b + 2);
                          return (
                            this.computeFaceNormals(),
                            null !== e.boundingBox &&
                              (this.boundingBox = e.boundingBox.clone()),
                            null !== e.boundingSphere &&
                              (this.boundingSphere = e.boundingSphere.clone()),
                            this
                          );
                        },
                      },
                      {
                        key: "center",
                        value: function () {
                          return (
                            this.computeBoundingBox(),
                            this.boundingBox.getCenter(o).negate(),
                            this.translate(o.x, o.y, o.z),
                            this
                          );
                        },
                      },
                      {
                        key: "normalize",
                        value: function () {
                          this.computeBoundingSphere();
                          var e = this.boundingSphere.center,
                            t = this.boundingSphere.radius,
                            n = 0 === t ? 1 : 1 / t,
                            r = new i.Matrix4();
                          return (
                            r.set(
                              n,
                              0,
                              0,
                              -n * e.x,
                              0,
                              n,
                              0,
                              -n * e.y,
                              0,
                              0,
                              n,
                              -n * e.z,
                              0,
                              0,
                              0,
                              1
                            ),
                            this.applyMatrix4(r),
                            this
                          );
                        },
                      },
                      {
                        key: "computeFaceNormals",
                        value: function () {
                          for (
                            var e = new i.Vector3(),
                              t = new i.Vector3(),
                              n = 0,
                              r = this.faces.length;
                            n < r;
                            n++
                          ) {
                            var a = this.faces[n],
                              o = this.vertices[a.a],
                              s = this.vertices[a.b],
                              l = this.vertices[a.c];
                            e.subVectors(l, s),
                              t.subVectors(o, s),
                              e.cross(t),
                              e.normalize(),
                              a.normal.copy(e);
                          }
                        },
                      },
                      {
                        key: "computeVertexNormals",
                        value: function () {
                          for (
                            var e =
                                !(
                                  arguments.length > 0 &&
                                  void 0 !== arguments[0]
                                ) || arguments[0],
                              t = new Array(this.vertices.length),
                              n = 0,
                              r = this.vertices.length;
                            n < r;
                            n++
                          )
                            t[n] = new i.Vector3();
                          if (e)
                            for (
                              var a = new i.Vector3(),
                                o = new i.Vector3(),
                                s = 0,
                                l = this.faces.length;
                              s < l;
                              s++
                            ) {
                              var u = this.faces[s],
                                c = this.vertices[u.a],
                                h = this.vertices[u.b],
                                d = this.vertices[u.c];
                              a.subVectors(d, h),
                                o.subVectors(c, h),
                                a.cross(o),
                                t[u.a].add(a),
                                t[u.b].add(a),
                                t[u.c].add(a);
                            }
                          else {
                            this.computeFaceNormals();
                            for (var p = 0, f = this.faces.length; p < f; p++) {
                              var m = this.faces[p];
                              t[m.a].add(m.normal),
                                t[m.b].add(m.normal),
                                t[m.c].add(m.normal);
                            }
                          }
                          for (var v = 0, g = this.vertices.length; v < g; v++)
                            t[v].normalize();
                          for (var y = 0, x = this.faces.length; y < x; y++) {
                            var b = this.faces[y],
                              _ = b.vertexNormals;
                            3 === _.length
                              ? (_[0].copy(t[b.a]),
                                _[1].copy(t[b.b]),
                                _[2].copy(t[b.c]))
                              : ((_[0] = t[b.a].clone()),
                                (_[1] = t[b.b].clone()),
                                (_[2] = t[b.c].clone()));
                          }
                          this.faces.length > 0 &&
                            (this.normalsNeedUpdate = !0);
                        },
                      },
                      {
                        key: "computeFlatVertexNormals",
                        value: function () {
                          this.computeFaceNormals();
                          for (var e = 0, t = this.faces.length; e < t; e++) {
                            var n = this.faces[e],
                              i = n.vertexNormals;
                            3 === i.length
                              ? (i[0].copy(n.normal),
                                i[1].copy(n.normal),
                                i[2].copy(n.normal))
                              : ((i[0] = n.normal.clone()),
                                (i[1] = n.normal.clone()),
                                (i[2] = n.normal.clone()));
                          }
                          this.faces.length > 0 &&
                            (this.normalsNeedUpdate = !0);
                        },
                      },
                      {
                        key: "computeMorphNormals",
                        value: function () {
                          for (var e = 0, n = this.faces.length; e < n; e++) {
                            var r = this.faces[e];
                            r.__originalFaceNormal
                              ? r.__originalFaceNormal.copy(r.normal)
                              : (r.__originalFaceNormal = r.normal.clone()),
                              r.__originalVertexNormals ||
                                (r.__originalVertexNormals = []);
                            for (
                              var a = 0, o = r.vertexNormals.length;
                              a < o;
                              a++
                            )
                              r.__originalVertexNormals[a]
                                ? r.__originalVertexNormals[a].copy(
                                    r.vertexNormals[a]
                                  )
                                : (r.__originalVertexNormals[a] =
                                    r.vertexNormals[a].clone());
                          }
                          var s = new t();
                          s.faces = this.faces;
                          for (
                            var l = 0, u = this.morphTargets.length;
                            l < u;
                            l++
                          ) {
                            if (!this.morphNormals[l]) {
                              (this.morphNormals[l] = {}),
                                (this.morphNormals[l].faceNormals = []),
                                (this.morphNormals[l].vertexNormals = []);
                              for (
                                var c = this.morphNormals[l].faceNormals,
                                  h = this.morphNormals[l].vertexNormals,
                                  d = 0,
                                  p = this.faces.length;
                                d < p;
                                d++
                              ) {
                                var f = new i.Vector3(),
                                  m = {
                                    a: new i.Vector3(),
                                    b: new i.Vector3(),
                                    c: new i.Vector3(),
                                  };
                                c.push(f), h.push(m);
                              }
                            }
                            var v = this.morphNormals[l];
                            (s.vertices = this.morphTargets[l].vertices),
                              s.computeFaceNormals(),
                              s.computeVertexNormals();
                            for (var g = 0, y = this.faces.length; g < y; g++) {
                              var x = this.faces[g],
                                b = v.faceNormals[g],
                                _ = v.vertexNormals[g];
                              b.copy(x.normal),
                                _.a.copy(x.vertexNormals[0]),
                                _.b.copy(x.vertexNormals[1]),
                                _.c.copy(x.vertexNormals[2]);
                            }
                          }
                          for (var w = 0, S = this.faces.length; w < S; w++) {
                            var E = this.faces[w];
                            (E.normal = E.__originalFaceNormal),
                              (E.vertexNormals = E.__originalVertexNormals);
                          }
                        },
                      },
                      {
                        key: "computeBoundingBox",
                        value: function () {
                          null === this.boundingBox &&
                            (this.boundingBox = new i.Box3()),
                            this.boundingBox.setFromPoints(this.vertices);
                        },
                      },
                      {
                        key: "computeBoundingSphere",
                        value: function () {
                          null === this.boundingSphere &&
                            (this.boundingSphere = new i.Sphere()),
                            this.boundingSphere.setFromPoints(this.vertices);
                        },
                      },
                      {
                        key: "merge",
                        value: function (e, t) {
                          var n =
                            arguments.length > 2 && void 0 !== arguments[2]
                              ? arguments[2]
                              : 0;
                          if (e && e.isGeometry) {
                            var r,
                              a = this.vertices.length,
                              o = this.vertices,
                              s = e.vertices,
                              l = this.faces,
                              c = e.faces,
                              h = this.colors,
                              d = e.colors;
                            void 0 !== t &&
                              (r = new i.Matrix3().getNormalMatrix(t));
                            for (var p = 0, f = s.length; p < f; p++) {
                              var m = s[p],
                                v = m.clone();
                              void 0 !== t && v.applyMatrix4(t), o.push(v);
                            }
                            for (var g = 0, y = d.length; g < y; g++)
                              h.push(d[g].clone());
                            for (var x = 0, b = c.length; x < b; x++) {
                              var _ = c[x],
                                w = void 0,
                                S = void 0,
                                E = _.vertexNormals,
                                M = _.vertexColors,
                                A = new u(_.a + a, _.b + a, _.c + a);
                              A.normal.copy(_.normal),
                                void 0 !== r &&
                                  A.normal.applyMatrix3(r).normalize();
                              for (var T = 0, C = E.length; T < C; T++)
                                (w = E[T].clone()),
                                  void 0 !== r && w.applyMatrix3(r).normalize(),
                                  A.vertexNormals.push(w);
                              A.color.copy(_.color);
                              for (var k = 0, P = M.length; k < P; k++)
                                (S = M[k]), A.vertexColors.push(S.clone());
                              (A.materialIndex = _.materialIndex + n),
                                l.push(A);
                            }
                            for (
                              var L = 0, R = e.faceVertexUvs.length;
                              L < R;
                              L++
                            ) {
                              var I = e.faceVertexUvs[L];
                              void 0 === this.faceVertexUvs[L] &&
                                (this.faceVertexUvs[L] = []);
                              for (var F = 0, N = I.length; F < N; F++) {
                                for (
                                  var O = I[F], B = [], D = 0, V = O.length;
                                  D < V;
                                  D++
                                )
                                  B.push(O[D].clone());
                                this.faceVertexUvs[L].push(B);
                              }
                            }
                          } else
                            console.error(
                              "THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",
                              e
                            );
                        },
                      },
                      {
                        key: "mergeMesh",
                        value: function (e) {
                          e && e.isMesh
                            ? (e.matrixAutoUpdate && e.updateMatrix(),
                              this.merge(e.geometry, e.matrix))
                            : console.error(
                                "THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",
                                e
                              );
                        },
                      },
                      {
                        key: "mergeVertices",
                        value: function () {
                          for (
                            var e =
                                arguments.length > 0 && void 0 !== arguments[0]
                                  ? arguments[0]
                                  : 4,
                              t = {},
                              n = [],
                              i = [],
                              r = Math.pow(10, e),
                              a = 0,
                              o = this.vertices.length;
                            a < o;
                            a++
                          ) {
                            var s = this.vertices[a],
                              l =
                                Math.round(s.x * r) +
                                "_" +
                                Math.round(s.y * r) +
                                "_" +
                                Math.round(s.z * r);
                            void 0 === t[l]
                              ? ((t[l] = a),
                                n.push(this.vertices[a]),
                                (i[a] = n.length - 1))
                              : (i[a] = i[t[l]]);
                          }
                          for (
                            var u = [], c = 0, h = this.faces.length;
                            c < h;
                            c++
                          ) {
                            var d = this.faces[c];
                            (d.a = i[d.a]), (d.b = i[d.b]), (d.c = i[d.c]);
                            for (var p = [d.a, d.b, d.c], f = 0; f < 3; f++)
                              if (p[f] === p[(f + 1) % 3]) {
                                u.push(c);
                                break;
                              }
                          }
                          for (var m = u.length - 1; m >= 0; m--) {
                            var v = u[m];
                            this.faces.splice(v, 1);
                            for (
                              var g = 0, y = this.faceVertexUvs.length;
                              g < y;
                              g++
                            )
                              this.faceVertexUvs[g].splice(v, 1);
                          }
                          var x = this.vertices.length - n.length;
                          return (this.vertices = n), x;
                        },
                      },
                      {
                        key: "setFromPoints",
                        value: function (e) {
                          this.vertices = [];
                          for (var t = 0, n = e.length; t < n; t++) {
                            var r = e[t];
                            this.vertices.push(
                              new i.Vector3(r.x, r.y, r.z || 0)
                            );
                          }
                          return this;
                        },
                      },
                      {
                        key: "sortFacesByMaterialIndex",
                        value: function () {
                          for (
                            var e = this.faces, t = e.length, n = 0;
                            n < t;
                            n++
                          )
                            e[n]._id = n;
                          e.sort(function (e, t) {
                            return e.materialIndex - t.materialIndex;
                          });
                          var i,
                            r,
                            a = this.faceVertexUvs[0],
                            o = this.faceVertexUvs[1];
                          a && a.length === t && (i = []),
                            o && o.length === t && (r = []);
                          for (var s = 0; s < t; s++) {
                            var l = e[s]._id;
                            i && i.push(a[l]), r && r.push(o[l]);
                          }
                          i && (this.faceVertexUvs[0] = i),
                            r && (this.faceVertexUvs[1] = r);
                        },
                      },
                      {
                        key: "toJSON",
                        value: function () {
                          var e = {
                            metadata: {
                              version: 4.5,
                              type: "Geometry",
                              generator: "Geometry.toJSON",
                            },
                          };
                          if (
                            ((e.uuid = this.uuid),
                            (e.type = this.type),
                            "" !== this.name && (e.name = this.name),
                            void 0 !== this.parameters)
                          ) {
                            var t = this.parameters;
                            for (var n in t) void 0 !== t[n] && (e[n] = t[n]);
                            return e;
                          }
                          for (
                            var i = [], r = 0;
                            r < this.vertices.length;
                            r++
                          ) {
                            var a = this.vertices[r];
                            i.push(a.x, a.y, a.z);
                          }
                          for (
                            var o = [],
                              s = [],
                              l = {},
                              u = [],
                              c = {},
                              h = [],
                              d = {},
                              p = 0;
                            p < this.faces.length;
                            p++
                          ) {
                            var f = this.faces[p],
                              m = void 0 !== this.faceVertexUvs[0][p],
                              v = f.normal.length() > 0,
                              g = f.vertexNormals.length > 0,
                              y =
                                1 !== f.color.r ||
                                1 !== f.color.g ||
                                1 !== f.color.b,
                              x = f.vertexColors.length > 0,
                              b = 0;
                            if (
                              ((b = E(b, 0, 0)),
                              (b = E(b, 1, !0)),
                              (b = E(b, 2, !1)),
                              (b = E(b, 3, m)),
                              (b = E(b, 4, v)),
                              (b = E(b, 5, g)),
                              (b = E(b, 6, y)),
                              (b = E(b, 7, x)),
                              o.push(b),
                              o.push(f.a, f.b, f.c),
                              o.push(f.materialIndex),
                              m)
                            ) {
                              var _ = this.faceVertexUvs[0][p];
                              o.push(T(_[0]), T(_[1]), T(_[2]));
                            }
                            if ((v && o.push(M(f.normal)), g)) {
                              var w = f.vertexNormals;
                              o.push(M(w[0]), M(w[1]), M(w[2]));
                            }
                            if ((y && o.push(A(f.color)), x)) {
                              var S = f.vertexColors;
                              o.push(A(S[0]), A(S[1]), A(S[2]));
                            }
                          }
                          function E(e, t, n) {
                            return n ? e | (1 << t) : e & ~(1 << t);
                          }
                          function M(e) {
                            var t =
                              e.x.toString() + e.y.toString() + e.z.toString();
                            return (
                              void 0 !== l[t] ||
                                ((l[t] = s.length / 3), s.push(e.x, e.y, e.z)),
                              l[t]
                            );
                          }
                          function A(e) {
                            var t =
                              e.r.toString() + e.g.toString() + e.b.toString();
                            return (
                              void 0 !== c[t] ||
                                ((c[t] = u.length), u.push(e.getHex())),
                              c[t]
                            );
                          }
                          function T(e) {
                            var t = e.x.toString() + e.y.toString();
                            return (
                              void 0 !== d[t] ||
                                ((d[t] = h.length / 2), h.push(e.x, e.y)),
                              d[t]
                            );
                          }
                          return (
                            (e.data = {}),
                            (e.data.vertices = i),
                            (e.data.normals = s),
                            u.length > 0 && (e.data.colors = u),
                            h.length > 0 && (e.data.uvs = [h]),
                            (e.data.faces = o),
                            e
                          );
                        },
                      },
                      {
                        key: "clone",
                        value: function () {
                          return new t().copy(this);
                        },
                      },
                      {
                        key: "copy",
                        value: function (e) {
                          (this.vertices = []),
                            (this.colors = []),
                            (this.faces = []),
                            (this.faceVertexUvs = [[]]),
                            (this.morphTargets = []),
                            (this.morphNormals = []),
                            (this.skinWeights = []),
                            (this.skinIndices = []),
                            (this.lineDistances = []),
                            (this.boundingBox = null),
                            (this.boundingSphere = null),
                            (this.name = e.name);
                          for (
                            var t = e.vertices, n = 0, i = t.length;
                            n < i;
                            n++
                          )
                            this.vertices.push(t[n].clone());
                          for (
                            var r = e.colors, a = 0, o = r.length;
                            a < o;
                            a++
                          )
                            this.colors.push(r[a].clone());
                          for (var s = e.faces, l = 0, u = s.length; l < u; l++)
                            this.faces.push(s[l].clone());
                          for (
                            var c = 0, h = e.faceVertexUvs.length;
                            c < h;
                            c++
                          ) {
                            var d = e.faceVertexUvs[c];
                            void 0 === this.faceVertexUvs[c] &&
                              (this.faceVertexUvs[c] = []);
                            for (var p = 0, f = d.length; p < f; p++) {
                              for (
                                var m = d[p], v = [], g = 0, y = m.length;
                                g < y;
                                g++
                              ) {
                                var x = m[g];
                                v.push(x.clone());
                              }
                              this.faceVertexUvs[c].push(v);
                            }
                          }
                          for (
                            var b = e.morphTargets, _ = 0, w = b.length;
                            _ < w;
                            _++
                          ) {
                            var S = {};
                            if (
                              ((S.name = b[_].name), void 0 !== b[_].vertices)
                            ) {
                              S.vertices = [];
                              for (
                                var E = 0, M = b[_].vertices.length;
                                E < M;
                                E++
                              )
                                S.vertices.push(b[_].vertices[E].clone());
                            }
                            if (void 0 !== b[_].normals) {
                              S.normals = [];
                              for (
                                var A = 0, T = b[_].normals.length;
                                A < T;
                                A++
                              )
                                S.normals.push(b[_].normals[A].clone());
                            }
                            this.morphTargets.push(S);
                          }
                          for (
                            var C = e.morphNormals, k = 0, P = C.length;
                            k < P;
                            k++
                          ) {
                            var L = {};
                            if (void 0 !== C[k].vertexNormals) {
                              L.vertexNormals = [];
                              for (
                                var R = 0, I = C[k].vertexNormals.length;
                                R < I;
                                R++
                              ) {
                                var F = C[k].vertexNormals[R],
                                  N = {};
                                (N.a = F.a.clone()),
                                  (N.b = F.b.clone()),
                                  (N.c = F.c.clone()),
                                  L.vertexNormals.push(N);
                              }
                            }
                            if (void 0 !== C[k].faceNormals) {
                              L.faceNormals = [];
                              for (
                                var O = 0, B = C[k].faceNormals.length;
                                O < B;
                                O++
                              )
                                L.faceNormals.push(C[k].faceNormals[O].clone());
                            }
                            this.morphNormals.push(L);
                          }
                          for (
                            var D = e.skinWeights, V = 0, U = D.length;
                            V < U;
                            V++
                          )
                            this.skinWeights.push(D[V].clone());
                          for (
                            var z = e.skinIndices, j = 0, G = z.length;
                            j < G;
                            j++
                          )
                            this.skinIndices.push(z[j].clone());
                          for (
                            var H = e.lineDistances, W = 0, Y = H.length;
                            W < Y;
                            W++
                          )
                            this.lineDistances.push(H[W]);
                          var q = e.boundingBox;
                          null !== q && (this.boundingBox = q.clone());
                          var X = e.boundingSphere;
                          return (
                            null !== X && (this.boundingSphere = X.clone()),
                            (this.elementsNeedUpdate = e.elementsNeedUpdate),
                            (this.verticesNeedUpdate = e.verticesNeedUpdate),
                            (this.uvsNeedUpdate = e.uvsNeedUpdate),
                            (this.normalsNeedUpdate = e.normalsNeedUpdate),
                            (this.colorsNeedUpdate = e.colorsNeedUpdate),
                            (this.lineDistancesNeedUpdate =
                              e.lineDistancesNeedUpdate),
                            (this.groupsNeedUpdate = e.groupsNeedUpdate),
                            this
                          );
                        },
                      },
                      {
                        key: "toBufferGeometry",
                        value: function () {
                          var e = new l().fromGeometry(this),
                            t = new i.BufferGeometry(),
                            n = new Float32Array(3 * e.vertices.length);
                          if (
                            (t.setAttribute(
                              "position",
                              new i.BufferAttribute(n, 3).copyVector3sArray(
                                e.vertices
                              )
                            ),
                            e.normals.length > 0)
                          ) {
                            var r = new Float32Array(3 * e.normals.length);
                            t.setAttribute(
                              "normal",
                              new i.BufferAttribute(r, 3).copyVector3sArray(
                                e.normals
                              )
                            );
                          }
                          if (e.colors.length > 0) {
                            var a = new Float32Array(3 * e.colors.length);
                            t.setAttribute(
                              "color",
                              new i.BufferAttribute(a, 3).copyColorsArray(
                                e.colors
                              )
                            );
                          }
                          if (e.uvs.length > 0) {
                            var o = new Float32Array(2 * e.uvs.length);
                            t.setAttribute(
                              "uv",
                              new i.BufferAttribute(o, 2).copyVector2sArray(
                                e.uvs
                              )
                            );
                          }
                          if (e.uvs2.length > 0) {
                            var s = new Float32Array(2 * e.uvs2.length);
                            t.setAttribute(
                              "uv2",
                              new i.BufferAttribute(s, 2).copyVector2sArray(
                                e.uvs2
                              )
                            );
                          }
                          for (var u in ((t.groups = e.groups),
                          e.morphTargets)) {
                            for (
                              var c = [],
                                h = e.morphTargets[u],
                                d = 0,
                                p = h.length;
                              d < p;
                              d++
                            ) {
                              var f = h[d],
                                m = new i.Float32BufferAttribute(
                                  3 * f.data.length,
                                  3
                                );
                              (m.name = f.name),
                                c.push(m.copyVector3sArray(f.data));
                            }
                            t.morphAttributes[u] = c;
                          }
                          if (e.skinIndices.length > 0) {
                            var v = new i.Float32BufferAttribute(
                              4 * e.skinIndices.length,
                              4
                            );
                            t.setAttribute(
                              "skinIndex",
                              v.copyVector4sArray(e.skinIndices)
                            );
                          }
                          if (e.skinWeights.length > 0) {
                            var g = new i.Float32BufferAttribute(
                              4 * e.skinWeights.length,
                              4
                            );
                            t.setAttribute(
                              "skinWeight",
                              g.copyVector4sArray(e.skinWeights)
                            );
                          }
                          return (
                            null !== e.boundingSphere &&
                              (t.boundingSphere = e.boundingSphere.clone()),
                            null !== e.boundingBox &&
                              (t.boundingBox = e.boundingBox.clone()),
                            t
                          );
                        },
                      },
                      {
                        key: "computeTangents",
                        value: function () {
                          console.error(
                            "THREE.Geometry: .computeTangents() has been removed."
                          );
                        },
                      },
                      {
                        key: "computeLineDistances",
                        value: function () {
                          console.error(
                            "THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead."
                          );
                        },
                      },
                      {
                        key: "applyMatrix",
                        value: function (e) {
                          return (
                            console.warn(
                              "THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."
                            ),
                            this.applyMatrix4(e)
                          );
                        },
                      },
                      {
                        key: "dispose",
                        value: function () {
                          this.dispatchEvent({ type: "dispose" });
                        },
                      },
                    ],
                    [
                      {
                        key: "createBufferGeometryFromObject",
                        value: function (e) {
                          var t = new i.BufferGeometry(),
                            n = e.geometry;
                          if (e.isPoints || e.isLine) {
                            var r = new i.Float32BufferAttribute(
                                3 * n.vertices.length,
                                3
                              ),
                              a = new i.Float32BufferAttribute(
                                3 * n.colors.length,
                                3
                              );
                            if (
                              (t.setAttribute(
                                "position",
                                r.copyVector3sArray(n.vertices)
                              ),
                              t.setAttribute(
                                "color",
                                a.copyColorsArray(n.colors)
                              ),
                              n.lineDistances &&
                                n.lineDistances.length === n.vertices.length)
                            ) {
                              var o = new i.Float32BufferAttribute(
                                n.lineDistances.length,
                                1
                              );
                              t.setAttribute(
                                "lineDistance",
                                o.copyArray(n.lineDistances)
                              );
                            }
                            null !== n.boundingSphere &&
                              (t.boundingSphere = n.boundingSphere.clone()),
                              null !== n.boundingBox &&
                                (t.boundingBox = n.boundingBox.clone());
                          } else e.isMesh && (t = n.toBufferGeometry());
                          return t;
                        },
                      },
                    ]
                  ),
                  t
                );
              })(i.EventDispatcher);
            s.prototype.isGeometry = !0;
            var l = (function () {
                function e() {
                  f(this, e),
                    (this.vertices = []),
                    (this.normals = []),
                    (this.colors = []),
                    (this.uvs = []),
                    (this.uvs2 = []),
                    (this.groups = []),
                    (this.morphTargets = {}),
                    (this.skinWeights = []),
                    (this.skinIndices = []),
                    (this.boundingBox = null),
                    (this.boundingSphere = null),
                    (this.verticesNeedUpdate = !1),
                    (this.normalsNeedUpdate = !1),
                    (this.colorsNeedUpdate = !1),
                    (this.uvsNeedUpdate = !1),
                    (this.groupsNeedUpdate = !1);
                }
                return (
                  m(e, [
                    {
                      key: "computeGroups",
                      value: function (e) {
                        var t,
                          n,
                          i = [],
                          r = void 0,
                          a = e.faces;
                        for (n = 0; n < a.length; n++) {
                          var o = a[n];
                          o.materialIndex !== r &&
                            ((r = o.materialIndex),
                            void 0 !== t &&
                              ((t.count = 3 * n - t.start), i.push(t)),
                            (t = { start: 3 * n, materialIndex: r }));
                        }
                        void 0 !== t &&
                          ((t.count = 3 * n - t.start), i.push(t)),
                          (this.groups = i);
                      },
                    },
                    {
                      key: "fromGeometry",
                      value: function (e) {
                        var t,
                          n = e.faces,
                          r = e.vertices,
                          a = e.faceVertexUvs,
                          o = a[0] && a[0].length > 0,
                          s = a[1] && a[1].length > 0,
                          l = e.morphTargets,
                          u = l.length;
                        if (u > 0) {
                          t = [];
                          for (var c = 0; c < u; c++)
                            t[c] = { name: l[c].name, data: [] };
                          this.morphTargets.position = t;
                        }
                        var h,
                          d = e.morphNormals,
                          p = d.length;
                        if (p > 0) {
                          h = [];
                          for (var f = 0; f < p; f++)
                            h[f] = { name: d[f].name, data: [] };
                          this.morphTargets.normal = h;
                        }
                        var m = e.skinIndices,
                          v = e.skinWeights,
                          g = m.length === r.length,
                          y = v.length === r.length;
                        r.length > 0 &&
                          0 === n.length &&
                          console.error(
                            "THREE.DirectGeometry: Faceless geometries are not supported."
                          );
                        for (var x = 0; x < n.length; x++) {
                          var b = n[x];
                          this.vertices.push(r[b.a], r[b.b], r[b.c]);
                          var _ = b.vertexNormals;
                          if (3 === _.length)
                            this.normals.push(_[0], _[1], _[2]);
                          else {
                            var w = b.normal;
                            this.normals.push(w, w, w);
                          }
                          var S = b.vertexColors;
                          if (3 === S.length)
                            this.colors.push(S[0], S[1], S[2]);
                          else {
                            var E = b.color;
                            this.colors.push(E, E, E);
                          }
                          if (!0 === o) {
                            var M = a[0][x];
                            void 0 !== M
                              ? this.uvs.push(M[0], M[1], M[2])
                              : (console.warn(
                                  "THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",
                                  x
                                ),
                                this.uvs.push(
                                  new i.Vector2(),
                                  new i.Vector2(),
                                  new i.Vector2()
                                ));
                          }
                          if (!0 === s) {
                            var A = a[1][x];
                            void 0 !== A
                              ? this.uvs2.push(A[0], A[1], A[2])
                              : (console.warn(
                                  "THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",
                                  x
                                ),
                                this.uvs2.push(
                                  new i.Vector2(),
                                  new i.Vector2(),
                                  new i.Vector2()
                                ));
                          }
                          for (var T = 0; T < u; T++) {
                            var C = l[T].vertices;
                            t[T].data.push(C[b.a], C[b.b], C[b.c]);
                          }
                          for (var k = 0; k < p; k++) {
                            var P = d[k].vertexNormals[x];
                            h[k].data.push(P.a, P.b, P.c);
                          }
                          g && this.skinIndices.push(m[b.a], m[b.b], m[b.c]),
                            y && this.skinWeights.push(v[b.a], v[b.b], v[b.c]);
                        }
                        return (
                          this.computeGroups(e),
                          (this.verticesNeedUpdate = e.verticesNeedUpdate),
                          (this.normalsNeedUpdate = e.normalsNeedUpdate),
                          (this.colorsNeedUpdate = e.colorsNeedUpdate),
                          (this.uvsNeedUpdate = e.uvsNeedUpdate),
                          (this.groupsNeedUpdate = e.groupsNeedUpdate),
                          null !== e.boundingSphere &&
                            (this.boundingSphere = e.boundingSphere.clone()),
                          null !== e.boundingBox &&
                            (this.boundingBox = e.boundingBox.clone()),
                          this
                        );
                      },
                    },
                  ]),
                  e
                );
              })(),
              u = (function () {
                function e(t, n, r, a, o) {
                  var s =
                    arguments.length > 5 && void 0 !== arguments[5]
                      ? arguments[5]
                      : 0;
                  f(this, e),
                    (this.a = t),
                    (this.b = n),
                    (this.c = r),
                    (this.normal = a && a.isVector3 ? a : new i.Vector3()),
                    (this.vertexNormals = Array.isArray(a) ? a : []),
                    (this.color = o && o.isColor ? o : new i.Color()),
                    (this.vertexColors = Array.isArray(o) ? o : []),
                    (this.materialIndex = s);
                }
                return (
                  m(e, [
                    {
                      key: "clone",
                      value: function () {
                        return new this.constructor().copy(this);
                      },
                    },
                    {
                      key: "copy",
                      value: function (e) {
                        (this.a = e.a),
                          (this.b = e.b),
                          (this.c = e.c),
                          this.normal.copy(e.normal),
                          this.color.copy(e.color),
                          (this.materialIndex = e.materialIndex);
                        for (var t = 0, n = e.vertexNormals.length; t < n; t++)
                          this.vertexNormals[t] = e.vertexNormals[t].clone();
                        for (var i = 0, r = e.vertexColors.length; i < r; i++)
                          this.vertexColors[i] = e.vertexColors[i].clone();
                        return this;
                      },
                    },
                  ]),
                  e
                );
              })();
          },
          "./node_modules/three/examples/jsm/loaders/GLTFLoader.js": function (
            e,
            t,
            n
          ) {
            "use strict";
            n.r(t),
              n.d(t, "GLTFLoader", function () {
                return r;
              });
            var i = n("./node_modules/three/build/three.module.js"),
              r = (function (e) {
                function t(e) {
                  var n;
                  return (
                    f(this, t),
                    ((n = c(this, h(t).call(this, e))).dracoLoader = null),
                    (n.ktx2Loader = null),
                    (n.meshoptDecoder = null),
                    (n.pluginCallbacks = []),
                    n.register(function (e) {
                      return new v(e);
                    }),
                    n.register(function (e) {
                      return new y(e);
                    }),
                    n.register(function (e) {
                      return new x(e);
                    }),
                    n.register(function (e) {
                      return new g(e);
                    }),
                    n.register(function (e) {
                      return new s(e);
                    }),
                    n.register(function (e) {
                      return new b(e);
                    }),
                    n
                  );
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "load",
                      value: function (e, t, n, r) {
                        var a,
                          o = this;
                        (a =
                          "" !== this.resourcePath
                            ? this.resourcePath
                            : "" !== this.path
                            ? this.path
                            : i.LoaderUtils.extractUrlBase(e)),
                          this.manager.itemStart(e);
                        var s = function (t) {
                            r ? r(t) : console.error(t),
                              o.manager.itemError(e),
                              o.manager.itemEnd(e);
                          },
                          l = new i.FileLoader(this.manager);
                        l.setPath(this.path),
                          l.setResponseType("arraybuffer"),
                          l.setRequestHeader(this.requestHeader),
                          l.setWithCredentials(this.withCredentials),
                          l.load(
                            e,
                            function (n) {
                              try {
                                o.parse(
                                  n,
                                  a,
                                  function (n) {
                                    t(n), o.manager.itemEnd(e);
                                  },
                                  s
                                );
                              } catch (i) {
                                s(i);
                              }
                            },
                            n,
                            s
                          );
                      },
                    },
                    {
                      key: "setDRACOLoader",
                      value: function (e) {
                        return (this.dracoLoader = e), this;
                      },
                    },
                    {
                      key: "setDDSLoader",
                      value: function () {
                        throw new Error(
                          'THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".'
                        );
                      },
                    },
                    {
                      key: "setKTX2Loader",
                      value: function (e) {
                        return (this.ktx2Loader = e), this;
                      },
                    },
                    {
                      key: "setMeshoptDecoder",
                      value: function (e) {
                        return (this.meshoptDecoder = e), this;
                      },
                    },
                    {
                      key: "register",
                      value: function (e) {
                        return (
                          -1 === this.pluginCallbacks.indexOf(e) &&
                            this.pluginCallbacks.push(e),
                          this
                        );
                      },
                    },
                    {
                      key: "unregister",
                      value: function (e) {
                        return (
                          -1 !== this.pluginCallbacks.indexOf(e) &&
                            this.pluginCallbacks.splice(
                              this.pluginCallbacks.indexOf(e),
                              1
                            ),
                          this
                        );
                      },
                    },
                    {
                      key: "parse",
                      value: function (e, t, n, r) {
                        var a,
                          s = {},
                          l = {};
                        if ("string" === typeof e) a = e;
                        else if (
                          i.LoaderUtils.decodeText(new Uint8Array(e, 0, 4)) ===
                          _
                        ) {
                          try {
                            s[o.KHR_BINARY_GLTF] = new E(e);
                          } catch (g) {
                            return void (r && r(g));
                          }
                          a = s[o.KHR_BINARY_GLTF].content;
                        } else a = i.LoaderUtils.decodeText(new Uint8Array(e));
                        var c = JSON.parse(a);
                        if (void 0 === c.asset || c.asset.version[0] < 2)
                          r &&
                            r(
                              new Error(
                                "THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."
                              )
                            );
                        else {
                          var h = new te(c, {
                            path: t || this.resourcePath || "",
                            crossOrigin: this.crossOrigin,
                            requestHeader: this.requestHeader,
                            manager: this.manager,
                            ktx2Loader: this.ktx2Loader,
                            meshoptDecoder: this.meshoptDecoder,
                          });
                          h.fileLoader.setRequestHeader(this.requestHeader);
                          for (
                            var d = 0;
                            d < this.pluginCallbacks.length;
                            d++
                          ) {
                            var p = this.pluginCallbacks[d](h);
                            (l[p.name] = p), (s[p.name] = !0);
                          }
                          if (c.extensionsUsed)
                            for (var f = 0; f < c.extensionsUsed.length; ++f) {
                              var m = c.extensionsUsed[f],
                                v = c.extensionsRequired || [];
                              switch (m) {
                                case o.KHR_MATERIALS_UNLIT:
                                  s[m] = new u();
                                  break;
                                case o.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:
                                  s[m] = new C();
                                  break;
                                case o.KHR_DRACO_MESH_COMPRESSION:
                                  s[m] = new M(c, this.dracoLoader);
                                  break;
                                case o.KHR_TEXTURE_TRANSFORM:
                                  s[m] = new A();
                                  break;
                                case o.KHR_MESH_QUANTIZATION:
                                  s[m] = new k();
                                  break;
                                default:
                                  v.indexOf(m) >= 0 &&
                                    void 0 === l[m] &&
                                    console.warn(
                                      'THREE.GLTFLoader: Unknown extension "' +
                                        m +
                                        '".'
                                    );
                              }
                            }
                          h.setExtensions(s), h.setPlugins(l), h.parse(n, r);
                        }
                      },
                    },
                  ]),
                  t
                );
              })(i.Loader);
            function a() {
              var e = {};
              return {
                get: function (t) {
                  return e[t];
                },
                add: function (t, n) {
                  e[t] = n;
                },
                remove: function (t) {
                  delete e[t];
                },
                removeAll: function () {
                  e = {};
                },
              };
            }
            var o = {
                KHR_BINARY_GLTF: "KHR_binary_glTF",
                KHR_DRACO_MESH_COMPRESSION: "KHR_draco_mesh_compression",
                KHR_LIGHTS_PUNCTUAL: "KHR_lights_punctual",
                KHR_MATERIALS_CLEARCOAT: "KHR_materials_clearcoat",
                KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:
                  "KHR_materials_pbrSpecularGlossiness",
                KHR_MATERIALS_TRANSMISSION: "KHR_materials_transmission",
                KHR_MATERIALS_UNLIT: "KHR_materials_unlit",
                KHR_TEXTURE_BASISU: "KHR_texture_basisu",
                KHR_TEXTURE_TRANSFORM: "KHR_texture_transform",
                KHR_MESH_QUANTIZATION: "KHR_mesh_quantization",
                EXT_TEXTURE_WEBP: "EXT_texture_webp",
                EXT_MESHOPT_COMPRESSION: "EXT_meshopt_compression",
              },
              s = (function () {
                function e(t) {
                  f(this, e),
                    (this.parser = t),
                    (this.name = o.KHR_LIGHTS_PUNCTUAL),
                    (this.cache = { refs: {}, uses: {} });
                }
                return (
                  m(e, [
                    {
                      key: "_markDefs",
                      value: function () {
                        for (
                          var e = this.parser,
                            t = this.parser.json.nodes || [],
                            n = 0,
                            i = t.length;
                          n < i;
                          n++
                        ) {
                          var r = t[n];
                          r.extensions &&
                            r.extensions[this.name] &&
                            void 0 !== r.extensions[this.name].light &&
                            e._addNodeRef(
                              this.cache,
                              r.extensions[this.name].light
                            );
                        }
                      },
                    },
                    {
                      key: "_loadLight",
                      value: function (e) {
                        var t = this.parser,
                          n = "light:" + e,
                          r = t.cache.get(n);
                        if (r) return r;
                        var a,
                          o = t.json,
                          s = (((o.extensions && o.extensions[this.name]) || {})
                            .lights || [])[e],
                          l = new i.Color(16777215);
                        void 0 !== s.color && l.fromArray(s.color);
                        var u = void 0 !== s.range ? s.range : 0;
                        switch (s.type) {
                          case "directional":
                            (a = new i.DirectionalLight(l)).target.position.set(
                              0,
                              0,
                              -1
                            ),
                              a.add(a.target);
                            break;
                          case "point":
                            (a = new i.PointLight(l)).distance = u;
                            break;
                          case "spot":
                            ((a = new i.SpotLight(l)).distance = u),
                              (s.spot = s.spot || {}),
                              (s.spot.innerConeAngle =
                                void 0 !== s.spot.innerConeAngle
                                  ? s.spot.innerConeAngle
                                  : 0),
                              (s.spot.outerConeAngle =
                                void 0 !== s.spot.outerConeAngle
                                  ? s.spot.outerConeAngle
                                  : Math.PI / 4),
                              (a.angle = s.spot.outerConeAngle),
                              (a.penumbra =
                                1 -
                                s.spot.innerConeAngle / s.spot.outerConeAngle),
                              a.target.position.set(0, 0, -1),
                              a.add(a.target);
                            break;
                          default:
                            throw new Error(
                              "THREE.GLTFLoader: Unexpected light type: " +
                                s.type
                            );
                        }
                        return (
                          a.position.set(0, 0, 0),
                          (a.decay = 2),
                          void 0 !== s.intensity && (a.intensity = s.intensity),
                          (a.name = t.createUniqueName(s.name || "light_" + e)),
                          (r = Promise.resolve(a)),
                          t.cache.add(n, r),
                          r
                        );
                      },
                    },
                    {
                      key: "createNodeAttachment",
                      value: function (e) {
                        var t = this,
                          n = this.parser,
                          i = n.json.nodes[e],
                          r = ((i.extensions && i.extensions[this.name]) || {})
                            .light;
                        return void 0 === r
                          ? null
                          : this._loadLight(r).then(function (e) {
                              return n._getNodeRef(t.cache, r, e);
                            });
                      },
                    },
                  ]),
                  e
                );
              })(),
              u = (function () {
                function e() {
                  f(this, e), (this.name = o.KHR_MATERIALS_UNLIT);
                }
                return (
                  m(e, [
                    {
                      key: "getMaterialType",
                      value: function () {
                        return i.MeshBasicMaterial;
                      },
                    },
                    {
                      key: "extendParams",
                      value: function (e, t, n) {
                        var r = [];
                        (e.color = new i.Color(1, 1, 1)), (e.opacity = 1);
                        var a = t.pbrMetallicRoughness;
                        if (a) {
                          if (Array.isArray(a.baseColorFactor)) {
                            var o = a.baseColorFactor;
                            e.color.fromArray(o), (e.opacity = o[3]);
                          }
                          void 0 !== a.baseColorTexture &&
                            r.push(
                              n.assignTexture(e, "map", a.baseColorTexture)
                            );
                        }
                        return Promise.all(r);
                      },
                    },
                  ]),
                  e
                );
              })(),
              v = (function () {
                function e(t) {
                  f(this, e),
                    (this.parser = t),
                    (this.name = o.KHR_MATERIALS_CLEARCOAT);
                }
                return (
                  m(e, [
                    {
                      key: "getMaterialType",
                      value: function (e) {
                        var t = this.parser.json.materials[e];
                        return t.extensions && t.extensions[this.name]
                          ? i.MeshPhysicalMaterial
                          : null;
                      },
                    },
                    {
                      key: "extendMaterialParams",
                      value: function (e, t) {
                        var n = this.parser,
                          r = n.json.materials[e];
                        if (!r.extensions || !r.extensions[this.name])
                          return Promise.resolve();
                        var a = [],
                          o = r.extensions[this.name];
                        if (
                          (void 0 !== o.clearcoatFactor &&
                            (t.clearcoat = o.clearcoatFactor),
                          void 0 !== o.clearcoatTexture &&
                            a.push(
                              n.assignTexture(
                                t,
                                "clearcoatMap",
                                o.clearcoatTexture
                              )
                            ),
                          void 0 !== o.clearcoatRoughnessFactor &&
                            (t.clearcoatRoughness = o.clearcoatRoughnessFactor),
                          void 0 !== o.clearcoatRoughnessTexture &&
                            a.push(
                              n.assignTexture(
                                t,
                                "clearcoatRoughnessMap",
                                o.clearcoatRoughnessTexture
                              )
                            ),
                          void 0 !== o.clearcoatNormalTexture &&
                            (a.push(
                              n.assignTexture(
                                t,
                                "clearcoatNormalMap",
                                o.clearcoatNormalTexture
                              )
                            ),
                            void 0 !== o.clearcoatNormalTexture.scale))
                        ) {
                          var s = o.clearcoatNormalTexture.scale;
                          t.clearcoatNormalScale = new i.Vector2(s, -s);
                        }
                        return Promise.all(a);
                      },
                    },
                  ]),
                  e
                );
              })(),
              g = (function () {
                function e(t) {
                  f(this, e),
                    (this.parser = t),
                    (this.name = o.KHR_MATERIALS_TRANSMISSION);
                }
                return (
                  m(e, [
                    {
                      key: "getMaterialType",
                      value: function (e) {
                        var t = this.parser.json.materials[e];
                        return t.extensions && t.extensions[this.name]
                          ? i.MeshPhysicalMaterial
                          : null;
                      },
                    },
                    {
                      key: "extendMaterialParams",
                      value: function (e, t) {
                        var n = this.parser,
                          i = n.json.materials[e];
                        if (!i.extensions || !i.extensions[this.name])
                          return Promise.resolve();
                        var r = [],
                          a = i.extensions[this.name];
                        return (
                          void 0 !== a.transmissionFactor &&
                            (t.transmission = a.transmissionFactor),
                          void 0 !== a.transmissionTexture &&
                            r.push(
                              n.assignTexture(
                                t,
                                "transmissionMap",
                                a.transmissionTexture
                              )
                            ),
                          Promise.all(r)
                        );
                      },
                    },
                  ]),
                  e
                );
              })(),
              y = (function () {
                function e(t) {
                  f(this, e),
                    (this.parser = t),
                    (this.name = o.KHR_TEXTURE_BASISU);
                }
                return (
                  m(e, [
                    {
                      key: "loadTexture",
                      value: function (e) {
                        var t = this.parser,
                          n = t.json,
                          i = n.textures[e];
                        if (!i.extensions || !i.extensions[this.name])
                          return null;
                        var r = i.extensions[this.name],
                          a = n.images[r.source],
                          o = t.options.ktx2Loader;
                        if (!o) {
                          if (
                            n.extensionsRequired &&
                            n.extensionsRequired.indexOf(this.name) >= 0
                          )
                            throw new Error(
                              "THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures"
                            );
                          return null;
                        }
                        return t.loadTextureImage(e, a, o);
                      },
                    },
                  ]),
                  e
                );
              })(),
              x = (function () {
                function e(t) {
                  f(this, e),
                    (this.parser = t),
                    (this.name = o.EXT_TEXTURE_WEBP),
                    (this.isSupported = null);
                }
                return (
                  m(e, [
                    {
                      key: "loadTexture",
                      value: function (e) {
                        var t = this.name,
                          n = this.parser,
                          i = n.json,
                          r = i.textures[e];
                        if (!r.extensions || !r.extensions[t]) return null;
                        var a = r.extensions[t],
                          o = i.images[a.source],
                          s = n.textureLoader;
                        if (o.uri) {
                          var l = n.options.manager.getHandler(o.uri);
                          null !== l && (s = l);
                        }
                        return this.detectSupport().then(function (r) {
                          if (r) return n.loadTextureImage(e, o, s);
                          if (
                            i.extensionsRequired &&
                            i.extensionsRequired.indexOf(t) >= 0
                          )
                            throw new Error(
                              "THREE.GLTFLoader: WebP required by asset but unsupported."
                            );
                          return n.loadTexture(e);
                        });
                      },
                    },
                    {
                      key: "detectSupport",
                      value: function () {
                        return (
                          this.isSupported ||
                            (this.isSupported = new Promise(function (e) {
                              var t = new Image();
                              (t.src =
                                "data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA"),
                                (t.onload = t.onerror =
                                  function () {
                                    e(1 === t.height);
                                  });
                            })),
                          this.isSupported
                        );
                      },
                    },
                  ]),
                  e
                );
              })(),
              b = (function () {
                function e(t) {
                  f(this, e),
                    (this.name = o.EXT_MESHOPT_COMPRESSION),
                    (this.parser = t);
                }
                return (
                  m(e, [
                    {
                      key: "loadBufferView",
                      value: function (e) {
                        var t = this.parser.json,
                          n = t.bufferViews[e];
                        if (n.extensions && n.extensions[this.name]) {
                          var i = n.extensions[this.name],
                            r = this.parser.getDependency("buffer", i.buffer),
                            a = this.parser.options.meshoptDecoder;
                          if (!a || !a.supported) {
                            if (
                              t.extensionsRequired &&
                              t.extensionsRequired.indexOf(this.name) >= 0
                            )
                              throw new Error(
                                "THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files"
                              );
                            return null;
                          }
                          return Promise.all([r, a.ready]).then(function (e) {
                            var t = i.byteOffset || 0,
                              n = i.byteLength || 0,
                              r = i.count,
                              o = i.byteStride,
                              s = new ArrayBuffer(r * o),
                              l = new Uint8Array(e[0], t, n);
                            return (
                              a.decodeGltfBuffer(
                                new Uint8Array(s),
                                r,
                                o,
                                l,
                                i.mode,
                                i.filter
                              ),
                              s
                            );
                          });
                        }
                        return null;
                      },
                    },
                  ]),
                  e
                );
              })(),
              _ = "glTF",
              w = 1313821514,
              S = 5130562,
              E = function e(t) {
                f(this, e),
                  (this.name = o.KHR_BINARY_GLTF),
                  (this.content = null),
                  (this.body = null);
                var n = new DataView(t, 0, 12);
                if (
                  ((this.header = {
                    magic: i.LoaderUtils.decodeText(
                      new Uint8Array(t.slice(0, 4))
                    ),
                    version: n.getUint32(4, !0),
                    length: n.getUint32(8, !0),
                  }),
                  this.header.magic !== _)
                )
                  throw new Error(
                    "THREE.GLTFLoader: Unsupported glTF-Binary header."
                  );
                if (this.header.version < 2)
                  throw new Error(
                    "THREE.GLTFLoader: Legacy binary file detected."
                  );
                for (
                  var r = this.header.length - 12,
                    a = new DataView(t, 12),
                    s = 0;
                  s < r;

                ) {
                  var l = a.getUint32(s, !0);
                  s += 4;
                  var u = a.getUint32(s, !0);
                  if (((s += 4), u === w)) {
                    var c = new Uint8Array(t, 12 + s, l);
                    this.content = i.LoaderUtils.decodeText(c);
                  } else if (u === S) {
                    var h = 12 + s;
                    this.body = t.slice(h, h + l);
                  }
                  s += l;
                }
                if (null === this.content)
                  throw new Error("THREE.GLTFLoader: JSON content not found.");
              },
              M = (function () {
                function e(t, n) {
                  if ((f(this, e), !n))
                    throw new Error(
                      "THREE.GLTFLoader: No DRACOLoader instance provided."
                    );
                  (this.name = o.KHR_DRACO_MESH_COMPRESSION),
                    (this.json = t),
                    (this.dracoLoader = n),
                    this.dracoLoader.preload();
                }
                return (
                  m(e, [
                    {
                      key: "decodePrimitive",
                      value: function (e, t) {
                        var n = this.json,
                          i = this.dracoLoader,
                          r = e.extensions[this.name].bufferView,
                          a = e.extensions[this.name].attributes,
                          o = {},
                          s = {},
                          l = {};
                        for (var u in a) {
                          var c = j[u] || u.toLowerCase();
                          o[c] = a[u];
                        }
                        for (var h in e.attributes) {
                          var d = j[h] || h.toLowerCase();
                          if (void 0 !== a[h]) {
                            var p = n.accessors[e.attributes[h]],
                              f = D[p.componentType];
                            (l[d] = f), (s[d] = !0 === p.normalized);
                          }
                        }
                        return t
                          .getDependency("bufferView", r)
                          .then(function (e) {
                            return new Promise(function (t) {
                              i.decodeDracoFile(
                                e,
                                function (e) {
                                  for (var n in e.attributes) {
                                    var i = e.attributes[n],
                                      r = s[n];
                                    void 0 !== r && (i.normalized = r);
                                  }
                                  t(e);
                                },
                                o,
                                l
                              );
                            });
                          });
                      },
                    },
                  ]),
                  e
                );
              })(),
              A = (function () {
                function e() {
                  f(this, e), (this.name = o.KHR_TEXTURE_TRANSFORM);
                }
                return (
                  m(e, [
                    {
                      key: "extendTexture",
                      value: function (e, t) {
                        return (
                          void 0 !== t.texCoord &&
                            console.warn(
                              'THREE.GLTFLoader: Custom UV sets in "' +
                                this.name +
                                '" extension not yet supported.'
                            ),
                          (void 0 === t.offset &&
                            void 0 === t.rotation &&
                            void 0 === t.scale) ||
                            ((e = e.clone()),
                            void 0 !== t.offset && e.offset.fromArray(t.offset),
                            void 0 !== t.rotation && (e.rotation = t.rotation),
                            void 0 !== t.scale && e.repeat.fromArray(t.scale),
                            (e.needsUpdate = !0)),
                          e
                        );
                      },
                    },
                  ]),
                  e
                );
              })(),
              T = (function (e) {
                function t(e) {
                  var n;
                  f(this, t),
                    ((n = c(
                      this,
                      h(t).call(this)
                    )).isGLTFSpecularGlossinessMaterial = !0);
                  var r = [
                      "#ifdef USE_SPECULARMAP",
                      "\tuniform sampler2D specularMap;",
                      "#endif",
                    ].join("\n"),
                    a = [
                      "#ifdef USE_GLOSSINESSMAP",
                      "\tuniform sampler2D glossinessMap;",
                      "#endif",
                    ].join("\n"),
                    o = [
                      "vec3 specularFactor = specular;",
                      "#ifdef USE_SPECULARMAP",
                      "\tvec4 texelSpecular = texture2D( specularMap, vUv );",
                      "\ttexelSpecular = sRGBToLinear( texelSpecular );",
                      "\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture",
                      "\tspecularFactor *= texelSpecular.rgb;",
                      "#endif",
                    ].join("\n"),
                    s = [
                      "float glossinessFactor = glossiness;",
                      "#ifdef USE_GLOSSINESSMAP",
                      "\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );",
                      "\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture",
                      "\tglossinessFactor *= texelGlossiness.a;",
                      "#endif",
                    ].join("\n"),
                    l = [
                      "PhysicalMaterial material;",
                      "material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );",
                      "vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );",
                      "float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );",
                      "material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.",
                      "material.specularRoughness += geometryRoughness;",
                      "material.specularRoughness = min( material.specularRoughness, 1.0 );",
                      "material.specularColor = specularFactor;",
                    ].join("\n"),
                    u = {
                      specular: { value: new i.Color().setHex(16777215) },
                      glossiness: { value: 1 },
                      specularMap: { value: null },
                      glossinessMap: { value: null },
                    };
                  return (
                    (n._extraUniforms = u),
                    (n.onBeforeCompile = function (e) {
                      for (var t in u) e.uniforms[t] = u[t];
                      e.fragmentShader = e.fragmentShader
                        .replace(
                          "uniform float roughness;",
                          "uniform vec3 specular;"
                        )
                        .replace(
                          "uniform float metalness;",
                          "uniform float glossiness;"
                        )
                        .replace("#include <roughnessmap_pars_fragment>", r)
                        .replace("#include <metalnessmap_pars_fragment>", a)
                        .replace("#include <roughnessmap_fragment>", o)
                        .replace("#include <metalnessmap_fragment>", s)
                        .replace("#include <lights_physical_fragment>", l);
                    }),
                    Object.defineProperties(d(n), {
                      specular: {
                        get: function () {
                          return u.specular.value;
                        },
                        set: function (e) {
                          u.specular.value = e;
                        },
                      },
                      specularMap: {
                        get: function () {
                          return u.specularMap.value;
                        },
                        set: function (e) {
                          (u.specularMap.value = e),
                            e
                              ? (this.defines.USE_SPECULARMAP = "")
                              : delete this.defines.USE_SPECULARMAP;
                        },
                      },
                      glossiness: {
                        get: function () {
                          return u.glossiness.value;
                        },
                        set: function (e) {
                          u.glossiness.value = e;
                        },
                      },
                      glossinessMap: {
                        get: function () {
                          return u.glossinessMap.value;
                        },
                        set: function (e) {
                          (u.glossinessMap.value = e),
                            e
                              ? ((this.defines.USE_GLOSSINESSMAP = ""),
                                (this.defines.USE_UV = ""))
                              : (delete this.defines.USE_GLOSSINESSMAP,
                                delete this.defines.USE_UV);
                        },
                      },
                    }),
                    delete n.metalness,
                    delete n.roughness,
                    delete n.metalnessMap,
                    delete n.roughnessMap,
                    n.setValues(e),
                    n
                  );
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "copy",
                      value: function (e) {
                        return (
                          l(h(t.prototype), "copy", this).call(this, e),
                          (this.specularMap = e.specularMap),
                          this.specular.copy(e.specular),
                          (this.glossinessMap = e.glossinessMap),
                          (this.glossiness = e.glossiness),
                          delete this.metalness,
                          delete this.roughness,
                          delete this.metalnessMap,
                          delete this.roughnessMap,
                          this
                        );
                      },
                    },
                  ]),
                  t
                );
              })(i.MeshStandardMaterial),
              C = (function () {
                function e() {
                  f(this, e),
                    (this.name = o.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS),
                    (this.specularGlossinessParams = [
                      "color",
                      "map",
                      "lightMap",
                      "lightMapIntensity",
                      "aoMap",
                      "aoMapIntensity",
                      "emissive",
                      "emissiveIntensity",
                      "emissiveMap",
                      "bumpMap",
                      "bumpScale",
                      "normalMap",
                      "normalMapType",
                      "displacementMap",
                      "displacementScale",
                      "displacementBias",
                      "specularMap",
                      "specular",
                      "glossinessMap",
                      "glossiness",
                      "alphaMap",
                      "envMap",
                      "envMapIntensity",
                      "refractionRatio",
                    ]);
                }
                return (
                  m(e, [
                    {
                      key: "getMaterialType",
                      value: function () {
                        return T;
                      },
                    },
                    {
                      key: "extendParams",
                      value: function (e, t, n) {
                        var r = t.extensions[this.name];
                        (e.color = new i.Color(1, 1, 1)), (e.opacity = 1);
                        var a = [];
                        if (Array.isArray(r.diffuseFactor)) {
                          var o = r.diffuseFactor;
                          e.color.fromArray(o), (e.opacity = o[3]);
                        }
                        if (
                          (void 0 !== r.diffuseTexture &&
                            a.push(n.assignTexture(e, "map", r.diffuseTexture)),
                          (e.emissive = new i.Color(0, 0, 0)),
                          (e.glossiness =
                            void 0 !== r.glossinessFactor
                              ? r.glossinessFactor
                              : 1),
                          (e.specular = new i.Color(1, 1, 1)),
                          Array.isArray(r.specularFactor) &&
                            e.specular.fromArray(r.specularFactor),
                          void 0 !== r.specularGlossinessTexture)
                        ) {
                          var s = r.specularGlossinessTexture;
                          a.push(n.assignTexture(e, "glossinessMap", s)),
                            a.push(n.assignTexture(e, "specularMap", s));
                        }
                        return Promise.all(a);
                      },
                    },
                    {
                      key: "createMaterial",
                      value: function (e) {
                        var t = new T(e);
                        return (
                          (t.fog = !0),
                          (t.color = e.color),
                          (t.map = void 0 === e.map ? null : e.map),
                          (t.lightMap = null),
                          (t.lightMapIntensity = 1),
                          (t.aoMap = void 0 === e.aoMap ? null : e.aoMap),
                          (t.aoMapIntensity = 1),
                          (t.emissive = e.emissive),
                          (t.emissiveIntensity = 1),
                          (t.emissiveMap =
                            void 0 === e.emissiveMap ? null : e.emissiveMap),
                          (t.bumpMap = void 0 === e.bumpMap ? null : e.bumpMap),
                          (t.bumpScale = 1),
                          (t.normalMap =
                            void 0 === e.normalMap ? null : e.normalMap),
                          (t.normalMapType = i.TangentSpaceNormalMap),
                          e.normalScale && (t.normalScale = e.normalScale),
                          (t.displacementMap = null),
                          (t.displacementScale = 1),
                          (t.displacementBias = 0),
                          (t.specularMap =
                            void 0 === e.specularMap ? null : e.specularMap),
                          (t.specular = e.specular),
                          (t.glossinessMap =
                            void 0 === e.glossinessMap
                              ? null
                              : e.glossinessMap),
                          (t.glossiness = e.glossiness),
                          (t.alphaMap = null),
                          (t.envMap = void 0 === e.envMap ? null : e.envMap),
                          (t.envMapIntensity = 1),
                          (t.refractionRatio = 0.98),
                          t
                        );
                      },
                    },
                  ]),
                  e
                );
              })(),
              k = function e() {
                f(this, e), (this.name = o.KHR_MESH_QUANTIZATION);
              },
              P = (function (e) {
                function t(e, n, i, r) {
                  return f(this, t), c(this, h(t).call(this, e, n, i, r));
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "copySampleValue_",
                      value: function (e) {
                        for (
                          var t = this.resultBuffer,
                            n = this.sampleValues,
                            i = this.valueSize,
                            r = e * i * 3 + i,
                            a = 0;
                          a !== i;
                          a++
                        )
                          t[a] = n[r + a];
                        return t;
                      },
                    },
                  ]),
                  t
                );
              })(i.Interpolant);
            (P.prototype.beforeStart_ = P.prototype.copySampleValue_),
              (P.prototype.afterEnd_ = P.prototype.copySampleValue_),
              (P.prototype.interpolate_ = function (e, t, n, i) {
                for (
                  var r = this.resultBuffer,
                    a = this.sampleValues,
                    o = this.valueSize,
                    s = 2 * o,
                    l = 3 * o,
                    u = i - t,
                    c = (n - t) / u,
                    h = c * c,
                    d = h * c,
                    p = e * l,
                    f = p - l,
                    m = -2 * d + 3 * h,
                    v = d - h,
                    g = 1 - m,
                    y = v - h + c,
                    x = 0;
                  x !== o;
                  x++
                ) {
                  var b = a[f + x + o],
                    _ = a[f + x + s] * u,
                    w = a[p + x + o],
                    S = a[p + x] * u;
                  r[x] = g * b + y * _ + m * w + v * S;
                }
                return r;
              });
            var L = 0,
              R = 1,
              I = 2,
              F = 3,
              N = 4,
              O = 5,
              B = 6,
              D = {
                5120: Int8Array,
                5121: Uint8Array,
                5122: Int16Array,
                5123: Uint16Array,
                5125: Uint32Array,
                5126: Float32Array,
              },
              V = {
                9728: i.NearestFilter,
                9729: i.LinearFilter,
                9984: i.NearestMipmapNearestFilter,
                9985: i.LinearMipmapNearestFilter,
                9986: i.NearestMipmapLinearFilter,
                9987: i.LinearMipmapLinearFilter,
              },
              U = {
                33071: i.ClampToEdgeWrapping,
                33648: i.MirroredRepeatWrapping,
                10497: i.RepeatWrapping,
              },
              z = {
                SCALAR: 1,
                VEC2: 2,
                VEC3: 3,
                VEC4: 4,
                MAT2: 4,
                MAT3: 9,
                MAT4: 16,
              },
              j = {
                POSITION: "position",
                NORMAL: "normal",
                TANGENT: "tangent",
                TEXCOORD_0: "uv",
                TEXCOORD_1: "uv2",
                COLOR_0: "color",
                WEIGHTS_0: "skinWeight",
                JOINTS_0: "skinIndex",
              },
              G = {
                scale: "scale",
                translation: "position",
                rotation: "quaternion",
                weights: "morphTargetInfluences",
              },
              H = {
                CUBICSPLINE: void 0,
                LINEAR: i.InterpolateLinear,
                STEP: i.InterpolateDiscrete,
              },
              W = "OPAQUE",
              Y = "MASK",
              q = "BLEND";
            function X(e, t) {
              return "string" !== typeof e || "" === e
                ? ""
                : (/^https?:\/\//i.test(t) &&
                    /^\//.test(e) &&
                    (t = t.replace(/(^https?:\/\/[^\/]+).*/i, "$1")),
                  /^(https?:)?\/\//i.test(e) ||
                  /^data:.*,.*$/i.test(e) ||
                  /^blob:.*$/i.test(e)
                    ? e
                    : t + e);
            }
            function Q(e, t, n) {
              for (var i in n.extensions)
                void 0 === e[i] &&
                  ((t.userData.gltfExtensions =
                    t.userData.gltfExtensions || {}),
                  (t.userData.gltfExtensions[i] = n.extensions[i]));
            }
            function Z(e, t) {
              void 0 !== t.extras &&
                ("object" === typeof t.extras
                  ? Object.assign(e.userData, t.extras)
                  : console.warn(
                      "THREE.GLTFLoader: Ignoring primitive type .extras, " +
                        t.extras
                    ));
            }
            function J(e, t) {
              if ((e.updateMorphTargets(), void 0 !== t.weights))
                for (var n = 0, i = t.weights.length; n < i; n++)
                  e.morphTargetInfluences[n] = t.weights[n];
              if (t.extras && Array.isArray(t.extras.targetNames)) {
                var r = t.extras.targetNames;
                if (e.morphTargetInfluences.length === r.length) {
                  e.morphTargetDictionary = {};
                  for (var a = 0, o = r.length; a < o; a++)
                    e.morphTargetDictionary[r[a]] = a;
                } else
                  console.warn(
                    "THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names."
                  );
              }
            }
            function K(e) {
              var t =
                e.extensions && e.extensions[o.KHR_DRACO_MESH_COMPRESSION];
              return t
                ? "draco:" +
                    t.bufferView +
                    ":" +
                    t.indices +
                    ":" +
                    $(t.attributes)
                : e.indices + ":" + $(e.attributes) + ":" + e.mode;
            }
            function $(e) {
              for (
                var t = "", n = Object.keys(e).sort(), i = 0, r = n.length;
                i < r;
                i++
              )
                t += n[i] + ":" + e[n[i]] + ";";
              return t;
            }
            function ee(e) {
              switch (e) {
                case Int8Array:
                  return 1 / 127;
                case Uint8Array:
                  return 1 / 255;
                case Int16Array:
                  return 1 / 32767;
                case Uint16Array:
                  return 1 / 65535;
                default:
                  throw new Error(
                    "THREE.GLTFLoader: Unsupported normalized accessor component type."
                  );
              }
            }
            var te = (function () {
              function e() {
                var t =
                    arguments.length > 0 && void 0 !== arguments[0]
                      ? arguments[0]
                      : {},
                  n =
                    arguments.length > 1 && void 0 !== arguments[1]
                      ? arguments[1]
                      : {};
                f(this, e),
                  (this.json = t),
                  (this.extensions = {}),
                  (this.plugins = {}),
                  (this.options = n),
                  (this.cache = new a()),
                  (this.associations = new Map()),
                  (this.primitiveCache = {}),
                  (this.meshCache = { refs: {}, uses: {} }),
                  (this.cameraCache = { refs: {}, uses: {} }),
                  (this.lightCache = { refs: {}, uses: {} }),
                  (this.textureCache = {}),
                  (this.nodeNamesUsed = {}),
                  "undefined" !== typeof createImageBitmap &&
                  !1 === /Firefox/.test(navigator.userAgent)
                    ? (this.textureLoader = new i.ImageBitmapLoader(
                        this.options.manager
                      ))
                    : (this.textureLoader = new i.TextureLoader(
                        this.options.manager
                      )),
                  this.textureLoader.setCrossOrigin(this.options.crossOrigin),
                  this.textureLoader.setRequestHeader(
                    this.options.requestHeader
                  ),
                  (this.fileLoader = new i.FileLoader(this.options.manager)),
                  this.fileLoader.setResponseType("arraybuffer"),
                  "use-credentials" === this.options.crossOrigin &&
                    this.fileLoader.setWithCredentials(!0);
              }
              return (
                m(e, [
                  {
                    key: "setExtensions",
                    value: function (e) {
                      this.extensions = e;
                    },
                  },
                  {
                    key: "setPlugins",
                    value: function (e) {
                      this.plugins = e;
                    },
                  },
                  {
                    key: "parse",
                    value: function (e, t) {
                      var n = this,
                        i = this.json,
                        r = this.extensions;
                      this.cache.removeAll(),
                        this._invokeAll(function (e) {
                          return e._markDefs && e._markDefs();
                        }),
                        Promise.all(
                          this._invokeAll(function (e) {
                            return e.beforeRoot && e.beforeRoot();
                          })
                        )
                          .then(function () {
                            return Promise.all([
                              n.getDependencies("scene"),
                              n.getDependencies("animation"),
                              n.getDependencies("camera"),
                            ]);
                          })
                          .then(function (t) {
                            var a = {
                              scene: t[0][i.scene || 0],
                              scenes: t[0],
                              animations: t[1],
                              cameras: t[2],
                              asset: i.asset,
                              parser: n,
                              userData: {},
                            };
                            Q(r, a, i),
                              Z(a, i),
                              Promise.all(
                                n._invokeAll(function (e) {
                                  return e.afterRoot && e.afterRoot(a);
                                })
                              ).then(function () {
                                e(a);
                              });
                          })
                          .catch(t);
                    },
                  },
                  {
                    key: "_markDefs",
                    value: function () {
                      for (
                        var e = this.json.nodes || [],
                          t = this.json.skins || [],
                          n = this.json.meshes || [],
                          i = 0,
                          r = t.length;
                        i < r;
                        i++
                      )
                        for (
                          var a = t[i].joints, o = 0, s = a.length;
                          o < s;
                          o++
                        )
                          e[a[o]].isBone = !0;
                      for (var l = 0, u = e.length; l < u; l++) {
                        var c = e[l];
                        void 0 !== c.mesh &&
                          (this._addNodeRef(this.meshCache, c.mesh),
                          void 0 !== c.skin && (n[c.mesh].isSkinnedMesh = !0)),
                          void 0 !== c.camera &&
                            this._addNodeRef(this.cameraCache, c.camera);
                      }
                    },
                  },
                  {
                    key: "_addNodeRef",
                    value: function (e, t) {
                      void 0 !== t &&
                        (void 0 === e.refs[t] && (e.refs[t] = e.uses[t] = 0),
                        e.refs[t]++);
                    },
                  },
                  {
                    key: "_getNodeRef",
                    value: function (e, t, n) {
                      if (e.refs[t] <= 1) return n;
                      var i = n.clone();
                      return (i.name += "_instance_" + e.uses[t]++), i;
                    },
                  },
                  {
                    key: "_invokeOne",
                    value: function (e) {
                      var t = Object.values(this.plugins);
                      t.push(this);
                      for (var n = 0; n < t.length; n++) {
                        var i = e(t[n]);
                        if (i) return i;
                      }
                      return null;
                    },
                  },
                  {
                    key: "_invokeAll",
                    value: function (e) {
                      var t = Object.values(this.plugins);
                      t.unshift(this);
                      for (var n = [], i = 0; i < t.length; i++) {
                        var r = e(t[i]);
                        r && n.push(r);
                      }
                      return n;
                    },
                  },
                  {
                    key: "getDependency",
                    value: function (e, t) {
                      var n = e + ":" + t,
                        i = this.cache.get(n);
                      if (!i) {
                        switch (e) {
                          case "scene":
                            i = this.loadScene(t);
                            break;
                          case "node":
                            i = this.loadNode(t);
                            break;
                          case "mesh":
                            i = this._invokeOne(function (e) {
                              return e.loadMesh && e.loadMesh(t);
                            });
                            break;
                          case "accessor":
                            i = this.loadAccessor(t);
                            break;
                          case "bufferView":
                            i = this._invokeOne(function (e) {
                              return e.loadBufferView && e.loadBufferView(t);
                            });
                            break;
                          case "buffer":
                            i = this.loadBuffer(t);
                            break;
                          case "material":
                            i = this._invokeOne(function (e) {
                              return e.loadMaterial && e.loadMaterial(t);
                            });
                            break;
                          case "texture":
                            i = this._invokeOne(function (e) {
                              return e.loadTexture && e.loadTexture(t);
                            });
                            break;
                          case "skin":
                            i = this.loadSkin(t);
                            break;
                          case "animation":
                            i = this.loadAnimation(t);
                            break;
                          case "camera":
                            i = this.loadCamera(t);
                            break;
                          default:
                            throw new Error("Unknown type: " + e);
                        }
                        this.cache.add(n, i);
                      }
                      return i;
                    },
                  },
                  {
                    key: "getDependencies",
                    value: function (e) {
                      var t = this.cache.get(e);
                      if (!t) {
                        var n = this,
                          i = this.json[e + ("mesh" === e ? "es" : "s")] || [];
                        (t = Promise.all(
                          i.map(function (t, i) {
                            return n.getDependency(e, i);
                          })
                        )),
                          this.cache.add(e, t);
                      }
                      return t;
                    },
                  },
                  {
                    key: "loadBuffer",
                    value: function (e) {
                      var t = this.json.buffers[e],
                        n = this.fileLoader;
                      if (t.type && "arraybuffer" !== t.type)
                        throw new Error(
                          "THREE.GLTFLoader: " +
                            t.type +
                            " buffer type is not supported."
                        );
                      if (void 0 === t.uri && 0 === e)
                        return Promise.resolve(
                          this.extensions[o.KHR_BINARY_GLTF].body
                        );
                      var i = this.options;
                      return new Promise(function (e, r) {
                        n.load(X(t.uri, i.path), e, void 0, function () {
                          r(
                            new Error(
                              'THREE.GLTFLoader: Failed to load buffer "' +
                                t.uri +
                                '".'
                            )
                          );
                        });
                      });
                    },
                  },
                  {
                    key: "loadBufferView",
                    value: function (e) {
                      var t = this.json.bufferViews[e];
                      return this.getDependency("buffer", t.buffer).then(
                        function (e) {
                          var n = t.byteLength || 0,
                            i = t.byteOffset || 0;
                          return e.slice(i, i + n);
                        }
                      );
                    },
                  },
                  {
                    key: "loadAccessor",
                    value: function (e) {
                      var t = this,
                        n = this.json,
                        r = this.json.accessors[e];
                      if (void 0 === r.bufferView && void 0 === r.sparse)
                        return Promise.resolve(null);
                      var a = [];
                      return (
                        void 0 !== r.bufferView
                          ? a.push(
                              this.getDependency("bufferView", r.bufferView)
                            )
                          : a.push(null),
                        void 0 !== r.sparse &&
                          (a.push(
                            this.getDependency(
                              "bufferView",
                              r.sparse.indices.bufferView
                            )
                          ),
                          a.push(
                            this.getDependency(
                              "bufferView",
                              r.sparse.values.bufferView
                            )
                          )),
                        Promise.all(a).then(function (e) {
                          var a,
                            o,
                            s = e[0],
                            l = z[r.type],
                            u = D[r.componentType],
                            c = u.BYTES_PER_ELEMENT,
                            h = c * l,
                            d = r.byteOffset || 0,
                            p =
                              void 0 !== r.bufferView
                                ? n.bufferViews[r.bufferView].byteStride
                                : void 0,
                            f = !0 === r.normalized;
                          if (p && p !== h) {
                            var m = Math.floor(d / p),
                              v =
                                "InterleavedBuffer:" +
                                r.bufferView +
                                ":" +
                                r.componentType +
                                ":" +
                                m +
                                ":" +
                                r.count,
                              g = t.cache.get(v);
                            g ||
                              ((a = new u(s, m * p, (r.count * p) / c)),
                              (g = new i.InterleavedBuffer(a, p / c)),
                              t.cache.add(v, g)),
                              (o = new i.InterleavedBufferAttribute(
                                g,
                                l,
                                (d % p) / c,
                                f
                              ));
                          } else (a = null === s ? new u(r.count * l) : new u(s, d, r.count * l)), (o = new i.BufferAttribute(a, l, f));
                          if (void 0 !== r.sparse) {
                            var y = z.SCALAR,
                              x = D[r.sparse.indices.componentType],
                              b = r.sparse.indices.byteOffset || 0,
                              _ = r.sparse.values.byteOffset || 0,
                              w = new x(e[1], b, r.sparse.count * y),
                              S = new u(e[2], _, r.sparse.count * l);
                            null !== s &&
                              (o = new i.BufferAttribute(
                                o.array.slice(),
                                o.itemSize,
                                o.normalized
                              ));
                            for (var E = 0, M = w.length; E < M; E++) {
                              var A = w[E];
                              if (
                                (o.setX(A, S[E * l]),
                                l >= 2 && o.setY(A, S[E * l + 1]),
                                l >= 3 && o.setZ(A, S[E * l + 2]),
                                l >= 4 && o.setW(A, S[E * l + 3]),
                                l >= 5)
                              )
                                throw new Error(
                                  "THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute."
                                );
                            }
                          }
                          return o;
                        })
                      );
                    },
                  },
                  {
                    key: "loadTexture",
                    value: function (e) {
                      var t = this.json,
                        n = this.options,
                        i = t.textures[e],
                        r = t.images[i.source],
                        a = this.textureLoader;
                      if (r.uri) {
                        var o = n.manager.getHandler(r.uri);
                        null !== o && (a = o);
                      }
                      return this.loadTextureImage(e, r, a);
                    },
                  },
                  {
                    key: "loadTextureImage",
                    value: function (e, t, n) {
                      var r = this,
                        a = this.json,
                        o = this.options,
                        s = a.textures[e],
                        l = (t.uri || t.bufferView) + ":" + s.sampler;
                      if (this.textureCache[l]) return this.textureCache[l];
                      var u = self.URL || self.webkitURL,
                        c = t.uri || "",
                        h = !1,
                        d = !0,
                        p =
                          c.search(/\.jpe?g($|\?)/i) > 0 ||
                          0 === c.search(/^data\:image\/jpeg/);
                      if (
                        (("image/jpeg" === t.mimeType || p) && (d = !1),
                        void 0 !== t.bufferView)
                      )
                        c = r
                          .getDependency("bufferView", t.bufferView)
                          .then(function (e) {
                            if ("image/png" === t.mimeType) {
                              var n = new DataView(e, 25, 1).getUint8(0, !1);
                              d = 6 === n || 4 === n || 3 === n;
                            }
                            h = !0;
                            var i = new Blob([e], { type: t.mimeType });
                            return (c = u.createObjectURL(i));
                          });
                      else if (void 0 === t.uri)
                        throw new Error(
                          "THREE.GLTFLoader: Image " +
                            e +
                            " is missing URI and bufferView"
                        );
                      var f = Promise.resolve(c)
                        .then(function (e) {
                          return new Promise(function (t, r) {
                            var a = t;
                            !0 === n.isImageBitmapLoader &&
                              (a = function (e) {
                                t(new i.CanvasTexture(e));
                              }),
                              n.load(X(e, o.path), a, void 0, r);
                          });
                        })
                        .then(function (t) {
                          !0 === h && u.revokeObjectURL(c),
                            (t.flipY = !1),
                            s.name && (t.name = s.name),
                            d || (t.format = i.RGBFormat);
                          var n = (a.samplers || {})[s.sampler] || {};
                          return (
                            (t.magFilter = V[n.magFilter] || i.LinearFilter),
                            (t.minFilter =
                              V[n.minFilter] || i.LinearMipmapLinearFilter),
                            (t.wrapS = U[n.wrapS] || i.RepeatWrapping),
                            (t.wrapT = U[n.wrapT] || i.RepeatWrapping),
                            r.associations.set(t, {
                              type: "textures",
                              index: e,
                            }),
                            t
                          );
                        });
                      return (this.textureCache[l] = f), f;
                    },
                  },
                  {
                    key: "assignTexture",
                    value: function (e, t, n) {
                      var i = this;
                      return this.getDependency("texture", n.index).then(
                        function (r) {
                          if (
                            (void 0 === n.texCoord ||
                              0 == n.texCoord ||
                              ("aoMap" === t && 1 == n.texCoord) ||
                              console.warn(
                                "THREE.GLTFLoader: Custom UV set " +
                                  n.texCoord +
                                  " for texture " +
                                  t +
                                  " not yet supported."
                              ),
                            i.extensions[o.KHR_TEXTURE_TRANSFORM])
                          ) {
                            var a =
                              void 0 !== n.extensions
                                ? n.extensions[o.KHR_TEXTURE_TRANSFORM]
                                : void 0;
                            if (a) {
                              var s = i.associations.get(r);
                              (r = i.extensions[
                                o.KHR_TEXTURE_TRANSFORM
                              ].extendTexture(r, a)),
                                i.associations.set(r, s);
                            }
                          }
                          e[t] = r;
                        }
                      );
                    },
                  },
                  {
                    key: "assignFinalMaterial",
                    value: function (e) {
                      var t = e.geometry,
                        n = e.material,
                        r = void 0 !== t.attributes.tangent,
                        a = void 0 !== t.attributes.color,
                        o = void 0 === t.attributes.normal,
                        s = Object.keys(t.morphAttributes).length > 0,
                        l = s && void 0 !== t.morphAttributes.normal;
                      if (e.isPoints) {
                        var u = "PointsMaterial:" + n.uuid,
                          c = this.cache.get(u);
                        c ||
                          ((c = new i.PointsMaterial()),
                          i.Material.prototype.copy.call(c, n),
                          c.color.copy(n.color),
                          (c.map = n.map),
                          (c.sizeAttenuation = !1),
                          this.cache.add(u, c)),
                          (n = c);
                      } else if (e.isLine) {
                        var h = "LineBasicMaterial:" + n.uuid,
                          d = this.cache.get(h);
                        d ||
                          ((d = new i.LineBasicMaterial()),
                          i.Material.prototype.copy.call(d, n),
                          d.color.copy(n.color),
                          this.cache.add(h, d)),
                          (n = d);
                      }
                      if (r || a || o || s) {
                        var p = "ClonedMaterial:" + n.uuid + ":";
                        n.isGLTFSpecularGlossinessMaterial &&
                          (p += "specular-glossiness:"),
                          r && (p += "vertex-tangents:"),
                          a && (p += "vertex-colors:"),
                          o && (p += "flat-shading:"),
                          s && (p += "morph-targets:"),
                          l && (p += "morph-normals:");
                        var f = this.cache.get(p);
                        f ||
                          ((f = n.clone()),
                          a && (f.vertexColors = !0),
                          o && (f.flatShading = !0),
                          s && (f.morphTargets = !0),
                          l && (f.morphNormals = !0),
                          r &&
                            ((f.vertexTangents = !0),
                            f.normalScale && (f.normalScale.y *= -1),
                            f.clearcoatNormalScale &&
                              (f.clearcoatNormalScale.y *= -1)),
                          this.cache.add(p, f),
                          this.associations.set(f, this.associations.get(n))),
                          (n = f);
                      }
                      n.aoMap &&
                        void 0 === t.attributes.uv2 &&
                        void 0 !== t.attributes.uv &&
                        t.setAttribute("uv2", t.attributes.uv),
                        (e.material = n);
                    },
                  },
                  {
                    key: "getMaterialType",
                    value: function () {
                      return i.MeshStandardMaterial;
                    },
                  },
                  {
                    key: "loadMaterial",
                    value: function (e) {
                      var t,
                        n = this,
                        r = this.json,
                        a = this.extensions,
                        s = r.materials[e],
                        l = {},
                        u = s.extensions || {},
                        c = [];
                      if (u[o.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]) {
                        var h = a[o.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];
                        (t = h.getMaterialType()),
                          c.push(h.extendParams(l, s, n));
                      } else if (u[o.KHR_MATERIALS_UNLIT]) {
                        var d = a[o.KHR_MATERIALS_UNLIT];
                        (t = d.getMaterialType()),
                          c.push(d.extendParams(l, s, n));
                      } else {
                        var p = s.pbrMetallicRoughness || {};
                        if (
                          ((l.color = new i.Color(1, 1, 1)),
                          (l.opacity = 1),
                          Array.isArray(p.baseColorFactor))
                        ) {
                          var f = p.baseColorFactor;
                          l.color.fromArray(f), (l.opacity = f[3]);
                        }
                        void 0 !== p.baseColorTexture &&
                          c.push(n.assignTexture(l, "map", p.baseColorTexture)),
                          (l.metalness =
                            void 0 !== p.metallicFactor ? p.metallicFactor : 1),
                          (l.roughness =
                            void 0 !== p.roughnessFactor
                              ? p.roughnessFactor
                              : 1),
                          void 0 !== p.metallicRoughnessTexture &&
                            (c.push(
                              n.assignTexture(
                                l,
                                "metalnessMap",
                                p.metallicRoughnessTexture
                              )
                            ),
                            c.push(
                              n.assignTexture(
                                l,
                                "roughnessMap",
                                p.metallicRoughnessTexture
                              )
                            )),
                          (t = this._invokeOne(function (t) {
                            return t.getMaterialType && t.getMaterialType(e);
                          })),
                          c.push(
                            Promise.all(
                              this._invokeAll(function (t) {
                                return (
                                  t.extendMaterialParams &&
                                  t.extendMaterialParams(e, l)
                                );
                              })
                            )
                          );
                      }
                      !0 === s.doubleSided && (l.side = i.DoubleSide);
                      var m = s.alphaMode || W;
                      return (
                        m === q
                          ? ((l.transparent = !0), (l.depthWrite = !1))
                          : ((l.transparent = !1),
                            m === Y &&
                              (l.alphaTest =
                                void 0 !== s.alphaCutoff
                                  ? s.alphaCutoff
                                  : 0.5)),
                        void 0 !== s.normalTexture &&
                          t !== i.MeshBasicMaterial &&
                          (c.push(
                            n.assignTexture(l, "normalMap", s.normalTexture)
                          ),
                          (l.normalScale = new i.Vector2(1, -1)),
                          void 0 !== s.normalTexture.scale &&
                            l.normalScale.set(
                              s.normalTexture.scale,
                              -s.normalTexture.scale
                            )),
                        void 0 !== s.occlusionTexture &&
                          t !== i.MeshBasicMaterial &&
                          (c.push(
                            n.assignTexture(l, "aoMap", s.occlusionTexture)
                          ),
                          void 0 !== s.occlusionTexture.strength &&
                            (l.aoMapIntensity = s.occlusionTexture.strength)),
                        void 0 !== s.emissiveFactor &&
                          t !== i.MeshBasicMaterial &&
                          (l.emissive = new i.Color().fromArray(
                            s.emissiveFactor
                          )),
                        void 0 !== s.emissiveTexture &&
                          t !== i.MeshBasicMaterial &&
                          c.push(
                            n.assignTexture(l, "emissiveMap", s.emissiveTexture)
                          ),
                        Promise.all(c).then(function () {
                          var r;
                          return (
                            (r =
                              t === T
                                ? a[
                                    o.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS
                                  ].createMaterial(l)
                                : new t(l)),
                            s.name && (r.name = s.name),
                            r.map && (r.map.encoding = i.sRGBEncoding),
                            r.emissiveMap &&
                              (r.emissiveMap.encoding = i.sRGBEncoding),
                            Z(r, s),
                            n.associations.set(r, {
                              type: "materials",
                              index: e,
                            }),
                            s.extensions && Q(a, r, s),
                            r
                          );
                        })
                      );
                    },
                  },
                  {
                    key: "createUniqueName",
                    value: function (e) {
                      for (
                        var t = i.PropertyBinding.sanitizeNodeName(e || ""),
                          n = t,
                          r = 1;
                        this.nodeNamesUsed[n];
                        ++r
                      )
                        n = t + "_" + r;
                      return (this.nodeNamesUsed[n] = !0), n;
                    },
                  },
                  {
                    key: "loadGeometries",
                    value: function (e) {
                      var t = this,
                        n = this.extensions,
                        r = this.primitiveCache;
                      function a(e) {
                        return n[o.KHR_DRACO_MESH_COMPRESSION]
                          .decodePrimitive(e, t)
                          .then(function (n) {
                            return ie(n, e, t);
                          });
                      }
                      for (var s = [], l = 0, u = e.length; l < u; l++) {
                        var c = e[l],
                          h = K(c),
                          d = r[h];
                        if (d) s.push(d.promise);
                        else {
                          var p = void 0;
                          (p =
                            c.extensions &&
                            c.extensions[o.KHR_DRACO_MESH_COMPRESSION]
                              ? a(c)
                              : ie(new i.BufferGeometry(), c, t)),
                            (r[h] = { primitive: c, promise: p }),
                            s.push(p);
                        }
                      }
                      return Promise.all(s);
                    },
                  },
                  {
                    key: "loadMesh",
                    value: function (e) {
                      for (
                        var t,
                          n = this,
                          r = this.json,
                          a = this.extensions,
                          o = r.meshes[e],
                          s = o.primitives,
                          l = [],
                          u = 0,
                          c = s.length;
                        u < c;
                        u++
                      ) {
                        var h =
                          void 0 === s[u].material
                            ? (void 0 === (t = this.cache).DefaultMaterial &&
                                (t.DefaultMaterial = new i.MeshStandardMaterial(
                                  {
                                    color: 16777215,
                                    emissive: 0,
                                    metalness: 1,
                                    roughness: 1,
                                    transparent: !1,
                                    depthTest: !0,
                                    side: i.FrontSide,
                                  }
                                )),
                              t.DefaultMaterial)
                            : this.getDependency("material", s[u].material);
                        l.push(h);
                      }
                      return (
                        l.push(n.loadGeometries(s)),
                        Promise.all(l).then(function (t) {
                          for (
                            var r = t.slice(0, t.length - 1),
                              l = t[t.length - 1],
                              u = [],
                              c = 0,
                              h = l.length;
                            c < h;
                            c++
                          ) {
                            var d = l[c],
                              p = s[c],
                              f = void 0,
                              m = r[c];
                            if (
                              p.mode === N ||
                              p.mode === O ||
                              p.mode === B ||
                              void 0 === p.mode
                            )
                              !0 !==
                                (f =
                                  !0 === o.isSkinnedMesh
                                    ? new i.SkinnedMesh(d, m)
                                    : new i.Mesh(d, m)).isSkinnedMesh ||
                                f.geometry.attributes.skinWeight.normalized ||
                                f.normalizeSkinWeights(),
                                p.mode === O
                                  ? (f.geometry = re(
                                      f.geometry,
                                      i.TriangleStripDrawMode
                                    ))
                                  : p.mode === B &&
                                    (f.geometry = re(
                                      f.geometry,
                                      i.TriangleFanDrawMode
                                    ));
                            else if (p.mode === R) f = new i.LineSegments(d, m);
                            else if (p.mode === F) f = new i.Line(d, m);
                            else if (p.mode === I) f = new i.LineLoop(d, m);
                            else {
                              if (p.mode !== L)
                                throw new Error(
                                  "THREE.GLTFLoader: Primitive mode unsupported: " +
                                    p.mode
                                );
                              f = new i.Points(d, m);
                            }
                            Object.keys(f.geometry.morphAttributes).length >
                              0 && J(f, o),
                              (f.name = n.createUniqueName(
                                o.name || "mesh_" + e
                              )),
                              Z(f, o),
                              p.extensions && Q(a, f, p),
                              n.assignFinalMaterial(f),
                              u.push(f);
                          }
                          if (1 === u.length) return u[0];
                          for (
                            var v = new i.Group(), g = 0, y = u.length;
                            g < y;
                            g++
                          )
                            v.add(u[g]);
                          return v;
                        })
                      );
                    },
                  },
                  {
                    key: "loadCamera",
                    value: function (e) {
                      var t,
                        n = this.json.cameras[e],
                        r = n[n.type];
                      if (r)
                        return (
                          "perspective" === n.type
                            ? (t = new i.PerspectiveCamera(
                                i.MathUtils.radToDeg(r.yfov),
                                r.aspectRatio || 1,
                                r.znear || 1,
                                r.zfar || 2e6
                              ))
                            : "orthographic" === n.type &&
                              (t = new i.OrthographicCamera(
                                -r.xmag,
                                r.xmag,
                                r.ymag,
                                -r.ymag,
                                r.znear,
                                r.zfar
                              )),
                          n.name && (t.name = this.createUniqueName(n.name)),
                          Z(t, n),
                          Promise.resolve(t)
                        );
                      console.warn(
                        "THREE.GLTFLoader: Missing camera parameters."
                      );
                    },
                  },
                  {
                    key: "loadSkin",
                    value: function (e) {
                      var t = this.json.skins[e],
                        n = { joints: t.joints };
                      return void 0 === t.inverseBindMatrices
                        ? Promise.resolve(n)
                        : this.getDependency(
                            "accessor",
                            t.inverseBindMatrices
                          ).then(function (e) {
                            return (n.inverseBindMatrices = e), n;
                          });
                    },
                  },
                  {
                    key: "loadAnimation",
                    value: function (e) {
                      for (
                        var t = this.json.animations[e],
                          n = [],
                          r = [],
                          a = [],
                          o = [],
                          s = [],
                          l = 0,
                          u = t.channels.length;
                        l < u;
                        l++
                      ) {
                        var c = t.channels[l],
                          h = t.samplers[c.sampler],
                          d = c.target,
                          p = void 0 !== d.node ? d.node : d.id,
                          f =
                            void 0 !== t.parameters
                              ? t.parameters[h.input]
                              : h.input,
                          m =
                            void 0 !== t.parameters
                              ? t.parameters[h.output]
                              : h.output;
                        n.push(this.getDependency("node", p)),
                          r.push(this.getDependency("accessor", f)),
                          a.push(this.getDependency("accessor", m)),
                          o.push(h),
                          s.push(d);
                      }
                      return Promise.all([
                        Promise.all(n),
                        Promise.all(r),
                        Promise.all(a),
                        Promise.all(o),
                        Promise.all(s),
                      ]).then(function (n) {
                        for (
                          var r = n[0],
                            a = n[1],
                            o = n[2],
                            s = n[3],
                            l = n[4],
                            u = [],
                            c = function (e, t) {
                              var n = r[e],
                                c = a[e],
                                h = o[e],
                                d = s[e],
                                p = l[e];
                              if (void 0 === n) return "continue";
                              n.updateMatrix(), (n.matrixAutoUpdate = !0);
                              var f = void 0;
                              switch (G[p.path]) {
                                case G.weights:
                                  f = i.NumberKeyframeTrack;
                                  break;
                                case G.rotation:
                                  f = i.QuaternionKeyframeTrack;
                                  break;
                                case G.position:
                                case G.scale:
                                default:
                                  f = i.VectorKeyframeTrack;
                              }
                              var m = n.name ? n.name : n.uuid,
                                v =
                                  void 0 !== d.interpolation
                                    ? H[d.interpolation]
                                    : i.InterpolateLinear,
                                g = [];
                              G[p.path] === G.weights
                                ? n.traverse(function (e) {
                                    !0 === e.isMesh &&
                                      e.morphTargetInfluences &&
                                      g.push(e.name ? e.name : e.uuid);
                                  })
                                : g.push(m);
                              var y = h.array;
                              if (h.normalized) {
                                for (
                                  var x = ee(y.constructor),
                                    b = new Float32Array(y.length),
                                    _ = 0,
                                    w = y.length;
                                  _ < w;
                                  _++
                                )
                                  b[_] = y[_] * x;
                                y = b;
                              }
                              for (var S = 0, E = g.length; S < E; S++) {
                                var M = new f(
                                  g[S] + "." + G[p.path],
                                  c.array,
                                  y,
                                  v
                                );
                                "CUBICSPLINE" === d.interpolation &&
                                  ((M.createInterpolant = function (e) {
                                    return new P(
                                      this.times,
                                      this.values,
                                      this.getValueSize() / 3,
                                      e
                                    );
                                  }),
                                  (M.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline =
                                    !0)),
                                  u.push(M);
                              }
                            },
                            h = 0,
                            d = r.length;
                          h < d;
                          h++
                        )
                          c(h);
                        var p = t.name ? t.name : "animation_" + e;
                        return new i.AnimationClip(p, void 0, u);
                      });
                    },
                  },
                  {
                    key: "createNodeMesh",
                    value: function (e) {
                      var t = this.json,
                        n = this,
                        i = t.nodes[e];
                      return void 0 === i.mesh
                        ? null
                        : n.getDependency("mesh", i.mesh).then(function (e) {
                            var t = n._getNodeRef(n.meshCache, i.mesh, e);
                            return (
                              void 0 !== i.weights &&
                                t.traverse(function (e) {
                                  if (e.isMesh)
                                    for (
                                      var t = 0, n = i.weights.length;
                                      t < n;
                                      t++
                                    )
                                      e.morphTargetInfluences[t] = i.weights[t];
                                }),
                              t
                            );
                          });
                    },
                  },
                  {
                    key: "loadNode",
                    value: function (e) {
                      var t = this.json,
                        n = this.extensions,
                        r = this,
                        a = t.nodes[e],
                        o = a.name ? r.createUniqueName(a.name) : "";
                      return (function () {
                        var t = [],
                          n = r._invokeOne(function (t) {
                            return t.createNodeMesh && t.createNodeMesh(e);
                          });
                        return (
                          n && t.push(n),
                          void 0 !== a.camera &&
                            t.push(
                              r
                                .getDependency("camera", a.camera)
                                .then(function (e) {
                                  return r._getNodeRef(
                                    r.cameraCache,
                                    a.camera,
                                    e
                                  );
                                })
                            ),
                          r
                            ._invokeAll(function (t) {
                              return (
                                t.createNodeAttachment &&
                                t.createNodeAttachment(e)
                              );
                            })
                            .forEach(function (e) {
                              t.push(e);
                            }),
                          Promise.all(t)
                        );
                      })().then(function (t) {
                        var s;
                        if (
                          (s =
                            !0 === a.isBone
                              ? new i.Bone()
                              : t.length > 1
                              ? new i.Group()
                              : 1 === t.length
                              ? t[0]
                              : new i.Object3D()) !== t[0]
                        )
                          for (var l = 0, u = t.length; l < u; l++) s.add(t[l]);
                        if (
                          (a.name && ((s.userData.name = a.name), (s.name = o)),
                          Z(s, a),
                          a.extensions && Q(n, s, a),
                          void 0 !== a.matrix)
                        ) {
                          var c = new i.Matrix4();
                          c.fromArray(a.matrix), s.applyMatrix4(c);
                        } else void 0 !== a.translation && s.position.fromArray(a.translation), void 0 !== a.rotation && s.quaternion.fromArray(a.rotation), void 0 !== a.scale && s.scale.fromArray(a.scale);
                        return (
                          r.associations.set(s, { type: "nodes", index: e }), s
                        );
                      });
                    },
                  },
                  {
                    key: "loadScene",
                    value: function (e) {
                      var t = this.json,
                        n = this.extensions,
                        r = this.json.scenes[e],
                        a = new i.Group();
                      r.name && (a.name = this.createUniqueName(r.name)),
                        Z(a, r),
                        r.extensions && Q(n, a, r);
                      for (
                        var o = r.nodes || [], s = [], l = 0, u = o.length;
                        l < u;
                        l++
                      )
                        s.push(ne(o[l], a, t, this));
                      return Promise.all(s).then(function () {
                        return a;
                      });
                    },
                  },
                ]),
                e
              );
            })();
            function ne(e, t, n, r) {
              var a = n.nodes[e];
              return r
                .getDependency("node", e)
                .then(function (e) {
                  return void 0 === a.skin
                    ? e
                    : r
                        .getDependency("skin", a.skin)
                        .then(function (e) {
                          for (
                            var n = [], i = 0, a = (t = e).joints.length;
                            i < a;
                            i++
                          )
                            n.push(r.getDependency("node", t.joints[i]));
                          return Promise.all(n);
                        })
                        .then(function (n) {
                          return (
                            e.traverse(function (e) {
                              if (e.isMesh) {
                                for (
                                  var r = [], a = [], o = 0, s = n.length;
                                  o < s;
                                  o++
                                ) {
                                  var l = n[o];
                                  if (l) {
                                    r.push(l);
                                    var u = new i.Matrix4();
                                    void 0 !== t.inverseBindMatrices &&
                                      u.fromArray(
                                        t.inverseBindMatrices.array,
                                        16 * o
                                      ),
                                      a.push(u);
                                  } else
                                    console.warn(
                                      'THREE.GLTFLoader: Joint "%s" could not be found.',
                                      t.joints[o]
                                    );
                                }
                                e.bind(new i.Skeleton(r, a), e.matrixWorld);
                              }
                            }),
                            e
                          );
                        });
                  var t;
                })
                .then(function (e) {
                  t.add(e);
                  var i = [];
                  if (a.children)
                    for (var o = a.children, s = 0, l = o.length; s < l; s++) {
                      var u = o[s];
                      i.push(ne(u, e, n, r));
                    }
                  return Promise.all(i);
                });
            }
            function ie(e, t, n) {
              var r = t.attributes,
                a = [];
              function o(t, i) {
                return n.getDependency("accessor", t).then(function (t) {
                  e.setAttribute(i, t);
                });
              }
              for (var s in r) {
                var l = j[s] || s.toLowerCase();
                l in e.attributes || a.push(o(r[s], l));
              }
              if (void 0 !== t.indices && !e.index) {
                var u = n
                  .getDependency("accessor", t.indices)
                  .then(function (t) {
                    e.setIndex(t);
                  });
                a.push(u);
              }
              return (
                Z(e, t),
                (function (e, t, n) {
                  var r = t.attributes,
                    a = new i.Box3();
                  if (void 0 !== r.POSITION) {
                    var o = n.json.accessors[r.POSITION],
                      s = o.min,
                      l = o.max;
                    if (void 0 !== s && void 0 !== l) {
                      if (
                        (a.set(
                          new i.Vector3(s[0], s[1], s[2]),
                          new i.Vector3(l[0], l[1], l[2])
                        ),
                        o.normalized)
                      ) {
                        var u = ee(D[o.componentType]);
                        a.min.multiplyScalar(u), a.max.multiplyScalar(u);
                      }
                      var c = t.targets;
                      if (void 0 !== c) {
                        for (
                          var h = new i.Vector3(),
                            d = new i.Vector3(),
                            p = 0,
                            f = c.length;
                          p < f;
                          p++
                        ) {
                          var m = c[p];
                          if (void 0 !== m.POSITION) {
                            var v = n.json.accessors[m.POSITION],
                              g = v.min,
                              y = v.max;
                            if (void 0 !== g && void 0 !== y) {
                              if (
                                (d.setX(
                                  Math.max(Math.abs(g[0]), Math.abs(y[0]))
                                ),
                                d.setY(
                                  Math.max(Math.abs(g[1]), Math.abs(y[1]))
                                ),
                                d.setZ(
                                  Math.max(Math.abs(g[2]), Math.abs(y[2]))
                                ),
                                v.normalized)
                              ) {
                                var x = ee(D[v.componentType]);
                                d.multiplyScalar(x);
                              }
                              h.max(d);
                            } else
                              console.warn(
                                "THREE.GLTFLoader: Missing min/max properties for accessor POSITION."
                              );
                          }
                        }
                        a.expandByVector(h);
                      }
                      e.boundingBox = a;
                      var b = new i.Sphere();
                      a.getCenter(b.center),
                        (b.radius = a.min.distanceTo(a.max) / 2),
                        (e.boundingSphere = b);
                    } else
                      console.warn(
                        "THREE.GLTFLoader: Missing min/max properties for accessor POSITION."
                      );
                  }
                })(e, t, n),
                Promise.all(a).then(function () {
                  return void 0 !== t.targets
                    ? (function (e, t, n) {
                        for (
                          var i = !1, r = !1, a = 0, o = t.length;
                          a < o;
                          a++
                        ) {
                          var s = t[a];
                          if (
                            (void 0 !== s.POSITION && (i = !0),
                            void 0 !== s.NORMAL && (r = !0),
                            i && r)
                          )
                            break;
                        }
                        if (!i && !r) return Promise.resolve(e);
                        for (
                          var l = [], u = [], c = 0, h = t.length;
                          c < h;
                          c++
                        ) {
                          var d = t[c];
                          if (i) {
                            var p =
                              void 0 !== d.POSITION
                                ? n.getDependency("accessor", d.POSITION)
                                : e.attributes.position;
                            l.push(p);
                          }
                          if (r) {
                            var f =
                              void 0 !== d.NORMAL
                                ? n.getDependency("accessor", d.NORMAL)
                                : e.attributes.normal;
                            u.push(f);
                          }
                        }
                        return Promise.all([
                          Promise.all(l),
                          Promise.all(u),
                        ]).then(function (t) {
                          var n = t[0],
                            a = t[1];
                          return (
                            i && (e.morphAttributes.position = n),
                            r && (e.morphAttributes.normal = a),
                            (e.morphTargetsRelative = !0),
                            e
                          );
                        });
                      })(e, t.targets, n)
                    : e;
                })
              );
            }
            function re(e, t) {
              var n = e.getIndex();
              if (null === n) {
                var r = [],
                  a = e.getAttribute("position");
                if (void 0 === a)
                  return (
                    console.error(
                      "THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."
                    ),
                    e
                  );
                for (var o = 0; o < a.count; o++) r.push(o);
                e.setIndex(r), (n = e.getIndex());
              }
              var s = n.count - 2,
                l = [];
              if (t === i.TriangleFanDrawMode)
                for (var u = 1; u <= s; u++)
                  l.push(n.getX(0)), l.push(n.getX(u)), l.push(n.getX(u + 1));
              else
                for (var c = 0; c < s; c++)
                  c % 2 === 0
                    ? (l.push(n.getX(c)),
                      l.push(n.getX(c + 1)),
                      l.push(n.getX(c + 2)))
                    : (l.push(n.getX(c + 2)),
                      l.push(n.getX(c + 1)),
                      l.push(n.getX(c)));
              l.length / 3 !== s &&
                console.error(
                  "THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles."
                );
              var h = e.clone();
              return h.setIndex(l), h;
            }
          },
          "./node_modules/webpack/buildin/global.js": function (e, t) {
            var n;
            n = (function () {
              return this;
            })();
            try {
              n = n || new Function("return this")();
            } catch (i) {
              "object" === typeof window && (n = window);
            }
            e.exports = n;
          },
          "./node_modules/webpack/buildin/module.js": function (e, t) {
            e.exports = function (e) {
              return (
                e.webpackPolyfill ||
                  ((e.deprecate = function () {}),
                  (e.paths = []),
                  e.children || (e.children = []),
                  Object.defineProperty(e, "loaded", {
                    enumerable: !0,
                    get: function () {
                      return e.l;
                    },
                  }),
                  Object.defineProperty(e, "id", {
                    enumerable: !0,
                    get: function () {
                      return e.i;
                    },
                  }),
                  (e.webpackPolyfill = 1)),
                e
              );
            };
          },
          "./src/css/dat.gui.css": function (e, t, n) {
            var i = n(
              "./node_modules/css-loader/dist/cjs.js!./src/css/dat.gui.css"
            );
            "string" === typeof (i = i.__esModule ? i.default : i) &&
              (i = [[e.i, i, ""]]);
            var r = { insert: "head", singleton: !1 };
            n(
              "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"
            )(i, r),
              i.locals && (e.exports = i.locals);
          },
          "./src/css/main.css": function (e, t, n) {
            var i = n(
              "./node_modules/css-loader/dist/cjs.js!./src/css/main.css"
            );
            "string" === typeof (i = i.__esModule ? i.default : i) &&
              (i = [[e.i, i, ""]]);
            var r = { insert: "head", singleton: !1 };
            n(
              "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"
            )(i, r),
              i.locals && (e.exports = i.locals);
          },
          "./src/lib/cannon/cannon.js": function (e, t, n) {
            e.exports = (function e(t, n, i) {
              function r(o, s) {
                if (!n[o]) {
                  if (!t[o]) {
                    if (a) return a(o, !0);
                    throw new Error("Cannot find module '" + o + "'");
                  }
                  var l = (n[o] = { exports: {} });
                  t[o][0].call(
                    l.exports,
                    function (e) {
                      var n = t[o][1][e];
                      return r(n || e);
                    },
                    l,
                    l.exports,
                    e,
                    t,
                    n,
                    i
                  );
                }
                return n[o].exports;
              }
              for (var a = !1, o = 0; o < i.length; o++) r(i[o]);
              return r;
            })(
              {
                1: [
                  function (e, t, n) {
                    t.exports = {
                      name: "cannon",
                      version: "0.6.2",
                      description:
                        "A lightweight 3D physics engine written in JavaScript.",
                      homepage: "https://github.com/schteppe/cannon.js",
                      author:
                        "Stefan Hedman <schteppe@gmail.com> (http://steffe.se)",
                      keywords: [
                        "cannon.js",
                        "cannon",
                        "physics",
                        "engine",
                        "3d",
                      ],
                      main: "./src/Cannon.js",
                      engines: { node: "*" },
                      repository: {
                        type: "git",
                        url: "https://github.com/schteppe/cannon.js.git",
                      },
                      bugs: {
                        url: "https://github.com/schteppe/cannon.js/issues",
                      },
                      licenses: [{ type: "MIT" }],
                      devDependencies: {
                        browserify: "*",
                        grunt: "^0.4.5",
                        "grunt-browserify": "^2.1.4",
                        "grunt-contrib-concat": "~0.1.3",
                        "grunt-contrib-jshint": "~0.1.1",
                        "grunt-contrib-nodeunit": "^0.4.1",
                        "grunt-contrib-uglify": "^0.5.1",
                        "grunt-contrib-yuidoc": "^0.5.2",
                        jshint: "latest",
                        nodeunit: "^0.9.0",
                        "uglify-js": "latest",
                      },
                      dependencies: { typescript: "^3.7.4" },
                    };
                  },
                  {},
                ],
                2: [
                  function (e, t, n) {
                    t.exports = {
                      version: e("../package.json").version,
                      AABB: e("./collision/AABB"),
                      ArrayCollisionMatrix: e(
                        "./collision/ArrayCollisionMatrix"
                      ),
                      Body: e("./objects/Body"),
                      Box: e("./shapes/Box"),
                      Broadphase: e("./collision/Broadphase"),
                      Constraint: e("./constraints/Constraint"),
                      ContactEquation: e("./equations/ContactEquation"),
                      Narrowphase: e("./world/Narrowphase"),
                      ConeTwistConstraint: e(
                        "./constraints/ConeTwistConstraint"
                      ),
                      ContactMaterial: e("./material/ContactMaterial"),
                      ConvexPolyhedron: e("./shapes/ConvexPolyhedron"),
                      Cylinder: e("./shapes/Cylinder"),
                      DistanceConstraint: e("./constraints/DistanceConstraint"),
                      Equation: e("./equations/Equation"),
                      EventTarget: e("./utils/EventTarget"),
                      FrictionEquation: e("./equations/FrictionEquation"),
                      GSSolver: e("./solver/GSSolver"),
                      GridBroadphase: e("./collision/GridBroadphase"),
                      Heightfield: e("./shapes/Heightfield"),
                      HingeConstraint: e("./constraints/HingeConstraint"),
                      LockConstraint: e("./constraints/LockConstraint"),
                      Mat3: e("./math/Mat3"),
                      Material: e("./material/Material"),
                      NaiveBroadphase: e("./collision/NaiveBroadphase"),
                      ObjectCollisionMatrix: e(
                        "./collision/ObjectCollisionMatrix"
                      ),
                      Pool: e("./utils/Pool"),
                      Particle: e("./shapes/Particle"),
                      Plane: e("./shapes/Plane"),
                      PointToPointConstraint: e(
                        "./constraints/PointToPointConstraint"
                      ),
                      Quaternion: e("./math/Quaternion"),
                      Ray: e("./collision/Ray"),
                      RaycastVehicle: e("./objects/RaycastVehicle"),
                      RaycastResult: e("./collision/RaycastResult"),
                      RigidVehicle: e("./objects/RigidVehicle"),
                      RotationalEquation: e("./equations/RotationalEquation"),
                      RotationalMotorEquation: e(
                        "./equations/RotationalMotorEquation"
                      ),
                      SAPBroadphase: e("./collision/SAPBroadphase"),
                      SPHSystem: e("./objects/SPHSystem"),
                      Shape: e("./shapes/Shape"),
                      Solver: e("./solver/Solver"),
                      Sphere: e("./shapes/Sphere"),
                      SplitSolver: e("./solver/SplitSolver"),
                      Spring: e("./objects/Spring"),
                      Transform: e("./math/Transform"),
                      Trimesh: e("./shapes/Trimesh"),
                      Vec3: e("./math/Vec3"),
                      Vec3Pool: e("./utils/Vec3Pool"),
                      World: e("./world/World"),
                    };
                  },
                  {
                    "../package.json": 1,
                    "./collision/AABB": 3,
                    "./collision/ArrayCollisionMatrix": 4,
                    "./collision/Broadphase": 5,
                    "./collision/GridBroadphase": 6,
                    "./collision/NaiveBroadphase": 7,
                    "./collision/ObjectCollisionMatrix": 8,
                    "./collision/Ray": 10,
                    "./collision/RaycastResult": 11,
                    "./collision/SAPBroadphase": 12,
                    "./constraints/ConeTwistConstraint": 13,
                    "./constraints/Constraint": 14,
                    "./constraints/DistanceConstraint": 15,
                    "./constraints/HingeConstraint": 16,
                    "./constraints/LockConstraint": 17,
                    "./constraints/PointToPointConstraint": 18,
                    "./equations/ContactEquation": 20,
                    "./equations/Equation": 21,
                    "./equations/FrictionEquation": 22,
                    "./equations/RotationalEquation": 23,
                    "./equations/RotationalMotorEquation": 24,
                    "./material/ContactMaterial": 25,
                    "./material/Material": 26,
                    "./math/Mat3": 28,
                    "./math/Quaternion": 29,
                    "./math/Transform": 30,
                    "./math/Vec3": 31,
                    "./objects/Body": 32,
                    "./objects/RaycastVehicle": 33,
                    "./objects/RigidVehicle": 34,
                    "./objects/SPHSystem": 35,
                    "./objects/Spring": 36,
                    "./shapes/Box": 38,
                    "./shapes/ConvexPolyhedron": 39,
                    "./shapes/Cylinder": 40,
                    "./shapes/Heightfield": 41,
                    "./shapes/Particle": 42,
                    "./shapes/Plane": 43,
                    "./shapes/Shape": 44,
                    "./shapes/Sphere": 45,
                    "./shapes/Trimesh": 46,
                    "./solver/GSSolver": 47,
                    "./solver/Solver": 48,
                    "./solver/SplitSolver": 49,
                    "./utils/EventTarget": 50,
                    "./utils/Pool": 52,
                    "./utils/Vec3Pool": 55,
                    "./world/Narrowphase": 56,
                    "./world/World": 57,
                  },
                ],
                3: [
                  function (e, t, n) {
                    var i = e("../math/Vec3");
                    function r(e) {
                      (e = e || {}),
                        (this.lowerBound = new i()),
                        e.lowerBound && this.lowerBound.copy(e.lowerBound),
                        (this.upperBound = new i()),
                        e.upperBound && this.upperBound.copy(e.upperBound);
                    }
                    e("../utils/Utils"), (t.exports = r);
                    var a = new i();
                    (r.prototype.setFromPoints = function (e, t, n, i) {
                      var r = this.lowerBound,
                        o = this.upperBound,
                        s = n;
                      r.copy(e[0]), s && s.vmult(r, r), o.copy(r);
                      for (var l = 1; l < e.length; l++) {
                        var u = e[l];
                        s && (s.vmult(u, a), (u = a)),
                          u.x > o.x && (o.x = u.x),
                          u.x < r.x && (r.x = u.x),
                          u.y > o.y && (o.y = u.y),
                          u.y < r.y && (r.y = u.y),
                          u.z > o.z && (o.z = u.z),
                          u.z < r.z && (r.z = u.z);
                      }
                      return (
                        t && (t.vadd(r, r), t.vadd(o, o)),
                        i &&
                          ((r.x -= i),
                          (r.y -= i),
                          (r.z -= i),
                          (o.x += i),
                          (o.y += i),
                          (o.z += i)),
                        this
                      );
                    }),
                      (r.prototype.copy = function (e) {
                        return (
                          this.lowerBound.copy(e.lowerBound),
                          this.upperBound.copy(e.upperBound),
                          this
                        );
                      }),
                      (r.prototype.clone = function () {
                        return new r().copy(this);
                      }),
                      (r.prototype.extend = function (e) {
                        (this.lowerBound.x = Math.min(
                          this.lowerBound.x,
                          e.lowerBound.x
                        )),
                          (this.upperBound.x = Math.max(
                            this.upperBound.x,
                            e.upperBound.x
                          )),
                          (this.lowerBound.y = Math.min(
                            this.lowerBound.y,
                            e.lowerBound.y
                          )),
                          (this.upperBound.y = Math.max(
                            this.upperBound.y,
                            e.upperBound.y
                          )),
                          (this.lowerBound.z = Math.min(
                            this.lowerBound.z,
                            e.lowerBound.z
                          )),
                          (this.upperBound.z = Math.max(
                            this.upperBound.z,
                            e.upperBound.z
                          ));
                      }),
                      (r.prototype.overlaps = function (e) {
                        var t = this.lowerBound,
                          n = this.upperBound,
                          i = e.lowerBound,
                          r = e.upperBound,
                          a =
                            (i.x <= n.x && n.x <= r.x) ||
                            (t.x <= r.x && r.x <= n.x),
                          o =
                            (i.y <= n.y && n.y <= r.y) ||
                            (t.y <= r.y && r.y <= n.y),
                          s =
                            (i.z <= n.z && n.z <= r.z) ||
                            (t.z <= r.z && r.z <= n.z);
                        return a && o && s;
                      }),
                      (r.prototype.volume = function () {
                        var e = this.lowerBound,
                          t = this.upperBound;
                        return (t.x - e.x) * (t.y - e.y) * (t.z - e.z);
                      }),
                      (r.prototype.contains = function (e) {
                        var t = this.lowerBound,
                          n = this.upperBound,
                          i = e.lowerBound,
                          r = e.upperBound;
                        return (
                          t.x <= i.x &&
                          n.x >= r.x &&
                          t.y <= i.y &&
                          n.y >= r.y &&
                          t.z <= i.z &&
                          n.z >= r.z
                        );
                      }),
                      (r.prototype.getCorners = function (
                        e,
                        t,
                        n,
                        i,
                        r,
                        a,
                        o,
                        s
                      ) {
                        var l = this.lowerBound,
                          u = this.upperBound;
                        e.copy(l),
                          t.set(u.x, l.y, l.z),
                          n.set(u.x, u.y, l.z),
                          i.set(l.x, u.y, u.z),
                          r.set(u.x, l.y, u.z),
                          a.set(l.x, u.y, l.z),
                          o.set(l.x, l.y, u.z),
                          s.copy(u);
                      });
                    var o = [
                      new i(),
                      new i(),
                      new i(),
                      new i(),
                      new i(),
                      new i(),
                      new i(),
                      new i(),
                    ];
                    (r.prototype.toLocalFrame = function (e, t) {
                      var n = o,
                        i = n[0],
                        r = n[1],
                        a = n[2],
                        s = n[3],
                        l = n[4],
                        u = n[5],
                        c = n[6],
                        h = n[7];
                      this.getCorners(i, r, a, s, l, u, c, h);
                      for (var d = 0; 8 !== d; d++) {
                        var p = n[d];
                        e.pointToLocal(p, p);
                      }
                      return t.setFromPoints(n);
                    }),
                      (r.prototype.toWorldFrame = function (e, t) {
                        var n = o,
                          i = n[0],
                          r = n[1],
                          a = n[2],
                          s = n[3],
                          l = n[4],
                          u = n[5],
                          c = n[6],
                          h = n[7];
                        this.getCorners(i, r, a, s, l, u, c, h);
                        for (var d = 0; 8 !== d; d++) {
                          var p = n[d];
                          e.pointToWorld(p, p);
                        }
                        return t.setFromPoints(n);
                      }),
                      (r.prototype.overlapsRay = function (e) {
                        var t = 1 / e._direction.x,
                          n = 1 / e._direction.y,
                          i = 1 / e._direction.z,
                          r = (this.lowerBound.x - e.from.x) * t,
                          a = (this.upperBound.x - e.from.x) * t,
                          o = (this.lowerBound.y - e.from.y) * n,
                          s = (this.upperBound.y - e.from.y) * n,
                          l = (this.lowerBound.z - e.from.z) * i,
                          u = (this.upperBound.z - e.from.z) * i,
                          c = Math.max(
                            Math.max(Math.min(r, a), Math.min(o, s)),
                            Math.min(l, u)
                          ),
                          h = Math.min(
                            Math.min(Math.max(r, a), Math.max(o, s)),
                            Math.max(l, u)
                          );
                        return !(h < 0) && !(c > h);
                      });
                  },
                  { "../math/Vec3": 31, "../utils/Utils": 54 },
                ],
                4: [
                  function (e, t, n) {
                    function i() {
                      this.matrix = [];
                    }
                    (t.exports = i),
                      (i.prototype.get = function (e, t) {
                        if (((e = e.index), (t = t.index) > e)) {
                          var n = t;
                          (t = e), (e = n);
                        }
                        return this.matrix[((e * (e + 1)) >> 1) + t - 1];
                      }),
                      (i.prototype.set = function (e, t, n) {
                        if (((e = e.index), (t = t.index) > e)) {
                          var i = t;
                          (t = e), (e = i);
                        }
                        this.matrix[((e * (e + 1)) >> 1) + t - 1] = n ? 1 : 0;
                      }),
                      (i.prototype.reset = function () {
                        for (var e = 0, t = this.matrix.length; e !== t; e++)
                          this.matrix[e] = 0;
                      }),
                      (i.prototype.setNumObjects = function (e) {
                        this.matrix.length = (e * (e - 1)) >> 1;
                      });
                  },
                  {},
                ],
                5: [
                  function (e, t, n) {
                    var i = e("../objects/Body"),
                      r = e("../math/Vec3"),
                      a = e("../math/Quaternion");
                    function o() {
                      (this.world = null),
                        (this.useBoundingBoxes = !1),
                        (this.dirty = !0);
                    }
                    e("../shapes/Shape"),
                      e("../shapes/Plane"),
                      (t.exports = o),
                      (o.prototype.collisionPairs = function (e, t, n) {
                        throw new Error(
                          "collisionPairs not implemented for this BroadPhase class!"
                        );
                      }),
                      (o.prototype.needBroadphaseCollision = function (e, t) {
                        return (
                          0 !==
                            (e.collisionFilterGroup & t.collisionFilterMask) &&
                          0 !==
                            (t.collisionFilterGroup & e.collisionFilterMask) &&
                          ((0 === (e.type & i.STATIC) &&
                            e.sleepState !== i.SLEEPING) ||
                            (0 === (t.type & i.STATIC) &&
                              t.sleepState !== i.SLEEPING))
                        );
                      }),
                      (o.prototype.intersectionTest = function (e, t, n, i) {
                        this.useBoundingBoxes
                          ? this.doBoundingBoxBroadphase(e, t, n, i)
                          : this.doBoundingSphereBroadphase(e, t, n, i);
                      });
                    var s = new r();
                    new r(),
                      new a(),
                      new r(),
                      (o.prototype.doBoundingSphereBroadphase = function (
                        e,
                        t,
                        n,
                        i
                      ) {
                        var r = s;
                        t.position.vsub(e.position, r);
                        var a = Math.pow(
                          e.boundingRadius + t.boundingRadius,
                          2
                        );
                        r.norm2() < a && (n.push(e), i.push(t));
                      }),
                      (o.prototype.doBoundingBoxBroadphase = function (
                        e,
                        t,
                        n,
                        i
                      ) {
                        e.aabbNeedsUpdate && e.computeAABB(),
                          t.aabbNeedsUpdate && t.computeAABB(),
                          e.aabb.overlaps(t.aabb) && (n.push(e), i.push(t));
                      });
                    var l = { keys: [] },
                      u = [],
                      c = [];
                    (o.prototype.makePairsUnique = function (e, t) {
                      for (
                        var n = l, i = u, r = c, a = e.length, o = 0;
                        o !== a;
                        o++
                      )
                        (i[o] = e[o]), (r[o] = t[o]);
                      for (e.length = 0, t.length = 0, o = 0; o !== a; o++) {
                        var s = i[o].id,
                          h = r[o].id;
                        (n[(d = s < h ? s + "," + h : h + "," + s)] = o),
                          n.keys.push(d);
                      }
                      for (o = 0; o !== n.keys.length; o++) {
                        var d = n.keys.pop(),
                          p = n[d];
                        e.push(i[p]), t.push(r[p]), delete n[d];
                      }
                    }),
                      (o.prototype.setWorld = function (e) {});
                    var h = new r();
                    (o.boundingSphereCheck = function (e, t) {
                      var n = h;
                      return (
                        e.position.vsub(t.position, n),
                        Math.pow(
                          e.shape.boundingSphereRadius +
                            t.shape.boundingSphereRadius,
                          2
                        ) > n.norm2()
                      );
                    }),
                      (o.prototype.aabbQuery = function (e, t, n) {
                        return (
                          console.warn(
                            ".aabbQuery is not implemented in this Broadphase subclass."
                          ),
                          []
                        );
                      });
                  },
                  {
                    "../math/Quaternion": 29,
                    "../math/Vec3": 31,
                    "../objects/Body": 32,
                    "../shapes/Plane": 43,
                    "../shapes/Shape": 44,
                  },
                ],
                6: [
                  function (e, t, n) {
                    t.exports = o;
                    var i = e("./Broadphase"),
                      r = e("../math/Vec3"),
                      a = e("../shapes/Shape");
                    function o(e, t, n, a, o) {
                      i.apply(this),
                        (this.nx = n || 10),
                        (this.ny = a || 10),
                        (this.nz = o || 10),
                        (this.aabbMin = e || new r(100, 100, 100)),
                        (this.aabbMax = t || new r(-100, -100, -100));
                      var s = this.nx * this.ny * this.nz;
                      if (s <= 0)
                        throw "GridBroadphase: Each dimension's n must be >0";
                      (this.bins = []),
                        (this.binLengths = []),
                        (this.bins.length = s),
                        (this.binLengths.length = s);
                      for (var l = 0; l < s; l++)
                        (this.bins[l] = []), (this.binLengths[l] = 0);
                    }
                    (o.prototype = new i()), (o.prototype.constructor = o);
                    var s = new r();
                    new r(),
                      (o.prototype.collisionPairs = function (e, t, n) {
                        for (
                          var i = e.numObjects(),
                            r = e.bodies,
                            o = this.aabbMax,
                            l = this.aabbMin,
                            u = this.nx,
                            c = this.ny,
                            h = this.nz,
                            d = c * h,
                            p = h,
                            f = o.x,
                            m = o.y,
                            v = o.z,
                            g = l.x,
                            y = l.y,
                            x = l.z,
                            b = u / (f - g),
                            _ = c / (m - y),
                            w = h / (v - x),
                            S = (f - g) / u,
                            E = (m - y) / c,
                            M = (v - x) / h,
                            A = 0.5 * Math.sqrt(S * S + E * E + M * M),
                            T = a.types,
                            C = T.SPHERE,
                            k = T.PLANE,
                            P =
                              (T.BOX,
                              T.COMPOUND,
                              T.CONVEXPOLYHEDRON,
                              this.bins),
                            L = this.binLengths,
                            R = this.bins.length,
                            I = 0;
                          I !== R;
                          I++
                        )
                          L[I] = 0;
                        var F = Math.ceil;
                        function N(e, t, n, i, r, a, o) {
                          var s = ((e - g) * b) | 0,
                            l = ((t - y) * _) | 0,
                            f = ((n - x) * w) | 0,
                            m = F((i - g) * b),
                            v = F((r - y) * _),
                            S = F((a - x) * w);
                          s < 0 ? (s = 0) : s >= u && (s = u - 1),
                            l < 0 ? (l = 0) : l >= c && (l = c - 1),
                            f < 0 ? (f = 0) : f >= h && (f = h - 1),
                            m < 0 ? (m = 0) : m >= u && (m = u - 1),
                            v < 0 ? (v = 0) : v >= c && (v = c - 1),
                            S < 0 ? (S = 0) : S >= h && (S = h - 1),
                            (l *= p),
                            (f *= 1),
                            (m *= d),
                            (v *= p),
                            (S *= 1);
                          for (var E = (s *= d); E <= m; E += d)
                            for (var M = l; M <= v; M += p)
                              for (var A = f; A <= S; A += 1) {
                                var T = E + M + A;
                                P[T][L[T]++] = o;
                              }
                        }
                        for (l = Math.min, o = Math.max, I = 0; I !== i; I++) {
                          var O = (te = r[I]).shape;
                          switch (O.type) {
                            case C:
                              var B = te.position.x,
                                D = te.position.y,
                                V = te.position.z,
                                U = O.radius;
                              N(B - U, D - U, V - U, B + U, D + U, V + U, te);
                              break;
                            case k:
                              O.worldNormalNeedsUpdate &&
                                O.computeWorldNormal(te.quaternion);
                              var z = O.worldNormal,
                                j = g + 0.5 * S - te.position.x,
                                G = y + 0.5 * E - te.position.y,
                                H = x + 0.5 * M - te.position.z,
                                W = s;
                              W.set(j, G, H);
                              for (
                                var Y = 0, q = 0;
                                Y !== u;
                                Y++, q += d, W.y = G, W.x += S
                              )
                                for (
                                  var X = 0, Q = 0;
                                  X !== c;
                                  X++, Q += p, W.z = H, W.y += E
                                )
                                  for (
                                    var Z = 0, J = 0;
                                    Z !== h;
                                    Z++, J += 1, W.z += M
                                  )
                                    if (W.dot(z) < A) {
                                      var K = q + Q + J;
                                      P[K][L[K]++] = te;
                                    }
                              break;
                            default:
                              te.aabbNeedsUpdate && te.computeAABB(),
                                N(
                                  te.aabb.lowerBound.x,
                                  te.aabb.lowerBound.y,
                                  te.aabb.lowerBound.z,
                                  te.aabb.upperBound.x,
                                  te.aabb.upperBound.y,
                                  te.aabb.upperBound.z,
                                  te
                                );
                          }
                        }
                        for (I = 0; I !== R; I++) {
                          var $ = L[I];
                          if ($ > 1) {
                            var ee = P[I];
                            for (Y = 0; Y !== $; Y++) {
                              var te = ee[Y];
                              for (X = 0; X !== Y; X++) {
                                var ne = ee[X];
                                this.needBroadphaseCollision(te, ne) &&
                                  this.intersectionTest(te, ne, t, n);
                              }
                            }
                          }
                        }
                        this.makePairsUnique(t, n);
                      });
                  },
                  {
                    "../math/Vec3": 31,
                    "../shapes/Shape": 44,
                    "./Broadphase": 5,
                  },
                ],
                7: [
                  function (e, t, n) {
                    t.exports = a;
                    var i = e("./Broadphase"),
                      r = e("./AABB");
                    function a() {
                      i.apply(this);
                    }
                    (a.prototype = new i()),
                      (a.prototype.constructor = a),
                      (a.prototype.collisionPairs = function (e, t, n) {
                        var i,
                          r,
                          a,
                          o,
                          s = e.bodies,
                          l = s.length;
                        for (i = 0; i !== l; i++)
                          for (r = 0; r !== i; r++)
                            (a = s[i]),
                              (o = s[r]),
                              this.needBroadphaseCollision(a, o) &&
                                this.intersectionTest(a, o, t, n);
                      }),
                      new r(),
                      (a.prototype.aabbQuery = function (e, t, n) {
                        n = n || [];
                        for (var i = 0; i < e.bodies.length; i++) {
                          var r = e.bodies[i];
                          r.aabbNeedsUpdate && r.computeAABB(),
                            r.aabb.overlaps(t) && n.push(r);
                        }
                        return n;
                      });
                  },
                  { "./AABB": 3, "./Broadphase": 5 },
                ],
                8: [
                  function (e, t, n) {
                    function i() {
                      this.matrix = {};
                    }
                    (t.exports = i),
                      (i.prototype.get = function (e, t) {
                        if (((e = e.id), (t = t.id) > e)) {
                          var n = t;
                          (t = e), (e = n);
                        }
                        return e + "-" + t in this.matrix;
                      }),
                      (i.prototype.set = function (e, t, n) {
                        if (((e = e.id), (t = t.id) > e)) {
                          var i = t;
                          (t = e), (e = i);
                        }
                        n
                          ? (this.matrix[e + "-" + t] = !0)
                          : delete this.matrix[e + "-" + t];
                      }),
                      (i.prototype.reset = function () {
                        this.matrix = {};
                      }),
                      (i.prototype.setNumObjects = function (e) {});
                  },
                  {},
                ],
                9: [
                  function (e, t, n) {
                    function i() {
                      (this.current = []), (this.previous = []);
                    }
                    function r(e, t) {
                      e.push((4294901760 & t) >> 16, 65535 & t);
                    }
                    (t.exports = i),
                      (i.prototype.getKey = function (e, t) {
                        if (t < e) {
                          var n = t;
                          (t = e), (e = n);
                        }
                        return (e << 16) | t;
                      }),
                      (i.prototype.set = function (e, t) {
                        for (
                          var n = this.getKey(e, t), i = this.current, r = 0;
                          n > i[r];

                        )
                          r++;
                        if (n !== i[r]) {
                          for (t = i.length - 1; t >= r; t--) i[t + 1] = i[t];
                          i[r] = n;
                        }
                      }),
                      (i.prototype.tick = function () {
                        var e = this.current;
                        (this.current = this.previous),
                          (this.previous = e),
                          (this.current.length = 0);
                      }),
                      (i.prototype.getDiff = function (e, t) {
                        for (
                          var n = this.current,
                            i = this.previous,
                            a = n.length,
                            o = i.length,
                            s = 0,
                            l = 0;
                          l < a;
                          l++
                        ) {
                          for (var u = n[l]; u > i[s]; ) s++;
                          u === i[s] || r(e, u);
                        }
                        for (s = 0, l = 0; l < o; l++) {
                          for (var c = i[l]; c > n[s]; ) s++;
                          n[s] === c || r(t, c);
                        }
                      });
                  },
                  {},
                ],
                10: [
                  function (e, t, n) {
                    t.exports = u;
                    var i = e("../math/Vec3"),
                      r = e("../math/Quaternion"),
                      a = e("../math/Transform"),
                      o =
                        (e("../shapes/ConvexPolyhedron"),
                        e("../shapes/Box"),
                        e("../collision/RaycastResult")),
                      s = e("../shapes/Shape"),
                      l = e("../collision/AABB");
                    function u(e, t) {
                      (this.from = e ? e.clone() : new i()),
                        (this.to = t ? t.clone() : new i()),
                        (this._direction = new i()),
                        (this.precision = 1e-4),
                        (this.checkCollisionResponse = !0),
                        (this.skipBackfaces = !1),
                        (this.collisionFilterMask = -1),
                        (this.collisionFilterGroup = -1),
                        (this.mode = u.ANY),
                        (this.result = new o()),
                        (this.hasHit = !1),
                        (this.callback = function (e) {});
                    }
                    (u.prototype.constructor = u),
                      (u.CLOSEST = 1),
                      (u.ANY = 2),
                      (u.ALL = 4);
                    var c = new l(),
                      h = [];
                    u.prototype.intersectWorld = function (e, t) {
                      return (
                        (this.mode = t.mode || u.ANY),
                        (this.result = t.result || new o()),
                        (this.skipBackfaces = !!t.skipBackfaces),
                        (this.collisionFilterMask =
                          "undefined" !== typeof t.collisionFilterMask
                            ? t.collisionFilterMask
                            : -1),
                        (this.collisionFilterGroup =
                          "undefined" !== typeof t.collisionFilterGroup
                            ? t.collisionFilterGroup
                            : -1),
                        t.from && this.from.copy(t.from),
                        t.to && this.to.copy(t.to),
                        (this.callback = t.callback || function () {}),
                        (this.hasHit = !1),
                        this.result.reset(),
                        this._updateDirection(),
                        this.getAABB(c),
                        (h.length = 0),
                        e.broadphase.aabbQuery(e, c, h),
                        this.intersectBodies(h),
                        this.hasHit
                      );
                    };
                    var d = new i(),
                      p = new i();
                    function f(e, t, n, i) {
                      i.vsub(t, B), n.vsub(t, d), e.vsub(t, p);
                      var r,
                        a,
                        o = B.dot(B),
                        s = B.dot(d),
                        l = B.dot(p),
                        u = d.dot(d),
                        c = d.dot(p);
                      return (
                        (r = u * l - s * c) >= 0 &&
                        (a = o * c - s * l) >= 0 &&
                        r + a < o * u - s * s
                      );
                    }
                    u.pointInTriangle = f;
                    var m = new i(),
                      v = new r();
                    (u.prototype.intersectBody = function (e, t) {
                      t && ((this.result = t), this._updateDirection());
                      var n = this.checkCollisionResponse;
                      if (
                        (!n || e.collisionResponse) &&
                        0 !==
                          (this.collisionFilterGroup & e.collisionFilterMask) &&
                        0 !==
                          (e.collisionFilterGroup & this.collisionFilterMask)
                      )
                        for (
                          var i = m, r = v, a = 0, o = e.shapes.length;
                          a < o;
                          a++
                        ) {
                          var s = e.shapes[a];
                          if (
                            (!n || s.collisionResponse) &&
                            0 !==
                              (this.collisionFilterGroup &
                                s.collisionFilterMask) &&
                            0 !==
                              (s.collisionFilterGroup &
                                this.collisionFilterMask) &&
                            (e.quaternion.mult(e.shapeOrientations[a], r),
                            e.quaternion.vmult(e.shapeOffsets[a], i),
                            i.vadd(e.position, i),
                            this.intersectShape(s, r, i, e),
                            this.result._shouldStop)
                          )
                            break;
                        }
                    }),
                      (u.prototype.intersectBodies = function (e, t) {
                        t && ((this.result = t), this._updateDirection());
                        for (
                          var n = 0, i = e.length;
                          !this.result._shouldStop && n < i;
                          n++
                        )
                          this.intersectBody(e[n]);
                      }),
                      (u.prototype._updateDirection = function () {
                        this.to.vsub(this.from, this._direction),
                          this._direction.normalize();
                      }),
                      (u.prototype.intersectShape = function (e, t, n, i) {
                        if (
                          !(
                            (function (e, t, n) {
                              n.vsub(e, B);
                              var i = B.dot(t);
                              return (
                                t.mult(i, D), D.vadd(e, D), n.distanceTo(D)
                              );
                            })(this.from, this._direction, n) >
                            e.boundingSphereRadius
                          )
                        ) {
                          var r = this[e.type];
                          r && r.call(this, e, t, n, i, e);
                        }
                      }),
                      new i(),
                      new i();
                    var g = new i(),
                      y = new i(),
                      x = new i(),
                      b = new i();
                    new i(),
                      new o(),
                      (u.prototype.intersectBox = function (e, t, n, i, r) {
                        return this.intersectConvex(
                          e.convexPolyhedronRepresentation,
                          t,
                          n,
                          i,
                          r
                        );
                      }),
                      (u.prototype[s.types.BOX] = u.prototype.intersectBox),
                      (u.prototype.intersectPlane = function (e, t, n, r, a) {
                        var o = this.from,
                          s = this.to,
                          l = this._direction,
                          u = new i(0, 0, 1);
                        t.vmult(u, u);
                        var c = new i();
                        o.vsub(n, c);
                        var h = c.dot(u);
                        if (
                          (s.vsub(n, c),
                          !(h * c.dot(u) > 0) && !(o.distanceTo(s) < h))
                        ) {
                          var d = u.dot(l);
                          if (!(Math.abs(d) < this.precision)) {
                            var p = new i(),
                              f = new i(),
                              m = new i();
                            o.vsub(n, p);
                            var v = -u.dot(p) / d;
                            l.scale(v, f),
                              o.vadd(f, m),
                              this.reportIntersection(u, m, a, r, -1);
                          }
                        }
                      }),
                      (u.prototype[s.types.PLANE] = u.prototype.intersectPlane),
                      (u.prototype.getAABB = function (e) {
                        var t = this.to,
                          n = this.from;
                        (e.lowerBound.x = Math.min(t.x, n.x)),
                          (e.lowerBound.y = Math.min(t.y, n.y)),
                          (e.lowerBound.z = Math.min(t.z, n.z)),
                          (e.upperBound.x = Math.max(t.x, n.x)),
                          (e.upperBound.y = Math.max(t.y, n.y)),
                          (e.upperBound.z = Math.max(t.z, n.z));
                      });
                    var _ = { faceList: [0] },
                      w = new i(),
                      S = new u(),
                      E = [];
                    (u.prototype.intersectHeightfield = function (
                      e,
                      t,
                      n,
                      i,
                      r
                    ) {
                      e.data, e.elementSize;
                      var o = S;
                      o.from.copy(this.from),
                        o.to.copy(this.to),
                        a.pointToLocalFrame(n, t, o.from, o.from),
                        a.pointToLocalFrame(n, t, o.to, o.to),
                        o._updateDirection();
                      var s,
                        u,
                        c,
                        h,
                        d = E;
                      (s = u = 0), (c = h = e.data.length - 1);
                      var p = new l();
                      o.getAABB(p),
                        e.getIndexOfPosition(
                          p.lowerBound.x,
                          p.lowerBound.y,
                          d,
                          !0
                        ),
                        (s = Math.max(s, d[0])),
                        (u = Math.max(u, d[1])),
                        e.getIndexOfPosition(
                          p.upperBound.x,
                          p.upperBound.y,
                          d,
                          !0
                        ),
                        (c = Math.min(c, d[0] + 1)),
                        (h = Math.min(h, d[1] + 1));
                      for (var f = s; f < c; f++)
                        for (var m = u; m < h; m++) {
                          if (this.result._shouldStop) return;
                          if ((e.getAabbAtIndex(f, m, p), p.overlapsRay(o))) {
                            if (
                              (e.getConvexTrianglePillar(f, m, !1),
                              a.pointToWorldFrame(n, t, e.pillarOffset, w),
                              this.intersectConvex(
                                e.pillarConvex,
                                t,
                                w,
                                i,
                                r,
                                _
                              ),
                              this.result._shouldStop)
                            )
                              return;
                            e.getConvexTrianglePillar(f, m, !0),
                              a.pointToWorldFrame(n, t, e.pillarOffset, w),
                              this.intersectConvex(
                                e.pillarConvex,
                                t,
                                w,
                                i,
                                r,
                                _
                              );
                          }
                        }
                    }),
                      (u.prototype[s.types.HEIGHTFIELD] =
                        u.prototype.intersectHeightfield);
                    var M = new i(),
                      A = new i();
                    (u.prototype.intersectSphere = function (e, t, n, i, r) {
                      var a = this.from,
                        o = this.to,
                        s = e.radius,
                        l =
                          Math.pow(o.x - a.x, 2) +
                          Math.pow(o.y - a.y, 2) +
                          Math.pow(o.z - a.z, 2),
                        u =
                          2 *
                          ((o.x - a.x) * (a.x - n.x) +
                            (o.y - a.y) * (a.y - n.y) +
                            (o.z - a.z) * (a.z - n.z)),
                        c =
                          Math.pow(a.x - n.x, 2) +
                          Math.pow(a.y - n.y, 2) +
                          Math.pow(a.z - n.z, 2) -
                          Math.pow(s, 2),
                        h = Math.pow(u, 2) - 4 * l * c,
                        d = M,
                        p = A;
                      if (!(h < 0))
                        if (0 === h)
                          a.lerp(o, h, d),
                            d.vsub(n, p),
                            p.normalize(),
                            this.reportIntersection(p, d, r, i, -1);
                        else {
                          var f = (-u - Math.sqrt(h)) / (2 * l),
                            m = (-u + Math.sqrt(h)) / (2 * l);
                          if (
                            (f >= 0 &&
                              f <= 1 &&
                              (a.lerp(o, f, d),
                              d.vsub(n, p),
                              p.normalize(),
                              this.reportIntersection(p, d, r, i, -1)),
                            this.result._shouldStop)
                          )
                            return;
                          m >= 0 &&
                            m <= 1 &&
                            (a.lerp(o, m, d),
                            d.vsub(n, p),
                            p.normalize(),
                            this.reportIntersection(p, d, r, i, -1));
                        }
                    }),
                      (u.prototype[s.types.SPHERE] =
                        u.prototype.intersectSphere);
                    var T = new i(),
                      C = (new i(), new i(), new i());
                    (u.prototype.intersectConvex = function (e, t, n, i, r, a) {
                      for (
                        var o = T,
                          s = C,
                          l = (a && a.faceList) || null,
                          u = e.faces,
                          c = e.vertices,
                          h = e.faceNormals,
                          d = this._direction,
                          p = this.from,
                          m = this.to,
                          v = p.distanceTo(m),
                          _ = l ? l.length : u.length,
                          w = this.result,
                          S = 0;
                        !w._shouldStop && S < _;
                        S++
                      ) {
                        var E = l ? l[S] : S,
                          M = u[E],
                          A = h[E],
                          k = t,
                          P = n;
                        s.copy(c[M[0]]),
                          k.vmult(s, s),
                          s.vadd(P, s),
                          s.vsub(p, s),
                          k.vmult(A, o);
                        var L = d.dot(o);
                        if (!(Math.abs(L) < this.precision)) {
                          var R = o.dot(s) / L;
                          if (!(R < 0)) {
                            d.mult(R, g),
                              g.vadd(p, g),
                              y.copy(c[M[0]]),
                              k.vmult(y, y),
                              P.vadd(y, y);
                            for (
                              var I = 1;
                              !w._shouldStop && I < M.length - 1;
                              I++
                            ) {
                              x.copy(c[M[I]]),
                                b.copy(c[M[I + 1]]),
                                k.vmult(x, x),
                                k.vmult(b, b),
                                P.vadd(x, x),
                                P.vadd(b, b);
                              var F = g.distanceTo(p);
                              (!f(g, y, x, b) && !f(g, x, y, b)) ||
                                F > v ||
                                this.reportIntersection(o, g, r, i, E);
                            }
                          }
                        }
                      }
                    }),
                      (u.prototype[s.types.CONVEXPOLYHEDRON] =
                        u.prototype.intersectConvex);
                    var k = new i(),
                      P = new i(),
                      L = new i(),
                      R = new i(),
                      I = new i(),
                      F = new i(),
                      N = (new l(), []),
                      O = new a();
                    (u.prototype.intersectTrimesh = function (
                      e,
                      t,
                      n,
                      i,
                      r,
                      o
                    ) {
                      var s = k,
                        l = N,
                        u = O,
                        c = C,
                        h = P,
                        d = L,
                        p = R,
                        m = F,
                        v = I,
                        _ = (o && o.faceList, e.indices),
                        w = (e.vertices, e.faceNormals, this.from),
                        S = this.to,
                        E = this._direction;
                      u.position.copy(n),
                        u.quaternion.copy(t),
                        a.vectorToLocalFrame(n, t, E, h),
                        a.pointToLocalFrame(n, t, w, d),
                        a.pointToLocalFrame(n, t, S, p),
                        (p.x *= e.scale.x),
                        (p.y *= e.scale.y),
                        (p.z *= e.scale.z),
                        (d.x *= e.scale.x),
                        (d.y *= e.scale.y),
                        (d.z *= e.scale.z),
                        p.vsub(d, h),
                        h.normalize();
                      var M = d.distanceSquared(p);
                      e.tree.rayQuery(this, u, l);
                      for (
                        var A = 0, T = l.length;
                        !this.result._shouldStop && A !== T;
                        A++
                      ) {
                        var B = l[A];
                        e.getNormal(B, s),
                          e.getVertex(_[3 * B], y),
                          y.vsub(d, c);
                        var D = h.dot(s),
                          V = s.dot(c) / D;
                        if (!(V < 0)) {
                          h.scale(V, g),
                            g.vadd(d, g),
                            e.getVertex(_[3 * B + 1], x),
                            e.getVertex(_[3 * B + 2], b);
                          var U = g.distanceSquared(d);
                          (!f(g, x, y, b) && !f(g, y, x, b)) ||
                            U > M ||
                            (a.vectorToWorldFrame(t, s, v),
                            a.pointToWorldFrame(n, t, g, m),
                            this.reportIntersection(v, m, r, i, B));
                        }
                      }
                      l.length = 0;
                    }),
                      (u.prototype[s.types.TRIMESH] =
                        u.prototype.intersectTrimesh),
                      (u.prototype.reportIntersection = function (
                        e,
                        t,
                        n,
                        i,
                        r
                      ) {
                        var a = this.from,
                          o = this.to,
                          s = a.distanceTo(t),
                          l = this.result;
                        if (!(this.skipBackfaces && e.dot(this._direction) > 0))
                          switch (
                            ((l.hitFaceIndex =
                              "undefined" !== typeof r ? r : -1),
                            this.mode)
                          ) {
                            case u.ALL:
                              (this.hasHit = !0),
                                l.set(a, o, e, t, n, i, s),
                                (l.hasHit = !0),
                                this.callback(l);
                              break;
                            case u.CLOSEST:
                              (s < l.distance || !l.hasHit) &&
                                ((this.hasHit = !0),
                                (l.hasHit = !0),
                                l.set(a, o, e, t, n, i, s));
                              break;
                            case u.ANY:
                              (this.hasHit = !0),
                                (l.hasHit = !0),
                                l.set(a, o, e, t, n, i, s),
                                (l._shouldStop = !0);
                          }
                      });
                    var B = new i(),
                      D = new i();
                  },
                  {
                    "../collision/AABB": 3,
                    "../collision/RaycastResult": 11,
                    "../math/Quaternion": 29,
                    "../math/Transform": 30,
                    "../math/Vec3": 31,
                    "../shapes/Box": 38,
                    "../shapes/ConvexPolyhedron": 39,
                    "../shapes/Shape": 44,
                  },
                ],
                11: [
                  function (e, t, n) {
                    var i = e("../math/Vec3");
                    function r() {
                      (this.rayFromWorld = new i()),
                        (this.rayToWorld = new i()),
                        (this.hitNormalWorld = new i()),
                        (this.hitPointWorld = new i()),
                        (this.hasHit = !1),
                        (this.shape = null),
                        (this.body = null),
                        (this.hitFaceIndex = -1),
                        (this.distance = -1),
                        (this._shouldStop = !1);
                    }
                    (t.exports = r),
                      (r.prototype.reset = function () {
                        this.rayFromWorld.setZero(),
                          this.rayToWorld.setZero(),
                          this.hitNormalWorld.setZero(),
                          this.hitPointWorld.setZero(),
                          (this.hasHit = !1),
                          (this.shape = null),
                          (this.body = null),
                          (this.hitFaceIndex = -1),
                          (this.distance = -1),
                          (this._shouldStop = !1);
                      }),
                      (r.prototype.abort = function () {
                        this._shouldStop = !0;
                      }),
                      (r.prototype.set = function (e, t, n, i, r, a, o) {
                        this.rayFromWorld.copy(e),
                          this.rayToWorld.copy(t),
                          this.hitNormalWorld.copy(n),
                          this.hitPointWorld.copy(i),
                          (this.shape = r),
                          (this.body = a),
                          (this.distance = o);
                      });
                  },
                  { "../math/Vec3": 31 },
                ],
                12: [
                  function (e, t, n) {
                    e("../shapes/Shape");
                    var i = e("../collision/Broadphase");
                    function r(e) {
                      i.apply(this),
                        (this.axisList = []),
                        (this.world = null),
                        (this.axisIndex = 0);
                      var t = this.axisList;
                      (this._addBodyHandler = function (e) {
                        t.push(e.body);
                      }),
                        (this._removeBodyHandler = function (e) {
                          var n = t.indexOf(e.body);
                          -1 !== n && t.splice(n, 1);
                        }),
                        e && this.setWorld(e);
                    }
                    (t.exports = r),
                      (r.prototype = new i()),
                      (r.prototype.setWorld = function (e) {
                        this.axisList.length = 0;
                        for (var t = 0; t < e.bodies.length; t++)
                          this.axisList.push(e.bodies[t]);
                        e.removeEventListener("addBody", this._addBodyHandler),
                          e.removeEventListener(
                            "removeBody",
                            this._removeBodyHandler
                          ),
                          e.addEventListener("addBody", this._addBodyHandler),
                          e.addEventListener(
                            "removeBody",
                            this._removeBodyHandler
                          ),
                          (this.world = e),
                          (this.dirty = !0);
                      }),
                      (r.insertionSortX = function (e) {
                        for (var t = 1, n = e.length; t < n; t++) {
                          for (
                            var i = e[t], r = t - 1;
                            r >= 0 &&
                            !(e[r].aabb.lowerBound.x <= i.aabb.lowerBound.x);
                            r--
                          )
                            e[r + 1] = e[r];
                          e[r + 1] = i;
                        }
                        return e;
                      }),
                      (r.insertionSortY = function (e) {
                        for (var t = 1, n = e.length; t < n; t++) {
                          for (
                            var i = e[t], r = t - 1;
                            r >= 0 &&
                            !(e[r].aabb.lowerBound.y <= i.aabb.lowerBound.y);
                            r--
                          )
                            e[r + 1] = e[r];
                          e[r + 1] = i;
                        }
                        return e;
                      }),
                      (r.insertionSortZ = function (e) {
                        for (var t = 1, n = e.length; t < n; t++) {
                          for (
                            var i = e[t], r = t - 1;
                            r >= 0 &&
                            !(e[r].aabb.lowerBound.z <= i.aabb.lowerBound.z);
                            r--
                          )
                            e[r + 1] = e[r];
                          e[r + 1] = i;
                        }
                        return e;
                      }),
                      (r.prototype.collisionPairs = function (e, t, n) {
                        var i,
                          a,
                          o = this.axisList,
                          s = o.length,
                          l = this.axisIndex;
                        for (
                          this.dirty && (this.sortList(), (this.dirty = !1)),
                            i = 0;
                          i !== s;
                          i++
                        ) {
                          var u = o[i];
                          for (a = i + 1; a < s; a++) {
                            var c = o[a];
                            if (this.needBroadphaseCollision(u, c)) {
                              if (!r.checkBounds(u, c, l)) break;
                              this.intersectionTest(u, c, t, n);
                            }
                          }
                        }
                      }),
                      (r.prototype.sortList = function () {
                        for (
                          var e = this.axisList,
                            t = this.axisIndex,
                            n = e.length,
                            i = 0;
                          i !== n;
                          i++
                        ) {
                          var a = e[i];
                          a.aabbNeedsUpdate && a.computeAABB();
                        }
                        0 === t
                          ? r.insertionSortX(e)
                          : 1 === t
                          ? r.insertionSortY(e)
                          : 2 === t && r.insertionSortZ(e);
                      }),
                      (r.checkBounds = function (e, t, n) {
                        var i, r;
                        0 === n
                          ? ((i = e.position.x), (r = t.position.x))
                          : 1 === n
                          ? ((i = e.position.y), (r = t.position.y))
                          : 2 === n && ((i = e.position.z), (r = t.position.z));
                        var a = e.boundingRadius,
                          o = t.boundingRadius;
                        return r - o < i + a;
                      }),
                      (r.prototype.autoDetectAxis = function () {
                        for (
                          var e = 0,
                            t = 0,
                            n = 0,
                            i = 0,
                            r = 0,
                            a = 0,
                            o = this.axisList,
                            s = o.length,
                            l = 1 / s,
                            u = 0;
                          u !== s;
                          u++
                        ) {
                          var c = o[u],
                            h = c.position.x;
                          (e += h), (t += h * h);
                          var d = c.position.y;
                          (n += d), (i += d * d);
                          var p = c.position.z;
                          (r += p), (a += p * p);
                        }
                        var f = t - e * e * l,
                          m = i - n * n * l,
                          v = a - r * r * l;
                        this.axisIndex =
                          f > m ? (f > v ? 0 : 2) : m > v ? 1 : 2;
                      }),
                      (r.prototype.aabbQuery = function (e, t, n) {
                        (n = n || []),
                          this.dirty && (this.sortList(), (this.dirty = !1));
                        var i = this.axisIndex,
                          r = "x";
                        1 === i && (r = "y"), 2 === i && (r = "z");
                        for (
                          var a = this.axisList,
                            o = (t.lowerBound[r], t.upperBound[r], 0);
                          o < a.length;
                          o++
                        ) {
                          var s = a[o];
                          s.aabbNeedsUpdate && s.computeAABB(),
                            s.aabb.overlaps(t) && n.push(s);
                        }
                        return n;
                      });
                  },
                  { "../collision/Broadphase": 5, "../shapes/Shape": 44 },
                ],
                13: [
                  function (e, t, n) {
                    (t.exports = s), e("./Constraint");
                    var i = e("./PointToPointConstraint"),
                      r = e("../equations/ConeEquation"),
                      a = e("../equations/RotationalEquation"),
                      o =
                        (e("../equations/ContactEquation"), e("../math/Vec3"));
                    function s(e, t, n) {
                      var s =
                          "undefined" !== typeof (n = n || {}).maxForce
                            ? n.maxForce
                            : 1e6,
                        l = n.pivotA ? n.pivotA.clone() : new o(),
                        u = n.pivotB ? n.pivotB.clone() : new o();
                      (this.axisA = n.axisA ? n.axisA.clone() : new o()),
                        (this.axisB = n.axisB ? n.axisB.clone() : new o()),
                        i.call(this, e, l, t, u, s),
                        (this.collideConnected = !!n.collideConnected),
                        (this.angle =
                          "undefined" !== typeof n.angle ? n.angle : 0);
                      var c = (this.coneEquation = new r(e, t, n)),
                        h = (this.twistEquation = new a(e, t, n));
                      (this.twistAngle =
                        "undefined" !== typeof n.twistAngle ? n.twistAngle : 0),
                        (c.maxForce = 0),
                        (c.minForce = -s),
                        (h.maxForce = 0),
                        (h.minForce = -s),
                        this.equations.push(c, h);
                    }
                    (s.prototype = new i()),
                      (s.constructor = s),
                      new o(),
                      new o(),
                      (s.prototype.update = function () {
                        var e = this.bodyA,
                          t = this.bodyB,
                          n = this.coneEquation,
                          r = this.twistEquation;
                        i.prototype.update.call(this),
                          e.vectorToWorldFrame(this.axisA, n.axisA),
                          t.vectorToWorldFrame(this.axisB, n.axisB),
                          this.axisA.tangents(r.axisA, r.axisA),
                          e.vectorToWorldFrame(r.axisA, r.axisA),
                          this.axisB.tangents(r.axisB, r.axisB),
                          t.vectorToWorldFrame(r.axisB, r.axisB),
                          (n.angle = this.angle),
                          (r.maxAngle = this.twistAngle);
                      });
                  },
                  {
                    "../equations/ConeEquation": 19,
                    "../equations/ContactEquation": 20,
                    "../equations/RotationalEquation": 23,
                    "../math/Vec3": 31,
                    "./Constraint": 14,
                    "./PointToPointConstraint": 18,
                  },
                ],
                14: [
                  function (e, t, n) {
                    t.exports = r;
                    var i = e("../utils/Utils");
                    function r(e, t, n) {
                      (n = i.defaults(n, {
                        collideConnected: !0,
                        wakeUpBodies: !0,
                      })),
                        (this.equations = []),
                        (this.bodyA = e),
                        (this.bodyB = t),
                        (this.id = r.idCounter++),
                        (this.collideConnected = n.collideConnected),
                        n.wakeUpBodies && (e && e.wakeUp(), t && t.wakeUp());
                    }
                    (r.prototype.update = function () {
                      throw new Error(
                        "method update() not implmemented in this Constraint subclass!"
                      );
                    }),
                      (r.prototype.enable = function () {
                        for (var e = this.equations, t = 0; t < e.length; t++)
                          e[t].enabled = !0;
                      }),
                      (r.prototype.disable = function () {
                        for (var e = this.equations, t = 0; t < e.length; t++)
                          e[t].enabled = !1;
                      }),
                      (r.idCounter = 0);
                  },
                  { "../utils/Utils": 54 },
                ],
                15: [
                  function (e, t, n) {
                    t.exports = a;
                    var i = e("./Constraint"),
                      r = e("../equations/ContactEquation");
                    function a(e, t, n, a) {
                      i.call(this, e, t),
                        "undefined" === typeof n &&
                          (n = e.position.distanceTo(t.position)),
                        "undefined" === typeof a && (a = 1e6),
                        (this.distance = n);
                      var o = (this.distanceEquation = new r(e, t));
                      this.equations.push(o),
                        (o.minForce = -a),
                        (o.maxForce = a);
                    }
                    (a.prototype = new i()),
                      (a.prototype.update = function () {
                        var e = this.bodyA,
                          t = this.bodyB,
                          n = this.distanceEquation,
                          i = 0.5 * this.distance,
                          r = n.ni;
                        t.position.vsub(e.position, r),
                          r.normalize(),
                          r.mult(i, n.ri),
                          r.mult(-i, n.rj);
                      });
                  },
                  { "../equations/ContactEquation": 20, "./Constraint": 14 },
                ],
                16: [
                  function (e, t, n) {
                    (t.exports = s), e("./Constraint");
                    var i = e("./PointToPointConstraint"),
                      r = e("../equations/RotationalEquation"),
                      a = e("../equations/RotationalMotorEquation"),
                      o =
                        (e("../equations/ContactEquation"), e("../math/Vec3"));
                    function s(e, t, n) {
                      var s =
                          "undefined" !== typeof (n = n || {}).maxForce
                            ? n.maxForce
                            : 1e6,
                        l = n.pivotA ? n.pivotA.clone() : new o(),
                        u = n.pivotB ? n.pivotB.clone() : new o();
                      i.call(this, e, l, t, u, s),
                        (this.axisA = n.axisA
                          ? n.axisA.clone()
                          : new o(1, 0, 0)).normalize(),
                        (this.axisB = n.axisB
                          ? n.axisB.clone()
                          : new o(1, 0, 0)).normalize();
                      var c = (this.rotationalEquation1 = new r(e, t, n)),
                        h = (this.rotationalEquation2 = new r(e, t, n)),
                        d = (this.motorEquation = new a(e, t, s));
                      (d.enabled = !1), this.equations.push(c, h, d);
                    }
                    (s.prototype = new i()),
                      (s.constructor = s),
                      (s.prototype.enableMotor = function () {
                        this.motorEquation.enabled = !0;
                      }),
                      (s.prototype.disableMotor = function () {
                        this.motorEquation.enabled = !1;
                      }),
                      (s.prototype.setMotorSpeed = function (e) {
                        this.motorEquation.targetVelocity = e;
                      }),
                      (s.prototype.setMotorMaxForce = function (e) {
                        (this.motorEquation.maxForce = e),
                          (this.motorEquation.minForce = -e);
                      });
                    var l = new o(),
                      u = new o();
                    s.prototype.update = function () {
                      var e = this.bodyA,
                        t = this.bodyB,
                        n = this.motorEquation,
                        r = this.rotationalEquation1,
                        a = this.rotationalEquation2,
                        o = l,
                        s = u,
                        c = this.axisA,
                        h = this.axisB;
                      i.prototype.update.call(this),
                        e.quaternion.vmult(c, o),
                        t.quaternion.vmult(h, s),
                        o.tangents(r.axisA, a.axisA),
                        r.axisB.copy(s),
                        a.axisB.copy(s),
                        this.motorEquation.enabled &&
                          (e.quaternion.vmult(this.axisA, n.axisA),
                          t.quaternion.vmult(this.axisB, n.axisB));
                    };
                  },
                  {
                    "../equations/ContactEquation": 20,
                    "../equations/RotationalEquation": 23,
                    "../equations/RotationalMotorEquation": 24,
                    "../math/Vec3": 31,
                    "./Constraint": 14,
                    "./PointToPointConstraint": 18,
                  },
                ],
                17: [
                  function (e, t, n) {
                    (t.exports = o), e("./Constraint");
                    var i = e("./PointToPointConstraint"),
                      r = e("../equations/RotationalEquation"),
                      a =
                        (e("../equations/RotationalMotorEquation"),
                        e("../equations/ContactEquation"),
                        e("../math/Vec3"));
                    function o(e, t, n) {
                      var o =
                          "undefined" !== typeof (n = n || {}).maxForce
                            ? n.maxForce
                            : 1e6,
                        s = new a(),
                        l = new a(),
                        u = new a();
                      e.position.vadd(t.position, u),
                        u.scale(0.5, u),
                        t.pointToLocalFrame(u, l),
                        e.pointToLocalFrame(u, s),
                        i.call(this, e, s, t, l, o),
                        (this.xA = e.vectorToLocalFrame(a.UNIT_X)),
                        (this.xB = t.vectorToLocalFrame(a.UNIT_X)),
                        (this.yA = e.vectorToLocalFrame(a.UNIT_Y)),
                        (this.yB = t.vectorToLocalFrame(a.UNIT_Y)),
                        (this.zA = e.vectorToLocalFrame(a.UNIT_Z)),
                        (this.zB = t.vectorToLocalFrame(a.UNIT_Z));
                      var c = (this.rotationalEquation1 = new r(e, t, n)),
                        h = (this.rotationalEquation2 = new r(e, t, n)),
                        d = (this.rotationalEquation3 = new r(e, t, n));
                      this.equations.push(c, h, d);
                    }
                    (o.prototype = new i()),
                      (o.constructor = o),
                      new a(),
                      new a(),
                      (o.prototype.update = function () {
                        var e = this.bodyA,
                          t = this.bodyB,
                          n = (this.motorEquation, this.rotationalEquation1),
                          r = this.rotationalEquation2,
                          a = this.rotationalEquation3;
                        i.prototype.update.call(this),
                          e.vectorToWorldFrame(this.xA, n.axisA),
                          t.vectorToWorldFrame(this.yB, n.axisB),
                          e.vectorToWorldFrame(this.yA, r.axisA),
                          t.vectorToWorldFrame(this.zB, r.axisB),
                          e.vectorToWorldFrame(this.zA, a.axisA),
                          t.vectorToWorldFrame(this.xB, a.axisB);
                      });
                  },
                  {
                    "../equations/ContactEquation": 20,
                    "../equations/RotationalEquation": 23,
                    "../equations/RotationalMotorEquation": 24,
                    "../math/Vec3": 31,
                    "./Constraint": 14,
                    "./PointToPointConstraint": 18,
                  },
                ],
                18: [
                  function (e, t, n) {
                    t.exports = o;
                    var i = e("./Constraint"),
                      r = e("../equations/ContactEquation"),
                      a = e("../math/Vec3");
                    function o(e, t, n, o, s) {
                      i.call(this, e, n),
                        (s = "undefined" !== typeof s ? s : 1e6),
                        (this.pivotA = t ? t.clone() : new a()),
                        (this.pivotB = o ? o.clone() : new a());
                      var l = (this.equationX = new r(e, n)),
                        u = (this.equationY = new r(e, n)),
                        c = (this.equationZ = new r(e, n));
                      this.equations.push(l, u, c),
                        (l.minForce = u.minForce = c.minForce = -s),
                        (l.maxForce = u.maxForce = c.maxForce = s),
                        l.ni.set(1, 0, 0),
                        u.ni.set(0, 1, 0),
                        c.ni.set(0, 0, 1);
                    }
                    (o.prototype = new i()),
                      (o.prototype.update = function () {
                        var e = this.bodyA,
                          t = this.bodyB,
                          n = this.equationX,
                          i = this.equationY,
                          r = this.equationZ;
                        e.quaternion.vmult(this.pivotA, n.ri),
                          t.quaternion.vmult(this.pivotB, n.rj),
                          i.ri.copy(n.ri),
                          i.rj.copy(n.rj),
                          r.ri.copy(n.ri),
                          r.rj.copy(n.rj);
                      });
                  },
                  {
                    "../equations/ContactEquation": 20,
                    "../math/Vec3": 31,
                    "./Constraint": 14,
                  },
                ],
                19: [
                  function (e, t, n) {
                    t.exports = a;
                    var i = e("../math/Vec3"),
                      r = (e("../math/Mat3"), e("./Equation"));
                    function a(e, t, n) {
                      var a =
                        "undefined" !== typeof (n = n || {}).maxForce
                          ? n.maxForce
                          : 1e6;
                      r.call(this, e, t, -a, a),
                        (this.axisA = n.axisA
                          ? n.axisA.clone()
                          : new i(1, 0, 0)),
                        (this.axisB = n.axisB
                          ? n.axisB.clone()
                          : new i(0, 1, 0)),
                        (this.angle =
                          "undefined" !== typeof n.angle ? n.angle : 0);
                    }
                    (a.prototype = new r()), (a.prototype.constructor = a);
                    var o = new i(),
                      s = new i();
                    a.prototype.computeB = function (e) {
                      var t = this.a,
                        n = this.b,
                        i = this.axisA,
                        r = this.axisB,
                        a = o,
                        l = s,
                        u = this.jacobianElementA,
                        c = this.jacobianElementB;
                      return (
                        i.cross(r, a),
                        r.cross(i, l),
                        u.rotational.copy(l),
                        c.rotational.copy(a),
                        -(Math.cos(this.angle) - i.dot(r)) * t -
                          this.computeGW() * n -
                          e * this.computeGiMf()
                      );
                    };
                  },
                  { "../math/Mat3": 28, "../math/Vec3": 31, "./Equation": 21 },
                ],
                20: [
                  function (e, t, n) {
                    t.exports = a;
                    var i = e("./Equation"),
                      r = e("../math/Vec3");
                    function a(e, t, n) {
                      (n = "undefined" !== typeof n ? n : 1e6),
                        i.call(this, e, t, 0, n),
                        (this.restitution = 0),
                        (this.ri = new r()),
                        (this.rj = new r()),
                        (this.ni = new r());
                    }
                    e("../math/Mat3"),
                      (a.prototype = new i()),
                      (a.prototype.constructor = a);
                    var o = new r(),
                      s = new r(),
                      l = new r();
                    a.prototype.computeB = function (e) {
                      var t = this.a,
                        n = this.b,
                        i = this.bi,
                        r = this.bj,
                        a = this.ri,
                        u = this.rj,
                        c = o,
                        h = s,
                        d = i.velocity,
                        p = i.angularVelocity,
                        f = (i.force, i.torque, r.velocity),
                        m = r.angularVelocity,
                        v = (r.force, r.torque, l),
                        g = this.jacobianElementA,
                        y = this.jacobianElementB,
                        x = this.ni;
                      a.cross(x, c),
                        u.cross(x, h),
                        x.negate(g.spatial),
                        c.negate(g.rotational),
                        y.spatial.copy(x),
                        y.rotational.copy(h),
                        v.copy(r.position),
                        v.vadd(u, v),
                        v.vsub(i.position, v),
                        v.vsub(a, v);
                      var b = x.dot(v),
                        _ = this.restitution + 1;
                      return (
                        -b * t -
                        (_ * f.dot(x) - _ * d.dot(x) + m.dot(h) - p.dot(c)) *
                          n -
                        e * this.computeGiMf()
                      );
                    };
                    var u = new r(),
                      c = new r(),
                      h = new r(),
                      d = new r(),
                      p = new r();
                    a.prototype.getImpactVelocityAlongNormal = function () {
                      var e = u,
                        t = c,
                        n = h,
                        i = d,
                        r = p;
                      return (
                        this.bi.position.vadd(this.ri, n),
                        this.bj.position.vadd(this.rj, i),
                        this.bi.getVelocityAtWorldPoint(n, e),
                        this.bj.getVelocityAtWorldPoint(i, t),
                        e.vsub(t, r),
                        this.ni.dot(r)
                      );
                    };
                  },
                  { "../math/Mat3": 28, "../math/Vec3": 31, "./Equation": 21 },
                ],
                21: [
                  function (e, t, n) {
                    t.exports = a;
                    var i = e("../math/JacobianElement"),
                      r = e("../math/Vec3");
                    function a(e, t, n, r) {
                      (this.id = a.id++),
                        (this.minForce = "undefined" === typeof n ? -1e6 : n),
                        (this.maxForce = "undefined" === typeof r ? 1e6 : r),
                        (this.bi = e),
                        (this.bj = t),
                        (this.a = 0),
                        (this.b = 0),
                        (this.eps = 0),
                        (this.jacobianElementA = new i()),
                        (this.jacobianElementB = new i()),
                        (this.enabled = !0),
                        (this.multiplier = 0),
                        this.setSpookParams(1e7, 4, 1 / 60);
                    }
                    (a.prototype.constructor = a),
                      (a.id = 0),
                      (a.prototype.setSpookParams = function (e, t, n) {
                        var i = t,
                          r = e,
                          a = n;
                        (this.a = 4 / (a * (1 + 4 * i))),
                          (this.b = (4 * i) / (1 + 4 * i)),
                          (this.eps = 4 / (a * a * r * (1 + 4 * i)));
                      }),
                      (a.prototype.computeB = function (e, t, n) {
                        var i = this.computeGW();
                        return (
                          -this.computeGq() * e - i * t - this.computeGiMf() * n
                        );
                      }),
                      (a.prototype.computeGq = function () {
                        var e = this.jacobianElementA,
                          t = this.jacobianElementB,
                          n = this.bi,
                          i = this.bj,
                          r = n.position,
                          a = i.position;
                        return e.spatial.dot(r) + t.spatial.dot(a);
                      }),
                      new r(),
                      (a.prototype.computeGW = function () {
                        var e = this.jacobianElementA,
                          t = this.jacobianElementB,
                          n = this.bi,
                          i = this.bj,
                          r = n.velocity,
                          a = i.velocity,
                          o = n.angularVelocity,
                          s = i.angularVelocity;
                        return (
                          e.multiplyVectors(r, o) + t.multiplyVectors(a, s)
                        );
                      }),
                      (a.prototype.computeGWlambda = function () {
                        var e = this.jacobianElementA,
                          t = this.jacobianElementB,
                          n = this.bi,
                          i = this.bj,
                          r = n.vlambda,
                          a = i.vlambda,
                          o = n.wlambda,
                          s = i.wlambda;
                        return (
                          e.multiplyVectors(r, o) + t.multiplyVectors(a, s)
                        );
                      });
                    var o = new r(),
                      s = new r(),
                      l = new r(),
                      u = new r();
                    a.prototype.computeGiMf = function () {
                      var e = this.jacobianElementA,
                        t = this.jacobianElementB,
                        n = this.bi,
                        i = this.bj,
                        r = n.force,
                        a = n.torque,
                        c = i.force,
                        h = i.torque,
                        d = n.invMassSolve,
                        p = i.invMassSolve;
                      return (
                        r.scale(d, o),
                        c.scale(p, s),
                        n.invInertiaWorldSolve.vmult(a, l),
                        i.invInertiaWorldSolve.vmult(h, u),
                        e.multiplyVectors(o, l) + t.multiplyVectors(s, u)
                      );
                    };
                    var c = new r();
                    a.prototype.computeGiMGt = function () {
                      var e = this.jacobianElementA,
                        t = this.jacobianElementB,
                        n = this.bi,
                        i = this.bj,
                        r = n.invMassSolve,
                        a = i.invMassSolve,
                        o = n.invInertiaWorldSolve,
                        s = i.invInertiaWorldSolve,
                        l = r + a;
                      return (
                        o.vmult(e.rotational, c),
                        (l += c.dot(e.rotational)),
                        s.vmult(t.rotational, c),
                        (l += c.dot(t.rotational))
                      );
                    };
                    var h = new r();
                    new r(),
                      new r(),
                      new r(),
                      new r(),
                      new r(),
                      (a.prototype.addToWlambda = function (e) {
                        var t = this.jacobianElementA,
                          n = this.jacobianElementB,
                          i = this.bi,
                          r = this.bj,
                          a = h;
                        i.vlambda.addScaledVector(
                          i.invMassSolve * e,
                          t.spatial,
                          i.vlambda
                        ),
                          r.vlambda.addScaledVector(
                            r.invMassSolve * e,
                            n.spatial,
                            r.vlambda
                          ),
                          i.invInertiaWorldSolve.vmult(t.rotational, a),
                          i.wlambda.addScaledVector(e, a, i.wlambda),
                          r.invInertiaWorldSolve.vmult(n.rotational, a),
                          r.wlambda.addScaledVector(e, a, r.wlambda);
                      }),
                      (a.prototype.computeC = function () {
                        return this.computeGiMGt() + this.eps;
                      });
                  },
                  { "../math/JacobianElement": 27, "../math/Vec3": 31 },
                ],
                22: [
                  function (e, t, n) {
                    t.exports = a;
                    var i = e("./Equation"),
                      r = e("../math/Vec3");
                    function a(e, t, n) {
                      i.call(this, e, t, -n, n),
                        (this.ri = new r()),
                        (this.rj = new r()),
                        (this.t = new r());
                    }
                    e("../math/Mat3"),
                      (a.prototype = new i()),
                      (a.prototype.constructor = a);
                    var o = new r(),
                      s = new r();
                    a.prototype.computeB = function (e) {
                      this.a;
                      var t = this.b,
                        n = (this.bi, this.bj, this.ri),
                        i = this.rj,
                        r = o,
                        a = s,
                        l = this.t;
                      n.cross(l, r), i.cross(l, a);
                      var u = this.jacobianElementA,
                        c = this.jacobianElementB;
                      return (
                        l.negate(u.spatial),
                        r.negate(u.rotational),
                        c.spatial.copy(l),
                        c.rotational.copy(a),
                        -this.computeGW() * t - e * this.computeGiMf()
                      );
                    };
                  },
                  { "../math/Mat3": 28, "../math/Vec3": 31, "./Equation": 21 },
                ],
                23: [
                  function (e, t, n) {
                    t.exports = a;
                    var i = e("../math/Vec3"),
                      r = (e("../math/Mat3"), e("./Equation"));
                    function a(e, t, n) {
                      var a =
                        "undefined" !== typeof (n = n || {}).maxForce
                          ? n.maxForce
                          : 1e6;
                      r.call(this, e, t, -a, a),
                        (this.axisA = n.axisA
                          ? n.axisA.clone()
                          : new i(1, 0, 0)),
                        (this.axisB = n.axisB
                          ? n.axisB.clone()
                          : new i(0, 1, 0)),
                        (this.maxAngle = Math.PI / 2);
                    }
                    (a.prototype = new r()), (a.prototype.constructor = a);
                    var o = new i(),
                      s = new i();
                    a.prototype.computeB = function (e) {
                      var t = this.a,
                        n = this.b,
                        i = this.axisA,
                        r = this.axisB,
                        a = o,
                        l = s,
                        u = this.jacobianElementA,
                        c = this.jacobianElementB;
                      return (
                        i.cross(r, a),
                        r.cross(i, l),
                        u.rotational.copy(l),
                        c.rotational.copy(a),
                        -(Math.cos(this.maxAngle) - i.dot(r)) * t -
                          this.computeGW() * n -
                          e * this.computeGiMf()
                      );
                    };
                  },
                  { "../math/Mat3": 28, "../math/Vec3": 31, "./Equation": 21 },
                ],
                24: [
                  function (e, t, n) {
                    t.exports = a;
                    var i = e("../math/Vec3"),
                      r = (e("../math/Mat3"), e("./Equation"));
                    function a(e, t, n) {
                      (n = "undefined" !== typeof n ? n : 1e6),
                        r.call(this, e, t, -n, n),
                        (this.axisA = new i()),
                        (this.axisB = new i()),
                        (this.targetVelocity = 0);
                    }
                    (a.prototype = new r()),
                      (a.prototype.constructor = a),
                      (a.prototype.computeB = function (e) {
                        this.a;
                        var t = this.b,
                          n = (this.bi, this.bj, this.axisA),
                          i = this.axisB,
                          r = this.jacobianElementA,
                          a = this.jacobianElementB;
                        return (
                          r.rotational.copy(n),
                          i.negate(a.rotational),
                          -(this.computeGW() - this.targetVelocity) * t -
                            e * this.computeGiMf()
                        );
                      });
                  },
                  { "../math/Mat3": 28, "../math/Vec3": 31, "./Equation": 21 },
                ],
                25: [
                  function (e, t, n) {
                    var i = e("../utils/Utils");
                    function r(e, t, n) {
                      (n = i.defaults(n, {
                        friction: 0.3,
                        restitution: 0.3,
                        contactEquationStiffness: 1e7,
                        contactEquationRelaxation: 3,
                        frictionEquationStiffness: 1e7,
                        frictionEquationRelaxation: 3,
                      })),
                        (this.id = r.idCounter++),
                        (this.materials = [e, t]),
                        (this.friction = n.friction),
                        (this.restitution = n.restitution),
                        (this.contactEquationStiffness =
                          n.contactEquationStiffness),
                        (this.contactEquationRelaxation =
                          n.contactEquationRelaxation),
                        (this.frictionEquationStiffness =
                          n.frictionEquationStiffness),
                        (this.frictionEquationRelaxation =
                          n.frictionEquationRelaxation);
                    }
                    (t.exports = r), (r.idCounter = 0);
                  },
                  { "../utils/Utils": 54 },
                ],
                26: [
                  function (e, t, n) {
                    function i(e) {
                      var t = "";
                      "string" === typeof (e = e || {})
                        ? ((t = e), (e = {}))
                        : "object" === typeof e && (t = ""),
                        (this.name = t),
                        (this.id = i.idCounter++),
                        (this.friction =
                          "undefined" !== typeof e.friction ? e.friction : -1),
                        (this.restitution =
                          "undefined" !== typeof e.restitution
                            ? e.restitution
                            : -1);
                    }
                    (t.exports = i), (i.idCounter = 0);
                  },
                  {},
                ],
                27: [
                  function (e, t, n) {
                    t.exports = r;
                    var i = e("./Vec3");
                    function r() {
                      (this.spatial = new i()), (this.rotational = new i());
                    }
                    (r.prototype.multiplyElement = function (e) {
                      return (
                        e.spatial.dot(this.spatial) +
                        e.rotational.dot(this.rotational)
                      );
                    }),
                      (r.prototype.multiplyVectors = function (e, t) {
                        return e.dot(this.spatial) + t.dot(this.rotational);
                      });
                  },
                  { "./Vec3": 31 },
                ],
                28: [
                  function (e, t, n) {
                    t.exports = r;
                    var i = e("./Vec3");
                    function r(e) {
                      this.elements = e || [0, 0, 0, 0, 0, 0, 0, 0, 0];
                    }
                    (r.prototype.identity = function () {
                      var e = this.elements;
                      (e[0] = 1),
                        (e[1] = 0),
                        (e[2] = 0),
                        (e[3] = 0),
                        (e[4] = 1),
                        (e[5] = 0),
                        (e[6] = 0),
                        (e[7] = 0),
                        (e[8] = 1);
                    }),
                      (r.prototype.setZero = function () {
                        var e = this.elements;
                        (e[0] = 0),
                          (e[1] = 0),
                          (e[2] = 0),
                          (e[3] = 0),
                          (e[4] = 0),
                          (e[5] = 0),
                          (e[6] = 0),
                          (e[7] = 0),
                          (e[8] = 0);
                      }),
                      (r.prototype.setTrace = function (e) {
                        var t = this.elements;
                        (t[0] = e.x), (t[4] = e.y), (t[8] = e.z);
                      }),
                      (r.prototype.getTrace = function (e) {
                        e = e || new i();
                        var t = this.elements;
                        (e.x = t[0]), (e.y = t[4]), (e.z = t[8]);
                      }),
                      (r.prototype.vmult = function (e, t) {
                        t = t || new i();
                        var n = this.elements,
                          r = e.x,
                          a = e.y,
                          o = e.z;
                        return (
                          (t.x = n[0] * r + n[1] * a + n[2] * o),
                          (t.y = n[3] * r + n[4] * a + n[5] * o),
                          (t.z = n[6] * r + n[7] * a + n[8] * o),
                          t
                        );
                      }),
                      (r.prototype.smult = function (e) {
                        for (var t = 0; t < this.elements.length; t++)
                          this.elements[t] *= e;
                      }),
                      (r.prototype.mmult = function (e, t) {
                        for (var n = t || new r(), i = 0; i < 3; i++)
                          for (var a = 0; a < 3; a++) {
                            for (var o = 0, s = 0; s < 3; s++)
                              o +=
                                e.elements[i + 3 * s] *
                                this.elements[s + 3 * a];
                            n.elements[i + 3 * a] = o;
                          }
                        return n;
                      }),
                      (r.prototype.scale = function (e, t) {
                        t = t || new r();
                        for (
                          var n = this.elements, i = t.elements, a = 0;
                          3 !== a;
                          a++
                        )
                          (i[3 * a + 0] = e.x * n[3 * a + 0]),
                            (i[3 * a + 1] = e.y * n[3 * a + 1]),
                            (i[3 * a + 2] = e.z * n[3 * a + 2]);
                        return t;
                      }),
                      (r.prototype.solve = function (e, t) {
                        t = t || new i();
                        for (var n, r = [], a = 0; a < 12; a++) r.push(0);
                        for (a = 0; a < 3; a++)
                          for (n = 0; n < 3; n++)
                            r[a + 4 * n] = this.elements[a + 3 * n];
                        (r[3] = e.x), (r[7] = e.y), (r[11] = e.z);
                        var o,
                          s,
                          l = 3,
                          u = l;
                        do {
                          if (0 === r[(a = u - l) + 4 * a])
                            for (n = a + 1; n < u; n++)
                              if (0 !== r[a + 4 * n]) {
                                o = 4;
                                do {
                                  r[(s = 4 - o) + 4 * a] += r[s + 4 * n];
                                } while (--o);
                                break;
                              }
                          if (0 !== r[a + 4 * a])
                            for (n = a + 1; n < u; n++) {
                              var c = r[a + 4 * n] / r[a + 4 * a];
                              o = 4;
                              do {
                                r[(s = 4 - o) + 4 * n] =
                                  s <= a ? 0 : r[s + 4 * n] - r[s + 4 * a] * c;
                              } while (--o);
                            }
                        } while (--l);
                        if (
                          ((t.z = r[11] / r[10]),
                          (t.y = (r[7] - r[6] * t.z) / r[5]),
                          (t.x = (r[3] - r[2] * t.z - r[1] * t.y) / r[0]),
                          isNaN(t.x) ||
                            isNaN(t.y) ||
                            isNaN(t.z) ||
                            t.x === 1 / 0 ||
                            t.y === 1 / 0 ||
                            t.z === 1 / 0)
                        )
                          throw (
                            "Could not solve equation! Got x=[" +
                            t.toString() +
                            "], b=[" +
                            e.toString() +
                            "], A=[" +
                            this.toString() +
                            "]"
                          );
                        return t;
                      }),
                      (r.prototype.e = function (e, t, n) {
                        if (void 0 === n) return this.elements[t + 3 * e];
                        this.elements[t + 3 * e] = n;
                      }),
                      (r.prototype.copy = function (e) {
                        for (var t = 0; t < e.elements.length; t++)
                          this.elements[t] = e.elements[t];
                        return this;
                      }),
                      (r.prototype.toString = function () {
                        for (var e = "", t = 0; t < 9; t++)
                          e += this.elements[t] + ",";
                        return e;
                      }),
                      (r.prototype.reverse = function (e) {
                        e = e || new r();
                        for (var t, n = [], i = 0; i < 18; i++) n.push(0);
                        for (i = 0; i < 3; i++)
                          for (t = 0; t < 3; t++)
                            n[i + 6 * t] = this.elements[i + 3 * t];
                        (n[3] = 1),
                          (n[9] = 0),
                          (n[15] = 0),
                          (n[4] = 0),
                          (n[10] = 1),
                          (n[16] = 0),
                          (n[5] = 0),
                          (n[11] = 0),
                          (n[17] = 1);
                        var a,
                          o,
                          s = 3,
                          l = s;
                        do {
                          if (0 === n[(i = l - s) + 6 * i])
                            for (t = i + 1; t < l; t++)
                              if (0 !== n[i + 6 * t]) {
                                a = 6;
                                do {
                                  n[(o = 6 - a) + 6 * i] += n[o + 6 * t];
                                } while (--a);
                                break;
                              }
                          if (0 !== n[i + 6 * i])
                            for (t = i + 1; t < l; t++) {
                              var u = n[i + 6 * t] / n[i + 6 * i];
                              a = 6;
                              do {
                                n[(o = 6 - a) + 6 * t] =
                                  o <= i ? 0 : n[o + 6 * t] - n[o + 6 * i] * u;
                              } while (--a);
                            }
                        } while (--s);
                        i = 2;
                        do {
                          t = i - 1;
                          do {
                            (u = n[i + 6 * t] / n[i + 6 * i]), (a = 6);
                            do {
                              n[(o = 6 - a) + 6 * t] =
                                n[o + 6 * t] - n[o + 6 * i] * u;
                            } while (--a);
                          } while (t--);
                        } while (--i);
                        i = 2;
                        do {
                          (u = 1 / n[i + 6 * i]), (a = 6);
                          do {
                            n[(o = 6 - a) + 6 * i] = n[o + 6 * i] * u;
                          } while (--a);
                        } while (i--);
                        i = 2;
                        do {
                          t = 2;
                          do {
                            if (
                              ((o = n[3 + t + 6 * i]), isNaN(o) || o === 1 / 0)
                            )
                              throw (
                                "Could not reverse! A=[" + this.toString() + "]"
                              );
                            e.e(i, t, o);
                          } while (t--);
                        } while (i--);
                        return e;
                      }),
                      (r.prototype.setRotationFromQuaternion = function (e) {
                        var t = e.x,
                          n = e.y,
                          i = e.z,
                          r = e.w,
                          a = t + t,
                          o = n + n,
                          s = i + i,
                          l = t * a,
                          u = t * o,
                          c = t * s,
                          h = n * o,
                          d = n * s,
                          p = i * s,
                          f = r * a,
                          m = r * o,
                          v = r * s,
                          g = this.elements;
                        return (
                          (g[0] = 1 - (h + p)),
                          (g[1] = u - v),
                          (g[2] = c + m),
                          (g[3] = u + v),
                          (g[4] = 1 - (l + p)),
                          (g[5] = d - f),
                          (g[6] = c - m),
                          (g[7] = d + f),
                          (g[8] = 1 - (l + h)),
                          this
                        );
                      }),
                      (r.prototype.transpose = function (e) {
                        for (
                          var t = (e = e || new r()).elements,
                            n = this.elements,
                            i = 0;
                          3 !== i;
                          i++
                        )
                          for (var a = 0; 3 !== a; a++)
                            t[3 * i + a] = n[3 * a + i];
                        return e;
                      });
                  },
                  { "./Vec3": 31 },
                ],
                29: [
                  function (e, t, n) {
                    t.exports = r;
                    var i = e("./Vec3");
                    function r(e, t, n, i) {
                      (this.x = void 0 !== e ? e : 0),
                        (this.y = void 0 !== t ? t : 0),
                        (this.z = void 0 !== n ? n : 0),
                        (this.w = void 0 !== i ? i : 1);
                    }
                    (r.prototype.set = function (e, t, n, i) {
                      return (
                        (this.x = e),
                        (this.y = t),
                        (this.z = n),
                        (this.w = i),
                        this
                      );
                    }),
                      (r.prototype.toString = function () {
                        return (
                          this.x + "," + this.y + "," + this.z + "," + this.w
                        );
                      }),
                      (r.prototype.toArray = function () {
                        return [this.x, this.y, this.z, this.w];
                      }),
                      (r.prototype.setFromAxisAngle = function (e, t) {
                        var n = Math.sin(0.5 * t);
                        return (
                          (this.x = e.x * n),
                          (this.y = e.y * n),
                          (this.z = e.z * n),
                          (this.w = Math.cos(0.5 * t)),
                          this
                        );
                      }),
                      (r.prototype.toAxisAngle = function (e) {
                        (e = e || new i()), this.normalize();
                        var t = 2 * Math.acos(this.w),
                          n = Math.sqrt(1 - this.w * this.w);
                        return (
                          n < 0.001
                            ? ((e.x = this.x), (e.y = this.y), (e.z = this.z))
                            : ((e.x = this.x / n),
                              (e.y = this.y / n),
                              (e.z = this.z / n)),
                          [e, t]
                        );
                      });
                    var a = new i(),
                      o = new i();
                    (r.prototype.setFromVectors = function (e, t) {
                      if (e.isAntiparallelTo(t)) {
                        var n = a,
                          i = o;
                        e.tangents(n, i), this.setFromAxisAngle(n, Math.PI);
                      } else {
                        var r = e.cross(t);
                        (this.x = r.x),
                          (this.y = r.y),
                          (this.z = r.z),
                          (this.w =
                            Math.sqrt(
                              Math.pow(e.norm(), 2) * Math.pow(t.norm(), 2)
                            ) + e.dot(t)),
                          this.normalize();
                      }
                      return this;
                    }),
                      new i(),
                      new i(),
                      new i(),
                      (r.prototype.mult = function (e, t) {
                        t = t || new r();
                        var n = this.x,
                          i = this.y,
                          a = this.z,
                          o = this.w,
                          s = e.x,
                          l = e.y,
                          u = e.z,
                          c = e.w;
                        return (
                          (t.x = n * c + o * s + i * u - a * l),
                          (t.y = i * c + o * l + a * s - n * u),
                          (t.z = a * c + o * u + n * l - i * s),
                          (t.w = o * c - n * s - i * l - a * u),
                          t
                        );
                      }),
                      (r.prototype.inverse = function (e) {
                        var t = this.x,
                          n = this.y,
                          i = this.z,
                          a = this.w;
                        (e = e || new r()), this.conjugate(e);
                        var o = 1 / (t * t + n * n + i * i + a * a);
                        return (
                          (e.x *= o), (e.y *= o), (e.z *= o), (e.w *= o), e
                        );
                      }),
                      (r.prototype.conjugate = function (e) {
                        return (
                          ((e = e || new r()).x = -this.x),
                          (e.y = -this.y),
                          (e.z = -this.z),
                          (e.w = this.w),
                          e
                        );
                      }),
                      (r.prototype.normalize = function () {
                        var e = Math.sqrt(
                          this.x * this.x +
                            this.y * this.y +
                            this.z * this.z +
                            this.w * this.w
                        );
                        return (
                          0 === e
                            ? ((this.x = 0),
                              (this.y = 0),
                              (this.z = 0),
                              (this.w = 0))
                            : ((e = 1 / e),
                              (this.x *= e),
                              (this.y *= e),
                              (this.z *= e),
                              (this.w *= e)),
                          this
                        );
                      }),
                      (r.prototype.normalizeFast = function () {
                        var e =
                          (3 -
                            (this.x * this.x +
                              this.y * this.y +
                              this.z * this.z +
                              this.w * this.w)) /
                          2;
                        return (
                          0 === e
                            ? ((this.x = 0),
                              (this.y = 0),
                              (this.z = 0),
                              (this.w = 0))
                            : ((this.x *= e),
                              (this.y *= e),
                              (this.z *= e),
                              (this.w *= e)),
                          this
                        );
                      }),
                      (r.prototype.vmult = function (e, t) {
                        t = t || new i();
                        var n = e.x,
                          r = e.y,
                          a = e.z,
                          o = this.x,
                          s = this.y,
                          l = this.z,
                          u = this.w,
                          c = u * n + s * a - l * r,
                          h = u * r + l * n - o * a,
                          d = u * a + o * r - s * n,
                          p = -o * n - s * r - l * a;
                        return (
                          (t.x = c * u + p * -o + h * -l - d * -s),
                          (t.y = h * u + p * -s + d * -o - c * -l),
                          (t.z = d * u + p * -l + c * -s - h * -o),
                          t
                        );
                      }),
                      (r.prototype.copy = function (e) {
                        return (
                          (this.x = e.x),
                          (this.y = e.y),
                          (this.z = e.z),
                          (this.w = e.w),
                          this
                        );
                      }),
                      (r.prototype.toEuler = function (e, t) {
                        var n, i, r;
                        t = t || "YZX";
                        var a = this.x,
                          o = this.y,
                          s = this.z,
                          l = this.w;
                        switch (t) {
                          case "YZX":
                            var u = a * o + s * l;
                            if (
                              (u > 0.499 &&
                                ((n = 2 * Math.atan2(a, l)),
                                (i = Math.PI / 2),
                                (r = 0)),
                              u < -0.499 &&
                                ((n = -2 * Math.atan2(a, l)),
                                (i = -Math.PI / 2),
                                (r = 0)),
                              isNaN(n))
                            ) {
                              var c = a * a,
                                h = o * o,
                                d = s * s;
                              (n = Math.atan2(
                                2 * o * l - 2 * a * s,
                                1 - 2 * h - 2 * d
                              )),
                                (i = Math.asin(2 * u)),
                                (r = Math.atan2(
                                  2 * a * l - 2 * o * s,
                                  1 - 2 * c - 2 * d
                                ));
                            }
                            break;
                          default:
                            throw new Error(
                              "Euler order " + t + " not supported yet."
                            );
                        }
                        (e.y = n), (e.z = i), (e.x = r);
                      }),
                      (r.prototype.setFromEuler = function (e, t, n, i) {
                        i = i || "XYZ";
                        var r = Math.cos(e / 2),
                          a = Math.cos(t / 2),
                          o = Math.cos(n / 2),
                          s = Math.sin(e / 2),
                          l = Math.sin(t / 2),
                          u = Math.sin(n / 2);
                        return (
                          "XYZ" === i
                            ? ((this.x = s * a * o + r * l * u),
                              (this.y = r * l * o - s * a * u),
                              (this.z = r * a * u + s * l * o),
                              (this.w = r * a * o - s * l * u))
                            : "YXZ" === i
                            ? ((this.x = s * a * o + r * l * u),
                              (this.y = r * l * o - s * a * u),
                              (this.z = r * a * u - s * l * o),
                              (this.w = r * a * o + s * l * u))
                            : "ZXY" === i
                            ? ((this.x = s * a * o - r * l * u),
                              (this.y = r * l * o + s * a * u),
                              (this.z = r * a * u + s * l * o),
                              (this.w = r * a * o - s * l * u))
                            : "ZYX" === i
                            ? ((this.x = s * a * o - r * l * u),
                              (this.y = r * l * o + s * a * u),
                              (this.z = r * a * u - s * l * o),
                              (this.w = r * a * o + s * l * u))
                            : "YZX" === i
                            ? ((this.x = s * a * o + r * l * u),
                              (this.y = r * l * o + s * a * u),
                              (this.z = r * a * u - s * l * o),
                              (this.w = r * a * o - s * l * u))
                            : "XZY" === i &&
                              ((this.x = s * a * o - r * l * u),
                              (this.y = r * l * o - s * a * u),
                              (this.z = r * a * u + s * l * o),
                              (this.w = r * a * o + s * l * u)),
                          this
                        );
                      }),
                      (r.prototype.clone = function () {
                        return new r(this.x, this.y, this.z, this.w);
                      }),
                      (r.prototype.slerp = function (e, t, n) {
                        n = n || new r();
                        var i,
                          a,
                          o,
                          s,
                          l,
                          u = this.x,
                          c = this.y,
                          h = this.z,
                          d = this.w,
                          p = e.x,
                          f = e.y,
                          m = e.z,
                          v = e.w;
                        return (
                          (a = u * p + c * f + h * m + d * v) < 0 &&
                            ((a = -a), (p = -p), (f = -f), (m = -m), (v = -v)),
                          1 - a > 1e-6
                            ? ((i = Math.acos(a)),
                              (o = Math.sin(i)),
                              (s = Math.sin((1 - t) * i) / o),
                              (l = Math.sin(t * i) / o))
                            : ((s = 1 - t), (l = t)),
                          (n.x = s * u + l * p),
                          (n.y = s * c + l * f),
                          (n.z = s * h + l * m),
                          (n.w = s * d + l * v),
                          n
                        );
                      }),
                      (r.prototype.integrate = function (e, t, n, i) {
                        i = i || new r();
                        var a = e.x * n.x,
                          o = e.y * n.y,
                          s = e.z * n.z,
                          l = this.x,
                          u = this.y,
                          c = this.z,
                          h = this.w,
                          d = 0.5 * t;
                        return (
                          (i.x += d * (a * h + o * c - s * u)),
                          (i.y += d * (o * h + s * l - a * c)),
                          (i.z += d * (s * h + a * u - o * l)),
                          (i.w += d * (-a * l - o * u - s * c)),
                          i
                        );
                      });
                  },
                  { "./Vec3": 31 },
                ],
                30: [
                  function (e, t, n) {
                    var i = e("./Vec3"),
                      r = e("./Quaternion");
                    function a(e) {
                      (e = e || {}),
                        (this.position = new i()),
                        e.position && this.position.copy(e.position),
                        (this.quaternion = new r()),
                        e.quaternion && this.quaternion.copy(e.quaternion);
                    }
                    t.exports = a;
                    var o = new r();
                    (a.pointToLocalFrame = function (e, t, n, r) {
                      return (
                        (r = r || new i()),
                        n.vsub(e, r),
                        t.conjugate(o),
                        o.vmult(r, r),
                        r
                      );
                    }),
                      (a.prototype.pointToLocal = function (e, t) {
                        return a.pointToLocalFrame(
                          this.position,
                          this.quaternion,
                          e,
                          t
                        );
                      }),
                      (a.pointToWorldFrame = function (e, t, n, r) {
                        return (
                          (r = r || new i()), t.vmult(n, r), r.vadd(e, r), r
                        );
                      }),
                      (a.prototype.pointToWorld = function (e, t) {
                        return a.pointToWorldFrame(
                          this.position,
                          this.quaternion,
                          e,
                          t
                        );
                      }),
                      (a.prototype.vectorToWorldFrame = function (e, t) {
                        return (
                          (t = t || new i()), this.quaternion.vmult(e, t), t
                        );
                      }),
                      (a.vectorToWorldFrame = function (e, t, n) {
                        return e.vmult(t, n), n;
                      }),
                      (a.vectorToLocalFrame = function (e, t, n, r) {
                        return (
                          (r = r || new i()),
                          (t.w *= -1),
                          t.vmult(n, r),
                          (t.w *= -1),
                          r
                        );
                      });
                  },
                  { "./Quaternion": 29, "./Vec3": 31 },
                ],
                31: [
                  function (e, t, n) {
                    t.exports = r;
                    var i = e("./Mat3");
                    function r(e, t, n) {
                      (this.x = e || 0), (this.y = t || 0), (this.z = n || 0);
                    }
                    (r.ZERO = new r(0, 0, 0)),
                      (r.UNIT_X = new r(1, 0, 0)),
                      (r.UNIT_Y = new r(0, 1, 0)),
                      (r.UNIT_Z = new r(0, 0, 1)),
                      (r.prototype.cross = function (e, t) {
                        var n = e.x,
                          i = e.y,
                          a = e.z,
                          o = this.x,
                          s = this.y,
                          l = this.z;
                        return (
                          ((t = t || new r()).x = s * a - l * i),
                          (t.y = l * n - o * a),
                          (t.z = o * i - s * n),
                          t
                        );
                      }),
                      (r.prototype.set = function (e, t, n) {
                        return (this.x = e), (this.y = t), (this.z = n), this;
                      }),
                      (r.prototype.setZero = function () {
                        this.x = this.y = this.z = 0;
                      }),
                      (r.prototype.vadd = function (e, t) {
                        if (!t)
                          return new r(
                            this.x + e.x,
                            this.y + e.y,
                            this.z + e.z
                          );
                        (t.x = e.x + this.x),
                          (t.y = e.y + this.y),
                          (t.z = e.z + this.z);
                      }),
                      (r.prototype.vsub = function (e, t) {
                        if (!t)
                          return new r(
                            this.x - e.x,
                            this.y - e.y,
                            this.z - e.z
                          );
                        (t.x = this.x - e.x),
                          (t.y = this.y - e.y),
                          (t.z = this.z - e.z);
                      }),
                      (r.prototype.crossmat = function () {
                        return new i([
                          0,
                          -this.z,
                          this.y,
                          this.z,
                          0,
                          -this.x,
                          -this.y,
                          this.x,
                          0,
                        ]);
                      }),
                      (r.prototype.normalize = function () {
                        var e = this.x,
                          t = this.y,
                          n = this.z,
                          i = Math.sqrt(e * e + t * t + n * n);
                        if (i > 0) {
                          var r = 1 / i;
                          (this.x *= r), (this.y *= r), (this.z *= r);
                        } else (this.x = 0), (this.y = 0), (this.z = 0);
                        return i;
                      }),
                      (r.prototype.unit = function (e) {
                        e = e || new r();
                        var t = this.x,
                          n = this.y,
                          i = this.z,
                          a = Math.sqrt(t * t + n * n + i * i);
                        return (
                          a > 0
                            ? ((a = 1 / a),
                              (e.x = t * a),
                              (e.y = n * a),
                              (e.z = i * a))
                            : ((e.x = 1), (e.y = 0), (e.z = 0)),
                          e
                        );
                      }),
                      (r.prototype.norm = function () {
                        var e = this.x,
                          t = this.y,
                          n = this.z;
                        return Math.sqrt(e * e + t * t + n * n);
                      }),
                      (r.prototype.length = r.prototype.norm),
                      (r.prototype.norm2 = function () {
                        return this.dot(this);
                      }),
                      (r.prototype.lengthSquared = r.prototype.norm2),
                      (r.prototype.distanceTo = function (e) {
                        var t = this.x,
                          n = this.y,
                          i = this.z,
                          r = e.x,
                          a = e.y,
                          o = e.z;
                        return Math.sqrt(
                          (r - t) * (r - t) +
                            (a - n) * (a - n) +
                            (o - i) * (o - i)
                        );
                      }),
                      (r.prototype.distanceSquared = function (e) {
                        var t = this.x,
                          n = this.y,
                          i = this.z,
                          r = e.x,
                          a = e.y,
                          o = e.z;
                        return (
                          (r - t) * (r - t) +
                          (a - n) * (a - n) +
                          (o - i) * (o - i)
                        );
                      }),
                      (r.prototype.mult = function (e, t) {
                        t = t || new r();
                        var n = this.x,
                          i = this.y,
                          a = this.z;
                        return (t.x = e * n), (t.y = e * i), (t.z = e * a), t;
                      }),
                      (r.prototype.vmul = function (e, t) {
                        return (
                          ((t = t || new r()).x = e.x * this.x),
                          (t.y = e.y * this.y),
                          (t.z = e.z * this.z),
                          t
                        );
                      }),
                      (r.prototype.scale = r.prototype.mult),
                      (r.prototype.addScaledVector = function (e, t, n) {
                        return (
                          ((n = n || new r()).x = this.x + e * t.x),
                          (n.y = this.y + e * t.y),
                          (n.z = this.z + e * t.z),
                          n
                        );
                      }),
                      (r.prototype.dot = function (e) {
                        return this.x * e.x + this.y * e.y + this.z * e.z;
                      }),
                      (r.prototype.isZero = function () {
                        return 0 === this.x && 0 === this.y && 0 === this.z;
                      }),
                      (r.prototype.negate = function (e) {
                        return (
                          ((e = e || new r()).x = -this.x),
                          (e.y = -this.y),
                          (e.z = -this.z),
                          e
                        );
                      });
                    var a = new r(),
                      o = new r();
                    (r.prototype.tangents = function (e, t) {
                      var n = this.norm();
                      if (n > 0) {
                        var i = a,
                          r = 1 / n;
                        i.set(this.x * r, this.y * r, this.z * r);
                        var s = o;
                        Math.abs(i.x) < 0.9
                          ? (s.set(1, 0, 0), i.cross(s, e))
                          : (s.set(0, 1, 0), i.cross(s, e)),
                          i.cross(e, t);
                      } else e.set(1, 0, 0), t.set(0, 1, 0);
                    }),
                      (r.prototype.toString = function () {
                        return this.x + "," + this.y + "," + this.z;
                      }),
                      (r.prototype.toArray = function () {
                        return [this.x, this.y, this.z];
                      }),
                      (r.prototype.copy = function (e) {
                        return (
                          (this.x = e.x), (this.y = e.y), (this.z = e.z), this
                        );
                      }),
                      (r.prototype.lerp = function (e, t, n) {
                        var i = this.x,
                          r = this.y,
                          a = this.z;
                        (n.x = i + (e.x - i) * t),
                          (n.y = r + (e.y - r) * t),
                          (n.z = a + (e.z - a) * t);
                      }),
                      (r.prototype.almostEquals = function (e, t) {
                        return (
                          void 0 === t && (t = 1e-6),
                          !(
                            Math.abs(this.x - e.x) > t ||
                            Math.abs(this.y - e.y) > t ||
                            Math.abs(this.z - e.z) > t
                          )
                        );
                      }),
                      (r.prototype.almostZero = function (e) {
                        return (
                          void 0 === e && (e = 1e-6),
                          !(
                            Math.abs(this.x) > e ||
                            Math.abs(this.y) > e ||
                            Math.abs(this.z) > e
                          )
                        );
                      });
                    var s = new r();
                    (r.prototype.isAntiparallelTo = function (e, t) {
                      return this.negate(s), s.almostEquals(e, t);
                    }),
                      (r.prototype.clone = function () {
                        return new r(this.x, this.y, this.z);
                      });
                  },
                  { "./Mat3": 28 },
                ],
                32: [
                  function (e, t, n) {
                    t.exports = u;
                    var i = e("../utils/EventTarget"),
                      r = (e("../shapes/Shape"), e("../math/Vec3")),
                      a = e("../math/Mat3"),
                      o = e("../math/Quaternion"),
                      s = (e("../material/Material"), e("../collision/AABB")),
                      l = e("../shapes/Box");
                    function u(e) {
                      (e = e || {}),
                        i.apply(this),
                        (this.id = u.idCounter++),
                        (this.world = null),
                        (this.preStep = null),
                        (this.postStep = null),
                        (this.vlambda = new r()),
                        (this.collisionFilterGroup =
                          "number" === typeof e.collisionFilterGroup
                            ? e.collisionFilterGroup
                            : 1),
                        (this.collisionFilterMask =
                          "number" === typeof e.collisionFilterMask
                            ? e.collisionFilterMask
                            : -1),
                        (this.collisionResponse = !0),
                        (this.position = new r()),
                        (this.previousPosition = new r()),
                        (this.interpolatedPosition = new r()),
                        (this.initPosition = new r()),
                        e.position &&
                          (this.position.copy(e.position),
                          this.previousPosition.copy(e.position),
                          this.interpolatedPosition.copy(e.position),
                          this.initPosition.copy(e.position)),
                        (this.velocity = new r()),
                        e.velocity && this.velocity.copy(e.velocity),
                        (this.initVelocity = new r()),
                        (this.force = new r());
                      var t = "number" === typeof e.mass ? e.mass : 0;
                      (this.mass = t),
                        (this.invMass = t > 0 ? 1 / t : 0),
                        (this.material = e.material || null),
                        (this.linearDamping =
                          "number" === typeof e.linearDamping
                            ? e.linearDamping
                            : 0.01),
                        (this.type = t <= 0 ? u.STATIC : u.DYNAMIC),
                        typeof e.type === typeof u.STATIC &&
                          (this.type = e.type),
                        (this.allowSleep =
                          "undefined" === typeof e.allowSleep || e.allowSleep),
                        (this.sleepState = 0),
                        (this.sleepSpeedLimit =
                          "undefined" !== typeof e.sleepSpeedLimit
                            ? e.sleepSpeedLimit
                            : 0.03),
                        (this.sleepTimeLimit =
                          "undefined" !== typeof e.sleepTimeLimit
                            ? e.sleepTimeLimit
                            : 1),
                        (this.timeLastSleepy = 0),
                        (this._wakeUpAfterNarrowphase = !1),
                        (this.torque = new r()),
                        (this.quaternion = new o()),
                        (this.initQuaternion = new o()),
                        (this.previousQuaternion = new o()),
                        (this.interpolatedQuaternion = new o()),
                        e.quaternion &&
                          (this.quaternion.copy(e.quaternion),
                          this.initQuaternion.copy(e.quaternion),
                          this.previousQuaternion.copy(e.quaternion),
                          this.interpolatedQuaternion.copy(e.quaternion)),
                        (this.angularVelocity = new r()),
                        e.angularVelocity &&
                          this.angularVelocity.copy(e.angularVelocity),
                        (this.initAngularVelocity = new r()),
                        (this.shapes = []),
                        (this.shapeOffsets = []),
                        (this.shapeOrientations = []),
                        (this.inertia = new r()),
                        (this.invInertia = new r()),
                        (this.invInertiaWorld = new a()),
                        (this.invMassSolve = 0),
                        (this.invInertiaSolve = new r()),
                        (this.invInertiaWorldSolve = new a()),
                        (this.fixedRotation =
                          "undefined" !== typeof e.fixedRotation &&
                          e.fixedRotation),
                        (this.angularDamping =
                          "undefined" !== typeof e.angularDamping
                            ? e.angularDamping
                            : 0.01),
                        (this.linearFactor = new r(1, 1, 1)),
                        e.linearFactor &&
                          this.linearFactor.copy(e.linearFactor),
                        (this.angularFactor = new r(1, 1, 1)),
                        e.angularFactor &&
                          this.angularFactor.copy(e.angularFactor),
                        (this.aabb = new s()),
                        (this.aabbNeedsUpdate = !0),
                        (this.boundingRadius = 0),
                        (this.wlambda = new r()),
                        e.shape && this.addShape(e.shape),
                        this.updateMassProperties();
                    }
                    (u.prototype = new i()),
                      (u.prototype.constructor = u),
                      (u.COLLIDE_EVENT_NAME = "collide"),
                      (u.DYNAMIC = 1),
                      (u.STATIC = 2),
                      (u.KINEMATIC = 4),
                      (u.AWAKE = 0),
                      (u.SLEEPY = 1),
                      (u.SLEEPING = 2),
                      (u.idCounter = 0),
                      (u.wakeupEvent = { type: "wakeup" }),
                      (u.prototype.wakeUp = function () {
                        var e = this.sleepState;
                        (this.sleepState = 0),
                          (this._wakeUpAfterNarrowphase = !1),
                          e === u.SLEEPING && this.dispatchEvent(u.wakeupEvent);
                      }),
                      (u.prototype.sleep = function () {
                        (this.sleepState = u.SLEEPING),
                          this.velocity.set(0, 0, 0),
                          this.angularVelocity.set(0, 0, 0),
                          (this._wakeUpAfterNarrowphase = !1);
                      }),
                      (u.sleepyEvent = { type: "sleepy" }),
                      (u.sleepEvent = { type: "sleep" }),
                      (u.prototype.sleepTick = function (e) {
                        if (this.allowSleep) {
                          var t = this.sleepState,
                            n =
                              this.velocity.norm2() +
                              this.angularVelocity.norm2(),
                            i = Math.pow(this.sleepSpeedLimit, 2);
                          t === u.AWAKE && n < i
                            ? ((this.sleepState = u.SLEEPY),
                              (this.timeLastSleepy = e),
                              this.dispatchEvent(u.sleepyEvent))
                            : t === u.SLEEPY && n > i
                            ? this.wakeUp()
                            : t === u.SLEEPY &&
                              e - this.timeLastSleepy > this.sleepTimeLimit &&
                              (this.sleep(), this.dispatchEvent(u.sleepEvent));
                        }
                      }),
                      (u.prototype.updateSolveMassProperties = function () {
                        this.sleepState === u.SLEEPING ||
                        this.type === u.KINEMATIC
                          ? ((this.invMassSolve = 0),
                            this.invInertiaSolve.setZero(),
                            this.invInertiaWorldSolve.setZero())
                          : ((this.invMassSolve = this.invMass),
                            this.invInertiaSolve.copy(this.invInertia),
                            this.invInertiaWorldSolve.copy(
                              this.invInertiaWorld
                            ));
                      }),
                      (u.prototype.pointToLocalFrame = function (e, t) {
                        return (
                          (t = t || new r()),
                          e.vsub(this.position, t),
                          this.quaternion.conjugate().vmult(t, t),
                          t
                        );
                      }),
                      (u.prototype.vectorToLocalFrame = function (e, t) {
                        return (
                          (t = t || new r()),
                          this.quaternion.conjugate().vmult(e, t),
                          t
                        );
                      }),
                      (u.prototype.pointToWorldFrame = function (e, t) {
                        return (
                          (t = t || new r()),
                          this.interpolatedQuaternion.vmult(e, t),
                          t.vadd(this.interpolatedPosition, t),
                          t
                        );
                      }),
                      (u.prototype.vectorToWorldFrame = function (e, t) {
                        return (
                          (t = t || new r()),
                          this.interpolatedQuaternion.vmult(e, t),
                          t
                        );
                      });
                    var c = new r(),
                      h = new o();
                    (u.prototype.addShape = function (e, t, n) {
                      var i = new r(),
                        a = new o();
                      return (
                        t && i.copy(t),
                        n && a.copy(n),
                        this.shapes.push(e),
                        this.shapeOffsets.push(i),
                        this.shapeOrientations.push(a),
                        this.updateMassProperties(),
                        this.updateBoundingRadius(),
                        (this.aabbNeedsUpdate = !0),
                        (e.body = this),
                        this
                      );
                    }),
                      (u.prototype.updateBoundingRadius = function () {
                        for (
                          var e = this.shapes,
                            t = this.shapeOffsets,
                            n = e.length,
                            i = 0,
                            r = 0;
                          r !== n;
                          r++
                        ) {
                          var a = e[r];
                          a.updateBoundingSphereRadius();
                          var o = t[r].norm(),
                            s = a.boundingSphereRadius;
                          o + s > i && (i = o + s);
                        }
                        this.boundingRadius = i;
                      });
                    var d = new s();
                    u.prototype.computeAABB = function () {
                      for (
                        var e = this.shapes,
                          t = this.shapeOffsets,
                          n = this.shapeOrientations,
                          i = e.length,
                          r = c,
                          a = h,
                          o = this.quaternion,
                          s = this.aabb,
                          l = d,
                          u = 0;
                        u !== i;
                        u++
                      ) {
                        var p = e[u];
                        o.vmult(t[u], r),
                          r.vadd(this.position, r),
                          n[u].mult(o, a),
                          p.calculateWorldAABB(
                            r,
                            a,
                            l.lowerBound,
                            l.upperBound
                          ),
                          0 === u ? s.copy(l) : s.extend(l);
                      }
                      this.aabbNeedsUpdate = !1;
                    };
                    var p = new a(),
                      f = new a();
                    new a(),
                      (u.prototype.updateInertiaWorld = function (e) {
                        var t = this.invInertia;
                        if (t.x !== t.y || t.y !== t.z || e) {
                          var n = p,
                            i = f;
                          n.setRotationFromQuaternion(this.quaternion),
                            n.transpose(i),
                            n.scale(t, n),
                            n.mmult(i, this.invInertiaWorld);
                        }
                      }),
                      new r();
                    var m = new r();
                    u.prototype.applyForce = function (e, t) {
                      if (this.type === u.DYNAMIC) {
                        var n = m;
                        t.cross(e, n),
                          this.force.vadd(e, this.force),
                          this.torque.vadd(n, this.torque);
                      }
                    };
                    var v = new r(),
                      g = new r();
                    (u.prototype.applyLocalForce = function (e, t) {
                      if (this.type === u.DYNAMIC) {
                        var n = v,
                          i = g;
                        this.vectorToWorldFrame(e, n),
                          this.vectorToWorldFrame(t, i),
                          this.applyForce(n, i);
                      }
                    }),
                      new r();
                    var y = new r(),
                      x = new r();
                    u.prototype.applyImpulse = function (e, t) {
                      if (this.type === u.DYNAMIC) {
                        var n = t,
                          i = y;
                        i.copy(e),
                          i.mult(this.invMass, i),
                          this.velocity.vadd(i, this.velocity);
                        var r = x;
                        n.cross(e, r),
                          this.invInertiaWorld.vmult(r, r),
                          this.angularVelocity.vadd(r, this.angularVelocity);
                      }
                    };
                    var b = new r(),
                      _ = new r();
                    u.prototype.applyLocalImpulse = function (e, t) {
                      if (this.type === u.DYNAMIC) {
                        var n = b,
                          i = _;
                        this.vectorToWorldFrame(e, n),
                          this.vectorToWorldFrame(t, i),
                          this.applyImpulse(n, i);
                      }
                    };
                    var w = new r();
                    (u.prototype.updateMassProperties = function () {
                      var e = w;
                      this.invMass = this.mass > 0 ? 1 / this.mass : 0;
                      var t = this.inertia,
                        n = this.fixedRotation;
                      this.computeAABB(),
                        e.set(
                          (this.aabb.upperBound.x - this.aabb.lowerBound.x) / 2,
                          (this.aabb.upperBound.y - this.aabb.lowerBound.y) / 2,
                          (this.aabb.upperBound.z - this.aabb.lowerBound.z) / 2
                        ),
                        l.calculateInertia(e, this.mass, t),
                        this.invInertia.set(
                          t.x > 0 && !n ? 1 / t.x : 0,
                          t.y > 0 && !n ? 1 / t.y : 0,
                          t.z > 0 && !n ? 1 / t.z : 0
                        ),
                        this.updateInertiaWorld(!0);
                    }),
                      (u.prototype.getVelocityAtWorldPoint = function (e, t) {
                        var n = new r();
                        return (
                          e.vsub(this.position, n),
                          this.angularVelocity.cross(n, t),
                          this.velocity.vadd(t, t),
                          t
                        );
                      }),
                      new r(),
                      new r(),
                      new o(),
                      new o(),
                      (u.prototype.integrate = function (e, t, n) {
                        if (
                          (this.previousPosition.copy(this.position),
                          this.previousQuaternion.copy(this.quaternion),
                          (this.type === u.DYNAMIC ||
                            this.type === u.KINEMATIC) &&
                            this.sleepState !== u.SLEEPING)
                        ) {
                          var i = this.velocity,
                            r = this.angularVelocity,
                            a = this.position,
                            o = this.force,
                            s = this.torque,
                            l = this.quaternion,
                            c = this.invMass,
                            h = this.invInertiaWorld,
                            d = this.linearFactor,
                            p = c * e;
                          (i.x += o.x * p * d.x),
                            (i.y += o.y * p * d.y),
                            (i.z += o.z * p * d.z);
                          var f = h.elements,
                            m = this.angularFactor,
                            v = s.x * m.x,
                            g = s.y * m.y,
                            y = s.z * m.z;
                          (r.x += e * (f[0] * v + f[1] * g + f[2] * y)),
                            (r.y += e * (f[3] * v + f[4] * g + f[5] * y)),
                            (r.z += e * (f[6] * v + f[7] * g + f[8] * y)),
                            (a.x += i.x * e),
                            (a.y += i.y * e),
                            (a.z += i.z * e),
                            l.integrate(
                              this.angularVelocity,
                              e,
                              this.angularFactor,
                              l
                            ),
                            t && (n ? l.normalizeFast() : l.normalize()),
                            (this.aabbNeedsUpdate = !0),
                            this.updateInertiaWorld();
                        }
                      });
                  },
                  {
                    "../collision/AABB": 3,
                    "../material/Material": 26,
                    "../math/Mat3": 28,
                    "../math/Quaternion": 29,
                    "../math/Vec3": 31,
                    "../shapes/Box": 38,
                    "../shapes/Shape": 44,
                    "../utils/EventTarget": 50,
                  },
                ],
                33: [
                  function (e, t, n) {
                    e("./Body");
                    var i = e("../math/Vec3"),
                      r = e("../math/Quaternion"),
                      a =
                        (e("../collision/RaycastResult"),
                        e("../collision/Ray")),
                      o = e("../objects/WheelInfo");
                    function s(e) {
                      (this.chassisBody = e.chassisBody),
                        (this.wheelInfos = []),
                        (this.sliding = !1),
                        (this.world = null),
                        (this.indexRightAxis =
                          "undefined" !== typeof e.indexRightAxis
                            ? e.indexRightAxis
                            : 1),
                        (this.indexForwardAxis =
                          "undefined" !== typeof e.indexForwardAxis
                            ? e.indexForwardAxis
                            : 0),
                        (this.indexUpAxis =
                          "undefined" !== typeof e.indexUpAxis
                            ? e.indexUpAxis
                            : 2),
                        (this.numWheelsOnGround = 0);
                    }
                    (t.exports = s), new i(), new i(), new i();
                    var l = new i(),
                      u = new i(),
                      c = new i();
                    new a(),
                      (s.prototype.addWheel = function (e) {
                        var t = new o((e = e || {})),
                          n = this.wheelInfos.length;
                        return this.wheelInfos.push(t), n;
                      }),
                      (s.prototype.setSteeringValue = function (e, t) {
                        this.wheelInfos[t].steering = e;
                      }),
                      new i(),
                      (s.prototype.applyEngineForce = function (e, t) {
                        this.wheelInfos[t].engineForce = e;
                      }),
                      (s.prototype.setBrake = function (e, t) {
                        this.wheelInfos[t].brake = e;
                      }),
                      (s.prototype.addToWorld = function (e) {
                        this.constraints, e.addBody(this.chassisBody);
                        var t = this;
                        (this.preStepCallback = function () {
                          t.updateVehicle(e.dt);
                        }),
                          e.addEventListener("preStep", this.preStepCallback),
                          (this.world = e);
                      }),
                      (s.prototype.getVehicleAxisWorld = function (e, t) {
                        t.set(
                          0 === e ? 1 : 0,
                          1 === e ? 1 : 0,
                          2 === e ? 1 : 0
                        ),
                          this.chassisBody.vectorToWorldFrame(t, t);
                      }),
                      (s.prototype.updateVehicle = function (e) {
                        if (!(this.chassisBody.sleepState > 1)) {
                          for (
                            var t = this.wheelInfos,
                              n = t.length,
                              r = this.chassisBody,
                              a = 0;
                            a < n;
                            a++
                          )
                            this.updateWheelTransform(a);
                          this.currentVehicleSpeedKmHour =
                            3.6 * r.velocity.norm();
                          var o = new i();
                          for (
                            this.getVehicleAxisWorld(this.indexForwardAxis, o),
                              o.dot(r.velocity) < 0 &&
                                (this.currentVehicleSpeedKmHour *= -1),
                              a = 0;
                            a < n;
                            a++
                          )
                            this.castRay(t[a]);
                          this.updateSuspension(e);
                          var s = new i(),
                            l = new i();
                          for (a = 0; a < n; a++) {
                            var u = (p = t[a]).suspensionForce;
                            u > p.maxSuspensionForce &&
                              (u = p.maxSuspensionForce),
                              p.raycastResult.hitNormalWorld.scale(u * e, s),
                              p.raycastResult.hitPointWorld.vsub(r.position, l),
                              r.applyImpulse(s, l);
                          }
                          this.updateFriction(e);
                          var c = new i(),
                            h = new i(),
                            d = new i();
                          for (a = 0; a < n; a++) {
                            var p = t[a];
                            r.getVelocityAtWorldPoint(
                              p.chassisConnectionPointWorld,
                              d
                            );
                            var f = 1;
                            switch (this.indexUpAxis) {
                              case 1:
                                f = -1;
                            }
                            if (p.isInContact) {
                              this.getVehicleAxisWorld(
                                this.indexForwardAxis,
                                h
                              );
                              var m = h.dot(p.raycastResult.hitNormalWorld);
                              p.raycastResult.hitNormalWorld.scale(m, c),
                                h.vsub(c, h);
                              var v = h.dot(d);
                              p.deltaRotation = (f * v * e) / p.radius;
                            }
                            (!p.sliding && p.isInContact) ||
                              0 === p.engineForce ||
                              !p.useCustomSlidingRotationalSpeed ||
                              (p.deltaRotation =
                                (p.engineForce > 0 ? 1 : -1) *
                                p.customSlidingRotationalSpeed *
                                e),
                              Math.abs(p.brake) > Math.abs(p.engineForce) &&
                                (p.deltaRotation = 0),
                              (p.lastRotation = p.rotation),
                              (p.rotation += p.deltaRotation),
                              (p.deltaRotation *= 0.99);
                          }
                        }
                      }),
                      (s.prototype.updateSuspension = function (e) {
                        for (
                          var t = this.chassisBody.mass,
                            n = this.wheelInfos,
                            i = n.length,
                            r = 0;
                          r < i;
                          r++
                        ) {
                          var a = n[r];
                          if (a.isInContact) {
                            var o,
                              s = a.suspensionRestLength - a.suspensionLength;
                            o =
                              a.suspensionStiffness *
                              s *
                              a.clippedInvContactDotSuspension;
                            var l = a.suspensionRelativeVelocity;
                            (o -=
                              (l < 0
                                ? a.dampingCompression
                                : a.dampingRelaxation) * l),
                              (a.suspensionForce = o * t),
                              a.suspensionForce < 0 && (a.suspensionForce = 0);
                          } else a.suspensionForce = 0;
                        }
                      }),
                      (s.prototype.removeFromWorld = function (e) {
                        this.constraints,
                          e.remove(this.chassisBody),
                          e.removeEventListener(
                            "preStep",
                            this.preStepCallback
                          ),
                          (this.world = null);
                      });
                    var h = new i(),
                      d = new i();
                    (s.prototype.castRay = function (e) {
                      var t = h,
                        n = d;
                      this.updateWheelTransformWorld(e);
                      var r = this.chassisBody,
                        a = -1,
                        o = e.suspensionRestLength + e.radius;
                      e.directionWorld.scale(o, t);
                      var s = e.chassisConnectionPointWorld;
                      s.vadd(t, n);
                      var l = e.raycastResult;
                      l.reset();
                      var u = r.collisionResponse;
                      (r.collisionResponse = !1),
                        this.world.rayTest(s, n, l),
                        (r.collisionResponse = u);
                      var c = l.body;
                      if (
                        ((e.raycastResult.groundObject = 0),
                        (e.lastSuspensionLength = e.suspensionLength),
                        c)
                      ) {
                        (a = l.distance),
                          (e.raycastResult.hitNormalWorld = l.hitNormalWorld),
                          (e.isInContact = !0);
                        var p = l.distance;
                        e.suspensionLength = p - e.radius;
                        var f = e.suspensionRestLength - e.maxSuspensionTravel,
                          m = e.suspensionRestLength + e.maxSuspensionTravel;
                        e.suspensionLength < f && (e.suspensionLength = f),
                          e.suspensionLength > m &&
                            ((e.suspensionLength = m), e.raycastResult.reset());
                        var v = e.raycastResult.hitNormalWorld.dot(
                            e.directionWorld
                          ),
                          g = new i();
                        r.getVelocityAtWorldPoint(
                          e.raycastResult.hitPointWorld,
                          g
                        );
                        var y = e.raycastResult.hitNormalWorld.dot(g);
                        if (v >= -0.1)
                          (e.suspensionRelativeVelocity = 0),
                            (e.clippedInvContactDotSuspension = 10);
                        else {
                          var x = -1 / v;
                          (e.suspensionRelativeVelocity = y * x),
                            (e.clippedInvContactDotSuspension = x);
                        }
                      } else
                        (e.suspensionLength =
                          e.suspensionRestLength + 0 * e.maxSuspensionTravel),
                          (e.suspensionRelativeVelocity = 0),
                          e.directionWorld.scale(
                            -1,
                            e.raycastResult.hitNormalWorld
                          ),
                          (e.clippedInvContactDotSuspension = 1);
                      return a;
                    }),
                      (s.prototype.updateWheelTransformWorld = function (e) {
                        e.isInContact = !1;
                        var t = this.chassisBody;
                        t.pointToWorldFrame(
                          e.chassisConnectionPointLocal,
                          e.chassisConnectionPointWorld
                        ),
                          t.vectorToWorldFrame(
                            e.directionLocal,
                            e.directionWorld
                          ),
                          t.vectorToWorldFrame(e.axleLocal, e.axleWorld);
                      }),
                      (s.prototype.updateWheelTransform = function (e) {
                        var t = l,
                          n = u,
                          i = c,
                          a = this.wheelInfos[e];
                        this.updateWheelTransformWorld(a),
                          a.directionLocal.scale(-1, t),
                          n.copy(a.axleLocal),
                          t.cross(n, i),
                          i.normalize(),
                          n.normalize();
                        var o = a.steering,
                          s = new r();
                        s.setFromAxisAngle(t, o);
                        var h = new r();
                        h.setFromAxisAngle(
                          n,
                          this.lerp(
                            a.lastRotation,
                            a.rotation,
                            this.world.interpolationFactor
                          )
                        );
                        var d = a.worldTransform.quaternion;
                        this.chassisBody.quaternion.mult(s, d),
                          d.mult(h, d),
                          d.normalize();
                        var p = a.worldTransform.position;
                        p.copy(a.directionWorld),
                          p.scale(
                            this.lerp(
                              a.lastSuspensionLength,
                              a.suspensionLength,
                              this.world.interpolationFactor
                            ),
                            p
                          ),
                          p.vadd(a.chassisConnectionPointWorld, p);
                      }),
                      (s.prototype.lerp = function (e, t, n) {
                        return (
                          e + (t - e) * (n = (n = n < 0 ? 0 : n) > 1 ? 1 : n)
                        );
                      });
                    var p = [new i(1, 0, 0), new i(0, 1, 0), new i(0, 0, 1)];
                    s.prototype.getWheelTransformWorld = function (e) {
                      return this.wheelInfos[e].worldTransform;
                    };
                    var f = new i(),
                      m = [],
                      v = [];
                    s.prototype.updateFriction = function (e) {
                      var t = f,
                        n = this.wheelInfos,
                        r = n.length,
                        a = this.chassisBody,
                        o = v,
                        s = m;
                      this.numWheelsOnGround = 0;
                      for (var l = 0; l < r; l++)
                        (d = (A = n[l]).raycastResult.body) &&
                          this.numWheelsOnGround++,
                          (A.sideImpulse = 0),
                          (A.forwardImpulse = 0),
                          o[l] || (o[l] = new i()),
                          s[l] || (s[l] = new i());
                      for (l = 0; l < r; l++)
                        if ((d = (A = n[l]).raycastResult.body)) {
                          var u = s[l];
                          this.getWheelTransformWorld(l).vectorToWorldFrame(
                            p[this.indexRightAxis],
                            u
                          );
                          var c = A.raycastResult.hitNormalWorld,
                            h = u.dot(c);
                          c.scale(h, t),
                            u.vsub(t, u),
                            u.normalize(),
                            c.cross(u, o[l]),
                            o[l].normalize(),
                            (A.sideImpulse = k(
                              a,
                              A.raycastResult.hitPointWorld,
                              d,
                              A.raycastResult.hitPointWorld,
                              u
                            )),
                            (A.sideImpulse *= 1);
                        }
                      for (this.sliding = !1, l = 0; l < r; l++) {
                        var d = (A = n[l]).raycastResult.body,
                          g = 0;
                        if (((A.slipInfo = 1), d)) {
                          var y = A.brake ? A.brake : 0;
                          g = b(a, d, A.raycastResult.hitPointWorld, o[l], y);
                          var x = y / (g += A.engineForce * e);
                          A.slipInfo *= x;
                        }
                        if (((A.forwardImpulse = 0), (A.skidInfo = 1), d)) {
                          A.skidInfo = 1;
                          var _ = A.suspensionForce * e * A.frictionSlip,
                            w = _ * _;
                          A.forwardImpulse = g;
                          var S = 1 * A.forwardImpulse,
                            E = 1 * A.sideImpulse,
                            M = S * S + E * E;
                          (A.sliding = !1),
                            M > w &&
                              ((this.sliding = !0),
                              (A.sliding = !0),
                              (x = _ / Math.sqrt(M)),
                              (A.skidInfo *= x));
                        }
                      }
                      if (this.sliding)
                        for (l = 0; l < r; l++)
                          0 !== (A = n[l]).sideImpulse &&
                            A.skidInfo < 1 &&
                            ((A.forwardImpulse *= A.skidInfo),
                            (A.sideImpulse *= A.skidInfo));
                      for (l = 0; l < r; l++) {
                        var A = n[l],
                          T = new i();
                        if (
                          (A.raycastResult.hitPointWorld.vsub(a.position, T),
                          0 !== A.forwardImpulse)
                        ) {
                          var C = new i();
                          o[l].scale(A.forwardImpulse, C), a.applyImpulse(C, T);
                        }
                        if (0 !== A.sideImpulse) {
                          d = A.raycastResult.body;
                          var P = new i();
                          A.raycastResult.hitPointWorld.vsub(d.position, P);
                          var L = new i();
                          s[l].scale(A.sideImpulse, L),
                            a.vectorToLocalFrame(T, T),
                            (T["xyz"[this.indexUpAxis]] *= A.rollInfluence),
                            a.vectorToWorldFrame(T, T),
                            a.applyImpulse(L, T),
                            L.scale(-1, L),
                            d.applyImpulse(L, P);
                        }
                      }
                    };
                    var g = new i(),
                      y = new i(),
                      x = new i();
                    function b(e, t, n, i, r) {
                      var a = 0,
                        o = n,
                        s = g,
                        l = y,
                        u = x;
                      return (
                        e.getVelocityAtWorldPoint(o, s),
                        t.getVelocityAtWorldPoint(o, l),
                        s.vsub(l, u),
                        r < (a = -i.dot(u) * (1 / (M(e, n, i) + M(t, n, i)))) &&
                          (a = r),
                        a < -r && (a = -r),
                        a
                      );
                    }
                    var _ = new i(),
                      w = new i(),
                      S = new i(),
                      E = new i();
                    function M(e, t, n) {
                      var i = _,
                        r = w,
                        a = S,
                        o = E;
                      return (
                        t.vsub(e.position, i),
                        i.cross(n, r),
                        e.invInertiaWorld.vmult(r, o),
                        o.cross(i, a),
                        e.invMass + n.dot(a)
                      );
                    }
                    var A = new i(),
                      T = new i(),
                      C = new i();
                    function k(e, t, n, i, r, a) {
                      if (r.norm2() > 1.1) return 0;
                      var o = A,
                        s = T,
                        l = C;
                      return (
                        e.getVelocityAtWorldPoint(t, o),
                        n.getVelocityAtWorldPoint(i, s),
                        o.vsub(s, l),
                        -0.2 * r.dot(l) * (1 / (e.invMass + n.invMass))
                      );
                    }
                  },
                  {
                    "../collision/Ray": 10,
                    "../collision/RaycastResult": 11,
                    "../math/Quaternion": 29,
                    "../math/Vec3": 31,
                    "../objects/WheelInfo": 37,
                    "./Body": 32,
                  },
                ],
                34: [
                  function (e, t, n) {
                    var i = e("./Body"),
                      r = e("../shapes/Sphere"),
                      a = e("../shapes/Box"),
                      o = e("../math/Vec3"),
                      s = e("../constraints/HingeConstraint");
                    function l(e) {
                      if (
                        ((this.wheelBodies = []),
                        (this.coordinateSystem =
                          "undefined" === typeof e.coordinateSystem
                            ? new o(1, 2, 3)
                            : e.coordinateSystem.clone()),
                        (this.chassisBody = e.chassisBody),
                        !this.chassisBody)
                      ) {
                        var t = new a(new o(5, 2, 0.5));
                        this.chassisBody = new i(1, t);
                      }
                      (this.constraints = []),
                        (this.wheelAxes = []),
                        (this.wheelForces = []);
                    }
                    (t.exports = l),
                      (l.prototype.addWheel = function (e) {
                        var t = (e = e || {}).body;
                        t || (t = new i(1, new r(1.2))),
                          this.wheelBodies.push(t),
                          this.wheelForces.push(0),
                          new o();
                        var n =
                            "undefined" !== typeof e.position
                              ? e.position.clone()
                              : new o(),
                          a = new o();
                        this.chassisBody.pointToWorldFrame(n, a),
                          t.position.set(a.x, a.y, a.z);
                        var l =
                          "undefined" !== typeof e.axis
                            ? e.axis.clone()
                            : new o(0, 1, 0);
                        this.wheelAxes.push(l);
                        var u = new s(this.chassisBody, t, {
                          pivotA: n,
                          axisA: l,
                          pivotB: o.ZERO,
                          axisB: l,
                          collideConnected: !1,
                        });
                        return (
                          this.constraints.push(u), this.wheelBodies.length - 1
                        );
                      }),
                      (l.prototype.setSteeringValue = function (e, t) {
                        var n = this.wheelAxes[t],
                          i = Math.cos(e),
                          r = Math.sin(e),
                          a = n.x,
                          o = n.y;
                        this.constraints[t].axisA.set(
                          i * a - r * o,
                          r * a + i * o,
                          0
                        );
                      }),
                      (l.prototype.setMotorSpeed = function (e, t) {
                        var n = this.constraints[t];
                        n.enableMotor(), (n.motorTargetVelocity = e);
                      }),
                      (l.prototype.disableMotor = function (e) {
                        this.constraints[e].disableMotor();
                      });
                    var u = new o();
                    (l.prototype.setWheelForce = function (e, t) {
                      this.wheelForces[t] = e;
                    }),
                      (l.prototype.applyWheelForce = function (e, t) {
                        var n = this.wheelAxes[t],
                          i = this.wheelBodies[t],
                          r = i.torque;
                        n.scale(e, u), i.vectorToWorldFrame(u, u), r.vadd(u, r);
                      }),
                      (l.prototype.addToWorld = function (e) {
                        for (
                          var t = this.constraints,
                            n = this.wheelBodies.concat([this.chassisBody]),
                            i = 0;
                          i < n.length;
                          i++
                        )
                          e.addBody(n[i]);
                        for (i = 0; i < t.length; i++) e.addConstraint(t[i]);
                        e.addEventListener("preStep", this._update.bind(this));
                      }),
                      (l.prototype._update = function () {
                        for (var e = this.wheelForces, t = 0; t < e.length; t++)
                          this.applyWheelForce(e[t], t);
                      }),
                      (l.prototype.removeFromWorld = function (e) {
                        for (
                          var t = this.constraints,
                            n = this.wheelBodies.concat([this.chassisBody]),
                            i = 0;
                          i < n.length;
                          i++
                        )
                          e.remove(n[i]);
                        for (i = 0; i < t.length; i++) e.removeConstraint(t[i]);
                      });
                    var c = new o();
                    l.prototype.getWheelSpeed = function (e) {
                      var t = this.wheelAxes[e],
                        n = this.wheelBodies[e].angularVelocity;
                      return (
                        this.chassisBody.vectorToWorldFrame(t, c), n.dot(c)
                      );
                    };
                  },
                  {
                    "../constraints/HingeConstraint": 16,
                    "../math/Vec3": 31,
                    "../shapes/Box": 38,
                    "../shapes/Sphere": 45,
                    "./Body": 32,
                  },
                ],
                35: [
                  function (e, t, n) {
                    (t.exports = r), e("../shapes/Shape");
                    var i = e("../math/Vec3");
                    function r() {
                      (this.particles = []),
                        (this.density = 1),
                        (this.smoothingRadius = 1),
                        (this.speedOfSound = 1),
                        (this.viscosity = 0.01),
                        (this.eps = 1e-6),
                        (this.pressures = []),
                        (this.densities = []),
                        (this.neighbors = []);
                    }
                    e("../math/Quaternion"),
                      e("../shapes/Particle"),
                      e("../objects/Body"),
                      e("../material/Material"),
                      (r.prototype.add = function (e) {
                        this.particles.push(e),
                          this.neighbors.length < this.particles.length &&
                            this.neighbors.push([]);
                      }),
                      (r.prototype.remove = function (e) {
                        var t = this.particles.indexOf(e);
                        -1 !== t &&
                          (this.particles.splice(t, 1),
                          this.neighbors.length > this.particles.length &&
                            this.neighbors.pop());
                      });
                    var a = new i();
                    r.prototype.getNeighbors = function (e, t) {
                      for (
                        var n = this.particles.length,
                          i = e.id,
                          r = this.smoothingRadius * this.smoothingRadius,
                          o = a,
                          s = 0;
                        s !== n;
                        s++
                      ) {
                        var l = this.particles[s];
                        l.position.vsub(e.position, o),
                          i !== l.id && o.norm2() < r && t.push(l);
                      }
                    };
                    var o = new i(),
                      s = new i(),
                      l = new i(),
                      u = new i(),
                      c = new i(),
                      h = new i();
                    (r.prototype.update = function () {
                      for (
                        var e = this.particles.length,
                          t = o,
                          n = this.speedOfSound,
                          i = this.eps,
                          r = 0;
                        r !== e;
                        r++
                      ) {
                        var a = this.particles[r];
                        ((E = this.neighbors[r]).length = 0),
                          this.getNeighbors(a, E),
                          E.push(this.particles[r]);
                        for (var d = E.length, p = 0, f = 0; f !== d; f++) {
                          a.position.vsub(E[f].position, t);
                          var m = t.norm(),
                            v = this.w(m);
                          p += E[f].mass * v;
                        }
                        (this.densities[r] = p),
                          (this.pressures[r] =
                            n * n * (this.densities[r] - this.density));
                      }
                      var g = s,
                        y = l,
                        x = u,
                        b = c,
                        _ = h;
                      for (r = 0; r !== e; r++) {
                        var w,
                          S,
                          E,
                          M = this.particles[r];
                        for (
                          g.set(0, 0, 0),
                            y.set(0, 0, 0),
                            d = (E = this.neighbors[r]).length,
                            f = 0;
                          f !== d;
                          f++
                        ) {
                          var A = E[f];
                          M.position.vsub(A.position, b);
                          var T = b.norm();
                          (w =
                            -A.mass *
                            (this.pressures[r] /
                              (this.densities[r] * this.densities[r] + i) +
                              this.pressures[f] /
                                (this.densities[f] * this.densities[f] + i))),
                            this.gradw(b, x),
                            x.mult(w, x),
                            g.vadd(x, g),
                            A.velocity.vsub(M.velocity, _),
                            _.mult(
                              (1 /
                                (1e-4 +
                                  this.densities[r] * this.densities[f])) *
                                this.viscosity *
                                A.mass,
                              _
                            ),
                            (S = this.nablaw(T)),
                            _.mult(S, _),
                            y.vadd(_, y);
                        }
                        y.mult(M.mass, y),
                          g.mult(M.mass, g),
                          M.force.vadd(y, M.force),
                          M.force.vadd(g, M.force);
                      }
                    }),
                      (r.prototype.w = function (e) {
                        var t = this.smoothingRadius;
                        return (
                          (315 / (64 * Math.PI * Math.pow(t, 9))) *
                          Math.pow(t * t - e * e, 3)
                        );
                      }),
                      (r.prototype.gradw = function (e, t) {
                        var n = e.norm(),
                          i = this.smoothingRadius;
                        e.mult(
                          (945 / (32 * Math.PI * Math.pow(i, 9))) *
                            Math.pow(i * i - n * n, 2),
                          t
                        );
                      }),
                      (r.prototype.nablaw = function (e) {
                        var t = this.smoothingRadius;
                        return (
                          (945 / (32 * Math.PI * Math.pow(t, 9))) *
                          (t * t - e * e) *
                          (7 * e * e - 3 * t * t)
                        );
                      });
                  },
                  {
                    "../material/Material": 26,
                    "../math/Quaternion": 29,
                    "../math/Vec3": 31,
                    "../objects/Body": 32,
                    "../shapes/Particle": 42,
                    "../shapes/Shape": 44,
                  },
                ],
                36: [
                  function (e, t, n) {
                    var i = e("../math/Vec3");
                    function r(e, t, n) {
                      (n = n || {}),
                        (this.restLength =
                          "number" === typeof n.restLength ? n.restLength : 1),
                        (this.stiffness = n.stiffness || 100),
                        (this.damping = n.damping || 1),
                        (this.bodyA = e),
                        (this.bodyB = t),
                        (this.localAnchorA = new i()),
                        (this.localAnchorB = new i()),
                        n.localAnchorA &&
                          this.localAnchorA.copy(n.localAnchorA),
                        n.localAnchorB &&
                          this.localAnchorB.copy(n.localAnchorB),
                        n.worldAnchorA && this.setWorldAnchorA(n.worldAnchorA),
                        n.worldAnchorB && this.setWorldAnchorB(n.worldAnchorB);
                    }
                    (t.exports = r),
                      (r.prototype.setWorldAnchorA = function (e) {
                        this.bodyA.pointToLocalFrame(e, this.localAnchorA);
                      }),
                      (r.prototype.setWorldAnchorB = function (e) {
                        this.bodyB.pointToLocalFrame(e, this.localAnchorB);
                      }),
                      (r.prototype.getWorldAnchorA = function (e) {
                        this.bodyA.pointToWorldFrame(this.localAnchorA, e);
                      }),
                      (r.prototype.getWorldAnchorB = function (e) {
                        this.bodyB.pointToWorldFrame(this.localAnchorB, e);
                      });
                    var a = new i(),
                      o = new i(),
                      s = new i(),
                      l = new i(),
                      u = new i(),
                      c = new i(),
                      h = new i(),
                      d = new i(),
                      p = new i(),
                      f = new i(),
                      m = new i();
                    r.prototype.applyForce = function () {
                      var e = this.stiffness,
                        t = this.damping,
                        n = this.restLength,
                        i = this.bodyA,
                        r = this.bodyB,
                        v = a,
                        g = o,
                        y = s,
                        x = l,
                        b = m,
                        _ = u,
                        w = c,
                        S = h,
                        E = d,
                        M = p,
                        A = f;
                      this.getWorldAnchorA(_),
                        this.getWorldAnchorB(w),
                        _.vsub(i.position, S),
                        w.vsub(r.position, E),
                        w.vsub(_, v);
                      var T = v.norm();
                      g.copy(v),
                        g.normalize(),
                        r.velocity.vsub(i.velocity, y),
                        r.angularVelocity.cross(E, b),
                        y.vadd(b, y),
                        i.angularVelocity.cross(S, b),
                        y.vsub(b, y),
                        g.mult(-e * (T - n) - t * y.dot(g), x),
                        i.force.vsub(x, i.force),
                        r.force.vadd(x, r.force),
                        S.cross(x, M),
                        E.cross(x, A),
                        i.torque.vsub(M, i.torque),
                        r.torque.vadd(A, r.torque);
                    };
                  },
                  { "../math/Vec3": 31 },
                ],
                37: [
                  function (e, t, n) {
                    var i = e("../math/Vec3"),
                      r = e("../math/Transform"),
                      a = e("../collision/RaycastResult"),
                      o = e("../utils/Utils");
                    function s(e) {
                      (e = o.defaults(e, {
                        chassisConnectionPointLocal: new i(),
                        chassisConnectionPointWorld: new i(),
                        directionLocal: new i(),
                        directionWorld: new i(),
                        axleLocal: new i(),
                        axleWorld: new i(),
                        suspensionRestLength: 1,
                        suspensionMaxLength: 2,
                        radius: 1,
                        suspensionStiffness: 100,
                        dampingCompression: 10,
                        dampingRelaxation: 10,
                        frictionSlip: 1,
                        steering: 0,
                        rotation: 0,
                        deltaRotation: 0,
                        rollInfluence: 1,
                        maxSuspensionForce: Number.MAX_VALUE,
                        isFrontWheel: !0,
                        clippedInvContactDotSuspension: 1,
                        suspensionRelativeVelocity: 0,
                        suspensionForce: 0,
                        skidInfo: 0,
                        suspensionLength: 0,
                        maxSuspensionTravel: 1,
                        useCustomSlidingRotationalSpeed: !1,
                        customSlidingRotationalSpeed: -0.1,
                      })),
                        (this.maxSuspensionTravel = e.maxSuspensionTravel),
                        (this.customSlidingRotationalSpeed =
                          e.customSlidingRotationalSpeed),
                        (this.useCustomSlidingRotationalSpeed =
                          e.useCustomSlidingRotationalSpeed),
                        (this.sliding = !1),
                        (this.chassisConnectionPointLocal =
                          e.chassisConnectionPointLocal.clone()),
                        (this.chassisConnectionPointWorld =
                          e.chassisConnectionPointWorld.clone()),
                        (this.directionLocal = e.directionLocal.clone()),
                        (this.directionWorld = e.directionWorld.clone()),
                        (this.axleLocal = e.axleLocal.clone()),
                        (this.axleWorld = e.axleWorld.clone()),
                        (this.suspensionRestLength = e.suspensionRestLength),
                        (this.suspensionMaxLength = e.suspensionMaxLength),
                        (this.radius = e.radius),
                        (this.suspensionStiffness = e.suspensionStiffness),
                        (this.dampingCompression = e.dampingCompression),
                        (this.dampingRelaxation = e.dampingRelaxation),
                        (this.frictionSlip = e.frictionSlip),
                        (this.steering = 0),
                        (this.rotation = 0),
                        (this.lastRotation = 0),
                        (this.deltaRotation = 0),
                        (this.rollInfluence = e.rollInfluence),
                        (this.maxSuspensionForce = e.maxSuspensionForce),
                        (this.engineForce = 0),
                        (this.brake = 0),
                        (this.isFrontWheel = e.isFrontWheel),
                        (this.clippedInvContactDotSuspension = 1),
                        (this.suspensionRelativeVelocity = 0),
                        (this.suspensionForce = 0),
                        (this.skidInfo = 0),
                        (this.suspensionLength = 0),
                        (this.lastSuspensionLength = 0),
                        (this.sideImpulse = 0),
                        (this.forwardImpulse = 0),
                        (this.raycastResult = new a()),
                        (this.worldTransform = new r()),
                        (this.isInContact = !1);
                    }
                    t.exports = s;
                    var l = new i(),
                      u = new i();
                    (l = new i()),
                      (s.prototype.updateWheel = function (e) {
                        var t = this.raycastResult;
                        if (this.isInContact) {
                          var n = t.hitNormalWorld.dot(t.directionWorld);
                          t.hitPointWorld.vsub(e.position, u),
                            e.getVelocityAtWorldPoint(u, l);
                          var i = t.hitNormalWorld.dot(l);
                          if (n >= -0.1)
                            (this.suspensionRelativeVelocity = 0),
                              (this.clippedInvContactDotSuspension = 10);
                          else {
                            var r = -1 / n;
                            (this.suspensionRelativeVelocity = i * r),
                              (this.clippedInvContactDotSuspension = r);
                          }
                        } else
                          (t.suspensionLength = this.suspensionRestLength),
                            (this.suspensionRelativeVelocity = 0),
                            t.directionWorld.scale(-1, t.hitNormalWorld),
                            (this.clippedInvContactDotSuspension = 1);
                      });
                  },
                  {
                    "../collision/RaycastResult": 11,
                    "../math/Transform": 30,
                    "../math/Vec3": 31,
                    "../utils/Utils": 54,
                  },
                ],
                38: [
                  function (e, t, n) {
                    t.exports = o;
                    var i = e("./Shape"),
                      r = e("../math/Vec3"),
                      a = e("./ConvexPolyhedron");
                    function o(e) {
                      i.call(this, { type: i.types.BOX }),
                        (this.halfExtents = e),
                        (this.convexPolyhedronRepresentation = null),
                        this.updateConvexPolyhedronRepresentation(),
                        this.updateBoundingSphereRadius();
                    }
                    (o.prototype = new i()),
                      (o.prototype.constructor = o),
                      (o.prototype.updateConvexPolyhedronRepresentation =
                        function () {
                          var e = this.halfExtents.x,
                            t = this.halfExtents.y,
                            n = this.halfExtents.z,
                            i = r,
                            o = [
                              new i(-e, -t, -n),
                              new i(e, -t, -n),
                              new i(e, t, -n),
                              new i(-e, t, -n),
                              new i(-e, -t, n),
                              new i(e, -t, n),
                              new i(e, t, n),
                              new i(-e, t, n),
                            ],
                            s =
                              (new i(0, 0, 1),
                              new i(0, 1, 0),
                              new i(1, 0, 0),
                              new a(o, [
                                [3, 2, 1, 0],
                                [4, 5, 6, 7],
                                [5, 4, 0, 1],
                                [2, 3, 7, 6],
                                [0, 4, 7, 3],
                                [1, 2, 6, 5],
                              ]));
                          (this.convexPolyhedronRepresentation = s),
                            (s.material = this.material);
                        }),
                      (o.prototype.calculateLocalInertia = function (e, t) {
                        return (
                          (t = t || new r()),
                          o.calculateInertia(this.halfExtents, e, t),
                          t
                        );
                      }),
                      (o.calculateInertia = function (e, t, n) {
                        var i = e;
                        (n.x =
                          (1 / 12) *
                          t *
                          (2 * i.y * 2 * i.y + 2 * i.z * 2 * i.z)),
                          (n.y =
                            (1 / 12) *
                            t *
                            (2 * i.x * 2 * i.x + 2 * i.z * 2 * i.z)),
                          (n.z =
                            (1 / 12) *
                            t *
                            (2 * i.y * 2 * i.y + 2 * i.x * 2 * i.x));
                      }),
                      (o.prototype.getSideNormals = function (e, t) {
                        var n = e,
                          i = this.halfExtents;
                        if (
                          (n[0].set(i.x, 0, 0),
                          n[1].set(0, i.y, 0),
                          n[2].set(0, 0, i.z),
                          n[3].set(-i.x, 0, 0),
                          n[4].set(0, -i.y, 0),
                          n[5].set(0, 0, -i.z),
                          void 0 !== t)
                        )
                          for (var r = 0; r !== n.length; r++)
                            t.vmult(n[r], n[r]);
                        return n;
                      }),
                      (o.prototype.volume = function () {
                        return (
                          8 *
                          this.halfExtents.x *
                          this.halfExtents.y *
                          this.halfExtents.z
                        );
                      }),
                      (o.prototype.updateBoundingSphereRadius = function () {
                        this.boundingSphereRadius = this.halfExtents.norm();
                      });
                    var s = new r();
                    new r(),
                      (o.prototype.forEachWorldCorner = function (e, t, n) {
                        for (
                          var i = this.halfExtents,
                            r = [
                              [i.x, i.y, i.z],
                              [-i.x, i.y, i.z],
                              [-i.x, -i.y, i.z],
                              [-i.x, -i.y, -i.z],
                              [i.x, -i.y, -i.z],
                              [i.x, i.y, -i.z],
                              [-i.x, i.y, -i.z],
                              [i.x, -i.y, i.z],
                            ],
                            a = 0;
                          a < r.length;
                          a++
                        )
                          s.set(r[a][0], r[a][1], r[a][2]),
                            t.vmult(s, s),
                            e.vadd(s, s),
                            n(s.x, s.y, s.z);
                      });
                    var l = [
                      new r(),
                      new r(),
                      new r(),
                      new r(),
                      new r(),
                      new r(),
                      new r(),
                      new r(),
                    ];
                    o.prototype.calculateWorldAABB = function (e, t, n, i) {
                      var r = this.halfExtents;
                      l[0].set(r.x, r.y, r.z),
                        l[1].set(-r.x, r.y, r.z),
                        l[2].set(-r.x, -r.y, r.z),
                        l[3].set(-r.x, -r.y, -r.z),
                        l[4].set(r.x, -r.y, -r.z),
                        l[5].set(r.x, r.y, -r.z),
                        l[6].set(-r.x, r.y, -r.z),
                        l[7].set(r.x, -r.y, r.z);
                      var a = l[0];
                      t.vmult(a, a), e.vadd(a, a), i.copy(a), n.copy(a);
                      for (var o = 1; o < 8; o++) {
                        (a = l[o]), t.vmult(a, a), e.vadd(a, a);
                        var s = a.x,
                          u = a.y,
                          c = a.z;
                        s > i.x && (i.x = s),
                          u > i.y && (i.y = u),
                          c > i.z && (i.z = c),
                          s < n.x && (n.x = s),
                          u < n.y && (n.y = u),
                          c < n.z && (n.z = c);
                      }
                    };
                  },
                  {
                    "../math/Vec3": 31,
                    "./ConvexPolyhedron": 39,
                    "./Shape": 44,
                  },
                ],
                39: [
                  function (e, t, n) {
                    t.exports = o;
                    var i = e("./Shape"),
                      r = e("../math/Vec3"),
                      a = (e("../math/Quaternion"), e("../math/Transform"));
                    function o(e, t, n) {
                      i.call(this, { type: i.types.CONVEXPOLYHEDRON }),
                        (this.vertices = e || []),
                        (this.worldVertices = []),
                        (this.worldVerticesNeedsUpdate = !0),
                        (this.faces = t || []),
                        (this.faceNormals = []),
                        this.computeNormals(),
                        (this.worldFaceNormalsNeedsUpdate = !0),
                        (this.worldFaceNormals = []),
                        (this.uniqueEdges = []),
                        (this.uniqueAxes = n ? n.slice() : null),
                        this.computeEdges(),
                        this.updateBoundingSphereRadius();
                    }
                    (o.prototype = new i()), (o.prototype.constructor = o);
                    var s = new r();
                    (o.prototype.computeEdges = function () {
                      var e = this.faces,
                        t = this.vertices,
                        n = (t.length, this.uniqueEdges);
                      n.length = 0;
                      for (var i = s, r = 0; r !== e.length; r++)
                        for (var a = e[r], o = a.length, l = 0; l !== o; l++) {
                          var u = (l + 1) % o;
                          t[a[l]].vsub(t[a[u]], i), i.normalize();
                          for (var c = !1, h = 0; h !== n.length; h++)
                            if (n[h].almostEquals(i) || n[h].almostEquals(i)) {
                              c = !0;
                              break;
                            }
                          c || n.push(i.clone());
                        }
                    }),
                      (o.prototype.computeNormals = function () {
                        this.faceNormals.length = this.faces.length;
                        for (var e = 0; e < this.faces.length; e++) {
                          for (var t = 0; t < this.faces[e].length; t++)
                            if (!this.vertices[this.faces[e][t]])
                              throw new Error(
                                "Vertex " + this.faces[e][t] + " not found!"
                              );
                          var n = this.faceNormals[e] || new r();
                          this.getFaceNormal(e, n),
                            n.negate(n),
                            (this.faceNormals[e] = n);
                          var i = this.vertices[this.faces[e][0]];
                          if (n.dot(i) < 0)
                            for (t = 0; t < this.faces[e].length; t++);
                        }
                      });
                    var l = new r(),
                      u = new r();
                    (o.computeNormal = function (e, t, n, i) {
                      t.vsub(e, u),
                        n.vsub(t, l),
                        l.cross(u, i),
                        i.isZero() || i.normalize();
                    }),
                      (o.prototype.getFaceNormal = function (e, t) {
                        var n = this.faces[e],
                          i = this.vertices[n[0]],
                          r = this.vertices[n[1]],
                          a = this.vertices[n[2]];
                        return o.computeNormal(i, r, a, t);
                      });
                    var c = new r();
                    o.prototype.clipAgainstHull = function (
                      e,
                      t,
                      n,
                      i,
                      a,
                      o,
                      s,
                      l,
                      u
                    ) {
                      for (
                        var h = c, d = -1, p = -Number.MAX_VALUE, f = 0;
                        f < n.faces.length;
                        f++
                      ) {
                        h.copy(n.faceNormals[f]), a.vmult(h, h);
                        var m = h.dot(o);
                        m > p && ((p = m), (d = f));
                      }
                      for (
                        var v = [], g = n.faces[d], y = g.length, x = 0;
                        x < y;
                        x++
                      ) {
                        var b = n.vertices[g[x]],
                          _ = new r();
                        _.copy(b), a.vmult(_, _), i.vadd(_, _), v.push(_);
                      }
                      d >= 0 && this.clipFaceAgainstHull(o, e, t, v, s, l, u);
                    };
                    var h = new r(),
                      d = new r(),
                      p = new r(),
                      f = new r(),
                      m = new r(),
                      v = new r();
                    o.prototype.findSeparatingAxis = function (
                      e,
                      t,
                      n,
                      i,
                      r,
                      a,
                      o,
                      s
                    ) {
                      var l = h,
                        u = d,
                        c = p,
                        g = f,
                        y = m,
                        x = v,
                        b = Number.MAX_VALUE;
                      if (this.uniqueAxes)
                        for (w = 0; w !== this.uniqueAxes.length; w++) {
                          if (
                            (n.vmult(this.uniqueAxes[w], l),
                            !1 === (M = this.testSepAxis(l, e, t, n, i, r)))
                          )
                            return !1;
                          M < b && ((b = M), a.copy(l));
                        }
                      else
                        for (
                          var _ = o ? o.length : this.faces.length, w = 0;
                          w < _;
                          w++
                        ) {
                          var S = o ? o[w] : w;
                          if (
                            (l.copy(this.faceNormals[S]),
                            n.vmult(l, l),
                            !1 === (M = this.testSepAxis(l, e, t, n, i, r)))
                          )
                            return !1;
                          M < b && ((b = M), a.copy(l));
                        }
                      if (e.uniqueAxes)
                        for (w = 0; w !== e.uniqueAxes.length; w++) {
                          if (
                            (r.vmult(e.uniqueAxes[w], u),
                            !1 === (M = this.testSepAxis(u, e, t, n, i, r)))
                          )
                            return !1;
                          M < b && ((b = M), a.copy(u));
                        }
                      else
                        for (
                          var E = s ? s.length : e.faces.length, w = 0;
                          w < E;
                          w++
                        ) {
                          var M;
                          if (
                            ((S = s ? s[w] : w),
                            u.copy(e.faceNormals[S]),
                            r.vmult(u, u),
                            !1 === (M = this.testSepAxis(u, e, t, n, i, r)))
                          )
                            return !1;
                          M < b && ((b = M), a.copy(u));
                        }
                      for (var A = 0; A !== this.uniqueEdges.length; A++) {
                        n.vmult(this.uniqueEdges[A], g);
                        for (var T = 0; T !== e.uniqueEdges.length; T++)
                          if (
                            (r.vmult(e.uniqueEdges[T], y),
                            g.cross(y, x),
                            !x.almostZero())
                          ) {
                            x.normalize();
                            var C = this.testSepAxis(x, e, t, n, i, r);
                            if (!1 === C) return !1;
                            C < b && ((b = C), a.copy(x));
                          }
                      }
                      return i.vsub(t, c), c.dot(a) > 0 && a.negate(a), !0;
                    };
                    var g = [],
                      y = [];
                    o.prototype.testSepAxis = function (e, t, n, i, r, a) {
                      o.project(this, e, n, i, g), o.project(t, e, r, a, y);
                      var s = g[0],
                        l = g[1],
                        u = y[0],
                        c = y[1];
                      if (s < c || u < l) return !1;
                      var h = s - c,
                        d = u - l;
                      return h < d ? h : d;
                    };
                    var x = new r(),
                      b = new r();
                    (o.prototype.calculateLocalInertia = function (e, t) {
                      this.computeLocalAABB(x, b);
                      var n = b.x - x.x,
                        i = b.y - x.y,
                        r = b.z - x.z;
                      (t.x = (1 / 12) * e * (2 * i * 2 * i + 2 * r * 2 * r)),
                        (t.y = (1 / 12) * e * (2 * n * 2 * n + 2 * r * 2 * r)),
                        (t.z = (1 / 12) * e * (2 * i * 2 * i + 2 * n * 2 * n));
                    }),
                      (o.prototype.getPlaneConstantOfFace = function (e) {
                        var t = this.faces[e],
                          n = this.faceNormals[e],
                          i = this.vertices[t[0]];
                        return -n.dot(i);
                      });
                    var _ = new r(),
                      w = new r(),
                      S = new r(),
                      E = new r(),
                      M = new r(),
                      A = new r(),
                      T = new r(),
                      C = new r();
                    (o.prototype.clipFaceAgainstHull = function (
                      e,
                      t,
                      n,
                      i,
                      r,
                      a,
                      o
                    ) {
                      for (
                        var s = _,
                          l = w,
                          u = S,
                          c = E,
                          h = M,
                          d = A,
                          p = T,
                          f = C,
                          m = i,
                          v = [],
                          g = -1,
                          y = Number.MAX_VALUE,
                          x = 0;
                        x < this.faces.length;
                        x++
                      ) {
                        s.copy(this.faceNormals[x]), n.vmult(s, s);
                        var b = s.dot(e);
                        b < y && ((y = b), (g = x));
                      }
                      if (!(g < 0)) {
                        var k = this.faces[g];
                        k.connectedFaces = [];
                        for (var P = 0; P < this.faces.length; P++)
                          for (var L = 0; L < this.faces[P].length; L++)
                            -1 !== k.indexOf(this.faces[P][L]) &&
                              P !== g &&
                              -1 === k.connectedFaces.indexOf(P) &&
                              k.connectedFaces.push(P);
                        m.length;
                        for (var R = k.length, I = 0; I < R; I++) {
                          var F = this.vertices[k[I]],
                            N = this.vertices[k[(I + 1) % R]];
                          F.vsub(N, l),
                            u.copy(l),
                            n.vmult(u, u),
                            t.vadd(u, u),
                            c.copy(this.faceNormals[g]),
                            n.vmult(c, c),
                            t.vadd(c, c),
                            u.cross(c, h),
                            h.negate(h),
                            d.copy(F),
                            n.vmult(d, d),
                            t.vadd(d, d),
                            d.dot(h);
                          var O = k.connectedFaces[I];
                          p.copy(this.faceNormals[O]);
                          var B = this.getPlaneConstantOfFace(O);
                          f.copy(p), n.vmult(f, f);
                          var D = B - f.dot(t);
                          for (
                            this.clipFaceAgainstPlane(m, v, f, D);
                            m.length;

                          )
                            m.shift();
                          for (; v.length; ) m.push(v.shift());
                        }
                        for (
                          p.copy(this.faceNormals[g]),
                            B = this.getPlaneConstantOfFace(g),
                            f.copy(p),
                            n.vmult(f, f),
                            D = B - f.dot(t),
                            P = 0;
                          P < m.length;
                          P++
                        ) {
                          var V = f.dot(m[P]) + D;
                          if (
                            (V <= r &&
                              (console.log(
                                "clamped: depth=" + V + " to minDist=" + r
                              ),
                              (V = r)),
                            V <= a)
                          ) {
                            var U = m[P];
                            if (V <= 0) {
                              var z = { point: U, normal: f, depth: V };
                              o.push(z);
                            }
                          }
                        }
                      }
                    }),
                      (o.prototype.clipFaceAgainstPlane = function (
                        e,
                        t,
                        n,
                        i
                      ) {
                        var a,
                          o,
                          s = e.length;
                        if (s < 2) return t;
                        var l = e[e.length - 1],
                          u = e[0];
                        a = n.dot(l) + i;
                        for (var c = 0; c < s; c++) {
                          if (((u = e[c]), (o = n.dot(u) + i), a < 0))
                            if (o < 0) (h = new r()).copy(u), t.push(h);
                            else {
                              var h = new r();
                              l.lerp(u, a / (a - o), h), t.push(h);
                            }
                          else
                            o < 0 &&
                              ((h = new r()),
                              l.lerp(u, a / (a - o), h),
                              t.push(h),
                              t.push(u));
                          (l = u), (a = o);
                        }
                        return t;
                      }),
                      (o.prototype.computeWorldVertices = function (e, t) {
                        for (
                          var n = this.vertices.length;
                          this.worldVertices.length < n;

                        )
                          this.worldVertices.push(new r());
                        for (
                          var i = this.vertices, a = this.worldVertices, o = 0;
                          o !== n;
                          o++
                        )
                          t.vmult(i[o], a[o]), e.vadd(a[o], a[o]);
                        this.worldVerticesNeedsUpdate = !1;
                      }),
                      new r(),
                      (o.prototype.computeLocalAABB = function (e, t) {
                        var n = this.vertices.length,
                          i = this.vertices;
                        e.set(
                          Number.MAX_VALUE,
                          Number.MAX_VALUE,
                          Number.MAX_VALUE
                        ),
                          t.set(
                            -Number.MAX_VALUE,
                            -Number.MAX_VALUE,
                            -Number.MAX_VALUE
                          );
                        for (var r = 0; r < n; r++) {
                          var a = i[r];
                          a.x < e.x ? (e.x = a.x) : a.x > t.x && (t.x = a.x),
                            a.y < e.y ? (e.y = a.y) : a.y > t.y && (t.y = a.y),
                            a.z < e.z ? (e.z = a.z) : a.z > t.z && (t.z = a.z);
                        }
                      }),
                      (o.prototype.computeWorldFaceNormals = function (e) {
                        for (
                          var t = this.faceNormals.length;
                          this.worldFaceNormals.length < t;

                        )
                          this.worldFaceNormals.push(new r());
                        for (
                          var n = this.faceNormals,
                            i = this.worldFaceNormals,
                            a = 0;
                          a !== t;
                          a++
                        )
                          e.vmult(n[a], i[a]);
                        this.worldFaceNormalsNeedsUpdate = !1;
                      }),
                      (o.prototype.updateBoundingSphereRadius = function () {
                        for (
                          var e = 0, t = this.vertices, n = 0, i = t.length;
                          n !== i;
                          n++
                        ) {
                          var r = t[n].norm2();
                          r > e && (e = r);
                        }
                        this.boundingSphereRadius = Math.sqrt(e);
                      });
                    var k = new r();
                    (o.prototype.calculateWorldAABB = function (e, t, n, i) {
                      for (
                        var r,
                          a,
                          o,
                          s,
                          l,
                          u,
                          c = this.vertices.length,
                          h = this.vertices,
                          d = 0;
                        d < c;
                        d++
                      ) {
                        k.copy(h[d]), t.vmult(k, k), e.vadd(k, k);
                        var p = k;
                        (p.x < r || void 0 === r) && (r = p.x),
                          (p.x > s || void 0 === s) && (s = p.x),
                          (p.y < a || void 0 === a) && (a = p.y),
                          (p.y > l || void 0 === l) && (l = p.y),
                          (p.z < o || void 0 === o) && (o = p.z),
                          (p.z > u || void 0 === u) && (u = p.z);
                      }
                      n.set(r, a, o), i.set(s, l, u);
                    }),
                      (o.prototype.volume = function () {
                        return (4 * Math.PI * this.boundingSphereRadius) / 3;
                      }),
                      (o.prototype.getAveragePointLocal = function (e) {
                        e = e || new r();
                        for (
                          var t = this.vertices.length,
                            n = this.vertices,
                            i = 0;
                          i < t;
                          i++
                        )
                          e.vadd(n[i], e);
                        return e.mult(1 / t, e), e;
                      }),
                      (o.prototype.transformAllPoints = function (e, t) {
                        var n = this.vertices.length,
                          i = this.vertices;
                        if (t) {
                          for (var r = 0; r < n; r++) {
                            var a = i[r];
                            t.vmult(a, a);
                          }
                          for (r = 0; r < this.faceNormals.length; r++)
                            (a = this.faceNormals[r]), t.vmult(a, a);
                        }
                        if (e) for (r = 0; r < n; r++) (a = i[r]).vadd(e, a);
                      });
                    var P = new r(),
                      L = new r(),
                      R = new r();
                    (o.prototype.pointIsInside = function (e) {
                      var t = this.vertices.length,
                        n = this.vertices,
                        i = this.faces,
                        r = this.faceNormals,
                        a = this.faces.length,
                        o = P;
                      this.getAveragePointLocal(o);
                      for (var s = 0; s < a; s++) {
                        this.faces[s].length, (t = r[s]);
                        var l = n[i[s][0]],
                          u = L;
                        e.vsub(l, u);
                        var c = t.dot(u),
                          h = R;
                        o.vsub(l, h);
                        var d = t.dot(h);
                        if ((c < 0 && d > 0) || (c > 0 && d < 0)) return !1;
                      }
                      return -1;
                    }),
                      new r();
                    var I = new r(),
                      F = new r();
                    o.project = function (e, t, n, i, r) {
                      var o = e.vertices.length,
                        s = I,
                        l = 0,
                        u = 0,
                        c = F,
                        h = e.vertices;
                      c.setZero(),
                        a.vectorToLocalFrame(n, i, t, s),
                        a.pointToLocalFrame(n, i, c, c);
                      var d = c.dot(s);
                      u = l = h[0].dot(s);
                      for (var p = 1; p < o; p++) {
                        var f = h[p].dot(s);
                        f > l && (l = f), f < u && (u = f);
                      }
                      if ((u -= d) > (l -= d)) {
                        var m = u;
                        (u = l), (l = m);
                      }
                      (r[0] = l), (r[1] = u);
                    };
                  },
                  {
                    "../math/Quaternion": 29,
                    "../math/Transform": 30,
                    "../math/Vec3": 31,
                    "./Shape": 44,
                  },
                ],
                40: [
                  function (e, t, n) {
                    (t.exports = a), e("./Shape");
                    var i = e("../math/Vec3"),
                      r = (e("../math/Quaternion"), e("./ConvexPolyhedron"));
                    function a(e, t, n, a) {
                      var o = a,
                        s = [],
                        l = [],
                        u = [],
                        c = [],
                        h = [],
                        d = Math.cos,
                        p = Math.sin;
                      s.push(new i(t * d(0), t * p(0), 0.5 * -n)),
                        c.push(0),
                        s.push(new i(e * d(0), e * p(0), 0.5 * n)),
                        h.push(1);
                      for (var f = 0; f < o; f++) {
                        var m = ((2 * Math.PI) / o) * (f + 1),
                          v = ((2 * Math.PI) / o) * (f + 0.5);
                        f < o - 1
                          ? (s.push(new i(t * d(m), t * p(m), 0.5 * -n)),
                            c.push(2 * f + 2),
                            s.push(new i(e * d(m), e * p(m), 0.5 * n)),
                            h.push(2 * f + 3),
                            u.push([2 * f + 2, 2 * f + 3, 2 * f + 1, 2 * f]))
                          : u.push([0, 1, 2 * f + 1, 2 * f]),
                          (o % 2 === 1 || f < o / 2) &&
                            l.push(new i(d(v), p(v), 0));
                      }
                      u.push(h), l.push(new i(0, 0, 1));
                      var g = [];
                      for (f = 0; f < c.length; f++)
                        g.push(c[c.length - f - 1]);
                      u.push(g), r.call(this, s, u, l);
                    }
                    a.prototype = new r();
                  },
                  {
                    "../math/Quaternion": 29,
                    "../math/Vec3": 31,
                    "./ConvexPolyhedron": 39,
                    "./Shape": 44,
                  },
                ],
                41: [
                  function (e, t, n) {
                    var i = e("./Shape"),
                      r = e("./ConvexPolyhedron"),
                      a = e("../math/Vec3"),
                      o = e("../utils/Utils");
                    function s(e, t) {
                      (t = o.defaults(t, {
                        maxValue: null,
                        minValue: null,
                        elementSize: 1,
                      })),
                        (this.data = e),
                        (this.maxValue = t.maxValue),
                        (this.minValue = t.minValue),
                        (this.elementSize = t.elementSize),
                        null === t.minValue && this.updateMinValue(),
                        null === t.maxValue && this.updateMaxValue(),
                        (this.cacheEnabled = !0),
                        i.call(this, { type: i.types.HEIGHTFIELD }),
                        (this.pillarConvex = new r()),
                        (this.pillarOffset = new a()),
                        this.updateBoundingSphereRadius(),
                        (this._cachedPillars = {});
                    }
                    (t.exports = s),
                      (s.prototype = new i()),
                      (s.prototype.update = function () {
                        this._cachedPillars = {};
                      }),
                      (s.prototype.updateMinValue = function () {
                        for (
                          var e = this.data, t = e[0][0], n = 0;
                          n !== e.length;
                          n++
                        )
                          for (var i = 0; i !== e[n].length; i++) {
                            var r = e[n][i];
                            r < t && (t = r);
                          }
                        this.minValue = t;
                      }),
                      (s.prototype.updateMaxValue = function () {
                        for (
                          var e = this.data, t = e[0][0], n = 0;
                          n !== e.length;
                          n++
                        )
                          for (var i = 0; i !== e[n].length; i++) {
                            var r = e[n][i];
                            r > t && (t = r);
                          }
                        this.maxValue = t;
                      }),
                      (s.prototype.setHeightValueAtIndex = function (e, t, n) {
                        (this.data[e][t] = n),
                          this.clearCachedConvexTrianglePillar(e, t, !1),
                          e > 0 &&
                            (this.clearCachedConvexTrianglePillar(e - 1, t, !0),
                            this.clearCachedConvexTrianglePillar(e - 1, t, !1)),
                          t > 0 &&
                            (this.clearCachedConvexTrianglePillar(e, t - 1, !0),
                            this.clearCachedConvexTrianglePillar(e, t - 1, !1)),
                          t > 0 &&
                            e > 0 &&
                            this.clearCachedConvexTrianglePillar(
                              e - 1,
                              t - 1,
                              !0
                            );
                      }),
                      (s.prototype.getRectMinMax = function (e, t, n, i, r) {
                        r = r || [];
                        for (
                          var a = this.data, o = this.minValue, s = e;
                          s <= n;
                          s++
                        )
                          for (var l = t; l <= i; l++) {
                            var u = a[s][l];
                            u > o && (o = u);
                          }
                        (r[0] = this.minValue), (r[1] = o);
                      }),
                      (s.prototype.getIndexOfPosition = function (e, t, n, i) {
                        var r = this.elementSize,
                          a = this.data,
                          o = Math.floor(e / r),
                          s = Math.floor(t / r);
                        return (
                          (n[0] = o),
                          (n[1] = s),
                          i &&
                            (o < 0 && (o = 0),
                            s < 0 && (s = 0),
                            o >= a.length - 1 && (o = a.length - 1),
                            s >= a[0].length - 1 && (s = a[0].length - 1)),
                          !(
                            o < 0 ||
                            s < 0 ||
                            o >= a.length - 1 ||
                            s >= a[0].length - 1
                          )
                        );
                      });
                    var l = [],
                      u = new a(),
                      c = new a(),
                      h = new a(),
                      d = new a();
                    s.prototype.getTriangleAt = function (e, t, n, i, r, a) {
                      var o = l;
                      this.getIndexOfPosition(e, t, o, n);
                      var s = o[0],
                        u = o[1],
                        c = this.data;
                      n &&
                        ((s = Math.min(c.length - 2, Math.max(0, s))),
                        (u = Math.min(c[0].length - 2, Math.max(0, u))));
                      var h = this.elementSize,
                        d =
                          Math.pow(e / h - s, 2) + Math.pow(t / h - u, 2) >
                          Math.pow(e / h - (s + 1), 2) +
                            Math.pow(t / h - (u + 1), 2);
                      return this.getTriangle(s, u, d, i, r, a), d;
                    };
                    var p = new a(),
                      f = new a(),
                      m = new a(),
                      v = new a(),
                      g = new a();
                    (s.prototype.getNormalAt = function (e, t, n, i) {
                      var r = p,
                        a = f,
                        o = m,
                        s = v,
                        l = g;
                      this.getTriangleAt(e, t, n, r, a, o),
                        a.vsub(r, s),
                        o.vsub(r, l),
                        s.cross(l, i),
                        i.normalize();
                    }),
                      (s.prototype.getAabbAtIndex = function (e, t, n) {
                        var i = this.data,
                          r = this.elementSize;
                        n.lowerBound.set(e * r, t * r, i[e][t]),
                          n.upperBound.set(
                            (e + 1) * r,
                            (t + 1) * r,
                            i[e + 1][t + 1]
                          );
                      }),
                      (s.prototype.getHeightAt = function (e, t, n) {
                        var i = this.data,
                          r = c,
                          a = h,
                          o = d,
                          s = l;
                        this.getIndexOfPosition(e, t, s, n);
                        var p = s[0],
                          f = s[1];
                        n &&
                          ((p = Math.min(i.length - 2, Math.max(0, p))),
                          (f = Math.min(i[0].length - 2, Math.max(0, f))));
                        var m = this.getTriangleAt(e, t, n, r, a, o);
                        !(function (e, t, n, i, r, a, o, s, l) {
                          (l.x =
                            ((a - s) * (e - o) + (o - r) * (t - s)) /
                            ((a - s) * (n - o) + (o - r) * (i - s))),
                            (l.y =
                              ((s - i) * (e - o) + (n - o) * (t - s)) /
                              ((a - s) * (n - o) + (o - r) * (i - s))),
                            (l.z = 1 - l.x - l.y);
                        })(e, t, r.x, r.y, a.x, a.y, o.x, o.y, u);
                        var v = u;
                        return m
                          ? i[p + 1][f + 1] * v.x +
                              i[p][f + 1] * v.y +
                              i[p + 1][f] * v.z
                          : i[p][f] * v.x +
                              i[p + 1][f] * v.y +
                              i[p][f + 1] * v.z;
                      }),
                      (s.prototype.getCacheConvexTrianglePillarKey = function (
                        e,
                        t,
                        n
                      ) {
                        return e + "_" + t + "_" + (n ? 1 : 0);
                      }),
                      (s.prototype.getCachedConvexTrianglePillar = function (
                        e,
                        t,
                        n
                      ) {
                        return this._cachedPillars[
                          this.getCacheConvexTrianglePillarKey(e, t, n)
                        ];
                      }),
                      (s.prototype.setCachedConvexTrianglePillar = function (
                        e,
                        t,
                        n,
                        i,
                        r
                      ) {
                        this._cachedPillars[
                          this.getCacheConvexTrianglePillarKey(e, t, n)
                        ] = { convex: i, offset: r };
                      }),
                      (s.prototype.clearCachedConvexTrianglePillar = function (
                        e,
                        t,
                        n
                      ) {
                        delete this._cachedPillars[
                          this.getCacheConvexTrianglePillarKey(e, t, n)
                        ];
                      }),
                      (s.prototype.getTriangle = function (e, t, n, i, r, a) {
                        var o = this.data,
                          s = this.elementSize;
                        n
                          ? (i.set((e + 1) * s, (t + 1) * s, o[e + 1][t + 1]),
                            r.set(e * s, (t + 1) * s, o[e][t + 1]),
                            a.set((e + 1) * s, t * s, o[e + 1][t]))
                          : (i.set(e * s, t * s, o[e][t]),
                            r.set((e + 1) * s, t * s, o[e + 1][t]),
                            a.set(e * s, (t + 1) * s, o[e][t + 1]));
                      }),
                      (s.prototype.getConvexTrianglePillar = function (
                        e,
                        t,
                        n
                      ) {
                        var i = this.pillarConvex,
                          o = this.pillarOffset;
                        if (this.cacheEnabled) {
                          if ((s = this.getCachedConvexTrianglePillar(e, t, n)))
                            return (
                              (this.pillarConvex = s.convex),
                              void (this.pillarOffset = s.offset)
                            );
                          (i = new r()),
                            (o = new a()),
                            (this.pillarConvex = i),
                            (this.pillarOffset = o);
                        }
                        var s = this.data,
                          l = this.elementSize,
                          u = i.faces;
                        i.vertices.length = 6;
                        for (var c = 0; c < 6; c++)
                          i.vertices[c] || (i.vertices[c] = new a());
                        for (u.length = 5, c = 0; c < 5; c++)
                          u[c] || (u[c] = []);
                        var h = i.vertices,
                          d =
                            (Math.min(
                              s[e][t],
                              s[e + 1][t],
                              s[e][t + 1],
                              s[e + 1][t + 1]
                            ) -
                              this.minValue) /
                              2 +
                            this.minValue;
                        n
                          ? (o.set((e + 0.75) * l, (t + 0.75) * l, d),
                            h[0].set(0.25 * l, 0.25 * l, s[e + 1][t + 1] - d),
                            h[1].set(-0.75 * l, 0.25 * l, s[e][t + 1] - d),
                            h[2].set(0.25 * l, -0.75 * l, s[e + 1][t] - d),
                            h[3].set(0.25 * l, 0.25 * l, -d - 1),
                            h[4].set(-0.75 * l, 0.25 * l, -d - 1),
                            h[5].set(0.25 * l, -0.75 * l, -d - 1),
                            (u[0][0] = 0),
                            (u[0][1] = 1),
                            (u[0][2] = 2),
                            (u[1][0] = 5),
                            (u[1][1] = 4),
                            (u[1][2] = 3),
                            (u[2][0] = 2),
                            (u[2][1] = 5),
                            (u[2][2] = 3),
                            (u[2][3] = 0),
                            (u[3][0] = 3),
                            (u[3][1] = 4),
                            (u[3][2] = 1),
                            (u[3][3] = 0),
                            (u[4][0] = 1),
                            (u[4][1] = 4),
                            (u[4][2] = 5),
                            (u[4][3] = 2))
                          : (o.set((e + 0.25) * l, (t + 0.25) * l, d),
                            h[0].set(-0.25 * l, -0.25 * l, s[e][t] - d),
                            h[1].set(0.75 * l, -0.25 * l, s[e + 1][t] - d),
                            h[2].set(-0.25 * l, 0.75 * l, s[e][t + 1] - d),
                            h[3].set(-0.25 * l, -0.25 * l, -d - 1),
                            h[4].set(0.75 * l, -0.25 * l, -d - 1),
                            h[5].set(-0.25 * l, 0.75 * l, -d - 1),
                            (u[0][0] = 0),
                            (u[0][1] = 1),
                            (u[0][2] = 2),
                            (u[1][0] = 5),
                            (u[1][1] = 4),
                            (u[1][2] = 3),
                            (u[2][0] = 0),
                            (u[2][1] = 2),
                            (u[2][2] = 5),
                            (u[2][3] = 3),
                            (u[3][0] = 1),
                            (u[3][1] = 0),
                            (u[3][2] = 3),
                            (u[3][3] = 4),
                            (u[4][0] = 4),
                            (u[4][1] = 5),
                            (u[4][2] = 2),
                            (u[4][3] = 1)),
                          i.computeNormals(),
                          i.computeEdges(),
                          i.updateBoundingSphereRadius(),
                          this.setCachedConvexTrianglePillar(e, t, n, i, o);
                      }),
                      (s.prototype.calculateLocalInertia = function (e, t) {
                        return (t = t || new a()).set(0, 0, 0), t;
                      }),
                      (s.prototype.volume = function () {
                        return Number.MAX_VALUE;
                      }),
                      (s.prototype.calculateWorldAABB = function (e, t, n, i) {
                        n.set(
                          -Number.MAX_VALUE,
                          -Number.MAX_VALUE,
                          -Number.MAX_VALUE
                        ),
                          i.set(
                            Number.MAX_VALUE,
                            Number.MAX_VALUE,
                            Number.MAX_VALUE
                          );
                      }),
                      (s.prototype.updateBoundingSphereRadius = function () {
                        var e = this.data,
                          t = this.elementSize;
                        this.boundingSphereRadius = new a(
                          e.length * t,
                          e[0].length * t,
                          Math.max(
                            Math.abs(this.maxValue),
                            Math.abs(this.minValue)
                          )
                        ).norm();
                      }),
                      (s.prototype.setHeightsFromImage = function (e, t) {
                        var n = document.createElement("canvas");
                        (n.width = e.width), (n.height = e.height);
                        var i = n.getContext("2d");
                        i.drawImage(e, 0, 0);
                        var r = i.getImageData(0, 0, e.width, e.height),
                          a = this.data;
                        (a.length = 0),
                          (this.elementSize = Math.abs(t.x) / r.width);
                        for (var o = 0; o < r.height; o++) {
                          for (var s = [], l = 0; l < r.width; l++) {
                            var u =
                              ((r.data[4 * (o * r.height + l)] +
                                r.data[4 * (o * r.height + l) + 1] +
                                r.data[4 * (o * r.height + l) + 2]) /
                                4 /
                                255) *
                              t.z;
                            t.x < 0 ? s.push(u) : s.unshift(u);
                          }
                          t.y < 0 ? a.unshift(s) : a.push(s);
                        }
                        this.updateMaxValue(),
                          this.updateMinValue(),
                          this.update();
                      });
                  },
                  {
                    "../math/Vec3": 31,
                    "../utils/Utils": 54,
                    "./ConvexPolyhedron": 39,
                    "./Shape": 44,
                  },
                ],
                42: [
                  function (e, t, n) {
                    t.exports = a;
                    var i = e("./Shape"),
                      r = e("../math/Vec3");
                    function a() {
                      i.call(this, { type: i.types.PARTICLE });
                    }
                    (a.prototype = new i()),
                      (a.prototype.constructor = a),
                      (a.prototype.calculateLocalInertia = function (e, t) {
                        return (t = t || new r()).set(0, 0, 0), t;
                      }),
                      (a.prototype.volume = function () {
                        return 0;
                      }),
                      (a.prototype.updateBoundingSphereRadius = function () {
                        this.boundingSphereRadius = 0;
                      }),
                      (a.prototype.calculateWorldAABB = function (e, t, n, i) {
                        n.copy(e), i.copy(e);
                      });
                  },
                  { "../math/Vec3": 31, "./Shape": 44 },
                ],
                43: [
                  function (e, t, n) {
                    t.exports = a;
                    var i = e("./Shape"),
                      r = e("../math/Vec3");
                    function a() {
                      i.call(this, { type: i.types.PLANE }),
                        (this.worldNormal = new r()),
                        (this.worldNormalNeedsUpdate = !0),
                        (this.boundingSphereRadius = Number.MAX_VALUE);
                    }
                    (a.prototype = new i()),
                      (a.prototype.constructor = a),
                      (a.prototype.computeWorldNormal = function (e) {
                        var t = this.worldNormal;
                        t.set(0, 0, 1),
                          e.vmult(t, t),
                          (this.worldNormalNeedsUpdate = !1);
                      }),
                      (a.prototype.calculateLocalInertia = function (e, t) {
                        return (t = t || new r());
                      }),
                      (a.prototype.volume = function () {
                        return Number.MAX_VALUE;
                      });
                    var o = new r();
                    (a.prototype.calculateWorldAABB = function (e, t, n, i) {
                      o.set(0, 0, 1), t.vmult(o, o);
                      var r = Number.MAX_VALUE;
                      n.set(-r, -r, -r),
                        i.set(r, r, r),
                        1 === o.x && (i.x = e.x),
                        1 === o.y && (i.y = e.y),
                        1 === o.z && (i.z = e.z),
                        -1 === o.x && (n.x = e.x),
                        -1 === o.y && (n.y = e.y),
                        -1 === o.z && (n.z = e.z);
                    }),
                      (a.prototype.updateBoundingSphereRadius = function () {
                        this.boundingSphereRadius = Number.MAX_VALUE;
                      });
                  },
                  { "../math/Vec3": 31, "./Shape": 44 },
                ],
                44: [
                  function (e, t, n) {
                    t.exports = i;
                    var i = e("./Shape");
                    function i(e) {
                      (e = e || {}),
                        (this.id = i.idCounter++),
                        (this.type = e.type || 0),
                        (this.boundingSphereRadius = 0),
                        (this.collisionResponse =
                          !e.collisionResponse || e.collisionResponse),
                        (this.collisionFilterGroup =
                          void 0 !== e.collisionFilterGroup
                            ? e.collisionFilterGroup
                            : 1),
                        (this.collisionFilterMask =
                          void 0 !== e.collisionFilterMask
                            ? e.collisionFilterMask
                            : -1),
                        (this.material = e.material ? e.material : null),
                        (this.body = null);
                    }
                    e("../math/Vec3"),
                      e("../math/Quaternion"),
                      e("../material/Material"),
                      (i.prototype.constructor = i),
                      (i.prototype.updateBoundingSphereRadius = function () {
                        throw (
                          "computeBoundingSphereRadius() not implemented for shape type " +
                          this.type
                        );
                      }),
                      (i.prototype.volume = function () {
                        throw (
                          "volume() not implemented for shape type " + this.type
                        );
                      }),
                      (i.prototype.calculateLocalInertia = function (e, t) {
                        throw (
                          "calculateLocalInertia() not implemented for shape type " +
                          this.type
                        );
                      }),
                      (i.idCounter = 0),
                      (i.types = {
                        SPHERE: 1,
                        PLANE: 2,
                        BOX: 4,
                        COMPOUND: 8,
                        CONVEXPOLYHEDRON: 16,
                        HEIGHTFIELD: 32,
                        PARTICLE: 64,
                        CYLINDER: 128,
                        TRIMESH: 256,
                      });
                  },
                  {
                    "../material/Material": 26,
                    "../math/Quaternion": 29,
                    "../math/Vec3": 31,
                    "./Shape": 44,
                  },
                ],
                45: [
                  function (e, t, n) {
                    t.exports = a;
                    var i = e("./Shape"),
                      r = e("../math/Vec3");
                    function a(e) {
                      if (
                        (i.call(this, { type: i.types.SPHERE }),
                        (this.radius = void 0 !== e ? e : 1),
                        this.radius < 0)
                      )
                        throw new Error(
                          "The sphere radius cannot be negative."
                        );
                      this.updateBoundingSphereRadius();
                    }
                    (a.prototype = new i()),
                      (a.prototype.constructor = a),
                      (a.prototype.calculateLocalInertia = function (e, t) {
                        t = t || new r();
                        var n = (2 * e * this.radius * this.radius) / 5;
                        return (t.x = n), (t.y = n), (t.z = n), t;
                      }),
                      (a.prototype.volume = function () {
                        return (4 * Math.PI * Math.pow(this.radius, 3)) / 3;
                      }),
                      (a.prototype.updateBoundingSphereRadius = function () {
                        this.boundingSphereRadius = this.radius;
                      }),
                      (a.prototype.calculateWorldAABB = function (e, t, n, i) {
                        for (
                          var r = this.radius, a = ["x", "y", "z"], o = 0;
                          o < a.length;
                          o++
                        ) {
                          var s = a[o];
                          (n[s] = e[s] - r), (i[s] = e[s] + r);
                        }
                      });
                  },
                  { "../math/Vec3": 31, "./Shape": 44 },
                ],
                46: [
                  function (e, t, n) {
                    t.exports = l;
                    var i = e("./Shape"),
                      r = e("../math/Vec3"),
                      a = (e("../math/Quaternion"), e("../math/Transform")),
                      o = e("../collision/AABB"),
                      s = e("../utils/Octree");
                    function l(e, t) {
                      i.call(this, { type: i.types.TRIMESH }),
                        (this.vertices = new Float32Array(e)),
                        (this.indices = new Int16Array(t)),
                        (this.normals = new Float32Array(t.length)),
                        (this.aabb = new o()),
                        (this.edges = null),
                        (this.scale = new r(1, 1, 1)),
                        (this.tree = new s()),
                        this.updateEdges(),
                        this.updateNormals(),
                        this.updateAABB(),
                        this.updateBoundingSphereRadius(),
                        this.updateTree();
                    }
                    (l.prototype = new i()), (l.prototype.constructor = l);
                    var u = new r();
                    l.prototype.updateTree = function () {
                      var e = this.tree;
                      e.reset(), e.aabb.copy(this.aabb);
                      var t = this.scale;
                      (e.aabb.lowerBound.x *= 1 / t.x),
                        (e.aabb.lowerBound.y *= 1 / t.y),
                        (e.aabb.lowerBound.z *= 1 / t.z),
                        (e.aabb.upperBound.x *= 1 / t.x),
                        (e.aabb.upperBound.y *= 1 / t.y),
                        (e.aabb.upperBound.z *= 1 / t.z);
                      for (
                        var n = new o(),
                          i = new r(),
                          a = new r(),
                          s = new r(),
                          l = [i, a, s],
                          u = 0;
                        u < this.indices.length / 3;
                        u++
                      ) {
                        var c = 3 * u;
                        this._getUnscaledVertex(this.indices[c], i),
                          this._getUnscaledVertex(this.indices[c + 1], a),
                          this._getUnscaledVertex(this.indices[c + 2], s),
                          n.setFromPoints(l),
                          e.insert(n, u);
                      }
                      e.removeEmptyNodes();
                    };
                    var c = new o();
                    (l.prototype.getTrianglesInAABB = function (e, t) {
                      c.copy(e);
                      var n = this.scale,
                        i = n.x,
                        r = n.y,
                        a = n.z,
                        o = c.lowerBound,
                        s = c.upperBound;
                      return (
                        (o.x /= i),
                        (o.y /= r),
                        (o.z /= a),
                        (s.x /= i),
                        (s.y /= r),
                        (s.z /= a),
                        this.tree.aabbQuery(c, t)
                      );
                    }),
                      (l.prototype.setScale = function (e) {
                        var t =
                            (this.scale.x === this.scale.y) === this.scale.z,
                          n = (e.x === e.y) === e.z;
                        (t && n) || this.updateNormals(),
                          this.scale.copy(e),
                          this.updateAABB(),
                          this.updateBoundingSphereRadius();
                      }),
                      (l.prototype.updateNormals = function () {
                        for (
                          var e = u, t = this.normals, n = 0;
                          n < this.indices.length / 3;
                          n++
                        ) {
                          var i = 3 * n,
                            r = this.indices[i],
                            a = this.indices[i + 1],
                            o = this.indices[i + 2];
                          this.getVertex(r, m),
                            this.getVertex(a, v),
                            this.getVertex(o, g),
                            l.computeNormal(v, m, g, e),
                            (t[i] = e.x),
                            (t[i + 1] = e.y),
                            (t[i + 2] = e.z);
                        }
                      }),
                      (l.prototype.updateEdges = function () {
                        for (
                          var e = {},
                            t = function (t, n) {
                              e[r < a ? r + "_" + a : a + "_" + r] = !0;
                            },
                            n = 0;
                          n < this.indices.length / 3;
                          n++
                        ) {
                          var i = 3 * n,
                            r = this.indices[i],
                            a = this.indices[i + 1];
                          this.indices[i + 2], t(), t(), t();
                        }
                        var o = Object.keys(e);
                        for (
                          this.edges = new Int16Array(2 * o.length), n = 0;
                          n < o.length;
                          n++
                        ) {
                          var s = o[n].split("_");
                          (this.edges[2 * n] = parseInt(s[0], 10)),
                            (this.edges[2 * n + 1] = parseInt(s[1], 10));
                        }
                      }),
                      (l.prototype.getEdgeVertex = function (e, t, n) {
                        var i = this.edges[2 * e + (t ? 1 : 0)];
                        this.getVertex(i, n);
                      });
                    var h = new r(),
                      d = new r();
                    l.prototype.getEdgeVector = function (e, t) {
                      var n = h,
                        i = d;
                      this.getEdgeVertex(e, 0, n),
                        this.getEdgeVertex(e, 1, i),
                        i.vsub(n, t);
                    };
                    var p = new r(),
                      f = new r();
                    l.computeNormal = function (e, t, n, i) {
                      t.vsub(e, f),
                        n.vsub(t, p),
                        p.cross(f, i),
                        i.isZero() || i.normalize();
                    };
                    var m = new r(),
                      v = new r(),
                      g = new r();
                    (l.prototype.getVertex = function (e, t) {
                      var n = this.scale;
                      return (
                        this._getUnscaledVertex(e, t),
                        (t.x *= n.x),
                        (t.y *= n.y),
                        (t.z *= n.z),
                        t
                      );
                    }),
                      (l.prototype._getUnscaledVertex = function (e, t) {
                        var n = 3 * e,
                          i = this.vertices;
                        return t.set(i[n], i[n + 1], i[n + 2]);
                      }),
                      (l.prototype.getWorldVertex = function (e, t, n, i) {
                        return (
                          this.getVertex(e, i),
                          a.pointToWorldFrame(t, n, i, i),
                          i
                        );
                      }),
                      (l.prototype.getTriangleVertices = function (e, t, n, i) {
                        var r = 3 * e;
                        this.getVertex(this.indices[r], t),
                          this.getVertex(this.indices[r + 1], n),
                          this.getVertex(this.indices[r + 2], i);
                      }),
                      (l.prototype.getNormal = function (e, t) {
                        var n = 3 * e;
                        return t.set(
                          this.normals[n],
                          this.normals[n + 1],
                          this.normals[n + 2]
                        );
                      });
                    var y = new o();
                    l.prototype.calculateLocalInertia = function (e, t) {
                      this.computeLocalAABB(y);
                      var n = y.upperBound.x - y.lowerBound.x,
                        i = y.upperBound.y - y.lowerBound.y,
                        r = y.upperBound.z - y.lowerBound.z;
                      return t.set(
                        (1 / 12) * e * (2 * i * 2 * i + 2 * r * 2 * r),
                        (1 / 12) * e * (2 * n * 2 * n + 2 * r * 2 * r),
                        (1 / 12) * e * (2 * i * 2 * i + 2 * n * 2 * n)
                      );
                    };
                    var x = new r();
                    (l.prototype.computeLocalAABB = function (e) {
                      var t = e.lowerBound,
                        n = e.upperBound,
                        i = this.vertices.length,
                        r = (this.vertices, x);
                      this.getVertex(0, r), t.copy(r), n.copy(r);
                      for (var a = 0; a !== i; a++)
                        this.getVertex(a, r),
                          r.x < t.x ? (t.x = r.x) : r.x > n.x && (n.x = r.x),
                          r.y < t.y ? (t.y = r.y) : r.y > n.y && (n.y = r.y),
                          r.z < t.z ? (t.z = r.z) : r.z > n.z && (n.z = r.z);
                    }),
                      (l.prototype.updateAABB = function () {
                        this.computeLocalAABB(this.aabb);
                      }),
                      (l.prototype.updateBoundingSphereRadius = function () {
                        for (
                          var e = 0,
                            t = this.vertices,
                            n = new r(),
                            i = 0,
                            a = t.length / 3;
                          i !== a;
                          i++
                        ) {
                          this.getVertex(i, n);
                          var o = n.norm2();
                          o > e && (e = o);
                        }
                        this.boundingSphereRadius = Math.sqrt(e);
                      }),
                      new r();
                    var b = new a(),
                      _ = new o();
                    (l.prototype.calculateWorldAABB = function (e, t, n, i) {
                      var r = b,
                        a = _;
                      (r.position = e),
                        (r.quaternion = t),
                        this.aabb.toWorldFrame(r, a),
                        n.copy(a.lowerBound),
                        i.copy(a.upperBound);
                    }),
                      (l.prototype.volume = function () {
                        return (4 * Math.PI * this.boundingSphereRadius) / 3;
                      }),
                      (l.createTorus = function (e, t, n, i, r) {
                        (e = e || 1),
                          (t = t || 0.5),
                          (n = n || 8),
                          (i = i || 6),
                          (r = r || 2 * Math.PI);
                        for (var a = [], o = [], s = 0; s <= n; s++)
                          for (var u = 0; u <= i; u++) {
                            var c = (u / i) * r,
                              h = (s / n) * Math.PI * 2,
                              d = (e + t * Math.cos(h)) * Math.cos(c),
                              p = (e + t * Math.cos(h)) * Math.sin(c),
                              f = t * Math.sin(h);
                            a.push(d, p, f);
                          }
                        for (s = 1; s <= n; s++)
                          for (u = 1; u <= i; u++) {
                            var m = (i + 1) * s + u - 1,
                              v = (i + 1) * (s - 1) + u - 1,
                              g = (i + 1) * (s - 1) + u,
                              y = (i + 1) * s + u;
                            o.push(m, v, y), o.push(v, g, y);
                          }
                        return new l(a, o);
                      });
                  },
                  {
                    "../collision/AABB": 3,
                    "../math/Quaternion": 29,
                    "../math/Transform": 30,
                    "../math/Vec3": 31,
                    "../utils/Octree": 51,
                    "./Shape": 44,
                  },
                ],
                47: [
                  function (e, t, n) {
                    (t.exports = r), e("../math/Vec3"), e("../math/Quaternion");
                    var i = e("./Solver");
                    function r() {
                      i.call(this),
                        (this.iterations = 10),
                        (this.tolerance = 1e-7);
                    }
                    r.prototype = new i();
                    var a = [],
                      o = [],
                      s = [];
                    r.prototype.solve = function (e, t) {
                      var n,
                        i,
                        r,
                        l,
                        u,
                        c = 0,
                        h = this.iterations,
                        d = this.tolerance * this.tolerance,
                        p = this.equations,
                        f = p.length,
                        m = t.bodies,
                        v = m.length,
                        g = e;
                      if (0 !== f)
                        for (var y = 0; y !== v; y++)
                          m[y].updateSolveMassProperties();
                      var x = o,
                        b = s,
                        _ = a;
                      for (
                        x.length = f, b.length = f, _.length = f, y = 0;
                        y !== f;
                        y++
                      ) {
                        var w = p[y];
                        (_[y] = 0),
                          (b[y] = w.computeB(g)),
                          (x[y] = 1 / w.computeC());
                      }
                      if (0 !== f) {
                        for (y = 0; y !== v; y++) {
                          var S = (A = m[y]).vlambda,
                            E = A.wlambda;
                          S.set(0, 0, 0), E.set(0, 0, 0);
                        }
                        for (c = 0; c !== h; c++) {
                          l = 0;
                          for (var M = 0; M !== f; M++)
                            (w = p[M]),
                              (n = b[M]),
                              (i = x[M]),
                              (u = _[M]) +
                                (r =
                                  i * (n - w.computeGWlambda() - w.eps * u)) <
                              w.minForce
                                ? (r = w.minForce - u)
                                : u + r > w.maxForce && (r = w.maxForce - u),
                              (_[M] += r),
                              (l += r > 0 ? r : -r),
                              w.addToWlambda(r);
                          if (l * l < d) break;
                        }
                        for (y = 0; y !== v; y++) {
                          var A,
                            T = (A = m[y]).velocity,
                            C = A.angularVelocity;
                          A.vlambda.vmul(A.linearFactor, A.vlambda),
                            T.vadd(A.vlambda, T),
                            A.wlambda.vmul(A.angularFactor, A.wlambda),
                            C.vadd(A.wlambda, C);
                        }
                        for (var k = p.length, P = 1 / g; k--; )
                          p[k].multiplier = _[k] * P;
                      }
                      return c;
                    };
                  },
                  {
                    "../math/Quaternion": 29,
                    "../math/Vec3": 31,
                    "./Solver": 48,
                  },
                ],
                48: [
                  function (e, t, n) {
                    function i() {
                      this.equations = [];
                    }
                    (t.exports = i),
                      (i.prototype.solve = function (e, t) {
                        return 0;
                      }),
                      (i.prototype.addEquation = function (e) {
                        e.enabled && this.equations.push(e);
                      }),
                      (i.prototype.removeEquation = function (e) {
                        var t = this.equations,
                          n = t.indexOf(e);
                        -1 !== n && t.splice(n, 1);
                      }),
                      (i.prototype.removeAllEquations = function () {
                        this.equations.length = 0;
                      });
                  },
                  {},
                ],
                49: [
                  function (e, t, n) {
                    (t.exports = a), e("../math/Vec3"), e("../math/Quaternion");
                    var i = e("./Solver"),
                      r = e("../objects/Body");
                    function a(e) {
                      for (
                        i.call(this),
                          this.iterations = 10,
                          this.tolerance = 1e-7,
                          this.subsolver = e,
                          this.nodes = [],
                          this.nodePool = [];
                        this.nodePool.length < 128;

                      )
                        this.nodePool.push(this.createNode());
                    }
                    a.prototype = new i();
                    var o = [],
                      s = [],
                      l = { bodies: [] },
                      u = r.STATIC;
                    function c(e) {
                      for (var t = e.length, n = 0; n !== t; n++) {
                        var i = e[n];
                        if (!i.visited && !(i.body.type & u)) return i;
                      }
                      return !1;
                    }
                    var h = [];
                    function d(e, t, n, i) {
                      for (h.push(e), e.visited = !0, t(e, n, i); h.length; )
                        for (var r, a = h.pop(); (r = c(a.children)); )
                          (r.visited = !0), t(r, n, i), h.push(r);
                    }
                    function p(e, t, n) {
                      t.push(e.body);
                      for (var i = e.eqs.length, r = 0; r !== i; r++) {
                        var a = e.eqs[r];
                        -1 === n.indexOf(a) && n.push(a);
                      }
                    }
                    function f(e, t) {
                      return t.id - e.id;
                    }
                    (a.prototype.createNode = function () {
                      return { body: null, children: [], eqs: [], visited: !1 };
                    }),
                      (a.prototype.solve = function (e, t) {
                        for (
                          var n = o,
                            i = this.nodePool,
                            r = t.bodies,
                            a = this.equations,
                            u = a.length,
                            h = r.length,
                            m = this.subsolver;
                          i.length < h;

                        )
                          i.push(this.createNode());
                        n.length = h;
                        for (var v = 0; v < h; v++) n[v] = i[v];
                        for (v = 0; v !== h; v++) {
                          var g = n[v];
                          (g.body = r[v]),
                            (g.children.length = 0),
                            (g.eqs.length = 0),
                            (g.visited = !1);
                        }
                        for (var y = 0; y !== u; y++) {
                          var x = a[y],
                            b = ((v = r.indexOf(x.bi)), r.indexOf(x.bj)),
                            _ = n[v],
                            w = n[b];
                          _.children.push(w),
                            _.eqs.push(x),
                            w.children.push(_),
                            w.eqs.push(x);
                        }
                        var S,
                          E = 0,
                          M = s;
                        (m.tolerance = this.tolerance),
                          (m.iterations = this.iterations);
                        for (var A = l; (S = c(n)); ) {
                          (M.length = 0),
                            (A.bodies.length = 0),
                            d(S, p, A.bodies, M);
                          var T = M.length;
                          for (M = M.sort(f), v = 0; v !== T; v++)
                            m.addEquation(M[v]);
                          m.solve(e, A), m.removeAllEquations(), E++;
                        }
                        return E;
                      });
                  },
                  {
                    "../math/Quaternion": 29,
                    "../math/Vec3": 31,
                    "../objects/Body": 32,
                    "./Solver": 48,
                  },
                ],
                50: [
                  function (e, t, n) {
                    function i() {}
                    (t.exports = i),
                      (i.prototype.addEventListener = function (e, t) {
                        void 0 === this._listeners && (this._listeners = {});
                        var n = this._listeners;
                        return (
                          void 0 === n[e] && (n[e] = []),
                          -1 === n[e].indexOf(t) && n[e].push(t),
                          this
                        );
                      }),
                      (i.prototype.hasEventListener = function (e, t) {
                        if (void 0 === this._listeners) return !1;
                        var n = this._listeners;
                        return void 0 !== n[e] && -1 !== n[e].indexOf(t);
                      }),
                      (i.prototype.hasAnyEventListener = function (e) {
                        return (
                          void 0 !== this._listeners &&
                          void 0 !== this._listeners[e]
                        );
                      }),
                      (i.prototype.removeEventListener = function (e, t) {
                        if (void 0 === this._listeners) return this;
                        var n = this._listeners;
                        if (void 0 === n[e]) return this;
                        var i = n[e].indexOf(t);
                        return -1 !== i && n[e].splice(i, 1), this;
                      }),
                      (i.prototype.dispatchEvent = function (e) {
                        if (void 0 === this._listeners) return this;
                        var t = this._listeners[e.type];
                        if (void 0 !== t) {
                          e.target = this;
                          for (var n = 0, i = t.length; n < i; n++)
                            t[n].call(this, e);
                        }
                        return this;
                      });
                  },
                  {},
                ],
                51: [
                  function (e, t, n) {
                    var i = e("../collision/AABB"),
                      r = e("../math/Vec3");
                    function a(e) {
                      (e = e || {}),
                        (this.root = e.root || null),
                        (this.aabb = e.aabb ? e.aabb.clone() : new i()),
                        (this.data = []),
                        (this.children = []);
                    }
                    function o(e, t) {
                      ((t = t || {}).root = null),
                        (t.aabb = e),
                        a.call(this, t),
                        (this.maxDepth =
                          "undefined" !== typeof t.maxDepth ? t.maxDepth : 8);
                    }
                    (t.exports = o),
                      (o.prototype = new a()),
                      (a.prototype.reset = function (e, t) {
                        this.children.length = this.data.length = 0;
                      }),
                      (a.prototype.insert = function (e, t, n) {
                        var i = this.data;
                        if (((n = n || 0), !this.aabb.contains(e))) return !1;
                        var r = this.children;
                        if (n < (this.maxDepth || this.root.maxDepth)) {
                          var a = !1;
                          r.length || (this.subdivide(), (a = !0));
                          for (var o = 0; 8 !== o; o++)
                            if (r[o].insert(e, t, n + 1)) return !0;
                          a && (r.length = 0);
                        }
                        return i.push(t), !0;
                      });
                    var s = new r();
                    (a.prototype.subdivide = function () {
                      var e = this.aabb,
                        t = e.lowerBound,
                        n = e.upperBound,
                        o = this.children;
                      o.push(
                        new a({ aabb: new i({ lowerBound: new r(0, 0, 0) }) }),
                        new a({ aabb: new i({ lowerBound: new r(1, 0, 0) }) }),
                        new a({ aabb: new i({ lowerBound: new r(1, 1, 0) }) }),
                        new a({ aabb: new i({ lowerBound: new r(1, 1, 1) }) }),
                        new a({ aabb: new i({ lowerBound: new r(0, 1, 1) }) }),
                        new a({ aabb: new i({ lowerBound: new r(0, 0, 1) }) }),
                        new a({ aabb: new i({ lowerBound: new r(1, 0, 1) }) }),
                        new a({ aabb: new i({ lowerBound: new r(0, 1, 0) }) })
                      ),
                        n.vsub(t, s),
                        s.scale(0.5, s);
                      for (var l = this.root || this, u = 0; 8 !== u; u++) {
                        var c = o[u];
                        c.root = l;
                        var h = c.aabb.lowerBound;
                        (h.x *= s.x),
                          (h.y *= s.y),
                          (h.z *= s.z),
                          h.vadd(t, h),
                          h.vadd(s, c.aabb.upperBound);
                      }
                    }),
                      (a.prototype.aabbQuery = function (e, t) {
                        this.data, this.children;
                        for (var n = [this]; n.length; ) {
                          var i = n.pop();
                          i.aabb.overlaps(e) &&
                            Array.prototype.push.apply(t, i.data),
                            Array.prototype.push.apply(n, i.children);
                        }
                        return t;
                      });
                    var l = new i();
                    (a.prototype.rayQuery = function (e, t, n) {
                      return (
                        e.getAABB(l),
                        l.toLocalFrame(t, l),
                        this.aabbQuery(l, n),
                        n
                      );
                    }),
                      (a.prototype.removeEmptyNodes = function () {
                        for (var e = this.children.length - 1; e >= 0; e--)
                          this.children[e].removeEmptyNodes(),
                            this.children[e].children.length ||
                              this.children[e].data.length ||
                              this.children.splice(e, 1);
                      });
                  },
                  { "../collision/AABB": 3, "../math/Vec3": 31 },
                ],
                52: [
                  function (e, t, n) {
                    function i() {
                      (this.objects = []), (this.type = Object);
                    }
                    (t.exports = i),
                      (i.prototype.release = function () {
                        for (var e = arguments.length, t = 0; t !== e; t++)
                          this.objects.push(arguments[t]);
                        return this;
                      }),
                      (i.prototype.get = function () {
                        return 0 === this.objects.length
                          ? this.constructObject()
                          : this.objects.pop();
                      }),
                      (i.prototype.constructObject = function () {
                        throw new Error(
                          "constructObject() not implemented in this Pool subclass yet!"
                        );
                      }),
                      (i.prototype.resize = function (e) {
                        for (var t = this.objects; t.length > e; ) t.pop();
                        for (; t.length < e; ) t.push(this.constructObject());
                        return this;
                      });
                  },
                  {},
                ],
                53: [
                  function (e, t, n) {
                    function i() {
                      this.data = { keys: [] };
                    }
                    (t.exports = i),
                      (i.prototype.get = function (e, t) {
                        if (e > t) {
                          var n = t;
                          (t = e), (e = n);
                        }
                        return this.data[e + "-" + t];
                      }),
                      (i.prototype.set = function (e, t, n) {
                        if (e > t) {
                          var i = t;
                          (t = e), (e = i);
                        }
                        var r = e + "-" + t;
                        this.get(e, t) || this.data.keys.push(r),
                          (this.data[r] = n);
                      }),
                      (i.prototype.reset = function () {
                        for (var e = this.data, t = e.keys; t.length > 0; )
                          delete e[t.pop()];
                      });
                  },
                  {},
                ],
                54: [
                  function (e, t, n) {
                    function i() {}
                    (t.exports = i),
                      (i.defaults = function (e, t) {
                        for (var n in ((e = e || {}), t))
                          n in e || (e[n] = t[n]);
                        return e;
                      });
                  },
                  {},
                ],
                55: [
                  function (e, t, n) {
                    t.exports = a;
                    var i = e("../math/Vec3"),
                      r = e("./Pool");
                    function a() {
                      r.call(this), (this.type = i);
                    }
                    (a.prototype = new r()),
                      (a.prototype.constructObject = function () {
                        return new i();
                      });
                  },
                  { "../math/Vec3": 31, "./Pool": 52 },
                ],
                56: [
                  function (e, t, n) {
                    t.exports = p;
                    var i = e("../collision/AABB"),
                      r = e("../objects/Body"),
                      a = e("../shapes/Shape"),
                      o = e("../collision/Ray"),
                      s = e("../math/Vec3"),
                      l = e("../math/Transform"),
                      u =
                        (e("../shapes/ConvexPolyhedron"),
                        e("../math/Quaternion")),
                      c = (e("../solver/Solver"), e("../utils/Vec3Pool")),
                      h = e("../equations/ContactEquation"),
                      d = e("../equations/FrictionEquation");
                    function p(e) {
                      (this.contactPointPool = []),
                        (this.frictionEquationPool = []),
                        (this.result = []),
                        (this.frictionResult = []),
                        (this.v3pool = new c()),
                        (this.world = e),
                        (this.currentContactMaterial = null),
                        (this.enableFrictionReduction = !1);
                    }
                    (p.prototype.createContactEquation = function (
                      e,
                      t,
                      n,
                      i,
                      r,
                      a
                    ) {
                      var o;
                      this.contactPointPool.length
                        ? (((o = this.contactPointPool.pop()).bi = e),
                          (o.bj = t))
                        : (o = new h(e, t)),
                        (o.enabled =
                          e.collisionResponse &&
                          t.collisionResponse &&
                          n.collisionResponse &&
                          i.collisionResponse);
                      var s = this.currentContactMaterial;
                      (o.restitution = s.restitution),
                        o.setSpookParams(
                          s.contactEquationStiffness,
                          s.contactEquationRelaxation,
                          this.world.dt
                        );
                      var l = n.material || e.material,
                        u = i.material || t.material;
                      return (
                        l &&
                          u &&
                          l.restitution >= 0 &&
                          u.restitution >= 0 &&
                          (o.restitution = l.restitution * u.restitution),
                        (o.si = r || n),
                        (o.sj = a || i),
                        o
                      );
                    }),
                      (p.prototype.createFrictionEquationsFromContact =
                        function (e, t) {
                          var n = e.bi,
                            i = e.bj,
                            r = e.si,
                            a = e.sj,
                            o = this.world,
                            s = this.currentContactMaterial,
                            l = s.friction,
                            u = r.material || n.material,
                            c = a.material || i.material;
                          if (
                            (u &&
                              c &&
                              u.friction >= 0 &&
                              c.friction >= 0 &&
                              (l = u.friction * c.friction),
                            l > 0)
                          ) {
                            var h = l * o.gravity.length(),
                              p = n.invMass + i.invMass;
                            p > 0 && (p = 1 / p);
                            var f = this.frictionEquationPool,
                              m = f.length ? f.pop() : new d(n, i, h * p),
                              v = f.length ? f.pop() : new d(n, i, h * p);
                            return (
                              (m.bi = v.bi = n),
                              (m.bj = v.bj = i),
                              (m.minForce = v.minForce = -h * p),
                              (m.maxForce = v.maxForce = h * p),
                              m.ri.copy(e.ri),
                              m.rj.copy(e.rj),
                              v.ri.copy(e.ri),
                              v.rj.copy(e.rj),
                              e.ni.tangents(m.t, v.t),
                              m.setSpookParams(
                                s.frictionEquationStiffness,
                                s.frictionEquationRelaxation,
                                o.dt
                              ),
                              v.setSpookParams(
                                s.frictionEquationStiffness,
                                s.frictionEquationRelaxation,
                                o.dt
                              ),
                              (m.enabled = v.enabled = e.enabled),
                              t.push(m, v),
                              !0
                            );
                          }
                          return !1;
                        });
                    var f = new s(),
                      m = new s(),
                      v = new s();
                    p.prototype.createFrictionFromAverage = function (e) {
                      var t = this.result[this.result.length - 1];
                      if (
                        this.createFrictionEquationsFromContact(
                          t,
                          this.frictionResult
                        ) &&
                        1 !== e
                      ) {
                        var n =
                            this.frictionResult[this.frictionResult.length - 2],
                          i =
                            this.frictionResult[this.frictionResult.length - 1];
                        f.setZero(), m.setZero(), v.setZero();
                        for (var r = t.bi, a = (t.bj, 0); a !== e; a++)
                          (t = this.result[this.result.length - 1 - a])
                            .bodyA !== r
                            ? (f.vadd(t.ni, f),
                              m.vadd(t.ri, m),
                              v.vadd(t.rj, v))
                            : (f.vsub(t.ni, f),
                              m.vadd(t.rj, m),
                              v.vadd(t.ri, v));
                        var o = 1 / e;
                        m.scale(o, n.ri),
                          v.scale(o, n.rj),
                          i.ri.copy(n.ri),
                          i.rj.copy(n.rj),
                          f.normalize(),
                          f.tangents(n.t, i.t);
                      }
                    };
                    var g = new s(),
                      y = new s(),
                      x = new u(),
                      b = new u();
                    (p.prototype.getContacts = function (e, t, n, i, a, o, s) {
                      (this.contactPointPool = a),
                        (this.frictionEquationPool = s),
                        (this.result = i),
                        (this.frictionResult = o);
                      for (
                        var l = x, u = b, c = g, h = y, d = 0, p = e.length;
                        d !== p;
                        d++
                      ) {
                        var f = e[d],
                          m = t[d],
                          v = null;
                        f.material &&
                          m.material &&
                          (v =
                            n.getContactMaterial(f.material, m.material) ||
                            null);
                        for (
                          var _ =
                              (f.type & r.KINEMATIC && m.type & r.STATIC) ||
                              (f.type & r.STATIC && m.type & r.KINEMATIC) ||
                              (f.type & r.KINEMATIC && m.type & r.KINEMATIC),
                            w = 0;
                          w < f.shapes.length;
                          w++
                        ) {
                          f.quaternion.mult(f.shapeOrientations[w], l),
                            f.quaternion.vmult(f.shapeOffsets[w], c),
                            c.vadd(f.position, c);
                          for (
                            var S = f.shapes[w], E = 0;
                            E < m.shapes.length;
                            E++
                          ) {
                            m.quaternion.mult(m.shapeOrientations[E], u),
                              m.quaternion.vmult(m.shapeOffsets[E], h),
                              h.vadd(m.position, h);
                            var M = m.shapes[E];
                            if (
                              0 !==
                                (S.collisionFilterGroup &
                                  M.collisionFilterMask) &&
                              0 !==
                                (M.collisionFilterGroup &
                                  S.collisionFilterMask) &&
                              !(
                                c.distanceTo(h) >
                                S.boundingSphereRadius + M.boundingSphereRadius
                              )
                            ) {
                              var A = null;
                              S.material &&
                                M.material &&
                                (A =
                                  n.getContactMaterial(
                                    S.material,
                                    M.material
                                  ) || null),
                                (this.currentContactMaterial =
                                  A || v || n.defaultContactMaterial);
                              var T = this[S.type | M.type];
                              T &&
                                (S.type < M.type
                                  ? T.call(
                                      this,
                                      S,
                                      M,
                                      c,
                                      h,
                                      l,
                                      u,
                                      f,
                                      m,
                                      S,
                                      M,
                                      _
                                    )
                                  : T.call(
                                      this,
                                      M,
                                      S,
                                      h,
                                      c,
                                      u,
                                      l,
                                      m,
                                      f,
                                      S,
                                      M,
                                      _
                                    )) &&
                                _ &&
                                (n.shapeOverlapKeeper.set(S.id, M.id),
                                n.bodyOverlapKeeper.set(f.id, m.id));
                            }
                          }
                        }
                      }
                    }),
                      (p.prototype[a.types.BOX | a.types.BOX] =
                        p.prototype.boxBox =
                          function (e, t, n, i, r, a, o, s, l, u, c) {
                            return (
                              (e.convexPolyhedronRepresentation.material =
                                e.material),
                              (t.convexPolyhedronRepresentation.material =
                                t.material),
                              (e.convexPolyhedronRepresentation.collisionResponse =
                                e.collisionResponse),
                              (t.convexPolyhedronRepresentation.collisionResponse =
                                t.collisionResponse),
                              this.convexConvex(
                                e.convexPolyhedronRepresentation,
                                t.convexPolyhedronRepresentation,
                                n,
                                i,
                                r,
                                a,
                                o,
                                s,
                                e,
                                t,
                                c
                              )
                            );
                          }),
                      (p.prototype[a.types.BOX | a.types.CONVEXPOLYHEDRON] =
                        p.prototype.boxConvex =
                          function (e, t, n, i, r, a, o, s, l, u, c) {
                            return (
                              (e.convexPolyhedronRepresentation.material =
                                e.material),
                              (e.convexPolyhedronRepresentation.collisionResponse =
                                e.collisionResponse),
                              this.convexConvex(
                                e.convexPolyhedronRepresentation,
                                t,
                                n,
                                i,
                                r,
                                a,
                                o,
                                s,
                                e,
                                t,
                                c
                              )
                            );
                          }),
                      (p.prototype[a.types.BOX | a.types.PARTICLE] =
                        p.prototype.boxParticle =
                          function (e, t, n, i, r, a, o, s, l, u, c) {
                            return (
                              (e.convexPolyhedronRepresentation.material =
                                e.material),
                              (e.convexPolyhedronRepresentation.collisionResponse =
                                e.collisionResponse),
                              this.convexParticle(
                                e.convexPolyhedronRepresentation,
                                t,
                                n,
                                i,
                                r,
                                a,
                                o,
                                s,
                                e,
                                t,
                                c
                              )
                            );
                          }),
                      (p.prototype[a.types.SPHERE] = p.prototype.sphereSphere =
                        function (e, t, n, i, r, a, o, s, l, u, c) {
                          if (c)
                            return (
                              n.distanceSquared(i) <
                              Math.pow(e.radius + t.radius, 2)
                            );
                          var h = this.createContactEquation(o, s, e, t, l, u);
                          i.vsub(n, h.ni),
                            h.ni.normalize(),
                            h.ri.copy(h.ni),
                            h.rj.copy(h.ni),
                            h.ri.mult(e.radius, h.ri),
                            h.rj.mult(-t.radius, h.rj),
                            h.ri.vadd(n, h.ri),
                            h.ri.vsub(o.position, h.ri),
                            h.rj.vadd(i, h.rj),
                            h.rj.vsub(s.position, h.rj),
                            this.result.push(h),
                            this.createFrictionEquationsFromContact(
                              h,
                              this.frictionResult
                            );
                        });
                    var _ = new s(),
                      w = new s(),
                      S = new s();
                    p.prototype[a.types.PLANE | a.types.TRIMESH] =
                      p.prototype.planeTrimesh = function (
                        e,
                        t,
                        n,
                        i,
                        r,
                        a,
                        o,
                        u,
                        c,
                        h,
                        d
                      ) {
                        var p = new s(),
                          f = _;
                        f.set(0, 0, 1), r.vmult(f, f);
                        for (var m = 0; m < t.vertices.length / 3; m++) {
                          t.getVertex(m, p);
                          var v = new s();
                          v.copy(p), l.pointToWorldFrame(i, a, v, p);
                          var g = w;
                          if ((p.vsub(n, g), f.dot(g) <= 0)) {
                            if (d) return !0;
                            var y = this.createContactEquation(
                              o,
                              u,
                              e,
                              t,
                              c,
                              h
                            );
                            y.ni.copy(f);
                            var x = S;
                            f.scale(g.dot(f), x),
                              p.vsub(x, x),
                              y.ri.copy(x),
                              y.ri.vsub(o.position, y.ri),
                              y.rj.copy(p),
                              y.rj.vsub(u.position, y.rj),
                              this.result.push(y),
                              this.createFrictionEquationsFromContact(
                                y,
                                this.frictionResult
                              );
                          }
                        }
                      };
                    var E = new s(),
                      M = new s(),
                      A = (new s(), new s()),
                      T = new s(),
                      C = new s(),
                      k = new s(),
                      P = new s(),
                      L = new s(),
                      R = new s(),
                      I = new s(),
                      F = new s(),
                      N = new s(),
                      O = new s(),
                      B = new i(),
                      D = [];
                    p.prototype[a.types.SPHERE | a.types.TRIMESH] =
                      p.prototype.sphereTrimesh = function (
                        e,
                        t,
                        n,
                        i,
                        r,
                        a,
                        s,
                        u,
                        c,
                        h,
                        d
                      ) {
                        var p = C,
                          f = k,
                          m = P,
                          v = L,
                          g = R,
                          y = I,
                          x = B,
                          b = T,
                          _ = M,
                          w = D;
                        l.pointToLocalFrame(i, a, n, g);
                        var S = e.radius;
                        x.lowerBound.set(g.x - S, g.y - S, g.z - S),
                          x.upperBound.set(g.x + S, g.y + S, g.z + S),
                          t.getTrianglesInAABB(x, w);
                        for (
                          var V = A, U = e.radius * e.radius, z = 0;
                          z < w.length;
                          z++
                        )
                          for (var j = 0; j < 3; j++)
                            if (
                              (t.getVertex(t.indices[3 * w[z] + j], V),
                              V.vsub(g, _),
                              _.norm2() <= U)
                            ) {
                              if (
                                (b.copy(V),
                                l.pointToWorldFrame(i, a, b, V),
                                V.vsub(n, _),
                                d)
                              )
                                return !0;
                              (W = this.createContactEquation(
                                s,
                                u,
                                e,
                                t,
                                c,
                                h
                              )).ni.copy(_),
                                W.ni.normalize(),
                                W.ri.copy(W.ni),
                                W.ri.scale(e.radius, W.ri),
                                W.ri.vadd(n, W.ri),
                                W.ri.vsub(s.position, W.ri),
                                W.rj.copy(V),
                                W.rj.vsub(u.position, W.rj),
                                this.result.push(W),
                                this.createFrictionEquationsFromContact(
                                  W,
                                  this.frictionResult
                                );
                            }
                        for (z = 0; z < w.length; z++)
                          for (j = 0; j < 3; j++) {
                            t.getVertex(t.indices[3 * w[z] + j], p),
                              t.getVertex(
                                t.indices[3 * w[z] + ((j + 1) % 3)],
                                f
                              ),
                              f.vsub(p, m),
                              g.vsub(f, y);
                            var G = y.dot(m);
                            g.vsub(p, y);
                            var H = y.dot(m);
                            if (
                              H > 0 &&
                              G < 0 &&
                              (g.vsub(p, y),
                              v.copy(m),
                              v.normalize(),
                              (H = y.dot(v)),
                              v.scale(H, y),
                              y.vadd(p, y),
                              (J = y.distanceTo(g)) < e.radius)
                            ) {
                              if (d) return !0;
                              var W = this.createContactEquation(
                                s,
                                u,
                                e,
                                t,
                                c,
                                h
                              );
                              y.vsub(g, W.ni),
                                W.ni.normalize(),
                                W.ni.scale(e.radius, W.ri),
                                W.ri.vadd(n, W.ri),
                                W.ri.vsub(s.position, W.ri),
                                l.pointToWorldFrame(i, a, y, y),
                                y.vsub(u.position, W.rj),
                                l.vectorToWorldFrame(a, W.ni, W.ni),
                                l.vectorToWorldFrame(a, W.ri, W.ri),
                                this.result.push(W),
                                this.createFrictionEquationsFromContact(
                                  W,
                                  this.frictionResult
                                );
                            }
                          }
                        for (
                          var Y = F,
                            q = N,
                            X = O,
                            Q = E,
                            Z = ((z = 0), w.length);
                          z !== Z;
                          z++
                        ) {
                          t.getTriangleVertices(w[z], Y, q, X),
                            t.getNormal(w[z], Q),
                            g.vsub(Y, y);
                          var J = y.dot(Q);
                          if (
                            (Q.scale(J, y),
                            g.vsub(y, y),
                            (J = y.distanceTo(g)),
                            o.pointInTriangle(y, Y, q, X) && J < e.radius)
                          ) {
                            if (d) return !0;
                            (W = this.createContactEquation(s, u, e, t, c, h)),
                              y.vsub(g, W.ni),
                              W.ni.normalize(),
                              W.ni.scale(e.radius, W.ri),
                              W.ri.vadd(n, W.ri),
                              W.ri.vsub(s.position, W.ri),
                              l.pointToWorldFrame(i, a, y, y),
                              y.vsub(u.position, W.rj),
                              l.vectorToWorldFrame(a, W.ni, W.ni),
                              l.vectorToWorldFrame(a, W.ri, W.ri),
                              this.result.push(W),
                              this.createFrictionEquationsFromContact(
                                W,
                                this.frictionResult
                              );
                          }
                        }
                        w.length = 0;
                      };
                    var V = new s(),
                      U = new s();
                    p.prototype[a.types.SPHERE | a.types.PLANE] =
                      p.prototype.spherePlane = function (
                        e,
                        t,
                        n,
                        i,
                        r,
                        a,
                        o,
                        s,
                        l,
                        u,
                        c
                      ) {
                        var h = this.createContactEquation(o, s, e, t, l, u);
                        if (
                          (h.ni.set(0, 0, 1),
                          a.vmult(h.ni, h.ni),
                          h.ni.negate(h.ni),
                          h.ni.normalize(),
                          h.ni.mult(e.radius, h.ri),
                          n.vsub(i, V),
                          h.ni.mult(h.ni.dot(V), U),
                          V.vsub(U, h.rj),
                          -V.dot(h.ni) <= e.radius)
                        ) {
                          if (c) return !0;
                          var d = h.ri,
                            p = h.rj;
                          d.vadd(n, d),
                            d.vsub(o.position, d),
                            p.vadd(i, p),
                            p.vsub(s.position, p),
                            this.result.push(h),
                            this.createFrictionEquationsFromContact(
                              h,
                              this.frictionResult
                            );
                        }
                      };
                    var z = new s(),
                      j = new s(),
                      G = new s();
                    function H(e, t, n) {
                      for (var i = null, r = e.length, a = 0; a !== r; a++) {
                        var o = e[a],
                          s = z;
                        e[(a + 1) % r].vsub(o, s);
                        var l = j;
                        s.cross(t, l);
                        var u = G;
                        n.vsub(o, u);
                        var c = l.dot(u);
                        if (
                          !(
                            null === i ||
                            (c > 0 && !0 === i) ||
                            (c <= 0 && !1 === i)
                          )
                        )
                          return !1;
                        null === i && (i = c > 0);
                      }
                      return !0;
                    }
                    var W = new s(),
                      Y = new s(),
                      q = new s(),
                      X = new s(),
                      Q = [
                        new s(),
                        new s(),
                        new s(),
                        new s(),
                        new s(),
                        new s(),
                      ],
                      Z = new s(),
                      J = new s(),
                      K = new s(),
                      $ = new s();
                    p.prototype[a.types.SPHERE | a.types.BOX] =
                      p.prototype.sphereBox = function (
                        e,
                        t,
                        n,
                        i,
                        r,
                        a,
                        o,
                        s,
                        l,
                        u,
                        c
                      ) {
                        var h = this.v3pool,
                          d = Q;
                        n.vsub(i, W), t.getSideNormals(d, a);
                        for (
                          var p = e.radius,
                            f = !1,
                            m = J,
                            v = K,
                            g = $,
                            y = null,
                            x = 0,
                            b = 0,
                            _ = 0,
                            w = null,
                            S = 0,
                            E = d.length;
                          S !== E && !1 === f;
                          S++
                        ) {
                          var M = Y;
                          M.copy(d[S]);
                          var A = M.norm();
                          M.normalize();
                          var T = W.dot(M);
                          if (T < A + p && T > 0) {
                            var C = q,
                              k = X;
                            C.copy(d[(S + 1) % 3]), k.copy(d[(S + 2) % 3]);
                            var P = C.norm(),
                              L = k.norm();
                            C.normalize(), k.normalize();
                            var R = W.dot(C),
                              I = W.dot(k);
                            if (R < P && R > -P && I < L && I > -L) {
                              var F = Math.abs(T - A - p);
                              if (
                                (null === w || F < w) &&
                                ((w = F),
                                (b = R),
                                (_ = I),
                                (y = A),
                                m.copy(M),
                                v.copy(C),
                                g.copy(k),
                                x++,
                                c)
                              )
                                return !0;
                            }
                          }
                        }
                        if (x) {
                          f = !0;
                          var N = this.createContactEquation(o, s, e, t, l, u);
                          m.mult(-p, N.ri),
                            N.ni.copy(m),
                            N.ni.negate(N.ni),
                            m.mult(y, m),
                            v.mult(b, v),
                            m.vadd(v, m),
                            g.mult(_, g),
                            m.vadd(g, N.rj),
                            N.ri.vadd(n, N.ri),
                            N.ri.vsub(o.position, N.ri),
                            N.rj.vadd(i, N.rj),
                            N.rj.vsub(s.position, N.rj),
                            this.result.push(N),
                            this.createFrictionEquationsFromContact(
                              N,
                              this.frictionResult
                            );
                        }
                        for (var O = h.get(), B = Z, D = 0; 2 !== D && !f; D++)
                          for (var V = 0; 2 !== V && !f; V++)
                            for (var U = 0; 2 !== U && !f; U++)
                              if (
                                (O.set(0, 0, 0),
                                D ? O.vadd(d[0], O) : O.vsub(d[0], O),
                                V ? O.vadd(d[1], O) : O.vsub(d[1], O),
                                U ? O.vadd(d[2], O) : O.vsub(d[2], O),
                                i.vadd(O, B),
                                B.vsub(n, B),
                                B.norm2() < p * p)
                              ) {
                                if (c) return !0;
                                (f = !0),
                                  (N = this.createContactEquation(
                                    o,
                                    s,
                                    e,
                                    t,
                                    l,
                                    u
                                  )).ri.copy(B),
                                  N.ri.normalize(),
                                  N.ni.copy(N.ri),
                                  N.ri.mult(p, N.ri),
                                  N.rj.copy(O),
                                  N.ri.vadd(n, N.ri),
                                  N.ri.vsub(o.position, N.ri),
                                  N.rj.vadd(i, N.rj),
                                  N.rj.vsub(s.position, N.rj),
                                  this.result.push(N),
                                  this.createFrictionEquationsFromContact(
                                    N,
                                    this.frictionResult
                                  );
                              }
                        h.release(O), (O = null);
                        var z = h.get(),
                          j = h.get(),
                          G = ((N = h.get()), h.get()),
                          H = ((F = h.get()), d.length);
                        for (D = 0; D !== H && !f; D++)
                          for (V = 0; V !== H && !f; V++)
                            if (D % 3 !== V % 3) {
                              d[V].cross(d[D], z),
                                z.normalize(),
                                d[D].vadd(d[V], j),
                                N.copy(n),
                                N.vsub(j, N),
                                N.vsub(i, N);
                              var ee = N.dot(z);
                              for (
                                z.mult(ee, G), U = 0;
                                U === D % 3 || U === V % 3;

                              )
                                U++;
                              F.copy(n),
                                F.vsub(G, F),
                                F.vsub(j, F),
                                F.vsub(i, F);
                              var te = Math.abs(ee),
                                ne = F.norm();
                              if (te < d[U].norm() && ne < p) {
                                if (c) return !0;
                                f = !0;
                                var ie = this.createContactEquation(
                                  o,
                                  s,
                                  e,
                                  t,
                                  l,
                                  u
                                );
                                j.vadd(G, ie.rj),
                                  ie.rj.copy(ie.rj),
                                  F.negate(ie.ni),
                                  ie.ni.normalize(),
                                  ie.ri.copy(ie.rj),
                                  ie.ri.vadd(i, ie.ri),
                                  ie.ri.vsub(n, ie.ri),
                                  ie.ri.normalize(),
                                  ie.ri.mult(p, ie.ri),
                                  ie.ri.vadd(n, ie.ri),
                                  ie.ri.vsub(o.position, ie.ri),
                                  ie.rj.vadd(i, ie.rj),
                                  ie.rj.vsub(s.position, ie.rj),
                                  this.result.push(ie),
                                  this.createFrictionEquationsFromContact(
                                    ie,
                                    this.frictionResult
                                  );
                              }
                            }
                        h.release(z, j, N, G, F);
                      };
                    var ee = new s(),
                      te = new s(),
                      ne = new s(),
                      ie = new s(),
                      re = new s(),
                      ae = new s(),
                      oe = new s(),
                      se = new s(),
                      le = new s(),
                      ue = new s();
                    (p.prototype[a.types.SPHERE | a.types.CONVEXPOLYHEDRON] =
                      p.prototype.sphereConvex =
                        function (e, t, n, i, r, a, o, s, l, u, c) {
                          var h = this.v3pool;
                          n.vsub(i, ee);
                          for (
                            var d = t.faceNormals,
                              p = t.faces,
                              f = t.vertices,
                              m = e.radius,
                              v = 0;
                            v !== f.length;
                            v++
                          ) {
                            var g = f[v],
                              y = re;
                            a.vmult(g, y), i.vadd(y, y);
                            var x = ie;
                            if ((y.vsub(n, x), x.norm2() < m * m))
                              return (
                                !!c ||
                                ((b = !0),
                                (F = this.createContactEquation(
                                  o,
                                  s,
                                  e,
                                  t,
                                  l,
                                  u
                                )).ri.copy(x),
                                F.ri.normalize(),
                                F.ni.copy(F.ri),
                                F.ri.mult(m, F.ri),
                                y.vsub(i, F.rj),
                                F.ri.vadd(n, F.ri),
                                F.ri.vsub(o.position, F.ri),
                                F.rj.vadd(i, F.rj),
                                F.rj.vsub(s.position, F.rj),
                                this.result.push(F),
                                void this.createFrictionEquationsFromContact(
                                  F,
                                  this.frictionResult
                                ))
                              );
                          }
                          for (
                            var b = !1, _ = ((v = 0), p.length);
                            v !== _ && !1 === b;
                            v++
                          ) {
                            var w = d[v],
                              S = p[v],
                              E = ae;
                            a.vmult(w, E);
                            var M = oe;
                            a.vmult(f[S[0]], M), M.vadd(i, M);
                            var A = se;
                            E.mult(-m, A), n.vadd(A, A);
                            var T = le;
                            A.vsub(M, T);
                            var C = T.dot(E),
                              k = ue;
                            if ((n.vsub(M, k), C < 0 && k.dot(E) > 0)) {
                              for (
                                var P = [], L = 0, R = S.length;
                                L !== R;
                                L++
                              ) {
                                var I = h.get();
                                a.vmult(f[S[L]], I), i.vadd(I, I), P.push(I);
                              }
                              if (H(P, E, n)) {
                                if (c) return !0;
                                b = !0;
                                var F = this.createContactEquation(
                                  o,
                                  s,
                                  e,
                                  t,
                                  l,
                                  u
                                );
                                E.mult(-m, F.ri), E.negate(F.ni);
                                var N = h.get();
                                E.mult(-C, N);
                                var O = h.get();
                                E.mult(-m, O),
                                  n.vsub(i, F.rj),
                                  F.rj.vadd(O, F.rj),
                                  F.rj.vadd(N, F.rj),
                                  F.rj.vadd(i, F.rj),
                                  F.rj.vsub(s.position, F.rj),
                                  F.ri.vadd(n, F.ri),
                                  F.ri.vsub(o.position, F.ri),
                                  h.release(N),
                                  h.release(O),
                                  this.result.push(F),
                                  this.createFrictionEquationsFromContact(
                                    F,
                                    this.frictionResult
                                  ),
                                  (L = 0);
                                for (var B = P.length; L !== B; L++)
                                  h.release(P[L]);
                                return;
                              }
                              for (L = 0; L !== S.length; L++) {
                                var D = h.get(),
                                  V = h.get();
                                a.vmult(f[S[(L + 1) % S.length]], D),
                                  a.vmult(f[S[(L + 2) % S.length]], V),
                                  i.vadd(D, D),
                                  i.vadd(V, V);
                                var U = te;
                                V.vsub(D, U);
                                var z = ne;
                                U.unit(z);
                                var j = h.get(),
                                  G = h.get();
                                n.vsub(D, G);
                                var W = G.dot(z);
                                z.mult(W, j), j.vadd(D, j);
                                var Y = h.get();
                                if (
                                  (j.vsub(n, Y),
                                  W > 0 &&
                                    W * W < U.norm2() &&
                                    Y.norm2() < m * m)
                                ) {
                                  if (c) return !0;
                                  for (
                                    F = this.createContactEquation(
                                      o,
                                      s,
                                      e,
                                      t,
                                      l,
                                      u
                                    ),
                                      j.vsub(i, F.rj),
                                      j.vsub(n, F.ni),
                                      F.ni.normalize(),
                                      F.ni.mult(m, F.ri),
                                      F.rj.vadd(i, F.rj),
                                      F.rj.vsub(s.position, F.rj),
                                      F.ri.vadd(n, F.ri),
                                      F.ri.vsub(o.position, F.ri),
                                      this.result.push(F),
                                      this.createFrictionEquationsFromContact(
                                        F,
                                        this.frictionResult
                                      ),
                                      L = 0,
                                      B = P.length;
                                    L !== B;
                                    L++
                                  )
                                    h.release(P[L]);
                                  return (
                                    h.release(D),
                                    h.release(V),
                                    h.release(j),
                                    h.release(Y),
                                    void h.release(G)
                                  );
                                }
                                h.release(D),
                                  h.release(V),
                                  h.release(j),
                                  h.release(Y),
                                  h.release(G);
                              }
                              for (L = 0, B = P.length; L !== B; L++)
                                h.release(P[L]);
                            }
                          }
                        }),
                      new s(),
                      new s(),
                      (p.prototype[a.types.PLANE | a.types.BOX] =
                        p.prototype.planeBox =
                          function (e, t, n, i, r, a, o, s, l, u, c) {
                            return (
                              (t.convexPolyhedronRepresentation.material =
                                t.material),
                              (t.convexPolyhedronRepresentation.collisionResponse =
                                t.collisionResponse),
                              (t.convexPolyhedronRepresentation.id = t.id),
                              this.planeConvex(
                                e,
                                t.convexPolyhedronRepresentation,
                                n,
                                i,
                                r,
                                a,
                                o,
                                s,
                                e,
                                t,
                                c
                              )
                            );
                          });
                    var ce = new s(),
                      he = new s(),
                      de = new s(),
                      pe = new s();
                    p.prototype[a.types.PLANE | a.types.CONVEXPOLYHEDRON] =
                      p.prototype.planeConvex = function (
                        e,
                        t,
                        n,
                        i,
                        r,
                        a,
                        o,
                        s,
                        l,
                        u,
                        c
                      ) {
                        var h = ce,
                          d = he;
                        d.set(0, 0, 1), r.vmult(d, d);
                        for (
                          var p = 0, f = de, m = 0;
                          m !== t.vertices.length;
                          m++
                        )
                          if (
                            (h.copy(t.vertices[m]),
                            a.vmult(h, h),
                            i.vadd(h, h),
                            h.vsub(n, f),
                            d.dot(f) <= 0)
                          ) {
                            if (c) return !0;
                            var v = this.createContactEquation(
                                o,
                                s,
                                e,
                                t,
                                l,
                                u
                              ),
                              g = pe;
                            d.mult(d.dot(f), g),
                              h.vsub(g, g),
                              g.vsub(n, v.ri),
                              v.ni.copy(d),
                              h.vsub(i, v.rj),
                              v.ri.vadd(n, v.ri),
                              v.ri.vsub(o.position, v.ri),
                              v.rj.vadd(i, v.rj),
                              v.rj.vsub(s.position, v.rj),
                              this.result.push(v),
                              p++,
                              this.enableFrictionReduction ||
                                this.createFrictionEquationsFromContact(
                                  v,
                                  this.frictionResult
                                );
                          }
                        this.enableFrictionReduction &&
                          p &&
                          this.createFrictionFromAverage(p);
                      };
                    var fe = new s(),
                      me = new s();
                    p.prototype[a.types.CONVEXPOLYHEDRON] =
                      p.prototype.convexConvex = function (
                        e,
                        t,
                        n,
                        i,
                        r,
                        a,
                        o,
                        s,
                        l,
                        u,
                        c,
                        h,
                        d
                      ) {
                        var p = fe;
                        if (
                          !(
                            n.distanceTo(i) >
                            e.boundingSphereRadius + t.boundingSphereRadius
                          ) &&
                          e.findSeparatingAxis(t, n, r, i, a, p, h, d)
                        ) {
                          var f = [],
                            m = me;
                          e.clipAgainstHull(n, r, t, i, a, p, -100, 100, f);
                          for (var v = 0, g = 0; g !== f.length; g++) {
                            if (c) return !0;
                            var y = this.createContactEquation(
                                o,
                                s,
                                e,
                                t,
                                l,
                                u
                              ),
                              x = y.ri,
                              b = y.rj;
                            p.negate(y.ni),
                              f[g].normal.negate(m),
                              m.mult(f[g].depth, m),
                              f[g].point.vadd(m, x),
                              b.copy(f[g].point),
                              x.vsub(n, x),
                              b.vsub(i, b),
                              x.vadd(n, x),
                              x.vsub(o.position, x),
                              b.vadd(i, b),
                              b.vsub(s.position, b),
                              this.result.push(y),
                              v++,
                              this.enableFrictionReduction ||
                                this.createFrictionEquationsFromContact(
                                  y,
                                  this.frictionResult
                                );
                          }
                          this.enableFrictionReduction &&
                            v &&
                            this.createFrictionFromAverage(v);
                        }
                      };
                    var ve = new s(),
                      ge = new s(),
                      ye = new s();
                    p.prototype[a.types.PLANE | a.types.PARTICLE] =
                      p.prototype.planeParticle = function (
                        e,
                        t,
                        n,
                        i,
                        r,
                        a,
                        o,
                        s,
                        l,
                        u,
                        c
                      ) {
                        var h = ve;
                        h.set(0, 0, 1), o.quaternion.vmult(h, h);
                        var d = ge;
                        if ((i.vsub(o.position, d), h.dot(d) <= 0)) {
                          if (c) return !0;
                          var p = this.createContactEquation(s, o, t, e, l, u);
                          p.ni.copy(h), p.ni.negate(p.ni), p.ri.set(0, 0, 0);
                          var f = ye;
                          h.mult(h.dot(i), f),
                            i.vsub(f, f),
                            p.rj.copy(f),
                            this.result.push(p),
                            this.createFrictionEquationsFromContact(
                              p,
                              this.frictionResult
                            );
                        }
                      };
                    var xe = new s();
                    p.prototype[a.types.PARTICLE | a.types.SPHERE] =
                      p.prototype.sphereParticle = function (
                        e,
                        t,
                        n,
                        i,
                        r,
                        a,
                        o,
                        s,
                        l,
                        u,
                        c
                      ) {
                        var h = xe;
                        if (
                          (h.set(0, 0, 1),
                          i.vsub(n, h),
                          h.norm2() <= e.radius * e.radius)
                        ) {
                          if (c) return !0;
                          var d = this.createContactEquation(s, o, t, e, l, u);
                          h.normalize(),
                            d.rj.copy(h),
                            d.rj.mult(e.radius, d.rj),
                            d.ni.copy(h),
                            d.ni.negate(d.ni),
                            d.ri.set(0, 0, 0),
                            this.result.push(d),
                            this.createFrictionEquationsFromContact(
                              d,
                              this.frictionResult
                            );
                        }
                      };
                    var be = new u(),
                      _e = new s(),
                      we = (new s(), new s()),
                      Se = new s(),
                      Ee = new s();
                    (p.prototype[a.types.PARTICLE | a.types.CONVEXPOLYHEDRON] =
                      p.prototype.convexParticle =
                        function (e, t, n, i, r, a, o, s, l, u, c) {
                          var h = -1,
                            d = we,
                            p = Ee,
                            f = null,
                            m = _e;
                          if (
                            (m.copy(i),
                            m.vsub(n, m),
                            r.conjugate(be),
                            be.vmult(m, m),
                            e.pointIsInside(m))
                          ) {
                            e.worldVerticesNeedsUpdate &&
                              e.computeWorldVertices(n, r),
                              e.worldFaceNormalsNeedsUpdate &&
                                e.computeWorldFaceNormals(r);
                            for (var v = 0, g = e.faces.length; v !== g; v++) {
                              var y = [e.worldVertices[e.faces[v][0]]],
                                x = e.worldFaceNormals[v];
                              i.vsub(y[0], Se);
                              var b = -x.dot(Se);
                              if (null === f || Math.abs(b) < Math.abs(f)) {
                                if (c) return !0;
                                (f = b), (h = v), d.copy(x);
                              }
                            }
                            if (-1 !== h) {
                              var _ = this.createContactEquation(
                                s,
                                o,
                                t,
                                e,
                                l,
                                u
                              );
                              d.mult(f, p),
                                p.vadd(i, p),
                                p.vsub(n, p),
                                _.rj.copy(p),
                                d.negate(_.ni),
                                _.ri.set(0, 0, 0);
                              var w = _.ri,
                                S = _.rj;
                              w.vadd(i, w),
                                w.vsub(s.position, w),
                                S.vadd(n, S),
                                S.vsub(o.position, S),
                                this.result.push(_),
                                this.createFrictionEquationsFromContact(
                                  _,
                                  this.frictionResult
                                );
                            } else
                              console.warn(
                                "Point found inside convex, but did not find penetrating face!"
                              );
                          }
                        }),
                      (p.prototype[a.types.BOX | a.types.HEIGHTFIELD] =
                        p.prototype.boxHeightfield =
                          function (e, t, n, i, r, a, o, s, l, u, c) {
                            return (
                              (e.convexPolyhedronRepresentation.material =
                                e.material),
                              (e.convexPolyhedronRepresentation.collisionResponse =
                                e.collisionResponse),
                              this.convexHeightfield(
                                e.convexPolyhedronRepresentation,
                                t,
                                n,
                                i,
                                r,
                                a,
                                o,
                                s,
                                e,
                                t,
                                c
                              )
                            );
                          });
                    var Me = new s(),
                      Ae = new s(),
                      Te = [0];
                    p.prototype[
                      a.types.CONVEXPOLYHEDRON | a.types.HEIGHTFIELD
                    ] = p.prototype.convexHeightfield = function (
                      e,
                      t,
                      n,
                      i,
                      r,
                      a,
                      o,
                      s,
                      u,
                      c,
                      h
                    ) {
                      var d = t.data,
                        p = t.elementSize,
                        f = e.boundingSphereRadius,
                        m = Ae,
                        v = Te,
                        g = Me;
                      l.pointToLocalFrame(i, a, n, g);
                      var y = Math.floor((g.x - f) / p) - 1,
                        x = Math.ceil((g.x + f) / p) + 1,
                        b = Math.floor((g.y - f) / p) - 1,
                        _ = Math.ceil((g.y + f) / p) + 1;
                      if (
                        !(x < 0 || _ < 0 || y > d.length || b > d[0].length)
                      ) {
                        y < 0 && (y = 0),
                          x < 0 && (x = 0),
                          b < 0 && (b = 0),
                          _ < 0 && (_ = 0),
                          y >= d.length && (y = d.length - 1),
                          x >= d.length && (x = d.length - 1),
                          _ >= d[0].length && (_ = d[0].length - 1),
                          b >= d[0].length && (b = d[0].length - 1);
                        var w = [];
                        t.getRectMinMax(y, b, x, _, w);
                        var S = w[0],
                          E = w[1];
                        if (!(g.z - f > E || g.z + f < S))
                          for (var M = y; M < x; M++)
                            for (var A = b; A < _; A++) {
                              var T = !1;
                              if (
                                (t.getConvexTrianglePillar(M, A, !1),
                                l.pointToWorldFrame(i, a, t.pillarOffset, m),
                                n.distanceTo(m) <
                                  t.pillarConvex.boundingSphereRadius +
                                    e.boundingSphereRadius &&
                                  (T = this.convexConvex(
                                    e,
                                    t.pillarConvex,
                                    n,
                                    m,
                                    r,
                                    a,
                                    o,
                                    s,
                                    null,
                                    null,
                                    h,
                                    v,
                                    null
                                  )),
                                h && T)
                              )
                                return !0;
                              if (
                                (t.getConvexTrianglePillar(M, A, !0),
                                l.pointToWorldFrame(i, a, t.pillarOffset, m),
                                n.distanceTo(m) <
                                  t.pillarConvex.boundingSphereRadius +
                                    e.boundingSphereRadius &&
                                  (T = this.convexConvex(
                                    e,
                                    t.pillarConvex,
                                    n,
                                    m,
                                    r,
                                    a,
                                    o,
                                    s,
                                    null,
                                    null,
                                    h,
                                    v,
                                    null
                                  )),
                                h && T)
                              )
                                return !0;
                            }
                      }
                    };
                    var Ce = new s(),
                      ke = new s();
                    p.prototype[a.types.SPHERE | a.types.HEIGHTFIELD] =
                      p.prototype.sphereHeightfield = function (
                        e,
                        t,
                        n,
                        i,
                        r,
                        a,
                        o,
                        s,
                        u,
                        c,
                        h
                      ) {
                        var d = t.data,
                          p = e.radius,
                          f = t.elementSize,
                          m = ke,
                          v = Ce;
                        l.pointToLocalFrame(i, a, n, v);
                        var g = Math.floor((v.x - p) / f) - 1,
                          y = Math.ceil((v.x + p) / f) + 1,
                          x = Math.floor((v.y - p) / f) - 1,
                          b = Math.ceil((v.y + p) / f) + 1;
                        if (
                          !(y < 0 || b < 0 || g > d.length || x > d[0].length)
                        ) {
                          g < 0 && (g = 0),
                            y < 0 && (y = 0),
                            x < 0 && (x = 0),
                            b < 0 && (b = 0),
                            g >= d.length && (g = d.length - 1),
                            y >= d.length && (y = d.length - 1),
                            b >= d[0].length && (b = d[0].length - 1),
                            x >= d[0].length && (x = d[0].length - 1);
                          var _ = [];
                          t.getRectMinMax(g, x, y, b, _);
                          var w = _[0],
                            S = _[1];
                          if (!(v.z - p > S || v.z + p < w))
                            for (var E = this.result, M = g; M < y; M++)
                              for (var A = x; A < b; A++) {
                                var T = E.length,
                                  C = !1;
                                if (
                                  (t.getConvexTrianglePillar(M, A, !1),
                                  l.pointToWorldFrame(i, a, t.pillarOffset, m),
                                  n.distanceTo(m) <
                                    t.pillarConvex.boundingSphereRadius +
                                      e.boundingSphereRadius &&
                                    (C = this.sphereConvex(
                                      e,
                                      t.pillarConvex,
                                      n,
                                      m,
                                      r,
                                      a,
                                      o,
                                      s,
                                      e,
                                      t,
                                      h
                                    )),
                                  h && C)
                                )
                                  return !0;
                                if (
                                  (t.getConvexTrianglePillar(M, A, !0),
                                  l.pointToWorldFrame(i, a, t.pillarOffset, m),
                                  n.distanceTo(m) <
                                    t.pillarConvex.boundingSphereRadius +
                                      e.boundingSphereRadius &&
                                    (C = this.sphereConvex(
                                      e,
                                      t.pillarConvex,
                                      n,
                                      m,
                                      r,
                                      a,
                                      o,
                                      s,
                                      e,
                                      t,
                                      h
                                    )),
                                  h && C)
                                )
                                  return !0;
                                if (E.length - T > 2) return;
                              }
                        }
                      };
                  },
                  {
                    "../collision/AABB": 3,
                    "../collision/Ray": 10,
                    "../equations/ContactEquation": 20,
                    "../equations/FrictionEquation": 22,
                    "../math/Quaternion": 29,
                    "../math/Transform": 30,
                    "../math/Vec3": 31,
                    "../objects/Body": 32,
                    "../shapes/ConvexPolyhedron": 39,
                    "../shapes/Shape": 44,
                    "../solver/Solver": 48,
                    "../utils/Vec3Pool": 55,
                  },
                ],
                57: [
                  function (e, t, n) {
                    (t.exports = y), e("../shapes/Shape");
                    var i = e("../math/Vec3"),
                      r = e("../math/Quaternion"),
                      a = e("../solver/GSSolver"),
                      o =
                        (e("../equations/ContactEquation"),
                        e("../equations/FrictionEquation"),
                        e("./Narrowphase")),
                      s = e("../utils/EventTarget"),
                      l = e("../collision/ArrayCollisionMatrix"),
                      u = e("../collision/OverlapKeeper"),
                      c = e("../material/Material"),
                      h = e("../material/ContactMaterial"),
                      d = e("../objects/Body"),
                      p = e("../utils/TupleDictionary"),
                      f = e("../collision/RaycastResult"),
                      m = e("../collision/AABB"),
                      v = e("../collision/Ray"),
                      g = e("../collision/NaiveBroadphase");
                    function y(e) {
                      (e = e || {}),
                        s.apply(this),
                        (this.dt = -1),
                        (this.allowSleep = !!e.allowSleep),
                        (this.contacts = []),
                        (this.frictionEquations = []),
                        (this.quatNormalizeSkip =
                          void 0 !== e.quatNormalizeSkip
                            ? e.quatNormalizeSkip
                            : 0),
                        (this.quatNormalizeFast =
                          void 0 !== e.quatNormalizeFast &&
                          e.quatNormalizeFast),
                        (this.time = 0),
                        (this.interpolationFactor = 0),
                        (this.stepnumber = 0),
                        (this.default_dt = 1 / 60),
                        (this.nextId = 0),
                        (this.gravity = new i()),
                        e.gravity && this.gravity.copy(e.gravity),
                        (this.broadphase =
                          void 0 !== e.broadphase ? e.broadphase : new g()),
                        (this.bodies = []),
                        (this.solver =
                          void 0 !== e.solver ? e.solver : new a()),
                        (this.constraints = []),
                        (this.narrowphase = new o(this)),
                        (this.collisionMatrix = new l()),
                        (this.collisionMatrixPrevious = new l()),
                        (this.bodyOverlapKeeper = new u()),
                        (this.shapeOverlapKeeper = new u()),
                        (this.materials = []),
                        (this.contactmaterials = []),
                        (this.contactMaterialTable = new p()),
                        (this.defaultMaterial = new c("default")),
                        (this.defaultContactMaterial = new h(
                          this.defaultMaterial,
                          this.defaultMaterial,
                          { friction: 0.3, restitution: 0 }
                        )),
                        (this.doProfiling = !1),
                        (this.profile = {
                          solve: 0,
                          makeContactConstraints: 0,
                          broadphase: 0,
                          integrate: 0,
                          narrowphase: 0,
                        }),
                        (this.accumulator = 0),
                        (this.subsystems = []),
                        (this.addBodyEvent = { type: "addBody", body: null }),
                        (this.removeBodyEvent = {
                          type: "removeBody",
                          body: null,
                        }),
                        (this.idToBodyMap = {}),
                        this.broadphase.setWorld(this);
                    }
                    (y.prototype = new s()), new m();
                    var x = new v();
                    if (
                      ((y.prototype.getContactMaterial = function (e, t) {
                        return this.contactMaterialTable.get(e.id, t.id);
                      }),
                      (y.prototype.numObjects = function () {
                        return this.bodies.length;
                      }),
                      (y.prototype.collisionMatrixTick = function () {
                        var e = this.collisionMatrixPrevious;
                        (this.collisionMatrixPrevious = this.collisionMatrix),
                          (this.collisionMatrix = e),
                          this.collisionMatrix.reset(),
                          this.bodyOverlapKeeper.tick(),
                          this.shapeOverlapKeeper.tick();
                      }),
                      (y.prototype.add = y.prototype.addBody =
                        function (e) {
                          -1 === this.bodies.indexOf(e) &&
                            ((e.index = this.bodies.length),
                            this.bodies.push(e),
                            (e.world = this),
                            e.initPosition.copy(e.position),
                            e.initVelocity.copy(e.velocity),
                            (e.timeLastSleepy = this.time),
                            e instanceof d &&
                              (e.initAngularVelocity.copy(e.angularVelocity),
                              e.initQuaternion.copy(e.quaternion)),
                            this.collisionMatrix.setNumObjects(
                              this.bodies.length
                            ),
                            (this.addBodyEvent.body = e),
                            (this.idToBodyMap[e.id] = e),
                            this.dispatchEvent(this.addBodyEvent));
                        }),
                      (y.prototype.addConstraint = function (e) {
                        this.constraints.push(e);
                      }),
                      (y.prototype.removeConstraint = function (e) {
                        var t = this.constraints.indexOf(e);
                        -1 !== t && this.constraints.splice(t, 1);
                      }),
                      (y.prototype.rayTest = function (e, t, n) {
                        n instanceof f
                          ? this.raycastClosest(e, t, { skipBackfaces: !0 }, n)
                          : this.raycastAll(e, t, { skipBackfaces: !0 }, n);
                      }),
                      (y.prototype.raycastAll = function (e, t, n, i) {
                        return (
                          (n.mode = v.ALL),
                          (n.from = e),
                          (n.to = t),
                          (n.callback = i),
                          x.intersectWorld(this, n)
                        );
                      }),
                      (y.prototype.raycastAny = function (e, t, n, i) {
                        return (
                          (n.mode = v.ANY),
                          (n.from = e),
                          (n.to = t),
                          (n.result = i),
                          x.intersectWorld(this, n)
                        );
                      }),
                      (y.prototype.raycastClosest = function (e, t, n, i) {
                        return (
                          (n.mode = v.CLOSEST),
                          (n.from = e),
                          (n.to = t),
                          (n.result = i),
                          x.intersectWorld(this, n)
                        );
                      }),
                      (y.prototype.remove = function (e) {
                        e.world = null;
                        var t = this.bodies.length - 1,
                          n = this.bodies,
                          i = n.indexOf(e);
                        if (-1 !== i) {
                          n.splice(i, 1);
                          for (var r = 0; r !== n.length; r++) n[r].index = r;
                          this.collisionMatrix.setNumObjects(t),
                            (this.removeBodyEvent.body = e),
                            delete this.idToBodyMap[e.id],
                            this.dispatchEvent(this.removeBodyEvent);
                        }
                      }),
                      (y.prototype.removeBody = y.prototype.remove),
                      (y.prototype.getBodyById = function (e) {
                        return this.idToBodyMap[e];
                      }),
                      (y.prototype.getShapeById = function (e) {
                        for (
                          var t = this.bodies, n = 0, i = t.length;
                          n < i;
                          n++
                        )
                          for (
                            var r = t[n].shapes, a = 0, o = r.length;
                            a < o;
                            a++
                          ) {
                            var s = r[a];
                            if (s.id === e) return s;
                          }
                      }),
                      (y.prototype.addMaterial = function (e) {
                        this.materials.push(e);
                      }),
                      (y.prototype.addContactMaterial = function (e) {
                        this.contactmaterials.push(e),
                          this.contactMaterialTable.set(
                            e.materials[0].id,
                            e.materials[1].id,
                            e
                          );
                      }),
                      "undefined" === typeof performance && (performance = {}),
                      !performance.now)
                    ) {
                      var b = Date.now();
                      performance.timing &&
                        performance.timing.navigationStart &&
                        (b = performance.timing.navigationStart),
                        (performance.now = function () {
                          return Date.now() - b;
                        });
                    }
                    new i(),
                      (y.prototype.step = function (e, t, n) {
                        if (((n = n || 10), "undefined" === typeof t))
                          this.internalStep(e), (this.time += e);
                        else {
                          this.accumulator += t;
                          for (var i = 0; this.accumulator >= e && i < n; )
                            this.internalStep(e), (this.accumulator -= e), i++;
                          this.accumulator %= e;
                          var r = this.accumulator / e;
                          this.interpolationFactor = r;
                          for (var a = 0; a !== this.bodies.length; a++) {
                            var o = this.bodies[a];
                            o.previousPosition.lerp(
                              o.position,
                              r,
                              o.interpolatedPosition
                            ),
                              o.previousQuaternion.slerp(
                                o.quaternion,
                                r,
                                o.interpolatedQuaternion
                              ),
                              o.previousQuaternion.normalize();
                          }
                          this.time += t;
                        }
                      });
                    var _ = { type: "postStep" },
                      w = { type: "preStep" },
                      S = {
                        type: d.COLLIDE_EVENT_NAME,
                        body: null,
                        contact: null,
                      },
                      E = [],
                      M = [],
                      A = [],
                      T = [],
                      C =
                        (new i(),
                        new i(),
                        new i(),
                        new i(),
                        new i(),
                        new i(),
                        new i(),
                        new i(),
                        new i(),
                        new r(),
                        new r(),
                        new r(),
                        new i(),
                        function (e) {
                          return Math.min(Math.max(e, 0), 1);
                        });
                    (y.prototype.internalStep = function (e) {
                      this.dt = e;
                      var t,
                        n = this.contacts,
                        i = A,
                        r = T,
                        a = this.numObjects(),
                        o = this.bodies,
                        s = this.solver,
                        l = this.gravity,
                        u = this.doProfiling,
                        c = this.profile,
                        h = d.DYNAMIC,
                        p = this.constraints,
                        f = M,
                        m = (l.norm(), l.x),
                        v = l.y,
                        g = l.z,
                        y = 0;
                      for (u && (t = performance.now()), y = 0; y !== a; y++)
                        if ((B = o[y]).type === h) {
                          var x = B.force,
                            b = B.mass;
                          (x.x += b * m), (x.y += b * v), (x.z += b * g);
                        }
                      y = 0;
                      for (var k = this.subsystems.length; y !== k; y++)
                        this.subsystems[y].update();
                      u && (t = performance.now()),
                        (i.length = 0),
                        (r.length = 0),
                        this.broadphase.collisionPairs(this, i, r),
                        u && (c.broadphase = performance.now() - t);
                      var P = p.length;
                      for (y = 0; y !== P; y++)
                        if (!(z = p[y]).collideConnected)
                          for (var L = i.length - 1; L >= 0; L -= 1)
                            ((z.bodyA === i[L] && z.bodyB === r[L]) ||
                              (z.bodyB === i[L] && z.bodyA === r[L])) &&
                              (i.splice(L, 1), r.splice(L, 1));
                      this.collisionMatrixTick(), u && (t = performance.now());
                      var R = E,
                        I = n.length;
                      for (y = 0; y !== I; y++) R.push(n[y]);
                      n.length = 0;
                      var F = this.frictionEquations.length;
                      for (y = 0; y !== F; y++)
                        f.push(this.frictionEquations[y]);
                      for (
                        this.frictionEquations.length = 0,
                          this.narrowphase.getContacts(
                            i,
                            r,
                            this,
                            n,
                            R,
                            this.frictionEquations,
                            f
                          ),
                          u && (c.narrowphase = performance.now() - t),
                          u && (t = performance.now()),
                          y = 0;
                        y < this.frictionEquations.length;
                        y++
                      )
                        s.addEquation(this.frictionEquations[y]);
                      for (var N = n.length, O = 0; O !== N; O++) {
                        var B = (z = n[O]).bi,
                          D = z.bj,
                          V = z.si,
                          U = z.sj;
                        (
                          (B.material &&
                            D.material &&
                            this.getContactMaterial(B.material, D.material)) ||
                          this.defaultContactMaterial
                        ).friction,
                          B.material &&
                            D.material &&
                            (B.material.friction >= 0 &&
                              D.material.friction >= 0 &&
                              (B.material.friction, D.material.friction),
                            B.material.restitution >= 0 &&
                              D.material.restitution >= 0 &&
                              (z.restitution =
                                B.material.restitution *
                                D.material.restitution)),
                          s.addEquation(z),
                          B.allowSleep &&
                            B.type === d.DYNAMIC &&
                            B.sleepState === d.SLEEPING &&
                            D.sleepState === d.AWAKE &&
                            D.type !== d.STATIC &&
                            D.velocity.norm2() + D.angularVelocity.norm2() >=
                              2 * Math.pow(D.sleepSpeedLimit, 2) &&
                            (B._wakeUpAfterNarrowphase = !0),
                          D.allowSleep &&
                            D.type === d.DYNAMIC &&
                            D.sleepState === d.SLEEPING &&
                            B.sleepState === d.AWAKE &&
                            B.type !== d.STATIC &&
                            B.velocity.norm2() + B.angularVelocity.norm2() >=
                              2 * Math.pow(B.sleepSpeedLimit, 2) &&
                            (D._wakeUpAfterNarrowphase = !0),
                          this.collisionMatrix.set(B, D, !0),
                          this.collisionMatrixPrevious.get(B, D) ||
                            ((S.body = D),
                            (S.contact = z),
                            B.dispatchEvent(S),
                            (S.body = B),
                            D.dispatchEvent(S)),
                          this.bodyOverlapKeeper.set(B.id, D.id),
                          this.shapeOverlapKeeper.set(V.id, U.id);
                      }
                      for (
                        this.emitContactEvents(),
                          u &&
                            ((c.makeContactConstraints = performance.now() - t),
                            (t = performance.now())),
                          y = 0;
                        y !== a;
                        y++
                      )
                        (B = o[y])._wakeUpAfterNarrowphase &&
                          (B.wakeUp(), (B._wakeUpAfterNarrowphase = !1));
                      for (P = p.length, y = 0; y !== P; y++) {
                        var z;
                        (z = p[y]).update(), (L = 0);
                        for (var j = z.equations.length; L !== j; L++) {
                          var G = z.equations[L];
                          s.addEquation(G);
                        }
                      }
                      s.solve(e, this),
                        u && (c.solve = performance.now() - t),
                        s.removeAllEquations();
                      var H = Math.pow;
                      for (y = 0; y !== a; y++)
                        if ((B = o[y]).type & h) {
                          var W = H(C(1 - B.linearDamping), e),
                            Y = B.velocity;
                          Y.mult(W, Y);
                          var q = B.angularVelocity;
                          if (q) {
                            var X = H(C(1 - B.angularDamping), e);
                            q.mult(X, q);
                          }
                        }
                      for (this.dispatchEvent(w), y = 0; y !== a; y++)
                        (B = o[y]).preStep && B.preStep(B);
                      u && (t = performance.now());
                      var Q =
                          this.stepnumber % (this.quatNormalizeSkip + 1) === 0,
                        Z = this.quatNormalizeFast;
                      for (y = 0; y !== a; y++) o[y].integrate(e, Q, Z);
                      for (
                        this.clearForces(),
                          this.broadphase.dirty = !0,
                          u && (c.integrate = performance.now() - t),
                          this.time += e,
                          this.stepnumber += 1,
                          this.dispatchEvent(_),
                          y = 0;
                        y !== a;
                        y++
                      ) {
                        var J = (B = o[y]).postStep;
                        J && J(B);
                      }
                      if (this.allowSleep)
                        for (y = 0; y !== a; y++) o[y].sleepTick(this.time);
                    }),
                      (y.prototype.emitContactEvents = (function () {
                        var e = [],
                          t = [],
                          n = {
                            type: "beginContact",
                            bodyA: null,
                            bodyB: null,
                          },
                          i = { type: "endContact", bodyA: null, bodyB: null },
                          r = {
                            type: "beginShapeContact",
                            bodyA: null,
                            bodyB: null,
                            shapeA: null,
                            shapeB: null,
                          },
                          a = {
                            type: "endShapeContact",
                            bodyA: null,
                            bodyB: null,
                            shapeA: null,
                            shapeB: null,
                          };
                        return function () {
                          var o = this.hasAnyEventListener("beginContact"),
                            s = this.hasAnyEventListener("endContact");
                          if (
                            ((o || s) && this.bodyOverlapKeeper.getDiff(e, t),
                            o)
                          ) {
                            for (var l = 0, u = e.length; l < u; l += 2)
                              (n.bodyA = this.getBodyById(e[l])),
                                (n.bodyB = this.getBodyById(e[l + 1])),
                                this.dispatchEvent(n);
                            n.bodyA = n.bodyB = null;
                          }
                          if (s) {
                            for (l = 0, u = t.length; l < u; l += 2)
                              (i.bodyA = this.getBodyById(t[l])),
                                (i.bodyB = this.getBodyById(t[l + 1])),
                                this.dispatchEvent(i);
                            i.bodyA = i.bodyB = null;
                          }
                          e.length = t.length = 0;
                          var c = this.hasAnyEventListener("beginShapeContact"),
                            h = this.hasAnyEventListener("endShapeContact");
                          if (
                            ((c || h) && this.shapeOverlapKeeper.getDiff(e, t),
                            c)
                          ) {
                            for (l = 0, u = e.length; l < u; l += 2) {
                              var d = this.getShapeById(e[l]),
                                p = this.getShapeById(e[l + 1]);
                              (r.shapeA = d),
                                (r.shapeB = p),
                                (r.bodyA = d.body),
                                (r.bodyB = p.body),
                                this.dispatchEvent(r);
                            }
                            r.bodyA = r.bodyB = r.shapeA = r.shapeB = null;
                          }
                          if (h) {
                            for (l = 0, u = t.length; l < u; l += 2)
                              (d = this.getShapeById(t[l])),
                                (p = this.getShapeById(t[l + 1])),
                                d &&
                                  p &&
                                  ((a.shapeA = d),
                                  (a.shapeB = p),
                                  (a.bodyA = d.body),
                                  (a.bodyB = p.body),
                                  this.dispatchEvent(a));
                            a.bodyA = a.bodyB = a.shapeA = a.shapeB = null;
                          }
                        };
                      })()),
                      (y.prototype.clearForces = function () {
                        for (
                          var e = this.bodies, t = e.length, n = 0;
                          n !== t;
                          n++
                        ) {
                          var i = e[n];
                          i.force,
                            i.torque,
                            i.force.set(0, 0, 0),
                            i.torque.set(0, 0, 0);
                        }
                      });
                  },
                  {
                    "../collision/AABB": 3,
                    "../collision/ArrayCollisionMatrix": 4,
                    "../collision/NaiveBroadphase": 7,
                    "../collision/OverlapKeeper": 9,
                    "../collision/Ray": 10,
                    "../collision/RaycastResult": 11,
                    "../equations/ContactEquation": 20,
                    "../equations/FrictionEquation": 22,
                    "../material/ContactMaterial": 25,
                    "../material/Material": 26,
                    "../math/Quaternion": 29,
                    "../math/Vec3": 31,
                    "../objects/Body": 32,
                    "../shapes/Shape": 44,
                    "../solver/GSSolver": 47,
                    "../utils/EventTarget": 50,
                    "../utils/TupleDictionary": 53,
                    "./Narrowphase": 56,
                  },
                ],
              },
              {},
              [2]
            )(2);
          },
          "./src/lib/shaders/FXAAShader.js": function (e, t, n) {
            "use strict";
            n.r(t),
              n.d(t, "FXAAShader", function () {
                return i;
              });
            var i = {
              uniforms: {
                tDiffuse: { value: null },
                resolution: {
                  value: new (n(
                    "./node_modules/three/build/three.module.js"
                  ).Vector2)(1 / 1024, 1 / 512),
                },
              },
              vertexShader: [
                "varying vec2 vUv;",
                "void main() {",
                "vUv = uv;",
                "gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",
                "}",
              ].join("\n"),
              fragmentShader: [
                "precision highp float;",
                "",
                "uniform sampler2D tDiffuse;",
                "",
                "uniform vec2 resolution;",
                "",
                "varying vec2 vUv;",
                "",
                "// FXAA 3.11 implementation by NVIDIA, ported to WebGL by Agost Biro (biro@archilogic.com)",
                "",
                "//----------------------------------------------------------------------------------",
                "// File:        es3-kepler\\FXAA\\assets\\shaders/FXAA_DefaultES.frag",
                "// SDK Version: v3.00",
                "// Email:       gameworks@nvidia.com",
                "// Site:        http://developer.nvidia.com/",
                "//",
                "// Copyright (c) 2014-2015, NVIDIA CORPORATION. All rights reserved.",
                "//",
                "// Redistribution and use in source and binary forms, with or without",
                "// modification, are permitted provided that the following conditions",
                "// are met:",
                "//  * Redistributions of source code must retain the above copyright",
                "//    notice, this list of conditions and the following disclaimer.",
                "//  * Redistributions in binary form must reproduce the above copyright",
                "//    notice, this list of conditions and the following disclaimer in the",
                "//    documentation and/or other materials provided with the distribution.",
                "//  * Neither the name of NVIDIA CORPORATION nor the names of its",
                "//    contributors may be used to endorse or promote products derived",
                "//    from this software without specific prior written permission.",
                "//",
                "// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS ``AS IS'' AND ANY",
                "// EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE",
                "// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR",
                "// PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR",
                "// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,",
                "// EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,",
                "// PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR",
                "// PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY",
                "// OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT",
                "// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE",
                "// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.",
                "//",
                "//----------------------------------------------------------------------------------",
                "",
                "#define FXAA_PC 1",
                "#define FXAA_GLSL_100 1",
                "#define FXAA_QUALITY_PRESET 12",
                "",
                "#define FXAA_GREEN_AS_LUMA 1",
                "",
                "/*--------------------------------------------------------------------------*/",
                "#ifndef FXAA_PC_CONSOLE",
                "    //",
                "    // The console algorithm for PC is included",
                "    // for developers targeting really low spec machines.",
                "    // Likely better to just run FXAA_PC, and use a really low preset.",
                "    //",
                "    #define FXAA_PC_CONSOLE 0",
                "#endif",
                "/*--------------------------------------------------------------------------*/",
                "#ifndef FXAA_GLSL_120",
                "    #define FXAA_GLSL_120 0",
                "#endif",
                "/*--------------------------------------------------------------------------*/",
                "#ifndef FXAA_GLSL_130",
                "    #define FXAA_GLSL_130 0",
                "#endif",
                "/*--------------------------------------------------------------------------*/",
                "#ifndef FXAA_HLSL_3",
                "    #define FXAA_HLSL_3 0",
                "#endif",
                "/*--------------------------------------------------------------------------*/",
                "#ifndef FXAA_HLSL_4",
                "    #define FXAA_HLSL_4 0",
                "#endif",
                "/*--------------------------------------------------------------------------*/",
                "#ifndef FXAA_HLSL_5",
                "    #define FXAA_HLSL_5 0",
                "#endif",
                "/*==========================================================================*/",
                "#ifndef FXAA_GREEN_AS_LUMA",
                "    //",
                "    // For those using non-linear color,",
                "    // and either not able to get luma in alpha, or not wanting to,",
                "    // this enables FXAA to run using green as a proxy for luma.",
                "    // So with this enabled, no need to pack luma in alpha.",
                "    //",
                "    // This will turn off AA on anything which lacks some amount of green.",
                "    // Pure red and blue or combination of only R and B, will get no AA.",
                "    //",
                "    // Might want to lower the settings for both,",
                "    //    fxaaConsoleEdgeThresholdMin",
                "    //    fxaaQualityEdgeThresholdMin",
                "    // In order to insure AA does not get turned off on colors",
                "    // which contain a minor amount of green.",
                "    //",
                "    // 1 = On.",
                "    // 0 = Off.",
                "    //",
                "    #define FXAA_GREEN_AS_LUMA 0",
                "#endif",
                "/*--------------------------------------------------------------------------*/",
                "#ifndef FXAA_EARLY_EXIT",
                "    //",
                "    // Controls algorithm's early exit path.",
                "    // On PS3 turning this ON adds 2 cycles to the shader.",
                "    // On 360 turning this OFF adds 10ths of a millisecond to the shader.",
                "    // Turning this off on console will result in a more blurry image.",
                "    // So this defaults to on.",
                "    //",
                "    // 1 = On.",
                "    // 0 = Off.",
                "    //",
                "    #define FXAA_EARLY_EXIT 1",
                "#endif",
                "/*--------------------------------------------------------------------------*/",
                "#ifndef FXAA_DISCARD",
                "    //",
                "    // Only valid for PC OpenGL currently.",
                "    // Probably will not work when FXAA_GREEN_AS_LUMA = 1.",
                "    //",
                "    // 1 = Use discard on pixels which don't need AA.",
                "    //     For APIs which enable concurrent TEX+ROP from same surface.",
                "    // 0 = Return unchanged color on pixels which don't need AA.",
                "    //",
                "    #define FXAA_DISCARD 0",
                "#endif",
                "/*--------------------------------------------------------------------------*/",
                "#ifndef FXAA_FAST_PIXEL_OFFSET",
                "    //",
                "    // Used for GLSL 120 only.",
                "    //",
                "    // 1 = GL API supports fast pixel offsets",
                "    // 0 = do not use fast pixel offsets",
                "    //",
                "    #ifdef GL_EXT_gpu_shader4",
                "        #define FXAA_FAST_PIXEL_OFFSET 1",
                "    #endif",
                "    #ifdef GL_NV_gpu_shader5",
                "        #define FXAA_FAST_PIXEL_OFFSET 1",
                "    #endif",
                "    #ifdef GL_ARB_gpu_shader5",
                "        #define FXAA_FAST_PIXEL_OFFSET 1",
                "    #endif",
                "    #ifndef FXAA_FAST_PIXEL_OFFSET",
                "        #define FXAA_FAST_PIXEL_OFFSET 0",
                "    #endif",
                "#endif",
                "/*--------------------------------------------------------------------------*/",
                "#ifndef FXAA_GATHER4_ALPHA",
                "    //",
                "    // 1 = API supports gather4 on alpha channel.",
                "    // 0 = API does not support gather4 on alpha channel.",
                "    //",
                "    #if (FXAA_HLSL_5 == 1)",
                "        #define FXAA_GATHER4_ALPHA 1",
                "    #endif",
                "    #ifdef GL_ARB_gpu_shader5",
                "        #define FXAA_GATHER4_ALPHA 1",
                "    #endif",
                "    #ifdef GL_NV_gpu_shader5",
                "        #define FXAA_GATHER4_ALPHA 1",
                "    #endif",
                "    #ifndef FXAA_GATHER4_ALPHA",
                "        #define FXAA_GATHER4_ALPHA 0",
                "    #endif",
                "#endif",
                "",
                "",
                "/*============================================================================",
                "                        FXAA QUALITY - TUNING KNOBS",
                "------------------------------------------------------------------------------",
                "NOTE the other tuning knobs are now in the shader function inputs!",
                "============================================================================*/",
                "#ifndef FXAA_QUALITY_PRESET",
                "    //",
                "    // Choose the quality preset.",
                "    // This needs to be compiled into the shader as it effects code.",
                "    // Best option to include multiple presets is to",
                "    // in each shader define the preset, then include this file.",
                "    //",
                "    // OPTIONS",
                "    // -----------------------------------------------------------------------",
                "    // 10 to 15 - default medium dither (10=fastest, 15=highest quality)",
                "    // 20 to 29 - less dither, more expensive (20=fastest, 29=highest quality)",
                "    // 39       - no dither, very expensive",
                "    //",
                "    // NOTES",
                "    // -----------------------------------------------------------------------",
                "    // 12 = slightly faster then FXAA 3.9 and higher edge quality (default)",
                "    // 13 = about same speed as FXAA 3.9 and better than 12",
                "    // 23 = closest to FXAA 3.9 visually and performance wise",
                "    //  _ = the lowest digit is directly related to performance",
                "    // _  = the highest digit is directly related to style",
                "    //",
                "    #define FXAA_QUALITY_PRESET 12",
                "#endif",
                "",
                "",
                "/*============================================================================",
                "",
                "                           FXAA QUALITY - PRESETS",
                "",
                "============================================================================*/",
                "",
                "/*============================================================================",
                "                     FXAA QUALITY - MEDIUM DITHER PRESETS",
                "============================================================================*/",
                "#if (FXAA_QUALITY_PRESET == 10)",
                "    #define FXAA_QUALITY_PS 3",
                "    #define FXAA_QUALITY_P0 1.5",
                "    #define FXAA_QUALITY_P1 3.0",
                "    #define FXAA_QUALITY_P2 12.0",
                "#endif",
                "/*--------------------------------------------------------------------------*/",
                "#if (FXAA_QUALITY_PRESET == 11)",
                "    #define FXAA_QUALITY_PS 4",
                "    #define FXAA_QUALITY_P0 1.0",
                "    #define FXAA_QUALITY_P1 1.5",
                "    #define FXAA_QUALITY_P2 3.0",
                "    #define FXAA_QUALITY_P3 12.0",
                "#endif",
                "/*--------------------------------------------------------------------------*/",
                "#if (FXAA_QUALITY_PRESET == 12)",
                "    #define FXAA_QUALITY_PS 5",
                "    #define FXAA_QUALITY_P0 1.0",
                "    #define FXAA_QUALITY_P1 1.5",
                "    #define FXAA_QUALITY_P2 2.0",
                "    #define FXAA_QUALITY_P3 4.0",
                "    #define FXAA_QUALITY_P4 12.0",
                "#endif",
                "/*--------------------------------------------------------------------------*/",
                "#if (FXAA_QUALITY_PRESET == 13)",
                "    #define FXAA_QUALITY_PS 6",
                "    #define FXAA_QUALITY_P0 1.0",
                "    #define FXAA_QUALITY_P1 1.5",
                "    #define FXAA_QUALITY_P2 2.0",
                "    #define FXAA_QUALITY_P3 2.0",
                "    #define FXAA_QUALITY_P4 4.0",
                "    #define FXAA_QUALITY_P5 12.0",
                "#endif",
                "/*--------------------------------------------------------------------------*/",
                "#if (FXAA_QUALITY_PRESET == 14)",
                "    #define FXAA_QUALITY_PS 7",
                "    #define FXAA_QUALITY_P0 1.0",
                "    #define FXAA_QUALITY_P1 1.5",
                "    #define FXAA_QUALITY_P2 2.0",
                "    #define FXAA_QUALITY_P3 2.0",
                "    #define FXAA_QUALITY_P4 2.0",
                "    #define FXAA_QUALITY_P5 4.0",
                "    #define FXAA_QUALITY_P6 12.0",
                "#endif",
                "/*--------------------------------------------------------------------------*/",
                "#if (FXAA_QUALITY_PRESET == 15)",
                "    #define FXAA_QUALITY_PS 8",
                "    #define FXAA_QUALITY_P0 1.0",
                "    #define FXAA_QUALITY_P1 1.5",
                "    #define FXAA_QUALITY_P2 2.0",
                "    #define FXAA_QUALITY_P3 2.0",
                "    #define FXAA_QUALITY_P4 2.0",
                "    #define FXAA_QUALITY_P5 2.0",
                "    #define FXAA_QUALITY_P6 4.0",
                "    #define FXAA_QUALITY_P7 12.0",
                "#endif",
                "",
                "/*============================================================================",
                "                     FXAA QUALITY - LOW DITHER PRESETS",
                "============================================================================*/",
                "#if (FXAA_QUALITY_PRESET == 20)",
                "    #define FXAA_QUALITY_PS 3",
                "    #define FXAA_QUALITY_P0 1.5",
                "    #define FXAA_QUALITY_P1 2.0",
                "    #define FXAA_QUALITY_P2 8.0",
                "#endif",
                "/*--------------------------------------------------------------------------*/",
                "#if (FXAA_QUALITY_PRESET == 21)",
                "    #define FXAA_QUALITY_PS 4",
                "    #define FXAA_QUALITY_P0 1.0",
                "    #define FXAA_QUALITY_P1 1.5",
                "    #define FXAA_QUALITY_P2 2.0",
                "    #define FXAA_QUALITY_P3 8.0",
                "#endif",
                "/*--------------------------------------------------------------------------*/",
                "#if (FXAA_QUALITY_PRESET == 22)",
                "    #define FXAA_QUALITY_PS 5",
                "    #define FXAA_QUALITY_P0 1.0",
                "    #define FXAA_QUALITY_P1 1.5",
                "    #define FXAA_QUALITY_P2 2.0",
                "    #define FXAA_QUALITY_P3 2.0",
                "    #define FXAA_QUALITY_P4 8.0",
                "#endif",
                "/*--------------------------------------------------------------------------*/",
                "#if (FXAA_QUALITY_PRESET == 23)",
                "    #define FXAA_QUALITY_PS 6",
                "    #define FXAA_QUALITY_P0 1.0",
                "    #define FXAA_QUALITY_P1 1.5",
                "    #define FXAA_QUALITY_P2 2.0",
                "    #define FXAA_QUALITY_P3 2.0",
                "    #define FXAA_QUALITY_P4 2.0",
                "    #define FXAA_QUALITY_P5 8.0",
                "#endif",
                "/*--------------------------------------------------------------------------*/",
                "#if (FXAA_QUALITY_PRESET == 24)",
                "    #define FXAA_QUALITY_PS 7",
                "    #define FXAA_QUALITY_P0 1.0",
                "    #define FXAA_QUALITY_P1 1.5",
                "    #define FXAA_QUALITY_P2 2.0",
                "    #define FXAA_QUALITY_P3 2.0",
                "    #define FXAA_QUALITY_P4 2.0",
                "    #define FXAA_QUALITY_P5 3.0",
                "    #define FXAA_QUALITY_P6 8.0",
                "#endif",
                "/*--------------------------------------------------------------------------*/",
                "#if (FXAA_QUALITY_PRESET == 25)",
                "    #define FXAA_QUALITY_PS 8",
                "    #define FXAA_QUALITY_P0 1.0",
                "    #define FXAA_QUALITY_P1 1.5",
                "    #define FXAA_QUALITY_P2 2.0",
                "    #define FXAA_QUALITY_P3 2.0",
                "    #define FXAA_QUALITY_P4 2.0",
                "    #define FXAA_QUALITY_P5 2.0",
                "    #define FXAA_QUALITY_P6 4.0",
                "    #define FXAA_QUALITY_P7 8.0",
                "#endif",
                "/*--------------------------------------------------------------------------*/",
                "#if (FXAA_QUALITY_PRESET == 26)",
                "    #define FXAA_QUALITY_PS 9",
                "    #define FXAA_QUALITY_P0 1.0",
                "    #define FXAA_QUALITY_P1 1.5",
                "    #define FXAA_QUALITY_P2 2.0",
                "    #define FXAA_QUALITY_P3 2.0",
                "    #define FXAA_QUALITY_P4 2.0",
                "    #define FXAA_QUALITY_P5 2.0",
                "    #define FXAA_QUALITY_P6 2.0",
                "    #define FXAA_QUALITY_P7 4.0",
                "    #define FXAA_QUALITY_P8 8.0",
                "#endif",
                "/*--------------------------------------------------------------------------*/",
                "#if (FXAA_QUALITY_PRESET == 27)",
                "    #define FXAA_QUALITY_PS 10",
                "    #define FXAA_QUALITY_P0 1.0",
                "    #define FXAA_QUALITY_P1 1.5",
                "    #define FXAA_QUALITY_P2 2.0",
                "    #define FXAA_QUALITY_P3 2.0",
                "    #define FXAA_QUALITY_P4 2.0",
                "    #define FXAA_QUALITY_P5 2.0",
                "    #define FXAA_QUALITY_P6 2.0",
                "    #define FXAA_QUALITY_P7 2.0",
                "    #define FXAA_QUALITY_P8 4.0",
                "    #define FXAA_QUALITY_P9 8.0",
                "#endif",
                "/*--------------------------------------------------------------------------*/",
                "#if (FXAA_QUALITY_PRESET == 28)",
                "    #define FXAA_QUALITY_PS 11",
                "    #define FXAA_QUALITY_P0 1.0",
                "    #define FXAA_QUALITY_P1 1.5",
                "    #define FXAA_QUALITY_P2 2.0",
                "    #define FXAA_QUALITY_P3 2.0",
                "    #define FXAA_QUALITY_P4 2.0",
                "    #define FXAA_QUALITY_P5 2.0",
                "    #define FXAA_QUALITY_P6 2.0",
                "    #define FXAA_QUALITY_P7 2.0",
                "    #define FXAA_QUALITY_P8 2.0",
                "    #define FXAA_QUALITY_P9 4.0",
                "    #define FXAA_QUALITY_P10 8.0",
                "#endif",
                "/*--------------------------------------------------------------------------*/",
                "#if (FXAA_QUALITY_PRESET == 29)",
                "    #define FXAA_QUALITY_PS 12",
                "    #define FXAA_QUALITY_P0 1.0",
                "    #define FXAA_QUALITY_P1 1.5",
                "    #define FXAA_QUALITY_P2 2.0",
                "    #define FXAA_QUALITY_P3 2.0",
                "    #define FXAA_QUALITY_P4 2.0",
                "    #define FXAA_QUALITY_P5 2.0",
                "    #define FXAA_QUALITY_P6 2.0",
                "    #define FXAA_QUALITY_P7 2.0",
                "    #define FXAA_QUALITY_P8 2.0",
                "    #define FXAA_QUALITY_P9 2.0",
                "    #define FXAA_QUALITY_P10 4.0",
                "    #define FXAA_QUALITY_P11 8.0",
                "#endif",
                "",
                "/*============================================================================",
                "                     FXAA QUALITY - EXTREME QUALITY",
                "============================================================================*/",
                "#if (FXAA_QUALITY_PRESET == 39)",
                "    #define FXAA_QUALITY_PS 12",
                "    #define FXAA_QUALITY_P0 1.0",
                "    #define FXAA_QUALITY_P1 1.0",
                "    #define FXAA_QUALITY_P2 1.0",
                "    #define FXAA_QUALITY_P3 1.0",
                "    #define FXAA_QUALITY_P4 1.0",
                "    #define FXAA_QUALITY_P5 1.5",
                "    #define FXAA_QUALITY_P6 2.0",
                "    #define FXAA_QUALITY_P7 2.0",
                "    #define FXAA_QUALITY_P8 2.0",
                "    #define FXAA_QUALITY_P9 2.0",
                "    #define FXAA_QUALITY_P10 4.0",
                "    #define FXAA_QUALITY_P11 8.0",
                "#endif",
                "",
                "",
                "",
                "/*============================================================================",
                "",
                "                                API PORTING",
                "",
                "============================================================================*/",
                "#if (FXAA_GLSL_100 == 1) || (FXAA_GLSL_120 == 1) || (FXAA_GLSL_130 == 1)",
                "    #define FxaaBool bool",
                "    #define FxaaDiscard discard",
                "    #define FxaaFloat float",
                "    #define FxaaFloat2 vec2",
                "    #define FxaaFloat3 vec3",
                "    #define FxaaFloat4 vec4",
                "    #define FxaaHalf float",
                "    #define FxaaHalf2 vec2",
                "    #define FxaaHalf3 vec3",
                "    #define FxaaHalf4 vec4",
                "    #define FxaaInt2 ivec2",
                "    #define FxaaSat(x) clamp(x, 0.0, 1.0)",
                "    #define FxaaTex sampler2D",
                "#else",
                "    #define FxaaBool bool",
                "    #define FxaaDiscard clip(-1)",
                "    #define FxaaFloat float",
                "    #define FxaaFloat2 float2",
                "    #define FxaaFloat3 float3",
                "    #define FxaaFloat4 float4",
                "    #define FxaaHalf half",
                "    #define FxaaHalf2 half2",
                "    #define FxaaHalf3 half3",
                "    #define FxaaHalf4 half4",
                "    #define FxaaSat(x) saturate(x)",
                "#endif",
                "/*--------------------------------------------------------------------------*/",
                "#if (FXAA_GLSL_100 == 1)",
                "  #define FxaaTexTop(t, p) texture2D(t, p, 0.0)",
                "  #define FxaaTexOff(t, p, o, r) texture2D(t, p + (o * r), 0.0)",
                "#endif",
                "/*--------------------------------------------------------------------------*/",
                "#if (FXAA_GLSL_120 == 1)",
                "    // Requires,",
                "    //  #version 120",
                "    // And at least,",
                "    //  #extension GL_EXT_gpu_shader4 : enable",
                "    //  (or set FXAA_FAST_PIXEL_OFFSET 1 to work like DX9)",
                "    #define FxaaTexTop(t, p) texture2DLod(t, p, 0.0)",
                "    #if (FXAA_FAST_PIXEL_OFFSET == 1)",
                "        #define FxaaTexOff(t, p, o, r) texture2DLodOffset(t, p, 0.0, o)",
                "    #else",
                "        #define FxaaTexOff(t, p, o, r) texture2DLod(t, p + (o * r), 0.0)",
                "    #endif",
                "    #if (FXAA_GATHER4_ALPHA == 1)",
                "        // use #extension GL_ARB_gpu_shader5 : enable",
                "        #define FxaaTexAlpha4(t, p) textureGather(t, p, 3)",
                "        #define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)",
                "        #define FxaaTexGreen4(t, p) textureGather(t, p, 1)",
                "        #define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)",
                "    #endif",
                "#endif",
                "/*--------------------------------------------------------------------------*/",
                "#if (FXAA_GLSL_130 == 1)",
                '    // Requires "#version 130" or better',
                "    #define FxaaTexTop(t, p) textureLod(t, p, 0.0)",
                "    #define FxaaTexOff(t, p, o, r) textureLodOffset(t, p, 0.0, o)",
                "    #if (FXAA_GATHER4_ALPHA == 1)",
                "        // use #extension GL_ARB_gpu_shader5 : enable",
                "        #define FxaaTexAlpha4(t, p) textureGather(t, p, 3)",
                "        #define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)",
                "        #define FxaaTexGreen4(t, p) textureGather(t, p, 1)",
                "        #define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)",
                "    #endif",
                "#endif",
                "/*--------------------------------------------------------------------------*/",
                "#if (FXAA_HLSL_3 == 1)",
                "    #define FxaaInt2 float2",
                "    #define FxaaTex sampler2D",
                "    #define FxaaTexTop(t, p) tex2Dlod(t, float4(p, 0.0, 0.0))",
                "    #define FxaaTexOff(t, p, o, r) tex2Dlod(t, float4(p + (o * r), 0, 0))",
                "#endif",
                "/*--------------------------------------------------------------------------*/",
                "#if (FXAA_HLSL_4 == 1)",
                "    #define FxaaInt2 int2",
                "    struct FxaaTex { SamplerState smpl; Texture2D tex; };",
                "    #define FxaaTexTop(t, p) t.tex.SampleLevel(t.smpl, p, 0.0)",
                "    #define FxaaTexOff(t, p, o, r) t.tex.SampleLevel(t.smpl, p, 0.0, o)",
                "#endif",
                "/*--------------------------------------------------------------------------*/",
                "#if (FXAA_HLSL_5 == 1)",
                "    #define FxaaInt2 int2",
                "    struct FxaaTex { SamplerState smpl; Texture2D tex; };",
                "    #define FxaaTexTop(t, p) t.tex.SampleLevel(t.smpl, p, 0.0)",
                "    #define FxaaTexOff(t, p, o, r) t.tex.SampleLevel(t.smpl, p, 0.0, o)",
                "    #define FxaaTexAlpha4(t, p) t.tex.GatherAlpha(t.smpl, p)",
                "    #define FxaaTexOffAlpha4(t, p, o) t.tex.GatherAlpha(t.smpl, p, o)",
                "    #define FxaaTexGreen4(t, p) t.tex.GatherGreen(t.smpl, p)",
                "    #define FxaaTexOffGreen4(t, p, o) t.tex.GatherGreen(t.smpl, p, o)",
                "#endif",
                "",
                "",
                "/*============================================================================",
                "                   GREEN AS LUMA OPTION SUPPORT FUNCTION",
                "============================================================================*/",
                "#if (FXAA_GREEN_AS_LUMA == 0)",
                "    FxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.w; }",
                "#else",
                "    FxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.y; }",
                "#endif",
                "",
                "",
                "",
                "",
                "/*============================================================================",
                "",
                "                             FXAA3 QUALITY - PC",
                "",
                "============================================================================*/",
                "#if (FXAA_PC == 1)",
                "/*--------------------------------------------------------------------------*/",
                "FxaaFloat4 FxaaPixelShader(",
                "    //",
                "    // Use noperspective interpolation here (turn off perspective interpolation).",
                "    // {xy} = center of pixel",
                "    FxaaFloat2 pos,",
                "    //",
                "    // Used only for FXAA Console, and not used on the 360 version.",
                "    // Use noperspective interpolation here (turn off perspective interpolation).",
                "    // {xy_} = upper left of pixel",
                "    // {_zw} = lower right of pixel",
                "    FxaaFloat4 fxaaConsolePosPos,",
                "    //",
                "    // Input color texture.",
                "    // {rgb_} = color in linear or perceptual color space",
                "    // if (FXAA_GREEN_AS_LUMA == 0)",
                "    //     {__a} = luma in perceptual color space (not linear)",
                "    FxaaTex tex,",
                "    //",
                "    // Only used on the optimized 360 version of FXAA Console.",
                '    // For everything but 360, just use the same input here as for "tex".',
                "    // For 360, same texture, just alias with a 2nd sampler.",
                "    // This sampler needs to have an exponent bias of -1.",
                "    FxaaTex fxaaConsole360TexExpBiasNegOne,",
                "    //",
                "    // Only used on the optimized 360 version of FXAA Console.",
                '    // For everything but 360, just use the same input here as for "tex".',
                "    // For 360, same texture, just alias with a 3nd sampler.",
                "    // This sampler needs to have an exponent bias of -2.",
                "    FxaaTex fxaaConsole360TexExpBiasNegTwo,",
                "    //",
                "    // Only used on FXAA Quality.",
                "    // This must be from a constant/uniform.",
                "    // {x_} = 1.0/screenWidthInPixels",
                "    // {_y} = 1.0/screenHeightInPixels",
                "    FxaaFloat2 fxaaQualityRcpFrame,",
                "    //",
                "    // Only used on FXAA Console.",
                "    // This must be from a constant/uniform.",
                "    // This effects sub-pixel AA quality and inversely sharpness.",
                "    //   Where N ranges between,",
                "    //     N = 0.50 (default)",
                "    //     N = 0.33 (sharper)",
                "    // {x__} = -N/screenWidthInPixels",
                "    // {_y_} = -N/screenHeightInPixels",
                "    // {_z_} =  N/screenWidthInPixels",
                "    // {__w} =  N/screenHeightInPixels",
                "    FxaaFloat4 fxaaConsoleRcpFrameOpt,",
                "    //",
                "    // Only used on FXAA Console.",
                "    // Not used on 360, but used on PS3 and PC.",
                "    // This must be from a constant/uniform.",
                "    // {x__} = -2.0/screenWidthInPixels",
                "    // {_y_} = -2.0/screenHeightInPixels",
                "    // {_z_} =  2.0/screenWidthInPixels",
                "    // {__w} =  2.0/screenHeightInPixels",
                "    FxaaFloat4 fxaaConsoleRcpFrameOpt2,",
                "    //",
                "    // Only used on FXAA Console.",
                "    // Only used on 360 in place of fxaaConsoleRcpFrameOpt2.",
                "    // This must be from a constant/uniform.",
                "    // {x__} =  8.0/screenWidthInPixels",
                "    // {_y_} =  8.0/screenHeightInPixels",
                "    // {_z_} = -4.0/screenWidthInPixels",
                "    // {__w} = -4.0/screenHeightInPixels",
                "    FxaaFloat4 fxaaConsole360RcpFrameOpt2,",
                "    //",
                "    // Only used on FXAA Quality.",
                "    // This used to be the FXAA_QUALITY_SUBPIX define.",
                "    // It is here now to allow easier tuning.",
                "    // Choose the amount of sub-pixel aliasing removal.",
                "    // This can effect sharpness.",
                "    //   1.00 - upper limit (softer)",
                "    //   0.75 - default amount of filtering",
                "    //   0.50 - lower limit (sharper, less sub-pixel aliasing removal)",
                "    //   0.25 - almost off",
                "    //   0.00 - completely off",
                "    FxaaFloat fxaaQualitySubpix,",
                "    //",
                "    // Only used on FXAA Quality.",
                "    // This used to be the FXAA_QUALITY_EDGE_THRESHOLD define.",
                "    // It is here now to allow easier tuning.",
                "    // The minimum amount of local contrast required to apply algorithm.",
                "    //   0.333 - too little (faster)",
                "    //   0.250 - low quality",
                "    //   0.166 - default",
                "    //   0.125 - high quality",
                "    //   0.063 - overkill (slower)",
                "    FxaaFloat fxaaQualityEdgeThreshold,",
                "    //",
                "    // Only used on FXAA Quality.",
                "    // This used to be the FXAA_QUALITY_EDGE_THRESHOLD_MIN define.",
                "    // It is here now to allow easier tuning.",
                "    // Trims the algorithm from processing darks.",
                "    //   0.0833 - upper limit (default, the start of visible unfiltered edges)",
                "    //   0.0625 - high quality (faster)",
                "    //   0.0312 - visible limit (slower)",
                "    // Special notes when using FXAA_GREEN_AS_LUMA,",
                "    //   Likely want to set this to zero.",
                "    //   As colors that are mostly not-green",
                "    //   will appear very dark in the green channel!",
                "    //   Tune by looking at mostly non-green content,",
                "    //   then start at zero and increase until aliasing is a problem.",
                "    FxaaFloat fxaaQualityEdgeThresholdMin,",
                "    //",
                "    // Only used on FXAA Console.",
                "    // This used to be the FXAA_CONSOLE_EDGE_SHARPNESS define.",
                "    // It is here now to allow easier tuning.",
                "    // This does not effect PS3, as this needs to be compiled in.",
                "    //   Use FXAA_CONSOLE_PS3_EDGE_SHARPNESS for PS3.",
                "    //   Due to the PS3 being ALU bound,",
                "    //   there are only three safe values here: 2 and 4 and 8.",
                "    //   These options use the shaders ability to a free *|/ by 2|4|8.",
                "    // For all other platforms can be a non-power of two.",
                "    //   8.0 is sharper (default!!!)",
                "    //   4.0 is softer",
                "    //   2.0 is really soft (good only for vector graphics inputs)",
                "    FxaaFloat fxaaConsoleEdgeSharpness,",
                "    //",
                "    // Only used on FXAA Console.",
                "    // This used to be the FXAA_CONSOLE_EDGE_THRESHOLD define.",
                "    // It is here now to allow easier tuning.",
                "    // This does not effect PS3, as this needs to be compiled in.",
                "    //   Use FXAA_CONSOLE_PS3_EDGE_THRESHOLD for PS3.",
                "    //   Due to the PS3 being ALU bound,",
                "    //   there are only two safe values here: 1/4 and 1/8.",
                "    //   These options use the shaders ability to a free *|/ by 2|4|8.",
                "    // The console setting has a different mapping than the quality setting.",
                "    // Other platforms can use other values.",
                "    //   0.125 leaves less aliasing, but is softer (default!!!)",
                "    //   0.25 leaves more aliasing, and is sharper",
                "    FxaaFloat fxaaConsoleEdgeThreshold,",
                "    //",
                "    // Only used on FXAA Console.",
                "    // This used to be the FXAA_CONSOLE_EDGE_THRESHOLD_MIN define.",
                "    // It is here now to allow easier tuning.",
                "    // Trims the algorithm from processing darks.",
                "    // The console setting has a different mapping than the quality setting.",
                "    // This only applies when FXAA_EARLY_EXIT is 1.",
                "    // This does not apply to PS3,",
                "    // PS3 was simplified to avoid more shader instructions.",
                "    //   0.06 - faster but more aliasing in darks",
                "    //   0.05 - default",
                "    //   0.04 - slower and less aliasing in darks",
                "    // Special notes when using FXAA_GREEN_AS_LUMA,",
                "    //   Likely want to set this to zero.",
                "    //   As colors that are mostly not-green",
                "    //   will appear very dark in the green channel!",
                "    //   Tune by looking at mostly non-green content,",
                "    //   then start at zero and increase until aliasing is a problem.",
                "    FxaaFloat fxaaConsoleEdgeThresholdMin,",
                "    //",
                "    // Extra constants for 360 FXAA Console only.",
                "    // Use zeros or anything else for other platforms.",
                "    // These must be in physical constant registers and NOT immedates.",
                "    // Immedates will result in compiler un-optimizing.",
                "    // {xyzw} = float4(1.0, -1.0, 0.25, -0.25)",
                "    FxaaFloat4 fxaaConsole360ConstDir",
                ") {",
                "/*--------------------------------------------------------------------------*/",
                "    FxaaFloat2 posM;",
                "    posM.x = pos.x;",
                "    posM.y = pos.y;",
                "    #if (FXAA_GATHER4_ALPHA == 1)",
                "        #if (FXAA_DISCARD == 0)",
                "            FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);",
                "            #if (FXAA_GREEN_AS_LUMA == 0)",
                "                #define lumaM rgbyM.w",
                "            #else",
                "                #define lumaM rgbyM.y",
                "            #endif",
                "        #endif",
                "        #if (FXAA_GREEN_AS_LUMA == 0)",
                "            FxaaFloat4 luma4A = FxaaTexAlpha4(tex, posM);",
                "            FxaaFloat4 luma4B = FxaaTexOffAlpha4(tex, posM, FxaaInt2(-1, -1));",
                "        #else",
                "            FxaaFloat4 luma4A = FxaaTexGreen4(tex, posM);",
                "            FxaaFloat4 luma4B = FxaaTexOffGreen4(tex, posM, FxaaInt2(-1, -1));",
                "        #endif",
                "        #if (FXAA_DISCARD == 1)",
                "            #define lumaM luma4A.w",
                "        #endif",
                "        #define lumaE luma4A.z",
                "        #define lumaS luma4A.x",
                "        #define lumaSE luma4A.y",
                "        #define lumaNW luma4B.w",
                "        #define lumaN luma4B.z",
                "        #define lumaW luma4B.x",
                "    #else",
                "        FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);",
                "        #if (FXAA_GREEN_AS_LUMA == 0)",
                "            #define lumaM rgbyM.w",
                "        #else",
                "            #define lumaM rgbyM.y",
                "        #endif",
                "        #if (FXAA_GLSL_100 == 1)",
                "          FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 0.0, 1.0), fxaaQualityRcpFrame.xy));",
                "          FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0, 0.0), fxaaQualityRcpFrame.xy));",
                "          FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 0.0,-1.0), fxaaQualityRcpFrame.xy));",
                "          FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 0.0), fxaaQualityRcpFrame.xy));",
                "        #else",
                "          FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0, 1), fxaaQualityRcpFrame.xy));",
                "          FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 0), fxaaQualityRcpFrame.xy));",
                "          FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0,-1), fxaaQualityRcpFrame.xy));",
                "          FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 0), fxaaQualityRcpFrame.xy));",
                "        #endif",
                "    #endif",
                "/*--------------------------------------------------------------------------*/",
                "    FxaaFloat maxSM = max(lumaS, lumaM);",
                "    FxaaFloat minSM = min(lumaS, lumaM);",
                "    FxaaFloat maxESM = max(lumaE, maxSM);",
                "    FxaaFloat minESM = min(lumaE, minSM);",
                "    FxaaFloat maxWN = max(lumaN, lumaW);",
                "    FxaaFloat minWN = min(lumaN, lumaW);",
                "    FxaaFloat rangeMax = max(maxWN, maxESM);",
                "    FxaaFloat rangeMin = min(minWN, minESM);",
                "    FxaaFloat rangeMaxScaled = rangeMax * fxaaQualityEdgeThreshold;",
                "    FxaaFloat range = rangeMax - rangeMin;",
                "    FxaaFloat rangeMaxClamped = max(fxaaQualityEdgeThresholdMin, rangeMaxScaled);",
                "    FxaaBool earlyExit = range < rangeMaxClamped;",
                "/*--------------------------------------------------------------------------*/",
                "    if(earlyExit)",
                "        #if (FXAA_DISCARD == 1)",
                "            FxaaDiscard;",
                "        #else",
                "            return rgbyM;",
                "        #endif",
                "/*--------------------------------------------------------------------------*/",
                "    #if (FXAA_GATHER4_ALPHA == 0)",
                "        #if (FXAA_GLSL_100 == 1)",
                "          FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0,-1.0), fxaaQualityRcpFrame.xy));",
                "          FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0, 1.0), fxaaQualityRcpFrame.xy));",
                "          FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0,-1.0), fxaaQualityRcpFrame.xy));",
                "          FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 1.0), fxaaQualityRcpFrame.xy));",
                "        #else",
                "          FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1,-1), fxaaQualityRcpFrame.xy));",
                "          FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 1), fxaaQualityRcpFrame.xy));",
                "          FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1,-1), fxaaQualityRcpFrame.xy));",
                "          FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));",
                "        #endif",
                "    #else",
                "        FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(1, -1), fxaaQualityRcpFrame.xy));",
                "        FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));",
                "    #endif",
                "/*--------------------------------------------------------------------------*/",
                "    FxaaFloat lumaNS = lumaN + lumaS;",
                "    FxaaFloat lumaWE = lumaW + lumaE;",
                "    FxaaFloat subpixRcpRange = 1.0/range;",
                "    FxaaFloat subpixNSWE = lumaNS + lumaWE;",
                "    FxaaFloat edgeHorz1 = (-2.0 * lumaM) + lumaNS;",
                "    FxaaFloat edgeVert1 = (-2.0 * lumaM) + lumaWE;",
                "/*--------------------------------------------------------------------------*/",
                "    FxaaFloat lumaNESE = lumaNE + lumaSE;",
                "    FxaaFloat lumaNWNE = lumaNW + lumaNE;",
                "    FxaaFloat edgeHorz2 = (-2.0 * lumaE) + lumaNESE;",
                "    FxaaFloat edgeVert2 = (-2.0 * lumaN) + lumaNWNE;",
                "/*--------------------------------------------------------------------------*/",
                "    FxaaFloat lumaNWSW = lumaNW + lumaSW;",
                "    FxaaFloat lumaSWSE = lumaSW + lumaSE;",
                "    FxaaFloat edgeHorz4 = (abs(edgeHorz1) * 2.0) + abs(edgeHorz2);",
                "    FxaaFloat edgeVert4 = (abs(edgeVert1) * 2.0) + abs(edgeVert2);",
                "    FxaaFloat edgeHorz3 = (-2.0 * lumaW) + lumaNWSW;",
                "    FxaaFloat edgeVert3 = (-2.0 * lumaS) + lumaSWSE;",
                "    FxaaFloat edgeHorz = abs(edgeHorz3) + edgeHorz4;",
                "    FxaaFloat edgeVert = abs(edgeVert3) + edgeVert4;",
                "/*--------------------------------------------------------------------------*/",
                "    FxaaFloat subpixNWSWNESE = lumaNWSW + lumaNESE;",
                "    FxaaFloat lengthSign = fxaaQualityRcpFrame.x;",
                "    FxaaBool horzSpan = edgeHorz >= edgeVert;",
                "    FxaaFloat subpixA = subpixNSWE * 2.0 + subpixNWSWNESE;",
                "/*--------------------------------------------------------------------------*/",
                "    if(!horzSpan) lumaN = lumaW;",
                "    if(!horzSpan) lumaS = lumaE;",
                "    if(horzSpan) lengthSign = fxaaQualityRcpFrame.y;",
                "    FxaaFloat subpixB = (subpixA * (1.0/12.0)) - lumaM;",
                "/*--------------------------------------------------------------------------*/",
                "    FxaaFloat gradientN = lumaN - lumaM;",
                "    FxaaFloat gradientS = lumaS - lumaM;",
                "    FxaaFloat lumaNN = lumaN + lumaM;",
                "    FxaaFloat lumaSS = lumaS + lumaM;",
                "    FxaaBool pairN = abs(gradientN) >= abs(gradientS);",
                "    FxaaFloat gradient = max(abs(gradientN), abs(gradientS));",
                "    if(pairN) lengthSign = -lengthSign;",
                "    FxaaFloat subpixC = FxaaSat(abs(subpixB) * subpixRcpRange);",
                "/*--------------------------------------------------------------------------*/",
                "    FxaaFloat2 posB;",
                "    posB.x = posM.x;",
                "    posB.y = posM.y;",
                "    FxaaFloat2 offNP;",
                "    offNP.x = (!horzSpan) ? 0.0 : fxaaQualityRcpFrame.x;",
                "    offNP.y = ( horzSpan) ? 0.0 : fxaaQualityRcpFrame.y;",
                "    if(!horzSpan) posB.x += lengthSign * 0.5;",
                "    if( horzSpan) posB.y += lengthSign * 0.5;",
                "/*--------------------------------------------------------------------------*/",
                "    FxaaFloat2 posN;",
                "    posN.x = posB.x - offNP.x * FXAA_QUALITY_P0;",
                "    posN.y = posB.y - offNP.y * FXAA_QUALITY_P0;",
                "    FxaaFloat2 posP;",
                "    posP.x = posB.x + offNP.x * FXAA_QUALITY_P0;",
                "    posP.y = posB.y + offNP.y * FXAA_QUALITY_P0;",
                "    FxaaFloat subpixD = ((-2.0)*subpixC) + 3.0;",
                "    FxaaFloat lumaEndN = FxaaLuma(FxaaTexTop(tex, posN));",
                "    FxaaFloat subpixE = subpixC * subpixC;",
                "    FxaaFloat lumaEndP = FxaaLuma(FxaaTexTop(tex, posP));",
                "/*--------------------------------------------------------------------------*/",
                "    if(!pairN) lumaNN = lumaSS;",
                "    FxaaFloat gradientScaled = gradient * 1.0/4.0;",
                "    FxaaFloat lumaMM = lumaM - lumaNN * 0.5;",
                "    FxaaFloat subpixF = subpixD * subpixE;",
                "    FxaaBool lumaMLTZero = lumaMM < 0.0;",
                "/*--------------------------------------------------------------------------*/",
                "    lumaEndN -= lumaNN * 0.5;",
                "    lumaEndP -= lumaNN * 0.5;",
                "    FxaaBool doneN = abs(lumaEndN) >= gradientScaled;",
                "    FxaaBool doneP = abs(lumaEndP) >= gradientScaled;",
                "    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P1;",
                "    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P1;",
                "    FxaaBool doneNP = (!doneN) || (!doneP);",
                "    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P1;",
                "    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P1;",
                "/*--------------------------------------------------------------------------*/",
                "    if(doneNP) {",
                "        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));",
                "        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));",
                "        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;",
                "        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;",
                "        doneN = abs(lumaEndN) >= gradientScaled;",
                "        doneP = abs(lumaEndP) >= gradientScaled;",
                "        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P2;",
                "        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P2;",
                "        doneNP = (!doneN) || (!doneP);",
                "        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P2;",
                "        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P2;",
                "/*--------------------------------------------------------------------------*/",
                "        #if (FXAA_QUALITY_PS > 3)",
                "        if(doneNP) {",
                "            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));",
                "            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));",
                "            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;",
                "            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;",
                "            doneN = abs(lumaEndN) >= gradientScaled;",
                "            doneP = abs(lumaEndP) >= gradientScaled;",
                "            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P3;",
                "            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P3;",
                "            doneNP = (!doneN) || (!doneP);",
                "            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P3;",
                "            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P3;",
                "/*--------------------------------------------------------------------------*/",
                "            #if (FXAA_QUALITY_PS > 4)",
                "            if(doneNP) {",
                "                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));",
                "                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));",
                "                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;",
                "                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;",
                "                doneN = abs(lumaEndN) >= gradientScaled;",
                "                doneP = abs(lumaEndP) >= gradientScaled;",
                "                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P4;",
                "                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P4;",
                "                doneNP = (!doneN) || (!doneP);",
                "                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P4;",
                "                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P4;",
                "/*--------------------------------------------------------------------------*/",
                "                #if (FXAA_QUALITY_PS > 5)",
                "                if(doneNP) {",
                "                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));",
                "                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));",
                "                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;",
                "                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;",
                "                    doneN = abs(lumaEndN) >= gradientScaled;",
                "                    doneP = abs(lumaEndP) >= gradientScaled;",
                "                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P5;",
                "                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P5;",
                "                    doneNP = (!doneN) || (!doneP);",
                "                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P5;",
                "                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P5;",
                "/*--------------------------------------------------------------------------*/",
                "                    #if (FXAA_QUALITY_PS > 6)",
                "                    if(doneNP) {",
                "                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));",
                "                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));",
                "                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;",
                "                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;",
                "                        doneN = abs(lumaEndN) >= gradientScaled;",
                "                        doneP = abs(lumaEndP) >= gradientScaled;",
                "                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P6;",
                "                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P6;",
                "                        doneNP = (!doneN) || (!doneP);",
                "                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P6;",
                "                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P6;",
                "/*--------------------------------------------------------------------------*/",
                "                        #if (FXAA_QUALITY_PS > 7)",
                "                        if(doneNP) {",
                "                            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));",
                "                            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));",
                "                            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;",
                "                            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;",
                "                            doneN = abs(lumaEndN) >= gradientScaled;",
                "                            doneP = abs(lumaEndP) >= gradientScaled;",
                "                            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P7;",
                "                            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P7;",
                "                            doneNP = (!doneN) || (!doneP);",
                "                            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P7;",
                "                            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P7;",
                "/*--------------------------------------------------------------------------*/",
                "    #if (FXAA_QUALITY_PS > 8)",
                "    if(doneNP) {",
                "        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));",
                "        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));",
                "        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;",
                "        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;",
                "        doneN = abs(lumaEndN) >= gradientScaled;",
                "        doneP = abs(lumaEndP) >= gradientScaled;",
                "        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P8;",
                "        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P8;",
                "        doneNP = (!doneN) || (!doneP);",
                "        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P8;",
                "        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P8;",
                "/*--------------------------------------------------------------------------*/",
                "        #if (FXAA_QUALITY_PS > 9)",
                "        if(doneNP) {",
                "            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));",
                "            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));",
                "            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;",
                "            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;",
                "            doneN = abs(lumaEndN) >= gradientScaled;",
                "            doneP = abs(lumaEndP) >= gradientScaled;",
                "            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P9;",
                "            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P9;",
                "            doneNP = (!doneN) || (!doneP);",
                "            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P9;",
                "            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P9;",
                "/*--------------------------------------------------------------------------*/",
                "            #if (FXAA_QUALITY_PS > 10)",
                "            if(doneNP) {",
                "                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));",
                "                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));",
                "                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;",
                "                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;",
                "                doneN = abs(lumaEndN) >= gradientScaled;",
                "                doneP = abs(lumaEndP) >= gradientScaled;",
                "                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P10;",
                "                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P10;",
                "                doneNP = (!doneN) || (!doneP);",
                "                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P10;",
                "                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P10;",
                "/*--------------------------------------------------------------------------*/",
                "                #if (FXAA_QUALITY_PS > 11)",
                "                if(doneNP) {",
                "                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));",
                "                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));",
                "                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;",
                "                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;",
                "                    doneN = abs(lumaEndN) >= gradientScaled;",
                "                    doneP = abs(lumaEndP) >= gradientScaled;",
                "                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P11;",
                "                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P11;",
                "                    doneNP = (!doneN) || (!doneP);",
                "                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P11;",
                "                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P11;",
                "/*--------------------------------------------------------------------------*/",
                "                    #if (FXAA_QUALITY_PS > 12)",
                "                    if(doneNP) {",
                "                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));",
                "                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));",
                "                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;",
                "                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;",
                "                        doneN = abs(lumaEndN) >= gradientScaled;",
                "                        doneP = abs(lumaEndP) >= gradientScaled;",
                "                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P12;",
                "                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P12;",
                "                        doneNP = (!doneN) || (!doneP);",
                "                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P12;",
                "                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P12;",
                "/*--------------------------------------------------------------------------*/",
                "                    }",
                "                    #endif",
                "/*--------------------------------------------------------------------------*/",
                "                }",
                "                #endif",
                "/*--------------------------------------------------------------------------*/",
                "            }",
                "            #endif",
                "/*--------------------------------------------------------------------------*/",
                "        }",
                "        #endif",
                "/*--------------------------------------------------------------------------*/",
                "    }",
                "    #endif",
                "/*--------------------------------------------------------------------------*/",
                "                        }",
                "                        #endif",
                "/*--------------------------------------------------------------------------*/",
                "                    }",
                "                    #endif",
                "/*--------------------------------------------------------------------------*/",
                "                }",
                "                #endif",
                "/*--------------------------------------------------------------------------*/",
                "            }",
                "            #endif",
                "/*--------------------------------------------------------------------------*/",
                "        }",
                "        #endif",
                "/*--------------------------------------------------------------------------*/",
                "    }",
                "/*--------------------------------------------------------------------------*/",
                "    FxaaFloat dstN = posM.x - posN.x;",
                "    FxaaFloat dstP = posP.x - posM.x;",
                "    if(!horzSpan) dstN = posM.y - posN.y;",
                "    if(!horzSpan) dstP = posP.y - posM.y;",
                "/*--------------------------------------------------------------------------*/",
                "    FxaaBool goodSpanN = (lumaEndN < 0.0) != lumaMLTZero;",
                "    FxaaFloat spanLength = (dstP + dstN);",
                "    FxaaBool goodSpanP = (lumaEndP < 0.0) != lumaMLTZero;",
                "    FxaaFloat spanLengthRcp = 1.0/spanLength;",
                "/*--------------------------------------------------------------------------*/",
                "    FxaaBool directionN = dstN < dstP;",
                "    FxaaFloat dst = min(dstN, dstP);",
                "    FxaaBool goodSpan = directionN ? goodSpanN : goodSpanP;",
                "    FxaaFloat subpixG = subpixF * subpixF;",
                "    FxaaFloat pixelOffset = (dst * (-spanLengthRcp)) + 0.5;",
                "    FxaaFloat subpixH = subpixG * fxaaQualitySubpix;",
                "/*--------------------------------------------------------------------------*/",
                "    FxaaFloat pixelOffsetGood = goodSpan ? pixelOffset : 0.0;",
                "    FxaaFloat pixelOffsetSubpix = max(pixelOffsetGood, subpixH);",
                "    if(!horzSpan) posM.x += pixelOffsetSubpix * lengthSign;",
                "    if( horzSpan) posM.y += pixelOffsetSubpix * lengthSign;",
                "    #if (FXAA_DISCARD == 1)",
                "        return FxaaTexTop(tex, posM);",
                "    #else",
                "        return FxaaFloat4(FxaaTexTop(tex, posM).xyz, lumaM);",
                "    #endif",
                "}",
                "/*==========================================================================*/",
                "#endif",
                "",
                "void main() {",
                "  gl_FragColor = FxaaPixelShader(",
                "    vUv,",
                "    vec4(0.0),",
                "    tDiffuse,",
                "    tDiffuse,",
                "    tDiffuse,",
                "    resolution,",
                "    vec4(0.0),",
                "    vec4(0.0),",
                "    vec4(0.0),",
                "    0.75,",
                "    0.166,",
                "    0.0833,",
                "    0.0,",
                "    0.0,",
                "    0.0,",
                "    vec4(0.0)",
                "  );",
                "",
                "  // TODO avoid querying texture twice for same texel",
                "  gl_FragColor.a = texture2D(tDiffuse, vUv).a;",
                "}",
              ].join("\n"),
            };
          },
          "./src/lib/shaders/WaterShader.js": function (e, t, n) {
            "use strict";
            n.r(t),
              n.d(t, "WaterShader", function () {
                return r;
              });
            var i = n("./node_modules/three/build/three.module.js"),
              r = {
                uniforms: {
                  iGlobalTime: { type: "f", value: 0.1 },
                  iResolution: { type: "v2", value: new i.Vector2() },
                  cameraPos: { value: new i.Vector3() },
                  lightDir: { value: new i.Vector3() },
                },
                vertexShader:
                  "\n\n    varying vec3 vWorldPosition;\n    varying vec2 vTexCoord;\n\n    void main()\t{\n        vec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n        vWorldPosition = worldPosition.xyz;\n\n        vTexCoord = uv;\n\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n      }\n    ",
                fragmentShader:
                  "\n    uniform float iGlobalTime;\n    uniform vec2 iResolution;\n    uniform vec3 cameraPos;\n    uniform vec3 lightDir;\n\n    varying vec3 vWorldPosition;\n    varying vec2 vTexCoord;\n  \n    const int NUM_STEPS = 8;\n    const float PI\t \t= 3.1415;\n    const float EPSILON\t= 1e-3;\n    float EPSILON_NRM\t= 0.1 / iResolution.x;\n  \n    // sea variables\n    const int ITER_GEOMETRY = 3;\n    const int ITER_FRAGMENT = 5;\n    const float SEA_HEIGHT = 0.6;\n    const float SEA_CHOPPY = 1.0;\n    const float SEA_SPEED = 1.0;\n    const float SEA_FREQ = 0.16;\n    const vec3 SEA_BASE = vec3(0.1,0.19,0.22);\n    const vec3 SEA_WATER_COLOR = vec3(0.8,0.9,0.6);\n    float SEA_TIME = iGlobalTime * SEA_SPEED;\n    mat2 octave_m = mat2(1.6,1.2,-1.2,1.6);\n  \n    mat3 fromEuler(vec3 ang) {\n      vec2 a1 = vec2(sin(ang.x),cos(ang.x));\n      vec2 a2 = vec2(sin(ang.y),cos(ang.y));\n      vec2 a3 = vec2(sin(ang.z),cos(ang.z));\n      mat3 m;\n      m[0] = vec3(\n          a1.y*a3.y+a1.x*a2.x*a3.x,\n          a1.y*a2.x*a3.x+a3.y*a1.x,\n          -a2.y*a3.x\n      );\n      m[1] = vec3(-a2.y*a1.x,a1.y*a2.y,a2.x);\n      m[2] = vec3(\n          a3.y*a1.x*a2.x+a1.y*a3.x,\n        a1.x*a3.x-a1.y*a3.y*a2.x,\n        a2.y*a3.y\n      );\n      return m;\n    }\n  \n    float hash( vec2 p ) {\n      float h = dot(p,vec2(127.1,311.7));\t\n      return fract(sin(h)*43758.5453123);\n    }\n  \n    float noise( in vec2 p ) {\n      vec2 i = floor(p);\n      vec2 f = fract(p);\t\n      vec2 u = f * f * (3.0 - 2.0 * f);\n      return -1.0 + 2.0 * mix(\n          mix(\n            hash(i + vec2(0.0,0.0)\n        ), \n          hash(i + vec2(1.0,0.0)), u.x),\n          mix(hash(i + vec2(0.0,1.0) ), \n          hash(i + vec2(1.0,1.0) ), u.x), \n        u.y\n      );\n    }\n  \n    float diffuse(vec3 n,vec3 l,float p) {\n      return pow(dot(n,l) * 0.4 + 0.6,p);\n    }\n  \n    float specular(vec3 n,vec3 l,vec3 e,float s) {    \n      float nrm = (s + 8.0) / (3.1415 * 8.0);\n      return pow(max(dot(reflect(e,n),l),0.0),s) * nrm;\n    }\n  \n    vec3 getSkyColor(vec3 e) {\n      e.y = max(e.y, 0.0);\n      vec3 ret;\n      ret.x = pow(1.0 - e.y, 2.0);\n      ret.y = 1.0 - e.y;\n      ret.z = 0.6+(1.0 - e.y) * 0.4;\n      return ret;\n    }\n  \n  \n    float sea_octave(vec2 uv, float choppy) {\n      uv += noise(uv);         \n      vec2 wv = 1.0 - abs(sin(uv));\n      vec2 swv = abs(cos(uv));    \n      wv = mix(wv, swv, wv);\n      return pow(1.0 - pow(wv.x * wv.y, 0.65), choppy);\n    }\n  \n    float map(vec3 p) {\n      float freq = SEA_FREQ;\n      float amp = SEA_HEIGHT ;\n      float choppy = SEA_CHOPPY;\n      vec2 uv = p.xz; \n      uv.x *= 0.75;\n  \n      float d, h = 0.0;    \n      for(int i = 0; i < ITER_GEOMETRY; i++) {        \n        d = sea_octave((uv + SEA_TIME) * freq, choppy);\n        d += sea_octave((uv - SEA_TIME) * freq, choppy);\n        h += d * amp;        \n        uv *= octave_m;\n        freq *= 1.9; \n        amp *= 0.22;\n        choppy = mix(choppy, 1.0, 0.2);\n      }\n      return p.y - h;\n    }\n  \n    float map_detailed(vec3 p) {\n        float freq = SEA_FREQ;\n        float amp = SEA_HEIGHT;\n        float choppy = SEA_CHOPPY;\n        vec2 uv = p.xz;\n        uv.x *= 0.75;\n  \n        float d, h = 0.0;    \n        for(int i = 0; i < ITER_FRAGMENT; i++) {        \n          d = sea_octave((uv+SEA_TIME) * freq, choppy);\n          d += sea_octave((uv-SEA_TIME) * freq, choppy);\n          h += d * amp;        \n          uv *= octave_m;\n          freq *= 1.9; \n          amp *= 0.22;\n          choppy = mix(choppy,1.0,0.2);\n        }\n        return p.y - h;\n    }\n  \n    vec3 getSeaColor(\n        vec3 p,\n      vec3 n, \n      vec3 l, \n      vec3 eye, \n      vec3 dist\n    ) {  \n      float fresnel = 1.0 - max(dot(n,-eye),0.0);\n      fresnel = pow(fresnel,3.0) * 0.65;\n  \n      vec3 reflected = getSkyColor(reflect(eye,n));    \n      vec3 refracted = SEA_BASE + diffuse(n,l,80.0) * SEA_WATER_COLOR * 0.12; \n  \n      vec3 color = mix(refracted,reflected,fresnel);\n  \n      float atten = max(1.0 - dot(dist,dist) * 0.001, 0.0);\n      color += SEA_WATER_COLOR * (p.y - SEA_HEIGHT) * 0.18 * atten;\n  \n      float night = dot(l, vec3(0.0, 1.0, 0.0));\n      night = clamp(night + 0.1, 0.0, 0.5) * 2.0;\n      color *= vec3(night);\n\n      color += vec3(specular(n,l,eye,60.0));\n  \n      return color;\n    }\n  \n    // tracing\n    vec3 getNormal(vec3 p, float eps) {\n      vec3 n;\n      n.y = map_detailed(p);    \n      n.x = map_detailed(vec3(p.x+eps,p.y,p.z)) - n.y;\n      n.z = map_detailed(vec3(p.x,p.y,p.z+eps)) - n.y;\n      n.y = eps;\n      return normalize(n);\n    }\n  \n    float heightMapTracing(vec3 ori, vec3 dir, out vec3 p) {  \n\n      vec3 oriComp = ori;\n      oriComp.y -= vWorldPosition.y - SEA_HEIGHT;\n\n      float tm = 0.0;\n      float tx = 1000.0;\n      float hx = map(oriComp + dir * tx);\n\n      if(hx > 0.0) {\n        return tx;   \n      }\n  \n      float hm = map(oriComp + dir * tm);    \n      float tmid = 0.0;\n      for(int i = 0; i < NUM_STEPS; i++) {\n        tmid = mix(tm,tx, hm/(hm-hx));                   \n        p = oriComp + dir * tmid;   \n        float hmid = map(p);\n        if(hmid < 0.0) {\n          tx = tmid;\n          hx = hmid;\n        } else {\n          tm = tmid;\n          hm = hmid;\n         }\n      }\n\n      return tmid;\n    }\n  \n    void main() {\n      float time = iGlobalTime * 0.3;\n  \n      // ray\n      vec3 ang = vec3(\n        sin(time*3.0)*0.1,sin(time)*0.2+0.3,time\n      );    \n\n      vec3 dir = normalize( vWorldPosition - cameraPos );\n  \n      // tracing\n      vec3 p;\n      heightMapTracing(cameraPos,dir,p);\n      vec3 dist = vWorldPosition - cameraPos;\n      vec3 n = getNormal(\n        p,\n        dot(dist,dist) * EPSILON_NRM\n      );\n  \n      // color\n      vec3 color = mix(\n        getSkyColor(dir),\n        getSeaColor(p,n,lightDir,dir,dist),\n        pow(smoothstep(0.0,-0.05,dir.y),0.3)\n      );\n  \n      // post\n      gl_FragColor = vec4(pow(color,vec3(0.8)), 1.0) * 1.2;\n\n      float fogfac = clamp(length(dist), 300.0, 600.0);\n      fogfac -= 300.0;\n      fogfac /= 300.0;\n      gl_FragColor.a = 1.0 - fogfac;\n\n      #if defined( TONE_MAPPING )\n        gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n      #endif\n    }\n    ",
              };
          },
          "./src/lib/utils/Detector.js": function (e, t, n) {
            "use strict";
            n.r(t),
              n.d(t, "Detector", function () {
                return i;
              });
            var i = {
              canvas: !!window.CanvasRenderingContext2D,
              webgl: (function () {
                try {
                  var e = document.createElement("canvas");
                  return !(
                    !window.WebGLRenderingContext ||
                    (!e.getContext("webgl") &&
                      !e.getContext("experimental-webgl"))
                  );
                } catch (t) {
                  return !1;
                }
              })(),
              workers: !!window.Worker,
              fileapi:
                window.File &&
                window.FileReader &&
                window.FileList &&
                window.Blob,
              getWebGLErrorMessage: function () {
                var e = document.createElement("div");
                return (
                  (e.id = "webgl-error-message"),
                  (e.style.fontFamily = "monospace"),
                  (e.style.fontSize = "13px"),
                  (e.style.fontWeight = "normal"),
                  (e.style.textAlign = "center"),
                  (e.style.background = "#fff"),
                  (e.style.color = "#000"),
                  (e.style.padding = "1.5em"),
                  (e.style.width = "400px"),
                  (e.style.margin = "5em auto 0"),
                  this.webgl ||
                    (e.innerHTML = window.WebGLRenderingContext
                      ? [
                          'Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br />',
                          'Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.',
                        ].join("\n")
                      : [
                          'Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br/>',
                          'Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.',
                        ].join("\n")),
                  e
                );
              },
              addGetWebGLMessage: function (e) {
                var t, n, r;
                (t =
                  void 0 !== (e = e || {}).parent ? e.parent : document.body),
                  (n = void 0 !== e.id ? e.id : "oldie"),
                  ((r = i.getWebGLErrorMessage()).id = n),
                  t.appendChild(r);
              },
            };
          },
          "./src/lib/utils/Stats.js": function (e, t, n) {
            "use strict";
            n.r(t),
              n.d(t, "Stats", function () {
                return i;
              });
            var i = function e() {
              var t = document.createElement("div");
              function n(e) {
                return t.appendChild(e.dom), e;
              }
              function i(e) {
                for (var n = 0; n < t.children.length; n++)
                  t.children[n].style.display = "inline-block";
              }
              t.classList.add("statsBox");
              var r = (performance || Date).now(),
                a = r,
                o = 0,
                s = n(new e.Panel("FPS", "#0ff", "#002"));
              return (
                self.performance && self.performance.memory,
                i(0),
                {
                  REVISION: 16,
                  dom: t,
                  addPanel: n,
                  showPanel: i,
                  begin: function () {
                    r = (performance || Date).now();
                  },
                  end: function () {
                    o++;
                    var e = (performance || Date).now();
                    return (
                      e > a + 1e3 &&
                        (s.update((1e3 * o) / (e - a), 100), (a = e), (o = 0)),
                      e
                    );
                  },
                  update: function () {
                    r = this.end();
                  },
                  domElement: t,
                  setMode: i,
                }
              );
            };
            i.Panel = function (e, t, n) {
              var i = 1 / 0,
                r = 0,
                a = Math.round,
                o = a(window.devicePixelRatio || 1),
                s = 80 * o,
                l = 48 * o,
                u = 3 * o,
                c = 2 * o,
                h = 3 * o,
                d = 15 * o,
                p = 74 * o,
                f = 30 * o,
                m = document.createElement("canvas");
              (m.width = s),
                (m.height = l),
                (m.style.cssText = "width:80px;height:48px");
              var v = m.getContext("2d");
              return (
                (v.font = "bold " + 9 * o + "px Helvetica,Arial,sans-serif"),
                (v.textBaseline = "top"),
                (v.fillStyle = n),
                v.fillRect(0, 0, s, l),
                (v.fillStyle = t),
                v.fillText(e, u, c),
                v.fillRect(h, d, p, f),
                (v.fillStyle = n),
                (v.globalAlpha = 0.9),
                v.fillRect(h, d, p, f),
                {
                  dom: m,
                  update: function (l, g) {
                    (i = Math.min(i, l)),
                      (r = Math.max(r, l)),
                      (v.fillStyle = n),
                      (v.globalAlpha = 1),
                      v.fillRect(0, 0, s, d),
                      (v.fillStyle = t),
                      v.fillText(
                        a(l) + " " + e + " (" + a(i) + "-" + a(r) + ")",
                        u,
                        c
                      ),
                      v.drawImage(m, h + o, d, p - o, f, h, d, p - o, f),
                      v.fillRect(h + p - o, d, o, f),
                      (v.fillStyle = n),
                      (v.globalAlpha = 0.9),
                      v.fillRect(h + p - o, d, o, a((1 - l / g) * f));
                  },
                }
              );
            };
          },
          "./src/lib/utils/THREE.quickhull.js": function (e, t, n) {
            "use strict";
            n.r(t),
              n.d(t, "quickhull", function () {
                return r;
              });
            var i = n("./node_modules/three/build/three.module.js"),
              r = (function () {
                var e,
                  t,
                  n,
                  r,
                  a,
                  o,
                  s,
                  l,
                  u,
                  c,
                  h,
                  d,
                  p,
                  f,
                  m,
                  v,
                  g,
                  y,
                  x,
                  b = [],
                  _ = [],
                  w = 0,
                  S = (function () {
                    var e = new i.Vector3(),
                      t = new i.Vector3(),
                      n = new i.Vector3();
                    return function (i, r, a) {
                      return (
                        e.subVectors(a, i),
                        t.subVectors(r, i),
                        n.crossVectors(e, t),
                        n.normalize()
                      );
                    };
                  })();
                function E(e, t) {
                  if (void 0 !== e.normal) return e.normal;
                  var n = t[e[0]],
                    i = t[e[1]],
                    r = t[e[2]];
                  return (
                    h.subVectors(i, n),
                    d.subVectors(r, n),
                    m.crossVectors(d, h),
                    m.normalize(),
                    (e.normal = m.clone())
                  );
                }
                function M(e, t, n) {
                  var i = n[e[0]],
                    r = [],
                    a = E(e, n);
                  t.sort(function (e, t) {
                    return (
                      (r[e.x / 3] =
                        void 0 !== r[e.x / 3]
                          ? r[e.x / 3]
                          : a.dot(p.subVectors(e, i))),
                      (r[t.x / 3] =
                        void 0 !== r[t.x / 3]
                          ? r[t.x / 3]
                          : a.dot(f.subVectors(t, i))),
                      r[e.x / 3] - r[t.x / 3]
                    );
                  });
                  var o = t.length;
                  for (
                    1 === o && (r[t[0].x / 3] = a.dot(p.subVectors(t[0], i)));
                    o-- > 0 && r[t[o].x / 3] > 0;

                  );
                  o + 1 < t.length &&
                    r[t[o + 1].x / 3] > 0 &&
                    (e.visiblePoints = t.splice(o + 1));
                }
                function A(e, t) {
                  for (
                    var n,
                      i = b.length,
                      r = [e],
                      a = t.indexOf(e.visiblePoints.pop());
                    i-- > 0;

                  )
                    (n = b[i]) !== e &&
                      E(n, t).dot(v.subVectors(t[a], t[n[0]])) > 0 &&
                      r.push(n);
                  var o,
                    s,
                    l,
                    u,
                    c = (i = r.length),
                    h = 1 === i,
                    d = [],
                    p = 0,
                    f = [];
                  if (
                    (r[0][0],
                    r[0][1],
                    r[0][1],
                    r[0][2],
                    r[0][2],
                    r[0][0],
                    1 === r.length)
                  )
                    (d = [(n = r[0])[0], n[1], n[1], n[2], n[2], n[0]]),
                      _.indexOf(n) > -1 && _.splice(_.indexOf(n), 1),
                      n.visiblePoints && (f = f.concat(n.visiblePoints)),
                      b.splice(b.indexOf(n), 1);
                  else
                    for (; i-- > 0; ) {
                      var m;
                      for (
                        n = r[i],
                          _.indexOf(n) > -1 && _.splice(_.indexOf(n), 1),
                          n.visiblePoints && (f = f.concat(n.visiblePoints)),
                          b.splice(b.indexOf(n), 1),
                          cEdgeIndex = 0;
                        cEdgeIndex < 3;

                      ) {
                        for (
                          m = !1,
                            c = r.length,
                            l = n[cEdgeIndex],
                            u = n[(cEdgeIndex + 1) % 3];
                          c-- > 0 && !m;

                        )
                          if (((p = 0), (o = r[c]) !== n))
                            for (; p < 3 && !m; )
                              (s = p + 1),
                                (m =
                                  (o[p] === l && o[s % 3] === u) ||
                                  (o[p] === u && o[s % 3] === l)),
                                p++;
                        (m && !h) || (d.push(l), d.push(u)), cEdgeIndex++;
                      }
                    }
                  i = 0;
                  for (var g, y = d.length / 2; i < y; )
                    M((g = [d[2 * i + 1], a, d[2 * i]]), f, t),
                      b.push(g),
                      void 0 !== g.visiblePoints && _.push(g),
                      i++;
                }
                var T = (function () {
                  var e = new i.Vector3(),
                    t = new i.Vector3(),
                    n = new i.Vector3();
                  return function (i, r, a) {
                    e.subVectors(r, i), t.subVectors(a, i), n.subVectors(a, r);
                    var o = t.dot(e);
                    if (o < 0) return t.dot(t);
                    var s = e.dot(e);
                    return o >= s ? n.dot(n) : t.dot(t) - (o * o) / s;
                  };
                })();
                return function (E) {
                  for (
                    h = new i.Vector3(),
                      d = new i.Vector3(),
                      new i.Vector3(),
                      p = new i.Vector3(),
                      f = new i.Vector3(),
                      m = new i.Vector3(),
                      v = new i.Vector3(),
                      g = new i.Vector3(),
                      y = new i.Vector3(),
                      x = new i.Vector3(),
                      points = E.vertices,
                      b = [],
                      _ = [],
                      F = e = points.length,
                      t = points.slice(0, 6),
                      w = 0;
                    F-- > 0;

                  )
                    points[F].x < t[0].x && (t[0] = points[F]),
                      points[F].x > t[1].x && (t[1] = points[F]),
                      points[F].y < t[2].y && (t[2] = points[F]),
                      points[F].y < t[3].y && (t[3] = points[F]),
                      points[F].z < t[4].z && (t[4] = points[F]),
                      points[F].z < t[5].z && (t[5] = points[F]);
                  for (r = F = 6; F-- > 0; )
                    for (r = F - 1; r-- > 0; )
                      w < (n = t[F].distanceToSquared(t[r])) &&
                        ((w = n), (a = t[F]), (o = t[r]));
                  for (F = 6, w = 0; F-- > 0; )
                    (n = T(a, o, t[F])), w < n && ((w = n), (s = t[F]));
                  for (u = S(a, o, s), c = u.dot(a), w = 0, F = e; F-- > 0; )
                    (n = Math.abs(points[F].dot(u) - c)),
                      w < n && ((w = n), (l = points[F]));
                  var C = points.indexOf(a),
                    k = points.indexOf(o),
                    P = points.indexOf(s),
                    L = points.indexOf(l),
                    R = [
                      [P, k, C],
                      [k, L, C],
                      [P, L, k],
                      [C, L, P],
                    ];
                  g.subVectors(o, a).normalize(),
                    y.subVectors(s, a).normalize(),
                    x.subVectors(l, a).normalize(),
                    x.dot(new i.Vector3().crossVectors(y, g)) < 0 &&
                      (R[0].reverse(),
                      R[1].reverse(),
                      R[2].reverse(),
                      R[3].reverse());
                  var I = points.slice();
                  I.splice(I.indexOf(a), 1),
                    I.splice(I.indexOf(o), 1),
                    I.splice(I.indexOf(s), 1),
                    I.splice(I.indexOf(l), 1);
                  for (var F = R.length; F-- > 0; )
                    M(R[F], I, points),
                      void 0 !== R[F].visiblePoints && _.push(R[F]),
                      b.push(R[F]);
                  !(function (e) {
                    for (; _.length > 0; ) A(_.shift(), e);
                  })(points);
                  for (var N = b.length; N-- > 0; )
                    E.faces[N] = new i.Face3(
                      b[N][2],
                      b[N][1],
                      b[N][0],
                      b[N].normal
                    );
                  return (E.normalsNeedUpdate = !0), E;
                };
              })();
          },
          "./src/lib/utils/dat.gui.js": function (e, t, n) {
            e.exports = (function () {
              "use strict";
              function e(e, t) {
                var n = e.__state.conversionName.toString(),
                  i = Math.round(e.r),
                  r = Math.round(e.g),
                  a = Math.round(e.b),
                  o = e.a,
                  s = Math.round(e.h),
                  l = e.s.toFixed(1),
                  u = e.v.toFixed(1);
                if (t || "THREE_CHAR_HEX" === n || "SIX_CHAR_HEX" === n) {
                  for (var c = e.hex.toString(16); c.length < 6; ) c = "0" + c;
                  return "#" + c;
                }
                return "CSS_RGB" === n
                  ? "rgb(" + i + "," + r + "," + a + ")"
                  : "CSS_RGBA" === n
                  ? "rgba(" + i + "," + r + "," + a + "," + o + ")"
                  : "HEX" === n
                  ? "0x" + e.hex.toString(16)
                  : "RGB_ARRAY" === n
                  ? "[" + i + "," + r + "," + a + "]"
                  : "RGBA_ARRAY" === n
                  ? "[" + i + "," + r + "," + a + "," + o + "]"
                  : "RGB_OBJ" === n
                  ? "{r:" + i + ",g:" + r + ",b:" + a + "}"
                  : "RGBA_OBJ" === n
                  ? "{r:" + i + ",g:" + r + ",b:" + a + ",a:" + o + "}"
                  : "HSV_OBJ" === n
                  ? "{h:" + s + ",s:" + l + ",v:" + u + "}"
                  : "HSVA_OBJ" === n
                  ? "{h:" + s + ",s:" + l + ",v:" + u + ",a:" + o + "}"
                  : "unknown format";
              }
              var t = Array.prototype.forEach,
                n = Array.prototype.slice,
                i = {
                  BREAK: {},
                  extend: function (e) {
                    return (
                      this.each(
                        n.call(arguments, 1),
                        function (t) {
                          (this.isObject(t) ? Object.keys(t) : []).forEach(
                            function (n) {
                              this.isUndefined(t[n]) || (e[n] = t[n]);
                            }.bind(this)
                          );
                        },
                        this
                      ),
                      e
                    );
                  },
                  defaults: function (e) {
                    return (
                      this.each(
                        n.call(arguments, 1),
                        function (t) {
                          (this.isObject(t) ? Object.keys(t) : []).forEach(
                            function (n) {
                              this.isUndefined(e[n]) && (e[n] = t[n]);
                            }.bind(this)
                          );
                        },
                        this
                      ),
                      e
                    );
                  },
                  compose: function () {
                    var e = n.call(arguments);
                    return function () {
                      for (
                        var t = n.call(arguments), i = e.length - 1;
                        i >= 0;
                        i--
                      )
                        t = [e[i].apply(this, t)];
                      return t[0];
                    };
                  },
                  each: function (e, n, i) {
                    if (e)
                      if (t && e.forEach && e.forEach === t) e.forEach(n, i);
                      else if (e.length === e.length + 0) {
                        var r,
                          a = void 0;
                        for (a = 0, r = e.length; a < r; a++)
                          if (a in e && n.call(i, e[a], a) === this.BREAK)
                            return;
                      } else
                        for (var o in e)
                          if (n.call(i, e[o], o) === this.BREAK) return;
                  },
                  defer: function (e) {
                    setTimeout(e, 0);
                  },
                  debounce: function (e, t, n) {
                    var i = void 0;
                    return function () {
                      var r = this,
                        a = arguments;
                      function o() {
                        (i = null), n || e.apply(r, a);
                      }
                      var s = n || !i;
                      clearTimeout(i),
                        (i = setTimeout(o, t)),
                        s && e.apply(r, a);
                    };
                  },
                  toArray: function (e) {
                    return e.toArray ? e.toArray() : n.call(e);
                  },
                  isUndefined: function (e) {
                    return void 0 === e;
                  },
                  isNull: function (e) {
                    return null === e;
                  },
                  isNaN: (function (e) {
                    function t(t) {
                      return e.apply(this, arguments);
                    }
                    return (
                      (t.toString = function () {
                        return e.toString();
                      }),
                      t
                    );
                  })(function (e) {
                    return isNaN(e);
                  }),
                  isArray:
                    Array.isArray ||
                    function (e) {
                      return e.constructor === Array;
                    },
                  isObject: function (e) {
                    return e === Object(e);
                  },
                  isNumber: function (e) {
                    return e === e + 0;
                  },
                  isString: function (e) {
                    return e === e + "";
                  },
                  isBoolean: function (e) {
                    return !1 === e || !0 === e;
                  },
                  isFunction: function (e) {
                    return (
                      "[object Function]" === Object.prototype.toString.call(e)
                    );
                  },
                },
                r = [
                  {
                    litmus: i.isString,
                    conversions: {
                      THREE_CHAR_HEX: {
                        read: function (e) {
                          var t = e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);
                          return (
                            null !== t && {
                              space: "HEX",
                              hex: parseInt(
                                "0x" +
                                  t[1].toString() +
                                  t[1].toString() +
                                  t[2].toString() +
                                  t[2].toString() +
                                  t[3].toString() +
                                  t[3].toString(),
                                0
                              ),
                            }
                          );
                        },
                        write: e,
                      },
                      SIX_CHAR_HEX: {
                        read: function (e) {
                          var t = e.match(/^#([A-F0-9]{6})$/i);
                          return (
                            null !== t && {
                              space: "HEX",
                              hex: parseInt("0x" + t[1].toString(), 0),
                            }
                          );
                        },
                        write: e,
                      },
                      CSS_RGB: {
                        read: function (e) {
                          var t = e.match(
                            /^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/
                          );
                          return (
                            null !== t && {
                              space: "RGB",
                              r: parseFloat(t[1]),
                              g: parseFloat(t[2]),
                              b: parseFloat(t[3]),
                            }
                          );
                        },
                        write: e,
                      },
                      CSS_RGBA: {
                        read: function (e) {
                          var t = e.match(
                            /^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/
                          );
                          return (
                            null !== t && {
                              space: "RGB",
                              r: parseFloat(t[1]),
                              g: parseFloat(t[2]),
                              b: parseFloat(t[3]),
                              a: parseFloat(t[4]),
                            }
                          );
                        },
                        write: e,
                      },
                    },
                  },
                  {
                    litmus: i.isNumber,
                    conversions: {
                      HEX: {
                        read: function (e) {
                          return {
                            space: "HEX",
                            hex: e,
                            conversionName: "HEX",
                          };
                        },
                        write: function (e) {
                          return e.hex;
                        },
                      },
                    },
                  },
                  {
                    litmus: i.isArray,
                    conversions: {
                      RGB_ARRAY: {
                        read: function (e) {
                          return (
                            3 === e.length && {
                              space: "RGB",
                              r: e[0],
                              g: e[1],
                              b: e[2],
                            }
                          );
                        },
                        write: function (e) {
                          return [e.r, e.g, e.b];
                        },
                      },
                      RGBA_ARRAY: {
                        read: function (e) {
                          return (
                            4 === e.length && {
                              space: "RGB",
                              r: e[0],
                              g: e[1],
                              b: e[2],
                              a: e[3],
                            }
                          );
                        },
                        write: function (e) {
                          return [e.r, e.g, e.b, e.a];
                        },
                      },
                    },
                  },
                  {
                    litmus: i.isObject,
                    conversions: {
                      RGBA_OBJ: {
                        read: function (e) {
                          return (
                            !!(
                              i.isNumber(e.r) &&
                              i.isNumber(e.g) &&
                              i.isNumber(e.b) &&
                              i.isNumber(e.a)
                            ) && {
                              space: "RGB",
                              r: e.r,
                              g: e.g,
                              b: e.b,
                              a: e.a,
                            }
                          );
                        },
                        write: function (e) {
                          return { r: e.r, g: e.g, b: e.b, a: e.a };
                        },
                      },
                      RGB_OBJ: {
                        read: function (e) {
                          return (
                            !!(
                              i.isNumber(e.r) &&
                              i.isNumber(e.g) &&
                              i.isNumber(e.b)
                            ) && { space: "RGB", r: e.r, g: e.g, b: e.b }
                          );
                        },
                        write: function (e) {
                          return { r: e.r, g: e.g, b: e.b };
                        },
                      },
                      HSVA_OBJ: {
                        read: function (e) {
                          return (
                            !!(
                              i.isNumber(e.h) &&
                              i.isNumber(e.s) &&
                              i.isNumber(e.v) &&
                              i.isNumber(e.a)
                            ) && {
                              space: "HSV",
                              h: e.h,
                              s: e.s,
                              v: e.v,
                              a: e.a,
                            }
                          );
                        },
                        write: function (e) {
                          return { h: e.h, s: e.s, v: e.v, a: e.a };
                        },
                      },
                      HSV_OBJ: {
                        read: function (e) {
                          return (
                            !!(
                              i.isNumber(e.h) &&
                              i.isNumber(e.s) &&
                              i.isNumber(e.v)
                            ) && { space: "HSV", h: e.h, s: e.s, v: e.v }
                          );
                        },
                        write: function (e) {
                          return { h: e.h, s: e.s, v: e.v };
                        },
                      },
                    },
                  },
                ],
                a = void 0,
                o = void 0,
                s = function () {
                  o = !1;
                  var e =
                    arguments.length > 1 ? i.toArray(arguments) : arguments[0];
                  return (
                    i.each(r, function (t) {
                      if (t.litmus(e))
                        return (
                          i.each(t.conversions, function (t, n) {
                            if (((a = t.read(e)), !1 === o && !1 !== a))
                              return (
                                (o = a),
                                (a.conversionName = n),
                                (a.conversion = t),
                                i.BREAK
                              );
                          }),
                          i.BREAK
                        );
                    }),
                    o
                  );
                },
                l = void 0,
                u = {
                  hsv_to_rgb: function (e, t, n) {
                    var i = Math.floor(e / 60) % 6,
                      r = e / 60 - Math.floor(e / 60),
                      a = n * (1 - t),
                      o = n * (1 - r * t),
                      s = n * (1 - (1 - r) * t),
                      l = [
                        [n, s, a],
                        [o, n, a],
                        [a, n, s],
                        [a, o, n],
                        [s, a, n],
                        [n, a, o],
                      ][i];
                    return { r: 255 * l[0], g: 255 * l[1], b: 255 * l[2] };
                  },
                  rgb_to_hsv: function (e, t, n) {
                    var i = Math.min(e, t, n),
                      r = Math.max(e, t, n),
                      a = r - i,
                      o = void 0;
                    return 0 === r
                      ? { h: NaN, s: 0, v: 0 }
                      : ((o =
                          e === r
                            ? (t - n) / a
                            : t === r
                            ? 2 + (n - e) / a
                            : 4 + (e - t) / a),
                        (o /= 6) < 0 && (o += 1),
                        { h: 360 * o, s: a / r, v: r / 255 });
                  },
                  rgb_to_hex: function (e, t, n) {
                    var i = this.hex_with_component(0, 2, e);
                    return (
                      (i = this.hex_with_component(i, 1, t)),
                      (i = this.hex_with_component(i, 0, n))
                    );
                  },
                  component_from_hex: function (e, t) {
                    return (e >> (8 * t)) & 255;
                  },
                  hex_with_component: function (e, t, n) {
                    return (n << (l = 8 * t)) | (e & ~(255 << l));
                  },
                },
                c =
                  "function" === typeof Symbol &&
                  "symbol" === typeof Symbol.iterator
                    ? function (e) {
                        return typeof e;
                      }
                    : function (e) {
                        return e &&
                          "function" === typeof Symbol &&
                          e.constructor === Symbol &&
                          e !== Symbol.prototype
                          ? "symbol"
                          : typeof e;
                      },
                h = function (e, t) {
                  if (!(e instanceof t))
                    throw new TypeError("Cannot call a class as a function");
                },
                d = (function () {
                  function e(e, t) {
                    for (var n = 0; n < t.length; n++) {
                      var i = t[n];
                      (i.enumerable = i.enumerable || !1),
                        (i.configurable = !0),
                        "value" in i && (i.writable = !0),
                        Object.defineProperty(e, i.key, i);
                    }
                  }
                  return function (t, n, i) {
                    return n && e(t.prototype, n), i && e(t, i), t;
                  };
                })(),
                p = function e(t, n, i) {
                  null === t && (t = Function.prototype);
                  var r = Object.getOwnPropertyDescriptor(t, n);
                  if (void 0 === r) {
                    var a = Object.getPrototypeOf(t);
                    return null === a ? void 0 : e(a, n, i);
                  }
                  if ("value" in r) return r.value;
                  var o = r.get;
                  return void 0 !== o ? o.call(i) : void 0;
                },
                f = function (e, t) {
                  if ("function" !== typeof t && null !== t)
                    throw new TypeError(
                      "Super expression must either be null or a function, not " +
                        typeof t
                    );
                  (e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                      value: e,
                      enumerable: !1,
                      writable: !0,
                      configurable: !0,
                    },
                  })),
                    t &&
                      (Object.setPrototypeOf
                        ? Object.setPrototypeOf(e, t)
                        : (e.__proto__ = t));
                },
                m = function (e, t) {
                  if (!e)
                    throw new ReferenceError(
                      "this hasn't been initialised - super() hasn't been called"
                    );
                  return !t ||
                    ("object" !== typeof t && "function" !== typeof t)
                    ? e
                    : t;
                },
                v = (function () {
                  function t() {
                    if (
                      (h(this, t),
                      (this.__state = s.apply(this, arguments)),
                      !1 === this.__state)
                    )
                      throw new Error("Failed to interpret color arguments");
                    this.__state.a = this.__state.a || 1;
                  }
                  return (
                    d(t, [
                      {
                        key: "toString",
                        value: function () {
                          return e(this);
                        },
                      },
                      {
                        key: "toHexString",
                        value: function () {
                          return e(this, !0);
                        },
                      },
                      {
                        key: "toOriginal",
                        value: function () {
                          return this.__state.conversion.write(this);
                        },
                      },
                    ]),
                    t
                  );
                })();
              function g(e, t, n) {
                Object.defineProperty(e, t, {
                  get: function () {
                    return (
                      "RGB" === this.__state.space ||
                        v.recalculateRGB(this, t, n),
                      this.__state[t]
                    );
                  },
                  set: function (e) {
                    "RGB" !== this.__state.space &&
                      (v.recalculateRGB(this, t, n),
                      (this.__state.space = "RGB")),
                      (this.__state[t] = e);
                  },
                });
              }
              function y(e, t) {
                Object.defineProperty(e, t, {
                  get: function () {
                    return (
                      "HSV" === this.__state.space || v.recalculateHSV(this),
                      this.__state[t]
                    );
                  },
                  set: function (e) {
                    "HSV" !== this.__state.space &&
                      (v.recalculateHSV(this), (this.__state.space = "HSV")),
                      (this.__state[t] = e);
                  },
                });
              }
              (v.recalculateRGB = function (e, t, n) {
                if ("HEX" === e.__state.space)
                  e.__state[t] = u.component_from_hex(e.__state.hex, n);
                else {
                  if ("HSV" !== e.__state.space)
                    throw new Error("Corrupted color state");
                  i.extend(
                    e.__state,
                    u.hsv_to_rgb(e.__state.h, e.__state.s, e.__state.v)
                  );
                }
              }),
                (v.recalculateHSV = function (e) {
                  var t = u.rgb_to_hsv(e.r, e.g, e.b);
                  i.extend(e.__state, { s: t.s, v: t.v }),
                    i.isNaN(t.h)
                      ? i.isUndefined(e.__state.h) && (e.__state.h = 0)
                      : (e.__state.h = t.h);
                }),
                (v.COMPONENTS = ["r", "g", "b", "h", "s", "v", "hex", "a"]),
                g(v.prototype, "r", 2),
                g(v.prototype, "g", 1),
                g(v.prototype, "b", 0),
                y(v.prototype, "h"),
                y(v.prototype, "s"),
                y(v.prototype, "v"),
                Object.defineProperty(v.prototype, "a", {
                  get: function () {
                    return this.__state.a;
                  },
                  set: function (e) {
                    this.__state.a = e;
                  },
                }),
                Object.defineProperty(v.prototype, "hex", {
                  get: function () {
                    return (
                      "HEX" !== !this.__state.space &&
                        (this.__state.hex = u.rgb_to_hex(
                          this.r,
                          this.g,
                          this.b
                        )),
                      this.__state.hex
                    );
                  },
                  set: function (e) {
                    (this.__state.space = "HEX"), (this.__state.hex = e);
                  },
                });
              var x = (function () {
                  function e(t, n) {
                    h(this, e),
                      (this.initialValue = t[n]),
                      (this.domElement = document.createElement("div")),
                      (this.object = t),
                      (this.property = n),
                      (this.__onChange = void 0),
                      (this.__onFinishChange = void 0);
                  }
                  return (
                    d(e, [
                      {
                        key: "onChange",
                        value: function (e) {
                          return (this.__onChange = e), this;
                        },
                      },
                      {
                        key: "onFinishChange",
                        value: function (e) {
                          return (this.__onFinishChange = e), this;
                        },
                      },
                      {
                        key: "setValue",
                        value: function (e) {
                          return (
                            (this.object[this.property] = e),
                            this.__onChange && this.__onChange.call(this, e),
                            this.updateDisplay(),
                            this
                          );
                        },
                      },
                      {
                        key: "getValue",
                        value: function () {
                          return this.object[this.property];
                        },
                      },
                      {
                        key: "updateDisplay",
                        value: function () {
                          return this;
                        },
                      },
                      {
                        key: "isModified",
                        value: function () {
                          return this.initialValue !== this.getValue();
                        },
                      },
                    ]),
                    e
                  );
                })(),
                b = {};
              i.each(
                {
                  HTMLEvents: ["change"],
                  MouseEvents: [
                    "click",
                    "mousemove",
                    "mousedown",
                    "mouseup",
                    "mouseover",
                  ],
                  KeyboardEvents: ["keydown"],
                },
                function (e, t) {
                  i.each(e, function (e) {
                    b[e] = t;
                  });
                }
              );
              var _ = /(\d+(\.\d+)?)px/;
              function w(e) {
                if ("0" === e || i.isUndefined(e)) return 0;
                var t = e.match(_);
                return i.isNull(t) ? 0 : parseFloat(t[1]);
              }
              var S = {
                  makeSelectable: function (e, t) {
                    void 0 !== e &&
                      void 0 !== e.style &&
                      ((e.onselectstart = t
                        ? function () {
                            return !1;
                          }
                        : function () {}),
                      (e.style.MozUserSelect = t ? "auto" : "none"),
                      (e.style.KhtmlUserSelect = t ? "auto" : "none"),
                      (e.unselectable = t ? "on" : "off"));
                  },
                  makeFullscreen: function (e, t, n) {
                    var r = n,
                      a = t;
                    i.isUndefined(a) && (a = !0),
                      i.isUndefined(r) && (r = !0),
                      (e.style.position = "absolute"),
                      a && ((e.style.left = 0), (e.style.right = 0)),
                      r && ((e.style.top = 0), (e.style.bottom = 0));
                  },
                  fakeEvent: function (e, t, n, r) {
                    var a = n || {},
                      o = b[t];
                    if (!o)
                      throw new Error("Event type " + t + " not supported.");
                    var s = document.createEvent(o);
                    switch (o) {
                      case "MouseEvents":
                        var l = a.x || a.clientX || 0,
                          u = a.y || a.clientY || 0;
                        s.initMouseEvent(
                          t,
                          a.bubbles || !1,
                          a.cancelable || !0,
                          window,
                          a.clickCount || 1,
                          0,
                          0,
                          l,
                          u,
                          !1,
                          !1,
                          !1,
                          !1,
                          0,
                          null
                        );
                        break;
                      case "KeyboardEvents":
                        var c = s.initKeyboardEvent || s.initKeyEvent;
                        i.defaults(a, {
                          cancelable: !0,
                          ctrlKey: !1,
                          altKey: !1,
                          shiftKey: !1,
                          metaKey: !1,
                          keyCode: void 0,
                          charCode: void 0,
                        }),
                          c(
                            t,
                            a.bubbles || !1,
                            a.cancelable,
                            window,
                            a.ctrlKey,
                            a.altKey,
                            a.shiftKey,
                            a.metaKey,
                            a.keyCode,
                            a.charCode
                          );
                        break;
                      default:
                        s.initEvent(t, a.bubbles || !1, a.cancelable || !0);
                    }
                    i.defaults(s, r), e.dispatchEvent(s);
                  },
                  bind: function (e, t, n, i) {
                    var r = i || !1;
                    return (
                      e.addEventListener
                        ? e.addEventListener(t, n, r)
                        : e.attachEvent && e.attachEvent("on" + t, n),
                      S
                    );
                  },
                  unbind: function (e, t, n, i) {
                    var r = i || !1;
                    return (
                      e.removeEventListener
                        ? e.removeEventListener(t, n, r)
                        : e.detachEvent && e.detachEvent("on" + t, n),
                      S
                    );
                  },
                  addClass: function (e, t) {
                    if (void 0 === e.className) e.className = t;
                    else if (e.className !== t) {
                      var n = e.className.split(/ +/);
                      -1 === n.indexOf(t) &&
                        (n.push(t),
                        (e.className = n
                          .join(" ")
                          .replace(/^\s+/, "")
                          .replace(/\s+$/, "")));
                    }
                    return S;
                  },
                  removeClass: function (e, t) {
                    if (t)
                      if (e.className === t) e.removeAttribute("class");
                      else {
                        var n = e.className.split(/ +/),
                          i = n.indexOf(t);
                        -1 !== i &&
                          (n.splice(i, 1), (e.className = n.join(" ")));
                      }
                    else e.className = void 0;
                    return S;
                  },
                  hasClass: function (e, t) {
                    return (
                      new RegExp("(?:^|\\s+)" + t + "(?:\\s+|$)").test(
                        e.className
                      ) || !1
                    );
                  },
                  getWidth: function (e) {
                    var t = getComputedStyle(e);
                    return (
                      w(t["border-left-width"]) +
                      w(t["border-right-width"]) +
                      w(t["padding-left"]) +
                      w(t["padding-right"]) +
                      w(t.width)
                    );
                  },
                  getHeight: function (e) {
                    var t = getComputedStyle(e);
                    return (
                      w(t["border-top-width"]) +
                      w(t["border-bottom-width"]) +
                      w(t["padding-top"]) +
                      w(t["padding-bottom"]) +
                      w(t.height)
                    );
                  },
                  getOffset: function (e) {
                    var t = e,
                      n = { left: 0, top: 0 };
                    if (t.offsetParent)
                      do {
                        (n.left += t.offsetLeft),
                          (n.top += t.offsetTop),
                          (t = t.offsetParent);
                      } while (t);
                    return n;
                  },
                  isActive: function (e) {
                    return e === document.activeElement && (e.type || e.href);
                  },
                },
                E = (function (e) {
                  function t(e, n) {
                    h(this, t);
                    var i = m(
                        this,
                        (t.__proto__ || Object.getPrototypeOf(t)).call(
                          this,
                          e,
                          n
                        )
                      ),
                      r = i;
                    return (
                      (i.__prev = i.getValue()),
                      (i.__checkbox = document.createElement("input")),
                      i.__checkbox.setAttribute("type", "checkbox"),
                      S.bind(
                        i.__checkbox,
                        "change",
                        function () {
                          r.setValue(!r.__prev);
                        },
                        !1
                      ),
                      i.domElement.appendChild(i.__checkbox),
                      i.updateDisplay(),
                      i
                    );
                  }
                  return (
                    f(t, e),
                    d(t, [
                      {
                        key: "setValue",
                        value: function (e) {
                          var n = p(
                            t.prototype.__proto__ ||
                              Object.getPrototypeOf(t.prototype),
                            "setValue",
                            this
                          ).call(this, e);
                          return (
                            this.__onFinishChange &&
                              this.__onFinishChange.call(this, this.getValue()),
                            (this.__prev = this.getValue()),
                            n
                          );
                        },
                      },
                      {
                        key: "updateDisplay",
                        value: function () {
                          return (
                            !0 === this.getValue()
                              ? (this.__checkbox.setAttribute(
                                  "checked",
                                  "checked"
                                ),
                                (this.__checkbox.checked = !0),
                                (this.__prev = !0))
                              : ((this.__checkbox.checked = !1),
                                (this.__prev = !1)),
                            p(
                              t.prototype.__proto__ ||
                                Object.getPrototypeOf(t.prototype),
                              "updateDisplay",
                              this
                            ).call(this)
                          );
                        },
                      },
                    ]),
                    t
                  );
                })(x),
                M = (function (e) {
                  function t(e, n, r) {
                    h(this, t);
                    var a = m(
                        this,
                        (t.__proto__ || Object.getPrototypeOf(t)).call(
                          this,
                          e,
                          n
                        )
                      ),
                      o = r,
                      s = a;
                    if (
                      ((a.__select = document.createElement("select")),
                      i.isArray(o))
                    ) {
                      var l = {};
                      i.each(o, function (e) {
                        l[e] = e;
                      }),
                        (o = l);
                    }
                    return (
                      i.each(o, function (e, t) {
                        var n = document.createElement("option");
                        (n.innerHTML = t),
                          n.setAttribute("value", e),
                          s.__select.appendChild(n);
                      }),
                      a.updateDisplay(),
                      S.bind(a.__select, "change", function () {
                        var e = this.options[this.selectedIndex].value;
                        s.setValue(e);
                      }),
                      a.domElement.appendChild(a.__select),
                      a
                    );
                  }
                  return (
                    f(t, e),
                    d(t, [
                      {
                        key: "setValue",
                        value: function (e) {
                          var n = p(
                            t.prototype.__proto__ ||
                              Object.getPrototypeOf(t.prototype),
                            "setValue",
                            this
                          ).call(this, e);
                          return (
                            this.__onFinishChange &&
                              this.__onFinishChange.call(this, this.getValue()),
                            n
                          );
                        },
                      },
                      {
                        key: "updateDisplay",
                        value: function () {
                          return S.isActive(this.__select)
                            ? this
                            : ((this.__select.value = this.getValue()),
                              p(
                                t.prototype.__proto__ ||
                                  Object.getPrototypeOf(t.prototype),
                                "updateDisplay",
                                this
                              ).call(this));
                        },
                      },
                    ]),
                    t
                  );
                })(x),
                A = (function (e) {
                  function t(e, n) {
                    h(this, t);
                    var i = m(
                        this,
                        (t.__proto__ || Object.getPrototypeOf(t)).call(
                          this,
                          e,
                          n
                        )
                      ),
                      r = i;
                    function a() {
                      r.setValue(r.__input.value);
                    }
                    return (
                      (i.__input = document.createElement("input")),
                      i.__input.setAttribute("type", "text"),
                      S.bind(i.__input, "keyup", a),
                      S.bind(i.__input, "change", a),
                      S.bind(i.__input, "blur", function () {
                        r.__onFinishChange &&
                          r.__onFinishChange.call(r, r.getValue());
                      }),
                      S.bind(i.__input, "keydown", function (e) {
                        13 === e.keyCode && this.blur();
                      }),
                      i.updateDisplay(),
                      i.domElement.appendChild(i.__input),
                      i
                    );
                  }
                  return (
                    f(t, e),
                    d(t, [
                      {
                        key: "updateDisplay",
                        value: function () {
                          return (
                            S.isActive(this.__input) ||
                              (this.__input.value = this.getValue()),
                            p(
                              t.prototype.__proto__ ||
                                Object.getPrototypeOf(t.prototype),
                              "updateDisplay",
                              this
                            ).call(this)
                          );
                        },
                      },
                    ]),
                    t
                  );
                })(x);
              function T(e) {
                var t = e.toString();
                return t.indexOf(".") > -1 ? t.length - t.indexOf(".") - 1 : 0;
              }
              var C = (function (e) {
                  function t(e, n, r) {
                    h(this, t);
                    var a = m(
                        this,
                        (t.__proto__ || Object.getPrototypeOf(t)).call(
                          this,
                          e,
                          n
                        )
                      ),
                      o = r || {};
                    return (
                      (a.__min = o.min),
                      (a.__max = o.max),
                      (a.__step = o.step),
                      i.isUndefined(a.__step)
                        ? 0 === a.initialValue
                          ? (a.__impliedStep = 1)
                          : (a.__impliedStep =
                              Math.pow(
                                10,
                                Math.floor(
                                  Math.log(Math.abs(a.initialValue)) / Math.LN10
                                )
                              ) / 10)
                        : (a.__impliedStep = a.__step),
                      (a.__precision = T(a.__impliedStep)),
                      a
                    );
                  }
                  return (
                    f(t, e),
                    d(t, [
                      {
                        key: "setValue",
                        value: function (e) {
                          var n = e;
                          return (
                            void 0 !== this.__min && n < this.__min
                              ? (n = this.__min)
                              : void 0 !== this.__max &&
                                n > this.__max &&
                                (n = this.__max),
                            void 0 !== this.__step &&
                              n % this.__step !== 0 &&
                              (n = Math.round(n / this.__step) * this.__step),
                            p(
                              t.prototype.__proto__ ||
                                Object.getPrototypeOf(t.prototype),
                              "setValue",
                              this
                            ).call(this, n)
                          );
                        },
                      },
                      {
                        key: "min",
                        value: function (e) {
                          return (this.__min = e), this;
                        },
                      },
                      {
                        key: "max",
                        value: function (e) {
                          return (this.__max = e), this;
                        },
                      },
                      {
                        key: "step",
                        value: function (e) {
                          return (
                            (this.__step = e),
                            (this.__impliedStep = e),
                            (this.__precision = T(e)),
                            this
                          );
                        },
                      },
                    ]),
                    t
                  );
                })(x),
                k = (function (e) {
                  function t(e, n, r) {
                    h(this, t);
                    var a = m(
                      this,
                      (t.__proto__ || Object.getPrototypeOf(t)).call(
                        this,
                        e,
                        n,
                        r
                      )
                    );
                    a.__truncationSuspended = !1;
                    var o = a,
                      s = void 0;
                    function l() {
                      o.__onFinishChange &&
                        o.__onFinishChange.call(o, o.getValue());
                    }
                    function u(e) {
                      var t = s - e.clientY;
                      o.setValue(o.getValue() + t * o.__impliedStep),
                        (s = e.clientY);
                    }
                    function c() {
                      S.unbind(window, "mousemove", u),
                        S.unbind(window, "mouseup", c),
                        l();
                    }
                    return (
                      (a.__input = document.createElement("input")),
                      a.__input.setAttribute("type", "text"),
                      S.bind(a.__input, "change", function () {
                        var e = parseFloat(o.__input.value);
                        i.isNaN(e) || o.setValue(e);
                      }),
                      S.bind(a.__input, "blur", function () {
                        l();
                      }),
                      S.bind(a.__input, "mousedown", function (e) {
                        S.bind(window, "mousemove", u),
                          S.bind(window, "mouseup", c),
                          (s = e.clientY);
                      }),
                      S.bind(a.__input, "keydown", function (e) {
                        13 === e.keyCode &&
                          ((o.__truncationSuspended = !0),
                          this.blur(),
                          (o.__truncationSuspended = !1),
                          l());
                      }),
                      a.updateDisplay(),
                      a.domElement.appendChild(a.__input),
                      a
                    );
                  }
                  return (
                    f(t, e),
                    d(t, [
                      {
                        key: "updateDisplay",
                        value: function () {
                          return (
                            (this.__input.value = this.__truncationSuspended
                              ? this.getValue()
                              : (function (e, t) {
                                  var n = Math.pow(10, t);
                                  return Math.round(e * n) / n;
                                })(this.getValue(), this.__precision)),
                            p(
                              t.prototype.__proto__ ||
                                Object.getPrototypeOf(t.prototype),
                              "updateDisplay",
                              this
                            ).call(this)
                          );
                        },
                      },
                    ]),
                    t
                  );
                })(C);
              function P(e, t, n, i, r) {
                return i + ((e - t) / (n - t)) * (r - i);
              }
              var L = (function (e) {
                  function t(e, n, i, r, a) {
                    h(this, t);
                    var o = m(
                        this,
                        (t.__proto__ || Object.getPrototypeOf(t)).call(
                          this,
                          e,
                          n,
                          { min: i, max: r, step: a }
                        )
                      ),
                      s = o;
                    function l(e) {
                      e.preventDefault();
                      var t = s.__background.getBoundingClientRect();
                      return (
                        s.setValue(
                          P(e.clientX, t.left, t.right, s.__min, s.__max)
                        ),
                        !1
                      );
                    }
                    function u() {
                      S.unbind(window, "mousemove", l),
                        S.unbind(window, "mouseup", u),
                        s.__onFinishChange &&
                          s.__onFinishChange.call(s, s.getValue());
                    }
                    function c(e) {
                      var t = e.touches[0].clientX,
                        n = s.__background.getBoundingClientRect();
                      s.setValue(P(t, n.left, n.right, s.__min, s.__max));
                    }
                    function d() {
                      S.unbind(window, "touchmove", c),
                        S.unbind(window, "touchend", d),
                        s.__onFinishChange &&
                          s.__onFinishChange.call(s, s.getValue());
                    }
                    return (
                      (o.__background = document.createElement("div")),
                      (o.__foreground = document.createElement("div")),
                      S.bind(o.__background, "mousedown", function (e) {
                        document.activeElement.blur(),
                          S.bind(window, "mousemove", l),
                          S.bind(window, "mouseup", u),
                          l(e);
                      }),
                      S.bind(o.__background, "touchstart", function (e) {
                        1 === e.touches.length &&
                          (S.bind(window, "touchmove", c),
                          S.bind(window, "touchend", d),
                          c(e));
                      }),
                      S.addClass(o.__background, "slider"),
                      S.addClass(o.__foreground, "slider-fg"),
                      o.updateDisplay(),
                      o.__background.appendChild(o.__foreground),
                      o.domElement.appendChild(o.__background),
                      o
                    );
                  }
                  return (
                    f(t, e),
                    d(t, [
                      {
                        key: "updateDisplay",
                        value: function () {
                          var e =
                            (this.getValue() - this.__min) /
                            (this.__max - this.__min);
                          return (
                            (this.__foreground.style.width = 100 * e + "%"),
                            p(
                              t.prototype.__proto__ ||
                                Object.getPrototypeOf(t.prototype),
                              "updateDisplay",
                              this
                            ).call(this)
                          );
                        },
                      },
                    ]),
                    t
                  );
                })(C),
                R = (function (e) {
                  function t(e, n, i) {
                    h(this, t);
                    var r = m(
                        this,
                        (t.__proto__ || Object.getPrototypeOf(t)).call(
                          this,
                          e,
                          n
                        )
                      ),
                      a = r;
                    return (
                      (r.__button = document.createElement("div")),
                      (r.__button.innerHTML = void 0 === i ? "Fire" : i),
                      S.bind(r.__button, "click", function (e) {
                        return e.preventDefault(), a.fire(), !1;
                      }),
                      S.addClass(r.__button, "button"),
                      r.domElement.appendChild(r.__button),
                      r
                    );
                  }
                  return (
                    f(t, e),
                    d(t, [
                      {
                        key: "fire",
                        value: function () {
                          this.__onChange && this.__onChange.call(this),
                            this.getValue().call(this.object),
                            this.__onFinishChange &&
                              this.__onFinishChange.call(this, this.getValue());
                        },
                      },
                    ]),
                    t
                  );
                })(x),
                I = (function (e) {
                  function t(e, n) {
                    h(this, t);
                    var r = m(
                      this,
                      (t.__proto__ || Object.getPrototypeOf(t)).call(this, e, n)
                    );
                    (r.__color = new v(r.getValue())), (r.__temp = new v(0));
                    var a = r;
                    (r.domElement = document.createElement("div")),
                      S.makeSelectable(r.domElement, !1),
                      (r.__selector = document.createElement("div")),
                      (r.__selector.className = "selector"),
                      (r.__saturation_field = document.createElement("div")),
                      (r.__saturation_field.className = "saturation-field"),
                      (r.__field_knob = document.createElement("div")),
                      (r.__field_knob.className = "field-knob"),
                      (r.__field_knob_border = "2px solid "),
                      (r.__hue_knob = document.createElement("div")),
                      (r.__hue_knob.className = "hue-knob"),
                      (r.__hue_field = document.createElement("div")),
                      (r.__hue_field.className = "hue-field"),
                      (r.__input = document.createElement("input")),
                      (r.__input.type = "text"),
                      (r.__input_textShadow = "0 1px 1px "),
                      S.bind(r.__input, "keydown", function (e) {
                        13 === e.keyCode && f.call(this);
                      }),
                      S.bind(r.__input, "blur", f),
                      S.bind(r.__selector, "mousedown", function () {
                        S.addClass(this, "drag").bind(
                          window,
                          "mouseup",
                          function () {
                            S.removeClass(a.__selector, "drag");
                          }
                        );
                      }),
                      S.bind(r.__selector, "touchstart", function () {
                        S.addClass(this, "drag").bind(
                          window,
                          "touchend",
                          function () {
                            S.removeClass(a.__selector, "drag");
                          }
                        );
                      });
                    var o,
                      l = document.createElement("div");
                    function u(e) {
                      y(e),
                        S.bind(window, "mousemove", y),
                        S.bind(window, "touchmove", y),
                        S.bind(window, "mouseup", d),
                        S.bind(window, "touchend", d);
                    }
                    function c(e) {
                      x(e),
                        S.bind(window, "mousemove", x),
                        S.bind(window, "touchmove", x),
                        S.bind(window, "mouseup", p),
                        S.bind(window, "touchend", p);
                    }
                    function d() {
                      S.unbind(window, "mousemove", y),
                        S.unbind(window, "touchmove", y),
                        S.unbind(window, "mouseup", d),
                        S.unbind(window, "touchend", d),
                        g();
                    }
                    function p() {
                      S.unbind(window, "mousemove", x),
                        S.unbind(window, "touchmove", x),
                        S.unbind(window, "mouseup", p),
                        S.unbind(window, "touchend", p),
                        g();
                    }
                    function f() {
                      var e = s(this.value);
                      !1 !== e
                        ? ((a.__color.__state = e),
                          a.setValue(a.__color.toOriginal()))
                        : (this.value = a.__color.toString());
                    }
                    function g() {
                      a.__onFinishChange &&
                        a.__onFinishChange.call(a, a.__color.toOriginal());
                    }
                    function y(e) {
                      -1 === e.type.indexOf("touch") && e.preventDefault();
                      var t = a.__saturation_field.getBoundingClientRect(),
                        n = (e.touches && e.touches[0]) || e,
                        i = n.clientX,
                        r = n.clientY,
                        o = (i - t.left) / (t.right - t.left),
                        s = 1 - (r - t.top) / (t.bottom - t.top);
                      return (
                        s > 1 ? (s = 1) : s < 0 && (s = 0),
                        o > 1 ? (o = 1) : o < 0 && (o = 0),
                        (a.__color.v = s),
                        (a.__color.s = o),
                        a.setValue(a.__color.toOriginal()),
                        !1
                      );
                    }
                    function x(e) {
                      -1 === e.type.indexOf("touch") && e.preventDefault();
                      var t = a.__hue_field.getBoundingClientRect(),
                        n =
                          1 -
                          (((e.touches && e.touches[0]) || e).clientY - t.top) /
                            (t.bottom - t.top);
                      return (
                        n > 1 ? (n = 1) : n < 0 && (n = 0),
                        (a.__color.h = 360 * n),
                        a.setValue(a.__color.toOriginal()),
                        !1
                      );
                    }
                    return (
                      i.extend(r.__selector.style, {
                        width: "122px",
                        height: "102px",
                        padding: "3px",
                        backgroundColor: "#222",
                        boxShadow: "0px 1px 3px rgba(0,0,0,0.3)",
                      }),
                      i.extend(r.__field_knob.style, {
                        position: "absolute",
                        width: "12px",
                        height: "12px",
                        border:
                          r.__field_knob_border +
                          (r.__color.v < 0.5 ? "#fff" : "#000"),
                        boxShadow: "0px 1px 3px rgba(0,0,0,0.5)",
                        borderRadius: "12px",
                        zIndex: 1,
                      }),
                      i.extend(r.__hue_knob.style, {
                        position: "absolute",
                        width: "15px",
                        height: "2px",
                        borderRight: "4px solid #fff",
                        zIndex: 1,
                      }),
                      i.extend(r.__saturation_field.style, {
                        width: "100px",
                        height: "100px",
                        border: "1px solid #555",
                        marginRight: "3px",
                        display: "inline-block",
                        cursor: "pointer",
                      }),
                      i.extend(l.style, {
                        width: "100%",
                        height: "100%",
                        background: "none",
                      }),
                      N(l, "top", "rgba(0,0,0,0)", "#000"),
                      i.extend(r.__hue_field.style, {
                        width: "15px",
                        height: "100px",
                        border: "1px solid #555",
                        cursor: "ns-resize",
                        position: "absolute",
                        top: "3px",
                        right: "3px",
                      }),
                      ((o = r.__hue_field).style.background = ""),
                      (o.style.cssText +=
                        "background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);"),
                      (o.style.cssText +=
                        "background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"),
                      (o.style.cssText +=
                        "background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"),
                      (o.style.cssText +=
                        "background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"),
                      (o.style.cssText +=
                        "background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"),
                      i.extend(r.__input.style, {
                        outline: "none",
                        textAlign: "center",
                        color: "#fff",
                        border: 0,
                        fontWeight: "bold",
                        textShadow: r.__input_textShadow + "rgba(0,0,0,0.7)",
                      }),
                      S.bind(r.__saturation_field, "mousedown", u),
                      S.bind(r.__saturation_field, "touchstart", u),
                      S.bind(r.__field_knob, "mousedown", u),
                      S.bind(r.__field_knob, "touchstart", u),
                      S.bind(r.__hue_field, "mousedown", c),
                      S.bind(r.__hue_field, "touchstart", c),
                      r.__saturation_field.appendChild(l),
                      r.__selector.appendChild(r.__field_knob),
                      r.__selector.appendChild(r.__saturation_field),
                      r.__selector.appendChild(r.__hue_field),
                      r.__hue_field.appendChild(r.__hue_knob),
                      r.domElement.appendChild(r.__input),
                      r.domElement.appendChild(r.__selector),
                      r.updateDisplay(),
                      r
                    );
                  }
                  return (
                    f(t, e),
                    d(t, [
                      {
                        key: "updateDisplay",
                        value: function () {
                          var e = s(this.getValue());
                          if (!1 !== e) {
                            var t = !1;
                            i.each(
                              v.COMPONENTS,
                              function (n) {
                                if (
                                  !i.isUndefined(e[n]) &&
                                  !i.isUndefined(this.__color.__state[n]) &&
                                  e[n] !== this.__color.__state[n]
                                )
                                  return (t = !0), {};
                              },
                              this
                            ),
                              t && i.extend(this.__color.__state, e);
                          }
                          i.extend(this.__temp.__state, this.__color.__state),
                            (this.__temp.a = 1);
                          var n =
                              this.__color.v < 0.5 || this.__color.s > 0.5
                                ? 255
                                : 0,
                            r = 255 - n;
                          i.extend(this.__field_knob.style, {
                            marginLeft: 100 * this.__color.s - 7 + "px",
                            marginTop: 100 * (1 - this.__color.v) - 7 + "px",
                            backgroundColor: this.__temp.toHexString(),
                            border:
                              this.__field_knob_border +
                              "rgb(" +
                              n +
                              "," +
                              n +
                              "," +
                              n +
                              ")",
                          }),
                            (this.__hue_knob.style.marginTop =
                              100 * (1 - this.__color.h / 360) + "px"),
                            (this.__temp.s = 1),
                            (this.__temp.v = 1),
                            N(
                              this.__saturation_field,
                              "left",
                              "#fff",
                              this.__temp.toHexString()
                            ),
                            (this.__input.value = this.__color.toString()),
                            i.extend(this.__input.style, {
                              backgroundColor: this.__color.toHexString(),
                              color: "rgb(" + n + "," + n + "," + n + ")",
                              textShadow:
                                this.__input_textShadow +
                                "rgba(" +
                                r +
                                "," +
                                r +
                                "," +
                                r +
                                ",.7)",
                            });
                        },
                      },
                    ]),
                    t
                  );
                })(x),
                F = ["-moz-", "-o-", "-webkit-", "-ms-", ""];
              function N(e, t, n, r) {
                (e.style.background = ""),
                  i.each(F, function (i) {
                    e.style.cssText +=
                      "background: " +
                      i +
                      "linear-gradient(" +
                      t +
                      ", " +
                      n +
                      " 0%, " +
                      r +
                      " 100%); ";
                  });
              }
              var O =
                  '<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n\n    </div>\n\n  </div>\n\n</div>',
                B = function (e, t) {
                  var n = e[t];
                  return i.isArray(arguments[2]) || i.isObject(arguments[2])
                    ? new M(e, t, arguments[2])
                    : i.isNumber(n)
                    ? i.isNumber(arguments[2]) && i.isNumber(arguments[3])
                      ? i.isNumber(arguments[4])
                        ? new L(e, t, arguments[2], arguments[3], arguments[4])
                        : new L(e, t, arguments[2], arguments[3])
                      : i.isNumber(arguments[4])
                      ? new k(e, t, {
                          min: arguments[2],
                          max: arguments[3],
                          step: arguments[4],
                        })
                      : new k(e, t, { min: arguments[2], max: arguments[3] })
                    : i.isString(n)
                    ? new A(e, t)
                    : i.isFunction(n)
                    ? new R(e, t, "")
                    : i.isBoolean(n)
                    ? new E(e, t)
                    : null;
                },
                D =
                  window.requestAnimationFrame ||
                  window.webkitRequestAnimationFrame ||
                  window.mozRequestAnimationFrame ||
                  window.oRequestAnimationFrame ||
                  window.msRequestAnimationFrame ||
                  function (e) {
                    setTimeout(e, 1e3 / 60);
                  },
                V = (function () {
                  function e() {
                    h(this, e),
                      (this.backgroundElement = document.createElement("div")),
                      i.extend(this.backgroundElement.style, {
                        backgroundColor: "rgba(0,0,0,0.8)",
                        top: 0,
                        left: 0,
                        display: "none",
                        zIndex: "1000",
                        opacity: 0,
                        WebkitTransition: "opacity 0.2s linear",
                        transition: "opacity 0.2s linear",
                      }),
                      S.makeFullscreen(this.backgroundElement),
                      (this.backgroundElement.style.position = "fixed"),
                      (this.domElement = document.createElement("div")),
                      i.extend(this.domElement.style, {
                        position: "fixed",
                        display: "none",
                        zIndex: "1001",
                        opacity: 0,
                        WebkitTransition:
                          "-webkit-transform 0.2s ease-out, opacity 0.2s linear",
                        transition:
                          "transform 0.2s ease-out, opacity 0.2s linear",
                      }),
                      document.body.appendChild(this.backgroundElement),
                      document.body.appendChild(this.domElement);
                    var t = this;
                    S.bind(this.backgroundElement, "click", function () {
                      t.hide();
                    });
                  }
                  return (
                    d(e, [
                      {
                        key: "show",
                        value: function () {
                          var e = this;
                          (this.backgroundElement.style.display = "block"),
                            (this.domElement.style.display = "block"),
                            (this.domElement.style.opacity = 0),
                            (this.domElement.style.webkitTransform =
                              "scale(1.1)"),
                            this.layout(),
                            i.defer(function () {
                              (e.backgroundElement.style.opacity = 1),
                                (e.domElement.style.opacity = 1),
                                (e.domElement.style.webkitTransform =
                                  "scale(1)");
                            });
                        },
                      },
                      {
                        key: "hide",
                        value: function () {
                          var e = this,
                            t = function t() {
                              (e.domElement.style.display = "none"),
                                (e.backgroundElement.style.display = "none"),
                                S.unbind(
                                  e.domElement,
                                  "webkitTransitionEnd",
                                  t
                                ),
                                S.unbind(e.domElement, "transitionend", t),
                                S.unbind(e.domElement, "oTransitionEnd", t);
                            };
                          S.bind(this.domElement, "webkitTransitionEnd", t),
                            S.bind(this.domElement, "transitionend", t),
                            S.bind(this.domElement, "oTransitionEnd", t),
                            (this.backgroundElement.style.opacity = 0),
                            (this.domElement.style.opacity = 0),
                            (this.domElement.style.webkitTransform =
                              "scale(1.1)");
                        },
                      },
                      {
                        key: "layout",
                        value: function () {
                          (this.domElement.style.left =
                            window.innerWidth / 2 -
                            S.getWidth(this.domElement) / 2 +
                            "px"),
                            (this.domElement.style.top =
                              window.innerHeight / 2 -
                              S.getHeight(this.domElement) / 2 +
                              "px");
                        },
                      },
                    ]),
                    e
                  );
                })(),
                U = (function () {
                  try {
                    return (
                      "localStorage" in window && null !== window.localStorage
                    );
                  } catch (e) {
                    return !1;
                  }
                })(),
                z = void 0,
                j = !0,
                G = void 0,
                H = !1,
                W = [],
                Y = function e(t) {
                  var n = this,
                    r = t || {};
                  (this.domElement = document.createElement("div")),
                    (this.__ul = document.createElement("ul")),
                    this.domElement.appendChild(this.__ul),
                    S.addClass(this.domElement, "dg"),
                    (this.__folders = {}),
                    (this.__controllers = []),
                    (this.__rememberedObjects = []),
                    (this.__rememberedObjectIndecesToControllers = []),
                    (this.__listening = []),
                    (r = i.defaults(r, {
                      closeOnTop: !1,
                      autoPlace: !0,
                      width: e.DEFAULT_WIDTH,
                    })),
                    (r = i.defaults(r, {
                      resizable: r.autoPlace,
                      hideable: r.autoPlace,
                    })),
                    i.isUndefined(r.load)
                      ? (r.load = { preset: "Default" })
                      : r.preset && (r.load.preset = r.preset),
                    i.isUndefined(r.parent) && r.hideable && W.push(this),
                    (r.resizable = i.isUndefined(r.parent) && r.resizable),
                    r.autoPlace &&
                      i.isUndefined(r.scrollable) &&
                      (r.scrollable = !0);
                  var a = U && "true" === localStorage.getItem(K(0, "isLocal")),
                    o = void 0;
                  if (
                    (Object.defineProperties(this, {
                      parent: {
                        get: function () {
                          return r.parent;
                        },
                      },
                      scrollable: {
                        get: function () {
                          return r.scrollable;
                        },
                      },
                      autoPlace: {
                        get: function () {
                          return r.autoPlace;
                        },
                      },
                      closeOnTop: {
                        get: function () {
                          return r.closeOnTop;
                        },
                      },
                      preset: {
                        get: function () {
                          return n.parent ? n.getRoot().preset : r.load.preset;
                        },
                        set: function (e) {
                          n.parent
                            ? (n.getRoot().preset = e)
                            : (r.load.preset = e),
                            (function (e) {
                              for (var t = 0; t < e.__preset_select.length; t++)
                                e.__preset_select[t].value === e.preset &&
                                  (e.__preset_select.selectedIndex = t);
                            })(this),
                            n.revert();
                        },
                      },
                      width: {
                        get: function () {
                          return r.width;
                        },
                        set: function (e) {
                          (r.width = e), ne(n, e);
                        },
                      },
                      name: {
                        get: function () {
                          return r.name;
                        },
                        set: function (e) {
                          (r.name = e),
                            titleRowName && (titleRowName.innerHTML = r.name);
                        },
                      },
                      closed: {
                        get: function () {
                          return r.closed;
                        },
                        set: function (t) {
                          (r.closed = t),
                            r.closed
                              ? S.addClass(n.__ul, e.CLASS_CLOSED)
                              : S.removeClass(n.__ul, e.CLASS_CLOSED),
                            this.onResize(),
                            n.__closeButton &&
                              (n.__closeButton.innerHTML = t
                                ? e.TEXT_OPEN
                                : e.TEXT_CLOSED);
                        },
                      },
                      load: {
                        get: function () {
                          return r.load;
                        },
                      },
                      useLocalStorage: {
                        get: function () {
                          return a;
                        },
                        set: function (e) {
                          U &&
                            ((a = e),
                            e
                              ? S.bind(window, "unload", o)
                              : S.unbind(window, "unload", o),
                            localStorage.setItem(K(0, "isLocal"), e));
                        },
                      },
                    }),
                    i.isUndefined(r.parent))
                  ) {
                    if (
                      ((r.closed = !1),
                      S.addClass(this.domElement, e.CLASS_MAIN),
                      S.makeSelectable(this.domElement, !1),
                      U && a)
                    ) {
                      n.useLocalStorage = !0;
                      var s = localStorage.getItem(K(0, "gui"));
                      s && (r.load = JSON.parse(s));
                    }
                    (this.__closeButton = document.createElement("div")),
                      (this.__closeButton.innerHTML = e.TEXT_CLOSED),
                      S.addClass(this.__closeButton, e.CLASS_CLOSE_BUTTON),
                      r.closeOnTop
                        ? (S.addClass(this.__closeButton, e.CLASS_CLOSE_TOP),
                          this.domElement.insertBefore(
                            this.__closeButton,
                            this.domElement.childNodes[0]
                          ))
                        : (S.addClass(this.__closeButton, e.CLASS_CLOSE_BOTTOM),
                          this.domElement.appendChild(this.__closeButton)),
                      S.bind(this.__closeButton, "click", function () {
                        n.closed = !n.closed;
                      });
                  } else {
                    void 0 === r.closed && (r.closed = !0);
                    var l = document.createTextNode(r.name);
                    S.addClass(l, "controller-name");
                    var u = q(n, l);
                    S.addClass(this.__ul, e.CLASS_CLOSED),
                      S.addClass(u, "title"),
                      S.bind(u, "click", function (e) {
                        return e.preventDefault(), (n.closed = !n.closed), !1;
                      }),
                      r.closed || (this.closed = !1);
                  }
                  r.autoPlace &&
                    (i.isUndefined(r.parent) &&
                      (j &&
                        ((G = document.createElement("div")),
                        S.addClass(G, "dg"),
                        S.addClass(G, e.CLASS_AUTO_PLACE_CONTAINER),
                        document.body.appendChild(G),
                        (j = !1)),
                      G.appendChild(this.domElement),
                      S.addClass(this.domElement, e.CLASS_AUTO_PLACE)),
                    this.parent || ne(n, r.width)),
                    (o = function () {
                      U &&
                        "true" === localStorage.getItem(K(0, "isLocal")) &&
                        localStorage.setItem(
                          K(0, "gui"),
                          JSON.stringify(n.getSaveObject())
                        );
                    }),
                    (this.saveToLocalStorageIfPossible = o),
                    r.parent ||
                      (function () {
                        var e = n.getRoot();
                        (e.width += 1),
                          i.defer(function () {
                            e.width -= 1;
                          });
                      })();
                };
              function q(e, t, n) {
                var i = document.createElement("li");
                return (
                  t && i.appendChild(t),
                  n ? e.__ul.insertBefore(i, n) : e.__ul.appendChild(i),
                  e.onResize(),
                  i
                );
              }
              function X(e) {
                S.unbind(window, "resize", e.__resizeHandler),
                  e.saveToLocalStorageIfPossible &&
                    S.unbind(window, "unload", e.saveToLocalStorageIfPossible);
              }
              function Q(e, t) {
                var n = e.__preset_select[e.__preset_select.selectedIndex];
                n.innerHTML = t ? n.value + "*" : n.value;
              }
              function Z(e, t) {
                var n = e.getRoot(),
                  i = n.__rememberedObjects.indexOf(t.object);
                if (-1 !== i) {
                  var r = n.__rememberedObjectIndecesToControllers[i];
                  if (
                    (void 0 === r &&
                      ((r = {}),
                      (n.__rememberedObjectIndecesToControllers[i] = r)),
                    (r[t.property] = t),
                    n.load && n.load.remembered)
                  ) {
                    var a = n.load.remembered,
                      o = void 0;
                    if (a[e.preset]) o = a[e.preset];
                    else {
                      if (!a.Default) return;
                      o = a.Default;
                    }
                    if (o[i] && void 0 !== o[i][t.property]) {
                      var s = o[i][t.property];
                      (t.initialValue = s), t.setValue(s);
                    }
                  }
                }
              }
              function J(e, t, n, r) {
                if (void 0 === t[n])
                  throw new Error(
                    'Object "' + t + '" has no property "' + n + '"'
                  );
                var a = void 0;
                if (r.color) a = new I(t, n);
                else {
                  var o = [t, n].concat(r.factoryArgs);
                  a = B.apply(e, o);
                }
                r.before instanceof x && (r.before = r.before.__li),
                  Z(e, a),
                  S.addClass(a.domElement, "c");
                var s = document.createElement("span");
                S.addClass(s, "property-name"), (s.innerHTML = a.property);
                var l = document.createElement("div");
                l.appendChild(s), l.appendChild(a.domElement);
                var u = q(e, l, r.before);
                return (
                  S.addClass(u, Y.CLASS_CONTROLLER_ROW),
                  a instanceof I
                    ? S.addClass(u, "color")
                    : S.addClass(u, c(a.getValue())),
                  (function (e, t, n) {
                    if (
                      ((n.__li = t),
                      (n.__gui = e),
                      i.extend(n, {
                        options: function (t) {
                          if (arguments.length > 1) {
                            var r = n.__li.nextElementSibling;
                            return (
                              n.remove(),
                              J(e, n.object, n.property, {
                                before: r,
                                factoryArgs: [i.toArray(arguments)],
                              })
                            );
                          }
                          if (i.isArray(t) || i.isObject(t)) {
                            var a = n.__li.nextElementSibling;
                            return (
                              n.remove(),
                              J(e, n.object, n.property, {
                                before: a,
                                factoryArgs: [t],
                              })
                            );
                          }
                        },
                        name: function (e) {
                          return (
                            (n.__li.firstElementChild.firstElementChild.innerHTML =
                              e),
                            n
                          );
                        },
                        listen: function () {
                          return n.__gui.listen(n), n;
                        },
                        remove: function () {
                          return n.__gui.remove(n), n;
                        },
                      }),
                      n instanceof L)
                    ) {
                      var r = new k(n.object, n.property, {
                        min: n.__min,
                        max: n.__max,
                        step: n.__step,
                      });
                      i.each(
                        ["updateDisplay", "onChange", "onFinishChange", "step"],
                        function (e) {
                          var t = n[e],
                            i = r[e];
                          n[e] = r[e] = function () {
                            var e = Array.prototype.slice.call(arguments);
                            return i.apply(r, e), t.apply(n, e);
                          };
                        }
                      ),
                        S.addClass(t, "has-slider"),
                        n.domElement.insertBefore(
                          r.domElement,
                          n.domElement.firstElementChild
                        );
                    } else if (n instanceof k) {
                      var a = function (t) {
                        if (i.isNumber(n.__min) && i.isNumber(n.__max)) {
                          var r =
                              n.__li.firstElementChild.firstElementChild
                                .innerHTML,
                            a = n.__gui.__listening.indexOf(n) > -1;
                          n.remove();
                          var o = J(e, n.object, n.property, {
                            before: n.__li.nextElementSibling,
                            factoryArgs: [n.__min, n.__max, n.__step],
                          });
                          return o.name(r), a && o.listen(), o;
                        }
                        return t;
                      };
                      (n.min = i.compose(a, n.min)),
                        (n.max = i.compose(a, n.max));
                    } else
                      n instanceof E
                        ? (S.bind(t, "click", function () {
                            S.fakeEvent(n.__checkbox, "click");
                          }),
                          S.bind(n.__checkbox, "click", function (e) {
                            e.stopPropagation();
                          }))
                        : n instanceof R
                        ? (S.bind(t, "click", function () {
                            S.fakeEvent(n.__button, "click");
                          }),
                          S.bind(t, "mouseover", function () {
                            S.addClass(n.__button, "hover");
                          }),
                          S.bind(t, "mouseout", function () {
                            S.removeClass(n.__button, "hover");
                          }))
                        : n instanceof I &&
                          (S.addClass(t, "color"),
                          (n.updateDisplay = i.compose(function (e) {
                            return (
                              (t.style.borderLeftColor = n.__color.toString()),
                              e
                            );
                          }, n.updateDisplay)),
                          n.updateDisplay());
                    n.setValue = i.compose(function (t) {
                      return (
                        e.getRoot().__preset_select &&
                          n.isModified() &&
                          Q(e.getRoot(), !0),
                        t
                      );
                    }, n.setValue);
                  })(e, u, a),
                  e.__controllers.push(a),
                  a
                );
              }
              function K(e, t) {
                return document.location.href + "." + t;
              }
              function $(e, t, n) {
                var i = document.createElement("option");
                (i.innerHTML = t),
                  (i.value = t),
                  e.__preset_select.appendChild(i),
                  n &&
                    (e.__preset_select.selectedIndex =
                      e.__preset_select.length - 1);
              }
              function ee(e, t) {
                t.style.display = e.useLocalStorage ? "block" : "none";
              }
              function te(e) {
                var t = (e.__save_row = document.createElement("li"));
                S.addClass(e.domElement, "has-save"),
                  e.__ul.insertBefore(t, e.__ul.firstChild),
                  S.addClass(t, "save-row");
                var n = document.createElement("span");
                (n.innerHTML = "&nbsp;"), S.addClass(n, "button gears");
                var r = document.createElement("span");
                (r.innerHTML = "Save"),
                  S.addClass(r, "button"),
                  S.addClass(r, "save");
                var a = document.createElement("span");
                (a.innerHTML = "New"),
                  S.addClass(a, "button"),
                  S.addClass(a, "save-as");
                var o = document.createElement("span");
                (o.innerHTML = "Revert"),
                  S.addClass(o, "button"),
                  S.addClass(o, "revert");
                var s = (e.__preset_select = document.createElement("select"));
                if (
                  (e.load && e.load.remembered
                    ? i.each(e.load.remembered, function (t, n) {
                        $(e, n, n === e.preset);
                      })
                    : $(e, "Default", !1),
                  S.bind(s, "change", function () {
                    for (var t = 0; t < e.__preset_select.length; t++)
                      e.__preset_select[t].innerHTML =
                        e.__preset_select[t].value;
                    e.preset = this.value;
                  }),
                  t.appendChild(s),
                  t.appendChild(n),
                  t.appendChild(r),
                  t.appendChild(a),
                  t.appendChild(o),
                  U)
                ) {
                  var l = document.getElementById("dg-local-explain"),
                    u = document.getElementById("dg-local-storage");
                  (document.getElementById("dg-save-locally").style.display =
                    "block"),
                    "true" === localStorage.getItem(K(0, "isLocal")) &&
                      u.setAttribute("checked", "checked"),
                    ee(e, l),
                    S.bind(u, "change", function () {
                      (e.useLocalStorage = !e.useLocalStorage), ee(e, l);
                    });
                }
                var c = document.getElementById("dg-new-constructor");
                S.bind(c, "keydown", function (e) {
                  !e.metaKey ||
                    (67 !== e.which && 67 !== e.keyCode) ||
                    z.hide();
                }),
                  S.bind(n, "click", function () {
                    (c.innerHTML = JSON.stringify(
                      e.getSaveObject(),
                      void 0,
                      2
                    )),
                      z.show(),
                      c.focus(),
                      c.select();
                  }),
                  S.bind(r, "click", function () {
                    e.save();
                  }),
                  S.bind(a, "click", function () {
                    var t = prompt("Enter a new preset name.");
                    t && e.saveAs(t);
                  }),
                  S.bind(o, "click", function () {
                    e.revert();
                  });
              }
              function ne(e, t) {
                (e.domElement.style.width = t + "px"),
                  e.__save_row &&
                    e.autoPlace &&
                    (e.__save_row.style.width = t + "px"),
                  e.__closeButton && (e.__closeButton.style.width = t + "px");
              }
              function ie(e, t) {
                var n = {};
                return (
                  i.each(e.__rememberedObjects, function (r, a) {
                    var o = {},
                      s = e.__rememberedObjectIndecesToControllers[a];
                    i.each(s, function (e, n) {
                      o[n] = t ? e.initialValue : e.getValue();
                    }),
                      (n[a] = o);
                  }),
                  n
                );
              }
              return (
                (Y.toggleHide = function () {
                  (H = !H),
                    i.each(W, function (e) {
                      e.domElement.style.display = H ? "none" : "";
                    });
                }),
                (Y.CLASS_AUTO_PLACE = "a"),
                (Y.CLASS_AUTO_PLACE_CONTAINER = "ac"),
                (Y.CLASS_MAIN = "main"),
                (Y.CLASS_CONTROLLER_ROW = "cr"),
                (Y.CLASS_TOO_TALL = "taller-than-window"),
                (Y.CLASS_CLOSED = "closed"),
                (Y.CLASS_CLOSE_BUTTON = "close-button"),
                (Y.CLASS_CLOSE_TOP = "close-top"),
                (Y.CLASS_CLOSE_BOTTOM = "close-bottom"),
                (Y.CLASS_DRAG = "drag"),
                (Y.DEFAULT_WIDTH = 240),
                (Y.TEXT_CLOSED = "Close Controls"),
                (Y.TEXT_OPEN = "Open Controls"),
                (Y._keydownHandler = function (e) {
                  "text" === document.activeElement.type ||
                    (72 !== e.which && 72 !== e.keyCode) ||
                    Y.toggleHide();
                }),
                S.bind(window, "keydown", Y._keydownHandler, !1),
                i.extend(Y.prototype, {
                  add: function (e, t) {
                    return J(this, e, t, {
                      factoryArgs: Array.prototype.slice.call(arguments, 2),
                    });
                  },
                  addColor: function (e, t) {
                    return J(this, e, t, { color: !0 });
                  },
                  remove: function (e) {
                    this.__ul.removeChild(e.__li),
                      this.__controllers.splice(
                        this.__controllers.indexOf(e),
                        1
                      );
                    var t = this;
                    i.defer(function () {
                      t.onResize();
                    });
                  },
                  destroy: function () {
                    if (this.parent)
                      throw new Error(
                        "Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead."
                      );
                    this.autoPlace && G.removeChild(this.domElement);
                    var e = this;
                    i.each(this.__folders, function (t) {
                      e.removeFolder(t);
                    }),
                      S.unbind(window, "keydown", Y._keydownHandler, !1),
                      X(this);
                  },
                  addFolder: function (e) {
                    if (void 0 !== this.__folders[e])
                      throw new Error(
                        'You already have a folder in this GUI by the name "' +
                          e +
                          '"'
                      );
                    var t = { name: e, parent: this };
                    (t.autoPlace = this.autoPlace),
                      this.load &&
                        this.load.folders &&
                        this.load.folders[e] &&
                        ((t.closed = this.load.folders[e].closed),
                        (t.load = this.load.folders[e]));
                    var n = new Y(t);
                    this.__folders[e] = n;
                    var i = q(this, n.domElement);
                    return S.addClass(i, "folder"), n;
                  },
                  removeFolder: function (e) {
                    this.__ul.removeChild(e.domElement.parentElement),
                      delete this.__folders[e.name],
                      this.load &&
                        this.load.folders &&
                        this.load.folders[e.name] &&
                        delete this.load.folders[e.name],
                      X(e);
                    var t = this;
                    i.each(e.__folders, function (t) {
                      e.removeFolder(t);
                    }),
                      i.defer(function () {
                        t.onResize();
                      });
                  },
                  open: function () {
                    this.closed = !1;
                  },
                  close: function () {
                    this.closed = !0;
                  },
                  onResize: function () {
                    var e = this.getRoot();
                    if (e.scrollable) {
                      var t = S.getOffset(e.__ul).top,
                        n = 0;
                      i.each(e.__ul.childNodes, function (t) {
                        (e.autoPlace && t === e.__save_row) ||
                          (n += S.getHeight(t));
                      }),
                        window.innerHeight - t - 20 < n
                          ? (S.addClass(e.domElement, Y.CLASS_TOO_TALL),
                            (e.__ul.style.height =
                              window.innerHeight - t - 20 + "px"))
                          : (S.removeClass(e.domElement, Y.CLASS_TOO_TALL),
                            (e.__ul.style.height = "auto"));
                    }
                    e.__resize_handle &&
                      i.defer(function () {
                        e.__resize_handle.style.height =
                          e.__ul.offsetHeight + "px";
                      }),
                      e.__closeButton &&
                        (e.__closeButton.style.width = e.width + "px");
                  },
                  onResizeDebounced: i.debounce(function () {
                    this.onResize();
                  }, 50),
                  remember: function () {
                    if (
                      (i.isUndefined(z) &&
                        ((z = new V()).domElement.innerHTML = O),
                      this.parent)
                    )
                      throw new Error(
                        "You can only call remember on a top level GUI."
                      );
                    var e = this;
                    i.each(Array.prototype.slice.call(arguments), function (t) {
                      0 === e.__rememberedObjects.length && te(e),
                        -1 === e.__rememberedObjects.indexOf(t) &&
                          e.__rememberedObjects.push(t);
                    }),
                      this.autoPlace && ne(this, this.width);
                  },
                  getRoot: function () {
                    for (var e = this; e.parent; ) e = e.parent;
                    return e;
                  },
                  getSaveObject: function () {
                    var e = this.load;
                    return (
                      (e.closed = this.closed),
                      this.__rememberedObjects.length > 0 &&
                        ((e.preset = this.preset),
                        e.remembered || (e.remembered = {}),
                        (e.remembered[this.preset] = ie(this))),
                      (e.folders = {}),
                      i.each(this.__folders, function (t, n) {
                        e.folders[n] = t.getSaveObject();
                      }),
                      e
                    );
                  },
                  save: function () {
                    this.load.remembered || (this.load.remembered = {}),
                      (this.load.remembered[this.preset] = ie(this)),
                      Q(this, !1),
                      this.saveToLocalStorageIfPossible();
                  },
                  saveAs: function (e) {
                    this.load.remembered ||
                      ((this.load.remembered = {}),
                      (this.load.remembered.Default = ie(this, !0))),
                      (this.load.remembered[e] = ie(this)),
                      (this.preset = e),
                      $(this, e, !0),
                      this.saveToLocalStorageIfPossible();
                  },
                  revert: function (e) {
                    i.each(
                      this.__controllers,
                      function (t) {
                        this.getRoot().load.remembered
                          ? Z(e || this.getRoot(), t)
                          : t.setValue(t.initialValue),
                          t.__onFinishChange &&
                            t.__onFinishChange.call(t, t.getValue());
                      },
                      this
                    ),
                      i.each(this.__folders, function (e) {
                        e.revert(e);
                      }),
                      e || Q(this.getRoot(), !1);
                  },
                  listen: function (e) {
                    var t = 0 === this.__listening.length;
                    this.__listening.push(e),
                      t &&
                        (function e(t) {
                          0 !== t.length &&
                            D.call(window, function () {
                              e(t);
                            }),
                            i.each(t, function (e) {
                              e.updateDisplay();
                            });
                        })(this.__listening);
                  },
                  updateDisplay: function () {
                    i.each(this.__controllers, function (e) {
                      e.updateDisplay();
                    }),
                      i.each(this.__folders, function (e) {
                        e.updateDisplay();
                      });
                  },
                }),
                {
                  color: { Color: v, math: u, interpret: s },
                  controllers: {
                    Controller: x,
                    BooleanController: E,
                    OptionController: M,
                    StringController: A,
                    NumberController: C,
                    NumberControllerBox: k,
                    NumberControllerSlider: L,
                    FunctionController: R,
                    ColorController: I,
                  },
                  dom: { dom: S },
                  gui: { GUI: Y },
                  GUI: Y,
                }
              );
            })();
          },
          "./src/lib/utils/three-to-cannon.js": function (e, t, n) {
            "use strict";
            n.r(t),
              n.d(t, "threeToCannon", function () {
                return l;
              });
            var i = n("./node_modules/three/build/three.module.js"),
              r = n("./src/lib/cannon/cannon.js"),
              a = n("./src/lib/utils/THREE.quickhull.js"),
              o = Math.PI / 2,
              s = {
                BOX: "Box",
                CYLINDER: "Cylinder",
                SPHERE: "Sphere",
                HULL: "ConvexPolyhedron",
                MESH: "Trimesh",
              },
              l = function (e, t) {
                var n;
                if ((t = t || {}).type === s.BOX) return c(e);
                if (t.type === s.CYLINDER)
                  return (function (e, t) {
                    var n,
                      a,
                      s,
                      l = new i.Box3(),
                      u = ["x", "y", "z"],
                      c = t.cylinderAxis || "y",
                      h = u.splice(u.indexOf(c), 1) && u;
                    return (
                      l.setFromObject(e),
                      isFinite(l.min.lengthSq())
                        ? ((a = l.max[c] - l.min[c]),
                          (s =
                            0.5 *
                            Math.max(
                              l.max[h[0]] - l.min[h[0]],
                              l.max[h[1]] - l.min[h[1]]
                            )),
                          ((n = new r.Cylinder(s, s, a, 12))._type =
                            r.Shape.types.CYLINDER),
                          (n.radiusTop = s),
                          (n.radiusBottom = s),
                          (n.height = a),
                          (n.numSegments = 12),
                          (n.orientation = new r.Quaternion()),
                          n.orientation
                            .setFromEuler(
                              "y" === c ? o : 0,
                              "z" === c ? o : 0,
                              0,
                              "XYZ"
                            )
                            .normalize(),
                          n)
                        : null
                    );
                  })(e, t);
                if (t.type === s.SPHERE)
                  return (function (e, t) {
                    if (t.sphereRadius) return new r.Sphere(t.sphereRadius);
                    var n = h(e);
                    return n
                      ? (n.computeBoundingSphere(),
                        new r.Sphere(n.boundingSphere.radius))
                      : null;
                  })(e, t);
                if (t.type === s.HULL)
                  return (function (e) {
                    var t,
                      n,
                      i,
                      o,
                      s = h(e);
                    if (!s || !s.vertices.length) return null;
                    for (t = 0; t < s.vertices.length; t++)
                      (s.vertices[t].x += 1e-4 * (Math.random() - 0.5)),
                        (s.vertices[t].y += 1e-4 * (Math.random() - 0.5)),
                        (s.vertices[t].z += 1e-4 * (Math.random() - 0.5));
                    for (
                      o = Object(a.quickhull)(s),
                        n = new Array(o.vertices.length),
                        t = 0;
                      t < o.vertices.length;
                      t++
                    )
                      n[t] = new r.Vec3(
                        o.vertices[t].x,
                        o.vertices[t].y,
                        o.vertices[t].z
                      );
                    for (
                      i = new Array(o.faces.length), t = 0;
                      t < o.faces.length;
                      t++
                    )
                      i[t] = [o.faces[t].a, o.faces[t].b, o.faces[t].c];
                    return new r.ConvexPolyhedron(n, i);
                  })(e);
                if (t.type === s.MESH)
                  return (n = h(e))
                    ? (function (e) {
                        var t,
                          n = d(e);
                        return n.length
                          ? ((t = Object.keys(n).map(Number)),
                            new r.Trimesh(n, t))
                          : null;
                      })(n)
                    : null;
                if (t.type)
                  throw new Error(
                    '[CANNON.threeToCannon] Invalid type "%s".',
                    t.type
                  );
                if (!(n = h(e))) return null;
                switch (n.metadata ? n.metadata.type : n.type) {
                  case "BoxGeometry":
                  case "BoxBufferGeometry":
                    return u(n);
                  case "CylinderGeometry":
                  case "CylinderBufferGeometry":
                    return (function (e) {
                      var t,
                        n = e.metadata ? e.metadata.parameters : e.parameters;
                      return (
                        ((t = new r.Cylinder(
                          n.radiusTop,
                          n.radiusBottom,
                          n.height,
                          n.radialSegments
                        ))._type = r.Shape.types.CYLINDER),
                        (t.radiusTop = n.radiusTop),
                        (t.radiusBottom = n.radiusBottom),
                        (t.height = n.height),
                        (t.numSegments = n.radialSegments),
                        (t.orientation = new r.Quaternion()),
                        t.orientation
                          .setFromEuler(i.Math.degToRad(90), 0, 0, "XYZ")
                          .normalize(),
                        t
                      );
                    })(n);
                  case "PlaneGeometry":
                  case "PlaneBufferGeometry":
                    return (function (e) {
                      e.computeBoundingBox();
                      var t = e.boundingBox;
                      return new r.Box(
                        new r.Vec3(
                          (t.max.x - t.min.x) / 2 || 0.1,
                          (t.max.y - t.min.y) / 2 || 0.1,
                          (t.max.z - t.min.z) / 2 || 0.1
                        )
                      );
                    })(n);
                  case "SphereGeometry":
                  case "SphereBufferGeometry":
                    return (function (e) {
                      var t = e.metadata ? e.metadata.parameters : e.parameters;
                      return new r.Sphere(t.radius);
                    })(n);
                  case "TubeGeometry":
                  case "Geometry":
                  case "BufferGeometry":
                    return c(e);
                  default:
                    return (
                      console.warn(
                        'Unrecognized geometry: "%s". Using bounding box as shape.',
                        n.type
                      ),
                      u(n)
                    );
                }
              };
            function u(e) {
              if (!d(e).length) return null;
              e.computeBoundingBox();
              var t = e.boundingBox;
              return new r.Box(
                new r.Vec3(
                  (t.max.x - t.min.x) / 2,
                  (t.max.y - t.min.y) / 2,
                  (t.max.z - t.min.z) / 2
                )
              );
            }
            function c(e) {
              var t,
                n,
                a = new i.Box3(),
                o = e.clone();
              return (
                o.quaternion.set(0, 0, 0, 1),
                o.updateMatrixWorld(),
                a.setFromObject(o),
                isFinite(a.min.lengthSq())
                  ? ((t = new r.Box(
                      new r.Vec3(
                        (a.max.x - a.min.x) / 2,
                        (a.max.y - a.min.y) / 2,
                        (a.max.z - a.min.z) / 2
                      )
                    )),
                    (n = a
                      .translate(o.position.negate())
                      .getCenter(new i.Vector3())).lengthSq() && (t.offset = n),
                    t)
                  : null
              );
            }
            function h(e) {
              var t,
                n,
                r = (function (e) {
                  var t = [];
                  return (
                    e.traverse(function (e) {
                      "Mesh" === e.type && t.push(e);
                    }),
                    t
                  );
                })(e),
                a = new i.Geometry(),
                o = new i.Geometry();
              if (0 === r.length) return null;
              if (1 === r.length) {
                var s = new i.Vector3(),
                  l = new i.Quaternion(),
                  u = new i.Vector3();
                return (
                  r[0].geometry.isBufferGeometry
                    ? r[0].geometry.attributes.position &&
                      r[0].geometry.attributes.position.itemSize > 2 &&
                      a.fromBufferGeometry(r[0].geometry)
                    : (a = r[0].geometry.clone()),
                  (a.metadata = r[0].geometry.metadata),
                  r[0].updateMatrixWorld(),
                  r[0].matrixWorld.decompose(s, l, u),
                  a.scale(u.x, u.y, u.z)
                );
              }
              for (; (n = r.pop()); )
                if ((n.updateMatrixWorld(), n.geometry.isBufferGeometry)) {
                  if (
                    n.geometry.attributes.position &&
                    n.geometry.attributes.position.itemSize > 2
                  ) {
                    var c = new i.Geometry();
                    c.fromBufferGeometry(n.geometry),
                      o.merge(c, n.matrixWorld),
                      c.dispose();
                  }
                } else o.merge(n.geometry, n.matrixWorld);
              return (t = new i.Matrix4()).scale(e.scale), o.applyMatrix(t), o;
            }
            function d(e) {
              return (
                e.attributes || (e = new i.BufferGeometry().fromGeometry(e)),
                (e.attributes.position || {}).array || []
              );
            }
            l.Type = s;
          },
          "./src/ts/characters/Character.ts": function (e, t, n) {
            "use strict";
            Object.defineProperty(t, "__esModule", { value: !0 });
            var i = n("./node_modules/three/build/three.module.js"),
              r = n("./src/lib/cannon/cannon.js"),
              a = n("./node_modules/lodash/lodash.js"),
              o = n("./src/ts/core/Utilities.ts"),
              s = n("./src/ts/core/KeyBinding.ts"),
              l = n("./src/ts/objects/SBObject.ts"),
              u = n("./src/ts/simulation/VectorSpringSimulator.ts"),
              v = n("./src/ts/simulation/RelativeSpringSimulator.ts"),
              g = n("./src/ts/characters/character_states/Idle.ts"),
              y = n("./src/ts/objects/object_physics/CapsulePhysics.ts"),
              x = n(
                "./src/ts/characters/character_states/vehicles/EnteringVehicle.ts"
              ),
              b = n(
                "./src/ts/characters/character_states/vehicles/ExitingVehicle.ts"
              ),
              _ = n(
                "./src/ts/characters/character_states/vehicles/OpenVehicleDoor.ts"
              ),
              w = n("./src/ts/characters/character_states/Sitting.ts"),
              S = n("./src/ts/enums/CollisionGroups.ts"),
              E = n("./node_modules/three/build/three.module.js"),
              M = n("./src/ts/characters/customization/hats.json"),
              A = n("./src/ts/utils/threeUtils.ts"),
              T = (function (e) {
                function t(e, n) {
                  var a;
                  f(this, t),
                    ((a = c(this, h(t).call(this))).isCharacter = !0),
                    (a.height = 0),
                    (a.materials = []),
                    (a.acceleration = new i.Vector3()),
                    (a.velocity = new i.Vector3()),
                    (a.arcadeVelocityInfluence = new i.Vector3()),
                    (a.velocityTarget = new i.Vector3()),
                    (a.arcadeVelocityIsAdditive = !1),
                    (a.defaultVelocitySimulatorDamping = 0.8),
                    (a.defaultVelocitySimulatorMass = 50),
                    (a.moveSpeed = 20),
                    (a.angularVelocity = 0),
                    (a.orientation = new i.Vector3(0, 0, 1)),
                    (a.orientationTarget = new i.Vector3(0, 0, 1)),
                    (a.defaultRotationSimulatorDamping = 0.5),
                    (a.defaultRotationSimulatorMass = 6),
                    (a.rayResult = new r.RaycastResult()),
                    (a.rayHasHit = !1),
                    (a.rayCastLength = 0.6),
                    (a.raySafeOffset = 0.03),
                    (a.wantsToJump = !1),
                    (a.initJumpSpeed = 10),
                    (a.groundImpactData = new o.GroundImpactData()),
                    (a.jumpInitialLift = 20),
                    (a.jumpNuanceFallAcceleration = 0.9),
                    (a.jumpNuanceRiseDeceleration = 0.15),
                    (a.jumpNuanceFallVelocityMax = -10),
                    (a.isRunningTowardsVehicle = !1),
                    (a.physicsEnabled = !0),
                    (a.serverPosition = new i.Vector3(0, 0, 0)),
                    (a.isFlaggedForReset = !1),
                    (a.namePlatePositionY = 0),
                    (a.videoSessionId = ""),
                    (a.bodyColor = { r: 1, g: 1, b: 1 }),
                    (a.faceString = ""),
                    (a.joystickEnabled = !1),
                    (a.joystickAngle = 0),
                    (a.isServerDriven = !1),
                    (a.sendCharAnimationStateCommand = null),
                    (a.previousAction = null),
                    (a.isServerDriven = n || !1),
                    a.readCharacterData(e),
                    a.setAnimations(e.animations),
                    (a.help1 = new i.AxesHelper(1)),
                    (a.help2 = new i.AxesHelper(2)),
                    (a.help3 = new i.AxesHelper(3)),
                    (a.tiltContainer = new i.Group()),
                    a.add(a.tiltContainer),
                    (a.modelContainer = new i.Group()),
                    (a.modelContainer.position.y = -0.57),
                    a.tiltContainer.add(a.modelContainer),
                    a.modelContainer.add(e.scene),
                    (a.model = e.scene),
                    (a.mixer = new i.AnimationMixer(e.scene)),
                    a.setupNameplate(),
                    (a.velocitySimulator = new u.VectorSpringSimulator(
                      60,
                      a.defaultVelocitySimulatorMass,
                      a.defaultVelocitySimulatorDamping
                    )),
                    (a.rotationSimulator = new v.RelativeSpringSimulator(
                      60,
                      a.defaultRotationSimulatorMass,
                      a.defaultRotationSimulatorDamping
                    )),
                    (a.viewVector = new i.Vector3()),
                    (a.actions = {
                      up: new s.KeyBinding("KeyW"),
                      down: new s.KeyBinding("KeyS"),
                      left: new s.KeyBinding("KeyA"),
                      right: new s.KeyBinding("KeyD"),
                      run: new s.KeyBinding("ShiftLeft"),
                      jump: new s.KeyBinding("Space"),
                      use: new s.KeyBinding("KeyE"),
                      enter: new s.KeyBinding("KeyZ"),
                      primary: new s.KeyBinding("Mouse0"),
                      secondary: new s.KeyBinding("Mouse1"),
                      hideChar: new s.KeyBinding("KeyV"),
                      chat: new s.KeyBinding("Enter"),
                      dance: new s.KeyBinding("KeyF"),
                    });
                  var p = new y.CapsulePhysics({
                    mass: 1,
                    position: new r.Vec3(),
                    height: 0.5,
                    radius: 0.25,
                    segments: 8,
                    friction: 0,
                  });
                  p.physical.shapes.forEach(function (e) {
                    e.collisionFilterMask = ~S.CollisionGroups.TrimeshColliders;
                  }),
                    (p.physical.allowSleep = !1),
                    (a.characterCapsule = new l.SBObject()),
                    a.characterCapsule.setPhysics(p),
                    (a.characterCapsule.physics.physical.collisionFilterGroup = 2),
                    (a.characterCapsule.physics.physical.fixedRotation = !0),
                    a.characterCapsule.physics.physical.updateMassProperties();
                  var m = new i.BoxGeometry(0.1, 0.1, 0.1),
                    x = new i.MeshLambertMaterial({ color: 16711680 });
                  return (
                    (a.raycastBox = new i.Mesh(m, x)),
                    (a.raycastBox.visible = !1),
                    (a.characterCapsule.physics.physical.preStep = function (
                      e
                    ) {
                      a.physicsPreStep(e, d(a));
                    }),
                    (a.characterCapsule.physics.physical.postStep = function (
                      e
                    ) {
                      a.physicsPostStep(e, d(a));
                    }),
                    a.isServerDriven
                      ? (a.physicsEnabled = !1)
                      : a.setState(new g.Idle(d(a))),
                    a
                  );
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "removeHat",
                      value: function () {
                        this.hat && A.disposeObject(this.hat),
                          (this.nameObject.position.y =
                            this.namePlatePositionY);
                      },
                    },
                    {
                      key: "changeHat",
                      value: function (e) {
                        var t = this;
                        this.removeHat();
                        var n = M.find(function (t) {
                          return t.id === e;
                        });
                        n &&
                          this.world &&
                          this.world.loadingManager.loadGLTF(
                            n.url,
                            function (e) {
                              t.model.traverse(function (i) {
                                "hat_placeholder" === i.name &&
                                  ((t.hat = e.scene),
                                  i.add(e.scene),
                                  e.scene.scale.multiplyScalar(n.scaleFactor),
                                  (e.scene.position.x += n.positionOffset.x),
                                  (e.scene.position.y += n.positionOffset.y),
                                  (e.scene.position.z += n.positionOffset.z),
                                  (t.nameObject.position.y =
                                    t.nameObject.position.y + 0.5));
                              });
                            }
                          );
                      },
                    },
                    {
                      key: "setupNameplate",
                      value: function () {
                        var e = document.createElement("canvas");
                        (e.width = 256),
                          (e.height = 256),
                          (this.namePlateContext = e.getContext("2d"));
                        var t = new E.CanvasTexture(e);
                        this.nameTexture = t;
                        var n = new i.SpriteMaterial({
                            map: t,
                            transparent: !0,
                            depthWrite: !1,
                          }),
                          r = new i.Sprite(n);
                        (r.renderOrder = 1),
                          (this.nameObject = r),
                          this.modelContainer.add(r),
                          (r.position.y += 1.2),
                          (r.position.z += 0.2),
                          (this.namePlatePositionY = r.position.y);
                      },
                    },
                    {
                      key: "changeName",
                      value: function (e) {
                        if (this.namePlateContext && this.nameTexture) {
                          var t = this.namePlateContext;
                          t.clearRect(0, 0, 256, 256),
                            (t.fillStyle = "white"),
                            (t.font = "20px Roboto"),
                            (t.textAlign = "center"),
                            (t.textBaseline = "middle"),
                            t.fillText(e, 128, 150),
                            (this.nameTexture.needsUpdate = !0);
                        }
                      },
                    },
                    {
                      key: "changeCharacterColor",
                      value: function (e, t, n) {
                        (this.bodyColor = { r: e, g: t, b: n }),
                          this.applyCharacterColor();
                      },
                    },
                    {
                      key: "applyCharacterColor",
                      value: function () {
                        this.baseMaterial &&
                          this.baseMaterial.color.setRGB(
                            this.bodyColor.r,
                            this.bodyColor.g,
                            this.bodyColor.b
                          );
                      },
                    },
                    {
                      key: "changeCharacterFace",
                      value: function (e, t) {
                        var n = this;
                        (this.lastFaceUsed = e),
                          (this.lastFaceColorUsed = t),
                          this.model.traverse(function (i) {
                            if (i.material && "Face" === i.material.name) {
                              var r = n.faceCanvas;
                              r ||
                                ((n.faceCanvas =
                                  document.createElement("canvas")),
                                (r = n.faceCanvas)),
                                (r.width = 256),
                                (r.height = 256);
                              var a = r.getContext("2d");
                              if (!a) return;
                              (a.fillStyle = "rgb("
                                .concat(Math.floor(255 * t.r), ", ")
                                .concat(Math.floor(255 * t.g), ", ")
                                .concat(Math.floor(255 * t.b), ")")),
                                a.fillRect(0, 0, 256, 256),
                                (a.font = "180px Georgia"),
                                (a.textAlign = "center"),
                                (a.textBaseline = "middle"),
                                a.fillText(e, 128, 150);
                              var o = new E.CanvasTexture(r);
                              i.material.map = o;
                            }
                          });
                      },
                    },
                    {
                      key: "changeCharacterSkin",
                      value: function (e) {
                        var t = this;
                        this.world.loadingManager.loadGLTF(e, function (e) {
                          t.loadGLTF(e);
                        });
                      },
                    },
                    {
                      key: "loadGLTF",
                      value: function (e) {
                        A.disposeObject(this.model),
                          (this.materials = []),
                          (this.model = null),
                          this.readCharacterData(e),
                          this.setAnimations(e.animations),
                          (this.model = e.scene),
                          this.modelContainer.add(this.model),
                          (this.mixer = new i.AnimationMixer(e.scene)),
                          this.setState(new g.Idle(this)),
                          this.changeCharacterFace(
                            this.lastFaceUsed,
                            this.lastFaceColorUsed
                          );
                      },
                    },
                    {
                      key: "setAudioChatElement",
                      value: function (e) {
                        this.audioChatElement = e;
                      },
                    },
                    {
                      key: "setVideoTexture",
                      value: function (e) {
                        var t = this,
                          n = function () {
                            var n = new E.VideoTexture(e),
                              r = e.videoWidth / e.videoHeight;
                            t.videoSprite && t.nameObject.remove(t.videoSprite);
                            var a = new i.SpriteMaterial({
                                map: n,
                                transparent: !0,
                              }),
                              o = new i.Sprite(a);
                            (t.videoSprite = o),
                              t.nameObject.add(t.videoSprite),
                              (t.videoSprite.visible = !0),
                              (t.videoSprite.material.depthTest = !1),
                              (t.videoSprite.renderOrder = 1),
                              (t.videoSprite.position.x = 0),
                              (t.videoSprite.position.y = 0.25),
                              (t.videoSprite.position.z = 0),
                              t.videoSprite.scale.multiplyScalar(0.5),
                              (t.videoSprite.scale.x *= r);
                          };
                        e.videoHeight > 0
                          ? n()
                          : (e.onplay = function () {
                              n();
                            });
                      },
                    },
                    {
                      key: "setVideoTextureFromMap",
                      value: function () {
                        if (this.videoSessionId && this.world) {
                          var e = this.world.videoMap.get(this.videoSessionId);
                          e && this.setVideoTexture(e);
                        }
                      },
                    },
                    {
                      key: "setAnimations",
                      value: function (e) {
                        this.animations = e;
                      },
                    },
                    {
                      key: "setArcadeVelocityInfluence",
                      value: function (e) {
                        var t =
                            arguments.length > 1 && void 0 !== arguments[1]
                              ? arguments[1]
                              : e,
                          n =
                            arguments.length > 2 && void 0 !== arguments[2]
                              ? arguments[2]
                              : e;
                        this.arcadeVelocityInfluence.set(e, t, n);
                      },
                    },
                    {
                      key: "setViewVector",
                      value: function (e) {
                        this.viewVector.copy(e).normalize();
                      },
                    },
                    {
                      key: "setState",
                      value: function (e) {
                        (this.charState = e), this.charState.onInputChange();
                      },
                    },
                    {
                      key: "setPosition",
                      value: function (e, t, n) {
                        this.physicsEnabled
                          ? ((this.characterCapsule.physics.physical.position =
                              new r.Vec3(e, t, n)),
                            (this.characterCapsule.physics.physical.interpolatedPosition =
                              new r.Vec3(e, t, n)))
                          : ((this.position.x = e),
                            (this.position.y = t),
                            (this.position.z = n));
                      },
                    },
                    {
                      key: "resetVelocity",
                      value: function () {
                        (this.velocity.x = 0),
                          (this.velocity.y = 0),
                          (this.velocity.z = 0),
                          (this.characterCapsule.physics.physical.velocity.x = 0),
                          (this.characterCapsule.physics.physical.velocity.y = 0),
                          (this.characterCapsule.physics.physical.velocity.z = 0),
                          this.velocitySimulator.init();
                      },
                    },
                    {
                      key: "setArcadeVelocityTarget",
                      value: function (e) {
                        var t =
                            arguments.length > 1 && void 0 !== arguments[1]
                              ? arguments[1]
                              : 0,
                          n =
                            arguments.length > 2 && void 0 !== arguments[2]
                              ? arguments[2]
                              : 0;
                        (this.velocityTarget.z = e),
                          (this.velocityTarget.x = t),
                          (this.velocityTarget.y = n);
                      },
                    },
                    {
                      key: "setOrientation",
                      value: function (e) {
                        var t =
                            arguments.length > 1 &&
                            void 0 !== arguments[1] &&
                            arguments[1],
                          n = new i.Vector3().copy(e).setY(0).normalize();
                        this.orientationTarget.copy(n),
                          t && this.orientation.copy(n);
                      },
                    },
                    {
                      key: "resetOrientation",
                      value: function () {
                        var e = this.matrix.elements,
                          t = new i.Vector3(e[8], e[9], e[10]);
                        this.setOrientation(t, !0);
                      },
                    },
                    {
                      key: "setBehaviour",
                      value: function (e) {
                        (e.character = this), (this.behaviour = e);
                      },
                    },
                    {
                      key: "setPhysicsEnabled",
                      value: function (e) {
                        (this.physicsEnabled = e),
                          !0 === e
                            ? this.world.physicsWorld.addBody(
                                this.characterCapsule.physics.physical
                              )
                            : this.world.physicsWorld.remove(
                                this.characterCapsule.physics.physical
                              );
                      },
                    },
                    {
                      key: "readCharacterData",
                      value: function (e) {
                        var t = this;
                        e.scene.traverse(function (e) {
                          e.isMesh &&
                            (void 0 !== e.material &&
                              t.materials.push(e.material),
                            "Boxman" === e.material.name &&
                              ((t.baseMaterial = e.material),
                              t.applyCharacterColor()));
                        });
                      },
                    },
                    {
                      key: "handleKeyboardEvent",
                      value: function (e, t, n) {
                        if (void 0 !== this.controlledObject)
                          this.controlledObject.handleKeyboardEvent(e, t, n);
                        else if ("KeyC" === t && !0 === n && !0 === e.shiftKey);
                        else
                          for (var i in this.actions)
                            if (this.actions.hasOwnProperty(i)) {
                              var r = this.actions[i];
                              a.includes(r.eventCodes, t) &&
                                this.triggerAction(i, n);
                            }
                      },
                    },
                    {
                      key: "handleMouseButton",
                      value: function (e, t, n) {
                        if (void 0 !== this.controlledObject)
                          this.controlledObject.handleMouseButton(e, t, n);
                        else
                          for (var i in this.actions)
                            if (this.actions.hasOwnProperty(i)) {
                              var r = this.actions[i];
                              a.includes(r.eventCodes, t) &&
                                this.triggerAction(i, n);
                            }
                      },
                    },
                    {
                      key: "handleMouseMove",
                      value: function (e, t, n) {
                        void 0 !== this.controlledObject
                          ? this.controlledObject.handleMouseMove(e, t, n)
                          : this.world.cameraOperator.move(t, n);
                      },
                    },
                    {
                      key: "handleMouseWheel",
                      value: function (e, t) {
                        void 0 !== this.controlledObject
                          ? this.controlledObject.handleMouseWheel(e, t)
                          : this.world.scrollTheTimeScale(t);
                      },
                    },
                    {
                      key: "getActionMap",
                      value: function () {
                        return {
                          up: this.actions.up.isPressed,
                          left: this.actions.left.isPressed,
                          right: this.actions.right.isPressed,
                          down: this.actions.down.isPressed,
                          run: this.actions.run.isPressed,
                          jump: this.actions.jump.isPressed,
                          dance: this.actions.dance.isPressed,
                        };
                      },
                    },
                    {
                      key: "triggerAction",
                      value: function (e, t) {
                        var n = this.actions[e];
                        n.isPressed !== t &&
                          ((n.isPressed = t),
                          (n.justPressed = !1),
                          (n.justReleased = !1),
                          t ? (n.justPressed = !0) : (n.justReleased = !0),
                          this.processDJ3DAction(),
                          this.charState.onInputChange(),
                          (n.justPressed = !1),
                          (n.justReleased = !1));
                      },
                    },
                    {
                      key: "processDJ3DAction",
                      value: function () {
                        if (
                          (this.actions.hideChar.justReleased &&
                            (this.modelContainer.visible =
                              !this.modelContainer.visible),
                          this.actions.chat.justReleased)
                        ) {
                          var e = document.getElementById("chatInput");
                          e && e.focus();
                        }
                      },
                    },
                    {
                      key: "takeControl",
                      value: function () {
                        void 0 !== this.world
                          ? this.world.inputManager.setInputReceiver(this)
                          : console.warn(
                              "Attempting to take control of a character that doesn't belong to a world."
                            );
                      },
                    },
                    {
                      key: "resetControls",
                      value: function () {
                        for (var e in this.actions)
                          this.actions.hasOwnProperty(e) &&
                            this.triggerAction(e, !1);
                      },
                    },
                    {
                      key: "update",
                      value: function (e) {
                        if (
                          (void 0 !== this.behaviour &&
                            this.behaviour.update(e),
                          !0 === this.isRunningTowardsVehicle)
                        ) {
                          var t = new i.Vector3();
                          this.targetSeat.entryPoint.getWorldPosition(t);
                          var n = new i.Vector3().subVectors(t, this.position);
                          this.setOrientation(n);
                          var r = n.y;
                          (n.y = 0),
                            this.charState.canEnterVehicles &&
                              n.length() < 0.2 &&
                              r < 2 &&
                              this.enterVehicle(this.targetSeat);
                        }
                        if (
                          (void 0 !== this.charState &&
                            this.charState.update(e),
                          this.physicsEnabled && this.springMovement(e),
                          this.physicsEnabled && this.springRotation(e),
                          this.physicsEnabled && this.rotateModel(),
                          void 0 !== this.mixer && this.mixer.update(e),
                          this.physicsEnabled)
                        )
                          this.position.set(
                            this.characterCapsule.physics.physical
                              .interpolatedPosition.x,
                            this.characterCapsule.physics.physical
                              .interpolatedPosition.y,
                            this.characterCapsule.physics.physical
                              .interpolatedPosition.z
                          );
                        else {
                          var a = new i.Vector3();
                          this.getWorldPosition(a),
                            this.characterCapsule.physics.physical.position.copy(
                              o.cannonVector(a)
                            ),
                            this.characterCapsule.physics.physical.interpolatedPosition.copy(
                              o.cannonVector(a)
                            );
                        }
                        this.help1.position.copy(this.position),
                          this.help1.quaternion.copy(this.quaternion),
                          this.modelContainer.getWorldPosition(
                            this.help2.position
                          ),
                          this.modelContainer.getWorldQuaternion(
                            this.help2.quaternion
                          ),
                          this.tiltContainer.getWorldPosition(
                            this.help3.position
                          ),
                          this.tiltContainer.getWorldQuaternion(
                            this.help3.quaternion
                          );
                      },
                    },
                    {
                      key: "inputReceiverInit",
                      value: function () {
                        void 0 === this.controlledObject
                          ? (this.world.cameraOperator.setRadius(4, !0),
                            (this.world.cameraOperator.followMode = !1))
                          : this.controlledObject.inputReceiverInit();
                      },
                    },
                    {
                      key: "inputReceiverUpdate",
                      value: function (e) {
                        if (void 0 !== this.controlledObject)
                          this.controlledObject.inputReceiverUpdate(e);
                        else {
                          this.viewVector = new i.Vector3().subVectors(
                            this.position,
                            this.world.camera.position
                          );
                          var t = new i.Vector3();
                          this.getWorldPosition(t),
                            this.getWorldPosition(
                              this.world.cameraOperator.target
                            );
                        }
                      },
                    },
                    {
                      key: "setAnimation",
                      value: function (e, t) {
                        if (
                          (!this.isServerDriven &&
                            this.sendCharAnimationStateCommand &&
                            this.sendCharAnimationStateCommand(e, t),
                          void 0 !== this.mixer)
                        ) {
                          var n = i.AnimationClip.findByName(
                            this.animations,
                            e
                          );
                          if (!n) return;
                          var r = this.mixer.clipAction(n);
                          return (
                            this.previousAction &&
                              ((this.previousAction.paused = !0),
                              this.previousAction.crossFadeTo(r, t, !1)),
                            (this.previousAction = r),
                            r.reset().play(),
                            r._clip.duration
                          );
                        }
                      },
                    },
                    {
                      key: "springMovement",
                      value: function (e) {
                        this.velocitySimulator.target.copy(this.velocityTarget),
                          this.velocitySimulator.simulate(e),
                          this.velocity.copy(this.velocitySimulator.position),
                          this.acceleration.copy(
                            this.velocitySimulator.velocity
                          );
                      },
                    },
                    {
                      key: "springRotation",
                      value: function (e) {
                        var t = o.getSignedAngleBetweenVectors(
                          this.orientation,
                          this.orientationTarget
                        );
                        (this.rotationSimulator.target = t),
                          this.rotationSimulator.simulate(e);
                        var n = this.rotationSimulator.position;
                        this.orientation.applyAxisAngle(
                          new i.Vector3(0, 1, 0),
                          n
                        ),
                          (this.angularVelocity =
                            this.rotationSimulator.velocity);
                      },
                    },
                    {
                      key: "enableJoystick",
                      value: function () {
                        this.joystickEnabled = !0;
                      },
                    },
                    {
                      key: "disableJoystick",
                      value: function () {
                        this.joystickEnabled = !1;
                      },
                    },
                    {
                      key: "sendJoystickAngle",
                      value: function (e) {
                        this.joystickAngle = e;
                      },
                    },
                    {
                      key: "getLocalMovementDirection",
                      value: function () {
                        if (this.joystickEnabled)
                          return new i.Vector3(
                            -Math.cos(this.joystickAngle),
                            0,
                            Math.sin(this.joystickAngle)
                          ).normalize();
                        var e = this.actions.right.isPressed ? -1 : 0,
                          t = this.actions.left.isPressed ? 1 : 0,
                          n = this.actions.up.isPressed ? 1 : 0,
                          r = this.actions.down.isPressed ? -1 : 0;
                        return new i.Vector3(e + t, 0, n + r).normalize();
                      },
                    },
                    {
                      key: "getCameraRelativeMovementVector",
                      value: function () {
                        var e = this.getLocalMovementDirection(),
                          t = new i.Vector3(
                            this.viewVector.x,
                            0,
                            this.viewVector.z
                          ).normalize();
                        return o.appplyVectorMatrixXZ(t, e);
                      },
                    },
                    {
                      key: "setCameraRelativeOrientationTarget",
                      value: function () {
                        if (!1 === this.isRunningTowardsVehicle) {
                          var e = this.getCameraRelativeMovementVector();
                          0 === e.x && 0 === e.y && 0 === e.z
                            ? this.setOrientation(this.orientation)
                            : this.setOrientation(e);
                        }
                      },
                    },
                    {
                      key: "rotateModel",
                      value: function () {
                        this.lookAt(
                          this.position.x + this.orientation.x,
                          this.position.y + this.orientation.y,
                          this.position.z + this.orientation.z
                        ),
                          (this.tiltContainer.rotation.z =
                            2.3 *
                            -this.angularVelocity *
                            this.velocity.length()),
                          this.tiltContainer.position.setY(
                            Math.cos(
                              Math.abs(
                                2.3 *
                                  this.angularVelocity *
                                  this.velocity.length()
                              )
                            ) /
                              2 -
                              0.5
                          );
                      },
                    },
                    {
                      key: "jump",
                      value: function () {
                        var e =
                          arguments.length > 0 && void 0 !== arguments[0]
                            ? arguments[0]
                            : -1;
                        (this.wantsToJump = !0), (this.initJumpSpeed = e);
                      },
                    },
                    {
                      key: "findVehicleToEnter",
                      value: function () {
                        var e,
                          t = this,
                          n = Number.POSITIVE_INFINITY;
                        this.world.vehicles.forEach(function (r) {
                          var a = new i.Vector3()
                            .subVectors(t.position, r.position)
                            .lengthSq();
                          a < 10 && a < n && (e = r);
                        }),
                          void 0 !== e
                            ? ((this.isRunningTowardsVehicle = !0),
                              (this.targetSeat = e.seats[0]),
                              this.triggerAction("up", !0))
                            : console.error("World has no vehicles");
                      },
                    },
                    {
                      key: "enterVehicle",
                      value: function (e) {
                        this.resetControls(),
                          e.isDoorOpen()
                            ? this.setState(
                                new x.EnteringVehicle(this, this.targetSeat)
                              )
                            : this.setState(new _.OpenVehicleDoor(this, e)),
                          (this.isRunningTowardsVehicle = !1),
                          (this.targetSeat = void 0);
                      },
                    },
                    {
                      key: "teleportToVehicle",
                      value: function (e, t) {
                        this.resetVelocity(),
                          this.rotateModel(),
                          this.setPhysicsEnabled(!1),
                          e.attach(this),
                          this.setPosition(
                            t.seatPoint.position.x,
                            t.seatPoint.position.y + 0.6,
                            t.seatPoint.position.z
                          ),
                          this.quaternion.copy(t.seatPoint.quaternion),
                          this.setState(new w.Sitting(this));
                      },
                    },
                    {
                      key: "startControllingVehicle",
                      value: function (e, t) {
                        (this.controlledObject = e),
                          this.controlledObject.allowSleep(!1),
                          e.inputReceiverInit(),
                          (this.controlledObjectSeat = t),
                          (e.controllingCharacter = this);
                      },
                    },
                    {
                      key: "exitVehicle",
                      value: function () {
                        this.setState(
                          new b.ExitingVehicle(
                            this,
                            this.controlledObject,
                            this.controlledObjectSeat
                          )
                        ),
                          this.controlledObject.allowSleep(!0),
                          (this.controlledObject.controllingCharacter = void 0),
                          this.controlledObject.resetControls(),
                          (this.controlledObject = void 0),
                          this.inputReceiverInit();
                      },
                    },
                    {
                      key: "physicsPreStep",
                      value: function (e, t) {
                        var n = new r.Vec3(
                            e.position.x,
                            e.position.y,
                            e.position.z
                          ),
                          i = new r.Vec3(
                            e.position.x,
                            e.position.y - t.rayCastLength - t.raySafeOffset,
                            e.position.z
                          ),
                          a = {
                            collisionFilterMask: S.CollisionGroups.Default,
                            skipBackfaces: !0,
                          };
                        (t.rayHasHit = t.world.physicsWorld.raycastClosest(
                          n,
                          i,
                          a,
                          t.rayResult
                        )),
                          t.rayHasHit
                            ? t.raycastBox.visible &&
                              ((t.raycastBox.position.x =
                                t.rayResult.hitPointWorld.x),
                              (t.raycastBox.position.y =
                                t.rayResult.hitPointWorld.y),
                              (t.raycastBox.position.z =
                                t.rayResult.hitPointWorld.z))
                            : t.raycastBox.visible &&
                              t.raycastBox.position.set(
                                e.position.x,
                                e.position.y -
                                  t.rayCastLength -
                                  t.raySafeOffset,
                                e.position.z
                              );
                      },
                    },
                    {
                      key: "physicsPostStep",
                      value: function (e, t) {
                        var n = new i.Vector3(
                            e.velocity.x,
                            e.velocity.y,
                            e.velocity.z
                          ),
                          r = new i.Vector3()
                            .copy(t.velocity)
                            .multiplyScalar(t.moveSpeed);
                        r = o.appplyVectorMatrixXZ(t.orientation, r);
                        var a = new i.Vector3();
                        if (t.arcadeVelocityIsAdditive) {
                          a.copy(n);
                          var s = o.appplyVectorMatrixXZ(
                              t.orientation,
                              t.velocityTarget
                            ),
                            l = new i.Vector3()
                              .copy(r)
                              .multiply(t.arcadeVelocityInfluence);
                          (Math.abs(n.x) < Math.abs(s.x * t.moveSpeed) ||
                            o.haveDifferentSigns(n.x, r.x)) &&
                            (a.x += l.x),
                            (Math.abs(n.y) < Math.abs(s.y * t.moveSpeed) ||
                              o.haveDifferentSigns(n.y, r.y)) &&
                              (a.y += l.y),
                            (Math.abs(n.z) < Math.abs(s.z * t.moveSpeed) ||
                              o.haveDifferentSigns(n.z, r.z)) &&
                              (a.z += l.z);
                        } else
                          a = new i.Vector3(
                            i.MathUtils.lerp(
                              n.x,
                              r.x,
                              t.arcadeVelocityInfluence.x
                            ),
                            i.MathUtils.lerp(
                              n.y,
                              r.y,
                              t.arcadeVelocityInfluence.y
                            ),
                            i.MathUtils.lerp(
                              n.z,
                              r.z,
                              t.arcadeVelocityInfluence.z
                            )
                          );
                        if (t.rayHasHit) {
                          a.y = 0;
                          var u = new i.Vector3(0, 1, 0),
                            c = new i.Vector3(
                              t.rayResult.hitNormalWorld.x,
                              t.rayResult.hitNormalWorld.y,
                              t.rayResult.hitNormalWorld.z
                            ),
                            h = new i.Quaternion().setFromUnitVectors(u, c),
                            d = new i.Matrix4().makeRotationFromQuaternion(h);
                          a.applyMatrix4(d),
                            (e.velocity.x = a.x),
                            (e.velocity.y = a.y),
                            (e.velocity.z = a.z),
                            (e.position.y =
                              t.rayResult.hitPointWorld.y +
                              t.rayCastLength +
                              a.y / t.world.physicsFrameRate);
                        } else
                          (e.velocity.x = a.x),
                            (e.velocity.y = a.y),
                            (e.velocity.z = a.z),
                            (t.groundImpactData.velocity.x = e.velocity.x),
                            (t.groundImpactData.velocity.y = e.velocity.y),
                            (t.groundImpactData.velocity.z = e.velocity.z);
                        t.wantsToJump &&
                          (t.initJumpSpeed > -1 &&
                            ((e.velocity.y = 0),
                            e.velocity.lengthSquared() <
                              Math.pow(t.initJumpSpeed, 2) &&
                              (e.velocity.normalize(),
                              e.velocity.mult(t.initJumpSpeed, e.velocity))),
                          (e.velocity.y += this.jumpInitialLift),
                          (e.position.y += 2 * t.raySafeOffset),
                          (t.wantsToJump = !1)),
                          e.velocity.y < 0 &&
                            e.velocity.y > this.jumpNuanceFallVelocityMax &&
                            (e.velocity.y -= this.jumpNuanceFallAcceleration),
                          e.velocity.y > 0 &&
                            !this.actions.jump.isPressed &&
                            (e.velocity.y -= this.jumpNuanceRiseDeceleration);
                      },
                    },
                    {
                      key: "addToWorld",
                      value: function (e) {
                        a.includes(e.characters, this)
                          ? console.warn(
                              "Adding character to a world in which it already exists."
                            )
                          : ((this.world = e),
                            e.characters.push(this),
                            e.physicsWorld.addBody(
                              this.characterCapsule.physics.physical
                            ),
                            e.graphicsWorld.add(this),
                            e.graphicsWorld.add(
                              this.characterCapsule.physics.visual
                            ),
                            e.graphicsWorld.add(this.raycastBox),
                            e.objects.push(this.characterCapsule));
                      },
                    },
                    {
                      key: "removeFromWorld",
                      value: function (e) {
                        a.includes(e.characters, this)
                          ? ((this.world = void 0),
                            a.pull(e.characters, this),
                            e.physicsWorld.remove(
                              this.characterCapsule.physics.physical
                            ),
                            e.graphicsWorld.remove(this),
                            e.graphicsWorld.remove(
                              this.characterCapsule.physics.visual
                            ),
                            e.graphicsWorld.remove(this.raycastBox),
                            this.proximityLine &&
                              e.graphicsWorld.remove(this.proximityLine),
                            a.pull(e.objects, this.characterCapsule),
                            this.faceCanvas && this.faceCanvas.remove())
                          : console.warn(
                              "Removing character from a world in which it isn't present."
                            );
                      },
                    },
                  ]),
                  t
                );
              })(i.Object3D);
            t.Character = T;
          },
          "./src/ts/characters/character_ai/FollowPath.ts": function (e, t, n) {
            "use strict";
            Object.defineProperty(t, "__esModule", { value: !0 });
            var i = n("./src/ts/characters/character_ai/FollowTarget.ts"),
              r = n("./node_modules/three/build/three.module.js"),
              a = (function (e) {
                function t(e, n) {
                  var i;
                  return (
                    f(this, t),
                    ((i = c(this, h(t).call(this, e.object, 0))).reverse = !1),
                    (i.nodeRadius = n),
                    (i.targetNode = e),
                    i
                  );
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "update",
                      value: function (e) {
                        l(h(t.prototype), "update", this).call(this, e);
                        var n = new r.Vector3(),
                          i = new r.Vector3();
                        this.character.getWorldPosition(n),
                          this.target.getWorldPosition(i),
                          new r.Vector3().subVectors(i, n).length() <
                            this.nodeRadius &&
                            (this.reverse
                              ? (l(h(t.prototype), "setTarget", this).call(
                                  this,
                                  this.targetNode.previousNode.object
                                ),
                                (this.targetNode =
                                  this.targetNode.previousNode))
                              : (l(h(t.prototype), "setTarget", this).call(
                                  this,
                                  this.targetNode.nextNode.object
                                ),
                                (this.targetNode = this.targetNode.nextNode)));
                      },
                    },
                  ]),
                  t
                );
              })(i.FollowTarget);
            t.FollowPath = a;
          },
          "./src/ts/characters/character_ai/FollowTarget.ts": function (
            e,
            t,
            n
          ) {
            "use strict";
            Object.defineProperty(t, "__esModule", { value: !0 });
            var i = n("./node_modules/three/build/three.module.js"),
              r = n("./src/ts/core/Utilities.ts"),
              a = (function () {
                function e(t) {
                  var n =
                    arguments.length > 1 && void 0 !== arguments[1]
                      ? arguments[1]
                      : 1.3;
                  f(this, e), (this.target = t), (this.stopDistance = n);
                }
                return (
                  m(e, [
                    {
                      key: "setTarget",
                      value: function (e) {
                        this.target = e;
                      },
                    },
                    {
                      key: "update",
                      value: function (e) {
                        if (void 0 !== this.character.controlledObject) {
                          var t = new i.Vector3(),
                            n = new i.Vector3();
                          this.character.getWorldPosition(t),
                            this.target.getWorldPosition(n);
                          var a = new i.Vector3().subVectors(n, t);
                          a.length() > this.stopDistance
                            ? (this.isTargetReached = !1)
                            : (this.isTargetReached = !0);
                          var o = new i.Vector3(0, 0, 1).applyQuaternion(
                            this.character.controlledObject.quaternion
                          );
                          a.normalize();
                          var s = r.getSignedAngleBetweenVectors(o, a);
                          if (
                            (o.dot(a) < 0
                              ? (this.character.controlledObject.triggerAction(
                                  "reverse",
                                  !0
                                ),
                                this.character.controlledObject.triggerAction(
                                  "throttle",
                                  !1
                                ))
                              : (this.character.controlledObject.triggerAction(
                                  "throttle",
                                  !0
                                ),
                                this.character.controlledObject.triggerAction(
                                  "reverse",
                                  !1
                                )),
                            Math.abs(s) > 0.3)
                          ) {
                            var l = o.dot(
                              r.threeVector(
                                this.character.controlledObject.collision
                                  .velocity
                              )
                            );
                            o.dot(a) > 0 || l > 0
                              ? s > 0
                                ? (this.character.controlledObject.triggerAction(
                                    "left",
                                    !0
                                  ),
                                  this.character.controlledObject.triggerAction(
                                    "right",
                                    !1
                                  ))
                                : (this.character.controlledObject.triggerAction(
                                    "right",
                                    !0
                                  ),
                                  this.character.controlledObject.triggerAction(
                                    "left",
                                    !1
                                  ))
                              : s > 0
                              ? (this.character.controlledObject.triggerAction(
                                  "right",
                                  !0
                                ),
                                this.character.controlledObject.triggerAction(
                                  "left",
                                  !1
                                ))
                              : (this.character.controlledObject.triggerAction(
                                  "left",
                                  !0
                                ),
                                this.character.controlledObject.triggerAction(
                                  "right",
                                  !1
                                ));
                          } else
                            this.character.controlledObject.triggerAction(
                              "left",
                              !1
                            ),
                              this.character.controlledObject.triggerAction(
                                "right",
                                !1
                              );
                        } else {
                          var u = new i.Vector3().subVectors(
                            this.target.position,
                            this.character.position
                          );
                          this.character.setViewVector(u),
                            u.length() > this.stopDistance
                              ? ((this.isTargetReached = !1),
                                this.character.triggerAction("up", !0))
                              : ((this.isTargetReached = !0),
                                this.character.triggerAction("up", !1),
                                this.character.setOrientation(u));
                        }
                      },
                    },
                  ]),
                  e
                );
              })();
            t.FollowTarget = a;
          },
          "./src/ts/characters/character_ai/RandomBehaviour.ts": function (
            e,
            t,
            n
          ) {
            "use strict";
            Object.defineProperty(t, "__esModule", { value: !0 });
            var i = n("./node_modules/three/build/three.module.js"),
              r = (function () {
                function e() {
                  var t =
                    arguments.length > 0 && void 0 !== arguments[0]
                      ? arguments[0]
                      : 100;
                  f(this, e), (this.randomFrequency = t);
                }
                return (
                  m(e, [
                    {
                      key: "update",
                      value: function (e) {
                        var t = Math.floor(
                            Math.random() * this.randomFrequency
                          ),
                          n = Math.random() > 0.5;
                        0 === t
                          ? (this.character.setViewVector(
                              new i.Vector3(
                                Math.random() - 0.5,
                                Math.random() - 0.5,
                                Math.random() - 0.5
                              )
                            ),
                            this.character.triggerAction("up", !0),
                            this.character.charState.update(e),
                            this.character.triggerAction("up", !1))
                          : 1 === t
                          ? this.character.triggerAction("up", n)
                          : 2 === t
                          ? this.character.triggerAction("run", n)
                          : 3 === t && this.character.triggerAction("jump", n);
                      },
                    },
                  ]),
                  e
                );
              })();
            t.RandomBehaviour = r;
          },
          "./src/ts/characters/character_states/CharacterStateBase.ts":
            function (e, t, n) {
              "use strict";
              Object.defineProperty(t, "__esModule", { value: !0 });
              var i = n("./src/ts/core/Utilities.ts"),
                r = n("./src/ts/characters/character_states/_stateLibrary.ts"),
                a = (function () {
                  function e(t) {
                    f(this, e),
                      (this.character = t),
                      (this.character.velocitySimulator.damping =
                        this.character.defaultVelocitySimulatorDamping),
                      (this.character.velocitySimulator.mass =
                        this.character.defaultVelocitySimulatorMass),
                      (this.character.rotationSimulator.damping =
                        this.character.defaultRotationSimulatorDamping),
                      (this.character.rotationSimulator.mass =
                        this.character.defaultRotationSimulatorMass),
                      (this.character.arcadeVelocityIsAdditive = !1),
                      this.character.setArcadeVelocityInfluence(1, 0, 1),
                      (this.canFindVehiclesToEnter = !0),
                      (this.canEnterVehicles = !1),
                      (this.canLeaveVehicles = !0),
                      (this.timer = 0);
                  }
                  return (
                    m(e, [
                      {
                        key: "update",
                        value: function (e) {
                          this.timer += e;
                        },
                      },
                      { key: "onInputChange", value: function () {} },
                      {
                        key: "noDirection",
                        value: function () {
                          return (
                            !this.character.actions.up.isPressed &&
                            !this.character.actions.down.isPressed &&
                            !this.character.actions.left.isPressed &&
                            !this.character.actions.right.isPressed
                          );
                        },
                      },
                      {
                        key: "anyDirection",
                        value: function () {
                          return (
                            this.character.actions.up.isPressed ||
                            this.character.actions.down.isPressed ||
                            this.character.actions.left.isPressed ||
                            this.character.actions.right.isPressed
                          );
                        },
                      },
                      {
                        key: "fallInAir",
                        value: function () {
                          this.character.rayHasHit ||
                            this.character.setState(
                              new r.Falling(this.character)
                            );
                        },
                      },
                      {
                        key: "animationEnded",
                        value: function (e) {
                          return (
                            void 0 === this.character.mixer ||
                            (void 0 === this.animationLength
                              ? (console.error(
                                  this.constructor.name +
                                    "Error: Set this.animationLength in state constructor!"
                                ),
                                !1)
                              : this.timer > this.animationLength - e)
                          );
                        },
                      },
                      {
                        key: "setAppropriateDropState",
                        value: function () {
                          this.character.groundImpactData.velocity.y < -12
                            ? this.character.setState(
                                new r.DropRolling(this.character)
                              )
                            : this.anyDirection()
                            ? this.character.groundImpactData.velocity.y < -2
                              ? this.character.setState(
                                  new r.DropRunning(this.character)
                                )
                              : this.character.actions.run.isPressed
                              ? this.character.setState(
                                  new r.Sprint(this.character)
                                )
                              : this.character.setState(
                                  new r.Walk(this.character)
                                )
                            : this.character.setState(
                                new r.DropIdle(this.character)
                              );
                        },
                      },
                      {
                        key: "setAppropriateStartWalkState",
                        value: function () {
                          var e = Math.PI,
                            t = i.getSignedAngleBetweenVectors(
                              this.character.orientation,
                              this.character.getCameraRelativeMovementVector()
                            );
                          t > 0.8 * e
                            ? this.character.setState(
                                new r.StartWalkBackLeft(this.character)
                              )
                            : t < 0.8 * -e
                            ? this.character.setState(
                                new r.StartWalkBackRight(this.character)
                              )
                            : t > 0.3 * e
                            ? this.character.setState(
                                new r.StartWalkLeft(this.character)
                              )
                            : t < 0.3 * -e
                            ? this.character.setState(
                                new r.StartWalkRight(this.character)
                              )
                            : this.character.setState(
                                new r.StartWalkForward(this.character)
                              );
                        },
                      },
                    ]),
                    e
                  );
                })();
              t.CharacterStateBase = a;
            },
          "./src/ts/characters/character_states/Dance.ts": function (e, t, n) {
            "use strict";
            Object.defineProperty(t, "__esModule", { value: !0 });
            var i = n("./src/ts/characters/character_states/_stateLibrary.ts"),
              r = (function (e) {
                function t(e) {
                  var n;
                  return (
                    f(this, t),
                    ((n = c(this, h(t).call(this, e))).isDancing = !1),
                    (n.character.velocitySimulator.damping = 0.6),
                    (n.character.velocitySimulator.mass = 10),
                    n.character.setArcadeVelocityTarget(0),
                    n.character.setAnimation("Dance", 0.1),
                    (n.isDancing = !0),
                    n
                  );
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "update",
                      value: function (e) {
                        l(h(t.prototype), "update", this).call(this, e),
                          this.fallInAir();
                      },
                    },
                    {
                      key: "onInputChange",
                      value: function () {
                        l(h(t.prototype), "onInputChange", this).call(this),
                          this.character.actions.jump.justPressed &&
                            this.character.setState(
                              new i.JumpIdle(this.character)
                            ),
                          this.anyDirection() &&
                            !this.character.actions.dance.justPressed &&
                            (this.character.velocity.length() > 0.5
                              ? this.character.setState(
                                  new i.Walk(this.character)
                                )
                              : this.setAppropriateStartWalkState());
                      },
                    },
                  ]),
                  t
                );
              })(i.CharacterStateBase);
            t.Dance = r;
          },
          "./src/ts/characters/character_states/DropIdle.ts": function (
            e,
            t,
            n
          ) {
            "use strict";
            Object.defineProperty(t, "__esModule", { value: !0 });
            var i = n("./src/ts/characters/character_states/_stateLibrary.ts"),
              r = (function (e) {
                function t(e) {
                  var n;
                  return (
                    f(this, t),
                    ((n = c(
                      this,
                      h(t).call(this, e)
                    )).character.velocitySimulator.damping = 0.5),
                    (n.character.velocitySimulator.mass = 7),
                    n.character.setArcadeVelocityTarget(0),
                    (n.animationLength = n.character.setAnimation(
                      "drop_idle",
                      0.1
                    )),
                    n.anyDirection() &&
                      n.character.setState(new i.StartWalkForward(e)),
                    n
                  );
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "update",
                      value: function (e) {
                        l(h(t.prototype), "update", this).call(this, e),
                          this.character.setCameraRelativeOrientationTarget(),
                          this.animationEnded(e) &&
                            this.character.setState(new i.Idle(this.character)),
                          this.fallInAir();
                      },
                    },
                    {
                      key: "onInputChange",
                      value: function () {
                        l(h(t.prototype), "onInputChange", this).call(this),
                          this.character.actions.jump.justPressed &&
                            this.character.setState(
                              new i.JumpIdle(this.character)
                            ),
                          this.anyDirection() &&
                            this.character.setState(
                              new i.StartWalkForward(this.character)
                            );
                      },
                    },
                  ]),
                  t
                );
              })(i.CharacterStateBase);
            t.DropIdle = r;
          },
          "./src/ts/characters/character_states/DropRolling.ts": function (
            e,
            t,
            n
          ) {
            "use strict";
            Object.defineProperty(t, "__esModule", { value: !0 });
            var i = n("./src/ts/characters/character_states/_stateLibrary.ts"),
              r = (function (e) {
                function t(e) {
                  var n;
                  return (
                    f(this, t),
                    ((n = c(
                      this,
                      h(t).call(this, e)
                    )).character.velocitySimulator.mass = 1),
                    (n.character.velocitySimulator.damping = 0.6),
                    n.character.setArcadeVelocityTarget(0.8),
                    (n.animationLength = n.character.setAnimation(
                      "drop_running_roll",
                      0.03
                    )),
                    n
                  );
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "update",
                      value: function (e) {
                        l(h(t.prototype), "update", this).call(this, e),
                          this.character.setCameraRelativeOrientationTarget(),
                          this.animationEnded(e) &&
                            (this.anyDirection()
                              ? this.character.setState(
                                  new i.Walk(this.character)
                                )
                              : this.character.setState(
                                  new i.EndWalk(this.character)
                                ));
                      },
                    },
                  ]),
                  t
                );
              })(i.CharacterStateBase);
            t.DropRolling = r;
          },
          "./src/ts/characters/character_states/DropRunning.ts": function (
            e,
            t,
            n
          ) {
            "use strict";
            Object.defineProperty(t, "__esModule", { value: !0 });
            var i = n("./src/ts/characters/character_states/_stateLibrary.ts"),
              r = (function (e) {
                function t(e) {
                  var n;
                  return (
                    f(this, t),
                    (n = c(
                      this,
                      h(t).call(this, e)
                    )).character.setArcadeVelocityTarget(0.8),
                    (n.animationLength = n.character.setAnimation(
                      "drop_running",
                      0.1
                    )),
                    n
                  );
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "update",
                      value: function (e) {
                        l(h(t.prototype), "update", this).call(this, e),
                          this.character.setCameraRelativeOrientationTarget(),
                          this.animationEnded(e) &&
                            this.character.setState(new i.Walk(this.character));
                      },
                    },
                    {
                      key: "onInputChange",
                      value: function () {
                        l(h(t.prototype), "onInputChange", this).call(this),
                          this.noDirection() &&
                            this.character.setState(
                              new i.EndWalk(this.character)
                            ),
                          this.anyDirection() &&
                            this.character.actions.run.justPressed &&
                            this.character.setState(
                              new i.Sprint(this.character)
                            ),
                          this.character.actions.jump.justPressed &&
                            this.character.setState(
                              new i.JumpRunning(this.character)
                            );
                      },
                    },
                  ]),
                  t
                );
              })(i.CharacterStateBase);
            t.DropRunning = r;
          },
          "./src/ts/characters/character_states/EndWalk.ts": function (
            e,
            t,
            n
          ) {
            "use strict";
            Object.defineProperty(t, "__esModule", { value: !0 });
            var i = n("./src/ts/characters/character_states/_stateLibrary.ts"),
              r = (function (e) {
                function t(e) {
                  var n;
                  return (
                    f(this, t),
                    (n = c(
                      this,
                      h(t).call(this, e)
                    )).character.setArcadeVelocityTarget(0),
                    (n.animationLength = e.setAnimation("stop", 0.1)),
                    n
                  );
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "update",
                      value: function (e) {
                        l(h(t.prototype), "update", this).call(this, e),
                          this.animationEnded(e) &&
                            this.character.setState(new i.Idle(this.character)),
                          this.fallInAir();
                      },
                    },
                    {
                      key: "onInputChange",
                      value: function () {
                        l(h(t.prototype), "onInputChange", this).call(this),
                          this.character.actions.jump.justPressed &&
                            this.character.setState(
                              new i.JumpIdle(this.character)
                            ),
                          this.anyDirection() &&
                            (this.character.actions.run.isPressed
                              ? this.character.setState(
                                  new i.Sprint(this.character)
                                )
                              : this.character.velocity.length() > 0.5
                              ? this.character.setState(
                                  new i.Walk(this.character)
                                )
                              : this.setAppropriateStartWalkState());
                      },
                    },
                  ]),
                  t
                );
              })(i.CharacterStateBase);
            t.EndWalk = r;
          },
          "./src/ts/characters/character_states/Falling.ts": function (
            e,
            t,
            n
          ) {
            "use strict";
            Object.defineProperty(t, "__esModule", { value: !0 });
            var i = (function (e) {
              function t(e) {
                var n;
                return (
                  f(this, t),
                  ((n = c(
                    this,
                    h(t).call(this, e)
                  )).character.velocitySimulator.mass = 100),
                  (n.character.rotationSimulator.damping = 0.3),
                  (n.character.arcadeVelocityIsAdditive = !0),
                  n.character.setArcadeVelocityInfluence(0.05, 0, 0.05),
                  n.character.setAnimation("falling", 0.3),
                  n
                );
              }
              return (
                p(t, e),
                m(t, [
                  {
                    key: "update",
                    value: function (e) {
                      l(h(t.prototype), "update", this).call(this, e),
                        this.character.setCameraRelativeOrientationTarget(),
                        (this.character.arcadeVelocityIsAdditive = !0),
                        this.character.setArcadeVelocityTarget(
                          this.anyDirection() ? 0.25 : 0
                        ),
                        this.character.rayHasHit &&
                          this.setAppropriateDropState();
                    },
                  },
                ]),
                t
              );
            })(
              n("./src/ts/characters/character_states/_stateLibrary.ts")
                .CharacterStateBase
            );
            t.Falling = i;
          },
          "./src/ts/characters/character_states/Idle.ts": function (e, t, n) {
            "use strict";
            Object.defineProperty(t, "__esModule", { value: !0 });
            var i = n("./src/ts/characters/character_states/_stateLibrary.ts"),
              r = n("./src/ts/characters/character_states/Dance.ts"),
              a = (function (e) {
                function t(e) {
                  var n;
                  return (
                    f(this, t),
                    ((n = c(
                      this,
                      h(t).call(this, e)
                    )).character.velocitySimulator.damping = 0.6),
                    (n.character.velocitySimulator.mass = 10),
                    n.character.setArcadeVelocityTarget(0),
                    n.character.setAnimation("idle", 0.1),
                    n
                  );
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "update",
                      value: function (e) {
                        l(h(t.prototype), "update", this).call(this, e),
                          this.fallInAir();
                      },
                    },
                    {
                      key: "onInputChange",
                      value: function () {
                        l(h(t.prototype), "onInputChange", this).call(this),
                          this.character.actions.jump.justPressed &&
                            this.character.setState(
                              new i.JumpIdle(this.character)
                            ),
                          this.character.actions.dance.justPressed &&
                            this.character.setState(
                              new r.Dance(this.character)
                            ),
                          this.anyDirection() &&
                            (this.character.velocity.length() > 0.5
                              ? this.character.setState(
                                  new i.Walk(this.character)
                                )
                              : this.setAppropriateStartWalkState());
                      },
                    },
                  ]),
                  t
                );
              })(i.CharacterStateBase);
            t.Idle = a;
          },
          "./src/ts/characters/character_states/IdleRotateLeft.ts": function (
            e,
            t,
            n
          ) {
            "use strict";
            Object.defineProperty(t, "__esModule", { value: !0 });
            var i = n("./src/ts/characters/character_states/_stateLibrary.ts"),
              r = (function (e) {
                function t(e) {
                  var n;
                  return (
                    f(this, t),
                    ((n = c(
                      this,
                      h(t).call(this, e)
                    )).character.rotationSimulator.mass = 30),
                    (n.character.rotationSimulator.damping = 0.6),
                    (n.character.velocitySimulator.damping = 0.6),
                    (n.character.velocitySimulator.mass = 10),
                    n.character.setArcadeVelocityTarget(0),
                    (n.animationLength = n.character.setAnimation(
                      "rotate_left",
                      0.1
                    )),
                    n
                  );
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "update",
                      value: function (e) {
                        l(h(t.prototype), "update", this).call(this, e),
                          this.animationEnded(e) &&
                            this.character.setState(new i.Idle(this.character)),
                          this.fallInAir();
                      },
                    },
                    {
                      key: "onInputChange",
                      value: function () {
                        l(h(t.prototype), "onInputChange", this).call(this),
                          this.character.actions.jump.justPressed &&
                            this.character.setState(
                              new i.JumpIdle(this.character)
                            ),
                          this.anyDirection() &&
                            (this.character.velocity.length() > 0.5
                              ? this.character.setState(
                                  new i.Walk(this.character)
                                )
                              : this.setAppropriateStartWalkState());
                      },
                    },
                  ]),
                  t
                );
              })(i.CharacterStateBase);
            t.IdleRotateLeft = r;
          },
          "./src/ts/characters/character_states/IdleRotateRight.ts": function (
            e,
            t,
            n
          ) {
            "use strict";
            Object.defineProperty(t, "__esModule", { value: !0 });
            var i = n("./src/ts/characters/character_states/_stateLibrary.ts"),
              r = (function (e) {
                function t(e) {
                  var n;
                  return (
                    f(this, t),
                    ((n = c(
                      this,
                      h(t).call(this, e)
                    )).character.rotationSimulator.mass = 30),
                    (n.character.rotationSimulator.damping = 0.6),
                    (n.character.velocitySimulator.damping = 0.6),
                    (n.character.velocitySimulator.mass = 10),
                    n.character.setArcadeVelocityTarget(0),
                    (n.animationLength = n.character.setAnimation(
                      "rotate_right",
                      0.1
                    )),
                    n
                  );
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "update",
                      value: function (e) {
                        l(h(t.prototype), "update", this).call(this, e),
                          this.animationEnded(e) &&
                            this.character.setState(new i.Idle(this.character)),
                          this.fallInAir();
                      },
                    },
                    {
                      key: "onInputChange",
                      value: function () {
                        l(h(t.prototype), "onInputChange", this).call(this),
                          this.character.actions.jump.justPressed &&
                            this.character.setState(
                              new i.JumpIdle(this.character)
                            ),
                          this.anyDirection() &&
                            (this.character.velocity.length() > 0.5
                              ? this.character.setState(
                                  new i.Walk(this.character)
                                )
                              : this.setAppropriateStartWalkState());
                      },
                    },
                  ]),
                  t
                );
              })(i.CharacterStateBase);
            t.IdleRotateRight = r;
          },
          "./src/ts/characters/character_states/JumpIdle.ts": function (
            e,
            t,
            n
          ) {
            "use strict";
            Object.defineProperty(t, "__esModule", { value: !0 });
            var i = n("./src/ts/characters/character_states/_stateLibrary.ts"),
              r = (function (e) {
                function t(e) {
                  var n;
                  return (
                    f(this, t),
                    ((n = c(
                      this,
                      h(t).call(this, e)
                    )).character.velocitySimulator.mass = 50),
                    n.character.setArcadeVelocityTarget(0),
                    (n.animationLength = n.character.setAnimation(
                      "jump_idle",
                      0.1
                    )),
                    (n.alreadyJumped = !1),
                    n
                  );
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "update",
                      value: function (e) {
                        l(h(t.prototype), "update", this).call(this, e),
                          this.alreadyJumped &&
                            (this.character.setCameraRelativeOrientationTarget(),
                            (this.character.arcadeVelocityIsAdditive = !0),
                            this.character.setArcadeVelocityTarget(
                              this.anyDirection() ? 0.8 : 0
                            )),
                          this.timer > 0 && !this.alreadyJumped
                            ? (this.character.jump(),
                              (this.alreadyJumped = !0),
                              (this.character.velocitySimulator.mass = 100),
                              (this.character.rotationSimulator.damping = 0.3),
                              this.character.setArcadeVelocityInfluence(
                                0.3,
                                0,
                                0.3
                              ))
                            : this.timer > 0.3 && this.character.rayHasHit
                            ? this.setAppropriateDropState()
                            : this.timer > this.animationLength - e &&
                              this.character.setState(
                                new i.Falling(this.character)
                              );
                      },
                    },
                  ]),
                  t
                );
              })(i.CharacterStateBase);
            t.JumpIdle = r;
          },
          "./src/ts/characters/character_states/JumpRunning.ts": function (
            e,
            t,
            n
          ) {
            "use strict";
            Object.defineProperty(t, "__esModule", { value: !0 });
            var i = n("./src/ts/characters/character_states/_stateLibrary.ts"),
              r = (function (e) {
                function t(e) {
                  var n;
                  return (
                    f(this, t),
                    ((n = c(
                      this,
                      h(t).call(this, e)
                    )).character.velocitySimulator.mass = 100),
                    (n.animationLength = n.character.setAnimation(
                      "jump_running",
                      0.03
                    )),
                    (n.alreadyJumped = !1),
                    n
                  );
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "update",
                      value: function (e) {
                        l(h(t.prototype), "update", this).call(this, e),
                          this.character.setCameraRelativeOrientationTarget(),
                          this.alreadyJumped &&
                            ((this.character.arcadeVelocityIsAdditive = !0),
                            this.character.setArcadeVelocityTarget(
                              this.anyDirection() ? 0.25 : 0
                            )),
                          this.timer > 0 && !this.alreadyJumped
                            ? (this.character.jump(4),
                              (this.alreadyJumped = !0),
                              (this.character.rotationSimulator.damping = 0.3),
                              (this.character.arcadeVelocityIsAdditive = !0),
                              this.character.setArcadeVelocityInfluence(
                                0.05,
                                0,
                                0.05
                              ))
                            : this.timer > 0.24 && this.character.rayHasHit
                            ? this.setAppropriateDropState()
                            : this.timer > this.animationLength - e &&
                              this.character.setState(
                                new i.Falling(this.character)
                              );
                      },
                    },
                  ]),
                  t
                );
              })(i.CharacterStateBase);
            t.JumpRunning = r;
          },
          "./src/ts/characters/character_states/Sitting.ts": function (
            e,
            t,
            n
          ) {
            "use strict";
            Object.defineProperty(t, "__esModule", { value: !0 });
            var i = (function (e) {
              function t(e) {
                var n;
                return (
                  f(this, t),
                  (n = c(this, h(t).call(this, e))).character.setAnimation(
                    "driving",
                    0.1
                  ),
                  n
                );
              }
              return (
                p(t, e),
                m(t, [
                  {
                    key: "update",
                    value: function (e) {
                      l(h(t.prototype), "update", this).call(this, e);
                    },
                  },
                ]),
                t
              );
            })(
              n("./src/ts/characters/character_states/_stateLibrary.ts")
                .CharacterStateBase
            );
            t.Sitting = i;
          },
          "./src/ts/characters/character_states/Sprint.ts": function (e, t, n) {
            "use strict";
            Object.defineProperty(t, "__esModule", { value: !0 });
            var i = n("./src/ts/characters/character_states/_stateLibrary.ts"),
              r = (function (e) {
                function t(e) {
                  var n;
                  return (
                    f(this, t),
                    ((n = c(this, h(t).call(this, e))).canEnterVehicles = !0),
                    (n.character.velocitySimulator.mass = 10),
                    (n.character.rotationSimulator.damping = 0.8),
                    (n.character.rotationSimulator.mass = 50),
                    n.character.setArcadeVelocityTarget(1.4),
                    n.character.setAnimation("sprint", 0.1),
                    n
                  );
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "update",
                      value: function (e) {
                        l(h(t.prototype), "update", this).call(this, e),
                          this.character.setCameraRelativeOrientationTarget(),
                          this.fallInAir();
                      },
                    },
                    {
                      key: "onInputChange",
                      value: function () {
                        l(h(t.prototype), "onInputChange", this).call(this),
                          this.character.actions.run.isPressed ||
                            this.character.setState(new i.Walk(this.character)),
                          this.character.actions.jump.justPressed &&
                            this.character.setState(
                              new i.JumpRunning(this.character)
                            ),
                          this.noDirection() &&
                            this.character.setState(
                              new i.EndWalk(this.character)
                            );
                      },
                    },
                  ]),
                  t
                );
              })(i.CharacterStateBase);
            t.Sprint = r;
          },
          "./src/ts/characters/character_states/StartWalkBackLeft.ts":
            function (e, t, n) {
              "use strict";
              Object.defineProperty(t, "__esModule", { value: !0 });
              var i = (function (e) {
                function t(e) {
                  var n;
                  return (
                    f(this, t),
                    ((n = c(this, h(t).call(this, e))).animationLength =
                      e.setAnimation("start_back_left", 0.1)),
                    n
                  );
                }
                return p(t, e), t;
              })(
                n("./src/ts/characters/character_states/_stateLibrary.ts")
                  .StartWalkBase
              );
              t.StartWalkBackLeft = i;
            },
          "./src/ts/characters/character_states/StartWalkBackRight.ts":
            function (e, t, n) {
              "use strict";
              Object.defineProperty(t, "__esModule", { value: !0 });
              var i = (function (e) {
                function t(e) {
                  var n;
                  return (
                    f(this, t),
                    ((n = c(this, h(t).call(this, e))).animationLength =
                      e.setAnimation("start_back_right", 0.1)),
                    n
                  );
                }
                return p(t, e), t;
              })(
                n("./src/ts/characters/character_states/_stateLibrary.ts")
                  .StartWalkBase
              );
              t.StartWalkBackRight = i;
            },
          "./src/ts/characters/character_states/StartWalkBase.ts": function (
            e,
            t,
            n
          ) {
            "use strict";
            Object.defineProperty(t, "__esModule", { value: !0 });
            var i = n("./src/ts/core/Utilities.ts"),
              r = n("./src/ts/characters/character_states/_stateLibrary.ts"),
              a = (function (e) {
                function t(e) {
                  var n;
                  return (
                    f(this, t),
                    ((n = c(this, h(t).call(this, e))).canEnterVehicles = !0),
                    (n.character.rotationSimulator.mass = 20),
                    (n.character.rotationSimulator.damping = 0.7),
                    n.character.setArcadeVelocityTarget(0.8),
                    n
                  );
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "update",
                      value: function (e) {
                        l(h(t.prototype), "update", this).call(this, e),
                          this.animationEnded(e) &&
                            this.character.setState(new r.Walk(this.character)),
                          this.character.setCameraRelativeOrientationTarget(),
                          this.fallInAir();
                      },
                    },
                    {
                      key: "onInputChange",
                      value: function () {
                        if (
                          (l(h(t.prototype), "onInputChange", this).call(this),
                          this.character.actions.jump.justPressed &&
                            this.character.setState(
                              new r.JumpRunning(this.character)
                            ),
                          this.noDirection())
                        )
                          if (this.timer < 0.1) {
                            var e = i.getSignedAngleBetweenVectors(
                              this.character.orientation,
                              this.character.orientationTarget
                            );
                            e > 0.4 * Math.PI
                              ? this.character.setState(
                                  new r.IdleRotateLeft(this.character)
                                )
                              : e < 0.4 * -Math.PI
                              ? this.character.setState(
                                  new r.IdleRotateRight(this.character)
                                )
                              : this.character.setState(
                                  new r.Idle(this.character)
                                );
                          } else
                            this.character.setState(new r.Idle(this.character));
                        this.character.actions.run.justPressed &&
                          this.character.setState(new r.Sprint(this.character));
                      },
                    },
                  ]),
                  t
                );
              })(r.CharacterStateBase);
            t.StartWalkBase = a;
          },
          "./src/ts/characters/character_states/StartWalkForward.ts": function (
            e,
            t,
            n
          ) {
            "use strict";
            Object.defineProperty(t, "__esModule", { value: !0 });
            var i = (function (e) {
              function t(e) {
                var n;
                return (
                  f(this, t),
                  ((n = c(this, h(t).call(this, e))).animationLength =
                    e.setAnimation("start_forward", 0.1)),
                  n
                );
              }
              return p(t, e), t;
            })(
              n("./src/ts/characters/character_states/_stateLibrary.ts")
                .StartWalkBase
            );
            t.StartWalkForward = i;
          },
          "./src/ts/characters/character_states/StartWalkLeft.ts": function (
            e,
            t,
            n
          ) {
            "use strict";
            Object.defineProperty(t, "__esModule", { value: !0 });
            var i = (function (e) {
              function t(e) {
                var n;
                return (
                  f(this, t),
                  ((n = c(this, h(t).call(this, e))).animationLength =
                    e.setAnimation("start_left", 0.1)),
                  n
                );
              }
              return p(t, e), t;
            })(
              n("./src/ts/characters/character_states/_stateLibrary.ts")
                .StartWalkBase
            );
            t.StartWalkLeft = i;
          },
          "./src/ts/characters/character_states/StartWalkRight.ts": function (
            e,
            t,
            n
          ) {
            "use strict";
            Object.defineProperty(t, "__esModule", { value: !0 });
            var i = (function (e) {
              function t(e) {
                var n;
                return (
                  f(this, t),
                  ((n = c(this, h(t).call(this, e))).animationLength =
                    e.setAnimation("start_right", 6)),
                  n
                );
              }
              return p(t, e), t;
            })(
              n("./src/ts/characters/character_states/_stateLibrary.ts")
                .StartWalkBase
            );
            t.StartWalkRight = i;
          },
          "./src/ts/characters/character_states/Walk.ts": function (e, t, n) {
            "use strict";
            Object.defineProperty(t, "__esModule", { value: !0 });
            var i = n("./src/ts/characters/character_states/_stateLibrary.ts"),
              r = (function (e) {
                function t(e) {
                  var n;
                  return (
                    f(this, t),
                    ((n = c(this, h(t).call(this, e))).canEnterVehicles = !0),
                    n.character.setArcadeVelocityTarget(6),
                    n.character.setAnimation("run", 6),
                    n
                  );
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "update",
                      value: function (e) {
                        l(h(t.prototype), "update", this).call(this, e),
                          this.character.setCameraRelativeOrientationTarget(),
                          this.fallInAir();
                      },
                    },
                    {
                      key: "onInputChange",
                      value: function () {
                        l(h(t.prototype), "onInputChange", this).call(this),
                          this.noDirection() &&
                            this.character.setState(
                              new i.EndWalk(this.character)
                            ),
                          this.character.actions.dance.justPressed &&
                            this.character.setState(
                              new i.Dance(this.character)
                            ),
                          this.character.actions.run.isPressed &&
                            this.character.setState(
                              new i.Sprint(this.character)
                            ),
                          this.character.actions.run.justPressed &&
                            this.character.setState(
                              new i.Sprint(this.character)
                            ),
                          this.character.actions.jump.justPressed &&
                            this.character.setState(
                              new i.JumpRunning(this.character)
                            ),
                          this.noDirection() &&
                            (this.character.velocity.length() > 1
                              ? this.character.setState(
                                  new i.EndWalk(this.character)
                                )
                              : this.character.setState(
                                  new i.Idle(this.character)
                                ));
                      },
                    },
                  ]),
                  t
                );
              })(i.CharacterStateBase);
            t.Walk = r;
          },
          "./src/ts/characters/character_states/_stateLibrary.ts": function (
            e,
            t,
            n
          ) {
            "use strict";
            function i(e) {
              for (var n in e) t.hasOwnProperty(n) || (t[n] = e[n]);
            }
            Object.defineProperty(t, "__esModule", { value: !0 }),
              i(
                n("./src/ts/characters/character_states/CharacterStateBase.ts")
              ),
              i(n("./src/ts/characters/character_states/DropIdle.ts")),
              i(n("./src/ts/characters/character_states/DropRolling.ts")),
              i(n("./src/ts/characters/character_states/DropRunning.ts")),
              i(n("./src/ts/characters/character_states/EndWalk.ts")),
              i(n("./src/ts/characters/character_states/Falling.ts")),
              i(n("./src/ts/characters/character_states/Idle.ts")),
              i(n("./src/ts/characters/character_states/IdleRotateLeft.ts")),
              i(n("./src/ts/characters/character_states/IdleRotateRight.ts")),
              i(n("./src/ts/characters/character_states/JumpIdle.ts")),
              i(n("./src/ts/characters/character_states/JumpRunning.ts")),
              i(n("./src/ts/characters/character_states/Sprint.ts")),
              i(n("./src/ts/characters/character_states/StartWalkBase.ts")),
              i(n("./src/ts/characters/character_states/StartWalkBackLeft.ts")),
              i(
                n("./src/ts/characters/character_states/StartWalkBackRight.ts")
              ),
              i(n("./src/ts/characters/character_states/StartWalkForward.ts")),
              i(n("./src/ts/characters/character_states/StartWalkLeft.ts")),
              i(n("./src/ts/characters/character_states/StartWalkRight.ts")),
              i(n("./src/ts/characters/character_states/Walk.ts")),
              i(n("./src/ts/characters/character_states/Dance.ts"));
          },
          "./src/ts/characters/character_states/vehicles/CloseVehicleDoorInside.ts":
            function (e, t, n) {
              "use strict";
              Object.defineProperty(t, "__esModule", { value: !0 });
              var i = n(
                  "./src/ts/characters/character_states/_stateLibrary.ts"
                ),
                r = n("./src/ts/enums/Side.ts"),
                a = n("./src/ts/characters/character_states/Sitting.ts"),
                o = (function (e) {
                  function t(e, n) {
                    var i;
                    return (
                      f(this, t),
                      ((i = c(this, h(t).call(this, e))).seat = n),
                      (i.canFindVehiclesToEnter = !1),
                      (i.canLeaveVehicles = !1),
                      n.doorSide === r.Side.Left
                        ? (i.animationLength = i.character.setAnimation(
                            "close_door_sitting_left",
                            0.1
                          ))
                        : n.doorSide === r.Side.Right &&
                          (i.animationLength = i.character.setAnimation(
                            "close_door_sitting_right",
                            0.1
                          )),
                      i
                    );
                  }
                  return (
                    p(t, e),
                    m(t, [
                      {
                        key: "update",
                        value: function (e) {
                          l(h(t.prototype), "update", this).call(this, e),
                            this.timer > 0.3 && this.seat.closeDoor(),
                            this.timer > this.animationLength - e &&
                              this.character.setState(
                                new a.Sitting(this.character)
                              );
                        },
                      },
                    ]),
                    t
                  );
                })(i.CharacterStateBase);
              t.CloseVehicleDoorInside = o;
            },
          "./src/ts/characters/character_states/vehicles/CloseVehicleDoorOutside.ts":
            function (e, t, n) {
              "use strict";
              Object.defineProperty(t, "__esModule", { value: !0 });
              var i = n(
                  "./src/ts/characters/character_states/_stateLibrary.ts"
                ),
                r = n("./src/ts/enums/Side.ts"),
                a = n("./src/ts/characters/character_states/Idle.ts"),
                o = (function (e) {
                  function t(e, n) {
                    var i;
                    return (
                      f(this, t),
                      ((i = c(this, h(t).call(this, e))).seat = n),
                      (i.canFindVehiclesToEnter = !1),
                      n.doorSide === r.Side.Left
                        ? (i.animationLength = i.character.setAnimation(
                            "close_door_standing_right",
                            0.1
                          ))
                        : n.doorSide === r.Side.Right &&
                          (i.animationLength = i.character.setAnimation(
                            "close_door_standing_left",
                            0.1
                          )),
                      i
                    );
                  }
                  return (
                    p(t, e),
                    m(t, [
                      {
                        key: "update",
                        value: function (e) {
                          l(h(t.prototype), "update", this).call(this, e),
                            this.timer > 0.3 && this.seat.closeDoor(),
                            this.timer > this.animationLength - e &&
                              this.character.setState(
                                new a.Idle(this.character)
                              );
                        },
                      },
                    ]),
                    t
                  );
                })(i.CharacterStateBase);
              t.CloseVehicleDoorOutside = o;
            },
          "./src/ts/characters/character_states/vehicles/EnteringVehicle.ts":
            function (e, t, n) {
              "use strict";
              Object.defineProperty(t, "__esModule", { value: !0 });
              var i = n(
                  "./src/ts/characters/character_states/_stateLibrary.ts"
                ),
                r = n("./node_modules/three/build/three.module.js"),
                a = n("./src/ts/characters/character_states/Sitting.ts"),
                o = n("./src/ts/enums/Side.ts"),
                s = n(
                  "./src/ts/characters/character_states/vehicles/CloseVehicleDoorInside.ts"
                ),
                u = (function (e) {
                  function t(e, n) {
                    var i;
                    return (
                      f(this, t),
                      ((i = c(this, h(t).call(this, e))).startPosition =
                        new r.Vector3()),
                      (i.endPosition = new r.Vector3()),
                      (i.startRotation = new r.Quaternion()),
                      (i.endRotation = new r.Quaternion()),
                      (i.canFindVehiclesToEnter = !1),
                      (i.vehicle = n.vehicle),
                      (i.seat = n),
                      (i.animationLength = 1),
                      n.doorSide === o.Side.Left
                        ? (i.animationLength = i.character.setAnimation(
                            "sit_down_right",
                            0.1
                          ))
                        : n.doorSide === o.Side.Right &&
                          (i.animationLength = i.character.setAnimation(
                            "sit_down_left",
                            0.1
                          )),
                      i.character.resetVelocity(),
                      i.character.rotateModel(),
                      i.character.setPhysicsEnabled(!1),
                      i.seat.vehicle.attach(i.character),
                      i.startPosition.copy(i.character.position),
                      i.endPosition.copy(n.seatPoint.position),
                      (i.endPosition.y += 0.6),
                      i.startRotation.copy(i.character.quaternion),
                      i.endRotation.copy(i.seat.seatPoint.quaternion),
                      i
                    );
                  }
                  return (
                    p(t, e),
                    m(t, [
                      {
                        key: "update",
                        value: function (e) {
                          l(h(t.prototype), "update", this).call(this, e),
                            this.timer > this.animationLength - e &&
                              (this.character.setPosition(
                                this.endPosition.x,
                                this.endPosition.y,
                                this.endPosition.z
                              ),
                              this.character.startControllingVehicle(
                                this.vehicle,
                                this.seat
                              ),
                              this.anyDirection() || void 0 === this.seat.door
                                ? this.character.setState(
                                    new a.Sitting(this.character)
                                  )
                                : this.character.setState(
                                    new s.CloseVehicleDoorInside(
                                      this.character,
                                      this.seat
                                    )
                                  ));
                          var n = this.timer / this.animationLength,
                            i = 1 - (0.5 * Math.cos(n * Math.PI) + 0.5),
                            o = new r.Vector3().lerpVectors(
                              this.startPosition,
                              this.endPosition,
                              i
                            );
                          this.character.setPosition(o.x, o.y, o.z);
                        },
                      },
                    ]),
                    t
                  );
                })(i.CharacterStateBase);
              t.EnteringVehicle = u;
            },
          "./src/ts/characters/character_states/vehicles/ExitingVehicle.ts":
            function (e, t, n) {
              "use strict";
              Object.defineProperty(t, "__esModule", { value: !0 });
              var i = n(
                  "./src/ts/characters/character_states/_stateLibrary.ts"
                ),
                r = n("./src/ts/enums/Side.ts"),
                a = n("./node_modules/three/build/three.module.js"),
                o = n("./src/ts/characters/character_states/Idle.ts"),
                s = n(
                  "./src/ts/characters/character_states/vehicles/CloseVehicleDoorOutside.ts"
                ),
                u = (function (e) {
                  function t(e, n, i) {
                    var o;
                    return (
                      f(this, t),
                      ((o = c(this, h(t).call(this, e))).startPosition =
                        new a.Vector3()),
                      (o.endPosition = new a.Vector3()),
                      (o.startRotation = new a.Quaternion()),
                      (o.endRotation = new a.Quaternion()),
                      (o.canFindVehiclesToEnter = !1),
                      (o.vehicle = n),
                      (o.seat = i),
                      o.seat.openDoor(),
                      o.startPosition.copy(o.character.position),
                      o.endPosition.copy(i.entryPoint.position),
                      (o.endPosition.y += 0.6),
                      o.startRotation.copy(o.character.quaternion),
                      o.endRotation.copy(i.entryPoint.quaternion),
                      i.doorSide === r.Side.Left
                        ? (o.animationLength = o.character.setAnimation(
                            "stand_up_left",
                            0.1
                          ))
                        : i.doorSide === r.Side.Right &&
                          (o.animationLength = o.character.setAnimation(
                            "stand_up_right",
                            0.1
                          )),
                      o
                    );
                  }
                  return (
                    p(t, e),
                    m(t, [
                      {
                        key: "update",
                        value: function (e) {
                          if (
                            (l(h(t.prototype), "update", this).call(this, e),
                            this.timer > this.animationLength - e)
                          )
                            (this.character.controlledObject = void 0),
                              (this.character.controlledObjectSeat = void 0),
                              (this.vehicle.controllingCharacter = void 0),
                              this.character.world.graphicsWorld.attach(
                                this.character
                              ),
                              this.character.resetVelocity(),
                              this.character.resetOrientation(),
                              this.character.setPhysicsEnabled(!0),
                              this.anyDirection() || void 0 === this.seat.door
                                ? this.character.setState(
                                    new o.Idle(this.character)
                                  )
                                : this.character.setState(
                                    new s.CloseVehicleDoorOutside(
                                      this.character,
                                      this.seat
                                    )
                                  );
                          else {
                            var n = this.timer / this.animationLength,
                              i = 1 - (0.5 * Math.cos(n * Math.PI) + 0.5),
                              r = new a.Vector3().lerpVectors(
                                this.startPosition,
                                this.endPosition,
                                i
                              );
                            this.character.setPosition(r.x, r.y, r.z);
                          }
                        },
                      },
                    ]),
                    t
                  );
                })(i.CharacterStateBase);
              t.ExitingVehicle = u;
            },
          "./src/ts/characters/character_states/vehicles/OpenVehicleDoor.ts":
            function (e, t, n) {
              "use strict";
              Object.defineProperty(t, "__esModule", { value: !0 });
              var i = n(
                  "./src/ts/characters/character_states/_stateLibrary.ts"
                ),
                r = n("./src/ts/enums/Side.ts"),
                a = n("./src/ts/characters/character_states/Idle.ts"),
                o = n(
                  "./src/ts/characters/character_states/vehicles/EnteringVehicle.ts"
                ),
                s = n("./node_modules/three/build/three.module.js"),
                u = (function (e) {
                  function t(e, n) {
                    var i;
                    return (
                      f(this, t),
                      ((i = c(
                        this,
                        h(t).call(this, e)
                      )).canFindVehiclesToEnter = !1),
                      (i.seat = n),
                      n.doorSide === r.Side.Left
                        ? (i.animationLength = i.character.setAnimation(
                            "open_door_standing_right",
                            0.1
                          ))
                        : n.doorSide === r.Side.Right &&
                          (i.animationLength = i.character.setAnimation(
                            "open_door_standing_left",
                            0.1
                          )),
                      i.character.resetVelocity(),
                      i
                    );
                  }
                  return (
                    p(t, e),
                    m(t, [
                      {
                        key: "update",
                        value: function (e) {
                          l(h(t.prototype), "update", this).call(this, e);
                          var n = this.seat.entryPoint.matrixWorld.elements,
                            i = new s.Vector3(n[8], n[9], n[10]);
                          this.character.setOrientation(i),
                            this.timer > 0.3 && this.seat.openDoor(),
                            this.timer > this.animationLength - e &&
                              (this.anyDirection()
                                ? this.character.setState(
                                    new a.Idle(this.character)
                                  )
                                : this.character.setState(
                                    new o.EnteringVehicle(
                                      this.character,
                                      this.seat
                                    )
                                  ));
                        },
                      },
                    ]),
                    t
                  );
                })(i.CharacterStateBase);
              t.OpenVehicleDoor = u;
            },
          "./src/ts/characters/customization/hats.json": function (e) {
            e.exports = JSON.parse(
              '[{"id":"crown_red","name":"Crown","url":"/build/assets/hats/crown_red.glb","scaleFactor":0.7,"positionOffset":{"x":0,"y":0.03,"z":0}},{"id":"santa","name":"Crown","url":"/build/assets/hats/santa.glb","scaleFactor":0.5,"positionOffset":{"x":0,"y":0,"z":0}}]'
            );
          },
          "./src/ts/core/CameraOperator.ts": function (e, t, n) {
            "use strict";
            Object.defineProperty(t, "__esModule", { value: !0 });
            var i = n("./node_modules/three/build/three.module.js"),
              r = n("./src/ts/core/KeyBinding.ts"),
              a = n("./node_modules/lodash/lodash.js"),
              o = (function () {
                function e(t, n) {
                  var a =
                      arguments.length > 2 && void 0 !== arguments[2]
                        ? arguments[2]
                        : 1,
                    o =
                      arguments.length > 3 && void 0 !== arguments[3]
                        ? arguments[3]
                        : 0.8 * a;
                  f(this, e),
                    (this.radius = 1),
                    (this.targetRadius = 1),
                    (this.upVelocity = 0),
                    (this.forwardVelocity = 0),
                    (this.rightVelocity = 0),
                    (this.followMode = !1),
                    (this.desiredDistance = 0),
                    (this.wasCameraObstructed = !1),
                    (this.world = t),
                    (this.camera = n),
                    (this.target = new i.Vector3()),
                    (this.sensitivity = new i.Vector2(a, o)),
                    (this.movementSpeed = 0.06),
                    (this.radius = 3),
                    (this.theta = 0),
                    (this.phi = 90),
                    (this.onMouseDownPosition = new i.Vector2()),
                    (this.onMouseDownTheta = this.theta),
                    (this.onMouseDownPhi = this.phi),
                    (this.raycaster = new i.Raycaster()),
                    (this.rayDirection = new i.Vector3()),
                    (this.raycastDesiredPosition = new i.Vector3()),
                    (this.mouseDesiredPosition = new i.Vector3()),
                    (this.actions = {
                      forward: new r.KeyBinding("KeyW"),
                      back: new r.KeyBinding("KeyS"),
                      left: new r.KeyBinding("KeyA"),
                      right: new r.KeyBinding("KeyD"),
                      up: new r.KeyBinding("KeyE"),
                      down: new r.KeyBinding("KeyQ"),
                      fast: new r.KeyBinding("ShiftLeft"),
                    });
                }
                return (
                  m(e, [
                    {
                      key: "setSensitivity",
                      value: function (e) {
                        var t =
                          arguments.length > 1 && void 0 !== arguments[1]
                            ? arguments[1]
                            : e;
                        this.sensitivity = new i.Vector2(e, t);
                      },
                    },
                    {
                      key: "setRadius",
                      value: function (e) {
                        var t =
                          arguments.length > 1 &&
                          void 0 !== arguments[1] &&
                          arguments[1];
                        (this.targetRadius = Math.max(0.001, e)),
                          !0 === t && (this.radius = e);
                      },
                    },
                    {
                      key: "move",
                      value: function (e, t) {
                        (this.theta -= e * (this.sensitivity.x / 2)),
                          (this.theta %= 360),
                          (this.phi += t * (this.sensitivity.y / 2)),
                          (this.phi = Math.min(85, Math.max(-85, this.phi)));
                      },
                    },
                    {
                      key: "update",
                      value: function () {
                        if (!0 === this.followMode) {
                          (this.camera.position.y = i.MathUtils.clamp(
                            this.camera.position.y,
                            this.target.y,
                            Number.POSITIVE_INFINITY
                          )),
                            this.camera.lookAt(this.target);
                          var e = this.target
                            .clone()
                            .add(
                              new i.Vector3()
                                .subVectors(this.camera.position, this.target)
                                .normalize()
                                .multiplyScalar(this.targetRadius)
                            );
                          (this.camera.position.x = e.x),
                            (this.camera.position.y = e.y),
                            (this.camera.position.z = e.z);
                        } else {
                          (this.radius = i.MathUtils.lerp(
                            this.radius,
                            this.targetRadius,
                            0.1
                          )),
                            (this.mouseDesiredPosition.x =
                              this.target.x +
                              this.radius *
                                Math.sin((this.theta * Math.PI) / 180) *
                                Math.cos((this.phi * Math.PI) / 180)),
                            (this.mouseDesiredPosition.y =
                              this.target.y +
                              this.radius *
                                Math.sin(
                                  (Math.max(this.phi, 0) * Math.PI) / 180
                                )),
                            (this.mouseDesiredPosition.z =
                              this.target.z +
                              this.radius *
                                Math.cos((this.theta * Math.PI) / 180) *
                                Math.cos((this.phi * Math.PI) / 180)),
                            (this.desiredDistance =
                              this.mouseDesiredPosition.distanceTo(
                                this.target
                              )),
                            this.rayDirection.subVectors(
                              this.mouseDesiredPosition,
                              this.target
                            ),
                            this.rayDirection.normalize(),
                            this.raycaster.set(this.target, this.rayDirection);
                          for (
                            var t = this.raycaster.intersectObjects(
                                this.world.raycastObjects
                              ),
                              n = !1,
                              r = 0;
                            r < t.length;
                            r++
                          ) {
                            var a = t[r];
                            a.distance < this.desiredDistance &&
                              a.distance < this.radius &&
                              ((n = !0),
                              (this.wasCameraObstructed = !0),
                              this.raycastDesiredPosition.copy(t[r].point));
                            break;
                          }
                          n
                            ? this.camera.position.copy(
                                this.raycastDesiredPosition
                              )
                            : this.camera.position.copy(
                                this.mouseDesiredPosition
                              ),
                            this.camera.updateMatrix(),
                            this.camera.lookAt(
                              this.target.x,
                              this.target.y + 0.3,
                              this.target.z
                            );
                        }
                      },
                    },
                    {
                      key: "handleKeyboardEvent",
                      value: function (e, t, n) {
                        if ("KeyC" === t && !0 === n && !0 === e.shiftKey);
                        else
                          for (var i in this.actions)
                            if (this.actions.hasOwnProperty(i)) {
                              var r = this.actions[i];
                              a.includes(r.eventCodes, t) && (r.isPressed = n);
                            }
                      },
                    },
                    {
                      key: "handleMouseWheel",
                      value: function (e, t) {
                        this.world.scrollTheTimeScale(t);
                      },
                    },
                    {
                      key: "handleMouseButton",
                      value: function (e, t, n) {
                        for (var i in this.actions)
                          if (this.actions.hasOwnProperty(i)) {
                            var r = this.actions[i];
                            a.includes(r.eventCodes, t) && (r.isPressed = n);
                          }
                      },
                    },
                    {
                      key: "handleMouseMove",
                      value: function (e, t, n) {
                        this.move(t, n);
                      },
                    },
                    {
                      key: "inputReceiverInit",
                      value: function () {
                        this.target.copy(this.camera.position),
                          this.setRadius(0, !0);
                      },
                    },
                    {
                      key: "inputReceiverUpdate",
                      value: function (e) {
                        var t =
                            this.movementSpeed *
                            (this.actions.fast.isPressed ? 600 : 60),
                          n = this.world.cameraOperator.camera.matrix.elements,
                          r = new i.Vector3(n[4], n[5], n[6]),
                          a = new i.Vector3(-n[8], -n[9], -n[10]),
                          o = new i.Vector3(n[0], n[1], n[2]);
                        (this.upVelocity = i.MathUtils.lerp(
                          this.upVelocity,
                          +this.actions.up.isPressed -
                            +this.actions.down.isPressed,
                          0.3
                        )),
                          (this.forwardVelocity = i.MathUtils.lerp(
                            this.forwardVelocity,
                            +this.actions.forward.isPressed -
                              +this.actions.back.isPressed,
                            0.3
                          )),
                          (this.rightVelocity = i.MathUtils.lerp(
                            this.rightVelocity,
                            +this.actions.right.isPressed -
                              +this.actions.left.isPressed,
                            0.3
                          )),
                          this.world.cameraOperator.target.add(
                            r.multiplyScalar(t * e * this.upVelocity)
                          ),
                          this.world.cameraOperator.target.add(
                            a.multiplyScalar(t * e * this.forwardVelocity)
                          ),
                          this.world.cameraOperator.target.add(
                            o.multiplyScalar(t * e * this.rightVelocity)
                          );
                      },
                    },
                  ]),
                  e
                );
              })();
            t.CameraOperator = o;
          },
          "./src/ts/core/InputManager.ts": function (e, t, n) {
            "use strict";
            Object.defineProperty(t, "__esModule", { value: !0 });
            var i = (function () {
              function e(t, n) {
                var i = this;
                f(this, e),
                  (this.touchXStart = 0),
                  (this.touchYStart = 0),
                  (this.onMouseOut = function () {
                    i.domElement.removeEventListener(
                      "mousemove",
                      i.boundOnMouseMove,
                      !1
                    ),
                      i.domElement.removeEventListener(
                        "mouseup",
                        i.boundOnMouseUp,
                        !1
                      );
                  }),
                  (this.world = t),
                  (this.domElement = n || document.body),
                  (this.pointerLock = this.world.params.Pointer_Lock),
                  (this.isLocked = !1),
                  (this.boundOnMouseDown = function (e) {
                    return i.onMouseDown(e);
                  }),
                  (this.boundOnMouseMove = function (e) {
                    return i.onMouseMove(e);
                  }),
                  (this.boundOnMouseUp = function (e) {
                    return i.onMouseUp(e);
                  }),
                  (this.boundOnMouseWheelMove = function (e) {
                    return i.onMouseWheelMove(e);
                  }),
                  (this.boundOnPointerlockChange = function (e) {
                    return i.onPointerlockChange(e);
                  }),
                  (this.boundOnPointerlockError = function (e) {
                    return i.onPointerlockError(e);
                  }),
                  (this.boundOnKeyDown = function (e) {
                    return i.onKeyDown(e);
                  }),
                  (this.boundOnKeyUp = function (e) {
                    return i.onKeyUp(e);
                  }),
                  this.domElement.addEventListener(
                    "mousedown",
                    this.boundOnMouseDown,
                    !1
                  ),
                  document.addEventListener(
                    "wheel",
                    this.boundOnMouseWheelMove,
                    !1
                  ),
                  document.addEventListener(
                    "pointerlockchange",
                    this.boundOnPointerlockChange,
                    !1
                  ),
                  document.addEventListener(
                    "pointerlockerror",
                    this.boundOnPointerlockError,
                    !1
                  ),
                  document.addEventListener("keydown", this.boundOnKeyDown, !1),
                  document.addEventListener("keyup", this.boundOnKeyUp, !1);
              }
              return (
                m(e, [
                  {
                    key: "setDomElement",
                    value: function (e) {
                      this.domElement.removeEventListener(
                        "mousedown",
                        this.boundOnMouseDown,
                        !1
                      ),
                        this.domElement.removeEventListener(
                          "mousemove",
                          this.boundOnMouseMove,
                          !1
                        ),
                        this.domElement.removeEventListener(
                          "mouseup",
                          this.boundOnMouseUp,
                          !1
                        ),
                        (this.domElement = e),
                        this.domElement.addEventListener(
                          "mousedown",
                          this.boundOnMouseDown,
                          !1
                        );
                    },
                  },
                  {
                    key: "isMobileButton",
                    value: function (e) {
                      var t;
                      return !!(null === (t = e.target.className) ||
                      void 0 === t
                        ? void 0
                        : t.includes("material-icons"));
                    },
                  },
                  {
                    key: "update",
                    value: function (e) {
                      void 0 === this.inputReceiver &&
                        void 0 !== this.world &&
                        void 0 !== this.world.cameraOperator &&
                        this.setInputReceiver(this.world.cameraOperator),
                        void 0 !== this.inputReceiver &&
                          this.inputReceiver.inputReceiverUpdate(e);
                    },
                  },
                  {
                    key: "enableTouchControls",
                    value: function (e) {
                      var t = this;
                      e.addEventListener(
                        "touchstart",
                        function (e) {
                          for (var n = 0; n < e.touches.length; n++)
                            t.isMobileButton(e.touches[n]) ||
                              ((t.touchXStart = e.touches[n].pageX),
                              (t.touchYStart = e.touches[n].pageY));
                        },
                        !1
                      ),
                        e.addEventListener(
                          "touchmove",
                          function (e) {
                            for (var n = 0; n < e.touches.length; n++)
                              if (!t.isMobileButton(e.touches[n])) {
                                var i = t.touchXStart - e.touches[n].pageX,
                                  r = t.touchYStart - e.touches[n].pageY;
                                (t.touchXStart = e.touches[n].pageX),
                                  (t.touchYStart = e.touches[n].pageY),
                                  t.inputReceiver.handleMouseMove(e, -i, -r);
                              }
                          },
                          !1
                        );
                    },
                  },
                  {
                    key: "handleMouseMove",
                    value: function (e, t) {
                      this.inputReceiver.handleMouseMove(void 0, -e, -t);
                    },
                  },
                  {
                    key: "setInputReceiver",
                    value: function (e) {
                      (this.inputReceiver = e),
                        this.inputReceiver.inputReceiverInit();
                    },
                  },
                  {
                    key: "setPointerLock",
                    value: function (e) {
                      this.pointerLock = e;
                    },
                  },
                  {
                    key: "onPointerlockChange",
                    value: function (e) {
                      document.pointerLockElement === this.domElement
                        ? (this.domElement.addEventListener(
                            "mousemove",
                            this.boundOnMouseMove,
                            !1
                          ),
                          this.domElement.addEventListener(
                            "mouseup",
                            this.boundOnMouseUp,
                            !1
                          ),
                          (this.isLocked = !0))
                        : (this.domElement.removeEventListener(
                            "mousemove",
                            this.boundOnMouseMove,
                            !1
                          ),
                          this.domElement.removeEventListener(
                            "mouseup",
                            this.boundOnMouseUp,
                            !1
                          ),
                          (this.isLocked = !1));
                    },
                  },
                  {
                    key: "onPointerlockError",
                    value: function (e) {
                      console.error(
                        "PointerLockControls: Unable to use Pointer Lock API"
                      );
                    },
                  },
                  {
                    key: "onMouseDown",
                    value: function (e) {
                      this.pointerLock &&
                        0 == e.button &&
                        this.domElement.requestPointerLock(),
                        1 == e.button &&
                          (this.domElement.addEventListener(
                            "mousemove",
                            this.boundOnMouseMove,
                            !1
                          ),
                          this.domElement.addEventListener(
                            "mouseup",
                            this.boundOnMouseUp,
                            !1
                          ),
                          this.domElement.addEventListener(
                            "mouseout",
                            this.onMouseOut,
                            !1
                          )),
                        void 0 !== this.inputReceiver &&
                          this.inputReceiver.handleMouseButton(
                            e,
                            "mouse" + e.button,
                            !0
                          );
                    },
                  },
                  {
                    key: "onMouseMove",
                    value: function (e) {
                      void 0 !== this.inputReceiver &&
                        this.inputReceiver.handleMouseMove(
                          e,
                          e.movementX,
                          e.movementY
                        );
                    },
                  },
                  {
                    key: "onMouseUp",
                    value: function (e) {
                      1 == e.button &&
                        (this.domElement.removeEventListener(
                          "mousemove",
                          this.boundOnMouseMove,
                          !1
                        ),
                        this.domElement.removeEventListener(
                          "mouseup",
                          this.boundOnMouseUp,
                          !1
                        )),
                        void 0 !== this.inputReceiver &&
                          this.inputReceiver.handleMouseButton(
                            e,
                            "mouse" + e.button,
                            !1
                          );
                    },
                  },
                  {
                    key: "onKeyDown",
                    value: function (e) {
                      void 0 !== this.inputReceiver &&
                        this.inputReceiver.handleKeyboardEvent(e, e.code, !0);
                    },
                  },
                  {
                    key: "onKeyUp",
                    value: function (e) {
                      void 0 !== this.inputReceiver &&
                        this.inputReceiver.handleKeyboardEvent(e, e.code, !1);
                    },
                  },
                  {
                    key: "onMouseWheelMove",
                    value: function (e) {
                      void 0 !== this.inputReceiver &&
                        this.inputReceiver.handleMouseWheel(e, e.deltaY);
                    },
                  },
                ]),
                e
              );
            })();
            t.InputManager = i;
          },
          "./src/ts/core/KeyBinding.ts": function (e, t, n) {
            "use strict";
            Object.defineProperty(t, "__esModule", { value: !0 }),
              (t.KeyBinding = function e() {
                f(this, e),
                  (this.isPressed = !1),
                  (this.justPressed = !1),
                  (this.justReleased = !1);
                for (
                  var t = arguments.length, n = new Array(t), i = 0;
                  i < t;
                  i++
                )
                  n[i] = arguments[i];
                this.eventCodes = n;
              });
          },
          "./src/ts/core/LoadingManager.ts": function (e, t, n) {
            "use strict";
            Object.defineProperty(t, "__esModule", { value: !0 });
            var i = n(
                "./node_modules/three/examples/jsm/loaders/GLTFLoader.js"
              ),
              r = n("./src/ts/core/LoadingTrackerEntry.ts"),
              a = (function () {
                function e(t) {
                  f(this, e),
                    (this.firstLoad = !0),
                    (this.loadingTracker = []),
                    (this.world = t),
                    (this.gltfLoader = new i.GLTFLoader());
                }
                return (
                  m(e, [
                    {
                      key: "loadGLTF",
                      value: function (e, t) {
                        var n = this,
                          i = this.addLoadingEntry(e);
                        this.gltfLoader.load(
                          e,
                          function (e) {
                            t(e), n.doneLoading(i);
                          },
                          function (e) {
                            e.lengthComputable &&
                              (i.progress = e.loaded / e.total);
                          },
                          function (e) {
                            console.error(e);
                          }
                        );
                      },
                    },
                    {
                      key: "addLoadingEntry",
                      value: function (e) {
                        var t = new r.LoadingTrackerEntry(e);
                        return this.loadingTracker.push(t), t;
                      },
                    },
                    {
                      key: "doneLoading",
                      value: function (e) {
                        (e.finished = !0),
                          (e.progress = 1),
                          this.isLoadingDone() &&
                            void 0 !== this.onFinishedCallback &&
                            this.onFinishedCallback();
                      },
                    },
                    {
                      key: "getLoadingPercentage",
                      value: function () {
                        var e = 0,
                          t = 0,
                          n = !0,
                          i = !1,
                          r = void 0;
                        try {
                          for (
                            var a, o = this.loadingTracker[Symbol.iterator]();
                            !(n = (a = o.next()).done);
                            n = !0
                          ) {
                            var s = a.value;
                            e++, (t += s.progress), s.finished;
                          }
                        } catch (l) {
                          (i = !0), (r = l);
                        } finally {
                          try {
                            n || null == o.return || o.return();
                          } finally {
                            if (i) throw r;
                          }
                        }
                        return (t / e) * 100;
                      },
                    },
                    {
                      key: "isLoadingDone",
                      value: function () {
                        var e = !0,
                          t = !1,
                          n = void 0;
                        try {
                          for (
                            var i, r = this.loadingTracker[Symbol.iterator]();
                            !(e = (i = r.next()).done);
                            e = !0
                          )
                            if (!i.value.finished) return !1;
                        } catch (a) {
                          (t = !0), (n = a);
                        } finally {
                          try {
                            e || null == r.return || r.return();
                          } finally {
                            if (t) throw n;
                          }
                        }
                        return !0;
                      },
                    },
                  ]),
                  e
                );
              })();
            t.LoadingManager = a;
          },
          "./src/ts/core/LoadingTrackerEntry.ts": function (e, t, n) {
            "use strict";
            Object.defineProperty(t, "__esModule", { value: !0 }),
              (t.LoadingTrackerEntry = function e(t) {
                f(this, e),
                  (this.progress = 0),
                  (this.finished = !1),
                  (this.path = t);
              });
          },
          "./src/ts/core/Utilities.ts": function (e, t, n) {
            "use strict";
            Object.defineProperty(t, "__esModule", { value: !0 });
            var i = n("./node_modules/three/build/three.module.js"),
              r = n("./src/lib/cannon/cannon.js"),
              a = n("./node_modules/lodash/lodash.js"),
              o = n("./src/ts/simulation/SimulationFrame.ts"),
              s = n("./node_modules/three/examples/jsm/deprecated/Geometry.js");
            (t.createCapsuleGeometry = function () {
              for (
                var e =
                    arguments.length > 0 && void 0 !== arguments[0]
                      ? arguments[0]
                      : 1,
                  t =
                    arguments.length > 1 && void 0 !== arguments[1]
                      ? arguments[1]
                      : 2,
                  n =
                    arguments.length > 2 && void 0 !== arguments[2]
                      ? arguments[2]
                      : 32,
                  r = new s.Geometry(),
                  a = 2 * Math.PI,
                  o = 1.5707963267948966,
                  l = [],
                  u = 0;
                u <= n / 4;
                u++
              )
                for (var c = 0; c <= n; c++) {
                  var h = (c * a) / n,
                    d = -o + (Math.PI * u) / (n / 2),
                    p = new i.Vector3(),
                    f = new i.Vector3();
                  (p.x = e * Math.cos(d) * Math.cos(h)),
                    (p.y = e * Math.cos(d) * Math.sin(h)),
                    (p.z = e * Math.sin(d)),
                    (p.z -= t / 2),
                    (f.x = p.x),
                    (f.y = p.y),
                    (f.z = p.z),
                    r.vertices.push(p),
                    l.push(f);
                }
              for (var m = n / 4; m <= n / 2; m++)
                for (var v = 0; v <= n; v++) {
                  var g = (v * a) / n,
                    y = -o + (Math.PI * m) / (n / 2),
                    x = new i.Vector3(),
                    b = new i.Vector3();
                  (x.x = e * Math.cos(y) * Math.cos(g)),
                    (x.y = e * Math.cos(y) * Math.sin(g)),
                    (x.z = e * Math.sin(y)),
                    (x.z += t / 2),
                    (b.x = x.x),
                    (b.y = x.y),
                    (b.z = x.z),
                    r.vertices.push(x),
                    l.push(b);
                }
              for (var _ = 0; _ <= n / 2; _++)
                for (var w = 0; w < n; w++)
                  new i.Vector4(
                    _ * (n + 1) + w,
                    _ * (n + 1) + (w + 1),
                    (_ + 1) * (n + 1) + (w + 1),
                    (_ + 1) * (n + 1) + w
                  );
              return (
                r.rotateX(Math.PI / 2),
                r.computeVertexNormals(),
                r.computeFaceNormals(),
                r
              );
            }),
              (t.appplyVectorMatrixXZ = function (e, t) {
                return new i.Vector3(
                  e.x * t.z + e.z * t.x,
                  t.y,
                  e.z * t.z + -e.x * t.x
                );
              }),
              (t.round = function (e) {
                var t =
                  arguments.length > 1 && void 0 !== arguments[1]
                    ? arguments[1]
                    : 0;
                return Math.round(e * Math.pow(10, t)) / Math.pow(10, t);
              }),
              (t.roundVector = function (e) {
                var t =
                  arguments.length > 1 && void 0 !== arguments[1]
                    ? arguments[1]
                    : 0;
                return new i.Vector3(
                  this.round(e.x, t),
                  this.round(e.y, t),
                  this.round(e.z, t)
                );
              }),
              (t.getAngleBetweenVectors = function (e, t) {
                var n =
                    arguments.length > 2 && void 0 !== arguments[2]
                      ? arguments[2]
                      : 5e-4,
                  i = e.dot(t);
                return i > 1 - n ? 0 : i < -1 + n ? Math.PI / 2 : Math.acos(i);
              }),
              (t.getSignedAngleBetweenVectors = function (e, t) {
                var n =
                    arguments.length > 2 && void 0 !== arguments[2]
                      ? arguments[2]
                      : new i.Vector3(0, 1, 0),
                  r =
                    arguments.length > 3 && void 0 !== arguments[3]
                      ? arguments[3]
                      : 5e-4,
                  a = this.getAngleBetweenVectors(e, t, r),
                  o = new i.Vector3().crossVectors(e, t);
                return n.dot(o) < 0 && (a = -a), a;
              }),
              (t.haveSameSigns = function (e, t) {
                return e < 0 === t < 0;
              }),
              (t.haveDifferentSigns = function (e, t) {
                return e < 0 !== t < 0;
              }),
              (t.setDefaults = function (e, t) {
                return a.defaults({}, a.clone(e), t);
              }),
              (t.getGlobalProperties = function () {
                var e =
                    arguments.length > 0 && void 0 !== arguments[0]
                      ? arguments[0]
                      : "",
                  t = [],
                  n = window;
                for (var i in n) 0 === i.indexOf(e) && t.push(i);
                return t;
              }),
              (t.spring = function (e, t, n, i, r) {
                var a = t - e;
                n += a /= i;
                var s = e + (n *= r);
                return new o.SimulationFrame(s, n);
              }),
              (t.springV = function (e, t, n, r, a) {
                var o = new i.Vector3().subVectors(t, e);
                o.divideScalar(r), n.add(o), n.multiplyScalar(a), e.add(n);
              }),
              (t.GroundImpactData = function e() {
                f(this, e), (this.velocity = new i.Vector3());
              }),
              (t.threeVector = function (e) {
                return new i.Vector3(e.x, e.y, e.z);
              }),
              (t.cannonVector = function (e) {
                return new r.Vec3(e.x, e.y, e.z);
              }),
              (t.threeQuat = function (e) {
                return new i.Quaternion(e.x, e.y, e.z, e.w);
              }),
              (t.cannonQuat = function (e) {
                return new r.Quaternion(e.x, e.y, e.z, e.w);
              }),
              (t.setupMeshProperties = function (e) {
                if (
                  ((e.castShadow = !0),
                  (e.receiveShadow = !0),
                  null !== e.material.map)
                ) {
                  var t = new i.MeshPhongMaterial();
                  (t.shininess = 0),
                    (t.name = e.material.name),
                    (t.map = e.material.map),
                    (t.transparent = e.material.transparent),
                    (t.skinning = e.material.skinning),
                    (t.color = e.material.color),
                    (e.material = t);
                }
              });
          },
          "./src/ts/core/World.ts": function (e, t, n) {
            "use strict";
            var i =
              (this && this.__awaiter) ||
              function (e, t, n, i) {
                return new (n || (n = Promise))(function (r, a) {
                  function o(e) {
                    try {
                      l(i.next(e));
                    } catch (t) {
                      a(t);
                    }
                  }
                  function s(e) {
                    try {
                      l(i.throw(e));
                    } catch (t) {
                      a(t);
                    }
                  }
                  function l(e) {
                    var t;
                    e.done
                      ? r(e.value)
                      : ((t = e.value),
                        t instanceof n
                          ? t
                          : new n(function (e) {
                              e(t);
                            })).then(o, s);
                  }
                  l((i = i.apply(e, t || [])).next());
                });
              };
            Object.defineProperty(t, "__esModule", { value: !0 });
            var a = n("./node_modules/three/build/three.module.js"),
              o = n("./src/lib/cannon/cannon.js"),
              s = n("./src/ts/core/CameraOperator.ts"),
              l = n("./src/lib/shaders/FXAAShader.js"),
              u = n("./node_modules/@johh/three-effectcomposer/dist/index.js"),
              c = n("./src/lib/shaders/WaterShader.js"),
              h = n("./src/lib/utils/Detector.js"),
              d = n("./src/lib/utils/Stats.js"),
              p = n("./src/lib/utils/dat.gui.js"),
              v = n("./src/ts/core/InputManager.ts"),
              g = n("./src/ts/objects/SBObject.ts"),
              y = n("./src/ts/characters/Character.ts"),
              x = n("./src/ts/objects/object_physics/BoxPhysics.ts"),
              b = n("./src/ts/core/Utilities.ts"),
              _ = n("./src/ts/objects/object_physics/TrimeshPhysics.ts"),
              w = n("./src/ts/objects/Path.ts"),
              S = n("./src/ts/enums/CollisionGroups.ts"),
              E = n("./src/ts/core/LoadingManager.ts"),
              M = n("./src/ts/vehicles/Car.ts"),
              A = n("./src/ts/vehicles/Airplane.ts"),
              T = n("./src/ts/vehicles/Helicopter.ts"),
              C = n("./node_modules/three/build/three.module.js"),
              k = n("./src/ts/utils/threeUtils.ts"),
              P = (function () {
                function e(t) {
                  f(this, e),
                    (this.paths = {}),
                    (this.customUpdates = []),
                    (this.videoMap = new Map()),
                    (this.audioMap = new Map()),
                    (this.quality = 0.5),
                    (this.isProximityChatEnabled = !1),
                    (this.raycastObjects = []),
                    (this.defaultSkinGlbUrl = "/build/assets/boxman.glb");
                  var n = this;
                  t &&
                    t.initialCharacterSkinURL &&
                    (this.defaultSkinGlbUrl = t.initialCharacterSkinURL),
                    h.Detector.webgl || h.Detector.addGetWebGLMessage(),
                    (this.loadingManager = new E.LoadingManager(this)),
                    (this.renderer = new a.WebGLRenderer({ alpha: !0 })),
                    (this.renderer.outputEncoding = a.GammaEncoding),
                    this.renderer.setPixelRatio(window.devicePixelRatio),
                    this.renderer.setSize(
                      Math.floor(window.innerWidth * this.quality),
                      Math.floor(window.innerHeight * this.quality)
                    ),
                    document.body.appendChild(this.renderer.domElement),
                    (this.renderer.domElement.id = "canvas"),
                    (this.renderer.domElement.style.position = "absolute"),
                    (this.renderer.domElement.style.zIndex = "1"),
                    (this.renderer.domElement.style.top = "0"),
                    (this.renderer.domElement.style.width = "100%"),
                    (this.renderer.domElement.style.height = "100%"),
                    window.addEventListener(
                      "resize",
                      function () {
                        (n.camera.aspect =
                          window.innerWidth / window.innerHeight),
                          n.camera.updateProjectionMatrix();
                        var e = Math.floor(window.innerWidth * n.quality),
                          t = Math.floor(window.innerHeight * n.quality);
                        n.renderer.setSize(e, t, !1),
                          c.uniforms.resolution.value.set(
                            1 / (e * d),
                            1 / (t * d)
                          ),
                          n.composer.setSize(e * d, t * d);
                      },
                      !1
                    ),
                    (this.graphicsWorld = new a.Scene()),
                    (this.camera = new a.PerspectiveCamera(
                      45,
                      window.innerWidth / window.innerHeight,
                      0.1,
                      610
                    ));
                  var i = new a.AmbientLight(9415106);
                  this.graphicsWorld.add(i);
                  var r = new a.DirectionalLight(16777215, 0.1);
                  this.graphicsWorld.add(r);
                  var c = new u.ShaderPass(l.FXAAShader),
                    d =
                      void 0 !== window.devicePixelRatio
                        ? window.devicePixelRatio
                        : 1;
                  c.uniforms.resolution.value.set(
                    1 / (window.innerWidth * d),
                    1 / (window.innerHeight * d)
                  ),
                    (this.composer = new u.default(this.renderer)),
                    this.composer.addPass(
                      new u.RenderPass(this.graphicsWorld, this.camera)
                    ),
                    (this.physicsWorld = new o.World()),
                    this.physicsWorld.gravity.set(0, -9.81, 0),
                    (this.physicsWorld.broadphase = new o.SAPBroadphase(
                      this.physicsWorld
                    )),
                    (this.physicsWorld.solver.iterations = 10),
                    (this.physicsWorld.allowSleep = !0),
                    (this.parallelPairs = []),
                    (this.physicsFrameRate = 60),
                    (this.physicsFrameTime = 1 / this.physicsFrameRate),
                    (this.physicsMaxPrediction = this.physicsFrameRate),
                    (this.clock = new a.Clock()),
                    (this.renderDelta = 0),
                    (this.logicDelta = 0),
                    (this.sinceLastFrame = 0),
                    (this.justRendered = !1),
                    (this.params = {
                      Pointer_Lock: !0,
                      Mouse_Sensitivity: 0.3,
                      FPS_Limit: 60,
                      Time_Scale: 1,
                      Shadows: !1,
                      FXAA: !1,
                      Draw_Physics: !1,
                      RayCast_Debug: !1,
                      Phi: 60,
                      Theta: 225,
                    }),
                    this.getGUI(n).open(),
                    (this.timeScaleTarget = 1),
                    (this.balls = []),
                    (this.objects = []),
                    (this.characters = []),
                    (this.vehicles = []),
                    (this.cameraOperator = new s.CameraOperator(
                      this,
                      this.camera,
                      this.params.Mouse_Sensitivity
                    )),
                    (this.inputManager = new v.InputManager(
                      this,
                      this.renderer.domElement
                    )),
                    this.render(this);
                }
                return (
                  m(e, [
                    {
                      key: "update",
                      value: function (e, t) {
                        this.updatePhysics(e),
                          this.updateProximityChatVolumes(),
                          this.objects.forEach(function (t) {
                            t.update(e);
                          }),
                          this.characters.forEach(function (t) {
                            t.update(e), t.updateMatrixWorld();
                          }),
                          this.vehicles.forEach(function (t) {
                            t.update(e);
                          }),
                          this.inputManager.update(e),
                          (this.params.Time_Scale = a.MathUtils.lerp(
                            this.params.Time_Scale,
                            this.timeScaleTarget,
                            0.2
                          )),
                          this.cameraOperator.update(),
                          void 0 !== this.waterMat &&
                            (this.waterMat.uniforms.cameraPos.value.copy(
                              this.camera.position
                            ),
                            this.waterMat.uniforms.lightDir.value.copy(
                              new a.Vector3()
                                .copy(this.sky.sun.position)
                                .normalize()
                            ),
                            (this.waterMat.uniforms.iGlobalTime.value += e)),
                          void 0 !== this.grassMat &&
                            ((this.grassMat.uniforms.time.value += e),
                            this.characters.length > 0 &&
                              this.grassMat.uniforms.playerPos.value.copy(
                                this.characters[0].position
                              )),
                          this.physicsWorld.bodies.forEach(function (e) {
                            e.sleepState, e.sleepState, e.sleepState;
                          });
                      },
                    },
                    {
                      key: "updatePhysics",
                      value: function (e) {
                        this.physicsWorld.step(
                          this.physicsFrameTime,
                          e,
                          this.physicsMaxPrediction
                        ),
                          this.objects.forEach(function (e) {
                            void 0 !== e.physics.physical &&
                              (e.physics.physical.position.y < -5 &&
                                ((e.physics.physical.position.x = 1.13),
                                (e.physics.physical.position.y = 5),
                                (e.physics.physical.position.z = -2.2),
                                (e.physics.physical.interpolatedPosition.x = 1.13),
                                (e.physics.physical.interpolatedPosition.y = 5),
                                (e.physics.physical.interpolatedPosition.z =
                                  -2.2)),
                              e.position.copy(
                                b.threeVector(e.physics.physical.position)
                              ),
                              e.quaternion.copy(
                                b.threeQuat(e.physics.physical.quaternion)
                              ));
                          });
                      },
                    },
                    {
                      key: "render",
                      value: function (e) {
                        (this.requestDelta = this.clock.getDelta()),
                          requestAnimationFrame(function () {
                            e.render(e);
                          });
                        var t =
                            this.requestDelta +
                            this.renderDelta +
                            this.logicDelta,
                          n = t * this.params.Time_Scale;
                        if (
                          ((n = Math.min(n, 1 / 30)),
                          e.update(n, t),
                          e.customUpdate)
                        ) {
                          e.customUpdate(n);
                          for (var i = 0; i < e.customUpdates.length; i++)
                            e.customUpdates[i](n);
                        }
                        (this.logicDelta = this.clock.getDelta()),
                          (this.sinceLastFrame +=
                            this.requestDelta +
                            this.renderDelta +
                            this.logicDelta),
                          (this.sinceLastFrame %= 1 / 60),
                          this.stats && (this.stats.end(), this.stats.begin()),
                          this.params.FXAA
                            ? this.composer.render()
                            : this.renderer.render(
                                this.graphicsWorld,
                                this.camera
                              ),
                          (this.renderDelta = this.clock.getDelta());
                      },
                    },
                    {
                      key: "updateGraphicsQuality",
                      value: function (e) {
                        e <= 0 ||
                          e > 1 ||
                          (this.renderer.setSize(
                            Math.floor(window.innerWidth * e),
                            Math.floor(window.innerHeight * e),
                            !1
                          ),
                          (this.quality = e));
                      },
                    },
                    {
                      key: "updateProximityChatVolumes",
                      value: function () {
                        var e = this;
                        if (
                          this.activeCharacter &&
                          this.isProximityChatEnabled
                        ) {
                          var t =
                            this.activeCharacter.characterCapsule.physics
                              .physical.position;
                          this.characters.forEach(function (n) {
                            if (n !== e.activeCharacter) {
                              var i =
                                n.characterCapsule.physics.physical.position.distanceTo(
                                  t
                                );
                              if (n.audioChatElement) {
                                var r = 1;
                                if (
                                  (i < 3 && (r = 1),
                                  i > 3 && i < 8 && (r = 1 - (i - 3) / 5),
                                  i > 8 &&
                                    ((r = 0),
                                    n.proximityLine &&
                                      (n.proximityLine.visible = !1)),
                                  r > 0)
                                ) {
                                  if (!n.proximityLine) {
                                    var o = [];
                                    o.push(e.activeCharacter.position),
                                      o.push(n.characterCapsule.position);
                                    var s =
                                        new C.BufferGeometry().setFromPoints(o),
                                      l = new a.LineBasicMaterial({
                                        color: 16777215,
                                      });
                                    l.transparent = !0;
                                    var u = new a.Line(s, l);
                                    e.graphicsWorld.add(u),
                                      (n.proximityLine = u),
                                      (n.lineMaterial = l);
                                  }
                                  var c =
                                    n.proximityLine.geometry.attributes.position
                                      .array;
                                  (c[0] = e.activeCharacter.position.x),
                                    (c[1] = e.activeCharacter.position.y),
                                    (c[2] = e.activeCharacter.position.z),
                                    (c[3] = n.characterCapsule.position.x),
                                    (c[4] = n.characterCapsule.position.y),
                                    (c[5] = n.characterCapsule.position.z),
                                    (n.proximityLine.geometry.attributes.position.needsUpdate =
                                      !0),
                                    (n.proximityLine.visible = !0),
                                    (n.lineMaterial.opacity = r),
                                    n.proximityLine.geometry.computeBoundingBox(),
                                    n.proximityLine.geometry.computeBoundingSphere();
                                }
                                r < 0 && (r = 0),
                                  r > 1 && (r = 1),
                                  (n.audioChatElement.volume = r);
                              }
                            }
                          });
                        }
                      },
                    },
                    {
                      key: "add",
                      value: function (e) {
                        e.addToWorld(this);
                      },
                    },
                    {
                      key: "remove",
                      value: function (e) {
                        e.removeFromWorld(this);
                      },
                    },
                    {
                      key: "loadScene",
                      value: function (e) {
                        var t = this;
                        for (var n in (this.lastGltf &&
                          (k.disposeObjectTree(this.lastGltf),
                          (this.balls = []),
                          (this.objects = []),
                          (this.characters = []),
                          (this.vehicles = []),
                          (this.raycastObjects = []),
                          (this.physicsWorld = new o.World()),
                          this.physicsWorld.gravity.set(0, -9.81, 0),
                          (this.physicsWorld.broadphase = new o.SAPBroadphase(
                            this.physicsWorld
                          )),
                          (this.physicsWorld.solver.iterations = 10),
                          (this.physicsWorld.allowSleep = !0)),
                        (this.lastGltf = e.scene),
                        e.scene.traverse(function (e) {
                          if (e.hasOwnProperty("userData")) {
                            if (
                              "Mesh" === e.type &&
                              (b.setupMeshProperties(e),
                              "ocean" === e.material.name)
                            ) {
                              var n = a.UniformsUtils.clone(
                                c.WaterShader.uniforms
                              );
                              (n.iResolution.value.x = window.innerWidth),
                                (n.iResolution.value.y = window.innerHeight),
                                (e.material = new a.ShaderMaterial({
                                  uniforms: n,
                                  fragmentShader: c.WaterShader.fragmentShader,
                                  vertexShader: c.WaterShader.vertexShader,
                                })),
                                (e.material.transparent = !0),
                                (t.waterMat = e.material);
                            }
                            var i = new C.MeshBasicMaterial({
                              wireframe: !0,
                              color: "#000000",
                            });
                            if (e.userData.hasOwnProperty("data")) {
                              if (
                                "physics" === e.userData.data &&
                                e.userData.hasOwnProperty("type")
                              ) {
                                if (
                                  "box" === e.userData.type ||
                                  "box_visible" === e.userData.type
                                ) {
                                  var r = new x.BoxPhysics({
                                    size: new a.Vector3(
                                      e.scale.x,
                                      e.scale.y,
                                      e.scale.z
                                    ),
                                  });
                                  r.physical.position.copy(
                                    b.cannonVector(e.position)
                                  ),
                                    r.physical.quaternion.copy(
                                      b.cannonQuat(e.quaternion)
                                    ),
                                    r.physical.computeAABB(),
                                    r.physical.shapes.forEach(function (e) {
                                      e.collisionFilterMask =
                                        ~S.CollisionGroups.TrimeshColliders;
                                    });
                                  var o = new g.SBObject();
                                  o.setPhysics(r), t.add(o);
                                } else if ("trimesh" === e.userData.type) {
                                  var s = new _.TrimeshPhysics(e, {}),
                                    l = new g.SBObject();
                                  l.setPhysics(s), t.add(l);
                                }
                                "box_visible" !== e.userData.type
                                  ? (e.visible = !1)
                                  : ((e.material = i),
                                    e.userData.wire_color &&
                                      e.material.color.set(
                                        e.userData.wire_color
                                      ));
                              }
                              if ("pathNode" === e.userData.data) {
                                var u = e.userData.path;
                                t.paths.hasOwnProperty(u) ||
                                  (t.paths[u] = new w.Path()),
                                  t.paths[u].addNode(e);
                              }
                              "spawn" === e.userData.data &&
                                ("car" === e.userData.type
                                  ? t.loadingManager.loadGLTF(
                                      "build/assets/car.glb",
                                      function (n) {
                                        var i = new M.Car(n);
                                        i.setPosition(
                                          e.position.x,
                                          e.position.y + 1,
                                          e.position.z
                                        ),
                                          i.collision.quaternion.copy(
                                            b.cannonQuat(e.quaternion)
                                          ),
                                          t.add(i);
                                      }
                                    )
                                  : "airplane" === e.userData.type
                                  ? t.loadingManager.loadGLTF(
                                      "build/assets/airplane.glb",
                                      function (n) {
                                        var i = new A.Airplane(n);
                                        i.setPosition(
                                          e.position.x,
                                          e.position.y + 1,
                                          e.position.z
                                        ),
                                          i.collision.quaternion.copy(
                                            b.cannonQuat(e.quaternion)
                                          ),
                                          t.add(i);
                                      }
                                    )
                                  : "heli" === e.userData.type
                                  ? t.loadingManager.loadGLTF(
                                      "build/assets/heli.glb",
                                      function (n) {
                                        var i = new T.Helicopter(n);
                                        i.setPosition(
                                          e.position.x,
                                          e.position.y + 1,
                                          e.position.z
                                        ),
                                          i.collision.quaternion.copy(
                                            b.cannonQuat(e.quaternion)
                                          ),
                                          t.add(i);
                                      }
                                    )
                                  : "player" === e.userData.type &&
                                    t.loadingManager.loadGLTF(
                                      t.defaultSkinGlbUrl,
                                      function (n) {
                                        n.scene.traverse(function (e) {
                                          e.frustumCulled = !1;
                                        });
                                        var i = new y.Character(n);
                                        i.setPosition(
                                          e.position.x,
                                          e.position.y,
                                          e.position.z
                                        ),
                                          t.add(i),
                                          i.setOrientation(
                                            new a.Vector3(0, 0, 1),
                                            !0
                                          ),
                                          i.takeControl(),
                                          (t.activeCharacter = i),
                                          t.onCharacterLoaded();
                                      }
                                    ));
                            }
                            e.userData.hasOwnProperty("raycast") &&
                              (t.raycastObjects.push(e),
                              (e.visible = !0),
                              e.material && (e.material.visible = !1));
                          }
                        }),
                        this.paths))
                          this.paths.hasOwnProperty(n) &&
                            this.paths[n].connectNodes();
                        this.graphicsWorld.add(e.scene);
                      },
                    },
                    {
                      key: "loadStats",
                      value: function (e) {
                        this.stats = d.Stats();
                        var t = e.getElementsByClassName("statsBox");
                        if (t.length > 1)
                          for (var n = 0; n < t.length; n++)
                            for (; t.length > 0; )
                              t[0].parentNode.removeChild(t[0]);
                        e.appendChild(this.stats.dom);
                      },
                    },
                    {
                      key: "addBots",
                      value: function (e) {
                        return i(
                          this,
                          void 0,
                          void 0,
                          r.mark(function t() {
                            var n;
                            return r.wrap(
                              function (t) {
                                for (;;)
                                  switch ((t.prev = t.next)) {
                                    case 0:
                                      for (n = 0; n < e; n++) this.addBot();
                                    case 1:
                                    case "end":
                                      return t.stop();
                                  }
                              },
                              t,
                              this
                            );
                          })
                        );
                      },
                    },
                    {
                      key: "addBot",
                      value: function () {
                        var e = this;
                        this.loadingManager.loadGLTF(
                          "/build/assets/boxman.glb",
                          function (t) {
                            t.scene.traverse(function (e) {
                              e.frustumCulled = !1;
                            });
                            var n = new y.Character(t);
                            n.setPosition(
                              e.activeCharacter.position.x,
                              e.activeCharacter.position.y + 4,
                              e.activeCharacter.position.z - 5 * Math.random()
                            ),
                              e.add(n),
                              n.setOrientation(new a.Vector3(0, 0, 1), !0);
                          }
                        );
                      },
                    },
                    {
                      key: "addFloor",
                      value: function () {
                        var e = new g.SBObject(),
                          t = new x.BoxPhysics({
                            size: new a.Vector3(100, 1, 100),
                          });
                        e.setPhysics(t),
                          e.setModelFromPhysicsShape(),
                          this.add(e);
                        var n = new g.SBObject(),
                          i = new x.BoxPhysics({
                            size: new a.Vector3(10, 1, 10),
                          });
                        (i.physical.position.z = 10),
                          i.physical.quaternion.setFromEuler(-0.3, 0, 0),
                          i.physical.computeAABB(),
                          n.setPhysics(i),
                          n.setModelFromPhysicsShape(),
                          this.add(n);
                        var r = new a.GridHelper(100, 50, 4473924, 11184810);
                        (r.position.y = 1.01), this.graphicsWorld.add(r);
                      },
                    },
                    { key: "scrollTheTimeScale", value: function (e) {} },
                    {
                      key: "updateControls",
                      value: function (e) {
                        var t = "";
                        (t += '<div class="info-title">Controls:</div>'),
                          e.forEach(function (e) {
                            (t += '<div class="info-row">'),
                              e.keys.forEach(function (e) {
                                t +=
                                  "+" === e ||
                                  "and" === e ||
                                  "or" === e ||
                                  "&" === e
                                    ? "&nbsp;" + e + "&nbsp;"
                                    : '<span class="key">' + e + "</span>";
                              }),
                              (t +=
                                '<span class="ctrl-desc">' +
                                e.desc +
                                "</span></div>");
                          }),
                          (document.getElementById("controls-menu").innerHTML =
                            t);
                      },
                    },
                    {
                      key: "getGUI",
                      value: function (e) {
                        return new p.GUI();
                      },
                    },
                  ]),
                  e
                );
              })();
            t.World = P;
          },
          "./src/ts/enums/CollisionGroups.ts": function (e, t, n) {
            "use strict";
            Object.defineProperty(t, "__esModule", { value: !0 }),
              (function (e) {
                (e[(e.Default = 1)] = "Default"),
                  (e[(e.Characters = 2)] = "Characters"),
                  (e[(e.TrimeshColliders = 4)] = "TrimeshColliders");
              })(t.CollisionGroups || (t.CollisionGroups = {}));
          },
          "./src/ts/enums/Side.ts": function (e, t, n) {
            "use strict";
            Object.defineProperty(t, "__esModule", { value: !0 }),
              (function (e) {
                (e.Left = "left"), (e.Right = "right");
              })(t.Side || (t.Side = {}));
          },
          "./src/ts/objects/Path.ts": function (e, t, n) {
            "use strict";
            Object.defineProperty(t, "__esModule", { value: !0 });
            var i = n("./src/ts/objects/PathNode.ts"),
              r = (function () {
                function e() {
                  f(this, e), (this.nodes = {});
                }
                return (
                  m(e, [
                    {
                      key: "addNode",
                      value: function (e) {
                        var t = new i.PathNode();
                        (t.object = e),
                          (t.path = this),
                          (this.nodes[e.name] = t);
                      },
                    },
                    {
                      key: "connectNodes",
                      value: function () {
                        for (var e in this.nodes)
                          if (this.nodes.hasOwnProperty(e)) {
                            var t = this.nodes[e];
                            (t.nextNode =
                              this.nodes[t.object.userData.nextNode]),
                              (t.previousNode =
                                this.nodes[t.object.userData.previousNode]);
                          }
                      },
                    },
                    {
                      key: "firstNode",
                      value: function () {
                        return this.nodes[Object.keys(this.nodes)[6]];
                      },
                    },
                  ]),
                  e
                );
              })();
            t.Path = r;
          },
          "./src/ts/objects/PathNode.ts": function (e, t, n) {
            "use strict";
            Object.defineProperty(t, "__esModule", { value: !0 }),
              (t.PathNode = function e() {
                f(this, e);
              });
          },
          "./src/ts/objects/SBObject.ts": function (e, t, n) {
            "use strict";
            Object.defineProperty(t, "__esModule", { value: !0 });
            var i = n("./node_modules/three/build/three.module.js"),
              r = n("./node_modules/lodash/lodash.js"),
              a = (function (e) {
                function t(e, n) {
                  var i;
                  return (
                    f(this, t),
                    ((i = c(this, h(t).call(this))).isObject = !0),
                    (i.model = e),
                    (i.physics = n),
                    i
                  );
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "update",
                      value: function (e) {
                        void 0 !== this.physics.visual &&
                          (this.physics.visual.position.copy(this.position),
                          this.physics.visual.quaternion.copy(this.quaternion)),
                          void 0 !== this.model &&
                            (this.model.position.copy(this.position),
                            this.model.quaternion.copy(this.quaternion));
                      },
                    },
                    {
                      key: "setModel",
                      value: function (e) {
                        this.model = e;
                      },
                    },
                    {
                      key: "setModelFromPhysicsShape",
                      value: function () {
                        this.model = this.physics.getVisualModel({
                          visible: !0,
                          wireframe: !1,
                        });
                      },
                    },
                    {
                      key: "setPhysics",
                      value: function (e) {
                        this.physics = e;
                      },
                    },
                    {
                      key: "addToWorld",
                      value: function (e) {
                        r.includes(e.objects, this)
                          ? console.warn(
                              "Adding object to a world in which it already exists."
                            )
                          : (e.objects.push(this),
                            void 0 !== this.physics.physical &&
                              e.physicsWorld.addBody(this.physics.physical),
                            void 0 !== this.physics.visual &&
                              e.graphicsWorld.add(this.physics.visual),
                            void 0 !== this.model &&
                              e.graphicsWorld.add(this.model));
                      },
                    },
                    {
                      key: "removeFromWorld",
                      value: function (e) {
                        r.includes(e.objects, this)
                          ? (r.pull(e.objects, this),
                            void 0 !== this.physics.physical &&
                              e.physicsWorld.remove(this.physics.physical),
                            void 0 !== this.physics.visual &&
                              e.graphicsWorld.remove(this.physics.visual),
                            void 0 !== this.model &&
                              e.graphicsWorld.remove(this.model))
                          : console.warn(
                              "Removing object from a world in which it isn't present."
                            );
                      },
                    },
                  ]),
                  t
                );
              })(i.Object3D);
            t.SBObject = a;
          },
          "./src/ts/objects/object_physics/BoxPhysics.ts": function (e, t, n) {
            "use strict";
            Object.defineProperty(t, "__esModule", { value: !0 });
            var i = n("./src/lib/cannon/cannon.js"),
              r = n("./node_modules/three/build/three.module.js"),
              a = n("./src/ts/core/Utilities.ts"),
              o = (function () {
                function e(t) {
                  f(this, e);
                  var n = {
                    mass: 0,
                    position: new r.Vector3(),
                    size: new r.Vector3(0.3, 0.3, 0.3),
                    friction: 0.3,
                  };
                  (t = a.setDefaults(t, n)),
                    (this.options = t),
                    (t.position = new i.Vec3(
                      t.position.x,
                      t.position.y,
                      t.position.z
                    )),
                    (t.size = new i.Vec3(t.size.x, t.size.y, t.size.z));
                  var o = new i.Material("boxMat");
                  o.friction = t.friction;
                  var s = new i.Box(t.size),
                    l = new i.Body({
                      mass: t.mass,
                      position: t.position,
                      shape: s,
                    });
                  (l.material = o),
                    (this.physical = l),
                    (this.visual = this.getVisualModel({
                      visible: !1,
                      wireframe: !0,
                    }));
                }
                return (
                  m(e, [
                    {
                      key: "getVisualModel",
                      value: function (e) {
                        e = a.setDefaults(e, { visible: !0, wireframe: !0 });
                        var t = new r.BoxGeometry(
                            2 * this.options.size.x,
                            2 * this.options.size.y,
                            2 * this.options.size.z
                          ),
                          n = new r.MeshLambertMaterial({
                            color: 13421772,
                            wireframe: e.wireframe,
                          }),
                          i = new r.Mesh(t, n);
                        return (
                          (i.visible = e.visible),
                          e.wireframe ||
                            ((i.castShadow = !0), (i.receiveShadow = !0)),
                          i
                        );
                      },
                    },
                  ]),
                  e
                );
              })();
            t.BoxPhysics = o;
          },
          "./src/ts/objects/object_physics/CapsulePhysics.ts": function (
            e,
            t,
            n
          ) {
            "use strict";
            Object.defineProperty(t, "__esModule", { value: !0 });
            var i = n("./src/lib/cannon/cannon.js"),
              r = n("./node_modules/three/build/three.module.js"),
              a = n("./src/ts/core/Utilities.ts"),
              o = (function () {
                function e(t) {
                  f(this, e);
                  var n = {
                    mass: 0,
                    position: new i.Vec3(),
                    height: 0.5,
                    radius: 0.3,
                    segments: 8,
                    friction: 0.3,
                  };
                  (t = a.setDefaults(t, n)), (this.options = t);
                  var r = new i.Material("capsuleMat");
                  r.friction = t.friction;
                  var o = new i.Body({ mass: t.mass, position: t.position }),
                    s = new i.Sphere(t.radius);
                  (o.material = r),
                    o.addShape(s, new i.Vec3(0, 0, 0)),
                    o.addShape(s, new i.Vec3(0, t.height / 2, 0)),
                    o.addShape(s, new i.Vec3(0, -t.height / 2, 0)),
                    (this.physical = o),
                    (this.visual = this.getVisualModel({
                      visible: !1,
                      wireframe: !0,
                    }));
                }
                return (
                  m(e, [
                    {
                      key: "getVisualModel",
                      value: function (e) {
                        (e = a.setDefaults(e, { visible: !0, wireframe: !0 })),
                          new r.MeshLambertMaterial({
                            color: 13421772,
                            wireframe: e.wireframe,
                          }),
                          a.createCapsuleGeometry(
                            this.options.radius,
                            this.options.height,
                            this.options.segments
                          );
                        var t = new r.Mesh();
                        return (
                          (t.visible = e.visible),
                          e.wireframe ||
                            ((t.castShadow = !0), (t.receiveShadow = !0)),
                          t
                        );
                      },
                    },
                  ]),
                  e
                );
              })();
            t.CapsulePhysics = o;
          },
          "./src/ts/objects/object_physics/ConvexPhysics.ts": function (
            e,
            t,
            n
          ) {
            "use strict";
            Object.defineProperty(t, "__esModule", { value: !0 });
            var i = n("./src/lib/cannon/cannon.js"),
              r = n("./node_modules/three/build/three.module.js"),
              a = n("./src/ts/core/Utilities.ts"),
              o = n("./node_modules/three/examples/jsm/deprecated/Geometry.js"),
              s = (function () {
                function e(t, n) {
                  f(this, e), (this.mesh = t.clone());
                  var r = { mass: 0, position: t.position, friction: 0.3 };
                  (n = a.setDefaults(n, r)), (this.options = n);
                  var s = new i.Material("convMat");
                  (s.friction = n.friction),
                    this.mesh.geometry.isBufferGeometry &&
                      (this.mesh.geometry = new o.Geometry().fromBufferGeometry(
                        this.mesh.geometry
                      ));
                  var l = this.mesh.geometry.vertices.map(function (e) {
                      return new i.Vec3(e.x, e.y, e.z);
                    }),
                    u = this.mesh.geometry.faces.map(function (e) {
                      return [e.a, e.b, e.c];
                    }),
                    c = new i.ConvexPolyhedron(l, u),
                    h = new i.Body({
                      mass: n.mass,
                      position: n.position,
                      shape: c,
                    });
                  (h.material = s),
                    (this.physical = h),
                    (this.visual = this.getVisualModel({
                      visible: !1,
                      wireframe: !0,
                    }));
                }
                return (
                  m(e, [
                    {
                      key: "getVisualModel",
                      value: function (e) {
                        e = a.setDefaults(e, { visible: !0, wireframe: !0 });
                        var t = new r.MeshLambertMaterial({
                            color: 13421772,
                            wireframe: e.wireframe,
                          }),
                          n = this.mesh.clone();
                        return (
                          (n.material = t),
                          (n.visible = e.visible),
                          e.wireframe ||
                            ((n.castShadow = !0), (n.receiveShadow = !0)),
                          n
                        );
                      },
                    },
                  ]),
                  e
                );
              })();
            t.ConvexPhysics = s;
          },
          "./src/ts/objects/object_physics/SpherePhysics.ts": function (
            e,
            t,
            n
          ) {
            "use strict";
            Object.defineProperty(t, "__esModule", { value: !0 });
            var i = n("./src/lib/cannon/cannon.js"),
              r = n("./node_modules/three/build/three.module.js"),
              a = n("./src/ts/core/Utilities.ts"),
              o = (function () {
                function e(t) {
                  f(this, e);
                  var n = {
                    mass: 0,
                    position: new i.Vec3(),
                    radius: 0.3,
                    friction: 0.3,
                  };
                  (t = a.setDefaults(t, n)), (this.options = t);
                  var r = new i.Material("sphereMat");
                  r.friction = t.friction;
                  var o = new i.Sphere(t.radius),
                    s = new i.Body({
                      mass: t.mass,
                      position: t.position,
                      shape: o,
                    });
                  (s.material = r),
                    (this.physical = s),
                    (this.visual = this.getVisualModel({
                      visible: !1,
                      wireframe: !0,
                    }));
                }
                return (
                  m(e, [
                    {
                      key: "getVisualModel",
                      value: function (e) {
                        e = a.setDefaults(e, { visible: !0, wireframe: !0 });
                        var t = new r.SphereGeometry(this.options.radius),
                          n = new r.MeshLambertMaterial({
                            color: 13421772,
                            wireframe: e.wireframe,
                          }),
                          i = new r.Mesh(t, n);
                        return (
                          (i.visible = e.visible),
                          e.wireframe ||
                            ((i.castShadow = !0), (i.receiveShadow = !0)),
                          i
                        );
                      },
                    },
                  ]),
                  e
                );
              })();
            t.SpherePhysics = o;
          },
          "./src/ts/objects/object_physics/TrimeshPhysics.ts": function (
            e,
            t,
            n
          ) {
            "use strict";
            Object.defineProperty(t, "__esModule", { value: !0 });
            var i = n("./src/lib/cannon/cannon.js"),
              r = n("./node_modules/three/build/three.module.js"),
              a = n("./node_modules/three/examples/jsm/deprecated/Geometry.js"),
              o = n("./src/ts/core/Utilities.ts"),
              s = n("./src/lib/utils/three-to-cannon.js"),
              l = (function () {
                function e(t, n) {
                  f(this, e), (this.mesh = t.clone());
                  var r = { mass: 0, position: t.position, friction: 0.3 };
                  (n = o.setDefaults(n, r)), (this.options = n);
                  var l = new i.Material("triMat");
                  (l.friction = n.friction),
                    this.mesh.geometry.isBufferGeometry &&
                      (this.mesh.geometry = new a.Geometry().fromBufferGeometry(
                        this.mesh.geometry
                      ));
                  var u = s.threeToCannon(this.mesh, {
                      type: s.threeToCannon.Type.MESH,
                    }),
                    c = new i.Body({
                      mass: n.mass,
                      position: n.position,
                      shape: u,
                    });
                  (c.material = l),
                    (this.physical = c),
                    (this.visual = this.getVisualModel({
                      visible: !1,
                      wireframe: !0,
                    }));
                }
                return (
                  m(e, [
                    {
                      key: "getVisualModel",
                      value: function (e) {
                        e = o.setDefaults(e, { visible: !0, wireframe: !0 });
                        var t = new r.MeshLambertMaterial({
                            color: 13421772,
                            wireframe: e.wireframe,
                          }),
                          n = this.mesh.clone();
                        return (
                          (n.material = t),
                          (n.visible = e.visible),
                          e.wireframe ||
                            ((n.castShadow = !0), (n.receiveShadow = !0)),
                          n
                        );
                      },
                    },
                  ]),
                  e
                );
              })();
            t.TrimeshPhysics = l;
          },
          "./src/ts/simulation/RelativeSpringSimulator.ts": function (e, t, n) {
            "use strict";
            Object.defineProperty(t, "__esModule", { value: !0 });
            var i = n("./node_modules/three/build/three.module.js"),
              r = n("./src/ts/simulation/SimulatorBase.ts"),
              a = n("./src/ts/core/Utilities.ts"),
              o = (function (e) {
                function t(e, n, i) {
                  var r,
                    a =
                      arguments.length > 3 && void 0 !== arguments[3]
                        ? arguments[3]
                        : 0,
                    o =
                      arguments.length > 4 && void 0 !== arguments[4]
                        ? arguments[4]
                        : 0;
                  f(this, t),
                    ((r = c(this, h(t).call(this, e, n, i))).position = a),
                    (r.velocity = o),
                    (r.target = 0),
                    (r.lastLerp = 0),
                    (r.cache = []);
                  for (var s = 0; s < 2; s++)
                    r.cache.push({ position: a, velocity: o });
                  return r;
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "simulate",
                      value: function (e) {
                        this.generateFrames(e);
                        var t = i.MathUtils.lerp(
                          0,
                          this.cache[1].position,
                          this.offset / this.frameTime
                        );
                        (this.position = t - this.lastLerp),
                          (this.lastLerp = t),
                          (this.velocity = i.MathUtils.lerp(
                            this.cache[0].velocity,
                            this.cache[1].velocity,
                            this.offset / this.frameTime
                          ));
                      },
                    },
                    {
                      key: "getFrame",
                      value: function (e) {
                        var t = Object.assign({}, this.lastFrame());
                        return (
                          e &&
                            ((t.position = 0),
                            (this.lastLerp =
                              this.lastLerp - this.lastFrame().position)),
                          a.spring(
                            t.position,
                            this.target,
                            t.velocity,
                            this.mass,
                            this.damping
                          )
                        );
                      },
                    },
                  ]),
                  t
                );
              })(r.SimulatorBase);
            t.RelativeSpringSimulator = o;
          },
          "./src/ts/simulation/SimulationFrame.ts": function (e, t, n) {
            "use strict";
            Object.defineProperty(t, "__esModule", { value: !0 }),
              (t.SimulationFrame = function e(t, n) {
                f(this, e), (this.position = t), (this.velocity = n);
              });
          },
          "./src/ts/simulation/SimulationFrameVector.ts": function (e, t, n) {
            "use strict";
            Object.defineProperty(t, "__esModule", { value: !0 }),
              (t.SimulationFrameVector = function e(t, n) {
                f(this, e), (this.position = t), (this.velocity = n);
              });
          },
          "./src/ts/simulation/SimulatorBase.ts": function (e, t, n) {
            "use strict";
            Object.defineProperty(t, "__esModule", { value: !0 });
            var i = (function () {
              function e(t, n, i) {
                f(this, e),
                  (this.mass = n),
                  (this.damping = i),
                  (this.frameTime = 1 / t),
                  (this.offset = 0);
              }
              return (
                m(e, [
                  {
                    key: "setFPS",
                    value: function (e) {
                      this.frameTime = 1 / e;
                    },
                  },
                  {
                    key: "lastFrame",
                    value: function () {
                      return this.cache[this.cache.length - 1];
                    },
                  },
                  {
                    key: "generateFrames",
                    value: function (e) {
                      var t = this.offset + e,
                        n = Math.floor(t / this.frameTime);
                      if (((this.offset = t % this.frameTime), n > 0)) {
                        for (var i = 0; i < n; i++)
                          this.cache.push(this.getFrame(i + 1 === n));
                        this.cache = this.cache.slice(-2);
                      }
                    },
                  },
                ]),
                e
              );
            })();
            t.SimulatorBase = i;
          },
          "./src/ts/simulation/SpringSimulator.ts": function (e, t, n) {
            "use strict";
            Object.defineProperty(t, "__esModule", { value: !0 });
            var i = n("./node_modules/three/build/three.module.js"),
              r = n("./src/ts/simulation/SimulatorBase.ts"),
              a = n("./src/ts/simulation/SimulationFrame.ts"),
              o = n("./src/ts/core/Utilities.ts"),
              s = (function (e) {
                function t(e, n, i) {
                  var r,
                    o =
                      arguments.length > 3 && void 0 !== arguments[3]
                        ? arguments[3]
                        : 0,
                    s =
                      arguments.length > 4 && void 0 !== arguments[4]
                        ? arguments[4]
                        : 0;
                  f(this, t),
                    ((r = c(this, h(t).call(this, e, n, i))).position = o),
                    (r.velocity = s),
                    (r.target = 0),
                    (r.cache = []);
                  for (var l = 0; l < 2; l++)
                    r.cache.push(new a.SimulationFrame(o, s));
                  return r;
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "simulate",
                      value: function (e) {
                        this.generateFrames(e),
                          (this.position = i.MathUtils.lerp(
                            this.cache[0].position,
                            this.cache[1].position,
                            this.offset / this.frameTime
                          )),
                          (this.velocity = i.MathUtils.lerp(
                            this.cache[0].velocity,
                            this.cache[1].velocity,
                            this.offset / this.frameTime
                          ));
                      },
                    },
                    {
                      key: "getFrame",
                      value: function (e) {
                        return o.spring(
                          this.lastFrame().position,
                          this.target,
                          this.lastFrame().velocity,
                          this.mass,
                          this.damping
                        );
                      },
                    },
                  ]),
                  t
                );
              })(r.SimulatorBase);
            t.SpringSimulator = s;
          },
          "./src/ts/simulation/VectorSpringSimulator.ts": function (e, t, n) {
            "use strict";
            Object.defineProperty(t, "__esModule", { value: !0 });
            var i = n("./node_modules/three/build/three.module.js"),
              r = n("./src/ts/simulation/SimulatorBase.ts"),
              a = n("./src/ts/simulation/SimulationFrameVector.ts"),
              o = n("./src/ts/core/Utilities.ts"),
              s = (function (e) {
                function t(e, n, i) {
                  var r;
                  return (
                    f(this, t),
                    (r = c(this, h(t).call(this, e, n, i))).init(),
                    r
                  );
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "init",
                      value: function () {
                        (this.position = new i.Vector3()),
                          (this.velocity = new i.Vector3()),
                          (this.target = new i.Vector3()),
                          (this.cache = []);
                        for (var e = 0; e < 2; e++)
                          this.cache.push(
                            new a.SimulationFrameVector(
                              new i.Vector3(),
                              new i.Vector3()
                            )
                          );
                      },
                    },
                    {
                      key: "simulate",
                      value: function (e) {
                        this.generateFrames(e),
                          this.position.lerpVectors(
                            this.cache[0].position,
                            this.cache[1].position,
                            this.offset / this.frameTime
                          ),
                          this.velocity.lerpVectors(
                            this.cache[0].velocity,
                            this.cache[1].velocity,
                            this.offset / this.frameTime
                          );
                      },
                    },
                    {
                      key: "getFrame",
                      value: function (e) {
                        var t = new a.SimulationFrameVector(
                          this.lastFrame().position.clone(),
                          this.lastFrame().velocity.clone()
                        );
                        return (
                          o.springV(
                            t.position,
                            this.target,
                            t.velocity,
                            this.mass,
                            this.damping
                          ),
                          t
                        );
                      },
                    },
                  ]),
                  t
                );
              })(r.SimulatorBase);
            t.VectorSpringSimulator = s;
          },
          "./src/ts/sketchbook.ts": function (e, t, n) {
            "use strict";
            Object.defineProperty(t, "__esModule", { value: !0 }),
              n("./src/css/dat.gui.css"),
              n("./src/css/main.css");
            var i = n("./node_modules/three/build/three.module.js"),
              r = n("./src/lib/cannon/cannon.js"),
              a = n("./src/ts/characters/character_ai/FollowTarget.ts"),
              o = n("./src/ts/characters/character_ai/FollowPath.ts"),
              s = n("./src/ts/characters/character_ai/RandomBehaviour.ts");
            t.CharacterAI = {
              FollowTarget: a.FollowTarget,
              FollowPath: o.FollowPath,
              RandomBehaviour: s.RandomBehaviour,
            };
            var l = n("./src/ts/objects/object_physics/BoxPhysics.ts"),
              u = n("./src/ts/objects/object_physics/CapsulePhysics.ts"),
              c = n("./src/ts/objects/object_physics/ConvexPhysics.ts"),
              h = n("./src/ts/objects/object_physics/SpherePhysics.ts"),
              d = n("./src/ts/objects/object_physics/TrimeshPhysics.ts");
            t.ObjectPhysics = {
              BoxPhysics: l.BoxPhysics,
              CapsulePhysics: u.CapsulePhysics,
              ConvexPhysics: c.ConvexPhysics,
              SpherePhysics: h.SpherePhysics,
              TrimeshPhysics: d.TrimeshPhysics,
            };
            var p = n("./src/ts/vehicles/Airplane.ts");
            t.Airplane = p.Airplane;
            var f = n("./src/ts/vehicles/Car.ts");
            t.Car = f.Car;
            var m = n("./src/ts/vehicles/Helicopter.ts");
            t.Helicopter = m.Helicopter;
            var v = n("./src/ts/vehicles/Wheel.ts");
            t.Wheel = v.Wheel;
            var g = n("./src/ts/vehicles/VehicleSeat.ts");
            t.VehicleSeat = g.VehicleSeat;
            var y = n("./src/ts/vehicles/VehicleDoor.ts");
            t.VehicleDoor = y.VehicleDoor;
            var x = n("./src/ts/characters/character_states/_stateLibrary.ts");
            t.CharacterStates = x;
            var b = n("./src/ts/characters/Character.ts");
            t.Character = b.Character;
            var _ = n("./src/ts/core/KeyBinding.ts");
            t.KeyBinding = _.KeyBinding;
            var w = n("./src/ts/objects/SBObject.ts");
            t.SBObject = w.SBObject;
            var S = n("./src/ts/core/World.ts");
            (t.World = S.World), (t.THREE = i), (t.CANNON = r);
            var E = n(
              "./node_modules/three/examples/jsm/loaders/GLTFLoader.js"
            );
            t.GLTFLoader = E.GLTFLoader;
            var M = n("./src/ts/core/LoadingManager.ts");
            t.LoadingManager = M.LoadingManager;
          },
          "./src/ts/utils/threeUtils.ts": function (e, t, n) {
            "use strict";
            function i(e) {
              return "geometry" in e && "material" in e;
            }
            function r(e) {
              if (i(e)) {
                var t = [].concat(e.material),
                  n = !0,
                  r = !1,
                  a = void 0;
                try {
                  for (
                    var o, s = t[Symbol.iterator]();
                    !(n = (o = s.next()).done);
                    n = !0
                  )
                    o.value.dispose();
                } catch (l) {
                  (r = !0), (a = l);
                } finally {
                  try {
                    n || null == s.return || s.return();
                  } finally {
                    if (r) throw a;
                  }
                }
              }
            }
            function a(e) {
              var t =
                  !(arguments.length > 1 && void 0 !== arguments[1]) ||
                  arguments[1],
                n =
                  !(arguments.length > 2 && void 0 !== arguments[2]) ||
                  arguments[2],
                a =
                  !(arguments.length > 3 && void 0 !== arguments[3]) ||
                  arguments[3];
              e &&
                (i(e) && (e.geometry && n && e.geometry.dispose(), a && r(e)),
                t &&
                  Promise.resolve().then(function () {
                    e.parent && e.parent.remove(e);
                  }));
            }
            Object.defineProperty(t, "__esModule", { value: !0 }),
              (t.isRenderItem = i),
              (t.disposeMaterial = r),
              (t.disposeObject = a),
              (t.disposeObjectTree = function (e) {
                var t =
                  arguments.length > 1 && void 0 !== arguments[1]
                    ? arguments[1]
                    : {};
                e.traverse(function (e) {
                  a(
                    e,
                    t.removeFromParent,
                    t.destroyGeometry,
                    t.destroyMaterial
                  );
                });
              });
          },
          "./src/ts/vehicles/Airplane.ts": function (e, t, n) {
            "use strict";
            Object.defineProperty(t, "__esModule", { value: !0 });
            var i = n("./src/lib/cannon/cannon.js"),
              r = n("./src/ts/vehicles/Vehicle.ts"),
              a = n("./src/ts/core/KeyBinding.ts"),
              o = n("./src/ts/simulation/SpringSimulator.ts"),
              s = n("./node_modules/three/build/three.module.js"),
              u = n("./src/ts/core/Utilities.ts"),
              v = (function (e) {
                function t(e) {
                  var n;
                  return (
                    f(this, t),
                    ((n = c(
                      this,
                      h(t).call(this, e, {
                        radius: 0.12,
                        suspensionStiffness: 150,
                        suspensionRestLength: 0.25,
                        dampingRelaxation: 5,
                        dampingCompression: 5,
                        directionLocal: new i.Vec3(0, -1, 0),
                        axleLocal: new i.Vec3(-1, 0, 0),
                        chassisConnectionPointLocal: new i.Vec3(),
                      })
                    )).elevators = []),
                    (n.enginePower = 0),
                    (n.lastDrag = 0),
                    n.readAirplaneData(e),
                    (n.collision.preStep = function (e) {
                      n.physicsPreStep(e, d(n));
                    }),
                    (n.actions = {
                      throttle: new a.KeyBinding("KeyW"),
                      brake: new a.KeyBinding("KeyS"),
                      wheelBrake: new a.KeyBinding("Space"),
                      pitchUp: new a.KeyBinding("ArrowDown"),
                      pitchDown: new a.KeyBinding("ArrowUp"),
                      yawLeft: new a.KeyBinding("KeyQ"),
                      yawRight: new a.KeyBinding("KeyE"),
                      rollLeft: new a.KeyBinding("ArrowLeft", "KeyA"),
                      rollRight: new a.KeyBinding("ArrowRight", "KeyD"),
                      exitVehicle: new a.KeyBinding("KeyF"),
                    }),
                    (n.steeringSimulator = new o.SpringSimulator(60, 10, 0.6)),
                    (n.aileronSimulator = new o.SpringSimulator(60, 5, 0.6)),
                    (n.elevatorSimulator = new o.SpringSimulator(60, 7, 0.6)),
                    (n.rudderSimulator = new o.SpringSimulator(60, 10, 0.6)),
                    n
                  );
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "update",
                      value: function (e) {
                        var n = this;
                        l(h(t.prototype), "update", this).call(this, e),
                          void 0 !== this.controllingCharacter
                            ? (this.enginePower < 1 &&
                                (this.enginePower += 0.4 * e),
                              this.enginePower > 1 && (this.enginePower = 1))
                            : (this.enginePower > 0 &&
                                (this.enginePower -= 0.12 * e),
                              this.enginePower < 0 && (this.enginePower = 0)),
                          this.rotor.rotateX(this.enginePower * e * 60),
                          this.rayCastVehicle.numWheelsOnGround > 0
                            ? (!this.actions.yawLeft.isPressed &&
                                !this.actions.rollLeft.isPressed) ||
                              this.actions.yawRight.isPressed ||
                              this.actions.rollRight.isPressed
                              ? (!this.actions.yawRight.isPressed &&
                                  !this.actions.rollRight.isPressed) ||
                                this.actions.yawLeft.isPressed ||
                                this.actions.rollLeft.isPressed
                                ? (this.steeringSimulator.target = 0)
                                : (this.steeringSimulator.target = -0.8)
                              : (this.steeringSimulator.target = 0.8)
                            : (this.steeringSimulator.target = 0),
                          this.steeringSimulator.simulate(e),
                          this.setSteeringValue(
                            this.steeringSimulator.position
                          ),
                          this.actions.rollLeft.isPressed &&
                          !this.actions.rollRight.isPressed
                            ? (this.aileronSimulator.target = 0.7)
                            : !this.actions.rollLeft.isPressed &&
                              this.actions.rollRight.isPressed
                            ? (this.aileronSimulator.target = -0.7)
                            : (this.aileronSimulator.target = 0),
                          this.actions.pitchUp.isPressed &&
                          !this.actions.pitchDown.isPressed
                            ? (this.elevatorSimulator.target = 0.7)
                            : !this.actions.pitchUp.isPressed &&
                              this.actions.pitchDown.isPressed
                            ? (this.elevatorSimulator.target = -0.7)
                            : (this.elevatorSimulator.target = 0),
                          this.actions.yawLeft.isPressed &&
                          !this.actions.yawRight.isPressed
                            ? (this.rudderSimulator.target = 0.7)
                            : !this.actions.yawLeft.isPressed &&
                              this.actions.yawRight.isPressed
                            ? (this.rudderSimulator.target = -0.7)
                            : (this.rudderSimulator.target = 0),
                          this.aileronSimulator.simulate(e),
                          this.elevatorSimulator.simulate(e),
                          this.rudderSimulator.simulate(e),
                          (this.leftAileron.rotation.y =
                            this.aileronSimulator.position),
                          (this.rightAileron.rotation.y =
                            -this.aileronSimulator.position),
                          this.elevators.forEach(function (e) {
                            e.rotation.y = n.elevatorSimulator.position;
                          }),
                          (this.rudder.rotation.y =
                            this.rudderSimulator.position);
                      },
                    },
                    {
                      key: "physicsPreStep",
                      value: function (e, t) {
                        var n = new s.Quaternion(
                            e.quaternion.x,
                            e.quaternion.y,
                            e.quaternion.z,
                            e.quaternion.w
                          ),
                          r = new s.Vector3(1, 0, 0).applyQuaternion(n),
                          a = new s.Vector3(0, 1, 0).applyQuaternion(n),
                          o = new s.Vector3(0, 0, 1).applyQuaternion(n),
                          l = new i.Vec3().copy(this.collision.velocity),
                          c = e.velocity.length(),
                          h = l.dot(u.cannonVector(o)),
                          d = h / 10;
                        d = s.MathUtils.clamp(d, 0, 1);
                        var p = (h - 7) / 3;
                        (p = s.MathUtils.clamp(p, 0, 1)),
                          (this.collision.mass = 50 * (1 - 0.8 * p));
                        var f = e.velocity.clone();
                        f.normalize();
                        var m = new s.Quaternion().setFromUnitVectors(
                          o,
                          u.threeVector(f)
                        );
                        (m.x *= 0.3), (m.y *= 0.3), (m.z *= 0.3), (m.w *= 0.3);
                        var v = new s.Euler().setFromQuaternion(m),
                          g = s.MathUtils.clamp(c - 1, 0, 1);
                        g *=
                          this.rayCastVehicle.numWheelsOnGround > 0 && h < 0
                            ? 0
                            : 1;
                        var y =
                          this.actions.throttle.isPressed && h > 0 ? 0 : 1;
                        (e.angularVelocity.x += v.x * g * y),
                          (e.angularVelocity.y += v.y * g),
                          (e.angularVelocity.z += v.z * g * y),
                          t.actions.pitchUp.isPressed &&
                            ((e.angularVelocity.x -=
                              0.05 * r.x * d * this.enginePower),
                            (e.angularVelocity.y -=
                              0.05 * r.y * d * this.enginePower),
                            (e.angularVelocity.z -=
                              0.05 * r.z * d * this.enginePower)),
                          t.actions.pitchDown.isPressed &&
                            ((e.angularVelocity.x +=
                              0.05 * r.x * d * this.enginePower),
                            (e.angularVelocity.y +=
                              0.05 * r.y * d * this.enginePower),
                            (e.angularVelocity.z +=
                              0.05 * r.z * d * this.enginePower)),
                          t.actions.yawLeft.isPressed &&
                            ((e.angularVelocity.x +=
                              0.02 * a.x * d * this.enginePower),
                            (e.angularVelocity.y +=
                              0.02 * a.y * d * this.enginePower),
                            (e.angularVelocity.z +=
                              0.02 * a.z * d * this.enginePower)),
                          t.actions.yawRight.isPressed &&
                            ((e.angularVelocity.x -=
                              0.02 * a.x * d * this.enginePower),
                            (e.angularVelocity.y -=
                              0.02 * a.y * d * this.enginePower),
                            (e.angularVelocity.z -=
                              0.02 * a.z * d * this.enginePower)),
                          t.actions.rollLeft.isPressed &&
                            ((e.angularVelocity.x -=
                              0.05 * o.x * d * this.enginePower),
                            (e.angularVelocity.y -=
                              0.05 * o.y * d * this.enginePower),
                            (e.angularVelocity.z -=
                              0.05 * o.z * d * this.enginePower)),
                          t.actions.rollRight.isPressed &&
                            ((e.angularVelocity.x +=
                              0.05 * o.x * d * this.enginePower),
                            (e.angularVelocity.y +=
                              0.05 * o.y * d * this.enginePower),
                            (e.angularVelocity.z +=
                              0.05 * o.z * d * this.enginePower));
                        var x = 0.02;
                        t.actions.throttle.isPressed &&
                        !t.actions.brake.isPressed
                          ? (x = 0.05)
                          : !t.actions.throttle.isPressed &&
                            t.actions.brake.isPressed
                          ? (x = -0.05)
                          : this.rayCastVehicle.numWheelsOnGround > 0 &&
                            (x = 0),
                          (e.velocity.x +=
                            (c * this.lastDrag + x) * o.x * this.enginePower),
                          (e.velocity.y +=
                            (c * this.lastDrag + x) * o.y * this.enginePower),
                          (e.velocity.z +=
                            (c * this.lastDrag + x) * o.z * this.enginePower);
                        var b = e.velocity.length(),
                          _ = 0.005 * Math.pow(b, 1);
                        (e.velocity.x -= e.velocity.x * _),
                          (e.velocity.y -= e.velocity.y * _),
                          (e.velocity.z -= e.velocity.z * _),
                          (this.lastDrag = _);
                        var w = 0.01 * Math.pow(b, 1);
                        (w = s.MathUtils.clamp(w, 0, 0.1)),
                          (e.velocity.x += a.x * w),
                          (e.velocity.y += a.y * w),
                          (e.velocity.z += a.z * w),
                          (e.angularVelocity.x = s.MathUtils.lerp(
                            e.angularVelocity.x,
                            0.98 * e.angularVelocity.x,
                            d
                          )),
                          (e.angularVelocity.y = s.MathUtils.lerp(
                            e.angularVelocity.y,
                            0.98 * e.angularVelocity.y,
                            d
                          )),
                          (e.angularVelocity.z = s.MathUtils.lerp(
                            e.angularVelocity.z,
                            0.98 * e.angularVelocity.z,
                            d
                          ));
                      },
                    },
                    {
                      key: "onInputChange",
                      value: function () {
                        l(h(t.prototype), "onInputChange", this).call(this),
                          this.actions.wheelBrake.justPressed &&
                            this.setBrake(1e3),
                          this.actions.wheelBrake.justReleased &&
                            this.setBrake(0);
                      },
                    },
                    {
                      key: "readAirplaneData",
                      value: function (e) {
                        var t = this;
                        e.scene.traverse(function (e) {
                          e.hasOwnProperty("userData") &&
                            e.userData.hasOwnProperty("data") &&
                            ("rotor" === e.userData.data && (t.rotor = e),
                            "rudder" === e.userData.data && (t.rudder = e),
                            "elevator" === e.userData.data &&
                              t.elevators.push(e),
                            "aileron" === e.userData.data &&
                              e.userData.hasOwnProperty("side") &&
                              ("left" === e.userData.side
                                ? (t.leftAileron = e)
                                : "right" === e.userData.side &&
                                  (t.rightAileron = e)));
                        });
                      },
                    },
                    {
                      key: "inputReceiverInit",
                      value: function () {
                        l(h(t.prototype), "inputReceiverInit", this).call(this),
                          this.world.updateControls([
                            { keys: ["W"], desc: "Increase rotor RPM" },
                            { keys: ["S"], desc: "Decrease rotor RPM" },
                            { keys: ["\u2191", "\u2193"], desc: "Elevators" },
                            {
                              keys: ["\u2190", "\u2192", "or", "A", "D"],
                              desc: "Ailerons",
                            },
                            { keys: ["Q", "E"], desc: "Rudder / Steering" },
                            { keys: ["Space"], desc: "Brake" },
                            { keys: ["F"], desc: "Exit vehicle" },
                          ]);
                      },
                    },
                  ]),
                  t
                );
              })(r.Vehicle);
            t.Airplane = v;
          },
          "./src/ts/vehicles/Car.ts": function (e, t, n) {
            "use strict";
            Object.defineProperty(t, "__esModule", { value: !0 });
            var i = n("./src/lib/cannon/cannon.js"),
              r = n("./src/ts/vehicles/Vehicle.ts"),
              a = n("./src/ts/core/KeyBinding.ts"),
              o = n("./node_modules/three/build/three.module.js"),
              s = n("./src/ts/core/Utilities.ts"),
              u = n("./src/ts/simulation/SpringSimulator.ts"),
              v = (function (e) {
                function t(e) {
                  var n;
                  return (
                    f(this, t),
                    ((n = c(
                      this,
                      h(t).call(this, e, {
                        radius: 0.25,
                        suspensionStiffness: 20,
                        suspensionRestLength: 0.35,
                        frictionSlip: 0.8,
                        dampingRelaxation: 2,
                        dampingCompression: 2,
                        rollInfluence: 0.9,
                      })
                    )).drive = "awd"),
                    (n.gear = 1),
                    (n.timeToShift = 0.2),
                    n.readCarData(e),
                    (n.collision.preStep = function (e) {
                      n.physicsPreStep(e, d(n));
                    }),
                    (n.actions = {
                      throttle: new a.KeyBinding("KeyW"),
                      reverse: new a.KeyBinding("KeyS"),
                      brake: new a.KeyBinding("Space"),
                      left: new a.KeyBinding("KeyA"),
                      right: new a.KeyBinding("KeyD"),
                      exitVehicle: new a.KeyBinding("KeyF"),
                    }),
                    (n.steeringSimulator = new u.SpringSimulator(60, 10, 0.6)),
                    n
                  );
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "update",
                      value: function (e) {
                        l(h(t.prototype), "update", this).call(this, e);
                        var n = new o.Quaternion(
                            this.collision.quaternion.x,
                            this.collision.quaternion.y,
                            this.collision.quaternion.z,
                            this.collision.quaternion.w
                          ),
                          r = new o.Vector3(0, 0, 1).applyQuaternion(n),
                          a = { R: -4, 0: 0, 1: 5, 2: 9, 3: 13, 4: 17, 5: 22 },
                          u = new i.Vec3().copy(this.collision.velocity),
                          c = u.dot(s.cannonVector(r));
                        u.normalize();
                        var d = s.getSignedAngleBetweenVectors(
                          s.threeVector(u),
                          r
                        );
                        if (this.shiftTimer > 0)
                          (this.shiftTimer -= e),
                            this.shiftTimer < 0 && (this.shiftTimer = 0);
                        else if (this.actions.reverse.isPressed) {
                          var p = (a.R - c) / Math.abs(a.R),
                            f = (500 / this.gear) * Math.pow(Math.abs(p), 1);
                          this.applyEngineForce(f);
                        } else {
                          var m =
                            (a[this.gear] - c) /
                            (a[this.gear] - a[this.gear - 1]);
                          if (m < 0.1 && this.gear < 5) this.shiftUp();
                          else if (this.gear > 1 && m > 1.2) this.shiftDown();
                          else if (this.actions.throttle.isPressed) {
                            var v = (500 / this.gear) * Math.pow(m, 1);
                            this.applyEngineForce(-v);
                          }
                        }
                        var g = o.MathUtils.clamp(0.3 * c, 1, Number.MAX_VALUE);
                        if (this.actions.right.isPressed) {
                          var y = Math.min(-0.8 / g, -d);
                          this.steeringSimulator.target = o.MathUtils.clamp(
                            y,
                            -0.8,
                            0.8
                          );
                        } else if (this.actions.left.isPressed) {
                          var x = Math.max(0.8 / g, -d);
                          this.steeringSimulator.target = o.MathUtils.clamp(
                            x,
                            -0.8,
                            0.8
                          );
                        } else this.steeringSimulator.target = 0;
                        this.steeringSimulator.simulate(e),
                          this.setSteeringValue(
                            this.steeringSimulator.position
                          ),
                          (this.steeringWheel.rotation.z =
                            2 * -this.steeringSimulator.position),
                          this.rayCastVehicle.numWheelsOnGround < 3 &&
                            Math.abs(this.collision.velocity.length()) < 0.1 &&
                            this.collision.quaternion.copy(
                              this.collision.initQuaternion
                            );
                      },
                    },
                    {
                      key: "shiftUp",
                      value: function () {
                        this.gear++,
                          (this.shiftTimer = this.timeToShift),
                          this.applyEngineForce(0);
                      },
                    },
                    {
                      key: "shiftDown",
                      value: function () {
                        this.gear--,
                          (this.shiftTimer = this.timeToShift),
                          this.applyEngineForce(0);
                      },
                    },
                    {
                      key: "physicsPreStep",
                      value: function (e, t) {
                        var n = new o.Quaternion(
                          e.quaternion.x,
                          e.quaternion.y,
                          e.quaternion.z,
                          e.quaternion.w
                        );
                        new o.Vector3(0, 0, 1).applyQuaternion(n),
                          this.rayCastVehicle.numWheelsOnGround;
                      },
                    },
                    {
                      key: "onInputChange",
                      value: function () {
                        l(h(t.prototype), "onInputChange", this).call(this),
                          (this.actions.throttle.justReleased ||
                            this.actions.reverse.justReleased) &&
                            this.applyEngineForce(0),
                          this.actions.brake.justPressed &&
                            this.setBrake(1e6, "rwd"),
                          this.actions.brake.justReleased &&
                            this.setBrake(0, "rwd");
                      },
                    },
                    {
                      key: "inputReceiverInit",
                      value: function () {
                        l(h(t.prototype), "inputReceiverInit", this).call(this),
                          this.world.updateControls([
                            { keys: ["W"], desc: "Throttle" },
                            { keys: ["S"], desc: "Brake / Reverse" },
                            { keys: ["A", "D"], desc: "Steering" },
                            { keys: ["Space"], desc: "Handbrake" },
                            { keys: ["F"], desc: "Exit vehicle" },
                          ]);
                      },
                    },
                    {
                      key: "readCarData",
                      value: function (e) {
                        var t = this;
                        e.scene.traverse(function (e) {
                          e.hasOwnProperty("userData") &&
                            e.userData.hasOwnProperty("data") &&
                            "steering_wheel" === e.userData.data &&
                            (t.steeringWheel = e);
                        });
                      },
                    },
                  ]),
                  t
                );
              })(r.Vehicle);
            t.Car = v;
          },
          "./src/ts/vehicles/Helicopter.ts": function (e, t, n) {
            "use strict";
            Object.defineProperty(t, "__esModule", { value: !0 });
            var i = n("./src/lib/cannon/cannon.js"),
              r = n("./src/ts/core/Utilities.ts"),
              a = n("./src/ts/vehicles/Vehicle.ts"),
              o = n("./src/ts/core/KeyBinding.ts"),
              s = n("./node_modules/three/build/three.module.js"),
              u = (function (e) {
                function t(e) {
                  var n;
                  return (
                    f(this, t),
                    ((n = c(this, h(t).call(this, e))).rotors = []),
                    (n.enginePower = 0),
                    n.readHelicopterData(e),
                    (n.collision.preStep = function (e) {
                      n.physicsPreStep(e, d(n));
                    }),
                    (n.actions = {
                      ascend: new o.KeyBinding("KeyW"),
                      descend: new o.KeyBinding("KeyS"),
                      pitchUp: new o.KeyBinding("ArrowDown"),
                      pitchDown: new o.KeyBinding("ArrowUp"),
                      yawLeft: new o.KeyBinding("KeyQ"),
                      yawRight: new o.KeyBinding("KeyE"),
                      rollLeft: new o.KeyBinding("ArrowLeft", "KeyA"),
                      rollRight: new o.KeyBinding("ArrowRight", "KeyD"),
                      exitVehicle: new o.KeyBinding("KeyF"),
                    }),
                    n
                  );
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "update",
                      value: function (e) {
                        var n = this;
                        l(h(t.prototype), "update", this).call(this, e),
                          void 0 !== this.controllingCharacter
                            ? (this.enginePower < 1 &&
                                (this.enginePower += 0.2 * e),
                              this.enginePower > 1 && (this.enginePower = 1))
                            : (this.enginePower > 0 &&
                                (this.enginePower -= 0.06 * e),
                              this.enginePower < 0 && (this.enginePower = 0)),
                          this.rotors.forEach(function (t) {
                            t.rotateX(n.enginePower * e * 30);
                          });
                      },
                    },
                    {
                      key: "physicsPreStep",
                      value: function (e, t) {
                        var n = new s.Quaternion(
                            e.quaternion.x,
                            e.quaternion.y,
                            e.quaternion.z,
                            e.quaternion.w
                          ),
                          a = new s.Vector3(1, 0, 0).applyQuaternion(n),
                          o = new s.Vector3(0, 1, 0),
                          l = new s.Vector3(0, 1, 0).applyQuaternion(n),
                          u = new s.Vector3(0, 0, 1).applyQuaternion(n);
                        t.actions.ascend.isPressed &&
                          ((e.velocity.x += 0.15 * l.x * this.enginePower),
                          (e.velocity.y += 0.15 * l.y * this.enginePower),
                          (e.velocity.z += 0.15 * l.z * this.enginePower)),
                          t.actions.descend.isPressed &&
                            ((e.velocity.x -= 0.15 * l.x * this.enginePower),
                            (e.velocity.y -= 0.15 * l.y * this.enginePower),
                            (e.velocity.z -= 0.15 * l.z * this.enginePower));
                        var c = t.world.physicsWorld.gravity,
                          h = new i.Vec3(-c.x, -c.y, -c.z).length();
                        (h *= t.world.physicsFrameTime), (h *= 0.98);
                        var d = o.dot(l);
                        h *= Math.sqrt(s.MathUtils.clamp(d, 0, 1));
                        var p = r.threeVector(e.velocity);
                        (p.x *= l.x),
                          (p.y *= l.y),
                          (p.z *= l.z),
                          p.multiplyScalar(-0.01);
                        var f = l.clone();
                        if (
                          (f.multiplyScalar(h),
                          f.multiplyScalar(Math.pow(t.enginePower, 3)),
                          f.add(p),
                          (e.velocity.x += f.x),
                          (e.velocity.y += f.y),
                          (e.velocity.z += f.z),
                          (e.velocity.x *= 0.99),
                          (e.velocity.z *= 0.99),
                          void 0 !== this.controllingCharacter)
                        ) {
                          var m = new s.Quaternion().setFromUnitVectors(l, o);
                          (m.x *= 0.3),
                            (m.y *= 0.3),
                            (m.z *= 0.3),
                            (m.w *= 0.3);
                          var v = new s.Euler().setFromQuaternion(m);
                          (e.angularVelocity.x += v.x),
                            (e.angularVelocity.y += v.y),
                            (e.angularVelocity.z += v.z);
                        }
                        t.actions.pitchUp.isPressed &&
                          ((e.angularVelocity.x -=
                            0.1 * a.x * this.enginePower),
                          (e.angularVelocity.y -= 0.1 * a.y * this.enginePower),
                          (e.angularVelocity.z -=
                            0.1 * a.z * this.enginePower)),
                          t.actions.pitchDown.isPressed &&
                            ((e.angularVelocity.x +=
                              0.1 * a.x * this.enginePower),
                            (e.angularVelocity.y +=
                              0.1 * a.y * this.enginePower),
                            (e.angularVelocity.z +=
                              0.1 * a.z * this.enginePower)),
                          t.actions.yawLeft.isPressed &&
                            ((e.angularVelocity.x +=
                              0.1 * l.x * this.enginePower),
                            (e.angularVelocity.y +=
                              0.1 * l.y * this.enginePower),
                            (e.angularVelocity.z +=
                              0.1 * l.z * this.enginePower)),
                          t.actions.yawRight.isPressed &&
                            ((e.angularVelocity.x -=
                              0.1 * l.x * this.enginePower),
                            (e.angularVelocity.y -=
                              0.1 * l.y * this.enginePower),
                            (e.angularVelocity.z -=
                              0.1 * l.z * this.enginePower)),
                          t.actions.rollLeft.isPressed &&
                            ((e.angularVelocity.x -=
                              0.1 * u.x * this.enginePower),
                            (e.angularVelocity.y -=
                              0.1 * u.y * this.enginePower),
                            (e.angularVelocity.z -=
                              0.1 * u.z * this.enginePower)),
                          t.actions.rollRight.isPressed &&
                            ((e.angularVelocity.x +=
                              0.1 * u.x * this.enginePower),
                            (e.angularVelocity.y +=
                              0.1 * u.y * this.enginePower),
                            (e.angularVelocity.z +=
                              0.1 * u.z * this.enginePower)),
                          (e.angularVelocity.x *= 0.97),
                          (e.angularVelocity.y *= 0.97),
                          (e.angularVelocity.z *= 0.97);
                      },
                    },
                    {
                      key: "readHelicopterData",
                      value: function (e) {
                        var t = this;
                        e.scene.traverse(function (e) {
                          e.hasOwnProperty("userData") &&
                            e.userData.hasOwnProperty("data") &&
                            "rotor" === e.userData.data &&
                            t.rotors.push(e);
                        });
                      },
                    },
                    {
                      key: "inputReceiverInit",
                      value: function () {
                        l(h(t.prototype), "inputReceiverInit", this).call(this),
                          this.world.updateControls([
                            { keys: ["W"], desc: "Ascend" },
                            { keys: ["S"], desc: "Descend" },
                            { keys: ["\u2191", "\u2193"], desc: "Pitch" },
                            {
                              keys: ["\u2190", "\u2192", "or", "A", "D"],
                              desc: "Roll",
                            },
                            { keys: ["Q", "E"], desc: "Yaw" },
                            { keys: ["F"], desc: "Exit vehicle" },
                          ]);
                      },
                    },
                  ]),
                  t
                );
              })(a.Vehicle);
            t.Helicopter = u;
          },
          "./src/ts/vehicles/Vehicle.ts": function (e, t, n) {
            "use strict";
            Object.defineProperty(t, "__esModule", { value: !0 });
            var i = n("./node_modules/three/build/three.module.js"),
              r = n("./src/lib/cannon/cannon.js"),
              a = n("./node_modules/lodash/lodash.js"),
              o = n("./src/ts/vehicles/VehicleSeat.ts"),
              s = n("./src/ts/vehicles/Wheel.ts"),
              l = n("./src/ts/vehicles/VehicleDoor.ts"),
              u = n("./src/ts/core/Utilities.ts"),
              d = n("./src/ts/enums/CollisionGroups.ts"),
              v = (function (e) {
                function t(e, n) {
                  var a;
                  f(this, t),
                    ((a = c(this, h(t).call(this))).actions = {}),
                    (a.seats = []),
                    (a.wheels = []),
                    (a.materials = []),
                    (a.firstPerson = !1),
                    void 0 === n && (n = {}),
                    (n.chassisConnectionPointLocal = new r.Vec3()),
                    (n.axleLocal = new r.Vec3(-1, 0, 0)),
                    (n.directionLocal = new r.Vec3(0, -1, 0));
                  var o = new r.Material("Mat");
                  return (
                    (o.friction = 0.01),
                    (a.collision = new r.Body({ mass: 50 })),
                    (a.collision.material = o),
                    a.readVehicleData(e),
                    (a.modelContainer = new i.Group()),
                    a.add(a.modelContainer),
                    a.modelContainer.add(e.scene),
                    (a.rayCastVehicle = new r.RaycastVehicle({
                      chassisBody: a.collision,
                      indexUpAxis: 1,
                      indexRightAxis: 0,
                      indexForwardAxis: 2,
                    })),
                    a.wheels.forEach(function (e) {
                      n.chassisConnectionPointLocal.set(
                        e.position.x,
                        e.position.y + 0.2,
                        e.position.z
                      );
                      var t = a.rayCastVehicle.addWheel(n);
                      e.rayCastWheelInfoIndex = t;
                    }),
                    (a.help = new i.AxesHelper(2)),
                    a
                  );
                }
                return (
                  p(t, e),
                  m(t, [
                    {
                      key: "update",
                      value: function (e) {
                        this.help.position.copy(
                          u.threeVector(this.collision.interpolatedPosition)
                        ),
                          this.help.quaternion.copy(
                            u.threeQuat(this.collision.interpolatedQuaternion)
                          ),
                          this.position.set(
                            this.collision.interpolatedPosition.x,
                            this.collision.interpolatedPosition.y,
                            this.collision.interpolatedPosition.z
                          ),
                          this.quaternion.set(
                            this.collision.interpolatedQuaternion.x,
                            this.collision.interpolatedQuaternion.y,
                            this.collision.interpolatedQuaternion.z,
                            this.collision.interpolatedQuaternion.w
                          ),
                          this.seats.forEach(function (t) {
                            t.update(e);
                          });
                        for (
                          var t = 0;
                          t < this.rayCastVehicle.wheelInfos.length;
                          t++
                        ) {
                          this.rayCastVehicle.updateWheelTransform(t);
                          var n =
                              this.rayCastVehicle.wheelInfos[t].worldTransform,
                            i = this.wheels[t].wheelObject;
                          i.position.copy(u.threeVector(n.position)),
                            i.quaternion.copy(u.threeQuat(n.quaternion));
                          var a = new r.Vec3();
                          this.rayCastVehicle.getVehicleAxisWorld(
                            this.rayCastVehicle.indexUpAxis,
                            a
                          );
                        }
                      },
                    },
                    {
                      key: "onInputChange",
                      value: function () {
                        this.actions.exitVehicle.justPressed &&
                          void 0 !== this.controllingCharacter &&
                          this.controllingCharacter.charState
                            .canLeaveVehicles &&
                          ((this.controllingCharacter.modelContainer.visible =
                            !0),
                          this.controllingCharacter.exitVehicle());
                      },
                    },
                    {
                      key: "resetControls",
                      value: function () {
                        for (var e in this.actions)
                          this.actions.hasOwnProperty(e) &&
                            this.triggerAction(e, !1);
                      },
                    },
                    {
                      key: "allowSleep",
                      value: function (e) {
                        (this.collision.allowSleep = e),
                          !1 === e && this.collision.wakeUp();
                      },
                    },
                    {
                      key: "handleKeyboardEvent",
                      value: function (e, t, n) {
                        if ("KeyC" === t && !0 === n && !0 === e.shiftKey)
                          this.resetControls(),
                            (this.world.cameraOperator.characterCaller =
                              this.controllingCharacter),
                            this.world.inputManager.setInputReceiver(
                              this.world.cameraOperator
                            );
                        else if ("KeyC" === t)
                          (this.firstPerson = !0),
                            this.world.cameraOperator.setRadius(0, !0),
                            (this.controllingCharacter.modelContainer.visible =
                              !1);
                        else
                          for (var i in this.actions)
                            if (this.actions.hasOwnProperty(i)) {
                              var r = this.actions[i];
                              a.includes(r.eventCodes, t) &&
                                this.triggerAction(i, n);
                            }
                      },
                    },
                    {
                      key: "triggerAction",
                      value: function (e, t) {
                        var n = this.actions[e];
                        n.isPressed !== t &&
                          ((n.isPressed = t),
                          (n.justPressed = !1),
                          (n.justReleased = !1),
                          t ? (n.justPressed = !0) : (n.justReleased = !0),
                          this.onInputChange(),
                          (n.justPressed = !1),
                          (n.justReleased = !1));
                      },
                    },
                    { key: "handleMouseButton", value: function (e, t, n) {} },
                    {
                      key: "handleMouseMove",
                      value: function (e, t, n) {
                        this.world.cameraOperator.move(t, n);
                      },
                    },
                    {
                      key: "handleMouseWheel",
                      value: function (e, t) {
                        this.world.scrollTheTimeScale(t);
                      },
                    },
                    {
                      key: "inputReceiverInit",
                      value: function () {
                        (this.collision.allowSleep = !1),
                          this.world.cameraOperator.setRadius(3);
                      },
                    },
                    {
                      key: "inputReceiverUpdate",
                      value: function (e) {
                        if (this.firstPerson) {
                          var t = new i.Vector3().copy(this.camera.position);
                          t.applyQuaternion(this.quaternion),
                            this.world.cameraOperator.target.copy(
                              t.add(this.position)
                            );
                        } else
                          this.world.cameraOperator.target.set(
                            this.position.x,
                            this.position.y + 0.5,
                            this.position.z
                          );
                      },
                    },
                    {
                      key: "getMountPoint",
                      value: function (e) {
                        return this.seats[0].entryPoint.position;
                      },
                    },
                    {
                      key: "setPosition",
                      value: function (e, t, n) {
                        (this.collision.position.x = e),
                          (this.collision.position.y = t),
                          (this.collision.position.z = n);
                      },
                    },
                    {
                      key: "setSteeringValue",
                      value: function (e) {
                        var t = this;
                        this.wheels.forEach(function (n) {
                          n.steering &&
                            t.rayCastVehicle.setSteeringValue(
                              e,
                              n.rayCastWheelInfoIndex
                            );
                        });
                      },
                    },
                    {
                      key: "applyEngineForce",
                      value: function (e) {
                        var t = this;
                        this.wheels.forEach(function (n) {
                          (t.drive !== n.drive && "awd" !== t.drive) ||
                            t.rayCastVehicle.applyEngineForce(
                              e,
                              n.rayCastWheelInfoIndex
                            );
                        });
                      },
                    },
                    {
                      key: "setBrake",
                      value: function (e, t) {
                        var n = this;
                        this.wheels.forEach(function (i) {
                          (void 0 !== t && t !== i.drive) ||
                            n.rayCastVehicle.setBrake(
                              e,
                              i.rayCastWheelInfoIndex
                            );
                        });
                      },
                    },
                    {
                      key: "addToWorld",
                      value: function (e) {
                        var t = this;
                        a.includes(e.vehicles, this)
                          ? console.warn(
                              "Adding character to a world in which it already exists."
                            )
                          : void 0 === this.rayCastVehicle
                          ? console.error(
                              "Trying to create vehicle without raycastVehicleComponent"
                            )
                          : ((this.world = e),
                            e.vehicles.push(this),
                            e.graphicsWorld.add(this),
                            this.rayCastVehicle.addToWorld(e.physicsWorld),
                            this.wheels.forEach(function (e) {
                              t.world.graphicsWorld.attach(e.wheelObject);
                            }));
                      },
                    },
                    {
                      key: "removeFromWorld",
                      value: function (e) {
                        a.includes(e.vehicles, this)
                          ? ((this.world = void 0),
                            a.pull(e.vehicles, this),
                            e.graphicsWorld.remove(this),
                            e.physicsWorld.remove(this.collision))
                          : console.warn(
                              "Removing character from a world in which it isn't present."
                            );
                      },
                    },
                    {
                      key: "readVehicleData",
                      value: function (e) {
                        var t = this;
                        e.scene.traverse(function (n) {
                          if (
                            (n.isMesh &&
                              (u.setupMeshProperties(n),
                              void 0 !== n.material &&
                                t.materials.push(n.material)),
                            n.hasOwnProperty("userData") &&
                              n.userData.hasOwnProperty("data"))
                          ) {
                            if ("seat" === n.userData.data) {
                              var i = new o.VehicleSeat(n);
                              (i.vehicle = t),
                                n.userData.hasOwnProperty("door_object") &&
                                  (i.door = new l.VehicleDoor(
                                    e.scene.getObjectByName(
                                      n.userData.door_object
                                    )
                                  )),
                                n.userData.hasOwnProperty("door_side")
                                  ? (i.doorSide = n.userData.door_side)
                                  : console.error(
                                      "Seat object " +
                                        n +
                                        " has no doorSide property."
                                    ),
                                n.userData.hasOwnProperty("entry_point")
                                  ? (i.entryPoint = e.scene.getObjectByName(
                                      n.userData.entry_point
                                    ))
                                  : console.error(
                                      "Seat object " +
                                        n +
                                        " has no entry point reference property."
                                    ),
                                n.userData.hasOwnProperty("seat_type")
                                  ? (i.type = n.userData.seat_type)
                                  : console.error(
                                      "Seat object " +
                                        n +
                                        " has no seat type property."
                                    ),
                                t.seats.push(i);
                            }
                            if (
                              ("camera" === n.userData.data && (t.camera = n),
                              "wheel" === n.userData.data)
                            ) {
                              var a = new s.Wheel(n);
                              (a.position = n.position),
                                n.userData.hasOwnProperty("steering") &&
                                  (a.steering = "true" === n.userData.steering),
                                n.userData.hasOwnProperty("drive") &&
                                  (a.drive = n.userData.drive),
                                t.wheels.push(a);
                            }
                            if ("collision" === n.userData.data)
                              if ("box" === n.userData.shape) {
                                n.visible = !1;
                                var c = new r.Box(
                                  new r.Vec3(n.scale.x, n.scale.y, n.scale.z)
                                );
                                (c.collisionFilterMask =
                                  ~d.CollisionGroups.TrimeshColliders),
                                  t.collision.addShape(
                                    c,
                                    new r.Vec3(
                                      n.position.x,
                                      n.position.y,
                                      n.position.z
                                    )
                                  );
                              } else if ("sphere" === n.userData.shape) {
                                n.visible = !1;
                                var h = new r.Sphere(n.scale.x);
                                (h.collisionFilterGroup =
                                  d.CollisionGroups.TrimeshColliders),
                                  t.collision.addShape(
                                    h,
                                    new r.Vec3(
                                      n.position.x,
                                      n.position.y,
                                      n.position.z
                                    )
                                  );
                              }
                            "navmesh" === n.userData.data && (n.visible = !1);
                          }
                        }),
                          0 === this.collision.shapes.length &&
                            console.warn(
                              "Vehicle " +
                                typeof this +
                                " has no collision data."
                            ),
                          0 === this.seats.length &&
                            console.warn(
                              "Vehicle " + typeof this + " has no seats."
                            );
                      },
                    },
                  ]),
                  t
                );
              })(i.Object3D);
            t.Vehicle = v;
          },
          "./src/ts/vehicles/VehicleDoor.ts": function (e, t, n) {
            "use strict";
            Object.defineProperty(t, "__esModule", { value: !0 });
            var i = n("./node_modules/three/build/three.module.js"),
              r = (function () {
                function e(t) {
                  f(this, e),
                    (this.rotation = 0),
                    (this.targetRotation = 0),
                    (this.rotationSpeed = 5),
                    (this.doorObject = t);
                }
                return (
                  m(e, [
                    {
                      key: "update",
                      value: function (e) {
                        this.rotation < this.targetRotation
                          ? ((this.rotation += e * this.rotationSpeed),
                            this.rotation > this.targetRotation &&
                              (this.rotation = this.targetRotation))
                          : this.rotation > this.targetRotation &&
                            ((this.rotation -= e * this.rotationSpeed),
                            this.rotation < this.targetRotation &&
                              (this.rotation = this.targetRotation));
                        var t =
                          Math.sin(this.rotation * Math.PI * 0.5) *
                          -Math.PI *
                          0.45;
                        this.doorObject.setRotationFromEuler(
                          new i.Euler(0, t, 0)
                        );
                      },
                    },
                    {
                      key: "open",
                      value: function () {
                        this.targetRotation = 1;
                      },
                    },
                    {
                      key: "close",
                      value: function () {
                        this.targetRotation = 0;
                      },
                    },
                    {
                      key: "isOpen",
                      value: function () {
                        return this.rotation > 0.5;
                      },
                    },
                  ]),
                  e
                );
              })();
            t.VehicleDoor = r;
          },
          "./src/ts/vehicles/VehicleSeat.ts": function (e, t, n) {
            "use strict";
            Object.defineProperty(t, "__esModule", { value: !0 });
            var i = (function () {
              function e(t) {
                f(this, e), (this.seatPoint = t);
              }
              return (
                m(e, [
                  {
                    key: "update",
                    value: function (e) {
                      void 0 !== this.door && this.door.update(e);
                    },
                  },
                  {
                    key: "isDoorOpen",
                    value: function () {
                      return void 0 === this.door || this.door.isOpen();
                    },
                  },
                  {
                    key: "openDoor",
                    value: function () {
                      void 0 !== this.door && this.door.open();
                    },
                  },
                  {
                    key: "closeDoor",
                    value: function () {
                      void 0 !== this.door && this.door.close();
                    },
                  },
                ]),
                e
              );
            })();
            t.VehicleSeat = i;
          },
          "./src/ts/vehicles/Wheel.ts": function (e, t, n) {
            "use strict";
            Object.defineProperty(t, "__esModule", { value: !0 }),
              (t.Wheel = function e(t) {
                f(this, e), (this.steering = !1), (this.wheelObject = t);
              });
          },
        });
      }),
        (e.exports = i());
    },
  },
  [[236, 1, 2]],
]);
